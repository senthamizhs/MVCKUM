!function (e) { e.jqx = e.jqx || {}, e.jqx.define = function (e, t, i) { e[t] = function () { this.baseType && (this.base = new e[this.baseType], this.base.defineInstance()), this.defineInstance() }, e[t].prototype.defineInstance = function () { }, e[t].prototype.base = null, e[t].prototype.baseType = void 0, i && e[i] && (e[t].prototype.baseType = i) }, e.jqx.invoke = function (t, i) { if (0 != i.length) { for (var s = typeof i == Array || i.length > 0 ? i[0] : i, r = typeof i == Array || i.length > 1 ? Array.prototype.slice.call(i, 1) : e({}).toArray() ; void 0 == t[s] && null != t.base;) { if (void 0 != t[s] && e.isFunction(t[s])) return t[s].apply(t, r); if ("string" == typeof s && void 0 != t[o = s.toLowerCase()] && e.isFunction(t[o])) return t[o].apply(t, r); t = t.base } if (void 0 != t[s] && e.isFunction(t[s])) return t[s].apply(t, r); if ("string" == typeof s) { var o = s.toLowerCase(); if (void 0 != t[o] && e.isFunction(t[o])) return t[o].apply(t, r) } } }, e.jqx.hasProperty = function (e, t) { if ("object" == typeof t) for (var i in t) { for (var s = e; s;) { if (s.hasOwnProperty(i)) return !0; if (s.hasOwnProperty(i.toLowerCase())) return !0; s = s.base } return !1 } else for (; e;) { if (e.hasOwnProperty(t)) return !0; if (e.hasOwnProperty(t.toLowerCase())) return !0; e = e.base } return !1 }, e.jqx.hasFunction = function (t, i) { if (0 == i.length) return !1; if (void 0 == t) return !1; var s = typeof i == Array || i.length > 0 ? i[0] : i; for ((typeof i == Array || i.length > 1) && Array.prototype.slice.call(i, 1) ; void 0 == t[s] && null != t.base;) { if (t[s] && e.isFunction(t[s])) return !0; if ("string" == typeof s && t[r = s.toLowerCase()] && e.isFunction(t[r])) return !0; t = t.base } if (t[s] && e.isFunction(t[s])) return !0; if ("string" == typeof s) { var r = s.toLowerCase(); if (t[r] && e.isFunction(t[r])) return !0 } return !1 }, e.jqx.isPropertySetter = function (t, i) { return 1 == i.length && "object" == typeof i[0] || 2 == i.length && "string" == typeof i[0] && !e.jqx.hasFunction(t, i) }, e.jqx.validatePropertySetter = function (t, i, s) { if (!e.jqx.propertySetterValidation) return !0; if (1 == i.length && "object" == typeof i[0]) { for (var r in i[0]) { for (var o = t; !o.hasOwnProperty(r) && o.base;) o = o.base; if (!o || !o.hasOwnProperty(r)) { if (!s) { if (o.hasOwnProperty(r.toString().toLowerCase())) return !0; throw "Invalid property: " + r } return !1 } } return !0 } if (2 != i.length) { if (!s) throw "Invalid property: " + i.length >= 0 ? i[0] : ""; return !1 } for (; !t.hasOwnProperty(i[0]) && t.base;) t = t.base; if (!t || !t.hasOwnProperty(i[0])) { if (!s) throw "Invalid property: " + i[0]; return !1 } return !0 }, e.jqx.set = function (t, i) { if (1 == i.length && "object" == typeof i[0]) e.each(i[0], function (i, s) { for (var r = t; !r.hasOwnProperty(i) && null != r.base;) r = r.base; if (r.hasOwnProperty(i)) e.jqx.setvalueraiseevent(r, i, s); else if (r.hasOwnProperty(i.toLowerCase())) e.jqx.setvalueraiseevent(r, i.toLowerCase(), s); else if (e.jqx.propertySetterValidation) throw "jqxCore: invalid property '" + i + "'" }); else if (2 == i.length) { for (; !t.hasOwnProperty(i[0]) && t.base;) t = t.base; if (t.hasOwnProperty(i[0])) e.jqx.setvalueraiseevent(t, i[0], i[1]); else if (t.hasOwnProperty(i[0].toLowerCase())) e.jqx.setvalueraiseevent(t, i[0].toLowerCase(), i[1]); else if (e.jqx.propertySetterValidation) throw "jqxCore: invalid property '" + i[0] + "'" } }, e.jqx.setvalueraiseevent = function (e, t, i) { var s = e[t]; e[t] = i, e.isInitialized && (void 0 != e.propertyChangedHandler && e.propertyChangedHandler(e, t, s, i), void 0 != e.propertyChangeMap && void 0 != e.propertyChangeMap[t] && e.propertyChangeMap[t](e, t, s, i)) }, e.jqx.get = function (e, t) { if (void 0 != t && null != t) { if (e.propertyMap) { var i = e.propertyMap(t); if (null != i) return i } if (e.hasOwnProperty(t)) return e[t]; if (e.hasOwnProperty(t.toLowerCase())) return e[t.toLowerCase()]; var s = void 0; if (typeof t == Array) { if (1 != t.length) return; s = t[0] } else "string" == typeof t && (s = t); for (; !e.hasOwnProperty(s) && e.base;) e = e.base; return e ? e[s] : void 0 } }, e.jqx.serialize = function (t) { var i = ""; if (e.isArray(t)) { i = "["; for (r = 0; r < t.length; r++) r > 0 && (i += ", "), i += e.jqx.serialize(t[r]); i += "]" } else if ("object" == typeof t) { i = "{"; var s = 0; for (var r in t) s++ > 0 && (i += ", "), i += r + ": " + e.jqx.serialize(t[r]); i += "}" } else i = t.toString(); return i }, e.jqx.propertySetterValidation = !0, e.jqx.jqxWidgetProxy = function (t, i, s) { e(i); var r = e.data(i, t); if (void 0 != r) { var o = r.instance; if (e.jqx.hasFunction(o, s)) return e.jqx.invoke(o, s); if (e.jqx.isPropertySetter(o, s)) { if (e.jqx.validatePropertySetter(o, s)) return void e.jqx.set(o, s) } else { if ("object" == typeof s && 0 == s.length) return; if ("object" == typeof s && 1 == s.length && e.jqx.hasProperty(o, s[0])) return e.jqx.get(o, s[0]); if ("string" == typeof s && e.jqx.hasProperty(o, s[0])) return e.jqx.get(o, s) } throw "jqxCore: Invalid parameter '" + e.jqx.serialize(s) + "' does not exist." } }, e.jqx.applyWidget = function (t, i, s, r) { var o = !1; try { o = void 0 != window.MSApp } catch (e) { } var a = e(t); r ? (r.host = a, r.element = t) : r = new e.jqx["_" + i], "" == t.id && (t.id = e.jqx.utilities.createId()); var n = { host: a, element: t, instance: r }; r.widgetName = i, e.data(t, i, n), e.data(t, "jqxWidget", n.instance); for (var l = new Array, r = n.instance; r;) r.isInitialized = !1, l.push(r), r = r.base; l.reverse(), l[0].theme = e.jqx.theme || "", e.jqx.jqxWidgetProxy(i, t, s); for (var h in l) r = l[h], 0 == h && (r.host = a, r.element = t, r.WinJS = o), void 0 != r && null != r.createInstance && (o ? MSApp.execUnsafeLocalFunction(function () { r.createInstance(s) }) : (s && s[0], r.createInstance(s))); for (var h in l) void 0 != l[h] && (l[h].isInitialized = !0); o ? MSApp.execUnsafeLocalFunction(function () { n.instance.refresh(!0) }) : n.instance.refresh(!0) }, e.jqx.jqxWidget = function (t, i, s) { try { jqxArgs = Array.prototype.slice.call(s, 0) } catch (e) { jqxArgs = "" } try { void 0 != window.MSApp } catch (e) { } var r = t, o = ""; i && (o = "_" + i), e.jqx.define(e.jqx, "_" + r, o), e.fn[r] = function () { var t = Array.prototype.slice.call(arguments, 0); if (0 == t.length || 1 == t.length && "object" == typeof t[0]) { if (0 == this.length) throw this.selector ? new Error("Invalid jQuery Selector - " + this.selector + "! Please, check whether the used ID or CSS Class name is correct.") : new Error("Invalid jQuery Selector! Please, check whether the used ID or CSS Class name is correct."); return this.each(function () { e(this); var i = this; null == e.data(i, r) ? e.jqx.applyWidget(i, r, t, void 0) : e.jqx.jqxWidgetProxy(r, this, t) }) } if (0 == this.length) throw this.selector ? new Error("Invalid jQuery Selector - " + this.selector + "! Please, check whether the used ID or CSS Class name is correct.") : new Error("Invalid jQuery Selector! Please, check whether the used ID or CSS Class name is correct."); var i = null, s = 0; return this.each(function () { var o = e.jqx.jqxWidgetProxy(r, this, t); if (0 == s) i = o, s++; else { if (1 == s) { var a = []; a.push(i), i = a } i.push(o) } }), i }; try { e.extend(e.jqx["_" + r].prototype, Array.prototype.slice.call(s, 0)[0]) } catch (e) { } e.extend(e.jqx["_" + r].prototype, { toThemeProperty: function (e, t) { return "" == this.theme ? e : null != t && t ? e + "-" + this.theme : e + " " + e + "-" + this.theme } }), e.jqx["_" + r].prototype.refresh = function () { this.base && this.base.refresh(!0) }, e.jqx["_" + r].prototype.createInstance = function () { }, e.jqx["_" + r].prototype.applyTo = function (t, i) { if (!(i instanceof Array)) { var s = []; s.push(i), i = s } e.jqx.applyWidget(t, r, i, this) }, e.jqx["_" + r].prototype.getInstance = function () { return this }, e.jqx["_" + r].prototype.propertyChangeMap = {}, e.jqx["_" + r].prototype.addHandler = function (t, i, s, r) { switch (i) { case "mousewheel": if (window.addEventListener) return e.jqx.browser.mozilla ? t[0].addEventListener("DOMMouseScroll", s, !1) : t[0].addEventListener("mousewheel", s, !1), !1; break; case "mousemove": if (window.addEventListener && !r) return t[0].addEventListener("mousemove", s, !1), !1 } void 0 == r || null == r ? t.on ? t.on(i, s) : t.bind(i, s) : t.on ? t.on(i, r, s) : t.bind(i, r, s) }, e.jqx["_" + r].prototype.removeHandler = function (t, i, s) { switch (i) { case "mousewheel": if (window.removeEventListener) return e.jqx.browser.mozilla ? t[0].removeEventListener("DOMMouseScroll", s, !1) : t[0].removeEventListener("mousewheel", s, !1), !1; break; case "mousemove": s && window.removeEventListener && t[0].removeEventListener("mousemove", s, !1) } void 0 != i ? void 0 == s ? t.off ? t.off(i) : t.unbind(i) : t.off ? t.off(i, s) : t.unbind(i, s) : t.off ? t.off() : t.unbind() } }, e.jqx.theme = e.jqx.theme || "", e.jqx.ready = function () { e(window).trigger("jqxReady") }, e.jqx.init = function () { e.each(arguments[0], function (t, i) { "theme" == t && (e.jqx.theme = i), "scrollBarSize" == t && (e.jqx.utilities.scrollBarSize = i), "touchScrollBarSize" == t && (e.jqx.utilities.touchScrollBarSize = i), "scrollBarButtonsVisibility" == t && (e.jqx.utilities.scrollBarButtonsVisibility = i) }) }, e.jqx.utilities = e.jqx.utilities || {}, e.extend(e.jqx.utilities, { scrollBarSize: 15, touchScrollBarSize: 10, scrollBarButtonsVisibility: "visible", createId: function () { var e = function () { return (65536 * (1 + Math.random()) | 0).toString(16).substring(1) }; return "jqxWidget" + e() + e() }, setTheme: function (t, i, s) { if (void 0 !== s) { for (var r = s[0].className.split(" "), o = [], a = [], n = s.children(), l = 0; l < r.length; l += 1) r[l].indexOf(t) >= 0 && (t.length > 0 ? (o.push(r[l]), a.push(r[l].replace(t, i))) : a.push(r[l] + "-" + i)); this._removeOldClasses(o, s), this._addNewClasses(a, s); for (l = 0; l < n.length; l += 1) this.setTheme(t, i, e(n[l])) } }, _removeOldClasses: function (e, t) { for (var i = 0; i < e.length; i += 1) t.removeClass(e[i]) }, _addNewClasses: function (e, t) { for (var i = 0; i < e.length; i += 1) t.addClass(e[i]) }, getOffset: function (t) { var i = e.jqx.mobile.getLeftPos(t[0]); return { top: e.jqx.mobile.getTopPos(t[0]), left: i } }, resize: function (t, i, s, r) { void 0 === r && (r = !0); var o = -1, a = this, n = function (e) { if (!a.hiddenWidgets) return -1; for (var t = -1, i = 0; i < a.hiddenWidgets.length; i++) if (e.id) { if (a.hiddenWidgets[i].id == e.id) { t = i; break } } else if (a.hiddenWidgets[i].id == e[0].id) { t = i; break } return t }; if (this.resizeHandlers) { for (var l = 0; l < this.resizeHandlers.length; l++) if (t.id) { if (this.resizeHandlers[l].id == t.id) { o = l; break } } else if (this.resizeHandlers[l].id == t[0].id) { o = l; break } if (!0 === s) return -1 != o && this.resizeHandlers.splice(o, 1), 0 == this.resizeHandlers.length && ((c = e(window)).off ? (c.off("resize.jqx"), c.off("orientationchange.jqx"), c.off("orientationchanged.jqx")) : (c.unbind("resize.jqx"), c.unbind("orientationchange.jqx"), c.unbind("orientationchanged.jqx")), this.resizeHandlers = null), void (-1 != (h = n(t)) && this.hiddenWidgets && this.hiddenWidgets.splice(h, 1)) } else if (!0 === s) { var h = n(t); return void (-1 != h && this.hiddenWidgets && this.hiddenWidgets.splice(h, 1)) } var a = this, d = function (t, i) { if (a.resizeHandlers) { var s = function (e) { for (var t = -1, i = e.parentNode; i;) t++, i = i.parentNode; return t }, r = function (e, t) { if (!e.widget || !t.widget) return 0; var i = s(e.widget[0]), r = s(t.widget[0]); try { if (i < r) return -1; if (i > r) return 1 } catch (e) { } return 0 }; a.hiddenWidgets = new Array, a.resizeHandlers.sort(r); for (var o = 0; o < a.resizeHandlers.length; o++) { var l = a.resizeHandlers[o], h = l.widget, d = l.data; if (d && d.jqxWidget) { var c = d.jqxWidget.width, u = d.jqxWidget.height; d.jqxWidget.base && (void 0 == c && (c = d.jqxWidget.base.width), void 0 == u && (u = d.jqxWidget.base.height)); var p = !1; null != c && -1 != c.toString().indexOf("%") && (p = !0), null != u && -1 != u.toString().indexOf("%") && (p = !0), e.jqx.isHidden(h) ? -1 === n(h) && (p || !0 === t) && !0 !== l.data.nestedWidget && a.hiddenWidgets.push(l) : void 0 !== t && !0 === t || p && (l.callback(i), a.hiddenWidgets.indexOf(l) >= 0 && a.hiddenWidgets.splice(a.hiddenWidgets.indexOf(l), 1)) } } a.hiddenWidgets.length > 0 && (a.hiddenWidgets.sort(r), a.__resizeInterval && clearInterval(a.__resizeInterval), a.__resizeInterval = setInterval(function () { for (var t = !1, s = new Array, r = 0; r < a.hiddenWidgets.length; r++) { var o = a.hiddenWidgets[r]; e.jqx.isHidden(o.widget) ? (t = !0, s.push(o)) : o.callback && o.callback(i) } a.hiddenWidgets = s, t || clearInterval(a.__resizeInterval) }, 100)) } }; if (!this.resizeHandlers) { this.resizeHandlers = new Array; var c = e(window); c.on ? (this._resizeTimer = null, c.on("resize.jqx", function (e) { void 0 != a._resizeTimer && clearTimeout(a._resizeTimer), a._resizeTimer = setTimeout(function () { d(null, "resize") }, 10) }), c.on("orientationchange.jqx", function (e) { d(null, "orientationchange") }), c.on("orientationchanged.jqx", function (e) { d(null, "orientationchange") })) : (c.bind("resize.jqx", function (e) { d(null, "orientationchange") }), c.bind("orientationchange.jqx", function (e) { d(null, "orientationchange") }), c.bind("orientationchanged.jqx", function (e) { d(null, "orientationchange") })) } r && -1 === o && this.resizeHandlers.push({ id: t[0].id, widget: t, callback: i, data: t.data() }), e.jqx.isHidden(t) && !0 === r && d(!0) }, html: function (t, i) { if (!e(t).on) return e(t).html(i); try { return jQuery.access(t, function (e) { var i = t[0] || {}, s = 0, r = t.length; if (void 0 === e) return 1 === i.nodeType ? i.innerHTML.replace(rinlinejQuery, "") : void 0; var o = /<(?:script|style|link)/i, a = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, n = /<([\w:]+)/, l = new RegExp("<(?:abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)[\\s/>]", "i"), h = /^\s+/, d = { option: [1, "<select multiple='multiple'>", "</select>"], legend: [1, "<fieldset>", "</fieldset>"], thead: [1, "<table>", "</table>"], tr: [2, "<table><tbody>", "</tbody></table>"], td: [3, "<table><tbody><tr>", "</tr></tbody></table>"], col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"], area: [1, "<map>", "</map>"], _default: [0, "", ""] }; if ("string" == typeof e && !o.test(e) && (jQuery.support.htmlSerialize || !l.test(e)) && (jQuery.support.leadingWhitespace || !h.test(e)) && !d[(n.exec(e) || ["", ""])[1].toLowerCase()]) { e = e.replace(a, "<$1></$2>"); try { for (; s < r; s++) 1 === (i = this[s] || {}).nodeType && (jQuery.cleanData(i.getElementsByTagName("*")), i.innerHTML = e); i = 0 } catch (e) { } } i && t.empty().append(e) }, null, i, arguments.length) } catch (s) { return e(t).html(i) } }, hasTransform: function (t) { var i = ""; if ("" == (i = t.css("transform")) || "none" == i) { if ("" != (i = t.parents().css("transform")) && "none" != i) return "" != i && "none" != i; var s = e.jqx.utilities.getBrowser(); "msie" == s.browser ? "" != (i = t.css("-ms-transform")) && "none" != i || (i = t.parents().css("-ms-transform")) : "chrome" == s.browser ? "" != (i = t.css("-webkit-transform")) && "none" != i || (i = t.parents().css("-webkit-transform")) : "opera" == s.browser ? "" != (i = t.css("-o-transform")) && "none" != i || (i = t.parents().css("-o-transform")) : "mozilla" == s.browser && ("" != (i = t.css("-moz-transform")) && "none" != i || (i = t.parents().css("-moz-transform"))) } return "" != i && "none" != i || (i = e(document.body).css("transform")), "" != i && "none" != i && null != i }, getBrowser: function () { var e = navigator.userAgent.toLowerCase(), t = /(chrome)[ \/]([\w.]+)/.exec(e) || /(webkit)[ \/]([\w.]+)/.exec(e) || /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e) || /(msie) ([\w.]+)/.exec(e) || e.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e) || [], i = { browser: t[1] || "", version: t[2] || "0" }; return e.indexOf("rv:11.0") >= 0 && e.indexOf(".net4.0c") >= 0 && (i.browser = "msie", i.version = "11", t[1] = "msie"), i[t[1]] = t[1], i } }), e.jqx.browser = e.jqx.utilities.getBrowser(), e.jqx.isHidden = function (e) { try { var t = e[0].offsetWidth, i = e[0].offsetHeight; return 0 === t || 0 === i } catch (e) { return !1 } }, e.jqx.ariaEnabled = !0, e.jqx.aria = function (t, i, s) { if (e.jqx.ariaEnabled) if (void 0 == i) e.each(t.aria, function (i, s) { if (void 0 == (r = t.base ? t.base.host.attr(i) : t.host.attr(i)) || e.isFunction(r)) { var r = t[s.name]; e.isFunction(r) && (r = t[s.name]()), void 0 == r && (r = ""); try { t.base ? t.base.host.attr(i, r.toString()) : t.host.attr(i, r.toString()) } catch (e) { } } else { var o = r; switch (s.type) { case "number": o = new Number(r), isNaN(o) && (o = r); break; case "boolean": o = "true" == r; break; case "date": ("Invalid Date" == (o = new Date(r)) || isNaN(o)) && (o = r) } t[s.name] = o } }); else try { t.host ? t.base ? t.base.host ? t.base.host.attr(i, s.toString()) : t.attr(i, s.toString()) : t.host ? t.element.setAttribute ? t.element.setAttribute(i, s.toString()) : t.host.attr(i, s.toString()) : t.attr(i, s.toString()) : t.setAttribute && t.setAttribute(i, s.toString()) } catch (e) { } }, Array.prototype.indexOf || (Array.prototype.indexOf = function (e) { var t = this.length, i = Number(arguments[1]) || 0; for ((i = i < 0 ? Math.ceil(i) : Math.floor(i)) < 0 && (i += t) ; i < t; i++) if (i in this && this[i] === e) return i; return -1 }), e.jqx.mobile = e.jqx.mobile || {}, e.jqx.position = function (t) { var i = parseInt(t.pageX), s = parseInt(t.pageY); if (e.jqx.mobile.isTouchDevice()) { var r = e.jqx.mobile.getTouches(t)[0]; i = parseInt(r.pageX), s = parseInt(r.pageY) } return { left: i, top: s } }, e.extend(e.jqx.mobile, { _touchListener: function (e, t) { var i = { mousedown: "touchstart", mouseup: "touchend", mousemove: "touchmove" }, s = function (e, t) { var i = document.createEvent("MouseEvents"); return i.initMouseEvent(e, t.bubbles, t.cancelable, t.view, t.detail, t.screenX, t.screenY, t.clientX, t.clientY, t.ctrlKey, t.altKey, t.shiftKey, t.metaKey, t.button, t.relatedTarget), i._pageX = t.pageX, i._pageY = t.pageY, i }(i[e.type], e); e.target.dispatchEvent(s); var r = e.target["on" + i[e.type]]; "function" == typeof r && r(e) }, setMobileSimulator: function (t, i) { if (!this.isTouchDevice()) { this.simulatetouches = !0, 0 == i && (this.simulatetouches = !1); var s = { mousedown: "touchstart", mouseup: "touchend", mousemove: "touchmove" }, r = this; if (window.addEventListener) { var o = function () { for (var e in s) t.addEventListener && (t.removeEventListener(e, r._touchListener), t.addEventListener(e, r._touchListener, !1)) }; e.jqx.browser.msie, o() } } }, isTouchDevice: function () { if (void 0 != this.touchDevice) return this.touchDevice; var e = "Browser CodeName: " + navigator.appCodeName; if (e += "Browser Name: " + navigator.appName, e += "Browser Version: " + navigator.appVersion, e += "Platform: " + navigator.platform, -1 != (e += "User-agent header: " + navigator.userAgent).indexOf("Android")) return !0; if (-1 != e.indexOf("IEMobile")) return !0; if (-1 != e.indexOf("Windows Phone")) return !0; if (-1 != e.indexOf("WPDesktop")) return !0; if (-1 != e.indexOf("ZuneWP7")) return !0; if (-1 != e.indexOf("BlackBerry") && -1 != e.indexOf("Mobile Safari")) return !0; if (-1 != e.indexOf("ipod")) return !0; if (-1 != e.indexOf("nokia") || -1 != e.indexOf("Nokia")) return !0; if (-1 != e.indexOf("Chrome/17")) return !1; if (-1 != e.indexOf("CrOS")) return !1; if (-1 != e.indexOf("Opera") && -1 == e.indexOf("Mobi") && -1 == e.indexOf("Mini") && -1 != e.indexOf("Platform: Win")) return !1; if (-1 != e.indexOf("Opera") && -1 != e.indexOf("Mobi") && -1 != e.indexOf("Opera Mobi")) return !0; var t = { ios: "i(?:Pad|Phone|Pod)(?:.*)CPU(?: iPhone)? OS ", android: "(Android |HTC_|Silk/)", blackberry: "BlackBerry(?:.*)Version/", rimTablet: "RIM Tablet OS ", webos: "(?:webOS|hpwOS)/", bada: "Bada/" }; try { if (void 0 != this.touchDevice) return this.touchDevice; this.touchDevice = !1; for (i in t) if (t.hasOwnProperty(i) && (prefix = t[i], match = e.match(new RegExp("(?:" + prefix + ")([^\\s;]+)")), match)) return "blackberry" == i.toString() ? (this.touchDevice = !1, !1) : (this.touchDevice = !0, !0); if (-1 != navigator.platform.toLowerCase().indexOf("win")) { if (navigator.userAgent.indexOf("Windows Phone") >= 0 || navigator.userAgent.indexOf("WPDesktop") >= 0 || navigator.userAgent.indexOf("IEMobile") >= 0 || navigator.userAgent.indexOf("ZuneWP7") >= 0) return this.touchDevice = !0, !0; if (navigator.userAgent.indexOf("Touch") >= 0) return "MSPointerDown" in window || "pointerdown" in window ? (this.touchDevice = !0, !0) : navigator.userAgent.indexOf("ARM") >= 0 ? (this.touchDevice = !0, !0) : (this.touchDevice = !1, !1) } return -1 != navigator.platform.toLowerCase().indexOf("win") ? (this.touchDevice = !1, !1) : (("ontouchstart" in window || window.DocumentTouch && document instanceof DocumentTouch) && (this.touchDevice = !0), this.touchDevice) } catch (e) { return this.touchDevice = !1, !1 } }, getLeftPos: function (e) { for (var t = e.offsetLeft; null != (e = e.offsetParent) ;) "HTML" != e.tagName && (t += e.offsetLeft, document.all && (t += e.clientLeft)); return t }, getTopPos: function (t) { for (var i = t.offsetTop, s = e(t).coord() ; null != (t = t.offsetParent) ;) "HTML" != t.tagName && (i += t.offsetTop - t.scrollTop, document.all && (i += t.clientTop)); var r = navigator.userAgent.toLowerCase(); if ((-1 != r.indexOf("windows phone") || -1 != r.indexOf("WPDesktop") || -1 != r.indexOf("ZuneWP7") || -1 != r.indexOf("msie 9") || -1 != r.indexOf("msie 11") || -1 != r.indexOf("msie 10")) && -1 != r.indexOf("touch")) return s.top; if (this.isSafariMobileBrowser()) { if (this.isSafari4MobileBrowser() && this.isIPadSafariMobileBrowser()) return i; if (-1 != r.indexOf("version/7")) return s.top; i += e(window).scrollTop() } return i }, isChromeMobileBrowser: function () { return -1 != navigator.userAgent.toLowerCase().indexOf("android") }, isOperaMiniMobileBrowser: function () { var e = navigator.userAgent.toLowerCase(); return -1 != e.indexOf("opera mini") || -1 != e.indexOf("opera mobi") }, isOperaMiniBrowser: function () { return -1 != navigator.userAgent.toLowerCase().indexOf("opera mini") }, isNewSafariMobileBrowser: function () { var e = navigator.userAgent.toLowerCase(), t = -1 != e.indexOf("ipad") || -1 != e.indexOf("iphone") || -1 != e.indexOf("ipod"); return t = t && -1 != e.indexOf("version/5") }, isSafari4MobileBrowser: function () { var e = navigator.userAgent.toLowerCase(), t = -1 != e.indexOf("ipad") || -1 != e.indexOf("iphone") || -1 != e.indexOf("ipod"); return t = t && -1 != e.indexOf("version/4") }, isWindowsPhone: function () { var e = navigator.userAgent.toLowerCase(); return -1 != e.indexOf("windows phone") || -1 != e.indexOf("WPDesktop") || -1 != e.indexOf("ZuneWP7") || -1 != e.indexOf("msie 9") || -1 != e.indexOf("msie 11") || -1 != e.indexOf("msie 10") }, isSafariMobileBrowser: function () { var e = navigator.userAgent.toLowerCase(); return -1 != e.indexOf("ipad") || -1 != e.indexOf("iphone") || -1 != e.indexOf("ipod") }, isIPadSafariMobileBrowser: function () { return -1 != navigator.userAgent.toLowerCase().indexOf("ipad") }, isMobileBrowser: function () { var e = navigator.userAgent.toLowerCase(); return -1 != e.indexOf("ipad") || -1 != e.indexOf("iphone") || -1 != e.indexOf("android") }, getTouches: function (e) { if (e.originalEvent) { if (e.originalEvent.touches && e.originalEvent.touches.length) return e.originalEvent.touches; if (e.originalEvent.changedTouches && e.originalEvent.changedTouches.length) return e.originalEvent.changedTouches } return e.touches || (e.touches = new Array, e.touches[0] = void 0 != e.originalEvent ? e.originalEvent : e, void 0 != e.originalEvent && e.pageX && (e.touches[0] = e), "mousemove" == e.type && (e.touches[0] = e)), e.touches }, getTouchEventName: function (e) { if (!this.isWindowsPhone()) return e; if (-1 != navigator.userAgent.toLowerCase().indexOf("windows phone 8.1")) { if (-1 != e.toLowerCase().indexOf("start")) return "pointerdown"; if (-1 != e.toLowerCase().indexOf("move")) return "pointermove"; if (-1 != e.toLowerCase().indexOf("end")) return "pointerup" } return -1 != e.toLowerCase().indexOf("start") ? "MSPointerDown" : -1 != e.toLowerCase().indexOf("move") ? "MSPointerMove" : -1 != e.toLowerCase().indexOf("end") ? "MSPointerUp" : void 0 }, dispatchMouseEvent: function (e, t, i) { if (!this.simulatetouches) { var s = document.createEvent("MouseEvent"); s.initMouseEvent(e, !0, !0, t.view, 1, t.screenX, t.screenY, t.clientX, t.clientY, !1, !1, !1, !1, 0, null), null != i && i.dispatchEvent(s) } }, getRootNode: function (e) { for (; 1 !== e.nodeType;) e = e.parentNode; return e }, setTouchScroll: function (e, t) { this.enableScrolling || (this.enableScrolling = []), this.enableScrolling[t] = e }, touchScroll: function (t, i, s, r, o, a) { if (null != t) { var n = this, l = 0, h = 0, d = 0, c = 0, u = 0, p = 0; this.scrolling || (this.scrolling = []), this.scrolling[r] = !1; var m = !1, g = e(t), f = ["select", "input", "textarea"], v = 0, x = 0; this.enableScrolling || (this.enableScrolling = []), this.enableScrolling[r] = !0; var r = r, w = this.getTouchEventName("touchstart") + ".touchScroll", b = this.getTouchEventName("touchend") + ".touchScroll", _ = this.getTouchEventName("touchmove") + ".touchScroll", v = function (t) { if (!n.enableScrolling[r]) return !0; if (-1 === e.inArray(t.target.tagName.toLowerCase(), f)) { var i = n.getTouches(t), s = i[0]; return 1 == i.length && n.dispatchMouseEvent("mousedown", s, n.getRootNode(s.target)), m = !1, h = s.pageY, u = s.pageX, n.simulatetouches && (h = s._pageY, u = s._pageX), n.scrolling[r] = !0, l = 0, c = 0, !0 } }; g.on ? g.on(w, v) : g.bind(w, v); var y = function (e) { if (!n.enableScrolling[r]) return !0; if (!n.scrolling[r]) return !0; var t = n.getTouches(e); if (t.length > 1) return !0; var i = t[0].pageY, g = t[0].pageX; n.simulatetouches && (i = t[0]._pageY, g = t[0]._pageX); var f = i - h, v = g - u; x = i, touchHorizontalEnd = g, d = f - l, p = v - c, m = !0, l = f, c = v; var w = null == o || "hidden" != o[0].style.visibility, b = null == a || "hidden" != a[0].style.visibility; return (w || b) && (0 !== p && w || 0 !== d && b) ? (s(1 * -p, 1 * -d, v, f, e), e.preventDefault(), e.stopPropagation(), e.preventManipulation && e.preventManipulation(), !1) : void 0 }; if (g.on ? g.on(_, y) : g.bind(_, y), this.simulatetouches) { void 0 != e(window).on || e(window).bind; var j = function (e) { n.scrolling[r] = !1 }; if (void 0 != e(window).on ? e(document).on("mouseup.touchScroll", j) : e(document).bind("mouseup.touchScroll", j), window.frameElement && null != window.top) { var q = function (e) { n.scrolling[r] = !1 }; window.top.document && (e(window.top.document).on ? e(window.top.document).on("mouseup", q) : e(window.top.document).bind("mouseup", q)) } void 0 != e(document).on || e(document).bind; var T = function (e) { if (!n.scrolling[r]) return !0; n.scrolling[r] = !1; var t = n.getTouches(e)[0], i = n.getRootNode(t.target); n.dispatchMouseEvent("mouseup", t, i), n.dispatchMouseEvent("click", t, i) }; void 0 != e(document).on ? e(document).on("touchend", T) : e(document).bind("touchend", T) } var C = function (e) { if (!n.enableScrolling[r]) return !0; t = n.getTouches(e)[0]; if (!n.scrolling[r]) return !0; if (n.scrolling[r] = !1, !m) { var t = n.getTouches(e)[0], i = n.getRootNode(t.target); return n.dispatchMouseEvent("mouseup", t, i), n.dispatchMouseEvent("click", t, i), !0 } n.dispatchMouseEvent("mouseup", t, i) }; g.on && (g.on("dragstart", function (e) { e.preventDefault() }), g.on("selectstart", function (e) { e.preventDefault() })), g.on ? g.on(b + " touchcancel.touchScroll", C) : g.bind(b + " touchcancel.touchScroll", C) } } }), e.jqx.cookie = e.jqx.cookie || {}, e.extend(e.jqx.cookie, { cookie: function (e, t, i) { if (arguments.length > 1 && "[object Object]" !== String(t)) { if (i = jQuery.extend({}, i), null !== t && void 0 !== t || (i.expires = -1), "number" == typeof i.expires) { var s = i.expires, r = i.expires = new Date; r.setDate(r.getDate() + s) } return t = String(t), document.cookie = [encodeURIComponent(e), "=", i.raw ? t : encodeURIComponent(t), i.expires ? "; expires=" + i.expires.toUTCString() : "", i.path ? "; path=" + i.path : "", i.domain ? "; domain=" + i.domain : "", i.secure ? "; secure" : ""].join("") } var o, a = (i = t || {}).raw ? function (e) { return e } : decodeURIComponent; return (o = new RegExp("(?:^|; )" + encodeURIComponent(e) + "=([^;]*)").exec(document.cookie)) ? a(o[1]) : null } }), e.jqx.string = e.jqx.string || {}, e.extend(e.jqx.string, { replace: function (e, t, i) { if (t === i) return this; for (var s = e, r = s.indexOf(t) ; -1 != r;) r = (s = s.replace(t, i)).indexOf(t); return s }, contains: function (e, t) { return null != e && null != t && -1 != e.indexOf(t) }, containsIgnoreCase: function (e, t) { return null != e && null != t && -1 != e.toUpperCase().indexOf(t.toUpperCase()) }, equals: function (e, t) { return null != e && null != t && (e = this.normalize(e), t.length == e.length && e.slice(0, t.length) == t) }, equalsIgnoreCase: function (e, t) { return null != e && null != t && (e = this.normalize(e), t.length == e.length && e.toUpperCase().slice(0, t.length) == t.toUpperCase()) }, startsWith: function (e, t) { return null != e && null != t && e.slice(0, t.length) == t }, startsWithIgnoreCase: function (e, t) { return null != e && null != t && e.toUpperCase().slice(0, t.length) == t.toUpperCase() }, normalize: function (e) { return 65279 == e.charCodeAt(e.length - 1) && (e = e.substring(0, e.length - 1)), e }, endsWith: function (e, t) { return null != e && null != t && (e = this.normalize(e)).slice(-t.length) == t }, endsWithIgnoreCase: function (e, t) { return null != e && null != t && (e = this.normalize(e)).toUpperCase().slice(-t.length) == t.toUpperCase() } }), e.extend(jQuery.easing, { easeOutBack: function (e, t, i, s, r, o) { return void 0 == o && (o = 1.70158), s * ((t = t / r - 1) * t * ((o + 1) * t + o) + 1) + i }, easeInQuad: function (e, t, i, s, r) { return s * (t /= r) * t + i }, easeInOutCirc: function (e, t, i, s, r) { return (t /= r / 2) < 1 ? -s / 2 * (Math.sqrt(1 - t * t) - 1) + i : s / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + i }, easeInOutSine: function (e, t, i, s, r) { return -s / 2 * (Math.cos(Math.PI * t / r) - 1) + i }, easeInCubic: function (e, t, i, s, r) { return s * (t /= r) * t * t + i }, easeOutCubic: function (e, t, i, s, r) { return s * ((t = t / r - 1) * t * t + 1) + i }, easeInOutCubic: function (e, t, i, s, r) { return (t /= r / 2) < 1 ? s / 2 * t * t * t + i : s / 2 * ((t -= 2) * t * t + 2) + i }, easeInSine: function (e, t, i, s, r) { return -s * Math.cos(t / r * (Math.PI / 2)) + s + i }, easeOutSine: function (e, t, i, s, r) { return s * Math.sin(t / r * (Math.PI / 2)) + i }, easeInOutSine: function (e, t, i, s, r) { return -s / 2 * (Math.cos(Math.PI * t / r) - 1) + i } }) }(jQuery), function (e) { e.extend(jQuery.event.special, { close: { noBubble: !0 }, open: { noBubble: !0 }, cellclick: { noBubble: !0 }, rowclick: { noBubble: !0 }, tabclick: { noBubble: !0 }, selected: { noBubble: !0 }, expanded: { noBubble: !0 }, collapsed: { noBubble: !0 }, valuechanged: { noBubble: !0 }, expandedItem: { noBubble: !0 }, collapsedItem: { noBubble: !0 }, expandingItem: { noBubble: !0 }, collapsingItem: { noBubble: !0 } }), e.fn.extend({ ischildof: function (t) { for (var i = e(this).parents().get(), s = 0; s < i.length; s++) if ("string" != typeof t) { var r = i[s]; if (void 0 !== t && r == t[0]) return !0 } else if (void 0 !== t && e(i[s]).is(t)) return !0; return !1 } }), e.fn.jqxProxy = function () { var t = e(this).data().jqxWidget, i = Array.prototype.slice.call(arguments, 0); return e.jqx.jqxWidgetProxy(t.widgetName, t.element, i) }; var t = this.originalVal = e.fn.val; e.fn.val = function (i) { if (void 0 === i) return e(this).hasClass("jqx-widget") && (s = e(this).data().jqxWidget) && s.val ? s.val() : t.call(this); if (e(this).hasClass("jqx-widget")) { var s = e(this).data().jqxWidget; if (s && s.val) return 2 != arguments.length ? s.val(i) : s.val(i, arguments[1]) } return t.call(this, i) }, e.fn.coord = function (t) { var i, s, r = { top: 0, left: 0 }, o = this[0], a = o && o.ownerDocument; if (a) { if (i = a.documentElement, !jQuery.contains(i, o)) return r; void 0 !== typeof o.getBoundingClientRect && (r = o.getBoundingClientRect()); s = function (e) { return jQuery.isWindow(e) ? e : 9 === e.nodeType && (e.defaultView || e.parentWindow) }(a); var n = 0, l = 0, h = navigator.userAgent.toLowerCase(); if ((-1 != h.indexOf("ipad") || -1 != h.indexOf("iphone")) && (n = 2), 1 == t && "static" != e(document.body).css("position")) { var d = e(document.body).coord(); n = -d.left, l = -d.top } return { top: l + r.top + (s.pageYOffset || i.scrollTop) - (i.clientTop || 0), left: n + r.left + (s.pageXOffset || i.scrollLeft) - (i.clientLeft || 0) } } } }(jQuery), function (e) { function t(e) { return function (t, i) { "string" != typeof t && (i = t, t = "*"); var s, r, o = t.toLowerCase().split(x), a = 0, n = o.length; if (jQuery.isFunction(i)) for (; a < n; a++) s = o[a], (r = /^\+/.test(s)) && (s = s.substr(1) || "*"), (e[s] = e[s] || [])[r ? "unshift" : "push"](i) } } function i(e, t, s, r, o, a) { o = o || t.dataTypes[0], (a = a || {})[o] = !0; for (var n, l = e[o], h = 0, d = l ? l.length : 0, c = e === w; h < d && (c || !n) ; h++) "string" == typeof (n = l[h](t, s, r)) && (!c || a[n] ? n = void 0 : (t.dataTypes.unshift(n), n = i(e, t, s, r, n, a))); return !c && n || a["*"] || (n = i(e, t, s, r, "*", a)), n } function s(t, i) { var s, r, o = e.jqx.data.ajaxSettings.flatOptions || {}; for (s in i) void 0 !== i[s] && ((o[s] ? t : r || (r = {}))[s] = i[s]); r && jQuery.extend(!0, t, r) } function r(e, t, i) { var s, r, o, a, n = e.contents, l = e.dataTypes, h = e.responseFields; for (r in h) r in i && (t[h[r]] = i[r]); for (; "*" === l[0];) l.shift(), void 0 === s && (s = e.mimeType || t.getResponseHeader("content-type")); if (s) for (r in n) if (n[r] && n[r].test(s)) { l.unshift(r); break } if (l[0] in i) o = l[0]; else { for (r in i) { if (!l[0] || e.converters[r + " " + l[0]]) { o = r; break } a || (a = r) } o = o || a } if (o) return o !== l[0] && l.unshift(o), i[o] } function o(e, t) { var i, s, r, o, a = e.dataTypes.slice(), n = a[0], l = {}, h = 0; if (e.dataFilter && (t = e.dataFilter(t, e.dataType)), a[1]) for (i in e.converters) l[i.toLowerCase()] = e.converters[i]; for (; r = a[++h];) if ("*" !== r) { if ("*" !== n && n !== r) { if (!(i = l[n + " " + r] || l["* " + r])) for (s in l) if ((o = s.split(" "))[1] === r && (i = l[n + " " + o[0]] || l["* " + o[0]])) { !0 === i ? i = l[s] : !0 !== l[s] && (r = o[0], a.splice(h--, 0, r)); break } if (!0 !== i) if (i && e.throws) t = i(t); else try { t = i(t) } catch (e) { return { state: "parsererror", error: i ? e : "No conversion from " + n + " to " + r } } } n = r } return { state: "success", data: t } } function a() { try { return new window.XMLHttpRequest } catch (e) { } } function n() { try { return new window.ActiveXObject("Microsoft.XMLHTTP") } catch (e) { } } e.jqx.dataAdapter = function (t, i) { if (void 0 != t && (void 0 !== t.dataFields && (t.datafields = t.dataFields), void 0 !== t.dataType && (t.datatype = t.dataType), void 0 !== t.localData && (t.localdata = t.localData), void 0 !== t.sortColumn && (t.sortcolumn = t.sortColumn), void 0 !== t.sortDirection && (t.sortdirection = t.sortDirection), void 0 !== t.sortOrder && (t.sortdirection = t.sortOrder), void 0 !== t.formatData && (t.formatdata = t.formatData), void 0 !== t.processData && (t.processdata = t.processData), void 0 !== t.pageSize && (t.pagesize = t.pageSize), void 0 !== t.pageNum && (t.pagenum = t.pageNum), void 0 !== t.updateRow && (t.updaterow = t.updateRow), void 0 !== t.addRow && (t.addrow = t.addRow), void 0 !== t.deleteRow && (t.deleterow = t.deleteRow), void 0 !== t.contentType && (t.contenttype = t.contentType), void 0 != t.totalRecords && (t.totalrecords = t.totalRecords), void 0 != t.loadError && (t.loadError = t.loadError), void 0 != t.sortComparer && (t.sortcomparer = t.sortComparer)), this._source = t, this._options = i || {}, this.records = new Array, this._downloadComplete = new Array, this._bindingUpdate = new Array, void 0 != t && null != t.localdata && "function" == typeof t.localdata) { var s = t.localdata(); if (null != s) { t._localdata = t.localdata; var r = this; t._localdata.subscribe && (r._oldlocaldata = [], t._localdata.subscribe(function (t) { var i = function (t) { return jQuery.isArray(t) ? jQuery.makeArray(i(e(t))) : jQuery.extend(!0, {}, t) }; 0 != r.suspendKO && void 0 != r.suspendKO && 0 != r._oldlocaldata.length || (r._oldlocaldata = i(t)) }, t._localdata, "beforeChange"), t._localdata.subscribe(function (e) { if (0 == r.suspendKO || void 0 == r.suspendKO) { var i = ""; r._oldrecords = r.records, 0 == r._oldlocaldata.length && (t.localdata = t._localdata()), 0 == r._oldlocaldata.length ? i = "change" : (r._oldlocaldata.length == e.length && (i = "update"), r._oldlocaldata.length > e.length && (i = "remove"), r._oldlocaldata.length < e.length && (i = "add")), r.dataBind(null, i) } }, t._localdata, "change"), r._knockoutdatasource = !0), t.localdata = s } } 1 == this._options.autoBind && this.dataBind() }, e.jqx.dataAdapter.prototype = { getrecords: function () { return this.records }, beginUpdate: function () { this.isUpdating = !0 }, endUpdate: function (e) { this.isUpdating = !1, 0 != e && (this._changedrecords && this._changedrecords.length > 0 ? (this.callBindingUpdate("update"), this._changedrecords = []) : this.dataBind(null, "")) }, formatDate: function (t, i, s) { return e.jqx.dataFormat.formatdate(t, i, s) }, formatNumber: function (t, i, s) { return e.jqx.dataFormat.formatnumber(t, i, s) }, dataBind: function (t, i) { if (1 != this.isUpdating) { var s = this._source; if (s) { e.jqx.dataFormat.datescache = new Array, null != s.dataFields && (s.datafields = s.dataFields), void 0 == s.recordstartindex && (s.recordstartindex = 0), void 0 == s.recordendindex && (s.recordendindex = 0), void 0 == s.loadallrecords && (s.loadallrecords = !0), void 0 != s.sort && (this.sort = s.sort), void 0 != s.filter ? this.filter = s.filter : this.filter = null, void 0 != s.sortcolumn && (this.sortcolumn = s.sortcolumn), void 0 != s.sortdirection && (this.sortdirection = s.sortdirection), void 0 != s.sortcomparer && (this.sortcomparer = s.sortcomparer), this.records = new Array; var r = this._options || {}; if (this.virtualmode = void 0 != r.virtualmode && r.virtualmode, this.totalrecords = void 0 != r.totalrecords ? r.totalrecords : 0, this.pageable = void 0 != r.pageable && r.pageable, this.pagesize = void 0 != r.pagesize ? r.pagesize : 0, this.pagenum = void 0 != r.pagenum ? r.pagenum : 0, this.cachedrecords = void 0 != r.cachedrecords ? r.cachedrecords : new Array, this.originaldata = new Array, this.recordids = new Array, this.updaterow = void 0 != r.updaterow ? r.updaterow : null, this.addrow = void 0 != r.addrow ? r.addrow : null, this.deleterow = void 0 != r.deleterow ? r.deleterow : null, this.cache = void 0 != r.cache && r.cache, this.unboundmode = !1, void 0 != s.formatdata && (r.formatData = s.formatdata), void 0 != s.data && (void 0 == r.data && (r.data = {}), e.extend(r.data, s.data)), void 0 != s.mapchar ? this.mapChar = s.mapchar ? s.mapchar : ">" : this.mapChar = r.mapChar ? r.mapChar : ">", (r.unboundmode || s.unboundmode) && (this.unboundmode = r.unboundmode || s.unboundmode), void 0 != s.cache && (this.cache = s.cache), this.koSubscriptions) for (var o = 0; o < this.koSubscriptions.length; o++) this.koSubscriptions[o].dispose(); this.koSubscriptions = new Array, this.pagenum < 0 && (this.pagenum = 0); var a = this, n = s.datatype; "csv" !== s.datatype && "tab" !== s.datatype && "tsv" !== s.datatype && "text" != s.datatype || (n = "text"); var l = void 0 == r.async || r.async; switch (void 0 != s.async && (l = s.async), n) { case "local": case "array": case "observablearray": default: if (void 0 == s.localdata && s.length) { s.localdata = new Array; for (g = 0; g < s.length; g++) s.localdata[s.localdata.length] = s[g], s[g].uid = g } s.beforeprocessing && e.isFunction(s.beforeprocessing) && s.beforeprocessing(s.localdata); m = s.localdata.length; if (this.totalrecords = this.virtualmode ? s.totalrecords || m : m, this.unboundmode && (this.totalrecords = this.unboundmode ? s.totalrecords || m : m, (c = s.datafields ? s.datafields.length : 0) > 0)) for (g = 0; g < this.totalrecords; g++) { for (var h = {}, d = 0; d < c; d++) h[s.datafields[d].name] = ""; h.uid = g, s.localdata[s.localdata.length] = h } void 0 == this.totalrecords && (this.totalrecords = 0); var c = s.datafields ? s.datafields.length : 0, u = function (t, i) { for (var r = {}, o = 0; o < i; o++) { var n = s.datafields[o], l = ""; if (void 0 != n && null != n) { if (n.map) { if (e.isFunction(n.map)) l = n.map(t); else { var h = n.map.split(a.mapChar); if (h.length > 0) { for (var d = t, c = 0; c < h.length; c++) d && (d = d[h[c]]); l = d } else l = t[n.map] } void 0 != l && null != l ? l = l.toString() : void 0 == l && null != l && (l = "") } "" == l && void 0 != (l = t[n.name]) && null != l && (l = s._localdata && l.subscribe ? l() : l.toString()), l = a.getvaluebytype(l, n), void 0 != n.displayname ? r[n.displayname] = l : r[n.name] = l } } return r }; if (s._localdata) { this._changedrecords = [], this.records = new Array; var p = s._localdata(); if (e.each(p, function (t, r) { if ("string" == typeof r) a.records.push(r); else { var o = {}, n = 0, l = this; e.each(this, function (i, r) { var h = null, d = "string", u = i; if (c > 0) { for (var p = !1, m = !1, g = 0; g < c; g++) { var f = s.datafields[g]; if (void 0 != f && f.name == i) { p = !0, h = f.map, d = f.type, u = f.name; break } if (void 0 != f && f.map && f.map.indexOf(i) >= 0) { p = !0, h = f.map, d = f.type, u = f.name, m = !0; b = l[i]; if (null != h) if ((_ = h.split(a.mapChar)).length > 0) { for (var v = l, x = 0; x < _.length; x++) v = v[_[x]]; b = v } else b = l[h]; "string" != d && (b = a.getvaluebytype(b, { type: d })), o[u] = b, void 0 != o[u] && (n += o[u].toString().length + o[u].toString().substr(0, 1)) } } if (!p) return !0; if (m) return !0 } if (e.isFunction(l[i])) { b = l[i](); if ("string" != d && (b = a.getvaluebytype(b, { type: d })), o[i] = b, l[i].subscribe) { var w = t; a.koSubscriptions[a.koSubscriptions.length] = l[i].subscribe(function (e) { var t = w; o[i] = e; var s = { index: t, oldrecord: o, record: o }; if (a._changedrecords.push(s), !a.isUpdating) return a.callBindingUpdate("update"), a._changedrecords = [], !1 }) } } else { var b = l[i]; if (null != h) { var _ = h.split(a.mapChar); if (_.length > 0) { for (var v = l, x = 0; x < _.length; x++) v = v[_[x]]; b = v } else b = l[h] } "string" != d && (b = a.getvaluebytype(b, { type: d })), o[u] = b, void 0 != o[u] && (n += o[u].toString().length + o[u].toString().substr(0, 1)) } }); var h = a.getid(s.id, l, t); if (o.uid = h, a.records.push(o), o._koindex = n, a._oldrecords) { var d = a.records.length - 1; if ("update" == i && a._oldrecords[d]._koindex != n) { var u = { index: d, oldrecord: a._oldrecords[d], record: o }; a._changedrecords.push(u) } } } }), "add" == i) for (var m = a.records.length, g = 0; g < m; g++) { for (var h = a.records[g], f = !1, v = 0; v < a._oldrecords.length; v++) if (a._oldrecords[v]._koindex === h._koindex) { f = !0; break } f || a._changedrecords.push({ index: g, oldrecord: null, record: h, position: 0 != g ? "last" : "first" }) } else if ("remove" == i) for (var m = a._oldrecords.length, g = 0; g < m; g++) { var x = a._oldrecords[g]; a.records[g] ? a.records[g]._koindex != x._koindex && a._changedrecords.push({ index: g, oldrecord: x, record: null }) : a._changedrecords.push({ index: g, oldrecord: x, record: null }) } } else e.isArray(s.localdata) ? 0 == c ? e.each(s.localdata, function (t, i) { var r = e.extend({}, this); if ("string" == typeof i) return a.records = s.localdata, !1; var o = a.getid(s.id, r, t); "object" == typeof o && (o = t), r.uid = o, a.records[a.records.length] = r }) : e.each(s.localdata, function (t) { var i = this, r = u(i, c), o = a.getid(s.id, r, t); "object" == typeof o && (o = t), (i = e.extend({}, r)).uid = o, a.records[a.records.length] = i }) : (this.records = new Array, e.each(s.localdata, function (e) { var t = a.getid(s.id, this, e); if (c > 0) { var i = u(this, c); i.uid = t, a.records[a.records.length] = i } else this.uid = t, a.records[a.records.length] = this })); if (this.originaldata = s.localdata, this.cachedrecords = this.records, this.addForeignValues(s), r.uniqueDataFields) { b = this.getUniqueRecords(this.records, r.uniqueDataFields); this.records = b, this.cachedrecords = b } if (r.beforeLoadComplete && void 0 != (_ = r.beforeLoadComplete(a.records, this.originaldata)) && (a.records = _, a.cachedrecords = _), r.autoSort && r.autoSortField) { var w = Object.prototype.toString; Object.prototype.toString = "function" == typeof field ? field : function () { return this[r.autoSortField] }, a.records.sort(function (t, i) { if (void 0 === t && (t = null), void 0 === i && (i = null), null === t && null === i) return 0; if (null === t && null !== i) return 1; if (null !== t && null === i) return -1; if (t = t.toString(), i = i.toString(), e.jqx.dataFormat.isNumber(t) && e.jqx.dataFormat.isNumber(i)) return t < i ? -1 : t > i ? 1 : 0; if (e.jqx.dataFormat.isDate(t) && e.jqx.dataFormat.isDate(i)) return t < i ? -1 : t > i ? 1 : 0; e.jqx.dataFormat.isNumber(t) || e.jqx.dataFormat.isNumber(i) || (t = String(t).toLowerCase(), i = String(i).toLowerCase()); try { if (t < i) return -1; if (t > i) return 1 } catch (e) { } return 0 }), Object.prototype.toString = w } a.loadedData = s.localdata, a.buildHierarchy(), e.isFunction(r.loadComplete) && r.loadComplete(s.localdata, a.records); break; case "json": case "jsonp": case "xml": case "xhtml": case "script": case "text": if (null != s.localdata) { if (e.isFunction(s.beforeprocessing) && s.beforeprocessing(s.localdata), "xml" === s.datatype ? a.loadxml(s.localdata, s.localdata, s) : "text" === n ? a.loadtext(s.localdata, s) : a.loadjson(s.localdata, s.localdata, s), a.addForeignValues(s), r.uniqueDataFields) { var b = a.getUniqueRecords(a.records, r.uniqueDataFields); a.records = b, a.cachedrecords = b } if (r.beforeLoadComplete) { var _ = r.beforeLoadComplete(a.records, this.originaldata); void 0 != _ && (a.records = _, a.cachedrecords = _) } return a.loadedData = s.localdata, a.buildHierarchy.call(a), e.isFunction(r.loadComplete) && r.loadComplete(s.localdata, a.records), void a.callBindingUpdate(i) } var y = void 0 != r.data ? r.data : {}; if (s.processdata && s.processdata(y), e.isFunction(r.processData) && r.processData(y), e.isFunction(r.formatData)) { var j = r.formatData(y); void 0 != j && (y = j) } var q = "application/x-www-form-urlencoded"; r.contentType && (q = r.contentType); var T = "GET"; if (s.type && (T = s.type), r.type && (T = r.type), s.url && s.url.length > 0) e.isFunction(r.loadServerData) ? a._requestData(y, s, r) : this.xhr = e.jqx.data.ajax({ dataType: n, cache: this.cache, type: T, url: s.url, async: l, timeout: s.timeout, contentType: q, data: y, success: function (t, i, o) { if (e.isFunction(s.beforeprocessing) && void 0 != (l = s.beforeprocessing(t, i, o)) && (t = l), e.isFunction(r.downloadComplete)) { var l = r.downloadComplete(t, i, o); void 0 != l && (t = l) } if (null == t) return a.records = new Array, a.cachedrecords = new Array, a.originaldata = new Array, a.callDownloadComplete(), void (e.isFunction(r.loadComplete) && r.loadComplete(new Array)); var h = t; if (t.records && (h = t.records), void 0 != t.totalrecords && (s.totalrecords = t.totalrecords), "xml" === s.datatype ? a.loadxml(null, h, s) : "text" === n ? a.loadtext(h, s) : a.loadjson(null, h, s), a.addForeignValues(s), r.uniqueDataFields) { var d = a.getUniqueRecords(a.records, r.uniqueDataFields); a.records = d, a.cachedrecords = d } if (r.beforeLoadComplete) { var c = r.beforeLoadComplete(a.records, t); void 0 != c && (a.records = c, a.cachedrecords = c) } a.loadedData = t, a.buildHierarchy.call(a), a.callDownloadComplete(), e.isFunction(r.loadComplete) && r.loadComplete(t, i, o, a.records) }, error: function (t, i, o) { e.isFunction(s.loaderror) && s.loaderror(t, i, o), e.isFunction(r.loadError) && r.loadError(t, i, o), t = null, a.callDownloadComplete() }, beforeSend: function (t, i) { e.isFunction(r.beforeSend) && r.beforeSend(t, i), e.isFunction(s.beforesend) && s.beforesend(t, i) } }); else if (a.buildHierarchy(new Array), a.callDownloadComplete(), e.isFunction(r.loadComplete)) { if (!C) var C = {}; r.loadComplete(C) } } this.callBindingUpdate(i) } } }, buildHierarchy: function (e) { var t = this._source, i = new Array; if (t.datafields && (t.hierarchy && !t.hierarchy.reservedNames ? t.hierarchy.reservedNames = { leaf: "leaf", parent: "parent", expanded: "expanded", checked: "checked", selected: "selected", level: "level", icon: "icon", data: "data" } : t.hierarchy && ((r = t.hierarchy.reservedNames).leaf || (r.leaf = "leaf"), r.parent || (r.parent = "parent"), r.expanded || (r.expanded = "expanded"), r.checked || (r.checked = "checked"), r.selected || (r.selected = "selected"), r.level || (r.level = "level"), r.data || (r.data = "data")), t.hierarchy)) { var s = this, r = t.hierarchy.reservedNames; if (t.hierarchy.root) { if ("xml" == t.dataType) { i = this.getRecordsHierarchy("uid", "parentuid", "records", null, e); return this.hierarchy = i, i } this.hierarchy = this.records; for (var o = t.hierarchy.root, a = 0; a < this.records.length; a++) { var n = this.records[a]; if (n) { var l = function (e) { if (t.hierarchy.record) e.records = e[o][t.hierarchy.record]; else { var i = o.split(s.mapChar), a = null; if (i.length > 1) { for (var n = e, l = 0; l < i.length; l++) void 0 != n && (n = n[i[l]]); a = n } else a = e[o]; e.records = a } (null == e.records || e.records && 0 == e.records.length) && (e[r.leaf] = !0) }; l(n), n[r.level] = 0; var h = this.getid(t.id, n, a); n.uid = h, n[r.parent] = null, n[r.data] = n, void 0 === n[r.expanded] && (n[r.expanded] = !1); var d = function (e, i) { if (i) for (var o = 0; o < i.length; o++) { var a = i[o]; if (a) { l(a), a[r.level] = e[r.level] + 1, a[r.parent] = e, a[r.data] = a; var n = s.getid(t.id, a, o); n == o && null == t.id ? a.uid = e.uid + "_" + n : a.uid = n, void 0 === a[r.expanded] && (a[r.expanded] = !1), d(a, a.records) } } else e.records = new Array }; d(n, n.records) } } return this.hierarchy } if (t.hierarchy.keyDataField && t.hierarchy.parentDataField) { i = this.getRecordsHierarchy(t.hierarchy.keyDataField.name, t.hierarchy.parentDataField.name, "records", null, e); return this.hierarchy = i, i } if (t.hierarchy.groupingDataFields) { for (var c = new Array, a = 0; a < t.hierarchy.groupingDataFields.length; a++) c.push(t.hierarchy.groupingDataFields[a].name); i = this.getGroupedRecords(c, "records", "label", null, "data", null, "parent", e); return this.hierarchy = i, i } } }, addRecord: function (e, t, i, s) { var r = this; if (void 0 != e) { if (void 0 == i) { if (this.hierarchy && this.hierarchy.length >= 0 && (this._source.hierarchy || s)) { var o = r._source && r._source.hierarchy ? r._source.hierarchy.reservedNames : null; null == o && (o = { leaf: "leaf", parent: "parent", expanded: "expanded", checked: "checked", selected: "selected", level: "level", icon: "icon", data: "data" }), e[o.level] = 0, "last" == t ? this.hierarchy.push(e) : "number" == typeof t && isFinite(t) ? this.hierarchy.splice(t, 0, e) : this.hierarchy.splice(0, 0, e) } else "last" == t ? this.records.push(e) : "number" == typeof t && isFinite(t) ? this.records.splice(t, 0, e) : this.records.splice(0, 0, e); return !0 } if (this.hierarchy.length > 0) { var a = function (s) { if (s) for (var o = 0; o < s.length; o++) { var n = s[o]; if (n.uid == i) { var l = r._source && r._source.hierarchy ? r._source.hierarchy.reservedNames : null; return null == l && (l = { leaf: "leaf", parent: "parent", expanded: "expanded", checked: "checked", selected: "selected", level: "level", icon: "icon", data: "data" }), e[l.parent] = n, e[l.level] = n[l.level] + 1, n.records || (n.records = new Array, n[l.leaf] = !1), "last" == t ? n.records.push(e) : "number" == typeof t && isFinite(t) ? n.records.splice(t, 0, e) : n.records.splice(0, 0, e), r.records.push(e), !0 } n.records && a(n.records) } }; a(this.hierarchy) } } return !1 }, deleteRecord: function (e) { var t = this; if (this.hierarchy.length > 0) { var i = function (s) { if (s) for (var r = 0; r < s.length; r++) { var o = s[r]; if (o.uid == e) { s.splice(r, 1), t.recordids[e] && delete t.recordids[e]; var a = function (e) { for (var i = 0; i < e.length; i++) { for (var s = e[i].uid, r = 0; r < t.records.length; r++) if (t.records[r].uid == s) { t.records.splice(r, 1); break } e[i].records && a(e[i].records) } }; o.records && a(o.records); for (var n = 0; n < t.records.length; n++) if ((o = t.records[n]).uid == e) { t.records.splice(n, 1); break } return !0 } o.records && i(o.records) } }; i(this.hierarchy) } else for (var s = 0; s < this.records.length; s++) if (this.records[s].uid == e) return this.records.splice(s, 1), !0; return !1 }, addForeignValues: function (e) { for (var t = this, i = e.datafields ? e.datafields.length : 0, s = 0; s < i; s++) { var r = e.datafields[s]; if (void 0 != r) if (void 0 != r.values) { void 0 == r.value && (r.value = r.name), void 0 == r.values.value && (r.values.value = r.value); var o, a, n = new Array; t.pageable && t.virtualmode ? (a = (o = t.pagenum * t.pagesize) + t.pagesize) > t.totalrecords && (a = t.totalrecords) : t.virtualmode ? (o = e.recordstartindex, (a = e.recordendindex) > t.totalrecords && (a = t.totalrecords)) : (o = 0, a = t.records.length); for (g = o; g < a; g++) { var l = t.records[g], h = r.name, d = l[r.value]; if (void 0 != n[d]) l[h] = n[d]; else for (var c = 0; c < r.values.source.length; c++) { var u = r.values.source[c], p = u[r.values.value]; if (void 0 == p && (p = u.uid), p == d) { var m = u[r.values.name]; l[h] = m, n[d] = m; break } } } } else if (void 0 != r.value) for (var g = 0; g < t.records.length; g++) (l = t.records[g])[r.name] = l[r.value] } }, abort: function () { this.xhr && 4 != this.xhr.readyState && (this.xhr.abort(), me.callDownloadComplete()) }, _requestData: function (t, i, s) { var r = this; s.loadServerData(t, i, function (t) { t.totalrecords && (i.totalrecords = t.totalrecords, r.totalrecords = t.totalrecords), t.records && (r.records = t.records, r.cachedrecords = t.records), e.isFunction(s.loadComplete) && s.loadComplete(t), r.callDownloadComplete() }) }, getUniqueRecords: function (e, t) { if (e && t) for (var i = e.length, s = t.length, r = new Array, o = new Array, a = 0; a < i; a++) { var n = e[a], l = ""; if (void 0 != n) { for (var h = 0; h < s; h++) l += n[t[h]] + "_"; o[l] || (r[r.length] = n), o[l] = !0 } } return r }, getAggregatedData: function (t, i, s, r) { var o = s; o || (o = this.records); var a = {}, n = new Array, l = o.length; if (0 != l && void 0 != l) { for (var h = 0; h < l; h++) for (var d = o[h], c = 0; c < t.length; c++) { m = t[c]; if (null !== (g = d[m.name]) && m.aggregates) { a[m.name] = a[m.name] || {}, n[m.name] = n[m.name] || 0, n[m.name]++; var u = function (t) { for (obj in t) { var i = a[m.name][obj]; null == i && (a[m.name][obj] = 0, i = 0), e.isFunction(t[obj]) && (i = t[obj](i, g, m.name, d, r)), a[m.name][obj] = i } }, p = parseFloat(g); (p = !isNaN(p)) && (g = parseFloat(g)), "number" == typeof g && isFinite(g) ? e.each(m.aggregates, function () { var e = a[m.name][this]; if (null == e && (e = 0, "min" == this && (e = 9999999999999), "max" == this && (e = -9999999999999)), "sum" == this || "avg" == this || "stdev" == this || "stdevp" == this || "var" == this || "varp" == this) e += parseFloat(g); else if ("product" == this) 0 == h ? e = parseFloat(g) : e *= parseFloat(g); else if ("min" == this) e = Math.min(e, parseFloat(g)); else if ("max" == this) e = Math.max(e, parseFloat(g)); else if ("count" == this) e++; else if ("object" == typeof this) return void u(this); a[m.name][this] = e }) : e.each(m.aggregates, function () { if ("min" == this || "max" == this || "count" == this || "product" == this || "sum" == this || "avg" == this || "stdev" == this || "stdevp" == this || "var" == this || "varp" == this) { var e = a[m.name][this]; return null == e && (e = 0), a[m.name][this] = e, !0 } "object" == typeof this && u(this) }) } } for (c = 0; c < t.length; c++) { var m = t[c]; if (a[m.name] || (a[m.name] = {}, e.each(m.aggregates, function (e) { a[m.name][this] = 0 })), void 0 != a[m.name].avg) { var g = a[m.name].avg, f = n[m.name]; a[m.name].avg = 0 === f || void 0 == f ? 0 : g / f } else void 0 != a[m.name].count && (a[m.name].count = l); (a[m.name].stdev || a[m.name].stdevp || a[m.name].var || a[m.name].varp) && e.each(m.aggregates, function (e) { if ("stdev" == this || "var" == this || "varp" == this || "stdevp" == this) { for (var t = a[m.name][this], i = l, s = t / l, r = 0, n = 0; n < l; n++) { var h = o[n][m.name]; r += (h - s) * (h - s) } var d = "stdevp" == this || "varp" == this ? i : i - 1; 0 == d && (d = 1), "var" == this || "varp" == this ? a[m.name][this] = r / d : "stdevp" != this && "stdev" != this || (a[m.name][this] = Math.sqrt(r / d)) } }), m.formatStrings && e.each(m.aggregates, function (t) { var s = m.formatStrings[t]; if (s) if ("min" == this || "max" == this || "count" == this || "product" == this || "sum" == this || "avg" == this || "stdev" == this || "stdevp" == this || "var" == this || "varp" == this) { r = a[m.name][this]; a[m.name][this] = e.jqx.dataFormat.formatnumber(r, s, i) } else if ("object" == typeof this) for (obj in this) { var r = a[m.name][obj]; a[m.name][obj] = e.jqx.dataFormat.formatnumber(r, s, i) } }) } return a } }, bindDownloadComplete: function (e, t) { this._downloadComplete[this._downloadComplete.length] = { id: e, func: t } }, unbindDownloadComplete: function (e) { for (var t = 0; t < this._downloadComplete.length; t++) if (this._downloadComplete[t].id == e) { this._downloadComplete[t].func = null, this._downloadComplete.splice(t, 1); break } }, callDownloadComplete: function () { for (var e = 0; e < this._downloadComplete.length; e++) { var t = this._downloadComplete[e]; null != t.func && t.func() } }, setSource: function (e) { this._source = e }, generatekey: function () { var e = function () { return (65536 * (1 + Math.random()) | 0).toString(16).substring(1) }; return e() + e() + "-" + e() + "-" + e() + "-" + e() + "-" + e() + e() + e() }, getGroupedRecords: function (t, i, s, r, o, a, n, l, h) { var d = this; h || (h = 0); for (var c = new Array, u = 0; u < t.length; u++) c[u] = d.generatekey(); i || (i = "items"), s || (s = "group"), o || (o = "record"), n || (n = "parentItem"), void 0 === a && (a = "value"); var p = new Array, m = 0, g = new Array, f = t.length; new Array; if (!l) var l = this.records; for (var v = l.length, x = 0; x < v; x++) { var w = function (t) { var i = t; return r && e.each(r, function () { this.name && this.map && (i[this.map] = i[this.name]) }), i }(l[x]); id = w[d.uniqueId]; var b = new Array, _ = 0; for (u = 0; u < f; u++) { var y = w[t[u]]; null != y && (b[_++] = { value: y, hash: c[u] }) } if (b.length != f) break; for (var j = null, q = "", T = -1, C = 0; C < b.length; C++) { T++; var S = b[C].value; if (q = q + "_" + b[C].hash + "_" + S, void 0 == g[q] || null == g[q]) { if (null == j) { (j = { level: 0 })[n] = null, j[s] = S, j[o] = w, void 0 !== w.expanded ? j.expanded = w.expanded : j.expanded = !1, a && (j[a] = w[a]), j[i] = new Array; var k = p.length + h; this._source.id && "number" != typeof w.uid && !isFinite(w.uid) || (k = "Row" + k), j.uid = k, p[m++] = j } else { var I = { level: j.level + 1 }; I[n] = j, I[s] = S, I[i] = new Array, I[o] = w, void 0 !== w.expanded ? I.expanded = w.expanded : I.expanded = !1, a && (I[a] = w[a]), I.uid = j.uid + "_" + j[i].length, j[i][j[i].length] = I, j = I } g[q] = j } else j = g[q] } w && (w.leaf = !0), null != j ? (null == this._source.id && (w.uid = j.uid + "_" + j[i].length), w[n] = j, w.level = j.level + 1, j[i][j[i].length] = w) : w.uid || (w.uid = this.generatekey()) } return p }, getRecordsHierarchy: function (t, i, s, r, o) { var a = new Array, n = this.records; if (o && (n = o), 0 == this.records.length) return null; for (var l = null != s ? s : "items", h = [], d = n, c = d.length, u = this._source && this._source.hierarchy ? this._source.hierarchy.reservedNames : null, p = function (t) { var i = t; return r && e.each(r, function () { this.name && this.map && (i[this.map] = i[this.name]) }), i }, m = 0; m < c; m++) { g = (v = e.extend({}, d[m]))[i]; h[f = v[t]] = { parentid: g, item: v } } for (m = 0; m < c; m++) { var g = (v = e.extend({}, d[m]))[i], f = v[t]; if (void 0 != h[g]) { var v = { parentid: g, item: h[f].item }, x = h[g].item; x[l] || (x[l] = []); var w = x[l].length, b = v.item; u ? void 0 == b[u.parent] && (b[u.parent] = x) : void 0 == b.parent && (b.parent = x); _ = p(b); x[l][w] = _, h[g].item = x, h[f] = v } else { b = h[f].item; u ? void 0 == b[u.parent] && (b[u.parent] = null) : void 0 == b.parent && (b.parent = null); var _ = p(b); u ? _[u.level] = 0 : _.level = 0, a[a.length] = _ } } if (0 != a.length) { var y = function (e, t) { for (var i = 0; i < t.length; i++) { u ? t[i][u.level] = e : t[i].level = e; var s = t[i][l]; s && s.length > 0 ? y(e + 1, s) : u ? t[i][u.leaf] = !0 : t[i].leaf = !0 } }; y(0, a) } return a }, bindBindingUpdate: function (e, t) { this._bindingUpdate[this._bindingUpdate.length] = { id: e, func: t } }, unbindBindingUpdate: function (e) { for (var t = 0; t < this._bindingUpdate.length; t++) if (this._bindingUpdate[t].id == e) { this._bindingUpdate[t].func = null, this._bindingUpdate.splice(t, 1); break } }, callBindingUpdate: function (e) { for (var t = 0; t < this._bindingUpdate.length; t++) { var i = this._bindingUpdate[t]; null != i.func && i.func(e) } }, getid: function (t, i, s) { if (null == t || void 0 == t.name || !t.name) { if (e(t, i).length > 0) return e(t, i).text(); if (t && t.toString().length > 0) { var r = e(i).attr(t); if (null != r && r.toString().length > 0) return r; var o = t.split(this.mapChar); if (o.length > 1) { for (var a = i, n = 0; n < o.length; n++) void 0 != a && (a = a[o[n]]); if (void 0 != a) return a } else if (void 0 != i[t]) return i[t] } return s } if (null != (r = e(i).attr(t.name)) && r.toString().length > 0) return r; if (t.map) try { if (null != (r = e(i).attr(t.map)) && r.toString().length > 0) return r; if (e(t.map, i).length > 0) return e(t.map, i).text(); if (e(t.name, i).length > 0) return e(t.name, i).text() } catch (e) { return s } }, loadjson: function (t, i, s) { "string" == typeof t && (t = e.parseJSON(t)), void 0 == s.root && (s.root = ""), void 0 == s.record && (s.record = ""), (t = t || i) || (t = []); var r = this; if ("" != s.root) { if ((j = s.root.split(r.mapChar)).length > 1) { for (var o = t, a = 0; a < j.length; a++) void 0 != o && (o = o[j[a]]); t = o } else if (void 0 != t[s.root] ? t = t[s.root] : e.each(t, function (e) { if (this == s.root) return t = this, !1; void 0 != this[s.root] && (t = this[s.root]) }), !t && (j = s.root.split(r.mapChar)).length > 0) { for (var o = t, a = 0; a < j.length; a++) void 0 != o && (o = o[j[a]]); t = o } } else if (!t.length) for (obj in t) if (e.isArray(t[obj])) { t = t[obj]; break } if (null != t && void 0 == t.length && (t = e.makeArray(t)), null != t && void 0 != t.length) if (0 != t.length) { var n = t.length; this.totalrecords = this.virtualmode ? s.totalrecords || n : n, this.records = new Array, this.originaldata = new Array; var l = this.records, h = this.pageable ? this.pagesize * this.pagenum : s.recordstartindex; this.recordids = new Array, s.loadallrecords && (h = 0, n = this.totalrecords); var d = 0; this.virtualmode && (d = h = this.pageable ? this.pagesize * this.pagenum : s.recordstartindex, h = 0, n = this.totalrecords); var c = s.datafields ? s.datafields.length : 0; if (0 == c) { var u = t[0], p = new Array; for (obj in u) { var m = obj; p[p.length] = { name: m } } s.datafields = p, c = p.length } for (var g = h, f = h; f < n; f++) { var v = t[f]; if (void 0 == v) break; if (!s.record || "" == s.record || void 0 != (v = v[s.record])) { var x = this.getid(s.id, v, f); if ("object" == typeof x && (x = f), !this.recordids[x]) { this.recordids[x] = v; for (var w = {}, b = 0; b < c; b++) { var _ = s.datafields[b], y = ""; if (void 0 != _ && null != _) { if (_.map) { if (e.isFunction(_.map)) y = _.map(v); else { var j = _.map.split(r.mapChar); if (j.length > 0) { for (var q = v, a = 0; a < j.length; a++) void 0 != q && (q = q[j[a]]); y = q } else y = v[_.map] } void 0 != y && null != y ? y = this.getvaluebytype(y, _) : void 0 == y && null != y && (y = "") } if ("" == y && !_.map && (void 0 == (y = v[_.name]) && null != y && (y = ""), void 0 != _.value && void 0 != y)) { var T = y[_.value]; void 0 != T && (y = T) } if (y = this.getvaluebytype(y, _), void 0 != _.displayname ? w[_.displayname] = y : w[_.name] = y, "array" === _.type) { var C = function (t) { if (t) for (var i = 0; i < t.length; i++) { var o = t[i]; if (o) for (var a = 0; a < c; a++) { var n = s.datafields[a], l = ""; if (void 0 != n && null != n) { if (n.map) { if (e.isFunction(n.map)) l = n.map(o); else { var h = n.map.split(r.mapChar); if (h.length > 0) { for (var d = o, u = 0; u < h.length; u++) void 0 != d && (d = d[h[u]]); l = d } else l = o[n.map] } void 0 != l && null != l ? l = this.getvaluebytype(l, n) : void 0 == l && null != l && (l = "") } if ("" == l && !n.map && (void 0 == (l = o[n.name]) && null != l && (l = ""), void 0 != n.value && void 0 != l)) { var p = l[n.value]; void 0 != p && (l = p) } l = this.getvaluebytype(l, n), void 0 != n.displayname ? o[n.displayname] = l : o[n.name] = l, "array" === n.type && C.call(this, l) } } } }; C.call(this, y) } } } (s.recordendindex <= 0 || h < s.recordendindex) && (l[d + g] = e.extend({}, w), l[d + g].uid = x, this.originaldata[d + g] = e.extend({}, l[f]), g++) } } } this.records = l, this.cachedrecords = this.records } else this.totalrecords = 0; else alert("JSON Parse error.") }, loadxml: function (t, i, s) { "string" == typeof t && (t = i = e(e.parseXML(t)), t = null), void 0 == s.root && (s.root = ""), void 0 == s.record && (s.record = ""); var t; (t = e.jqx.browser.msie && i && void 0 != i.xml ? e(s.root + " " + s.record, e.parseXML(i.xml)) : t || e(s.root + " " + s.record, i)) || (t = []); var r = t.length; if (0 != t.length) { this.totalrecords = this.virtualmode ? s.totalrecords || r : r, this.records = new Array, this.originaldata = new Array; var o = this.records, a = this.pageable ? this.pagesize * this.pagenum : s.recordstartindex; this.recordids = new Array, s.loadallrecords && (a = 0, r = this.totalrecords); var n = 0; this.virtualmode && (n = a = this.pageable ? this.pagesize * this.pagenum : s.recordstartindex, a = 0, r = this.totalrecords); var l = s.datafields ? s.datafields.length : 0; if (0 == l) { var h = t[0], d = new Array; for (obj in h) { var c = obj; d[d.length] = { name: c } } s.datafields = d, l = d.length } for (var u = a, p = a; p < r && void 0 != (T = t[p]) ; p++) { S = this.getid(s.id, T, p); if (!this.recordids[S]) { this.recordids[S] = T; var m = {}, g = !1; s.hierarchy && s.hierarchy.root && (g = !0); for (var f = 0; f < l; f++) { var v = s.datafields[f], x = ""; if (void 0 != v && null != v) { if (v.map) if (e.isFunction(v.map)) x = v.map(T); else { var w = v.map.indexOf("["); if (w < 0) if (1 == (x = e(v.map, T)).length) x = x.text(); else { !0; for (var b = new Array, _ = 0; _ < x.length; _++) b.push(e(x[_]).text()); x = b, g && b.length > 0 && (x = b[0]) } else { var y = v.map.substring(0, w - 1), j = v.map.indexOf("]"), q = v.map.substring(w + 1, j); void 0 == (x = e(y, T).attr(q)) && (x = e(T).attr(q)), void 0 == x && (x = "") } "" == x && void 0 == (x = e(T).attr(v.map)) && (x = "") } if ("" == x) { if (1 == (x = e(v.name, T)).length) x = x.text(); else { for (var b = new Array, _ = 0; _ < x.length; _++) b.push(e(x[_]).text()); x = b, g && b.length > 0 && (x = b[0]) } "" == x && void 0 == (x = e(T).attr(v.name)) && (x = ""), "" == x && T.nodeName && T.nodeName == v.name && T.firstChild && (x = e(T.firstChild).text()) } x = this.getvaluebytype(x, v), void 0 != v.displayname ? m[v.displayname] = x : m[v.name] = x } } (s.recordendindex <= 0 || a < s.recordendindex) && (o[n + u] = e.extend({}, m), o[n + u].uid = S, this.originaldata[n + u] = e.extend({}, o[p]), u++) } } if (s.hierarchy && s.hierarchy.root) for (p = a; p < r; p++) { var T = t[p], C = o[p]; if (e(T).parent().length > 0) { var S = this.getid(s.id, e(T).parents(s.hierarchy.record + ":first")); C.parentuid = S } else C.parentuid = null } this.records = o, this.cachedrecords = this.records } }, loadtext: function (t, i) { if (null != t) { var s = i.rowDelimiter || this.rowDelimiter || "\n", r = t.split(s), o = r.length, a = t.split("\r"); 1 == o && a.length > 1 && (o = (r = a).length), this.totalrecords = this.virtualmode ? i.totalrecords || o : o, this.records = new Array, this.originaldata = new Array; var n = this.records, l = this.pageable ? this.pagesize * this.pagenum : i.recordstartindex; this.recordids = new Array, i.loadallrecords && (l = 0, o = this.totalrecords); var h = 0; this.virtualmode && (h = l = this.pageable ? this.pagesize * this.pagenum : i.recordstartindex, l = 0, o = this.totalrecords); var d = i.datafields.length, c = i.columnDelimiter || this.columnDelimiter; c || (c = "tab" === i.datatype || "tsv" === i.datatype ? "\t" : ","); for (var u = l; u < o; u++) { var p = r[u], m = null; if (!this.recordids[m]) { null == i.id && (m = u, this.recordids[m] = p); for (var g = {}, f = r[u].split(c), v = 0; v < d; v++) if (!(v >= f.length)) { var x = i.datafields[v], w = f[v]; x.map && e.isFunction(x.map) && (w = x.map(p)), x.type && (w = this.getvaluebytype(w, x)), g[x.map || x.name || v.toString()] = w, null != i.id && i.id === x.name && (m = w, this.recordids[m] = p) } null == m && (m = u), n[h + u] = e.extend({}, g), n[h + u].uid = m, this.originaldata[h + u] = e.extend({}, n[u]) } } this.records = n, this.cachedrecords = this.records } }, getvaluebytype: function (t, i) { var s = t; if (null == t) return t; if (e.isArray(t) && "array" != i.type) { for (var r = 0; r < t.length; r++) t[r] = this.getvaluebytype(t[r], i); return t } if ("date" == i.type) if ("NaN" == t) t = ""; else { var o = new Date(t); if ("string" == typeof t && i.format) { var a = e.jqx.dataFormat.parsedate(t, i.format); null != a && (o = a) } null == (t = ("NaN" == o.toString() || "Invalid Date" == o.toString()) && e.jqx.dataFormat ? e.jqx.dataFormat.tryparsedate(t) : o) && (t = s) } else if ("float" == i.type || "number" == i.type || "decimal" == i.type) if ("NaN" == t) t = ""; else { t = parseFloat(t); isNaN(t) && (t = s) } else if ("int" == i.type || "integer" == i.type) { var t = parseInt(t); isNaN(t) && (t = s) } else "bool" != i.type && "boolean" != i.type || (null != t && void 0 != t.toLowerCase && ("false" == t.toLowerCase() ? t = !1 : "true" == t.toLowerCase() && (t = !0)), t = 1 == t || (0 != t || "" === t) && ""); return t } }, e.jqx.dataFormat = {}, e.extend(e.jqx.dataFormat, { regexTrim: /^\s+|\s+$/g, regexInfinity: /^[+-]?infinity$/i, regexHex: /^0x[a-f0-9]+$/i, regexParseFloat: /^[+-]?\d*\.?\d*(e[+-]?\d+)?$/, toString: Object.prototype.toString, isBoolean: function (e) { return "boolean" == typeof e }, isObject: function (t) { return t && ("object" == typeof t || e.isFunction(t)) || !1 }, isDate: function (e) { return e instanceof Date }, arrayIndexOf: function (e, t) { if (e.indexOf) return e.indexOf(t); for (var i = 0, s = e.length; i < s; i++) if (e[i] === t) return i; return -1 }, isString: function (e) { return "string" == typeof e }, isNumber: function (e) { return "number" == typeof e && isFinite(e) }, isNull: function (e) { return null === e }, isUndefined: function (e) { return void 0 === e }, isValue: function (e) { return this.isObject(e) || this.isString(e) || this.isNumber(e) || this.isBoolean(e) }, isEmpty: function (t) { return !(!this.isString(t) && this.isValue(t)) && (!this.isValue(t) || "" === (t = e.trim(t).replace(/\&nbsp\;/gi, "").replace(/\&#160\;/gi, ""))) }, startsWith: function (e, t) { return 0 === e.indexOf(t) }, endsWith: function (e, t) { return e.substr(e.length - t.length) === t }, trim: function (e) { return (e + "").replace(this.regexTrim, "") }, isArray: function (e) { return "[object Array]" === this.toString.call(e) }, defaultcalendar: function () { return { "/": "/", ":": ":", firstDay: 0, days: { names: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], namesAbbr: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], namesShort: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"] }, months: { names: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", ""], namesAbbr: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", ""] }, AM: ["AM", "am", "AM"], PM: ["PM", "pm", "PM"], eras: [{ name: "A.D.", start: null, offset: 0 }], twoDigitYearMax: 2029, patterns: { d: "M/d/yyyy", D: "dddd, MMMM dd, yyyy", t: "h:mm tt", T: "h:mm:ss tt", f: "dddd, MMMM dd, yyyy h:mm tt", F: "dddd, MMMM dd, yyyy h:mm:ss tt", M: "MMMM dd", Y: "yyyy MMMM", S: "yyyy'-'MM'-'dd'T'HH':'mm':'ss", ISO: "yyyy-MM-dd hh:mm:ss", ISO2: "yyyy-MM-dd HH:mm:ss", d1: "dd.MM.yyyy", d2: "dd-MM-yyyy", zone1: "yyyy-MM-ddTHH:mm:ss-HH:mm", zone2: "yyyy-MM-ddTHH:mm:ss+HH:mm", custom: "yyyy-MM-ddTHH:mm:ss.fff", custom2: "yyyy-MM-dd HH:mm:ss.fff" }, percentsymbol: "%", currencysymbol: "$", currencysymbolposition: "before", decimalseparator: ".", thousandsseparator: "," } }, expandFormat: function (e, t) { t = t || "F"; var i, s = e.patterns, r = t.length; if (1 === r) { if (!(i = s[t])) throw "Invalid date format string '" + t + "'."; t = i } else 2 === r && "%" === t.charAt(0) && (t = t.charAt(1)); return t }, getEra: function (e, t) { if (!t) return 0; if ("string" == typeof e) return 0; for (var i, s = e.getTime(), r = 0, o = t.length; r < o; r++) if (null === (i = t[r].start) || s >= i) return r; return 0 }, toUpper: function (e) { return e.split("").join(" ").toUpperCase() }, toUpperArray: function (e) { for (var t = [], i = 0, s = e.length; i < s; i++) t[i] = this.toUpper(e[i]); return t }, getEraYear: function (e, t, i, s) { var r = e.getFullYear(); return !s && t.eras && (r -= t.eras[i].offset), r }, toUpper: function (e) { return e ? e.toUpperCase() : "" }, getDayIndex: function (e, t, i) { var s, r = e.days, o = e._upperDays; return o || (e._upperDays = o = [this.toUpperArray(r.names), this.toUpperArray(r.namesAbbr), this.toUpperArray(r.namesShort)]), t = t.toUpperCase(), i ? -1 === (s = this.arrayIndexOf(o[1], t)) && (s = this.arrayIndexOf(o[2], t)) : s = this.arrayIndexOf(o[0], t), s }, getMonthIndex: function (e, t, i) { var s = e.months, r = e.monthsGenitive || e.months, o = e._upperMonths, a = e._upperMonthsGen; o || (e._upperMonths = o = [this.toUpperArray(s.names), this.toUpperArray(s.namesAbbr)], e._upperMonthsGen = a = [this.toUpperArray(r.names), this.toUpperArray(r.namesAbbr)]), t = this.toUpper(t); var n = this.arrayIndexOf(i ? o[1] : o[0], t); return n < 0 && (n = this.arrayIndexOf(i ? a[1] : a[0], t)), n }, appendPreOrPostMatch: function (e, t) { for (var i = 0, s = !1, r = 0, o = e.length; r < o; r++) { var a = e.charAt(r); switch (a) { case "'": s ? t.push("'") : i++, s = !1; break; case "\\": s && t.push("\\"), s = !s; break; default: t.push(a), s = !1 } } return i }, getTokenRegExp: function () { return /\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g }, formatlink: function (e, t) { var i = ""; return t && t.target && (i = "target=" + t.target), "" != i ? "<a " + i + ' href="' + e + '">' + e + "</a>" : '<a href="' + e + '">' + e + "</a>" }, formatemail: function (e) { return '<a href="mailto:' + e + '">' + e + "</a>" }, formatNumber: function (e, t, i) { return this.formatnumber(e, t, i) }, formatnumber: function (e, t, i) { if (void 0 != i && null != i && "" != i || (i = this.defaultcalendar()), "" === t || null === t) return e; this.isNumber(e) || (e *= 1); var s; t.length > 1 && (s = parseInt(t.slice(1), 10)); var r = {}, o = t.charAt(0).toUpperCase(); switch (r.thousandsSeparator = i.thousandsseparator, r.decimalSeparator = i.decimalseparator, o) { case "D": case "d": case "F": case "f": r.decimalPlaces = s; break; case "N": case "n": r.decimalPlaces = 0; break; case "C": case "c": r.decimalPlaces = s, "before" == i.currencysymbolposition ? r.prefix = i.currencysymbol : r.suffix = i.currencysymbol; break; case "P": case "p": r.suffix = i.percentsymbol, r.decimalPlaces = s; break; default: throw "Bad number format specifier: " + o } if (this.isNumber(e)) { var a, n = e < 0, l = e + "", h = r.decimalSeparator ? r.decimalSeparator : "."; if (this.isNumber(r.decimalPlaces)) { var d = r.decimalPlaces, c = Math.pow(10, d); if (l = (e * c).toFixed(0) / c + "", a = l.lastIndexOf("."), d > 0) for (a < 0 ? a = (l += h).length - 1 : "." !== h && (l = l.replace(".", h)) ; l.length - 1 - a < d;) l += "0" } if (r.thousandsSeparator) { var u = r.thousandsSeparator; a = (a = l.lastIndexOf(h)) > -1 ? a : l.length; for (var p = l.substring(a), m = -1, g = a; g > 0; g--)++m % 3 == 0 && g !== a && (!n || g > 1) && (p = u + p), p = l.charAt(g - 1) + p; l = p } return l = r.prefix ? r.prefix + l : l, l = r.suffix ? l + r.suffix : l } return e }, tryparsedate: function (e, t) { void 0 != t && null != t || (t = this.defaultcalendar()); var i = this; if ("" == e) return null; if (null == e || e.substring || (e = e.toString()), null != e && "/Date(" == e.substring(0, 6)) { var s = /^\/Date\((-?\d+)(\+|-)?(\d+)?\)\/$/; if ("Invalid Date" == (o = new Date(+e.replace(/\/Date\((\d+)\)\//, "$1")))) { var r = e.match(/^\/Date\((\d+)([-+]\d\d)(\d\d)\)\/$/), o = null; r && (o = new Date(1 * r[1] + 36e5 * r[2] + 6e4 * r[3])) } if (null == o || "Invalid Date" == o || isNaN(o)) { var a = s.exec(e); if (a) { var n = new Date(parseInt(a[1])); if (a[2]) { var l = parseInt(a[3]); "-" === a[2] && (l = -l); var h = n.getUTCMinutes(); n.setUTCMinutes(h - l) } if (!isNaN(n.valueOf())) return n } } return o } patterns = t.patterns; for (prop in patterns) if (o = i.parsedate(e, patterns[prop], t)) return "ISO" == prop && (d = i.parsedate(e, patterns.ISO2, t)) ? d : o; if (null != e) { for (var d = null, c = [":", "/", "-"], u = !0, p = 0; p < c.length; p++) -1 != e.indexOf(c[p]) && (u = !1); if (u) { var m = new Number(e); if (!isNaN(m)) return new Date(m) } } return null }, getparseregexp: function (e, t) { var i = e._parseRegExp; if (i) { var s = i[t]; if (s) return s } else e._parseRegExp = i = {}; for (var r, o = this.expandFormat(e, t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g, "\\\\$1"), a = ["^"], n = [], l = 0, h = 0, d = this.getTokenRegExp() ; null !== (r = d.exec(o)) ;) { var c = o.slice(l, r.index); if (l = d.lastIndex, (h += this.appendPreOrPostMatch(c, a)) % 2) a.push(r[0]); else { var u, p = r[0], m = p.length; switch (p) { case "dddd": case "ddd": case "MMMM": case "MMM": case "gg": case "g": u = "(\\D+)"; break; case "tt": case "t": u = "(\\D*)"; break; case "yyyy": case "fff": case "ff": case "f": u = "(\\d{" + m + "})"; break; case "dd": case "d": case "MM": case "M": case "yy": case "y": case "HH": case "H": case "hh": case "h": case "mm": case "m": case "ss": case "s": u = "(\\d\\d?)"; break; case "zzz": u = "([+-]?\\d\\d?:\\d{2})"; break; case "zz": case "z": u = "([+-]?\\d\\d?)"; break; case "/": u = "(\\" + e["/"] + ")"; break; default: throw "Invalid date format pattern '" + p + "'." } u && a.push(u), n.push(r[0]) } } this.appendPreOrPostMatch(o.slice(l), a), a.push("$"); var g = { regExp: a.join("").replace(/\s+/g, "\\s+"), groups: n }; return i[t] = g }, outOfRange: function (e, t, i) { return e < t || e > i }, expandYear: function (e, t) { var i = new Date, s = this.getEra(i); if (t < 100) { var r = e.twoDigitYearMax; r = "string" == typeof r ? (new Date).getFullYear() % 100 + parseInt(r, 10) : r; var o = this.getEraYear(i, e, s); (t += o - o % 100) > r && (t -= 100) } return t }, parsedate: function (e, t, i) { void 0 != i && null != i || (i = this.defaultcalendar()), e = this.trim(e); var s = i, r = this.getparseregexp(s, t), o = new RegExp(r.regExp).exec(e); if (null === o) return null; for (var a, n = r.groups, l = null, h = null, d = null, c = null, u = null, p = 0, m = 0, g = 0, f = 0, v = null, x = !1, w = 0, b = n.length; w < b; w++) { var _ = o[w + 1]; if (_) { var y = n[w], j = y.length, q = parseInt(_, 10); switch (y) { case "dd": case "d": if (c = q, this.outOfRange(c, 1, 31)) return null; break; case "MMM": case "MMMM": if (d = this.getMonthIndex(s, _, 3 === j), this.outOfRange(d, 0, 11)) return null; break; case "M": case "MM": if (d = q - 1, this.outOfRange(d, 0, 11)) return null; break; case "y": case "yy": case "yyyy": if (h = j < 4 ? this.expandYear(s, q) : q, this.outOfRange(h, 0, 9999)) return null; break; case "h": case "hh": if (12 === (p = q) && (p = 0), this.outOfRange(p, 0, 11)) return null; break; case "H": case "HH": if (p = q, this.outOfRange(p, 0, 23)) return null; break; case "m": case "mm": if (m = q, this.outOfRange(m, 0, 59)) return null; break; case "s": case "ss": if (g = q, this.outOfRange(g, 0, 59)) return null; break; case "tt": case "t": if (!(x = s.PM && (_ === s.PM[0] || _ === s.PM[1] || _ === s.PM[2])) && (!s.AM || _ !== s.AM[0] && _ !== s.AM[1] && _ !== s.AM[2])) return null; break; case "f": case "ff": case "fff": if (f = q * Math.pow(10, 3 - j), this.outOfRange(f, 0, 999)) return null; break; case "ddd": case "dddd": if (u = this.getDayIndex(s, _, 3 === j), this.outOfRange(u, 0, 6)) return null; break; case "zzz": var T = _.split(/:/); if (2 !== T.length) return null; if (a = parseInt(T[0], 10), this.outOfRange(a, -12, 13)) return null; var C = parseInt(T[1], 10); if (this.outOfRange(C, 0, 59)) return null; v = 60 * a + (startsWith(_, "-") ? -C : C); break; case "z": case "zz": if (a = q, this.outOfRange(a, -12, 13)) return null; v = 60 * a; break; case "g": case "gg": var S = _; if (!S || !s.eras) return null; S = trim(S.toLowerCase()); for (var k = 0, I = s.eras.length; k < I; k++) if (S === s.eras[k].name.toLowerCase()) { l = k; break } if (null === l) return null } } } var D, P = new Date, B = s.convert; if (D = P.getFullYear(), null === h ? h = D : s.eras && (h += s.eras[l || 0].offset), null === d && (d = 0), null === c && (c = 1), B) { if (null === (P = B.toGregorian(h, d, c))) return null } else { if (P.setFullYear(h, d, c), P.getDate() !== c) return null; if (null !== u && P.getDay() !== u) return null } if (x && p < 12 && (p += 12), P.setHours(p, m, g, f), null !== v) { var z = P.getMinutes() - (v + P.getTimezoneOffset()); P.setHours(P.getHours() + parseInt(z / 60, 10), z % 60) } return P }, cleardatescache: function () { this.datescache = new Array }, formatDate: function (e, t, i) { return this.formatdate(e, t, i) }, formatdate: function (e, t, i) { function s(e, t) { var i, s = e + ""; return t > 1 && s.length < t ? (i = c[t - 2] + s).substr(i.length - t, t) : i = s } function r(e, t) { if (d) return d[t]; if (void 0 != e.getMonth) switch (t) { case 0: return e.getFullYear(); case 1: return e.getMonth(); case 2: return e.getDate() } } if (void 0 != i && null != i || (i = this.defaultcalendar()), "string" == typeof e) return e; var o = e.toString() + "_" + t; if (this.datescache && this.datescache[o]) return this.datescache[o]; if (!t || !t.length || "i" === t) { var a; return a = this.formatDate(e, i.patterns.F, culture) } var n = i.eras, l = "s" === t; t = this.expandFormat(i, t), a = []; for (var h, d, c = ["0", "00", "000"], u = 0, p = this.getTokenRegExp() ; ;) { var m = p.lastIndex, g = p.exec(t), f = t.slice(m, g ? g.index : t.length); if (u += this.appendPreOrPostMatch(f, a), !g) break; if (u % 2) a.push(g[0]); else { var v = g[0], x = v.length; switch (v) { case "ddd": case "dddd": var w = 3 === x ? i.days.namesAbbr : i.days.names; a.push(w[e.getDay()]); break; case "d": case "dd": !0, a.push(s(r(e, 2), x)); break; case "MMM": case "MMMM": var b = r(e, 1); a.push(i.months[3 === x ? "namesAbbr" : "names"][b]); break; case "M": case "MM": a.push(s(r(e, 1) + 1, x)); break; case "y": case "yy": case "yyyy": b = this.getEraYear(e, i, this.getEra(e, n), l), x < 4 && (b %= 100), a.push(s(b, x)); break; case "h": case "hh": 0 === (h = e.getHours() % 12) && (h = 12), a.push(s(h, x)); break; case "H": case "HH": a.push(s(e.getHours(), x)); break; case "m": case "mm": a.push(s(e.getMinutes(), x)); break; case "s": case "ss": a.push(s(e.getSeconds(), x)); break; case "t": case "tt": b = e.getHours() < 12 ? i.AM ? i.AM[0] : " " : i.PM ? i.PM[0] : " ", a.push(1 === x ? b.charAt(0) : b); break; case "f": case "ff": case "fff": a.push(s(e.getMilliseconds(), 3).substr(0, x)); break; case "z": case "zz": h = e.getTimezoneOffset() / 60, a.push((h <= 0 ? "+" : "-") + s(Math.floor(Math.abs(h)), x)); break; case "zzz": h = e.getTimezoneOffset() / 60, a.push((h <= 0 ? "+" : "-") + s(Math.floor(Math.abs(h)), 2) + ":" + s(Math.abs(e.getTimezoneOffset() % 60), 2)); break; case "g": case "gg": i.eras && a.push(i.eras[this.getEra(e, n)].name); break; case "/": a.push(i["/"]); break; default: throw "Invalid date format pattern '" + v + "'." } } } var _ = a.join(""); return this.datescache || (this.datescache = new Array), this.datescache[o] = _, _ } }), e.jqx.data = {}; var l, h, d = /#.*$/, c = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm, u = /^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/, p = /^(?:GET|HEAD)$/, m = /^\/\//, g = /\?/, f = /([?&])_=[^&]*/, v = /^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/, x = /\s+/, w = (jQuery.fn.load, {}), b = {}, _ = ["*/"] + ["*"]; try { h = location.href } catch (e) { (h = document.createElement("a")).href = "", h = h.href } l = v.exec(h.toLowerCase()) || [], e.extend(e.jqx.data, { ajaxSetup: function (t, i) { return i ? s(t, e.jqx.data.ajaxSettings) : (i = t, t = e.jqx.data.ajaxSettings), s(t, i), t }, ajaxSettings: { url: h, isLocal: u.test(l[1]), global: !0, type: "GET", contentType: "application/x-www-form-urlencoded; charset=UTF-8", processData: !0, async: !0, accepts: { xml: "application/xml, text/xml", html: "text/html", text: "text/plain", json: "application/json, text/javascript", "*": _ }, contents: { xml: /xml/, html: /html/, json: /json/ }, responseFields: { xml: "responseXML", text: "responseText" }, converters: { "* text": window.String, "text html": !0, "text json": jQuery.parseJSON, "text xml": jQuery.parseXML }, flatOptions: { context: !0, url: !0 } }, ajaxPrefilter: t(w), ajaxTransport: t(b), ajax: function (t, s) { function a(e, t, i, s) { var a, l, d, c, u, p = t; 2 !== M && (M = 2, j && clearTimeout(j), y = void 0, h = s || "", A.readyState = e > 0 ? 4 : 0, i && (c = r(S, A, i)), e >= 200 && e < 300 || 304 === e ? (S.ifModified && ((u = A.getResponseHeader("Last-Modified")) && (jQuery.lastModified[n] = u), (u = A.getResponseHeader("Etag")) && (jQuery.etag[n] = u)), 304 === e ? (p = "notmodified", a = !0) : (p = (a = o(S, c)).state, l = a.data, a = !(d = a.error))) : (d = p, p && !e || (p = "error", e < 0 && (e = 0))), A.status = e, A.statusText = (t || p) + "", a ? D.resolveWith(k, [l, p, A]) : D.rejectWith(k, [A, p, d]), A.statusCode(B), B = void 0, T && I.trigger("ajax" + (a ? "Success" : "Error"), [A, S, a ? l : d]), P.fireWith(k, [A, p]), T && (I.trigger("ajaxComplete", [A, S]), --jQuery.active || jQuery.event.trigger("ajaxStop"))) } "object" == typeof t && (s = t, t = void 0), s = s || {}; var n, h, u, y, j, q, T, C, S = e.jqx.data.ajaxSetup({}, s), k = S.context || S, I = k !== S && (k.nodeType || k instanceof jQuery) ? jQuery(k) : jQuery.event, D = jQuery.Deferred(), P = jQuery.Callbacks("once memory"), B = S.statusCode || {}, z = {}, H = {}, M = 0, E = "canceled", A = { readyState: 0, setRequestHeader: function (e, t) { if (!M) { var i = e.toLowerCase(); e = H[i] = H[i] || e, z[e] = t } return this }, getAllResponseHeaders: function () { return 2 === M ? h : null }, getResponseHeader: function (e) { var t; if (2 === M) { if (!u) for (u = {}; t = c.exec(h) ;) u[t[1].toLowerCase()] = t[2]; t = u[e.toLowerCase()] } return void 0 === t ? null : t }, overrideMimeType: function (e) { return M || (S.mimeType = e), this }, abort: function (e) { return e = e || E, y && y.abort(e), a(0, e), this } }; if (D.promise(A), A.success = A.done, A.error = A.fail, A.complete = P.add, A.statusCode = function (e) { if (e) { var t; if (M < 2) for (t in e) B[t] = [B[t], e[t]]; else t = e[A.status], A.always(t) } return this }, S.url = ((t || S.url) + "").replace(d, "").replace(m, l[1] + "//"), S.dataTypes = jQuery.trim(S.dataType || "*").toLowerCase().split(x), null == S.crossDomain && (q = v.exec(S.url.toLowerCase()), S.crossDomain = !(!q || q[1] === l[1] && q[2] === l[2] && (q[3] || ("http:" === q[1] ? 80 : 443)) == (l[3] || ("http:" === l[1] ? 80 : 443)))), S.data && S.processData && "string" != typeof S.data && (S.data = jQuery.param(S.data, S.traditional)), i(w, S, s, A), 2 === M) return A; if (T = S.global, S.type = S.type.toUpperCase(), S.hasContent = !p.test(S.type), T && 0 == jQuery.active++ && jQuery.event.trigger("ajaxStart"), !S.hasContent && (S.data && (S.url += (g.test(S.url) ? "&" : "?") + S.data, delete S.data), n = S.url, !1 === S.cache)) { var L = jQuery.now(), O = S.url.replace(f, "$1_=" + L); S.url = O + (O === S.url ? (g.test(S.url) ? "&" : "?") + "_=" + L : "") } (S.data && S.hasContent && !1 !== S.contentType || s.contentType) && A.setRequestHeader("Content-Type", S.contentType), S.ifModified && (n = n || S.url, jQuery.lastModified[n] && A.setRequestHeader("If-Modified-Since", jQuery.lastModified[n]), jQuery.etag[n] && A.setRequestHeader("If-None-Match", jQuery.etag[n])), A.setRequestHeader("Accept", S.dataTypes[0] && S.accepts[S.dataTypes[0]] ? S.accepts[S.dataTypes[0]] + ("*" !== S.dataTypes[0] ? ", " + _ + "; q=0.01" : "") : S.accepts["*"]); for (C in S.headers) A.setRequestHeader(C, S.headers[C]); if (S.beforeSend && (!1 === S.beforeSend.call(k, A, S) || 2 === M)) return A.abort(); E = "abort"; for (C in { success: 1, error: 1, complete: 1 }) A[C](S[C]); if (y = i(b, S, s, A)) { A.readyState = 1, T && I.trigger("ajaxSend", [A, S]), S.async && S.timeout > 0 && (j = setTimeout(function () { A.abort("timeout") }, S.timeout)); try { M = 1, y.send(z, a) } catch (e) { if (!(M < 2)) throw e; a(-1, e) } } else a(-1, "No Transport"); return A }, active: 0, lastModified: {}, etag: {} }); var y = [], j = /\?/, q = /(=)\?(?=&|$)|\?\?/, T = jQuery.now(); e.jqx.data.ajaxSetup({ jsonp: "callback", jsonpCallback: function () { var e = y.pop() || jQuery.expando + "_" + T++; return this[e] = !0, e } }), e.jqx.data.ajaxPrefilter("json jsonp", function (e, t, i) { var s, r, o, a = e.data, n = e.url, l = !1 !== e.jsonp, h = l && q.test(n), d = l && !h && "string" == typeof a && !(e.contentType || "").indexOf("application/x-www-form-urlencoded") && q.test(a); if ("jsonp" === e.dataTypes[0] || h || d) return s = e.jsonpCallback = jQuery.isFunction(e.jsonpCallback) ? e.jsonpCallback() : e.jsonpCallback, r = window[s], h ? e.url = n.replace(q, "$1" + s) : d ? e.data = a.replace(q, "$1" + s) : l && (e.url += (j.test(n) ? "&" : "?") + e.jsonp + "=" + s), e.converters["script json"] = function () { return o || jQuery.error(s + " was not called"), o[0] }, e.dataTypes[0] = "json", window[s] = function () { o = arguments }, i.always(function () { window[s] = r, e[s] && (e.jsonpCallback = t.jsonpCallback, y.push(s)), o && jQuery.isFunction(r) && r(o[0]), o = r = void 0 }), "script" }), e.jqx.data.ajaxSetup({ accepts: { script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript" }, contents: { script: /javascript|ecmascript/ }, converters: { "text script": function (e) { return jQuery.globalEval(e), e } } }), e.jqx.data.ajaxPrefilter("script", function (e) { void 0 === e.cache && (e.cache = !1), e.crossDomain && (e.type = "GET", e.global = !1) }), e.jqx.data.ajaxTransport("script", function (e) { if (e.crossDomain) { var t, i = document.head || document.getElementsByTagName("head")[0] || document.documentElement; return { send: function (s, r) { (t = document.createElement("script")).async = "async", e.scriptCharset && (t.charset = e.scriptCharset), t.src = e.url, t.onload = t.onreadystatechange = function (e, s) { (s || !t.readyState || /loaded|complete/.test(t.readyState)) && (t.onload = t.onreadystatechange = null, i && t.parentNode && i.removeChild(t), t = void 0, s || r(200, "success")) }, i.insertBefore(t, i.firstChild) }, abort: function () { t && t.onload(0, 1) } } } }); var C, S = !!window.ActiveXObject && function () { for (var e in C) C[e](0, 1) }, k = 0; e.jqx.data.ajaxSettings.xhr = window.ActiveXObject ? function () { return !this.isLocal && a() || n() } : a, function (e) { jQuery.extend(jQuery.support, { ajax: !!e, cors: !!e && "withCredentials" in e }) }(e.jqx.data.ajaxSettings.xhr()), jQuery.support.ajax && e.jqx.data.ajaxTransport(function (e) { if (!e.crossDomain || jQuery.support.cors) { var t; return { send: function (i, s) { var r, o, a = e.xhr(); if (e.username ? a.open(e.type, e.url, e.async, e.username, e.password) : a.open(e.type, e.url, e.async), e.xhrFields) for (o in e.xhrFields) a[o] = e.xhrFields[o]; e.mimeType && a.overrideMimeType && a.overrideMimeType(e.mimeType), e.crossDomain || i["X-Requested-With"] || (i["X-Requested-With"] = "XMLHttpRequest"); try { for (o in i) a.setRequestHeader(o, i[o]) } catch (e) { } a.send(e.hasContent && e.data || null), t = function (i, o) { var n, l, h, d, c; try { if (t && (o || 4 === a.readyState)) if (t = void 0, r && (a.onreadystatechange = jQuery.noop, S && delete C[r]), o) 4 !== a.readyState && a.abort(); else { n = a.status, h = a.getAllResponseHeaders(), d = {}, (c = a.responseXML) && c.documentElement && (d.xml = c); try { d.text = a.responseText } catch (e) { } try { l = a.statusText } catch (e) { l = "" } n || !e.isLocal || e.crossDomain ? 1223 === n && (n = 204) : n = d.text ? 200 : 404 } } catch (e) { o || s(-1, e) } d && s(n, l, d, h) }, e.async ? 4 === a.readyState ? setTimeout(t, 0) : (r = ++k, S && (C || (C = {}, jQuery(window).unload(S)), C[r] = t), a.onreadystatechange = t) : t() }, abort: function () { t && t(0, 1) } } } }), e.jqx.filter = function () { this.operator = "and"; var t = ["EMPTY", "NOT_EMPTY", "CONTAINS", "CONTAINS_CASE_SENSITIVE", "DOES_NOT_CONTAIN", "DOES_NOT_CONTAIN_CASE_SENSITIVE", "STARTS_WITH", "STARTS_WITH_CASE_SENSITIVE", "ENDS_WITH", "ENDS_WITH_CASE_SENSITIVE", "EQUAL", "EQUAL_CASE_SENSITIVE", "NULL", "NOT_NULL"], i = ["EQUAL", "NOT_EQUAL", "LESS_THAN", "LESS_THAN_OR_EQUAL", "GREATER_THAN", "GREATER_THAN_OR_EQUAL", "NULL", "NOT_NULL"], s = ["EQUAL", "NOT_EQUAL", "LESS_THAN", "LESS_THAN_OR_EQUAL", "GREATER_THAN", "GREATER_THAN_OR_EQUAL", "NULL", "NOT_NULL"], r = ["EQUAL", "NOT_EQUAL"], o = new Array, a = new Array; this.evaluate = function (e) { for (var t = !0, i = 0; i < o.length; i++) { var s = o[i].evaluate(e); t = 0 == i ? s : 1 == a[i] || "or" == a[i] ? t || s : t && s } return t }, this.getfilterscount = function () { return o.length }, this.setoperatorsbyfiltertype = function (e, o) { switch (e) { case "numericfilter": i = o; break; case "stringfilter": t = o; break; case "datefilter": s = o; break; case "booleanfilter": r = o } }, this.getoperatorsbyfiltertype = function (e) { var o = new Array; switch (e) { case "numericfilter": o = i.slice(0); break; case "stringfilter": o = t.slice(0); break; case "datefilter": o = s.slice(0); break; case "booleanfilter": o = r.slice(0) } return o }; var n = function () { var e = function () { return (65536 * (1 + Math.random()) | 0).toString(16).substring(1) }; return e() + "-" + e() + "-" + e() }; this.createfilter = function (e, t, i, s, r, o) { if (null == e || void 0 == e) return null; switch (e) { case "numericfilter": return new d(t, i.toUpperCase()); case "stringfilter": return new l(t, i.toUpperCase()); case "datefilter": return new c(t, i.toUpperCase(), r, o); case "booleanfilter": return new h(t, i.toUpperCase()); case "custom": return new u(t, i.toUpperCase(), s) } throw new Error("jqxGrid: There is no such filter type. The available filter types are: 'numericfilter', 'stringfilter', 'datefilter' and 'booleanfilter'") }, this.getfilters = function () { for (var e = new Array, t = 0; t < o.length; t++) { var i = { value: o[t].filtervalue, condition: o[t].comparisonoperator, operator: a[t], type: o[t].type }; e[t] = i } return e }, this.addfilter = function (e, t) { o[o.length] = t, t.key = n(), a[a.length] = e }, this.removefilter = function (e) { for (var t = 0; t < o.length; t++) if (o[t].key == e.key) { o.splice(t, 1), a.splice(t, 1); break } }, this.getoperatorat = function (e) { return void 0 == e || null == e ? null : e < 0 || e > o.length ? null : a[e] }, this.setoperatorat = function (e, t) { return void 0 == e || null == e ? null : e < 0 || e > o.length ? null : void (a[t] = t) }, this.getfilterat = function (e) { return void 0 == e || null == e ? null : e < 0 || e > o.length ? null : o[e] }, this.setfilterat = function (e, t) { return void 0 == e || null == e ? null : e < 0 || e > o.length ? null : (t.key = n(), void (o[e] = t)) }, this.clear = function () { o = new Array, a = new Array }; var l = function (t, i) { this.filtervalue = t, this.comparisonoperator = i, this.type = "stringfilter", this.evaluate = function (t) { var i = this.filtervalue, s = this.comparisonoperator; if (null == t || void 0 == t || "" == t) { if ("NULL" == s) return !0; if ("EQUAL" == s && t == i) return !0; if ("NOT_EQUAL" == s && t != i) return !0; if ("EMPTY" != s) return !1; if ("" == t) return !0 } var r = ""; try { r = t.toString() } catch (e) { return !0 } var o = function (t, i) { switch (s) { case "EQUAL": return e.jqx.string.equalsIgnoreCase(t, i); case "EQUAL_CASE_SENSITIVE": return e.jqx.string.equals(t, i); case "NOT_EQUAL": return !e.jqx.string.equalsIgnoreCase(t, i); case "NOT_EQUAL_CASE_SENSITIVE": return !e.jqx.string.equals(t, i); case "CONTAINS": return e.jqx.string.containsIgnoreCase(t, i); case "CONTAINS_CASE_SENSITIVE": return e.jqx.string.contains(t, i); case "DOES_NOT_CONTAIN": return !e.jqx.string.containsIgnoreCase(t, i); case "DOES_NOT_CONTAIN_CASE_SENSITIVE": return !e.jqx.string.contains(t, i); case "EMPTY": return "" == t; case "NOT_EMPTY": return "" != t; case "NOT_NULL": return null != t; case "STARTS_WITH": return e.jqx.string.startsWithIgnoreCase(t, i); case "ENDS_WITH": return e.jqx.string.endsWithIgnoreCase(t, i); case "ENDS_WITH_CASE_SENSITIVE": return e.jqx.string.endsWith(t, i); case "STARTS_WITH_CASE_SENSITIVE": return e.jqx.string.startsWith(t, i); default: return !1 } }, a = new Array; if (i && i.indexOf && (i.indexOf("|") >= 0 || i.indexOf(" AND ") >= 0 || i.indexOf(" OR ") >= 0 || i.indexOf(" and ") >= 0 || i.indexOf(" or ") >= 0)) { if (f = o(r, i)) return f; var n = i.indexOf(" AND ") >= 0 ? i.split(" AND ") : new Array, l = i.indexOf(" OR ") >= 0 ? i.split(" OR ") : new Array, h = i.indexOf(" and ") >= 0 ? i.split(" and ") : new Array, d = i.indexOf(" or ") >= 0 ? i.split(" or ") : new Array, c = i.indexOf("|") >= 0 ? i.split("|") : new Array; if (c.length > 0) for (p = 0; p < c.length; p++) c[p] = e.trim(c[p]); var u = i.indexOf(" ") >= 0 ? i.split(" ") : new Array; if (u.length > 0) for (p = 0; p < u.length; p++) u[p] = e.trim(u[p]); if (n = n.concat(u), n = n.concat(h), l = l.concat(c), l = l.concat(d), n.length > 0) for (p = 0; p < n.length; p++) !n[p].indexOf(" OR ") >= 0 && a.push(n[p]); if (l.length > 0) for (var p = 0; p < l.length; p++) !l[p].indexOf(" AND ") >= 0 && a.push(l[p]); for (var m = void 0, g = 0; g < a.length; g++) { var f = o(r, t = a[g]), v = g < n.length ? "and" : "or"; m = void 0 == m ? f : "or" == v ? m || f : m && f } return m } return o(r, i) } }, h = function (e, t) { this.filtervalue = e, this.comparisonoperator = t, this.type = "booleanfilter", this.evaluate = function (e) { var t = this.filtervalue, i = this.comparisonoperator; if (null == e || void 0 == e) return "NULL" == i; var s = e; switch (i) { case "EQUAL": return s == t || s.toString() == t.toString(); case "NOT_EQUAL": return s != t && s.toString() != t.toString(); default: return !1 } } }, d = function (t, i) { this.filtervalue = t, this.comparisonoperator = i, this.type = "numericfilter", this.evaluate = function (t) { var i = this.filtervalue, s = this.comparisonoperator; if (null === t || void 0 === t || "" === t) { if ("NOT_NULL" == s) return !1; if ("NULL" == s) return !0; switch (s) { case "EQUAL": return t == i; case "NOT_EQUAL": return t != i } return !1 } if ("NULL" == s) return !1; if ("NOT_NULL" == s) return !0; var r = t; try { r = parseFloat(r) } catch (e) { if ("" != t.toString()) return !1 } var o = function (t, i) { switch (s) { case "EQUAL": return t == i; case "NOT_EQUAL": return t != i; case "GREATER_THAN": return t > i; case "GREATER_THAN_OR_EQUAL": return t >= i; case "LESS_THAN": return t < i; case "LESS_THAN_OR_EQUAL": return t <= i; case "STARTS_WITH": return e.jqx.string.startsWithIgnoreCase(t.toString(), i.toString()); case "ENDS_WITH": return e.jqx.string.endsWithIgnoreCase(t.toString(), i.toString()); case "ENDS_WITH_CASE_SENSITIVE": return e.jqx.string.endsWith(t.toString(), i.toString()); case "STARTS_WITH_CASE_SENSITIVE": return e.jqx.string.startsWith(t.toString(), i.toString()); case "CONTAINS": return e.jqx.string.containsIgnoreCase(t.toString(), i.toString()); case "CONTAINS_CASE_SENSITIVE": return e.jqx.string.contains(t.toString(), i.toString()); case "DOES_NOT_CONTAIN": return !e.jqx.string.containsIgnoreCase(t.toString(), i.toString()); case "DOES_NOT_CONTAIN_CASE_SENSITIVE": return !e.jqx.string.contains(t.toString(), i.toString()); default: return !0 } }, a = new Array; if (i && i.indexOf && (i.indexOf("|") >= 0 || i.indexOf(" AND ") >= 0 || i.indexOf(" OR ") >= 0 || i.indexOf(" and ") >= 0 || i.indexOf(" or ") >= 0)) { if (f = o(r, i)) return f; var n = (i = i.toString()).indexOf(" AND ") >= 0 ? i.split(" AND ") : new Array, l = i.indexOf(" OR ") >= 0 ? i.split(" OR ") : new Array, h = i.indexOf(" and ") >= 0 ? i.split(" and ") : new Array, d = i.indexOf(" or ") >= 0 ? i.split(" or ") : new Array; n = n.concat(h), l = l.concat(d); var c = i.indexOf("|") >= 0 ? i.split("|") : new Array; if (c.length > 0) for (u = 0; u < c.length; u++) c[u] = e.trim(c[u]); if (l = l.concat(c), n.length > 0) for (u = 0; u < n.length; u++) !n[u].indexOf(" OR ") >= 0 && a.push(n[u]); if (l.length > 0) for (var u = 0; u < l.length; u++) !l[u].indexOf(" AND ") >= 0 && a.push(l[u]); for (var p = void 0, m = 0; m < a.length; m++) { if ((t = a[m]) && t.indexOf && t.indexOf("..") >= 0) { var g = t.toString().split(".."); 2 == g.length && (f = r >= g[0] && r <= g[1]) } else var f = o(r, t); var v = m < n.length ? "and" : "or"; p = void 0 == p ? f : "or" == v ? p || f : p && f } return p } return i && i.indexOf && i.indexOf("..") >= 0 && 2 == (a = i.toString().split("..")).length ? r >= a[0] && r <= a[1] : o(r, i) } }, c = function (t, i, s, r) { if (this.filtervalue = t, this.type = "datefilter", void 0 != s && void 0 != r) { var o = e.jqx.dataFormat.parsedate(t, s, r); if (null != o) this.filterdate = o; else { var a = e.jqx.dataFormat.tryparsedate(t, r); null != a && (this.filterdate = a) } } else "NaN" == (n = new Date(t)).toString() || "Invalid Date" == n.toString() ? this.filterdate = e.jqx.dataFormat.tryparsedate(t) : this.filterdate = n; if (!this.filterdate) { var n = new Date(t); "NaN" == n.toString() || "Invalid Date" == n.toString() ? this.filterdate = e.jqx.dataFormat.tryparsedate(t) : this.filterdate = n } this.comparisonoperator = i, this.evaluate = function (t) { var i = this.filtervalue, o = this.comparisonoperator; if (null == t || void 0 == t || "" == t) { if ("NOT_NULL" == o) return !1; if ("NULL" == o) return !0; switch (o) { case "EQUAL": return t == i; case "NOT_EQUAL": return t != i } return !1 } if ("NULL" == o) return !1; if ("NOT_NULL" == o) return !0; var a = new Date; a.setFullYear(1900, 0, 1), a.setHours(12, 0, 0, 0); try { var n = new Date(t); a = t = "NaN" == n.toString() || "Invalid Date" == n.toString() ? e.jqx.dataFormat.tryparsedate(t) : n; var l = !1; void 0 != s && void 0 != r && (s.indexOf("t") >= 0 || s.indexOf("T") >= 0 || s.indexOf(":") >= 0 || s.indexOf("f") >= 0) && (l = !0, i && -1 == i.toString().indexOf(":") && null != (y = e.jqx.dataFormat.tryparsedate(i.toString() + ":00", r)) && (this.filterdate = y)), l || (a.setHours(0), a.setMinutes(0), a.setSeconds(0)) } catch (e) { if ("" != t.toString()) return !1 } if (null != this.filterdate) i = this.filterdate; else if (i.indexOf && (-1 != i.indexOf(":") || !isNaN(parseInt(i)))) { var h = new Date(a); h.setHours(12, 0, 0, 0); for (var d = i.split(":"), c = 0; c < d.length; c++) 0 == c && h.setHours(d[c]), 1 == c && h.setMinutes(d[c]), 2 == c && h.setSeconds(d[c]); i = h } l && i && i.setFullYear && a && a.getFullYear && -1 == s.indexOf("d") && -1 == s.indexOf("M") && -1 == s.indexOf("y") && i.setFullYear(a.getFullYear(), a.getMonth(), a.getDate()); var u = function (t, i) { switch (null == t && (t = ""), o) { case "EQUAL": return t.toString() == i.toString(); case "NOT_EQUAL": return t.toString() != i.toString(); case "GREATER_THAN": return t > i; case "GREATER_THAN_OR_EQUAL": return t >= i; case "LESS_THAN": return t < i; case "LESS_THAN_OR_EQUAL": return t <= i; case "STARTS_WITH": return e.jqx.string.startsWithIgnoreCase(t.toString(), i.toString()); case "ENDS_WITH": return e.jqx.string.endsWithIgnoreCase(t.toString(), i.toString()); case "ENDS_WITH_CASE_SENSITIVE": return e.jqx.string.endsWith(t.toString(), i.toString()); case "STARTS_WITH_CASE_SENSITIVE": return e.jqx.string.startsWith(t.toString(), i.toString()); case "CONTAINS": return e.jqx.string.containsIgnoreCase(t.toString(), i.toString()); case "CONTAINS_CASE_SENSITIVE": return e.jqx.string.contains(t.toString(), i.toString()); case "DOES_NOT_CONTAIN": return !e.jqx.string.containsIgnoreCase(t.toString(), i.toString()); case "DOES_NOT_CONTAIN_CASE_SENSITIVE": return !e.jqx.string.contains(t.toString(), i.toString()); default: return !0 } }, p = new Array; if (i && i.indexOf && (i.indexOf("|") >= 0 || i.indexOf(" AND ") >= 0 || i.indexOf(" OR ") >= 0 || i.indexOf(" and ") >= 0 || i.indexOf(" or ") >= 0)) { if (y = u(a, i)) return y; var m = i.indexOf(" AND ") >= 0 ? i.split(" AND ") : new Array, g = i.indexOf(" OR ") >= 0 ? i.split(" OR ") : new Array, f = i.indexOf(" and ") >= 0 ? i.split(" and ") : new Array, v = i.indexOf(" or ") >= 0 ? i.split(" or ") : new Array; m = m.concat(f), g = g.concat(v); var x = i.indexOf("|") >= 0 ? i.split("|") : new Array; if (x.length > 0) for (c = 0; c < x.length; c++) x[c] = e.trim(x[c]); if (g = g.concat(x), m.length > 0) for (c = 0; c < m.length; c++) !m[c].indexOf(" OR ") >= 0 && p.push(m[c]); if (g.length > 0) for (c = 0; c < g.length; c++) !g[c].indexOf(" AND ") >= 0 && p.push(g[c]); for (var w = void 0, b = 0; b < p.length; b++) { if ((t = p[b]) && t.indexOf && t.indexOf("..") >= 0) { var _ = t.toString().split(".."); 2 == _.length && (y = a >= _[0] && a <= _[1]) } else var y = u(a, t); var j = b < m.length ? "and" : "or"; w = void 0 == w ? y : "or" == j ? w || y : w && y } return w } return i && i.indexOf && i.indexOf("..") >= 0 && 2 == (p = i.toString().split("..")).length ? a >= p[0] && a <= p[1] : u(a, i) } }, u = function (e, t, i) { this.filtervalue = e, this.comparisonoperator = t, this.evaluate = function (e, t) { return i(this.filtervalue, e, this.comparisonoperator) } } } }(jQuery), function (e) { e.jqx.jqxWidget("jqxValidator", "", {}), e.extend(e.jqx._jqxValidator.prototype, { defineInstance: function () { this.rules = null, this.scroll = !0, this.focus = !0, this.scrollDuration = 300, this.scrollCallback = null, this.position = "right", this.arrow = !0, this.animation = "fade", this.animationDuration = 150, this.closeOnClick = !0, this.onError = null, this.onSuccess = null, this.ownerElement = null, this._events = ["validationError", "validationSuccess"], this.hintPositionOffset = 5, this._inputHint = [], this.rtl = !1, this.hintType = "tooltip" }, createInstance: function () { "label" == this.hintType && 150 == this.animationDuration && (this.animationDuration = 0), this._configureInputs(), this._removeEventListeners(), this._addEventListeners() }, destroy: function () { this._removeEventListeners(), this.hide() }, validate: function (t) { var i, s, r, o, a = !0, n = 1 / 0, l = []; this.updatePosition(); for (var h = this, d = 0, c = 0; c < this.rules.length; c += 1) "function" == typeof this.rules[c].rule && d++; this.positions = new Array; for (c = 0; c < this.rules.length; c += 1) { e(this.rules[c].input); if ("function" == typeof this.rules[c].rule) { this._validateRule(this.rules[c], function (c, u) { if (0 == (i = c)) { a = !1; e(u.input); o = e(u.input), l.push(o), s = o.offset().top, n > s && (n = s, r = o) } 0 == --d && "function" == typeof t && (h._handleValidation(a, n, r, l), t && t(a)) }) } else i = this._validateRule(this.rules[c]); 0 == i && (a = !1, o = e(this.rules[c].input), l.push(o), s = o.offset().top, n > s && (n = s, r = o)) } return 0 == d ? (this._handleValidation(a, n, r, l), a) : void 0 }, validateInput: function (e) { for (var t = this._getRulesForInput(e), i = !0, s = 0; s < t.length; s += 1) this._validateRule(t[s]) || (i = !1); return i }, hideHint: function (e) { for (var t = this._getRulesForInput(e), i = 0; i < t.length; i += 1) this._hideHintByRule(t[i]) }, hide: function () { for (var e = 0; e < this.rules.length; e += 1) this.rules[e], this._hideHintByRule(this.rules[e]) }, updatePosition: function () { var t; this.positions = new Array; for (var i = 0; i < this.rules.length; i += 1) (t = this.rules[i]).hint && this._hintLayout(t.hint, e(t.input), t.position, t) }, _getRulesForInput: function (e) { for (var t = [], i = 0; i < this.rules.length; i += 1) this.rules[i].input === e && t.push(this.rules[i]); return t }, _validateRule: function (t, i) { var s, r = e(t.input), o = !0, a = this, n = !1; return "function" == typeof t.rule && 1 == (n = t.rule.call(this, r, function (e) { if (e) a._hideHintByRule(t), i && i(!0, t); else { var o = a.animation; a.animation = null, t.hint && a._hideHintByRule(t), s = t.hintRender.apply(a, [t.message, r]), a._hintLayout(s, r, t.position, t), a._showHint(s), t.hint = s, a._removeLowPriorityHints(t), i && i(!1, t), a.animation = o } })) && i && i(!0, t), "function" == typeof t.rule && 0 == n ? ("function" != typeof t.hintRender || t.hint || this._higherPriorityActive(t) || !r.is(":visible") || (s = t.hintRender.apply(this, [t.message, r]), this._removeLowPriorityHints(t), this._hintLayout(s, r, t.position, t), this._showHint(s), t.hint = s), o = !1, i && i(!1, t)) : this._hideHintByRule(t), o }, _hideHintByRule: function (t) { var i, s = e(t.input), r = this, o = function () { if ("label" == r.hintType) { var e = r; if ("top" == e.position || "left" == e.position) { if (s.prev().hasClass(".jqx-validator-error-label")) return } else if (s.next().hasClass(".jqx-validator-error-label")) return; "input" != s[0].nodeName.toLowerCase() ? s.find("input").length > 0 && (s.find(".jqx-input").length > 0 ? s.find(".jqx-input").removeClass(e.toThemeProperty("jqx-validator-error-element")) : s.is(".jqx-checkbox") && s.find(".jqx-checkbox-default").removeClass(e.toThemeProperty("jqx-validator-error-element")), s.is(".jqx-radiobutton") ? s.find(".jqx-radiobutton-default").removeClass(e.toThemeProperty("jqx-validator-error-element")) : s.removeClass(e.toThemeProperty("jqx-validator-error-element"))) : s.removeClass(e.toThemeProperty("jqx-validator-error-element")) } }; t && ((i = t.hint) && (this.positions && this.positions[Math.round(i.offset().top) + "_" + Math.round(i.offset().left)] && (this.positions[Math.round(i.offset().top) + "_" + Math.round(i.offset().left)] = null), "fade" === this.animation ? i.fadeOut(this.animationDuration, function () { i.remove(), o() }) : (i.remove(), o())), t.hint = null) }, _handleValidation: function (e, t, i, s) { e ? (this._raiseEvent(1), "function" == typeof this.onSuccess && this.onSuccess()) : (this._scrollHandler(t), this.focus && i.focus(), this._raiseEvent(0, { invalidInputs: s }), "function" == typeof this.onError && this.onError(s)) }, _scrollHandler: function (t) { if (this.scroll) { var i = this; e("html,body").animate({ scrollTop: t }, this.scrollDuration, function () { "function" == typeof i.scrollCallback && i.scrollCallback.call(i) }) } }, _higherPriorityActive: function (e) { for (var t, i = !1, s = this.rules.length - 1; s >= 0; s -= 1) { if (t = this.rules[s], i && t.input === e.input && t.hint) return !0; t === e && (i = !0) } return !1 }, _removeLowPriorityHints: function (e) { for (var t, i = !1, s = 0; s < this.rules.length; s += 1) t = this.rules[s], i && t.input === e.input && this._hideHintByRule(t), t === e && (i = !0) }, _getHintRuleByInput: function (t) { for (var i, s = 0; s < this.rules.length; s += 1) if (i = this.rules[s], e(i.input)[0] === t[0] && i.hint) return i; return null }, _removeEventListeners: function () { for (var t, i, s, r = 0; r < this.rules.length; r += 1) { s = (t = this.rules[r]).action.split(","), i = e(t.input); for (var o = 0; o < s.length; o += 1) this.removeHandler(i, e.trim(s[o]) + ".jqx-validator") } }, _addEventListeners: function () { var t, i; if (this.host.parents(".jqx-window").length > 0) { var s = this, r = function () { s.updatePosition() }, o = this.host.parents(".jqx-window"); this.addHandler(o, "closed", function () { s.hide() }), this.addHandler(o, "moved", r), this.addHandler(o, "moving", r), this.addHandler(o, "resized", r), this.addHandler(o, "resizing", r), this.addHandler(e(document.parentWindow), "scroll", function () { s.scroll && r() }) } for (var a = 0; a < this.rules.length; a += 1) t = this.rules[a], i = e(t.input), this._addListenerTo(i, t) }, _addListenerTo: function (t, i) { var s = this, r = i.action.split(","), o = !1; this._isjQWidget(t) && (o = !0); for (var a = 0; a < r.length; a += 1) { var n = e.trim(r[a]); !o || "blur" != n && "focus" != n || t && "input" != t[0].nodeName.toLowerCase() && (t = t.find("input")), this.addHandler(t, n + ".jqx-validator", function (e) { s._validateRule(i) }) } }, _configureInputs: function () { this.rules = this.rules || []; for (var e = 0; e < this.rules.length; e += 1) this._handleInput(e) }, _handleInput: function (e) { var t = this.rules[e]; t.position || (t.position = this.position), t.message || (t.message = "Validation Failed!"), t.action || (t.action = "blur"), t.hintRender || (t.hintRender = this._hintRender), t.rule ? this._handleRule(t) : t.rule = null }, _handleRule: function (e) { var t, i, s = e.rule, r = !1; if ("string" == typeof s ? (s.indexOf("=") >= 0 && (s = s.split("="), i = s[1].split(","), s = s[0]), (t = this["_" + s]) ? e.rule = function (e, s) { return t.apply(this, [e].concat(i)) } : r = !0) : "function" != typeof s ? r = !0 : e.rule = s, r) throw new Error("Wrong parameter!") }, _required: function (t) { switch (this._getType(t)) { case "textarea": case "password": case "jqx-input": case "text": var i = e.data(t[0]); if (i.jqxMaskedInput) { var s = t.jqxMaskedInput("promptChar"), r = t.jqxMaskedInput("value"); return r && r.indexOf(s) < 0 } return i.jqxNumberInput ? "" !== t.jqxNumberInput("inputValue") : !!i.jqxDateTimeInput || "" !== e.trim(t.val()); case "checkbox": case "radio": return t.is(":checked"); case "div": return t.is(".jqx-checkbox") ? t.jqxCheckBox("checked") : !!t.is(".jqx-radiobutton") && t.jqxRadioButton("checked") } return !1 }, _notNumber: function (e) { return this._validateText(e, function (e) { return "" == e || !/\d/.test(e) }) }, _startWithLetter: function (e) { return this._validateText(e, function (e) { return "" == e || !/\d/.test(e.substring(0, 1)) }) }, _number: function (e) { return this._validateText(e, function (e) { if ("" == e) return !0; var t = new Number(e); return !isNaN(t) && isFinite(t) }) }, _phone: function (e) { return this._validateText(e, function (e) { return "" == e || /^\(\d{3}\)(\d){3}-(\d){4}$/.test(e) }) }, _length: function (e, t, i) { return this._minLength(e, t) && this._maxLength(e, i) }, _maxLength: function (e, t) { return t = parseInt(t, 10), this._validateText(e, function (e) { return e.length <= t }) }, _minLength: function (e, t) { return t = parseInt(t, 10), this._validateText(e, function (e) { return e.length >= t }) }, _email: function (e) { return this._validateText(e, function (e) { return "" == e || /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e) }) }, _zipCode: function (e) { return this._validateText(e, function (e) { return "" == e || /^(^\d{5}$)|(^\d{5}-\d{4}$)|(\d{3}-\d{2}-\d{4})$/.test(e) }) }, _ssn: function (e) { return this._validateText(e, function (e) { return "" == e || /\d{3}-\d{2}-\d{4}/.test(e) }) }, _validateText: function (e, t) { var i; return !!this._isTextInput(e) && (i = this._isjQWidget(e) ? e.find("input").val() : e.val(), t(i)) }, _isjQWidget: function (t) { var i = e.data(t[0]); return !!(i.jqxMaskedInput || i.jqxNumberInput || i.jqxDateTimeInput) }, _isTextInput: function (e) { var t = this._getType(e); return "text" === t || "textarea" === t || "password" === t || e.is(".jqx-input") }, _getType: function (t) { var i = t[0].tagName.toLowerCase(); return "textarea" === i ? "textarea" : t.is(".jqx-input") ? "jqx-input" : "input" === i ? e(t).attr("type") ? e(t).attr("type").toLowerCase() : "text" : i }, _hintRender: function (t, i) { if ("label" == this.hintType) { (r = e('<label class="' + this.toThemeProperty("jqx-validator-error-label") + '"></label>')).html(t); var s = this; return this.closeOnClick && r.click(function () { s.hideHint(i.selector) }), "left" == this.position || "top" == this.position ? r.insertBefore(e(i)) : r.insertAfter(e(i)), r } var r = e('<div class="' + this.toThemeProperty("jqx-validator-hint") + ' jqx-rc-all"></div>'), o = this; return r.html(t), this.closeOnClick && r.click(function () { o.hideHint(i.selector) }), null == this.ownerElement ? r.appendTo(document.body) : this.ownerElement.innerHTML ? r.appendTo(e(this.ownerElement)) : r.appendTo(this.ownerElement), r }, _hintLayout: function (t, i, s, r) { if (this._hintRender === r.hintRender) { var o; if (o = this._getPosition(i, s, t, r), "label" == this.hintType) { var a = "2px"; "left" != this.position && "top" != this.position || (a = "-2px"), "input" != i[0].nodeName.toLowerCase() ? i.find("input").length > 0 && (i.find(".jqx-input").length > 0 ? i.find(".jqx-input").addClass(this.toThemeProperty("jqx-validator-error-element")) : i.is(".jqx-checkbox") && i.find(".jqx-checkbox-default").addClass(this.toThemeProperty("jqx-validator-error-element")), i.is(".jqx-radiobutton") ? i.find(".jqx-radiobutton-default").addClass(this.toThemeProperty("jqx-validator-error-element")) : i.addClass(this.toThemeProperty("jqx-validator-error-element"))) : i.addClass(this.toThemeProperty("jqx-validator-error-element")); var n = e("<span></span>"); n.addClass(this.toThemeProperty("jqx-validator-hint")), n.html(t.text()), n.appendTo(e(document.body)); var l = n.outerWidth(); return n.remove(), t.css({ position: "relative", left: e(i).css("margin-left"), width: e(i).width(), top: a }), void ("center" == s && (t.css("width", l), t.css("left", "0px"), t.css("margin-left", "auto"), t.css("margin-right", "auto"))) } t.css({ position: "absolute", left: o.left, top: o.top }), this.arrow && this._addArrow(i, t, s, o) } }, _showHint: function (e) { e && "fade" === this.animation && (e.fadeOut(0), e.fadeIn(this.animationDuration)) }, _getPosition: function (t, i, s, r) { var o, a, n = t.offset(), l = t.outerWidth(), h = t.outerHeight(); if (this.rtl && i.indexOf("left") >= 0 && (i = "right"), this.rtl && i.indexOf("right") >= 0 && (i = "left"), null != this.ownerElement && ((n = { left: 0, top: 0 }).top = parseInt(n.top) + t.position().top, n.left = parseInt(n.left) + t.position().left), r && r.hintPositionRelativeElement) { var d = e(r.hintPositionRelativeElement); n = d.offset(), l = d.width(), h = d.height() } return o = i.indexOf("top") >= 0 ? n.top - h : i.indexOf("bottom") >= 0 ? n.top + s.outerHeight() + this.hintPositionOffset + 5 : n.top, a = i.indexOf("center") >= 0 ? n.left + this.hintPositionOffset + (l - s.outerWidth()) / 2 : i.indexOf("left") >= 0 ? n.left - s.outerWidth() - this.hintPositionOffset : i.indexOf("right") >= 0 ? n.left + l + this.hintPositionOffset : n.left + this.hintPositionOffset, i.indexOf(":") >= 0 && (i = i.split(":")[1].split(","), a += parseInt(i[0], 10), o += parseInt(i[1], 10)), this.positions || (this.positions = new Array), this.positions[Math.round(o) + "_" + Math.round(a)] && this.positions[Math.round(o) + "_" + Math.round(a)].top == o && (o += t.outerHeight()), this.positions[Math.round(o) + "_" + Math.round(a)] = { left: a, top: o }, { left: a, top: o } }, _addArrow: function (t, i, s, r) { var o, a, n = e('<div class="' + this.toThemeProperty("jqx-validator-hint-arrow") + '"></div>'); this.rtl && s.indexOf("left") >= 0 && (s = "right"), this.rtl && s.indexOf("right") >= 0 && (s = "left"), i.children(".jqx-validator-hint-arrow").remove(), i.append(n); var l = n.outerHeight(), h = n.outerWidth(), d = i.outerHeight(), c = i.outerWidth(); this._addImage(n), a = s.indexOf("top") >= 0 ? d - l : s.indexOf("bottom") >= 0 ? -l : (d - l) / 2 - l / 2, s.indexOf("center") >= 0 ? o = (c - h) / 2 : s.indexOf("left") >= 0 ? o = c - h / 2 - 1 : s.indexOf("right") >= 0 && (o = -h / 2), (s.indexOf("topright") >= 0 || s.indexOf("bottomright") >= 0) && (o = 0), (s.indexOf("topleft") >= 0 || s.indexOf("bottomleft") >= 0) && (o = c - h), n.css({ position: "absolute", left: o, top: a }) }, _addImage: function (e) { var t = e.css("background-image"); t = (t = (t = (t = t.replace('url("', "")).replace('")', "")).replace("url(", "")).replace(")", ""), e.css("background-image", "none"), e.append('<img src="' + t + '" alt="Arrow" style="position: relative; top: 0px; left: 0px; width: ' + e.width() + "px; height: " + e.height() + 'px;" />') }, _raiseEvent: function (t, i) { var s = e.Event(this._events[t]); return s.args = i, this.host.trigger(s) }, propertyChangedHandler: function (e, t, i, s) { "rules" === t && (this._configureInputs(), this._removeEventListeners(), this._addEventListeners()) } }) }(jQuery), function (e) { e.jqx.cssroundedcorners = function (e) { var t = { all: "jqx-rc-all", top: "jqx-rc-t", bottom: "jqx-rc-b", left: "jqx-rc-l", right: "jqx-rc-r", "top-right": "jqx-rc-tr", "top-left": "jqx-rc-tl", "bottom-right": "jqx-rc-br", "bottom-left": "jqx-rc-bl" }; for (prop in t) if (t.hasOwnProperty(prop) && e == prop) return t[prop] }, e.jqx.jqxWidget("jqxButton", "", {}), e.extend(e.jqx._jqxButton.prototype, { defineInstance: function () { this.cursor = "arrow", this.roundedCorners = "all", this.disabled = !1, this.height = null, this.width = null, this.overrideTheme = !1, this.enableHover = !0, this.enableDefault = !0, this.enablePressed = !0, this.rtl = !1, this._ariaDisabled = !1, this._scrollAreaButton = !1, this.aria = { "aria-disabled": { name: "disabled", type: "boolean" } } }, createInstance: function (t) { var i = this; this._setSize(), this._ariaDisabled || this.host.attr("role", "button"), this.overrideTheme || (this.host.addClass(this.toThemeProperty(e.jqx.cssroundedcorners(this.roundedCorners))), this.enableDefault && this.host.addClass(this.toThemeProperty("jqx-button")), this.host.addClass(this.toThemeProperty("jqx-widget"))), this.isTouchDevice = e.jqx.mobile.isTouchDevice(), this._ariaDisabled || e.jqx.aria(this), "arrow" != this.cursor && (this.disabled ? this.host.css({ cursor: "arrow" }) : this.host.css({ cursor: this.cursor })); s = "mouseenter mouseleave mousedown focus blur"; if (this._scrollAreaButton) var s = "mousedown"; this.isTouchDevice && (this.addHandler(this.host, e.jqx.mobile.getTouchEventName("touchstart"), function (e) { i.isPressed = !0, i.refresh() }), this.addHandler(e(document), e.jqx.mobile.getTouchEventName("touchend") + "." + this.element.id, function (e) { i.isPressed = !1, i.refresh() })), this.addHandler(this.host, s, function (e) { switch (e.type) { case "mouseenter": this.isTouchDevice || !i.disabled && i.enableHover && (i.isMouseOver = !0, i.refresh()); break; case "mouseleave": this.isTouchDevice || !i.disabled && i.enableHover && (i.isMouseOver = !1, i.refresh()); break; case "mousedown": i.disabled || (i.isPressed = !0, i.refresh()); break; case "focus": i.disabled || (i.isFocused = !0, i.refresh()); break; case "blur": i.disabled || (i.isFocused = !1, i.refresh()) } }), this.mouseupfunc = function (e) { i.disabled || (i.isPressed = !1, i.refresh()) }, this.addHandler(e(document), "mouseup.button" + this.element.id, this.mouseupfunc); try { if (("" != document.referrer || window.frameElement) && null != window.top && window.top != window.self) { var r = ""; if (window.parent && document.referrer && (r = document.referrer), -1 != r.indexOf(document.location.host)) { window.top.document && this.addHandler(e(window.top.document), "mouseup", function (e) { i.isPressed = !1, i.refresh() }) } } } catch (e) { } this.propertyChangeMap.roundedCorners = function (t, i, s, r) { t.host.removeClass(t.toThemeProperty(e.jqx.cssroundedcorners(s))), t.host.addClass(t.toThemeProperty(e.jqx.cssroundedcorners(r))) }, this.propertyChangeMap.width = function (e, t, i, s) { e._setSize(), e.refresh() }, this.propertyChangeMap.height = function (e, t, i, s) { e._setSize(), e.refresh() }, this.propertyChangeMap.disabled = function (t, i, s, r) { s != r && (t.host[0].disabled = r, t.host.attr("disabled", r), t.refresh(), r ? t.host.css({ cursor: "default" }) : t.host.css({ cursor: t.cursor }), e.jqx.aria(t, "aria-disabled", t.disabled)) }, this.propertyChangeMap.rtl = function (e, t, i, s) { i != s && e.refresh() }, this.propertyChangeMap.theme = function (t, i, s, r) { t.host.removeClass(), t.enableDefault && t.host.addClass(t.toThemeProperty("jqx-button")), t.host.addClass(t.toThemeProperty("jqx-widget")), t.overrideTheme || t.host.addClass(t.toThemeProperty(e.jqx.cssroundedcorners(t.roundedCorners))), t._oldCSSCurrent = null, t.refresh() }, this.disabled && (this.element.disabled = !0, this.host.attr("disabled", !0)) }, resize: function (e, t) { this.width = e, this.height = t, this._setSize() }, val: function () { var t = this.host.find("input"); return t.length > 0 ? 0 == arguments.length || "object" == typeof value ? t.val() : (t.val(value), this.refresh(), t.val()) : 0 == arguments.length || "object" == typeof value ? "button" == this.element.nodeName.toLowerCase() ? e(this.element).text() : this.element.value : (this.element.value = arguments[0], "button" == this.element.nodeName.toLowerCase() && e(this.element).text(arguments[0]), void this.refresh()) }, _setSize: function () { null == this.width || -1 == this.width.toString().indexOf("px") && -1 == this.width.toString().indexOf("%") ? void 0 == this.width || isNaN(this.width) || this.host.css("width", this.width) : this.host.css("width", this.width), null == this.height || -1 == this.height.toString().indexOf("px") && -1 == this.height.toString().indexOf("%") ? void 0 == this.height || isNaN(this.height) || this.host.css("height", parseInt(this.height)) : this.host.css("height", this.height) }, _removeHandlers: function () { this.removeHandler(this.host, "selectstart"), this.removeHandler(this.host, "click"), this.removeHandler(this.host, "focus"), this.removeHandler(this.host, "blur"), this.removeHandler(this.host, "mouseenter"), this.removeHandler(this.host, "mouseleave"), this.removeHandler(this.host, "mousedown"), this.removeHandler(e(document), "mouseup.button" + this.element.id, this.mouseupfunc), this.isTouchDevice && (this.removeHandler(this.host, e.jqx.mobile.getTouchEventName("touchstart")), this.removeHandler(e(document), e.jqx.mobile.getTouchEventName("touchend") + "." + this.element.id)), this.mouseupfunc = null, delete this.mouseupfunc }, focus: function () { this.host.focus() }, destroy: function () { this._removeHandlers(); var t = e.data(this.element, "jqxButton"); t && delete t.instance, this.host.removeClass(), this.host.removeData(), this.host.remove(), delete this.set, delete this.get, delete this.call, delete this.propertyChangeMap.roundedCorners, delete this.propertyChangeMap.width, delete this.propertyChangeMap.height, delete this.propertyChangeMap.disabled, delete this.propertyChangeMap.rtl, delete this.propertyChangeMap.theme, delete this.propertyChangeMap, delete this.element, delete this.host }, render: function () { this.refresh() }, refresh: function () { if (!this.overrideTheme) { var e = this.toThemeProperty("jqx-fill-state-focus"), t = this.toThemeProperty("jqx-fill-state-disabled"), i = this.toThemeProperty("jqx-fill-state-normal"); this.enableDefault || (i = ""); var s = this.toThemeProperty("jqx-fill-state-hover"), r = this.toThemeProperty("jqx-fill-state-pressed"), o = this.toThemeProperty("jqx-fill-state-pressed"); this.enablePressed || (r = ""); var a = ""; if (this.host) { if (this.host[0].disabled = this.disabled, this.disabled) return a = i + " " + t, this.host.addClass(a), void (this._oldCSSCurrent = a); a = this.isMouseOver && !this.isTouchDevice ? this.isPressed ? o : s : this.isPressed ? r : i, this.isFocused && (a += " " + e), a != this._oldCSSCurrent && (this._oldCSSCurrent && this.host.removeClass(this._oldCSSCurrent), this.host.addClass(a), this._oldCSSCurrent = a), this.rtl && (this.host.addClass(this.toThemeProperty("jqx-rtl")), this.host.css("direction", "rtl")) } } } }), e.jqx.jqxWidget("jqxLinkButton", "", {}), e.extend(e.jqx._jqxLinkButton.prototype, { defineInstance: function () { this.disabled = !1, this.height = null, this.width = null, this.rtl = !1, this.href = null }, createInstance: function (e) { var t = this; this.host.onselectstart = function () { return !1 }, this.host.attr("role", "button"); var i = this.height || this.host.height(), s = this.width || this.host.width(); this.href = this.host.attr("href"), this.target = this.host.attr("target"), this.content = this.host.text(), this.element.innerHTML = "", this.host.append("<input type='button' class='jqx-wrapper'/>"); var r = this.host.find("input"); r.addClass(this.toThemeProperty("jqx-reset")), r.width(s), r.height(i), r.val(this.content), this.host.find("tr").addClass(this.toThemeProperty("jqx-reset")), this.host.find("td").addClass(this.toThemeProperty("jqx-reset")), this.host.find("tbody").addClass(this.toThemeProperty("jqx-reset")), this.host.css("color", "inherit"), this.host.addClass(this.toThemeProperty("jqx-link")), r.css({ width: s }), r.css({ height: i }); var o = void 0 == e ? {} : e[0] || {}; r.jqxButton(o), this.disabled && (this.host[0].disabled = !0), this.propertyChangeMap.disabled = function (e, t, i, s) { e.host[0].disabled = s, e.host.find("input").jqxButton({ disabled: s }) }, this.addHandler(r, "click", function (e) { return this.disabled || t.onclick(e), !1 }) }, onclick: function (e) { null != this.target ? window.open(this.href, this.target) : window.location = this.href } }), e.jqx.jqxWidget("jqxRepeatButton", "jqxButton", {}), e.extend(e.jqx._jqxRepeatButton.prototype, { defineInstance: function () { this.delay = 50 }, createInstance: function (t) { var i = this, s = e.jqx.mobile.isTouchDevice(), r = s ? "touchend." + this.base.element.id : "mouseup." + this.base.element.id, o = s ? "touchstart." + this.base.element.id : "mousedown." + this.base.element.id; this.addHandler(e(document), r, function (e) { null != i.timeout && (clearTimeout(i.timeout), i.timeout = null, i.refresh()), void 0 != i.timer && (clearInterval(i.timer), i.timer = null, i.refresh()) }), this.addHandler(this.base.host, o, function (e) { null != i.timer && clearInterval(i.timer), i.timeout = setTimeout(function () { clearInterval(i.timer), i.timer = setInterval(function (e) { i.ontimer(e) }, i.delay) }, 150) }), this.mousemovefunc = function (e) { s || 0 == e.which && null != i.timer && (clearInterval(i.timer), i.timer = null) }, this.addHandler(this.base.host, "mousemove", this.mousemovefunc) }, destroy: function () { var t = e.jqx.mobile.isTouchDevice(), i = t ? "touchend." + this.base.element.id : "mouseup." + this.base.element.id, s = t ? "touchstart." + this.base.element.id : "mousedown." + this.base.element.id; this.removeHandler(this.base.host, "mousemove", this.mousemovefunc), this.removeHandler(this.base.host, s), this.removeHandler(e(document), i), this.timer = null, delete this.mousemovefunc, delete this.timer; var r = e.data(this.base.element, "jqxRepeatButton"); r && delete r.instance, e(this.base.element).removeData(), this.base.destroy(), delete this.base }, stop: function () { clearInterval(this.timer), this.timer = null }, ontimer: function (e) { var e = new jQuery.Event("click"); null != this.base && null != this.base.host && this.base.host.trigger(e) } }), e.jqx.jqxWidget("jqxToggleButton", "jqxButton", {}), e.extend(e.jqx._jqxToggleButton.prototype, { defineInstance: function () { this.toggled = !1, this.uiToggle = !0, this.aria = { "aria-checked": { name: "toggled", type: "boolean" }, "aria-disabled": { name: "disabled", type: "boolean" } } }, createInstance: function (t) { var i = this; this.base.overrideTheme = !0, this.isTouchDevice = e.jqx.mobile.isTouchDevice(), e.jqx.aria(this), this.propertyChangeMap.toggled = function (e, t, i, s) { e.refresh() }, this.propertyChangeMap.disabled = function (e, t, i, s) { e.base.disabled = s, e.refresh() }, this.addHandler(this.base.host, "click", function (e) { !i.base.disabled && i.uiToggle && i.toggle() }), this.isTouchDevice || (this.addHandler(this.base.host, "mouseenter", function (e) { i.base.disabled || i.refresh() }), this.addHandler(this.base.host, "mouseleave", function (e) { i.base.disabled || i.refresh() })), this.addHandler(this.base.host, "mousedown", function (e) { i.base.disabled || i.refresh() }), this.addHandler(e(document), "mouseup.togglebutton" + this.base.element.id, function (e) { i.base.disabled || i.refresh() }) }, destroy: function () { this._removeHandlers(), this.base.destroy() }, _removeHandlers: function () { this.removeHandler(this.base.host, "click"), this.removeHandler(this.base.host, "mouseenter"), this.removeHandler(this.base.host, "mouseleave"), this.removeHandler(this.base.host, "mousedown"), this.removeHandler(e(document), "mouseup.togglebutton" + this.base.element.id) }, toggle: function () { this.toggled = !this.toggled, this.refresh(), e.jqx.aria(this, "aria-checked", this.toggled) }, unCheck: function () { this.toggled = !1, this.refresh() }, check: function () { this.toggled = !0, this.refresh() }, refresh: function () { var e = this.base.toThemeProperty("jqx-fill-state-disabled"), t = this.base.toThemeProperty("jqx-fill-state-normal"); this.base.enableDefault || (t = ""); var i = this.base.toThemeProperty("jqx-fill-state-hover"), s = this.base.toThemeProperty("jqx-fill-state-pressed"), r = this.base.toThemeProperty("jqx-fill-state-pressed"), o = ""; if (this.base.host[0].disabled = this.base.disabled, this.base.disabled) return o = t + " " + e, void this.base.host.addClass(o); o = this.base.isMouseOver && !this.isTouchDevice ? this.base.isPressed || this.toggled ? r : i : this.base.isPressed || this.toggled ? s : t, this.base.host.hasClass(e) && e != o && this.base.host.removeClass(e), this.base.host.hasClass(t) && t != o && this.base.host.removeClass(t), this.base.host.hasClass(i) && i != o && this.base.host.removeClass(i), this.base.host.hasClass(s) && s != o && this.base.host.removeClass(s), this.base.host.hasClass(r) && r != o && this.base.host.removeClass(r), this.base.host.hasClass(o) || this.base.host.addClass(o) } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxDropDownButton", "", {}), e.extend(e.jqx._jqxDropDownButton.prototype, { defineInstance: function () { this.disabled = !1, this.width = null, this.height = null, this.arrowSize = 19, this.enableHover = !0, void 0 == this.openDelay && (this.openDelay = 250), void 0 == this.closeDelay && (this.closeDelay = 300), this.animationType = "default", this.enableBrowserBoundsDetection = !1, this.dropDownHorizontalAlignment = "left", this.popupZIndex = 2e4, this.autoOpen = !1, this.rtl = !1, this.initContent = null, this.dropDownWidth = null, this.dropDownHeight = null, this.focusable = !0, this.touchMode = !1, this.aria = { "aria-disabled": { name: "disabled", type: "boolean" } }, this.events = ["open", "close", "opening", "closing"] }, createInstance: function (t) { this.width || (this.width = 200), this.height || (this.height = 25), this.isanimating = !1; var i = e("<div style='background-color: transparent; -webkit-appearance: none; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; border: 0px; position: relative;'><div id='dropDownButtonWrapper' style='outline: none; background-color: transparent; border: none; float: left; width:100%; height: 100%; position: relative;'><div id='dropDownButtonContent' unselectable='on' style='outline: none; background-color: transparent; border: none; float: left; position: relative;'/><div id='dropDownButtonArrow' unselectable='on'  style='background-color: transparent; border: none; float: right; position: relative;'><div unselectable='on'></div></div></div></div>"); this.host.attr("tabindex") ? (i.attr("tabindex", this.host.attr("tabindex")), this.host.removeAttr("tabindex")) : i.attr("tabindex", 0), this.focusable || i.removeAttr("tabIndex"), e.jqx.aria(this), this.popupContent = this.host.children(), this.host.attr("role", "button"), 0 == this.popupContent.length ? (this.popupContent = e("<div>" + this.host.text() + "</div>"), this.popupContent.css("display", "block"), this.element.innerHTML = "") : this.popupContent.detach(); var s = this; this.addHandler(this.host, "loadContent", function (e) { s._arrange() }); try { var r = "dropDownButtonPopup" + this.element.id, o = e(e.find("#" + r)); o.length > 0 && o.remove(), e.jqx.aria(this, "aria-haspopup", !0), e.jqx.aria(this, "aria-owns", r); var a = e("<div class='dropDownButton' style='overflow: hidden; left: 0px; top: 0px; position: absolute;' id='dropDownButtonPopup" + this.element.id + "'></div>"); a.addClass(this.toThemeProperty("jqx-widget-content")), a.addClass(this.toThemeProperty("jqx-dropdownbutton-popup")), a.addClass(this.toThemeProperty("jqx-popup")), a.addClass(this.toThemeProperty("jqx-rc-all")), a.css("z-index", this.popupZIndex), e.jqx.browser.msie && a.addClass(this.toThemeProperty("jqx-noshadow")), this.popupContent.appendTo(a), a.appendTo(document.body), this.container = a, this.container.css("visibility", "hidden") } catch (e) { } this.touch = e.jqx.mobile.isTouchDevice(), this.dropDownButtonStructure = i, this.host.append(i), this.dropDownButtonWrapper = this.host.find("#dropDownButtonWrapper"), this.firstDiv = this.dropDownButtonWrapper.parent(), this.dropDownButtonArrow = this.host.find("#dropDownButtonArrow"), this.arrow = e(this.dropDownButtonArrow.children()[0]), this.dropDownButtonContent = this.host.find("#dropDownButtonContent"), this.dropDownButtonContent.addClass(this.toThemeProperty("jqx-dropdownlist-content")), this.dropDownButtonWrapper.addClass(this.toThemeProperty("jqx-disableselect")), this.rtl && this.dropDownButtonContent.addClass(this.toThemeProperty("jqx-rtl")); n = this; this.host.parents() && this.addHandler(this.host.parents(), "scroll.dropdownbutton" + this.element.id, function (e) { n.isOpened() && n.close() }), this.addHandler(this.dropDownButtonWrapper, "selectstart", function () { return !1 }), this.dropDownButtonWrapper[0].id = "dropDownButtonWrapper" + this.element.id, this.dropDownButtonArrow[0].id = "dropDownButtonArrow" + this.element.id, this.dropDownButtonContent[0].id = "dropDownButtonContent" + this.element.id; var n = this; this.propertyChangeMap.disabled = function (t, i, s, r) { r ? (t.host.addClass(n.toThemeProperty("jqx-dropdownlist-state-disabled")), t.host.addClass(n.toThemeProperty("jqx-fill-state-disabled")), t.dropDownButtonContent.addClass(n.toThemeProperty("jqx-dropdownlist-content-disabled"))) : (t.host.removeClass(n.toThemeProperty("jqx-dropdownlist-state-disabled")), t.host.removeClass(n.toThemeProperty("jqx-fill-state-disabled")), t.dropDownButtonContent.removeClass(n.toThemeProperty("jqx-dropdownlist-content-disabled"))), e.jqx.aria(t, "aria-disabled", t.disabled) }, this.disabled && (this.host.addClass(this.toThemeProperty("jqx-dropdownlist-state-disabled")), this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")), this.dropDownButtonContent.addClass(this.toThemeProperty("jqx-dropdownlist-content-disabled"))); var l = this.toThemeProperty("jqx-rc-all") + " " + this.toThemeProperty("jqx-fill-state-normal") + " " + this.toThemeProperty("jqx-widget") + " " + this.toThemeProperty("jqx-widget-content") + " " + this.toThemeProperty("jqx-dropdownlist-state-normal"); if (this.host.addClass(l), this.arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down")), this.arrow.addClass(this.toThemeProperty("jqx-icon")), this._setSize(), this.render(), e.jqx.browser.msie && e.jqx.browser.version < 8 && (this.container.css("display", "none"), this.host.parents(".jqx-window").length > 0)) { var h = this.host.parents(".jqx-window").css("z-index"); a.css("z-index", h + 10), this.container.css("z-index", h + 10) } }, setContent: function (e) { this.dropDownButtonContent.children().remove(), this.dropDownButtonContent[0].innerHTML = "", this.dropDownButtonContent.append(e) }, val: function (e) { if (0 == arguments.length || "object" == typeof e) return this.dropDownButtonContent.text(); this.dropDownButtonContent.html(e) }, getContent: function () { return this.dropDownButtonContent.children().length > 0 ? this.dropDownButtonContent.children() : this.dropDownButtonContent.text() }, _setSize: function () { null != this.width && -1 != this.width.toString().indexOf("px") ? this.host[0].style.width = this.width : void 0 == this.width || isNaN(this.width) || (this.host[0].style.width = parseInt(this.width) + "px"), null != this.height && -1 != this.height.toString().indexOf("px") ? this.host[0].style.height = this.height : void 0 == this.height || isNaN(this.height) || (this.host[0].style.height = parseInt(this.height) + "px"); var t = !1; null != this.width && -1 != this.width.toString().indexOf("%") && (t = !0, this.host.width(this.width)), null != this.height && -1 != this.height.toString().indexOf("%") && (t = !0, this.host.height(this.height)); var i = this; t && this.refresh(!1), e.jqx.utilities.resize(this.host, function () { i._arrange() }) }, isOpened: function () { var t = this, i = e.data(document.body, "openedJQXButton" + this.element.id); return null != i && i == t.popupContent }, focus: function () { try { this.host.focus() } catch (e) { } }, render: function () { this.removeHandlers(); var t = this, i = !1; this.touch || (this.addHandler(this.host, "mouseenter", function () { !t.disabled && t.enableHover && (i = !0, t.host.addClass(t.toThemeProperty("jqx-dropdownlist-state-hover")), t.arrow.addClass(t.toThemeProperty("jqx-icon-arrow-down-hover")), t.host.addClass(t.toThemeProperty("jqx-fill-state-hover"))) }), this.addHandler(this.host, "mouseleave", function () { !t.disabled && t.enableHover && (t.host.removeClass(t.toThemeProperty("jqx-dropdownlist-state-hover")), t.host.removeClass(t.toThemeProperty("jqx-fill-state-hover")), t.arrow.removeClass(t.toThemeProperty("jqx-icon-arrow-down-hover")), i = !1) })), t.autoOpen && (this.addHandler(this.host, "mouseenter", function () { !t.isOpened() && t.autoOpen && (t.open(), t.host.focus()) }), this.addHandler(e(document), "mousemove." + t.element.id, function (e) { if (t.isOpened() && t.autoOpen) { var i = t.host.coord(), s = i.top, r = i.left, o = t.container.coord(), a = o.left, n = o.top; canClose = !0, e.pageY >= s && e.pageY <= s + t.host.height() && e.pageX >= r && e.pageX < r + t.host.width() && (canClose = !1), e.pageY >= n && e.pageY <= n + t.container.height() && e.pageX >= a && e.pageX < a + t.container.width() && (canClose = !1), canClose && t.close() } })), this.addHandler(this.dropDownButtonWrapper, "mousedown", function (e) { if (!t.disabled) { var i = "visible" == t.container.css("visibility"); if (!t.isanimating) { if (i) return t.close(), !1; t.open(), t.focusable || e.preventDefault && e.preventDefault() } } }), this.touch && this.addHandler(e(document), e.jqx.mobile.getTouchEventName("touchstart") + "." + this.element.id, t.closeOpenedDropDown, { me: this, popup: this.container, id: this.element.id }), this.addHandler(e(document), "mousedown." + this.element.id, t.closeOpenedDropDown, { me: this, popup: this.container, id: this.element.id }), this.addHandler(this.host, "keydown", function (e) { var i = "visible" == t.container.css("visibility"); return "none" == t.host.css("display") || ("13" == e.keyCode && (t.isanimating || i && t.close()), 115 == e.keyCode ? (t.isanimating || (t.isOpened() ? t.isOpened() && t.close() : t.open()), !1) : (e.altKey && "block" == t.host.css("display") && (38 == e.keyCode ? t.isOpened() && t.close() : 40 == e.keyCode && (t.isOpened() || t.open())), void ("27" == e.keyCode && (t.ishiding || (t.close(), void 0 != t.tempSelectedIndex && t.selectIndex(t.tempSelectedIndex)))))) }), this.addHandler(this.firstDiv, "focus", function () { t.host.addClass(t.toThemeProperty("jqx-dropdownlist-state-focus")), t.host.addClass(t.toThemeProperty("jqx-fill-state-focus")) }), this.addHandler(this.firstDiv, "blur", function () { t.host.removeClass(t.toThemeProperty("jqx-dropdownlist-state-focus")), t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")) }) }, removeHandlers: function () { var t = this; this.removeHandler(this.dropDownButtonWrapper, "mousedown"), this.removeHandler(this.host, "keydown"), this.removeHandler(this.firstDiv, "focus"), this.removeHandler(this.firstDiv, "blur"), this.removeHandler(this.host, "mouseenter"), this.removeHandler(this.host, "mouseleave"), this.autoOpen && (this.removeHandler(this.host, "mouseenter"), this.removeHandler(this.host, "mouseleave")), this.removeHandler(e(document), "mousemove." + t.element.id) }, _findPos: function (t) { for (; t && ("hidden" == t.type || 1 != t.nodeType || e.expr.filters.hidden(t)) ;) t = t.nextSibling; var i = e(t).coord(!0); return [i.left, i.top] }, testOffset: function (t, i, s) { var r = t.outerWidth(), o = t.outerHeight(), a = e(window).width() + e(window).scrollLeft(), n = e(window).height() + e(window).scrollTop(); if (i.left + r > a && r > this.host.width()) { var l = this.host.coord().left, h = r - this.host.width(); i.left = l - h + 2 } return i.left < 0 && (i.left = parseInt(this.host.coord().left) + "px"), i.top + o > n && (i.top -= Math.abs(o + s)), i }, _getBodyOffset: function () { var t = 0, i = 0; return "0px" != e("body").css("border-top-width") && (t = parseInt(e("body").css("border-top-width")), isNaN(t) && (t = 0)), "0px" != e("body").css("border-left-width") && (i = parseInt(e("body").css("border-left-width")), isNaN(i) && (i = 0)), { left: i, top: t } }, open: function () { e.jqx.aria(this, "aria-expanded", !0); var t = this; if ((null == this.dropDownWidth || "auto" == this.dropDownWidth) && null != this.width && this.width.indexOf && -1 != this.width.indexOf("%")) { var i = this.host.width(); this.container.width(parseInt(i)) } t._raiseEvent("2"); var s, r = this.popupContent, o = (e(window).scrollTop(), e(window).scrollLeft(), parseInt(this._findPos(this.host[0])[1]) + parseInt(this.host.outerHeight()) - 1 + "px"), a = parseInt(Math.round(this.host.coord(!0).left)); s = a + "px"; var n = e.jqx.mobile.isSafariMobileBrowser() || e.jqx.mobile.isWindowsPhone(), l = e.jqx.utilities.hasTransform(this.host); this.ishiding = !1, this.tempSelectedIndex = this.selectedIndex, (l || null != n && n) && (s = e.jqx.mobile.getLeftPos(this.element), o = e.jqx.mobile.getTopPos(this.element) + parseInt(this.host.outerHeight()), "0px" != e("body").css("border-top-width") && (o = parseInt(o) - this._getBodyOffset().top + "px"), "0px" != e("body").css("border-left-width") && (s = parseInt(s) - this._getBodyOffset().left + "px")), r.stop(), this.host.addClass(this.toThemeProperty("jqx-dropdownlist-state-selected")), this.host.addClass(this.toThemeProperty("jqx-fill-state-pressed")), this.arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down-selected")); var h = !1; e.jqx.browser.msie && e.jqx.browser.version < 8 && (h = !0), h && this.container.css("display", "block"), this.container.css("left", s), this.container.css("top", o); var d = !1, c = function () { if ("right" == this.dropDownHorizontalAlignment || this.rtl) { var e = this.container.width(), t = Math.abs(e - this.host.width()); e > this.host.width() ? this.container.css("left", parseInt(Math.round(a)) - t + "px") : this.container.css("left", parseInt(Math.round(a)) + t + "px") } }; if (c.call(this), this.enableBrowserBoundsDetection) { var u = this.testOffset(r, { left: parseInt(this.container.css("left")), top: parseInt(o) }, parseInt(this.host.outerHeight())); parseInt(this.container.css("top")) != u.top ? (d = !0, this.container.height(r.outerHeight()), r.css("top", 23), this.interval && clearInterval(this.interval), this.interval = setInterval(function () { if (r.outerHeight() != t.container.height()) { var e = t.testOffset(r, { left: parseInt(t.container.css("left")), top: parseInt(o) }, parseInt(t.host.outerHeight())); t.container.css("top", e.top), t.container.height(r.outerHeight()) } }, 50)) : r.css("top", 0), this.container.css("top", u.top), parseInt(this.container.css("left")) != u.left && this.container.css("left", u.left) } if ("none" == this.animationType) this.container.css("visibility", "visible"), e.data(document.body, "openedJQXButtonParent", t), e.data(document.body, "openedJQXButton" + this.element.id, r), r.css("margin-top", 0), r.css("opacity", 1), this._raiseEvent("0"), c.call(t); else { this.container.css("visibility", "visible"); var p = r.outerHeight(); t.isanimating = !0, "fade" == this.animationType ? (r.css("margin-top", 0), r.css("opacity", 0), r.animate({ opacity: 1 }, this.openDelay, function () { e.data(document.body, "openedJQXButtonParent", t), e.data(document.body, "openedJQXButton" + t.element.id, r), t.ishiding = !1, t.isanimating = !1, t._raiseEvent("0") }), c.call(t)) : (r.css("opacity", 1), d ? r.css("margin-top", p) : r.css("margin-top", -p), c.call(t), r.animate({ "margin-top": 0 }, this.openDelay, function () { e.data(document.body, "openedJQXButtonParent", t), e.data(document.body, "openedJQXButton" + t.element.id, r), t.ishiding = !1, t.isanimating = !1, t._raiseEvent("0") })) } d ? (this.host.addClass(this.toThemeProperty("jqx-rc-t-expanded")), this.container.addClass(this.toThemeProperty("jqx-rc-b-expanded"))) : (this.host.addClass(this.toThemeProperty("jqx-rc-b-expanded")), this.container.addClass(this.toThemeProperty("jqx-rc-t-expanded"))), this.focusable && (this.firstDiv.focus(), setTimeout(function () { t.firstDiv.focus() }, 10)), this.container.addClass(this.toThemeProperty("jqx-fill-state-focus")), this.host.addClass(t.toThemeProperty("jqx-dropdownlist-state-focus")), this.host.addClass(t.toThemeProperty("jqx-fill-state-focus")) }, close: function () { e.jqx.aria(this, "aria-expanded", !1); var t = this.popupContent, i = this.container, s = this; s._raiseEvent("3"); var r = !1; if (e.jqx.browser.msie && e.jqx.browser.version < 8 && (r = !0), this.isOpened()) { if (e.data(document.body, "openedJQXButton" + this.element.id, null), "none" == this.animationType) this.container.css("visibility", "hidden"), r && this.container.css("display", "none"); else if (!s.ishiding) { s.isanimating = !0, t.stop(); var o = t.outerHeight(); t.css("margin-top", 0); var a = -o; parseInt(this.container.coord().top) < parseInt(this.host.coord().top) && (a = o), "fade" == this.animationType ? (t.css({ opacity: 1 }), t.animate({ opacity: 0 }, this.closeDelay, function () { i.css("visibility", "hidden"), s.isanimating = !1, s.ishiding = !1, r && i.css("display", "none") })) : t.animate({ "margin-top": a }, this.closeDelay, function () { i.css("visibility", "hidden"), s.isanimating = !1, s.ishiding = !1, r && i.css("display", "none") }) } this.ishiding = !0, this.host.removeClass(this.toThemeProperty("jqx-dropdownlist-state-selected")), this.host.removeClass(this.toThemeProperty("jqx-fill-state-pressed")), this.arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected")), this.host.removeClass(this.toThemeProperty("jqx-rc-b-expanded")), this.container.removeClass(this.toThemeProperty("jqx-rc-t-expanded")), this.host.removeClass(this.toThemeProperty("jqx-rc-t-expanded")), this.container.removeClass(this.toThemeProperty("jqx-rc-b-expanded")), this.container.removeClass(this.toThemeProperty("jqx-fill-state-focus")), this.host.removeClass(this.toThemeProperty("jqx-dropdownlist-state-focus")), this.host.removeClass(this.toThemeProperty("jqx-fill-state-focus")), this._raiseEvent("1") } }, closeOpenedDropDown: function (t) { var i = t.data.me, s = e(t.target); if (e(t.target).ischildof(t.data.me.host)) return !0; if (e(t.target).ischildof(t.data.me.popupContent)) return !0; var r = !1; return e.each(s.parents(), function () { if ("undefined" != this.className && this.className.indexOf && -1 != this.className.indexOf("dropDownButton")) return r = !0, !1 }), r || i.close(), !0 }, refresh: function () { this._arrange() }, _arrange: function () { var e = parseInt(this.host.width()), t = parseInt(this.host.height()), i = (this.arrowSize, this.arrowSize), s = e - i - 6; if (s > 0 && (this.dropDownButtonContent[0].style.width = s + "px"), this.dropDownButtonContent[0].style.height = parseInt(t) + "px", this.dropDownButtonContent[0].style.left = "0px", this.dropDownButtonContent[0].style.top = "0px", this.dropDownButtonArrow[0].style.width = parseInt(i) + "px", this.dropDownButtonArrow[0].style.height = parseInt(t) + "px", this.rtl && (this.dropDownButtonArrow.css("float", "left"), this.dropDownButtonContent.css("float", "right"), this.dropDownButtonContent.css("left", -3)), null != this.dropDownWidth) if (this.dropDownWidth.toString().indexOf("%") >= 0) { e = parseInt(this.dropDownWidth) * this.host.width() / 100; this.container.width(e) } else this.container.width(this.dropDownWidth); null != this.dropDownHeight && this.container.height(this.dropDownHeight) }, destroy: function () { this.removeHandler(this.dropDownButtonWrapper, "selectstart"), this.removeHandler(this.dropDownButtonWrapper, "mousedown"), this.removeHandler(this.host, "keydown"), this.host.removeClass(), this.removeHandler(e(document), "mousedown." + this.element.id, self.closeOpenedDropDown), this.host.remove(), this.container.remove() }, _raiseEvent: function (e, t) { void 0 == t && (t = { owner: null }), 2 != e || this.contentInitialized || this.initContent && (this.initContent(), this.contentInitialized = !0); var i = this.events[e]; args = t, args.owner = this; var s = new jQuery.Event(i); return s.owner = this, 2 != e && 3 != e && 4 != e || (s.args = t), this.host.trigger(s) }, resize: function (e, t) { this.width = e, this.height = t, this._setSize(), this._arrange() }, propertyChangedHandler: function (t, i, s, r) { void 0 != this.isInitialized && 0 != this.isInitialized && ("rtl" == i && (r ? (t.dropDownButtonArrow.css("float", "left"), t.dropDownButtonContent.css("float", "right")) : (t.dropDownButtonArrow.css("float", "right"), t.dropDownButtonContent.css("float", "left"))), "autoOpen" == i && t.render(), "theme" == i && null != r && e.jqx.utilities.setTheme(s, r, t.host), "width" != i && "height" != i || (t._setSize(), t._arrange())) } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxColorPicker", "", {}), e.extend(e.jqx._jqxColorPicker.prototype, { defineInstance: function () { this.disabled = !1, this.height = null, this.width = null, this.color = new e.jqx.color({ hex: "ff0000" }), this.redString = "R:", this.greenString = "G:", this.blueString = "B:", this.showTransparent = !1, this.colorMode = "saturation", this._delayLoading = !1, this.events = ["colorchange"] }, createInstance: function (t) { this.render(); var i = this; e.jqx.utilities.resize(this.host, function () { i._setSize(), i.refresh() }, !1, !this._delayLoading) }, render: function () { this.element.innerHTML = ""; this._isTouchDevice = e.jqx.mobile.isTouchDevice(), "string" == typeof this.color && (this.color = new e.jqx.color({ hex: this.color })), this._setSize(), this.host.addClass(this.toThemeProperty("jqx-widget")), this.host.addClass(this.toThemeProperty("jqx-reset")), this.host.addClass(this.toThemeProperty("jqx-color-picker")), this.container = e("<div style='width: 100%; height: 100%; position: relative;'></div>"), this.container.appendTo(this.host), this.colorMap = e("<div style='left: 0; top: 0; position: absolute;'></div>"), this.colorMap.appendTo(this.container), this.colorBar = e("<div style='left: 0; top: 0; position: absolute;'></div>"), this.colorBar.appendTo(this.container), this.colorPanel = e("<div style='left: 0; top: 0; position: absolute;'></div>"), this.colorPanel.appendTo(this.container), this.hexPanel = e("<div style='float: left;'></div>"), this.hexPanel.appendTo(this.colorPanel), this.hexPanel.append('<span style="text-align: left;" >#</span>'), this.hex = e("<input maxlength='6' style='height: 18px;'/>"), this.hex.addClass(this.toThemeProperty("jqx-input")), this.hex.addClass(this.toThemeProperty("jqx-widget-content")), this.hex.appendTo(this.hexPanel), this.colorPanel.append('<div style="font-size: 1px; clear: both;"></div>'), this.rgb = e("<div style='margin-top: 2px;'></div>"), this.rgb.appendTo(this.colorPanel), this.red = e("<input style='width: 25px; height: 18px;' maxlength='3'/>"), this.red.addClass(this.toThemeProperty("jqx-input")), this.red.addClass(this.toThemeProperty("jqx-widget-content")), this.rgb.append('<span style="text-align: left;">' + this.redString + "</span>"), this.red.appendTo(this.rgb), this.green = e("<input style='margin-right: 2px; height: 18px; width: 25px;' maxlength='3'/>"), this.green.addClass(this.toThemeProperty("jqx-input")), this.green.addClass(this.toThemeProperty("jqx-widget-content")), this.rgb.append('<span style="text-align: left;">' + this.greenString + "</span>"), this.green.appendTo(this.rgb), this.colorPanel.addClass(this.toThemeProperty("jqx-color-picker-map-overlay")), this._mapImageOverlayURL = this._getImageUrl(this.colorPanel), this.colorPanel.removeClass(this.toThemeProperty("jqx-color-picker-map-overlay")), this.blue = e("<input style='height: 18px; width: 25px;' maxlength='3'/>"), this.blue.addClass(this.toThemeProperty("jqx-input")), this.blue.addClass(this.toThemeProperty("jqx-widget-content")), this.rgb.append('<span style="text-align: left;">' + this.blueString + "</span>"), this.blue.appendTo(this.rgb), this.preview = e("<div style='background: red; position: absolute;'></div>"), this.preview.addClass(this.toThemeProperty("jqx-widget-content")), this.preview.appendTo(this.colorPanel), this.colorBarPointer = e("<div style='top: 0; left: 0; position: absolute; width: 100%;'></div>"), this.colorBarPointer.addClass(this.toThemeProperty("jqx-color-picker-bar-pointer")), this.colorMapPointer = e("<div style='top: 0; left: 0; position: absolute; width: 100%;'></div>"), this.colorMapPointer.addClass(this.toThemeProperty("jqx-color-picker-pointer")), this.transparent = e("<div style='text-align: center; clear: both;'><a style='text-align: center;' href='#'>transparent</a></div>"), this.disabled && (this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")), this.element.disabled = !0), this._addHandlers() }, val: function (e) { return 0 == arguments.length ? "#" + this.color.hex : (this.setColor(e), this.color.hex) }, _setPositionFromValue: function () { var e = this, t = e.color.h, i = 100 - e.color.v, s = e.colorMap.height(), r = e.colorMap.width(), o = t * r / 360, a = i * s / 100; if ("saturation" == this.colorMode) n = (n = 100 - e.color.s) * s / 100, e._saturation = 100 - e.color.s, e.colorMapPointer.css("margin-left", o - 8), e.colorMapPointer.css("margin-top", a - 8), e.colorBarPointer.css("margin-top", n - 8), e.colorMapImageOverlay.css("opacity", (100 - e.color.s) / 100); else { var o = (t = e.color.s) * r / 100, a = i * s / 100, n = 360 - e.color.h; n = n * s / 360, e._hue = e.color.h, e.colorMapPointer.css("margin-left", o - 8), e.colorMapPointer.css("margin-top", a - 8), e.colorBarPointer.css("margin-top", n - 8) } }, updateRGB: function () { var e = this; e.color.setRgb(e.red.val(), e.green.val(), e.blue.val()), e._updateUI(), e._raiseEvent("0", { color: e.color }), e.color.transparent = !1 }, _setPosition: function (t, i, s) { var r = parseInt(t.pageX), o = parseInt(i.offset().left), a = parseInt(t.pageY), n = parseInt(i.offset().top); if (this._isTouchDevice) { var l = e.jqx.position(t); r = l.left, a = l.top } -1 == s[0].className.indexOf("jqx-color-picker-bar") && s.css("margin-left", r - 8 - o), a >= n && a <= n + i.height() && s.css("margin-top", a - 8 - n) }, _handleKeyInput: function (e, t, i) { if (!e.disabled) { if (!e._validateKey(t)) return t; i.val(e._setValueInRange(i.val(), 0, 255)), this.updateRGB(), this._setPositionFromValue() } }, _addHandlers: function () { var t = this; this.addHandler(this.colorMapPointer, "dragStart", function (e) { return e.preventDefault(), !1 }), this.addHandler(this.colorBarPointer, "dragStart", function (e) { return e.preventDefault(), !1 }), this.addHandler(this.transparent, "click", function (e) { t._raiseEvent("0", { color: "transparent" }), e.preventDefault(), t.color.transparent = !0 }), this.addHandler(this.host, "selectionstart", function (e) { return e.preventDefault(), !1 }), this.addHandler(this.blue, "keyup blur", function (e) { t._handleKeyInput(t, e, t.blue) }), this.addHandler(this.green, "keyup blur", function (e) { t._handleKeyInput(t, e, t.green) }), this.addHandler(this.red, "keyup blur", function (e) { t._handleKeyInput(t, e, t.red) }), this.addHandler(this.hex, "keyup blur", function (e) { if (!t.disabled) return t._validateKey(e) ? void (6 == t.hex.val().toString().length && (t.hex.val(t.color.validateHex(t.hex.val())), t.color.setHex(t.hex.val()), t._updateUI(), t._setPositionFromValue(), t._raiseEvent("0", { color: t.color }))) : e }), this.addHandler(this.colorMap, "dragstart", function (e) { return e.preventDefault(), !1 }); var i = function (e) { if (t._setPosition(e, t.colorMap, t.colorMapPointer), "saturation" == t.colorMode) (i = t._valuesFromMouse(e, t.colorMap, 360, 100)).x > 360 && (i.x = 360), t.color.setHsv(i.x, null != t._saturation ? 100 - t._saturation : 100, 100 - i.y); else { var i = t._valuesFromMouse(e, t.colorMap, 100, 100); i.x > 100 && (i.x = 100), t.color.setHsv(null != t._hue ? t._hue : 360, i.x, 100 - i.y) } t._updateUI(), t._raiseEvent("0", { color: t.color }), t.color.transparent = !1 }, s = "mousedown.picker" + this.element.id; this._isTouchDevice && (s = e.jqx.mobile.getTouchEventName("touchstart") + ".picker" + this.element.id), this.addHandler(this.colorMap, s, function (e) { t.disabled || (t.beginDrag = !0, i(e)) }); var r = "mousemove.picker" + this.element.id; this._isTouchDevice && (r = e.jqx.mobile.getTouchEventName("touchmove") + ".picker" + this.element.id), this.addHandler(e(document), r, function (e) { t.disabled || 1 == t.beginDrag && (i(e), t._isTouchDevice && e.preventDefault()) }), this._isTouchDevice || this.addHandler(this.colorBar, "dragstart", function (e) { return e.preventDefault(), !1 }); var o = function (e) { if (t._setPosition(e, t.colorBar, t.colorBarPointer), "saturation" == t.colorMode) { i = t._valuesFromMouse(e, t.colorBar, 100, 100); t.color.s = i.y, t._saturation = i.y, t.colorMapImageOverlay.css("opacity", t.color.s / 100), t.color.setHsv(t.color.h, 100 - t.color.s, t.color.v) } else { var i = t._valuesFromMouse(e, t.colorBar, 100, 360); t.color.h = 360 - i.y, t._hue = t.color.h, t.color.setHsv(t.color.h, t.color.s, t.color.v) } t._updateUI(), t._raiseEvent("0", { color: t.color }), t.color.transparent = !1 }, a = "mousemove.colorBar" + this.element.id, n = "mousedown.colorBar" + this.element.id, l = "mouseup.colorBar" + this.element.id; this._isTouchDevice && (a = e.jqx.mobile.getTouchEventName("touchmove") + ".colorBar" + this.element.id, n = e.jqx.mobile.getTouchEventName("touchstart") + ".colorBar" + this.element.id, l = e.jqx.mobile.getTouchEventName("touchend") + ".colorBar" + this.element.id), this.addHandler(this.colorBar, n, function (e) { t.disabled || (t.beginDragBar = !0, o(e)) }), this.addHandler(e(document), a, function (e) { t.disabled || 1 == t.beginDragBar && (o(e), t._isTouchDevice && e.preventDefault()) }), this.addHandler(e(document), l, function (e) { t.disabled || (t.beginDrag = !1, t.beginDragBar = !1) }) }, _removeHandlers: function () { this.removeHandler(this.transparent, "click"), this.removeHandler(this.host, "selectionstart"), this.removeHandler(this.blue, "keyup blur"), this.removeHandler(this.green, "keyup blur"), this.removeHandler(this.red, "keyup blur"), this.removeHandler(this.hex, "keyup blur"), this.removeHandler(this.colorMap, "dragstart"), this.removeHandler(this.colorBar, "dragstart"), this.removeHandler(this.colorMapPointer, "dragStart"), this.removeHandler(this.colorBarPointer, "dragStart"); var t = this.element.id, i = "mousemove.colorBar" + t, s = "mousedown.colorBar" + t, r = "mouseup.colorBar" + t, o = "mousedown.picker" + t, a = "mousemove.picker" + t; this._isTouchDevice && (i = e.jqx.mobile.getTouchEventName("touchmove") + ".colorBar" + t, s = e.jqx.mobile.getTouchEventName("touchstart") + ".colorBar" + t, r = e.jqx.mobile.getTouchEventName("touchend") + ".colorBar" + t, o = e.jqx.mobile.getTouchEventName("touchstart") + ".picker" + t, a = e.jqx.mobile.getTouchEventName("touchmove") + ".picker" + t), this.removeHandler(this.colorMap, o), this.removeHandler(this.colorMap, a), this.removeHandler(this.colorBar, s), this.removeHandler(this.colorBar, i), this.removeHandler(e(document), a), this.removeHandler(e(document), i), this.removeHandler(e(document), r) }, _raiseEvent: function (e, t) { void 0 == t && (t = { owner: null }); var i = this.events[e], s = t || {}; s.owner = this; var r = new jQuery.Event(i); return r.owner = this, r.args = s, this.host.trigger(r) }, setColor: function (t) { t && ("transparent" == t ? (this.color.transparent = !0, this.color.hex = "000", this.color.r = 0, this.color.g = 0, this.color.b = 0) : t.r ? this.color = new e.jqx.color({ rgb: t }) : "#" == t.substring(0, 1) ? this.color = new e.jqx.color({ hex: t.substring(1) }) : this.color = new e.jqx.color({ hex: t }), this._updateUI(), this._setPositionFromValue(), this._raiseEvent("0", { color: this.color })) }, getColor: function () { return this.color }, resize: function (e, t) { this.width = e, this.height = t, this._setSize(), this.refresh() }, propertyChangedHandler: function (e, t, i, s) { void 0 != e.isInitialized && 0 != e.isInitialized && ("colorMode" == t && e.refresh(), "color" == t && (e._updateUI(), e._setPositionFromValue(), e._raiseEvent("0", { color: s })), "width" != t && "height" != t || (e._setSize(), e.refresh()), "showTransparent" == t && e.refresh(), "disabled" == t && (this.element.disabled = s, s ? e.host.addClass(e.toThemeProperty("jqx-fill-state-disabled")) : e.host.removeClass(e.toThemeProperty("jqx-fill-state-disabled")))) }, _valuesFromMouse: function (t, i, s, r) { var o = 0, a = 0, n = i.offset(), l = i.height(), h = i.width(), d = t.pageX, c = t.pageY; if (this._isTouchDevice) { var u = e.jqx.position(t); d = u.left, c = u.top } return o = d < n.left ? 0 : d > n.left + h ? h : d - n.left + 1, a = c < n.top ? 0 : c > n.top + l ? l : c - n.top + 1, { x: parseInt(o / h * s), y: parseInt(a / l * r) } }, _validateKey: function (e) { return 9 != e.keyCode && 16 != e.keyCode && 38 != e.keyCode && 29 != e.keyCode && 40 != e.keyCode && 17 != e.keyCode && 37 != e.keyCode && (!e.ctrlKey || e.keyCode != "c".charCodeAt() && e.keyCode != "v".charCodeAt()) && (!e.ctrlKey || e.keyCode != "C".charCodeAt() && e.keyCode != "V".charCodeAt()) && (!e.ctrlKey && !e.shiftKey) }, _setValueInRange: function (e, t, i) { return "" == e || isNaN(e) ? t : (e = parseInt(e), e > i ? i : e < t ? t : e) }, destroy: function () { e.jqx.utilities.resize(this.host, null, !0), this.host.removeClass(), this._removeHandlers(), this.host.remove() }, setPointerStyle: function (e) { this.colorMapPointer.removeClass(), "transparent" != e && "" != e.hex || this.colorMapPointer.addClass(this.toThemeProperty("jqx-color-picker-pointer")); "Black" == (255 - (.299 * e.r + .587 * e.g + .114 * e.b) < 105 ? "Black" : "White") ? this.colorMapPointer.addClass(this.toThemeProperty("jqx-color-picker-pointer")) : this.colorMapPointer.addClass(this.toThemeProperty("jqx-color-picker-pointer-alt")) }, _updateUI: function () { var t = this; t.red.val(t.color.r), t.green.val(t.color.g), t.blue.val(t.color.b), t.hex.val(t.color.hex); var i = new e.jqx.color({ hex: "fff" }); "saturation" == this.colorMode ? (i.setHsv(this.color.h, 100, this.color.v), t.colorBar.css("background", "#" + i.hex)) : (i.setHsv(this.color.h, 100, 100), t.colorMap.css("background-color", "#" + i.hex)), t.preview.css("background", "#" + this.color.hex), t.setPointerStyle(this.color) }, _setSize: function () { null != this.width && -1 != this.width.toString().indexOf("px") ? this.host.width(this.width) : void 0 == this.width || isNaN(this.width) || this.host.width(this.width), null != this.height && -1 != this.height.toString().indexOf("px") ? this.host.height(this.height) : void 0 == this.height || isNaN(this.height) || this.host.height(this.height), this.host.width() < 130 && this.host.width(150), this.host.height() < 70 && this.host.height(70), null != this.width && -1 != this.width.toString().indexOf("%") && this.host.width(this.width), null != this.height && -1 != this.height.toString().indexOf("%") && this.host.height(this.height) }, _arrange: function () { var e = this.host.height(), t = this.host.width(), i = e - 44; if (this.showTransparent && (i = e - 64), !(i <= 0)) { this.colorMap.width(85 * t / 100), this.colorMap.height(i), this.colorBar.height(i), this.colorBar.css("left", this.colorMap.width() + 4), this.colorBar.width(8 * t / 100), this.colorBarPointer.width(this.colorBar.width()), this.colorPanel.width(t), this.colorPanel.height(40), this.showTransparent && this.colorPanel.height(60), this.colorPanel.css("top", i + 4), this.colorPanel.css("text-align", "left"), this.hex.width(this.colorMap.width() - this.colorBar.width() - 4); var s = this.red.prev().outerWidth() - this.hex.prev().outerWidth(); s < 4 && (s = 4), this.hex.css("margin-left", s + "px"), this.preview.width(this.colorBar.width() + 7), this.preview.height(25), this.preview.addClass(this.toThemeProperty("jqx-rc-all")), this.preview.addClass(this.toThemeProperty("jqx-color-picker-preview")), this.preview.css("left", this.colorMap.width() - 2), this.preview.css("top", "5px"); var r = this.hex.width() - this.blue.prev().outerWidth() - this.green.prev().outerWidth() - 6; return r > 0 ? (this.blue.width(r / 3), this.green.width(r / 3), void this.red.width(r / 3)) : void 0 } }, _getColorPointer: function () { var t = e("<div></div>"); return t.addClass(this.toThemeProperty("jqx-color-picker-pointer")), t }, _getImageUrl: function (e) { var t = e.css("backgroundImage"); return t = t.replace('url("', ""), t = t.replace('")', ""), t = t.replace("url(", ""), t = t.replace(")", "") }, refresh: function () { this._delayLoading || (this._saturation = null, this._hue = null, this.colorMap.removeClass(), this.colorBar.removeClass(), this.colorMap.addClass(this.toThemeProperty("jqx-disableselect")), this.colorBar.addClass(this.toThemeProperty("jqx-disableselect")), this.colorPanel.addClass(this.toThemeProperty("jqx-color-picker-panel")), this.colorBar.css("background-image", ""), this.colorMap.css("background-image", ""), "saturation" == this.colorMode ? (this.colorMap.addClass(this.toThemeProperty("jqx-color-picker-map")), this.colorBar.addClass(this.toThemeProperty("jqx-color-picker-bar"))) : (this.colorMap.addClass(this.toThemeProperty("jqx-color-picker-map-hue")), this.colorBar.addClass(this.toThemeProperty("jqx-color-picker-bar-hue"))), this._barImageURL = this._getImageUrl(this.colorBar), this._mapImageURL = this._getImageUrl(this.colorMap), this._arrange(), this.colorBar.children().remove(), this.colorBarImageContainer = e("<div style='overflow: hidden;'></div>"), this.colorBarImageContainer.width(this.colorBar.width()), this.colorBarImageContainer.height(this.colorBar.height()), this.colorBarImageContainer.appendTo(this.colorBar), this.colorBarImage = e("<img/>"), this.colorBarImage.appendTo(this.colorBarImageContainer), this.colorBarImage.attr("src", this._barImageURL), this.colorBar.css("background-image", "none"), this.colorBarImage.attr("width", this.colorBar.width()), this.colorBarImage.attr("height", this.colorBar.height()), this.colorBarPointer.appendTo(this.colorBar), this.colorMap.children().remove(), this.colorMapImage = e("<img/>"), this.colorMapImage.appendTo(this.colorMap), this.colorMapImage.attr("src", this._mapImageURL), this.colorMap.css("background-image", "none"), this.colorMapImage.attr("width", this.colorMap.width()), this.colorMapImage.attr("height", this.colorMap.height()), this.colorMapImageOverlay = e("<img style='position: absolute; left: 0; top: 0;'/>"), this.colorMapImageOverlay.prependTo(this.colorMap), this.colorMapImageOverlay.attr("src", this._mapImageOverlayURL), this.colorMapImageOverlay.attr("width", this.colorMap.width()), this.colorMapImageOverlay.attr("height", this.colorMap.height()), this.colorMapImageOverlay.css("opacity", 0), this.colorMapPointer.appendTo(this.colorMap), this.showTransparent && this.transparent.appendTo(this.colorPanel), this._updateUI(), this._setPositionFromValue()) } }), e.jqx.color = function (e) { var t = { r: 0, g: 0, b: 0, h: 0, s: 0, v: 0, hex: "", hexToRgb: function (e) { var t = "00", i = "00", s = "00"; return 6 == (e = this.validateHex(e)).length ? (t = e.substring(0, 2), i = e.substring(2, 4), s = e.substring(4, 6)) : (e.length > 4 && (t = e.substring(4, e.length), e = e.substring(0, 4)), e.length > 2 && (i = e.substring(2, e.length), e = e.substring(0, 2)), e.length > 0 && (s = e.substring(0, e.length))), { r: this.hexToInt(t), g: this.hexToInt(i), b: this.hexToInt(s) } }, validateHex: function (e) { return e = new String(e).toUpperCase(), (e = e.replace(/[^A-F0-9]/g, "0")).length > 6 && (e = e.substring(0, 6)), e }, webSafeDec: function (e) { return e = Math.round(e / 51), e *= 51 }, hexToWebSafe: function (e) { var t, i, s; return 3 == e.length ? (t = e.substring(0, 1), i = e.substring(1, 1), s = e.substring(2, 1)) : (t = e.substring(0, 2), i = e.substring(2, 4), s = e.substring(4, 6)), intToHex(this.webSafeDec(this.hexToInt(t))) + this.intToHex(this.webSafeDec(this.hexToInt(i))) + this.intToHex(this.webSafeDec(this.hexToInt(s))) }, rgbToWebSafe: function (e) { return { r: this.webSafeDec(e.r), g: this.webSafeDec(e.g), b: this.webSafeDec(e.b) } }, rgbToHex: function (e) { return this.intToHex(e.r) + this.intToHex(e.g) + this.intToHex(e.b) }, intToHex: function (e) { var t = parseInt(e).toString(16); return 1 == t.length && (t = "0" + t), t.toUpperCase() }, hexToInt: function (e) { return parseInt(e, 16) }, hslToRgb: function (e) { var t = parseInt(e.h) / 360, i = parseInt(e.s) / 100, s = parseInt(e.l) / 100; if (s <= .5) r = s * (1 + i); else var r = s + i - s * i; var o = 2 * s - r, a = t + 1 / 3, n = t, l = t - 1 / 3; return { r: Math.round(255 * this.hueToRgb(o, r, a)), g: Math.round(255 * this.hueToRgb(o, r, n)), b: Math.round(255 * this.hueToRgb(o, r, l)) } }, hueToRgb: function (e, t, i) { return i < 0 ? i += 1 : i > 1 && (i -= 1), 6 * i < 1 ? e + (t - e) * i * 6 : 2 * i < 1 ? t : 3 * i < 2 ? e + (t - e) * (2 / 3 - i) * 6 : e }, rgbToHsv: function (e) { var t = e.r / 255, i = e.g / 255, s = e.b / 255; hsv = { h: 0, s: 0, v: 0 }; var r = 0, o = 0; return t >= i && t >= s ? (o = t, r = i > s ? s : i) : i >= s && i >= t ? (o = i, r = t > s ? s : t) : (o = s, r = i > t ? t : i), hsv.v = o, hsv.s = o ? (o - r) / o : 0, hsv.s ? (delta = o - r, hsv.h = t == o ? (i - s) / delta : i == o ? 2 + (s - t) / delta : 4 + (t - i) / delta, hsv.h = parseInt(60 * hsv.h), hsv.h < 0 && (hsv.h += 360)) : hsv.h = 0, hsv.s = parseInt(100 * hsv.s), hsv.v = parseInt(100 * hsv.v), hsv }, hsvToRgb: function (e) { rgb = { r: 0, g: 0, b: 0 }; var t = e.h, i = e.s, s = e.v; if (0 == i) rgb.r = rgb.g = rgb.b = 0 == s ? 0 : parseInt(255 * s / 100); else { 360 == t && (t = 0), t /= 60, i /= 100, s /= 100; var r = parseInt(t), o = t - r, a = s * (1 - i), n = s * (1 - i * o), l = s * (1 - i * (1 - o)); switch (r) { case 0: rgb.r = s, rgb.g = l, rgb.b = a; break; case 1: rgb.r = n, rgb.g = s, rgb.b = a; break; case 2: rgb.r = a, rgb.g = s, rgb.b = l; break; case 3: rgb.r = a, rgb.g = n, rgb.b = s; break; case 4: rgb.r = l, rgb.g = a, rgb.b = s; break; case 5: rgb.r = s, rgb.g = a, rgb.b = n } rgb.r = parseInt(255 * rgb.r), rgb.g = parseInt(255 * rgb.g), rgb.b = parseInt(255 * rgb.b) } return rgb }, setRgb: function (e, t, i) { var s = function (e) { return e < 0 || e > 255 ? 0 : isNaN(parseInt(e)) ? 0 : e }; this.r = s(e), this.g = s(t), this.b = s(i); var r = this.rgbToHsv(this); this.h = r.h, this.s = r.s, this.v = r.v, this.hex = this.rgbToHex(this) }, setHsl: function (e, t, i) { this.h = e, this.s = t, this.l = i; var s = this.hslToRgb(this); this.r = s.r, this.g = s.g, this.b = s.b, this.hex = this.rgbToHex(s) }, setHsv: function (e, t, i) { this.h = e, this.s = t, this.v = i; var s = this.hsvToRgb(this); this.r = s.r, this.g = s.g, this.b = s.b, this.hex = this.rgbToHex(s) }, setHex: function (e) { this.hex = e; var t = this.hexToRgb(this.hex); this.r = t.r, this.g = t.g, this.b = t.b; var i = this.rgbToHsv(t); this.h = i.h, this.s = i.s, this.v = i.v } }; if (e) if (e.hex) { var i = t.validateHex(e.hex); t.setHex(i) } else e.r ? t.setRgb(e.r, e.g, e.b) : e.h ? t.setHsv(e.h, e.s, e.v) : e.rgb && t.setRgb(e.rgb.r, e.rgb.g, e.rgb.b); return t } }(jQuery), function (e) { e.jqx.jqxWidget("jqxSwitchButton", "", {}), e.extend(e.jqx._jqxSwitchButton.prototype, { defineInstance: function () { this.disabled = !1, this.checked = !1, this.onLabel = "On", this.offLabel = "Off", this.toggleMode = "default", this.animationDuration = 250, this.width = 90, this.height = 30, this.animationEnabled = !0, this.thumbSize = "40%", this.orientation = "horizontal", this.switchRatio = "50%", this.metroMode = !1, this._isMouseDown = !1, this.rtl = !1, this._dimensions = { horizontal: { size: "width", opSize: "height", oSize: "outerWidth", opOSize: "outerHeight", pos: "left", oPos: "top", opposite: "vertical" }, vertical: { size: "height", opSize: "width", oSize: "outerHeight", opOSize: "outerWidth", pos: "top", oPos: "left", opposite: "horizontal" } }, this._touchEvents = { mousedown: "touchstart", click: "touchend", mouseup: "touchend", mousemove: "touchmove", mouseenter: "mouseenter", mouseleave: "mouseleave" }, this._borders = {}, this._isTouchDevice = !1, this._distanceRequired = 3, this._isDistanceTraveled = !1, this._thumb, this._onLabel, this._offLabel, this._wrapper, this._animationActive = !1, this.aria = { "aria-checked": { name: "checked", type: "boolean" }, "aria-disabled": { name: "disabled", type: "boolean" } }, this._events = ["checked", "unchecked", "change"] }, createInstance: function (t) { if (this.element.nodeName && ("INPUT" == this.element.nodeName || "BUTTON" == this.element.nodeName)) throw "jqxSwitchButton can be rendered only from a DIV tag."; this.host.attr("role", "checkbox"), e.jqx.aria(this), this.render(); var i = this; e.jqx.utilities.resize(this.host, function () { i.element.innerHTML = "", i.render() }) }, resize: function (e, t) { this.width = e, this.height = t, this.render() }, render: function () { this.innerHTML = "", !this.theme || "" == this.theme || -1 == this.theme.indexOf("metro") && -1 == this.theme.indexOf("windowsphone") && -1 == this.theme.indexOf("office") || ("40%" == this.thumbSize && (this.thumbSize = 12), this.metroMode = !0); var t = e.data(document.body, "jqx-switchbutton") || 1; this._idHandler(t), e.data(document.body, "jqx-draggables", ++t), this._isTouchDevice = e.jqx.mobile.isTouchDevice(), this.switchRatio = parseInt(this.switchRatio, 10), this._render(), this._addClasses(), this._performLayout(), this._removeEventHandlers(), this._addEventHandles(), this._disableSelection(); this.checked || this._switchButton(!1, 0, !0), this.disabled && (this.element.disabled = !0) }, setOnLabel: function (e) { this._onLabel.html('<div style="display: inline-block;">' + e + "</div>"), this._centerLabels() }, setOffLabel: function (e) { this._offLabel.html('<div style="display: inline-block;">' + e + "</div>"), this._centerLabels() }, toggle: function () { this.checked ? this.uncheck() : this.check() }, val: function (e) { return 0 == arguments.length || null != e && "object" == typeof e ? this.checked : ("string" == typeof e ? ("true" == e && this.check(), "false" == e && this.uncheck(), "" == e && this.indeterminate()) : (1 == e && this.check(), 0 == e && this.uncheck(), null == e && this.indeterminate()), this.checked) }, uncheck: function () { this._switchButton(!1), e.jqx.aria(this, "aria-checked", this.checked) }, check: function () { this._switchButton(!0), e.jqx.aria(this, "aria-checked", this.checked) }, _idHandler: function (e) { if (!this.element.id) { var t = "jqx-switchbutton-" + e; this.element.id = t } }, _dir: function (e) { return this._dimensions[this.orientation][e] }, _getEvent: function (t) { if (this._isTouchDevice) { var i = this._touchEvents[t]; return e.jqx.mobile.getTouchEventName(i) } return t }, _render: function () { this._thumb = e("<div/>"), this._onLabel = e("<div/>"), this._offLabel = e("<div/>"), this._wrapper = e("<div/>"), this._onLabel.appendTo(this.host), this._thumb.appendTo(this.host), this._offLabel.appendTo(this.host), this.host.wrapInner(this._wrapper), this._wrapper = this.host.children(), this.setOnLabel(this.onLabel), this.setOffLabel(this.offLabel) }, _addClasses: function () { var e = this._thumb, t = this._onLabel, i = this._offLabel; this.host.addClass(this.toThemeProperty("jqx-switchbutton")), this.host.addClass(this.toThemeProperty("jqx-widget")), this.host.addClass(this.toThemeProperty("jqx-widget-content")), this._wrapper.addClass(this.toThemeProperty("jqx-switchbutton-wrapper")), e.addClass(this.toThemeProperty("jqx-fill-state-normal")), e.addClass(this.toThemeProperty("jqx-switchbutton-thumb")), t.addClass(this.toThemeProperty("jqx-switchbutton-label-on")), t.addClass(this.toThemeProperty("jqx-switchbutton-label")), i.addClass(this.toThemeProperty("jqx-switchbutton-label-off")), i.addClass(this.toThemeProperty("jqx-switchbutton-label")), this.checked ? this.host.addClass(this.toThemeProperty("jqx-switchbutton-on")) : this.host.removeClass(this.toThemeProperty("jqx-switchbutton-on")) }, _performLayout: function () { var e, t = this.host, i = this._dir("opSize"), s = this._dir("size"), r = this._wrapper; if (t.css({ width: this.width, height: this.height }), r.css(i, t[i]()), this._thumbLayout(), this._labelsLayout(), e = this._borders[this._dir("opposite")], r.css(s, t[s]() + this._offLabel[this._dir("oSize")]() + e), r.css(i, t[i]()), this.metroMode || this.theme && "" != this.theme && (-1 != this.theme.indexOf("metro") || -1 != this.theme.indexOf("office"))) { this._thumb; var o = this._onLabel, a = this._offLabel; o.css("position", "relative"), o.css("top", "1px"), o.css("margin-left", "1px"), a.css("position", "relative"), a.css("top", "1px"), a.css("left", "-2px"), a.css("margin-right", "1px"), a.height(o.height() - 2), a.width(o.width() - 3), o.height(o.height() - 2), o.width(o.width() - 3), this._thumb[this._dir("size")](this.thumbSize + 3), this._thumb.css("top", "-1px"), this._thumb[this._dir("opSize")](t[this._dir("opSize")]() + 2), this._thumb.css("position", "relative"), this.host.css("overflow", "hidden"), this.checked ? (this._onLabel.css("visibility", "visible"), this._offLabel.css("visibility", "hidden"), this._thumb.css("left", "0px")) : (this._onLabel.css("visibility", "hidden"), this._offLabel.css("visibility", "visible"), this._thumb.css("left", "-2px")) } }, _thumbLayout: function () { var e = this.thumbSize, t = this.host; e.toString().indexOf("%") >= 0 && (e = t[this._dir("size")]() * parseInt(e, 10) / 100), this._thumb[this._dir("size")](e), this._thumb[this._dir("opSize")](t[this._dir("opSize")]()), this._handleThumbBorders() }, _handleThumbBorders: function () { this._borders.horizontal = parseInt(this._thumb.css("border-left-width"), 10) || 0, this._borders.horizontal += parseInt(this._thumb.css("border-right-width"), 10) || 0, this._borders.vertical = parseInt(this._thumb.css("border-top-width"), 10) || 0, this._borders.vertical += parseInt(this._thumb.css("border-bottom-width"), 10) || 0; var e = this._borders[this._dir("opposite")]; "horizontal" === this.orientation ? (this._thumb.css("margin-top", -e / 2), this._thumb.css("margin-left", 0)) : (this._thumb.css("margin-left", -e / 2), this._thumb.css("margin-top", 0)) }, _labelsLayout: function () { var e = this.host, t = this._thumb, i = this._dir("opSize"), s = this._dir("size"), r = this._dir("oSize"), o = e[s]() - t[r](), a = this._borders[this._dir("opposite")] / 2; this._onLabel[s](o + a), this._offLabel[s](o + a), this.rtl && this._onLabel[s](o + 2 * a), this._onLabel[i](e[i]()), this._offLabel[i](e[i]()), this._orderLabels(), this._centerLabels() }, _orderLabels: function () { if ("horizontal" === this.orientation) { var e = "left"; this.rtl && (e = "right"), this._onLabel.css("float", e), this._thumb.css("float", e), this._offLabel.css("float", e) } else this._onLabel.css("display", "block"), this._offLabel.css("display", "block") }, _centerLabels: function () { var e = this._onLabel.children("div"), t = this._offLabel.children("div"), i = e.parent().height(), s = e.outerHeight(), r = this._borders[this.orientation] / 2 || 0; 0 == s && (s = 14); var o = Math.floor((i - s) / 2) + r; e.css("margin-top", o), t.css("margin-top", o) }, _removeEventHandlers: function () { var t = "." + this.element.id; this.removeHandler(this._wrapper, this._getEvent("click") + t + this.element.id, this._clickHandle), this.removeHandler(this._thumb, this._getEvent("mousedown") + t, this._mouseDown), this.removeHandler(e(document), this._getEvent("mouseup") + t, this._mouseUp), this.removeHandler(e(document), this._getEvent("mousemove") + t, this._mouseMove) }, _addEventHandles: function () { var t = "." + this.element.id, i = this; this.addHandler(this._thumb, "mouseenter" + t, function () { i._thumb.addClass(i.toThemeProperty("jqx-fill-state-hover")) }), this.addHandler(this._thumb, "mouseleave" + t, function () { i._thumb.removeClass(i.toThemeProperty("jqx-fill-state-hover")) }), this.addHandler(this._wrapper, this._getEvent("click") + t, this._clickHandle, { self: this }), this.addHandler(this._thumb, this._getEvent("mousedown") + t, this._mouseDown, { self: this }), this.addHandler(e(document), this._getEvent("mouseup") + t, this._mouseUp, { self: this }), this.addHandler(e(document), this._getEvent("mousemove") + t, this._mouseMove, { self: this }) }, enable: function () { this.disabled = !1, this.element.disabled = !1, e.jqx.aria(this, "aria-disabled", this.disabled) }, disable: function () { this.disabled = !0, this.element.disabled = !0, e.jqx.aria(this, "aria-disabled", this.disabled) }, _clickHandle: function (e) { var t = e.data.self; "click" !== t.toggleMode && "default" !== t.toggleMode || t.disabled || t._isDistanceTraveled || t._dragged || (t._wrapper.stop(), t.toggle()), t._thumb.removeClass(t.toThemeProperty("jqx-fill-state-pressed")) }, _mouseDown: function (e) { var t = e.data.self, i = t._wrapper; t.metroMode && (t.host.css("overflow", "hidden"), t._onLabel.css("visibility", "visible"), t._offLabel.css("visibility", "visible")), t._mouseStartPosition = t._getMouseCoordinates(e), t._buttonStartPosition = { left: parseInt(i.css("margin-left"), 10) || 0, top: parseInt(i.css("margin-top"), 10) || 0 }, t.disabled || "slide" !== t.toggleMode && "default" !== t.toggleMode || (t._wrapper.stop(), t._isMouseDown = !0, t._isDistanceTraveled = !1, t._dragged = !1), t._thumb.addClass(t.toThemeProperty("jqx-fill-state-pressed")) }, _mouseUp: function (e) { var t = e.data.self; if (t.metroMode, t._isMouseDown = !1, t._thumb.removeClass(t.toThemeProperty("jqx-fill-state-pressed")), t._isDistanceTraveled) { var i = t._wrapper, s = parseInt(i.css("margin-" + t._dir("pos")), 10) || 0; t._dropHandler(s) ? t._switchButton(!t.checked) : t._switchButton(t.checked, null, !0), t._isDistanceTraveled = !1 } }, _mouseMove: function (e) { var t = e.data.self, i = t._getMouseCoordinates(e); if (t._isMouseDown && t._distanceTraveled(i)) { var s = t._dir("pos"), r = t._wrapper, o = t._buttonStartPosition[s] + i[s] - t._mouseStartPosition[s], o = t._validatePosition(o); return t._dragged = !0, r.css("margin-" + t._dir("pos"), o), t._onLabel.css("visibility", "visible"), t._offLabel.css("visibility", "visible"), !1 } }, _distanceTraveled: function (e) { if (this._isDistanceTraveled) return !0; if (this._isMouseDown) { var t = this._mouseStartPosition, i = this._distanceRequired; return this._isDistanceTraveled = Math.abs(e.left - t.left) >= i || Math.abs(e.top - t.top) >= i, this._isDistanceTraveled } return !1 }, _validatePosition: function (e) { var t = this._borders[this._dir("opposite")], i = -(this.host[this._dir("size")]() - this._thumb[this._dir("oSize")]()) - t; return 0 < e ? 0 : i > e ? i : e }, _dropHandler: function (e) { var t = -(this.host[this._dir("size")]() - this._thumb[this._dir("oSize")]()), i = Math.abs(t - 0); return Math.abs(e - this._buttonStartPosition[this._dir("pos")]) >= i * (this.switchRatio / 100) }, _switchButton: function (e, t, i) { this.metroMode ? (this.host.css("overflow", "hidden"), this._onLabel.css("visibility", "visible"), this._offLabel.css("visibility", "visible"), e ? this._thumb.css("left", "0px") : this._thumb.css("left", "-2px")) : (this._onLabel.css("visibility", "visible"), this._offLabel.css("visibility", "visible")); var s = this._wrapper, r = this, o = {}, a = this._borders[this._dir("opposite")], n = 0; void 0 === t && (t = this.animationEnabled ? this.animationDuration : 0), this.rtl ? e ? (n = this.host[this._dir("size")]() - this._thumb[this._dir("oSize")]() + a, this.metroMode && (n += 5)) : this.metroMode && (n -= 3) : e || (n = this.host[this._dir("size")]() - this._thumb[this._dir("oSize")]() + a), o["margin-" + this._dir("pos")] = -n, e ? r.host.addClass(r.toThemeProperty("jqx-switchbutton-on")) : r.host.removeClass(r.toThemeProperty("jqx-switchbutton-on")), s.animate(o, t, function () { e ? (r._onLabel.css("visibility", "visible"), r._offLabel.css("visibility", "hidden")) : (r._onLabel.css("visibility", "hidden"), r._offLabel.css("visibility", "visible")), r.checked = e, i || r._handleEvent(!e) }) }, _handleEvent: function (e) { e !== this.checked && this._raiseEvent(2, { check: this.checked, checked: this.checked }), e ? this._raiseEvent(0, { checked: this.checked }) : this._raiseEvent(1, { checked: this.checked }) }, _disableSelection: function () { var t = this.host.find("*"); e.each(t, function (t, i) { i.onselectstart = function () { return !1 }, e(i).addClass("jqx-disableselect") }) }, _getMouseCoordinates: function (e) { return this._isTouchDevice ? { left: e.originalEvent.touches[0].pageX, top: e.originalEvent.touches[0].pageY } : { left: e.pageX, top: e.pageY } }, destroy: function () { this._removeEventHandlers(), this.host.removeClass(this.toThemeProperty("jqx-switchbutton")), this._wrapper.remove() }, _raiseEvent: function (t, i) { var s = e.Event(this._events[t]); return s.args = i, this.host.trigger(s) }, _themeChanger: function (t, i, s) { if (t) { void 0 === s && (s = this.host); for (var r = s[0].className.split(" "), o = [], a = [], n = s.children(), l = 0; l < r.length; l += 1) r[l].indexOf(t) >= 0 && (o.push(r[l]), a.push(r[l].replace(t, i))); this._removeOldClasses(o, s), this._addNewClasses(a, s); for (l = 0; l < n.length; l += 1) this._themeChanger(t, i, e(n[l])) } }, _removeOldClasses: function (e, t) { for (var i = 0; i < e.length; i += 1) t.removeClass(e[i]) }, _addNewClasses: function (e, t) { for (var i = 0; i < e.length; i += 1) t.addClass(e[i]) }, propertyChangedHandler: function (t, i, s, r) { switch (i) { case "disabled": r ? this.disable() : this.enable(); break; case "switchRatio": this.switchRatio = parseInt(this.switchRatio, 10); break; case "checked": r ? this.check() : this.uncheck(); break; case "onLabel": this.setOnLabel(r); break; case "offLabel": this.setOffLabel(r); break; case "theme": e.jqx.utilities.setTheme(s, r, t.host); break; case "width": case "height": case "thumbSize": case "orientation": this._performLayout(), this._wrapper.css("left", 0), this._wrapper.css("top", 0), this._switchButton(this.checked, 0, !0) } } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxScrollBar", "", {}), e.extend(e.jqx._jqxScrollBar.prototype, { defineInstance: function () { this.height = null, this.width = null, this.vertical = !1, this.min = 0, this.max = 1e3, this.value = this.min, this.step = 10, this.largestep = 50, this.thumbMinSize = 10, this.thumbSize = 0, this.thumbStep = "auto", this.roundedCorners = "all", this.showButtons = !0, this.disabled = !1, this.touchMode = "auto", this.touchModeStyle = "auto", this.thumbTouchSize = 0, this._triggervaluechanged = !0, this.rtl = !1, this.areaDownCapture = !1, this.areaUpCapture = !1, this._initialLayout = !1 }, createInstance: function (e) { this.render() }, render: function () { this._mouseup = new Date; var t = this, i = "<div id='jqxScrollOuterWrap' style='width:100%; height: 100%; align:left; border: 0px; valign:top; position: relative;'><div id='jqxScrollWrap' style='width:100%; height: 100%; left: 0px; top: 0px; align:left; valign:top; position: absolute;'><div id='jqxScrollBtnUp' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='jqxScrollAreaUp' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='jqxScrollThumb' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='jqxScrollAreaDown' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='jqxScrollBtnDown' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div></div></div>"; if (e.jqx.utilities && "hidden" == e.jqx.utilities.scrollBarButtonsVisibility && (this.showButtons = !1), t.WinJS ? MSApp.execUnsafeLocalFunction(function () { t.host.html(i) }) : this.element.innerHTML = i, void 0 != this.width && parseInt(this.width) > 0 && this.host.width(parseInt(this.width)), void 0 != this.height && parseInt(this.height) > 0 && this.host.height(parseInt(this.height)), this.isPercentage = !1, null != this.width && -1 != this.width.toString().indexOf("%") && (this.host.width(this.width), this.isPercentage = !0), null != this.height && -1 != this.height.toString().indexOf("%") && (this.host.height(this.height), this.isPercentage = !0), this.isPercentage) { var s = this; e.jqx.utilities.resize(this.host, function () { s._arrange() }, !1) } this.thumbCapture = !1, this.scrollOuterWrap = e(this.element.firstChild), this.scrollWrap = e(this.scrollOuterWrap[0].firstChild), this.btnUp = e(this.scrollWrap[0].firstChild), this.areaUp = e(this.btnUp[0].nextSibling), this.btnThumb = e(this.areaUp[0].nextSibling), this.arrowUp = e("<div></div>"), this.arrowUp.appendTo(this.btnUp), this.areaDown = e(this.btnThumb[0].nextSibling), this.btnDown = e(this.areaDown[0].nextSibling), this.arrowDown = e("<div></div>"), this.arrowDown.appendTo(this.btnDown); var r = this.element.id; if (this.btnUp[0].id = "jqxScrollBtnUp" + r, this.btnDown[0].id = "jqxScrollBtnDown" + r, this.btnThumb[0].id = "jqxScrollThumb" + r, this.areaUp[0].id = "jqxScrollAreaUp" + r, this.areaDown[0].id = "jqxScrollAreaDown" + r, this.scrollWrap[0].id = "jqxScrollWrap" + r, this.scrollOuterWrap[0].id = "jqxScrollOuterWrap" + r, !this.host.jqxRepeatButton) throw new Error("jqxScrollBar: Missing reference to jqxbuttons.js."); this.btnUp.jqxRepeatButton({ _ariaDisabled: !0, overrideTheme: !0, disabled: this.disabled }), this.btnDown.jqxRepeatButton({ _ariaDisabled: !0, overrideTheme: !0, disabled: this.disabled }), this.btnDownInstance = e.data(this.btnDown[0], "jqxRepeatButton").instance, this.btnUpInstance = e.data(this.btnUp[0], "jqxRepeatButton").instance, this.areaUp.jqxRepeatButton({ _scrollAreaButton: !0, _ariaDisabled: !0, overrideTheme: !0 }), this.areaDown.jqxRepeatButton({ _scrollAreaButton: !0, _ariaDisabled: !0, overrideTheme: !0 }), this.btnThumb.jqxButton({ _ariaDisabled: !0, overrideTheme: !0, disabled: this.disabled }), this.propertyChangeMap.value = function (e, t, i, s) { isNaN(s) || i != s && e.setPosition(parseFloat(s), !0) }, this.propertyChangeMap.width = function (e, t, i, s) { void 0 != e.width && parseInt(e.width) > 0 && (e.host.width(parseInt(e.width)), e._arrange()) }, this.propertyChangeMap.height = function (e, t, i, s) { void 0 != e.height && parseInt(e.height) > 0 && (e.host.height(parseInt(e.height)), e._arrange()) }, this.propertyChangeMap.theme = function (e, t, i, s) { e.setTheme() }, this.propertyChangeMap.max = function (e, t, i, s) { isNaN(s) || i != s && (e.max = parseInt(s), e.min > e.max && (e.max = e.min + 1), e._arrange(), e.setPosition(e.value)) }, this.propertyChangeMap.min = function (e, t, i, s) { isNaN(s) || i != s && (e.min = parseInt(s), e.min > e.max && (e.max = e.min + 1), e._arrange(), e.setPosition(e.value)) }, this.propertyChangeMap.disabled = function (e, t, i, s) { i != s && (s ? e.host.addClass(e.toThemeProperty("jqx-fill-state-disabled")) : e.host.removeClass(e.toThemeProperty("jqx-fill-state-disabled")), e.btnUp.jqxRepeatButton("disabled", e.disabled), e.btnDown.jqxRepeatButton("disabled", e.disabled), e.btnThumb.jqxButton("disabled", e.disabled)) }, this.propertyChangeMap.touchMode = function (e, t, i, s) { i != s && (e._updateTouchBehavior(), !0 === s ? (e.showButtons = !1, e.refresh()) : !1 === s && (e.showButtons = !0, e.refresh())) }, this.buttonUpCapture = !1, this.buttonDownCapture = !1, this._updateTouchBehavior(), this.setPosition(this.value), this._addHandlers(), this.setTheme() }, resize: function (e, t) { this.width = e, this.height = t, this._arrange() }, _updateTouchBehavior: function () { if (this.isTouchDevice = e.jqx.mobile.isTouchDevice(), 1 == this.touchMode) { if (e.jqx.browser.msie && e.jqx.browser.version < 9) return void this.setTheme(); this.isTouchDevice = !0, e.jqx.mobile.setMobileSimulator(this.btnThumb[0]), this._removeHandlers(), this._addHandlers(), this.setTheme() } else 0 == this.touchMode && (this.isTouchDevice = !1) }, _addHandlers: function () { var t = this, i = !1; try { ("ontouchstart" in window || window.DocumentTouch && document instanceof DocumentTouch) && (i = !0, this._touchSupport = !0) } catch (e) { } if ((t.isTouchDevice || i) && (this.addHandler(this.btnThumb, e.jqx.mobile.getTouchEventName("touchend"), function (e) { var i = t.vertical ? t.toThemeProperty("jqx-scrollbar-thumb-state-pressed") : t.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal"), s = t.toThemeProperty("jqx-fill-state-pressed"); return t.btnThumb.removeClass(i), t.btnThumb.removeClass(s), t.disabled || t.handlemouseup(t, e), !1 }), this.addHandler(this.btnThumb, e.jqx.mobile.getTouchEventName("touchstart"), function (e) { if (!t.disabled) { if (1 == t.touchMode) e.clientX = e.originalEvent.clientX, e.clientY = e.originalEvent.clientY; else { var i = e; i.originalEvent.touches && i.originalEvent.touches.length ? (e.clientX = i.originalEvent.touches[0].clientX, e.clientY = i.originalEvent.touches[0].clientY) : (e.clientX = e.originalEvent.clientX, e.clientY = e.originalEvent.clientY) } t.handlemousedown(e), e.preventDefault && e.preventDefault() } }), e.jqx.mobile.touchScroll(this.element, t.max, function (e, i, s, r, o) { if ("visible" == t.host.css("visibility")) { if (1 == t.touchMode) o.clientX = o.originalEvent.clientX, o.clientY = o.originalEvent.clientY; else { var a = o; a.originalEvent.touches && a.originalEvent.touches.length ? (o.clientX = a.originalEvent.touches[0].clientX, o.clientY = a.originalEvent.touches[0].clientY) : (o.clientX = o.originalEvent.clientX, o.clientY = o.originalEvent.clientY) } var n = t.vertical ? t.toThemeProperty("jqx-scrollbar-thumb-state-pressed") : t.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal"); t.btnThumb.addClass(n), t.btnThumb.addClass(t.toThemeProperty("jqx-fill-state-pressed")), t.thumbCapture = !0, t.handlemousemove(o) } }, t.element.id)), this.addHandler(this.btnUp, "click", function (e) { var i = t.step; t.rtl && !t.vertical && (i = -t.step), t.buttonUpCapture && !t.isTouchDevice ? t.disabled || t.setPosition(t.value - i) : !t.disabled && t.isTouchDevice && t.setPosition(t.value - i) }), this.addHandler(this.btnDown, "click", function (e) { var i = t.step; t.rtl && !t.vertical && (i = -t.step), t.buttonDownCapture && !t.isTouchDevice ? t.disabled || t.setPosition(t.value + i) : !t.disabled && t.isTouchDevice && t.setPosition(t.value + i) }), !this.isTouchDevice) { try { if (("" != document.referrer || window.frameElement) && null != window.top && window.top != window.self) { var s = null; if (window.parent && document.referrer && (s = document.referrer), s && -1 != s.indexOf(document.location.host)) { var r = function (e) { t.disabled || t.handlemouseup(t, e) }; window.top.document.addEventListener ? window.top.document.addEventListener("mouseup", r, !1) : window.top.document.attachEvent && window.top.document.attachEvent("onmouseup", r) } } } catch (e) { } this.addHandler(this.btnDown, "mouseup", function (e) { if (!t.btnDownInstance.base.disabled && t.buttonDownCapture) { t.buttonDownCapture = !1, t.btnDown.removeClass(t.toThemeProperty("jqx-scrollbar-button-state-pressed")), t.btnDown.removeClass(t.toThemeProperty("jqx-fill-state-pressed")), t._removeArrowClasses("pressed", "down"), t.handlemouseup(t, e); var i = t.step; return t.rtl && !t.vertical && (i = -t.step), t.setPosition(t.value + i), !1 } }), this.addHandler(this.btnUp, "mouseup", function (e) { if (!t.btnUpInstance.base.disabled && t.buttonUpCapture) { t.buttonUpCapture = !1, t.btnUp.removeClass(t.toThemeProperty("jqx-scrollbar-button-state-pressed")), t.btnUp.removeClass(t.toThemeProperty("jqx-fill-state-pressed")), t._removeArrowClasses("pressed", "up"), t.handlemouseup(t, e); var i = t.step; return t.rtl && !t.vertical && (i = -t.step), t.setPosition(t.value - i), !1 } }), this.addHandler(this.btnDown, "mousedown", function (e) { if (!t.btnDownInstance.base.disabled) return t.buttonDownCapture = !0, t.btnDown.addClass(t.toThemeProperty("jqx-fill-state-pressed")), t.btnDown.addClass(t.toThemeProperty("jqx-scrollbar-button-state-pressed")), t._addArrowClasses("pressed", "down"), !1 }), this.addHandler(this.btnUp, "mousedown", function (e) { if (!t.btnUpInstance.base.disabled) return t.buttonUpCapture = !0, t.btnUp.addClass(t.toThemeProperty("jqx-fill-state-pressed")), t.btnUp.addClass(t.toThemeProperty("jqx-scrollbar-button-state-pressed")), t._addArrowClasses("pressed", "up"), !1 }) } var o = "click"; if (this.isTouchDevice && (o = e.jqx.mobile.getTouchEventName("touchend")), this.addHandler(this.areaUp, o, function (e) { if (!t.disabled) { var i = t.largestep; return t.rtl && !t.vertical && (i = -t.largestep), t.setPosition(t.value - i), !1 } }), this.addHandler(this.areaDown, o, function (e) { if (!t.disabled) { var i = t.largestep; return t.rtl && !t.vertical && (i = -t.largestep), t.setPosition(t.value + i), !1 } }), this.addHandler(this.areaUp, "mousedown", function (e) { if (!t.disabled) return t.areaUpCapture = !0, !1 }), this.addHandler(this.areaDown, "mousedown", function (e) { if (!t.disabled) return t.areaDownCapture = !0, !1 }), this.addHandler(this.btnThumb, "mousedown", function (e) { return t.disabled || t.handlemousedown(e), !1 }), this.addHandler(this.btnThumb, "dragstart", function (e) { return !1 }), this.addHandler(e(document), "mouseup." + this.element.id, function (e) { t.disabled || t.handlemouseup(t, e) }), !this.isTouchDevice && (this.mousemoveFunc = function (e) { t.disabled || t.handlemousemove(e) }, this.addHandler(e(document), "mousemove." + this.element.id, this.mousemoveFunc), this.addHandler(e(document), "mouseleave." + this.element.id, function (e) { t.disabled || t.handlemouseleave(e) }), this.addHandler(e(document), "mouseenter." + this.element.id, function (e) { t.disabled || t.handlemouseenter(e) }), !t.disabled)) { this.addHandler(this.btnUp, "mouseenter", function () { t.disabled || t.btnUpInstance.base.disabled || 1 == t.touchMode || (t.btnUp.addClass(t.toThemeProperty("jqx-scrollbar-button-state-hover")), t.btnUp.addClass(t.toThemeProperty("jqx-fill-state-hover")), t._addArrowClasses("hover", "up")) }), this.addHandler(this.btnUp, "mouseleave", function () { t.disabled || t.btnUpInstance.base.disabled || 1 == t.touchMode || (t.btnUp.removeClass(t.toThemeProperty("jqx-scrollbar-button-state-hover")), t.btnUp.removeClass(t.toThemeProperty("jqx-fill-state-hover")), t._removeArrowClasses("hover", "up")) }); var a = t.toThemeProperty("jqx-scrollbar-thumb-state-hover"); t.vertical || (a = t.toThemeProperty("jqx-scrollbar-thumb-state-hover-horizontal")), this.addHandler(this.btnThumb, "mouseenter", function () { t.disabled || 1 == t.touchMode || (t.btnThumb.addClass(a), t.btnThumb.addClass(t.toThemeProperty("jqx-fill-state-hover"))) }), this.addHandler(this.btnThumb, "mouseleave", function () { t.disabled || 1 == t.touchMode || (t.btnThumb.removeClass(a), t.btnThumb.removeClass(t.toThemeProperty("jqx-fill-state-hover"))) }), this.addHandler(this.btnDown, "mouseenter", function () { t.disabled || t.btnDownInstance.base.disabled || 1 == t.touchMode || (t.btnDown.addClass(t.toThemeProperty("jqx-scrollbar-button-state-hover")), t.btnDown.addClass(t.toThemeProperty("jqx-fill-state-hover")), t._addArrowClasses("hover", "down")) }), this.addHandler(this.btnDown, "mouseleave", function () { t.disabled || t.btnDownInstance.base.disabled || 1 == t.touchMode || (t.btnDown.removeClass(t.toThemeProperty("jqx-scrollbar-button-state-hover")), t.btnDown.removeClass(t.toThemeProperty("jqx-fill-state-hover")), t._removeArrowClasses("hover", "down")) }) } }, destroy: function () { var t = this.btnUp, i = this.btnDown, s = this.btnThumb, r = (this.scrollWrap, this.areaUp), o = this.areaDown; this.arrowUp.remove(), delete this.arrowUp, this.arrowDown.remove(), delete this.arrowDown, o.removeClass(), r.removeClass(), i.removeClass(), t.removeClass(), s.removeClass(), t.jqxRepeatButton("destroy"), i.jqxRepeatButton("destroy"), r.jqxRepeatButton("destroy"), o.jqxRepeatButton("destroy"), s.jqxButton("destroy"); var a = e.data(this.element, "jqxScrollBar"); this._removeHandlers(), this.btnUp = null, this.btnDown = null, this.scrollWrap = null, this.areaUp = null, this.areaDown = null, this.scrollOuterWrap = null, delete this.mousemoveFunc, delete this.btnDownInstance, delete this.btnUpInstance, delete this.scrollOuterWrap, delete this.scrollWrap, delete this.btnDown, delete this.areaDown, delete this.areaUp, delete this.btnDown, delete this.btnUp, delete this.btnThumb, delete this.propertyChangeMap.value, delete this.propertyChangeMap.min, delete this.propertyChangeMap.max, delete this.propertyChangeMap.touchMode, delete this.propertyChangeMap.disabled, delete this.propertyChangeMap.theme, delete this.propertyChangeMap, a && delete a.instance, this.host.removeData(), this.host.remove(), delete this.host, delete this.set, delete this.get, delete this.call, delete this.element }, _removeHandlers: function () { this.removeHandler(this.btnUp, "mouseenter"), this.removeHandler(this.btnDown, "mouseenter"), this.removeHandler(this.btnThumb, "mouseenter"), this.removeHandler(this.btnUp, "mouseleave"), this.removeHandler(this.btnDown, "mouseleave"), this.removeHandler(this.btnThumb, "mouseleave"), this.removeHandler(this.btnUp, "click"), this.removeHandler(this.btnDown, "click"), this.removeHandler(this.btnDown, "mouseup"), this.removeHandler(this.btnUp, "mouseup"), this.removeHandler(this.btnDown, "mousedown"), this.removeHandler(this.btnUp, "mousedown"), this.removeHandler(this.areaUp, "mousedown"), this.removeHandler(this.areaDown, "mousedown"), this.removeHandler(this.areaUp, "click"), this.removeHandler(this.areaDown, "click"), this.removeHandler(this.btnThumb, "mousedown"), this.removeHandler(this.btnThumb, "dragstart"), this.removeHandler(e(document), "mouseup." + this.element.id), this.mousemoveFunc ? this.removeHandler(e(document), "mousemove." + this.element.id, this.mousemoveFunc) : this.removeHandler(e(document), "mousemove." + this.element.id), this.removeHandler(e(document), "mouseleave." + this.element.id), this.removeHandler(e(document), "mouseenter." + this.element.id) }, _addArrowClasses: function (e, t) { "pressed" == e && (e = "selected"), "" != e && (e = "-" + e), this.vertical ? ("up" != t && void 0 != t || this.arrowUp.addClass(this.toThemeProperty("jqx-icon-arrow-up" + e)), "down" != t && void 0 != t || this.arrowDown.addClass(this.toThemeProperty("jqx-icon-arrow-down" + e))) : ("up" != t && void 0 != t || this.arrowUp.addClass(this.toThemeProperty("jqx-icon-arrow-left" + e)), "down" != t && void 0 != t || this.arrowDown.addClass(this.toThemeProperty("jqx-icon-arrow-right" + e))) }, _removeArrowClasses: function (e, t) { "pressed" == e && (e = "selected"), "" != e && (e = "-" + e), this.vertical ? ("up" != t && void 0 != t || this.arrowUp.removeClass(this.toThemeProperty("jqx-icon-arrow-up" + e)), "down" != t && void 0 != t || this.arrowDown.removeClass(this.toThemeProperty("jqx-icon-arrow-down" + e))) : ("up" != t && void 0 != t || this.arrowUp.removeClass(this.toThemeProperty("jqx-icon-arrow-left" + e)), "down" != t && void 0 != t || this.arrowDown.removeClass(this.toThemeProperty("jqx-icon-arrow-right" + e))) }, setTheme: function () { var t = this.btnUp, i = this.btnDown, s = this.btnThumb, r = this.scrollWrap, o = (this.areaUp, this.areaDown, this.arrowUp), a = this.arrowDown; this.scrollWrap[0].className = this.toThemeProperty("jqx-reset"), this.scrollOuterWrap[0].className = this.toThemeProperty("jqx-reset"); var n = this.toThemeProperty("jqx-reset"); this.areaDown[0].className = n, this.areaUp[0].className = n; var l = this.toThemeProperty("jqx-scrollbar") + " " + this.toThemeProperty("jqx-widget") + " " + this.toThemeProperty("jqx-widget-content"); this.host.addClass(l), i[0].className = this.toThemeProperty("jqx-scrollbar-button-state-normal"), t[0].className = this.toThemeProperty("jqx-scrollbar-button-state-normal"); var h = ""; if (this.vertical ? (o[0].className = n + " " + this.toThemeProperty("jqx-icon-arrow-up"), a[0].className = n + " " + this.toThemeProperty("jqx-icon-arrow-down"), h = this.toThemeProperty("jqx-scrollbar-thumb-state-normal")) : (o[0].className = n + " " + this.toThemeProperty("jqx-icon-arrow-left"), a[0].className = n + " " + this.toThemeProperty("jqx-icon-arrow-right"), h = this.toThemeProperty("jqx-scrollbar-thumb-state-normal-horizontal")), h += " " + this.toThemeProperty("jqx-fill-state-normal"), s[0].className = h, this.disabled ? (r.addClass(this.toThemeProperty("jqx-fill-state-disabled")), r.removeClass(this.toThemeProperty("jqx-scrollbar-state-normal"))) : (r.addClass(this.toThemeProperty("jqx-scrollbar-state-normal")), r.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))), "all" == this.roundedCorners) if (this.host.addClass(this.toThemeProperty("jqx-rc-all")), this.vertical) { var d = e.jqx.cssroundedcorners("top"); d = this.toThemeProperty(d), t.addClass(d); var c = e.jqx.cssroundedcorners("bottom"); c = this.toThemeProperty(c), i.addClass(c) } else { var u = e.jqx.cssroundedcorners("left"); u = this.toThemeProperty(u), t.addClass(u); var p = e.jqx.cssroundedcorners("right"); p = this.toThemeProperty(p), i.addClass(p) } else { m = e.jqx.cssroundedcorners(this.roundedCorners); m = this.toThemeProperty(m), elBtnUp.addClass(m), elBtnDown.addClass(m) } var m = e.jqx.cssroundedcorners(this.roundedCorners); m = this.toThemeProperty(m), s.hasClass(m) || s.addClass(m), this.isTouchDevice && 0 != this.touchModeStyle && (this.showButtons = !1, s.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-normal-touch"))) }, isScrolling: function () { return void 0 != this.thumbCapture && void 0 != this.buttonDownCapture && void 0 != this.buttonUpCapture && void 0 != this.areaDownCapture && void 0 != this.areaUpCapture && (this.thumbCapture || this.buttonDownCapture || this.buttonUpCapture || this.areaDownCapture || this.areaUpCapture) }, handlemousedown: function (e) { if (void 0 == this.thumbCapture || 0 == this.thumbCapture) { this.thumbCapture = !0; var t = this.btnThumb; null != t && (t.addClass(this.toThemeProperty("jqx-fill-state-pressed")), this.vertical ? t.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed")) : t.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal"))) } this.dragStartX = e.clientX, this.dragStartY = e.clientY, this.dragStartValue = this.value }, toggleHover: function (e, t) { }, refresh: function () { this._arrange() }, _setElementPosition: function (e, t, i) { isNaN(t) || parseInt(e[0].style.left) != parseInt(t) && (e[0].style.left = t + "px"), isNaN(i) || parseInt(e[0].style.top) != parseInt(i) && (e[0].style.top = i + "px") }, _setElementTopPosition: function (e, t) { isNaN(t) || (e[0].style.top = t + "px") }, _setElementLeftPosition: function (e, t) { isNaN(t) || (e[0].style.left = t + "px") }, handlemouseleave: function (e) { var t = this.btnUp, i = this.btnDown; if ((this.buttonDownCapture || this.buttonUpCapture) && (t.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")), i.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")), this._removeArrowClasses("pressed")), 1 == this.thumbCapture) { var s = this.btnThumb, r = this.vertical ? this.toThemeProperty("jqx-scrollbar-thumb-state-pressed") : this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal"); s.removeClass(r), s.removeClass(this.toThemeProperty("jqx-fill-state-pressed")) } }, handlemouseenter: function (e) { var t = this.btnUp, i = this.btnDown; if (this.buttonUpCapture && (t.addClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")), t.addClass(this.toThemeProperty("jqx-fill-state-pressed")), this._addArrowClasses("pressed", "up")), this.buttonDownCapture && (i.addClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")), i.addClass(this.toThemeProperty("jqx-fill-state-pressed")), this._addArrowClasses("pressed", "down")), 1 == this.thumbCapture) { var s = this.btnThumb; this.vertical ? s.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed")) : s.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal")), s.addClass(this.toThemeProperty("jqx-fill-state-pressed")) } }, handlemousemove: function (e) { var t = this.btnUp, i = this.btnDown; if (null != i && null != t) { if (null != t && null != i && void 0 != this.buttonDownCapture && void 0 != this.buttonUpCapture && (this.buttonDownCapture && 0 == e.which ? (i.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")), i.removeClass(this.toThemeProperty("jqx-fill-state-pressed")), this._removeArrowClasses("pressed", "down"), this.buttonDownCapture = !1) : this.buttonUpCapture && 0 == e.which && (t.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")), t.removeClass(this.toThemeProperty("jqx-fill-state-pressed")), this._removeArrowClasses("pressed", "up"), this.buttonUpCapture = !1)), 1 != this.thumbCapture) return !1; var s = this.btnThumb; if (0 == e.which && !this.isTouchDevice && !this._touchSupport) { this.thumbCapture = !1, this._arrange(); var r = this.vertical ? this.toThemeProperty("jqx-scrollbar-thumb-state-pressed") : this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal"); return s.removeClass(r), s.removeClass(this.toThemeProperty("jqx-fill-state-pressed")), !0 } void 0 != e.preventDefault && e.preventDefault(), null != e.originalEvent && (e.originalEvent.mouseHandled = !0), void 0 != e.stopPropagation && e.stopPropagation(); var o = 0; try { o = this.vertical ? e.clientY - this.dragStartY : e.clientX - this.dragStartX; var a = this._btnAndThumbSize; this._btnAndThumbSize || (a = this.vertical ? t.height() + i.height() + s.height() : t.width() + i.width() + s.width()); var n = (this.max - this.min) / (this.scrollBarSize - a); if ("auto" != this.thumbStep) { if (o *= n, Math.abs(this.dragStartValue + o - this.value) >= parseInt(this.thumbStep)) { l = Math.round(parseInt(o) / this.thumbStep) * this.thumbStep; return this.rtl && !this.vertical ? this.setPosition(this.dragStartValue - l) : this.setPosition(this.dragStartValue + l), !1 } return !1 } var l = o *= n; this.rtl && !this.vertical && (l = -o), this.setPosition(this.dragStartValue + l) } catch (e) { alert(e) } return !1 } }, handlemouseup: function (e, t) { var i = !1; if (this.thumbCapture) { this.thumbCapture = !1; var s = this.btnThumb, r = this.vertical ? this.toThemeProperty("jqx-scrollbar-thumb-state-pressed") : this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal"); s.removeClass(r), s.removeClass(this.toThemeProperty("jqx-fill-state-pressed")), i = !0, this._mouseup = new Date } if (this.areaDownCapture = this.areaUpCapture = !1, this.buttonUpCapture || this.buttonDownCapture) { var o = this.btnUp, a = this.btnDown; this.buttonUpCapture = !1, this.buttonDownCapture = !1, o.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")), a.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")), o.removeClass(this.toThemeProperty("jqx-fill-state-pressed")), a.removeClass(this.toThemeProperty("jqx-fill-state-pressed")), this._removeArrowClasses("pressed"), i = !0, this._mouseup = new Date } i && (void 0 != t.preventDefault && t.preventDefault(), null != t.originalEvent && (t.originalEvent.mouseHandled = !0), void 0 != t.stopPropagation && t.stopPropagation()) }, setPosition: function (e, t) { this.element; if (void 0 != e && NaN != e || (e = this.min), e >= this.max && (e = this.max), e < this.min && (e = this.min), this.value !== e || 1 == t) { if (e == this.max) { var i = new jQuery.Event("complete"); this.host.trigger(i) } var s = this.value; if (this._triggervaluechanged) { var r = new jQuery.Event("valuechanged"); r.previousValue = this.value, r.currentValue = e } this.value = e, this._positionelements(), this._triggervaluechanged && this.host.trigger(r), this.valuechanged && this.valuechanged({ currentValue: this.value, previousvalue: s }) } return e }, _getThumbSize: function (e) { var t = this.max - this.min, i = 0; return t > 1 ? i = e / (t + e) * e : 1 == t && (i = e), this.thumbSize > 0 && (i = this.thumbSize), i < this.thumbMinSize && (i = this.thumbMinSize), Math.min(i, e) }, _positionelements: function () { this.element; var e = this.areaUp, t = this.areaDown, i = (this.btnUp, this.btnDown, this.btnThumb), s = (this.scrollWrap, this._height ? this._height : this.host.height()), r = this._width ? this._width : this.host.width(), o = this.vertical ? r : s; this.showButtons || (o = 0); var a = this.vertical ? s : r; this.scrollBarSize = a; var n = this._getThumbSize(a - 2 * o); (n = Math.round(n)) < this.thumbMinSize && (n = this.thumbMinSize), (NaN == s || s < 10) && (s = 10), (NaN == r || r < 10) && (r = 10), o += 2, this.btnSize = o; l = this._btnAndThumbSize; if (!this._btnAndThumbSize) { var l = this.vertical ? 2 * this.btnSize + i.outerHeight() : 2 * this.btnSize + i.outerWidth(); l = Math.round(l) } var h = (a - l) / (this.max - this.min) * (this.value - this.min); if (this.rtl && !this.vertical && (h = (a - l) / (this.max - this.min) * (this.max - this.value - this.min)), (h = Math.round(h)) < 0 && (h = 0), this.vertical) { var d = a - h - l; d < 0 && (d = 0), t[0].style.height = d + "px", e[0].style.height = h + "px", this._setElementTopPosition(e, o), this._setElementTopPosition(i, o + h), this._setElementTopPosition(t, o + h + n) } else e[0].style.width = h + "px", t[0].style.width = a - h - l >= 0 ? a - h - l + "px" : "0px", this._setElementLeftPosition(e, o), this._setElementLeftPosition(i, o + h), this._setElementLeftPosition(t, 2 + o + h + n) }, _arrange: function () { if (this._initialLayout) this._initialLayout = !1; else { this.element; var e = this.areaUp, t = this.areaDown, i = this.btnUp, s = this.btnDown, r = this.btnThumb, o = this.scrollWrap, a = parseInt(this.element.style.height), n = parseInt(this.element.style.width); if (this.isPercentage) var a = this.host.height(), n = this.host.width(); isNaN(a) && (a = 0), isNaN(n) && (n = 0), this._width = n, this._height = a; var l = this.vertical ? n : a; this.showButtons || (l = 0), i[0].style.width = l + "px", i[0].style.height = l + "px", s[0].style.width = l + "px", s[0].style.height = l + "px", this.vertical ? o[0].style.width = n + 2 + "px" : o[0].style.height = a + 2 + "px", this._setElementPosition(i, 0, 0); var h = l + 2; this.vertical ? this._setElementPosition(s, 0, a - h) : this._setElementPosition(s, n - h, 0); var d = this.vertical ? a : n; this.scrollBarSize = d; var c = this._getThumbSize(d - 2 * l); (c = Math.round(c)) < this.thumbMinSize && (c = this.thumbMinSize); var u = !1; this.isTouchDevice && 0 != this.touchModeStyle && (u = !0), this.vertical ? (r[0].style.width = n + "px", r[0].style.height = c + "px", u && 0 !== this.thumbTouchSize && (r.css({ width: this.thumbTouchSize + "px" }), r.css("margin-left", (this.host.width() - this.thumbTouchSize) / 2))) : (r[0].style.width = c + "px", r[0].style.height = a + "px", u && 0 !== this.thumbTouchSize && (r.css({ height: this.thumbTouchSize + "px" }), r.css("margin-top", (this.host.height() - this.thumbTouchSize) / 2))), (NaN == a || a < 10) && (a = 10), (NaN == n || n < 10) && (n = 10), l += 2, this.btnSize = l; var p = this.vertical ? 2 * this.btnSize + (2 + parseInt(r[0].style.height)) : 2 * this.btnSize + (2 + parseInt(r[0].style.width)); p = Math.round(p), this._btnAndThumbSize = p; var m = (d - p) / (this.max - this.min) * (this.value - this.min); if (this.rtl && !this.vertical && (m = (d - p) / (this.max - this.min) * (this.max - this.value - this.min)), (m = Math.round(m)) !== -1 / 0 && m != 1 / 0 || (m = 0), isNaN(m) && (m = 0), m < 0 && (m = 0), this.vertical) { var g = d - m - p; g < 0 && (g = 0), t[0].style.height = g + "px", t[0].style.width = n + "px", e[0].style.height = m + "px", e[0].style.width = n + "px"; var f = parseInt(this.element.style.height); this.isPercentage && (f = this.host.height()), r[0].style.visibility = "inherit", f - 3 * parseInt(l) < 0 ? r[0].style.visibility = "hidden" : f < p ? r[0].style.visibility = "hidden" : "visible" == this.element.style.visibility && (r[0].style.visibility = "inherit"), this._setElementPosition(e, 0, l), this._setElementPosition(r, 0, l + m), this._setElementPosition(t, 0, l + m + c) } else { m > 0 && (e[0].style.width = m + "px"), a > 0 && (e[0].style.height = a + "px"); var v = d - m - p; v < 0 && (v = 0), t[0].style.width = v + "px", t[0].style.height = a + "px"; var x = parseInt(this.element.style.width); this.isPercentage && (x = this.host.width()), r[0].style.visibility = "inherit", x - 3 * parseInt(l) < 0 ? r[0].style.visibility = "hidden" : x < p ? r[0].style.visibility = "hidden" : "visible" == this.element.style.visibility && (r[0].style.visibility = "inherit"), this._setElementPosition(e, l, 0), this._setElementPosition(r, l + m, 0), this._setElementPosition(t, 2 + l + m + c, 0) } } } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxPanel", "", {}), e.extend(e.jqx._jqxPanel.prototype, { defineInstance: function () { this.width = null, this.height = null, this.disabled = !1, this.scrollBarSize = e.jqx.utilities.scrollBarSize, this.sizeMode = "fixed", this.autoUpdate = !1, this.autoUpdateInterval = 500, this.touchMode = "auto", this.horizontalScrollBarMax = null, this.verticalScrollBarMax = null, this.touchModeStyle = "auto", this.rtl = !1, this.events = ["layout"] }, createInstance: function (e) { this.render() }, render: function () { 15 != e.jqx.utilities.scrollBarSize && (this.scrollBarSize = e.jqx.utilities.scrollBarSize), this.host.addClass(this.toThemeProperty("jqx-panel")), this.host.addClass(this.toThemeProperty("jqx-widget")), this.host.addClass(this.toThemeProperty("jqx-widget-content")), this.host.addClass(this.toThemeProperty("jqx-rc-all")); var t = e("<div id='panelWrapper' style='overflow: hidden; width: 100%; height: 100%; background-color: transparent; -webkit-appearance: none; outline: none; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div id='panelContent' style='-webkit-appearance: none; -moz-box-sizing: border-box; box-sizing: border-box; width: 100%; height: 100%; outline: none; border: none; padding: 0px; position: absolute; margin: 0px; align:left; valign:top; left: 0px; top: 0px;'/><div id='verticalScrollBar' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='horizontalScrollBar' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/></div>"); if (!this.host.jqxButton) throw new Error("jqxPanel: Missing reference to jqxbuttons.js."); if (!this.host.jqxScrollBar) throw new Error("jqxPanel: Missing reference to jqxscrollbar.js."); var i = this.host.children(); this._rtl = !1, i.length > 0 && "rtl" == i.css("direction") && (this.rtl = !0, this._rtl = !0), this.host.wrapInner(t); var s = this.host.find("#verticalScrollBar"); s[0].id = this.element.id + "verticalScrollBar", this.vScrollBar = s.jqxScrollBar({ vertical: !0, rtl: this.rtl, touchMode: this.touchMode, theme: this.theme }); var r = this.host.find("#horizontalScrollBar"); r[0].id = this.element.id + "horizontalScrollBar", this.hScrollBar = r.jqxScrollBar({ vertical: !1, rtl: this.rtl, touchMode: this.touchMode, theme: this.theme }), this.content = this.host.find("#panelContent"), this.wrapper = this.host.find("#panelWrapper"), this.content.addClass(this.toThemeProperty("jqx-widget-content")), this.wrapper[0].id = this.wrapper[0].id + this.element.id, this.content[0].id = this.content[0].id + this.element.id, this.bottomRight = this.host.find("#bottomRight").addClass(this.toThemeProperty("jqx-panel-bottomright")).addClass(this.toThemeProperty("jqx-scrollbar-state-normal")), this.bottomRight[0].id = "bottomRight" + this.element.id, this.vScrollBar.css("visibility", "inherit"), this.hScrollBar.css("visibility", "inherit"), this.vScrollInstance = e.data(this.vScrollBar[0], "jqxScrollBar").instance, this.hScrollInstance = e.data(this.hScrollBar[0], "jqxScrollBar").instance; var o = this; this.propertyChangeMap.disabled = function (e, t, i, s) { o.vScrollBar.jqxScrollBar({ disabled: o.disabled }), o.hScrollBar.jqxScrollBar({ disabled: o.disabled }) }, this.vScrollBar.jqxScrollBar({ disabled: this.disabled }), this.hScrollBar.jqxScrollBar({ disabled: this.disabled }), this._addHandlers(), null == this.width && (this.width = this.content.width()), null == this.height && (this.height = this.content.height()), this._arrange(), this.contentWidth = o.content[0].scrollWidth, this.contentHeight = o.content[0].scrollHeight, this.autoUpdate && o._autoUpdate(), this.propertyChangeMap.autoUpdate = function (e, t, i, s) { o.autoUpdate ? o._autoUpdate() : (clearInterval(o.autoUpdateId), o.autoUpdateId = null) }, this.addHandler(e(window), "unload", function () { null != o.autoUpdateId && (clearInterval(o.autoUpdateId), o.autoUpdateId = null, o.destroy()) }), this._updateTouchScrolling(), this._render() }, hiddenParent: function () { return e.jqx.isHidden(this.host) }, _updateTouchScrolling: function () { var t = this; 1 == this.touchMode && e.jqx.mobile.setMobileSimulator(this.element), this.isTouchDevice() && (e.jqx.mobile.touchScroll(this.element, t.vScrollInstance.max, function (e, i) { if ("hidden" != t.vScrollBar.css("visibility")) { s = t.vScrollInstance.value; t.vScrollInstance.setPosition(s + i) } if ("hidden" != t.hScrollBar.css("visibility")) { var s = t.hScrollInstance.value; t.hScrollInstance.setPosition(s + e) } }, this.element.id, this.hScrollBar, this.vScrollBar), this._arrange()), this.vScrollBar.jqxScrollBar({ touchMode: this.touchMode }), this.hScrollBar.jqxScrollBar({ touchMode: this.touchMode }) }, isTouchDevice: function () { var t = e.jqx.mobile.isTouchDevice(); return 1 == this.touchMode ? t = !0 : 0 == this.touchMode && (t = !1), t && 0 != this.touchModeStyle && (this.scrollBarSize = e.jqx.utilities.touchScrollBarSize), t }, append: function (e) { null != e && (this.content.append(e), this._arrange()) }, setcontent: function (e) { this.content[0].innerHTML = e, this._arrange(); var t = this; setTimeout(function () { t._arrange() }, 100) }, prepend: function (e) { null != e && (this.content.prepend(e), this._arrange()) }, clearcontent: function () { this.content.text(""), this.content.children().remove(), this._arrange() }, remove: function (t) { null != t && (e(t).remove(), this._arrange()) }, _autoUpdate: function () { var e = this; this.autoUpdateId = setInterval(function () { var t = e.content[0].scrollWidth, i = e.content[0].scrollHeight, s = !1; e.contentWidth != t && (e.contentWidth = t, s = !0), e.contentHeight != i && (e.contentHeight = i, s = !0), s && e._arrange() }, this.autoUpdateInterval) }, _addHandlers: function () { var t = this; this.addHandler(this.vScrollBar, "valuechanged", function (e) { t._render(t) }), this.addHandler(this.hScrollBar, "valuechanged", function (e) { t._render(t) }), this.addHandler(this.host, "mousewheel", function (e) { t.wheel(e, t) }), this.addHandler(this.wrapper, "scroll", function (e) { 0 != t.wrapper[0].scrollTop && (t.wrapper[0].scrollTop = 0), 0 != t.wrapper[0].scrollLeft && (t.wrapper[0].scrollLeft = 0) }), this.addHandler(this.host, "mouseleave", function (e) { t.focused = !1 }), this.addHandler(this.host, "focus", function (e) { t.focused = !0 }), this.addHandler(this.host, "blur", function (e) { t.focused = !1 }), this.addHandler(this.host, "mouseenter", function (e) { t.focused = !0 }), e.jqx.utilities.resize(this.host, function () { e.jqx.isHidden(t.host) || t._arrange(!1) }) }, resize: function (e, t) { this.width = e, this.height = t, this._arrange(!1) }, _removeHandlers: function () { this.removeHandler(this.vScrollBar, "valuechanged"), this.removeHandler(this.hScrollBar, "valuechanged"), this.removeHandler(this.host, "mousewheel"), this.removeHandler(this.host, "mouseleave"), this.removeHandler(this.host, "focus"), this.removeHandler(this.host, "blur"), this.removeHandler(this.host, "mouseenter"), this.removeHandler(this.wrapper, "scroll"), this.removeHandler(e(window), "resize." + this.element.id) }, wheel: function (t, i) { var s = 0; if (t.originalEvent && e.jqx.browser.msie && t.originalEvent.wheelDelta && (s = t.originalEvent.wheelDelta / 120), t || (t = window.event), t.wheelDelta ? s = t.wheelDelta / 120 : t.detail && (s = -t.detail / 3), s) { var r = i._handleDelta(s); return r || t.preventDefault && t.preventDefault(), !r && r } t.preventDefault && t.preventDefault(), t.returnValue = !1 }, scrollDown: function () { if ("hidden" == this.vScrollBar.css("visibility")) return !1; var e = this.vScrollInstance; return e.value + e.largestep <= e.max ? (e.setPosition(e.value + e.largestep), !0) : e.value + e.largestep != e.max && (e.setPosition(e.max), !0) }, scrollUp: function () { if ("hidden" == this.vScrollBar.css("visibility")) return !1; var e = this.vScrollInstance; return e.value - e.largestep >= e.min ? (e.setPosition(e.value - e.largestep), !0) : e.value - e.largestep != e.min && (e.setPosition(e.min), !0) }, _handleDelta: function (e) { if (this.focused) { var t = this.vScrollInstance.value; if (e < 0 ? this.scrollDown() : this.scrollUp(), t != this.vScrollInstance.value) return !1 } return !0 }, _render: function (e) { void 0 == e && (e = this); var t = e.vScrollInstance.value, i = e.hScrollInstance.value; this.rtl && "hidden" != this.hScrollBar[0].style.visibility && (i = 0 == this._rtl ? e.hScrollInstance.max - i : -e.hScrollInstance.value), e.content.css({ left: -i + "px", top: -t + "px" }) }, scrollTo: function (e, t) { void 0 != e && void 0 != t && (this.vScrollInstance.setPosition(t), this.hScrollInstance.setPosition(e)) }, getScrollHeight: function () { return this.vScrollInstance.max }, getVScrollPosition: function () { return this.vScrollInstance.value }, getScrollWidth: function () { return this.hScrollInstance.max }, getHScrollPosition: function () { return this.hScrollInstance.value }, _getScrollSize: function () { var t = this.scrollBarSize; return isNaN(t) && (t = parseInt(t), isNaN(t) ? t = "17px" : t += "px"), this.isTouchDevice() && (t = e.jqx.utilities.touchScrollBarSize), t = parseInt(t) }, _getScrollArea: function () { var t = 0; this.content.css("margin-right", "0px"), this.content.css("max-width", "9999999px"), e.jqx.browser.msie && e.jqx.browser.version < 10 && (t = parseInt(this.content.css("left")), this.content.css("left", 0)), this.content.css("overflow", "auto"), this.rtl && this.content.css("direction", "rtl"); s = parseInt(this.content[0].scrollWidth); e.each(this.content.children(), function () { s = Math.max(s, this.scrollWidth), s = Math.max(s, e(this).outerWidth()) }), e.jqx.browser.msie && e.jqx.browser.version < 10 && this.content.css("left", t); i = parseInt(this.content[0].scrollHeight); if (this.content.css("overflow", "visible"), e.jqx.browser.msie && e.jqx.browser.version < 9) { i = parseInt(this.content[0].scrollHeight); switch (this.sizeMode) { case "wrap": var i = parseInt(this.content[0].scrollHeight), s = parseInt(this.content[0].scrollWidth); break; case "horizontalWrap": case "horizontalwrap": break; case "verticalWrap": case "verticalwrap": i = parseInt(this.content[0].scrollHeight) } } return this.rtl && this.content.css("direction", "ltr"), { width: s, height: i } }, _arrange: function (t) { !1 !== t && (null != this.width && this.host.width(this.width), null != this.height && this.host.height(this.height)); var i = this._getScrollSize(), s = this.host.width(), r = this.host.height(), o = this._getScrollArea(), a = o.width, n = o.height, l = n - parseInt(Math.round(this.host.height())), h = a - parseInt(Math.round(this.host.width())); void 0 != this.horizontalScrollBarMax && (h = this.horizontalScrollBarMax), void 0 != this.verticalScrollBarMax && (l = this.verticalScrollBarMax); var d = function (e, t) { t > 5 ? (e.vScrollBar.jqxScrollBar({ max: t }), e.vScrollBar.css("visibility", "inherit")) : (e.vScrollBar.jqxScrollBar("setPosition", 0), e.vScrollBar.css("visibility", "hidden")) }, c = function (t, s) { s > 0 ? e.jqx.browser.msie && e.jqx.browser.version < 8 && s - 10 <= i ? (t.hScrollBar.css("visibility", "hidden"), t.hScrollBar.jqxScrollBar("setPosition", 0)) : (t.hScrollBar.jqxScrollBar({ max: s + 4 }), t.hScrollBar.css("visibility", "inherit")) : (t.hScrollBar.css("visibility", "hidden"), t.hScrollBar.jqxScrollBar("setPosition", 0)) }; switch (this.sizeMode) { case "wrap": return this.host.width(a), this.host.height(n), this.vScrollBar.css("visibility", "hidden"), void this.hScrollBar.css("visibility", "hidden"); case "horizontalWrap": case "horizontalwrap": return this.host.width(a), this.hScrollBar.css("visibility", "hidden"), d(this, l), void this._arrangeScrollbars(i, a, r); case "verticalWrap": case "verticalwrap": return this.host.height(n), this.vScrollBar.css("visibility", "hidden"), c(this, h), void this._arrangeScrollbars(i, s, r) } d(this, l); "hidden" != this.vScrollBar.css("visibility") && void 0 == this.horizontalScrollBarMax && (!this.isTouchDevice() && h > 0 || h > 0) && (h += i + 2), c(this, h), "hidden" != this.hScrollBar.css("visibility") && this.vScrollBar.jqxScrollBar({ max: l + i + 2 }), this._arrangeScrollbars(i, s, r) }, _arrangeScrollbars: function (t, i, s) { var r = "hidden" != this.vScrollBar[0].style.visibility; this.hScrollBar[0].style.visibility; if (this.hScrollBar.height(t), this.hScrollBar.css({ top: s - t - 2 - 2 + "px", left: "0px" }), this.hScrollBar.width(i - 2 + "px"), this.vScrollBar.width(t), this.vScrollBar.height(parseInt(s) - 2 + "px"), this.vScrollBar.css({ left: parseInt(i) - parseInt(t) - 2 - 2 + "px", top: "0px" }), this.rtl) { this.vScrollBar.css({ left: "0px" }); var o = r ? parseInt(t) + "px" : 0; if ("rtl" != this.content.children().css("direction")) { var a = !1; e.jqx.browser.msie && e.jqx.browser.version < 8 && (a = !0), a || this.content.css("padding-left", o) } } else "hidden" != this.vScrollBar.css("visibility") && this.content.css("max-width", this.host.width() - this.vScrollBar.outerWidth()); "hidden" != this.vScrollBar.css("visibility") && "hidden" != this.hScrollBar.css("visibility") ? (this.bottomRight.css("visibility", "inherit"), this.bottomRight.css({ left: 1 + parseInt(this.vScrollBar.css("left")), top: 1 + parseInt(this.hScrollBar.css("top")) }), this.bottomRight.width(parseInt(t) + 3), this.bottomRight.height(parseInt(t) + 3), this.rtl && (this.bottomRight.css({ left: "0px" }), this.hScrollBar.css({ left: t + 2 + "px" })), this.hScrollBar.width(i - 1 * t - 2 - 2 + "px"), this.vScrollBar.height(parseInt(s) - 2 - t - 2 + "px")) : this.bottomRight.css("visibility", "hidden"), this.hScrollInstance.refresh(), this.vScrollInstance.refresh() }, destroy: function () { clearInterval(this.autoUpdateId), this.autoUpdateId = null, this.autoUpdate = !1, e.jqx.utilities.resize(this.host, null, !0), this._removeHandlers(), this.removeHandler(e(window), "unload"), this.vScrollBar.jqxScrollBar("destroy"), this.hScrollBar.jqxScrollBar("destroy"), this.host.remove() }, _raiseevent: function (e, t, i) { if (void 0 != this.isInitialized && 1 == this.isInitialized) { var s = this.events[e], r = new jQuery.Event(s); return r.previousValue = t, r.currentValue = i, r.owner = this, this.host.trigger(r) } }, beginUpdateLayout: function () { this.updating = !0 }, resumeUpdateLayout: function () { this.updating = !1, this.vScrollInstance.value = 0, this.hScrollInstance.value = 0, this._arrange(), this._render() }, propertyChangedHandler: function (e, t, i, s) { e.isInitialized && ("rtl" == t && (this.vScrollBar.jqxScrollBar({ rtl: s }), this.hScrollBar.jqxScrollBar({ rtl: s }), e._arrange()), e.updating || "scrollBarSize" != t && "width" != t && "height" != t || i != s && e._arrange(), "touchMode" == t && "auto" != s && e._updateTouchScrolling(), "theme" == t && (e.host.removeClass(), e.host.addClass(this.toThemeProperty("jqx-panel")), e.host.addClass(this.toThemeProperty("jqx-widget")), e.host.addClass(this.toThemeProperty("jqx-widget-content")), e.host.addClass(this.toThemeProperty("jqx-rc-all")), e.vScrollBar.jqxScrollBar({ theme: this.theme }), e.hScrollBar.jqxScrollBar({ theme: this.theme }), e.bottomRight.removeClass(), e.bottomRight.addClass(this.toThemeProperty("jqx-panel-bottomright")), e.bottomRight.addClass(this.toThemeProperty("jqx-scrollbar-state-normal")), e.content.removeClass(), e.content.addClass(this.toThemeProperty("jqx-widget-content")))) }, invalidate: function () { e.jqx.isHidden(this.host) || this.refresh() }, refresh: function (e) { this._arrange() } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxTooltip", "", {}), e.extend(e.jqx._jqxTooltip.prototype, { defineInstance: function () { this.width = "auto", this.height = "auto", this.position = "default", this.enableBrowserBoundsDetection = !0, this.content = "", this.left = 0, this.top = 0, this.absolutePositionX = 0, this.absolutePositionY = 0, this.trigger = "hover", this.showDelay = 100, this.autoHide = !0, this.autoHideDelay = 3e3, this.closeOnClick = !0, this.disabled = !1, this.animationShowDelay = 200, this.animationHideDelay = "fast", this.showArrow = !0, this.name = "", this.opacity = .9, this.rtl = !1, this._isOpen = !1, this.opening = null, this.value = null, this._eventsMap = { mousedown: e.jqx.mobile.getTouchEventName("touchstart"), mouseup: e.jqx.mobile.getTouchEventName("touchend") }, this.events = ["open", "close", "opening", "closing"] }, createInstance: function (t) { this._isTouchDevice = e.jqx.mobile.isTouchDevice(); var i = e.data(document.body, "_tooltipIDArray" + this.name); i ? this.ID_Array = i : (this.ID_Array = new Array, e.data(document.body, "_tooltipIDArray" + this.name, this.ID_Array)); var s = "jqxtooltip" + this._generatekey(); this.ID_Array.push({ tooltipID: s, tooltipHost: this.host }); var r = e('<div id="' + s + '"><div id ="' + s + 'Main"><div id="' + s + 'Text"></div></div><div id="' + s + 'Arrow"></div></div>'); e.jqx.browser.msie && r.addClass(this.toThemeProperty("jqx-noshadow")), e("body").append(r), this._setTheme(); var o = e("#" + s); o.css("visibility", "hidden"), o.css("display", "none"), o.css("opacity", 0), o.css("z-index", 99999), 0 == this.showArrow && (e("#" + s + "Arrow").css("visibility", "hidden"), e("#" + s + "Arrow").css("display", "none")), this._setSize(), this._setContent(), 0 == this.disabled && (this._trigger(), 1 == this.closeOnClick && this._clickHide()) }, open: function () { if (arguments && arguments.length && 2 == arguments.length && (this.position = "absolute", this.left = arguments[0], this.top = arguments[1], this.absolutePositionX = arguments[0], this.absolutePositionY = arguments[1]), 0 == this.disabled && "removed" != this._id()) if ("mouse" == this.position || "mouseenter" == this.position) { var e = this.position; this.position = "default", this._raiseEvent("2"), this._setPosition(), this._animateShow(), this.position = e } else this._raiseEvent("2"), this._setPosition(), this._animateShow() }, close: function (t) { var i = this; e.isEmptyObject(t) && (t = this.animationHideDelay); var s = new Number(e(this._id()).css("opacity")).toFixed(2), r = function () { clearTimeout(i.autoHideTimeout), i._raiseEvent("3"), e(i._id()).animate({ opacity: 0 }, t, function () { e(i._id()).css("visibility", "hidden"), e(i._id()).css("display", "none"), i._raiseEvent("1"), i._isOpen = !1 }) }; if (0 == this._isOpen && 0 != s) return e(i._id()).stop(), void r(); 1 == this._isOpen && s == this.opacity && r() }, destroy: function () { var t = this.ID_Array.length; this._removeHandlers(), e(this._id()).remove(); for (var i = 0; i < t; i++) if (this.ID_Array[i].tooltipHost === this.host) { this.ID_Array.splice(i, 1); break } e(this.element).removeData("jqxTooltip") }, refresh: function (t) { if (1 != t) { this.rtl && (e(this._id() + "Text").addClass(this.toThemeProperty("jqx-rtl")), e(this._id() + "Text").css({ direction: "rtl" })); var i = this, s = new Number(e(this._id()).css("opacity")).toFixed(2); "removed" != this._id() && (1 == this.disabled && 1 == this._isOpen && s == this.opacity && (clearTimeout(this.autoHideTimeout), e(this._id()).stop(), e(this._id()).animate({ opacity: 0 }, this.animationHideDelay, function () { e(i._id()).css("visibility", "hidden"), e(i._id()).css("display", "none"), i._isOpen = !1 })), this._setTheme(), this._setContent(), this._setSize(), "mouse" != this.position && "mouseenter" != this.position && this._setPosition(), this._removeHandlers(), 0 == this.disabled && (this._trigger(), 1 == this.closeOnClick && this._clickHide())) } }, propertyChangedHandler: function (e, t, i, s) { "content" == t && (this.changeContentFlag = !0), e.refresh() }, _raiseEvent: function (e, t) { var i = this.events[e], s = new jQuery.Event(i); s.owner = this, s.args = t; try { var r = this.host.trigger(s) } catch (e) { } return r }, _generatekey: function () { var e = function () { return (65536 * (1 + Math.random()) | 0).toString(16).substring(1) }; return e() + e() }, _id: function () { for (var e, t = this.ID_Array.length, i = 0; i < t; i++) if (this.ID_Array[i].tooltipHost === this.host) { e = "#" + this.ID_Array[i].tooltipID; break } return void 0 == e && (e = "removed"), e }, _setPosition: function (t) { if (0 == this._isOpen && 0 == e(this._id()).css("opacity") || 1 == this.changeContentFlag) { if (!t && ("mouse" == this.position || "mouseenter" == this.position)) return; e(this._id()).css("display", "block"), this.changeContentFlag = !1, this.documentTop = e(document).scrollTop(), this.documentLeft = e(document).scrollLeft(), this.windowWidth = e(window).width(), this.windowHeight = e(window).height(), this.host_width = this.host.outerWidth(), this.host_height = this.host.outerHeight(), this.tooltip_width = e(this._id()).width(), this.tooltip_height = e(this._id()).height(), this.host_offset = this.host.offset(), this.tooltip_offset = e(this._id()).offset(), this.default_offset = 30, this.offset_horizontal = parseInt(this.left), this.offset_vertical = parseInt(this.top); var i = e(this._id() + "Arrow"), s = e(this._id() + "Main"); switch (this.arrow_size = 5, this.tooltip_main_offset = s.offset(), this.tooltip_arrow_offset, this.position) { case "top": this.tooltip_offset.left = this.host_offset.left + this.host_width / 2 - this.tooltip_width / 2 + this.offset_horizontal, this.tooltip_offset.top = this.host_offset.top - this.tooltip_height - this.arrow_size + this.offset_vertical, this._detectBrowserBounds(), this.tooltip_main_offset = s.offset(), i.removeClass(this.toThemeProperty("jqx-tooltip-arrow-l-r")), i.addClass(this.toThemeProperty("jqx-tooltip-arrow-t-b")), i.css({ "border-width": this.arrow_size + "px " + this.arrow_size + "px  0px" }), this.tooltip_arrow_offset = i.offset(), this.tooltip_arrow_offset.left = this.tooltip_main_offset.left + (s.width() / 2 - this.arrow_size), this.tooltip_arrow_offset.top = this.tooltip_main_offset.top + s.height(), i.offset({ top: this.tooltip_arrow_offset.top, left: this.tooltip_arrow_offset.left }); break; case "bottom": this.tooltip_offset.left = this.host_offset.left + this.host_width / 2 - this.tooltip_width / 2 + this.offset_horizontal, this.tooltip_offset.top = this.host_offset.top + this.host_height + this.arrow_size + this.offset_vertical, this._detectBrowserBounds(), this.tooltip_main_offset = s.offset(), i.removeClass(this.toThemeProperty("jqx-tooltip-arrow-l-r")), i.addClass(this.toThemeProperty("jqx-tooltip-arrow-t-b")), i.css({ "border-width": "0 " + this.arrow_size + "px " + this.arrow_size + "px" }), this.tooltip_arrow_offset = i.offset(), this.tooltip_arrow_offset.left = this.tooltip_main_offset.left + (s.width() / 2 - this.arrow_size), this.tooltip_arrow_offset.top = this.tooltip_main_offset.top - this.arrow_size, i.offset({ top: this.tooltip_arrow_offset.top, left: this.tooltip_arrow_offset.left }); break; case "left": this.tooltip_offset.left = -1 + this.host_offset.left - this.tooltip_width - this.arrow_size + this.offset_horizontal, this.tooltip_offset.top = this.host_offset.top + this.host_height / 2 - this.tooltip_height / 2 + this.offset_vertical, this._detectBrowserBounds(), this.tooltip_main_offset = s.offset(), i.removeClass(this.toThemeProperty("jqx-tooltip-arrow-t-b")), i.addClass(this.toThemeProperty("jqx-tooltip-arrow-l-r")), i.css({ "border-width": this.arrow_size + "px 0px " + this.arrow_size + "px " + this.arrow_size + "px" }), this.tooltip_main_offset = s.offset(), this.tooltip_arrow_offset = i.offset(), this.tooltip_arrow_offset.left = 1 + this.tooltip_main_offset.left + s.width(), this.tooltip_arrow_offset.top = this.tooltip_main_offset.top + s.height() / 2 - this.arrow_size, i.offset({ top: this.tooltip_arrow_offset.top, left: this.tooltip_arrow_offset.left }); break; case "right": this.tooltip_offset.left = this.host_offset.left + this.host_width + this.arrow_size + this.offset_horizontal, this.tooltip_offset.top = this.host_offset.top + this.host_height / 2 - this.tooltip_height / 2 + this.offset_vertical, this.tooltip_offset.top = parseInt(this.tooltip_offset.top), this._detectBrowserBounds(), this.tooltip_main_offset = s.offset(), i.removeClass(this.toThemeProperty("jqx-tooltip-arrow-t-b")), i.addClass(this.toThemeProperty("jqx-tooltip-arrow-l-r")), i.css({ "border-width": this.arrow_size + "px " + this.arrow_size + "px " + this.arrow_size + "px 0px" }), this.tooltip_arrow_offset = i.offset(), this.tooltip_arrow_offset.left = this.tooltip_main_offset.left - this.arrow_size, this.tooltip_arrow_offset.top = this.tooltip_main_offset.top + s.height() / 2 - this.arrow_size, i.offset({ top: this.tooltip_arrow_offset.top, left: this.tooltip_arrow_offset.left }); break; case "top-left": this.tooltip_offset.left = this.host_offset.left + this.default_offset - this.tooltip_width + this.offset_horizontal, this.tooltip_offset.top = this.host_offset.top - this.tooltip_height - this.arrow_size + this.offset_vertical, this._detectBrowserBounds(), this.tooltip_main_offset = s.offset(), i.removeClass(this.toThemeProperty("jqx-tooltip-arrow-l-r")), i.addClass(this.toThemeProperty("jqx-tooltip-arrow-t-b")), i.css({ "border-width": this.arrow_size + "px " + this.arrow_size + "px  0px" }), this.tooltip_arrow_offset = i.offset(), this.tooltip_arrow_offset.left = this.tooltip_main_offset.left + s.width() - 6 * this.arrow_size, this.tooltip_arrow_offset.top = this.tooltip_main_offset.top + s.height(), i.offset({ top: this.tooltip_arrow_offset.top, left: this.tooltip_arrow_offset.left }); break; case "bottom-left": this.tooltip_offset.left = this.host_offset.left + this.default_offset - this.tooltip_width + this.offset_horizontal, this.tooltip_offset.top = this.host_offset.top + this.host_height + this.arrow_size + this.offset_vertical, this._detectBrowserBounds(), this.tooltip_main_offset = s.offset(), i.removeClass(this.toThemeProperty("jqx-tooltip-arrow-l-r")), i.addClass(this.toThemeProperty("jqx-tooltip-arrow-t-b")), i.css({ "border-width": "0 " + this.arrow_size + "px " + this.arrow_size + "px" }), this.tooltip_arrow_offset = i.offset(), this.tooltip_arrow_offset.left = this.tooltip_main_offset.left + s.width() - 6 * this.arrow_size, this.tooltip_arrow_offset.top = this.tooltip_main_offset.top - this.arrow_size, i.offset({ top: this.tooltip_arrow_offset.top, left: this.tooltip_arrow_offset.left }); break; case "top-right": this.tooltip_offset.left = this.host_offset.left + this.host_width - this.default_offset + this.offset_horizontal, this.tooltip_offset.top = this.host_offset.top - this.tooltip_height - this.arrow_size + this.offset_vertical, this._detectBrowserBounds(), this.tooltip_main_offset = s.offset(), i.removeClass(this.toThemeProperty("jqx-tooltip-arrow-l-r")), i.addClass(this.toThemeProperty("jqx-tooltip-arrow-t-b")), i.css({ "border-width": this.arrow_size + "px " + this.arrow_size + "px  0px" }), this.tooltip_arrow_offset = i.offset(), this.tooltip_arrow_offset.left = this.tooltip_main_offset.left + 4 * this.arrow_size, this.tooltip_arrow_offset.top = this.tooltip_main_offset.top + s.height(), i.offset({ top: this.tooltip_arrow_offset.top, left: this.tooltip_arrow_offset.left }); break; case "bottom-right": this.tooltip_offset.left = this.host_offset.left + this.host_width - this.default_offset + this.offset_horizontal, this.tooltip_offset.top = this.host_offset.top + this.host_height + this.arrow_size + this.offset_vertical, this._detectBrowserBounds(), this.tooltip_main_offset = s.offset(), i.removeClass(this.toThemeProperty("jqx-tooltip-arrow-l-r")), i.addClass(this.toThemeProperty("jqx-tooltip-arrow-t-b")), i.css({ "border-width": "0 " + this.arrow_size + "px " + this.arrow_size + "px" }), this.tooltip_arrow_offset = i.offset(), this.tooltip_arrow_offset.left = this.tooltip_main_offset.left + 4 * this.arrow_size, this.tooltip_arrow_offset.top = this.tooltip_main_offset.top - this.arrow_size, i.offset({ top: this.tooltip_arrow_offset.top, left: this.tooltip_arrow_offset.left }); break; case "absolute": e(this._id()).offset({ top: this.absolutePositionY, left: this.absolutePositionX }), i.css({ "border-width": "0px" }); break; case "mouse": var r = this; if (0 == this._isTouchDevice) switch (this.trigger) { case "hover": this.mouseHoverTimeout && clearTimeout(this.mouseHoverTimeout), this.mouseHoverTimeout = setTimeout(function () { r.tooltip_offset.left = t.pageX + 10, r.tooltip_offset.top = t.pageY + 10, r._detectBrowserBounds() }, this.showDelay); break; case "click": this.tooltip_offset.left = t.pageX + 10, this.tooltip_offset.top = t.pageY + 10, this._detectBrowserBounds() } else { var o = t.pageX, a = t.pageY; if (t.originalEvent) { n = null; if (t.originalEvent.touches && t.originalEvent.touches.length) n = t.originalEvent.touches[0]; else if (t.originalEvent.changedTouches && t.originalEvent.changedTouches.length) var n = t.originalEvent.changedTouches[0]; void 0 != n && (o = n.pageX, a = n.pageY) } this.tooltip_offset.left = o + 10, this.tooltip_offset.top = a + 10, this._detectBrowserBounds() } i.css({ "border-width": "0px" }); break; case "mouseenter": var l = { top: t.pageY, left: t.pageX }; l.top < this.host_offset.top + 10 && l.top > this.host_offset.top - 10 ? (this.tooltip_offset.left = l.left - this.tooltip_width / 2, this.tooltip_offset.top = this.host_offset.top - this.tooltip_height - this.arrow_size, this._detectBrowserBounds(), this.tooltip_main_offset = s.offset(), i.removeClass(this.toThemeProperty("jqx-tooltip-arrow-l-r")), i.addClass(this.toThemeProperty("jqx-tooltip-arrow-t-b")), i.css({ "border-width": this.arrow_size + "px " + this.arrow_size + "px  0px" }), this.tooltip_arrow_offset = i.offset(), this.tooltip_arrow_offset.left = this.tooltip_main_offset.left + (s.width() / 2 - this.arrow_size), this.tooltip_arrow_offset.top = this.tooltip_main_offset.top + s.height(), i.offset({ top: this.tooltip_arrow_offset.top, left: this.tooltip_arrow_offset.left })) : l.top < this.host_offset.top + this.host_height + 10 && l.top > this.host_offset.top + this.host_height - 10 ? (this.tooltip_offset.left = l.left - this.tooltip_width / 2, this.tooltip_offset.top = this.host_offset.top + this.host_height + this.arrow_size, this._detectBrowserBounds(), this.tooltip_main_offset = s.offset(), i.removeClass(this.toThemeProperty("jqx-tooltip-arrow-l-r")), i.addClass(this.toThemeProperty("jqx-tooltip-arrow-t-b")), i.css({ "border-width": "0 " + this.arrow_size + "px " + this.arrow_size + "px" }), this.tooltip_arrow_offset = i.offset(), this.tooltip_arrow_offset.left = this.tooltip_main_offset.left + (s.width() / 2 - this.arrow_size), this.tooltip_arrow_offset.top = this.tooltip_main_offset.top - this.arrow_size, i.offset({ top: this.tooltip_arrow_offset.top, left: this.tooltip_arrow_offset.left })) : l.left < this.host_offset.left + 10 && l.left > this.host_offset.left - 10 ? (this.tooltip_offset.left = this.host_offset.left - this.tooltip_width - this.arrow_size, this.tooltip_offset.top = l.top - this.tooltip_height / 2, this._detectBrowserBounds(), this.tooltip_main_offset = s.offset(), i.removeClass(this.toThemeProperty("jqx-tooltip-arrow-t-b")), i.addClass(this.toThemeProperty("jqx-tooltip-arrow-l-r")), i.css({ "border-width": this.arrow_size + "px 0px " + this.arrow_size + "px " + this.arrow_size + "px" }), this.tooltip_main_offset = s.offset(), this.tooltip_arrow_offset = i.offset(), this.tooltip_arrow_offset.left = this.tooltip_main_offset.left + s.width(), this.tooltip_arrow_offset.top = this.tooltip_main_offset.top + s.height() / 2 - this.arrow_size, i.offset({ top: this.tooltip_arrow_offset.top, left: this.tooltip_arrow_offset.left })) : l.left < this.host_offset.left + this.host_width + 10 && l.left > this.host_offset.left + this.host_width - 10 && (this.tooltip_offset.left = this.host_offset.left + this.host_width + this.arrow_size, this.tooltip_offset.top = l.top - this.tooltip_height / 2, this._detectBrowserBounds(), this.tooltip_main_offset = s.offset(), i.removeClass(this.toThemeProperty("jqx-tooltip-arrow-t-b")), i.addClass(this.toThemeProperty("jqx-tooltip-arrow-l-r")), i.css({ "border-width": this.arrow_size + "px " + this.arrow_size + "px " + this.arrow_size + "px 0px" }), this.tooltip_main_offset = s.offset(), this.tooltip_arrow_offset = i.offset(), this.tooltip_arrow_offset.left = this.tooltip_main_offset.left - this.arrow_size, this.tooltip_arrow_offset.top = this.tooltip_main_offset.top + s.height() / 2 - this.arrow_size, i.offset({ top: this.tooltip_arrow_offset.top, left: this.tooltip_arrow_offset.left })); break; case "default": this.tooltip_offset.left = this.host_offset.left + this.host_width - this.default_offset, this.tooltip_offset.top = this.host_offset.top + this.host_height + this.arrow_size, this._detectBrowserBounds(), this.tooltip_main_offset = s.offset(), i.removeClass(this.toThemeProperty("jqx-tooltip-arrow-l-r")), i.addClass(this.toThemeProperty("jqx-tooltip-arrow-t-b")), i.css({ "border-width": "0 " + this.arrow_size + "px " + this.arrow_size + "px" }), this.tooltip_arrow_offset = i.offset(), this.tooltip_arrow_offset.left = this.tooltip_main_offset.left + 4 * this.arrow_size, this.tooltip_arrow_offset.top = this.tooltip_main_offset.top - this.arrow_size, i.offset({ top: this.tooltip_arrow_offset.top, left: this.tooltip_arrow_offset.left }) } } }, _setContent: function () { e(this._id() + "Text").html(this.content) }, opened: function () { return this._isOpen && "block" == this.host.css("display") && "visible" == this.host.css("visibility") }, _animateShow: function () { this._closeAll(), clearTimeout(this.autoHideTimeout); var t = new Number(e(this._id()).css("opacity")).toFixed(2); if (0 == this._isOpen && 0 == t) { var i = this, s = e(this._id()); if (s.css("visibility", "visible"), s.css("display", "block"), s.stop(), s.css("opacity", 0), this.opening && !1 === this.opening(this)) return; s.animate({ opacity: this.opacity }, this.animationShowDelay, function () { i._raiseEvent("0"), i._isOpen = !0; e.data(document.body, "_openedTooltip" + i.name); i.openedTooltip = i, e.data(document.body, "_openedTooltip" + i.name, i), i.autoHideTimeout && clearTimeout(i.autoHideTimeout), i.autoHideDelay > 0 && !0 === i.autoHide && (i.autoHideTimeout = setTimeout(function () { i._autoHide() }, i.autoHideDelay)) }) } }, _trigger: function () { if ("removed" != this._id()) { this._enterFlag, this._leaveFlag; var t = this; if (0 == this._isTouchDevice) switch (this.trigger) { case "hover": "mouse" == this.position ? (this.addHandler(this.host, "mousemove.tooltip", function (e) { 1 == t._enterFlag && (t._raiseEvent("2"), t._setPosition(e), clearTimeout(t.hoverShowTimeout), t.hoverShowTimeout = setTimeout(function () { t._animateShow(), t._enterFlag = 0 }, t.showDelay)) }), this.addHandler(this.host, "mouseenter.tooltip", function () { 0 != t._leaveFlag && (t._enterFlag = 1) }), this.addHandler(this.host, "mouseleave.tooltip", function (i) { t._leaveFlag = 1, clearTimeout(t.hoverShowTimeout); var s = e(t._id()).offset(), r = e(t._id()).width(), o = e(t._id()).height(); (parseInt(i.pageX) < parseInt(s.left) || parseInt(i.pageX) > parseInt(s.left) + r) && t.close(), (parseInt(i.pageY) < parseInt(s.top) || parseInt(i.pageY) > parseInt(s.top) + o) && t.close() }), this.addHandler(e(this._id()), "mouseleave.tooltip", function (e) { t._checkBoundariesAuto(e), 0 != t._clickFlag && 0 != t._autoFlag ? t._leaveFlag = 0 : (t._leaveFlag = 1, t.close()) })) : (this.addHandler(this.host, "mouseenter.tooltip", function (e) { clearTimeout(t.hoverShowTimeout), t.hoverShowTimeout = setTimeout(function () { t._raiseEvent("2"), t._setPosition(e), t._animateShow() }, t.showDelay) }), this.addHandler(this.host, "mouseleave.tooltip", function (i) { if (t._leaveFlag = 1, clearTimeout(t.hoverShowTimeout), t.autoHide) { var s = i.pageX, r = i.pageY, o = e(t._id()).offset(), a = o.left, n = o.top, l = e(t._id()).width(), h = e(t._id()).height(); (parseInt(s) < parseInt(a) || parseInt(s) > parseInt(a) + l || parseInt(r) < parseInt(n) || parseInt(r) > parseInt(n) + h) && t.close() } }), this.addHandler(e(this._id()), "mouseleave.tooltip", function (e) { t._checkBoundariesAuto(e), 0 != t._clickFlag && 0 != t._autoFlag ? t._leaveFlag = 0 : (t._leaveFlag = 1, t.autoHide && t.close()) })); break; case "click": this.addHandler(this.host, "click.tooltip", function (e) { "mouseenter" == t.position && (t.position = "mouse"), t._raiseEvent("2"), t._setPosition(e), t._animateShow() }) } else "none" != this.trigger && this.addHandler(this.host, "touchstart.tooltip", function (e) { "mouseenter" == t.position && (t.position = "mouse"), t._raiseEvent("2"), t._setPosition(e), t._animateShow() }) } }, _autoHide: function () { var t = this, i = new Number(e(this._id()).css("opacity")).toFixed(2); 1 == this.autoHide && 1 == this._isOpen && i >= this.opacity && (t._raiseEvent("3"), e(t._id()).animate({ opacity: 0 }, t.animationHideDelay, function () { e(t._id()).css("visibility", "hidden"), e(t._id()).css("display", "none"), t._raiseEvent("1"), t._isOpen = !1 })) }, _clickHide: function () { var t = this; this.addHandler(e(this._id()), "click.tooltip", function (e) { t._checkBoundariesClick(e), t.close() }) }, _setSize: function () { e(this._id()).css({ width: this.width, height: this.height }) }, resize: function () { this._setSize() }, _setTheme: function () { var t = this._id(), i = e(t + "Main"), s = e(t + "Text"), r = e(t + "Arrow"); i.addClass(this.toThemeProperty("jqx-widget")), s.addClass(this.toThemeProperty("jqx-widget")), r.addClass(this.toThemeProperty("jqx-widget")), i.addClass(this.toThemeProperty("jqx-fill-state-normal")), s.addClass(this.toThemeProperty("jqx-fill-state-normal")), r.addClass(this.toThemeProperty("jqx-fill-state-normal")), e(t).addClass(this.toThemeProperty("jqx-tooltip")), e(t).addClass(this.toThemeProperty("jqx-popup")), i.addClass(this.toThemeProperty("jqx-tooltip-main")), s.addClass(this.toThemeProperty("jqx-tooltip-text")), r.addClass(this.toThemeProperty("jqx-tooltip-arrow")) }, _initialPosition: function () { var e = this.position; this.position = "default", this._setPosition(), this.position = e }, _detectBrowserBounds: function () { var t = this._id(); this.enableBrowserBoundsDetection ? this.tooltip_offset.top < this.documentTop && this.tooltip_offset.left < 0 ? e(t).offset({ top: this.documentTop, left: this.documentLeft }) : this.tooltip_offset.top < this.documentTop && this.tooltip_offset.left + this.tooltip_width > this.windowWidth + this.documentLeft ? e(t).offset({ top: this.documentTop, left: this.windowWidth + this.documentLeft - this.tooltip_width }) : this.tooltip_offset.top < this.documentTop ? e(t).offset({ top: this.documentTop, left: this.tooltip_offset.left }) : this.tooltip_offset.top + this.tooltip_height > this.windowHeight + this.documentTop && this.tooltip_offset.left < 0 ? e(t).offset({ top: this.windowHeight + this.documentTop - this.tooltip_height, left: this.documentLeft }) : this.tooltip_offset.top + this.tooltip_height > this.windowHeight + this.documentTop && this.tooltip_offset.left + this.tooltip_width > this.windowWidth + this.documentLeft ? e(t).offset({ top: this.windowHeight + this.documentTop - this.tooltip_height, left: this.windowWidth + this.documentLeft - this.tooltip_width }) : this.tooltip_offset.top + this.tooltip_height > this.windowHeight + this.documentTop ? e(t).offset({ top: this.windowHeight + this.documentTop - this.tooltip_height, left: this.tooltip_offset.left }) : this.tooltip_offset.left < 0 ? e(t).offset({ top: this.tooltip_offset.top, left: this.documentLeft }) : this.tooltip_offset.left + this.tooltip_width > this.windowWidth + this.documentLeft ? e(t).offset({ top: this.tooltip_offset.top, left: this.windowWidth + this.documentLeft - this.tooltip_width }) : e(t).offset({ top: this.tooltip_offset.top, left: this.tooltip_offset.left }) : e(t).offset({ top: this.tooltip_offset.top, left: this.tooltip_offset.left }) }, _checkBoundaries: function (e) { return e.pageX >= this.host_offset.left && e.pageX <= this.host_offset.left + this.host_width && e.pageY >= this.host_offset.top && e.pageY <= this.host_offset.top + this.host_height }, _checkBoundariesClick: function (e) { this._checkBoundaries(e) ? this._clickFlag = 1 : this._clickFlag = 0 }, _checkBoundariesAuto: function (e) { this._checkBoundaries(e) ? this._autoFlag = 1 : this._autoFlag = 0 }, _removeHandlers: function () { this.removeHandler(this.host, "mouseenter.tooltip"), this.removeHandler(this.host, "mousemove.tooltip"), this.removeHandler(this.host, "mouseleave.tooltip"), this.removeHandler(this.host, "click.tooltip"), this.removeHandler(this.host, "touchstart.tooltip"), this.removeHandler(e(this._id()), "click.tooltip"), this.removeHandler(e(this._id()), "mouseleave.tooltip") }, _closeAll: function () { for (var t = this.ID_Array.length, i = 0; i < t; i++) { var s = "#" + this.ID_Array[i].tooltipID; s != this._id() && (e(s).css({ opacity: 0, visibility: "hidden", display: "none" }), this._isOpen = !1) } } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxCalendar", "", {}), e.extend(e.jqx._jqxCalendar.prototype, { defineInstance: function () { this.disabled = !1, this.multipleMonthRows = 1, this.multipleMonthColumns = 1, void 0 == this.minDate && (this.minDate = e.jqx._jqxDateTimeInput.getDateTime(new Date), this.minDate._setYear(1900), this.minDate._setMonth(1), this.minDate._setDay(1), this.minDate._setHours(0), this.minDate._setMinutes(0), this.minDate._setSeconds(0), this.minDate._setMilliseconds(0)), void 0 == this.maxDate && (this.maxDate = e.jqx._jqxDateTimeInput.getDateTime(new Date), this.maxDate._setYear(2100), this.maxDate._setMonth(1), this.maxDate._setDay(1), this.maxDate._setHours(0), this.maxDate._setMinutes(0), this.maxDate._setSeconds(0), this.maxDate._setMilliseconds(0)), this.min = new Date(1900, 0, 1), this.max = new Date(2100, 0, 1), this.navigationDelay = 400, void 0 === this.stepMonths && (this.stepMonths = 1), this.width = null, this.height = null, void 0 === this.value && (this.value = e.jqx._jqxDateTimeInput.getDateTime(new Date), this.value._setHours(0), this.value._setMinutes(0), this.value._setSeconds(0), this.value._setMilliseconds(0)), this.firstDayOfWeek = 0, this.showWeekNumbers = !1, this.showDayNames = !0, this.enableWeekend = !1, this.enableOtherMonthDays = !0, this.showOtherMonthDays = !0, this.rowHeaderWidth = 25, this.columnHeaderHeight = 20, this.titleHeight = 25, this.dayNameFormat = "firstTwoLetters", this.monthNameFormat = "default", this.titleFormat = ["MMMM yyyy", "yyyy", "yyyy", "yyyy"], this.enableViews = !0, void 0 === this.readOnly && (this.readOnly = !1), void 0 == this.culture && (this.culture = "default"), void 0 == this.enableFastNavigation && (this.enableFastNavigation = !0), void 0 == this.enableHover && (this.enableHover = !0), void 0 == this.enableAutoNavigation && (this.enableAutoNavigation = !0), void 0 === this.enableTooltips && (this.enableTooltips = !1), this.backText = "Back", this.forwardText = "Forward", void 0 === this.specialDates && (this.specialDates = new Array), this.keyboardNavigation = !0, this.selectionMode = "default", this.selectableDays = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], this.todayString = "Today", this.clearString = "Clear", this.showFooter = !1, this.selection = { from: null, to: null }, this.canRender = !0, this._checkForHiddenParent = !0, this.height = null, this.rtl = !1, this.view = "month", this.views = ["month", "year", "decade"], this.changing = null, this.change = null, this.localization = { backString: "Back", forwardString: "Forward", todayString: "Today", clearString: "Clear", calendar: { name: "Gregorian_USEnglish", "/": "/", ":": ":", firstDay: 0, days: { names: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], namesAbbr: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], namesShort: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"] }, months: { names: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", ""], namesAbbr: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", ""] }, AM: ["AM", "am", "AM"], PM: ["PM", "pm", "PM"], eras: [{ name: "A.D.", start: null, offset: 0 }], twoDigitYearMax: 2029, patterns: { d: "M/d/yyyy", D: "dddd, MMMM dd, yyyy", t: "h:mm tt", T: "h:mm:ss tt", f: "dddd, MMMM dd, yyyy h:mm tt", F: "dddd, MMMM dd, yyyy h:mm:ss tt", M: "MMMM dd", Y: "yyyy MMMM", S: "yyyy'-'MM'-'dd'T'HH':'mm':'ss", ISO: "yyyy-MM-dd hh:mm:ss" } } }, this.events = ["backButtonClick", "nextButtonClick", "valuechanged", "cellMouseDown", "cellMouseUp", "cellSelected", "cellUnselected", "change", "viewChange"] }, createInstance: function (t) { this.setCalendarSize(), "" === this.element.id && (this.element.id = e.jqx.utilities.createId()), this.element.innerHTML = "", this.host.attr("data-role", "calendar"); this.element.id; var i = this; if (this.propertyChangeMap.width = function (e, t, s, r) { i.setCalendarSize() }, this.propertyChangeMap.height = function (e, t, s, r) { i.setCalendarSize() }, e.global && e.global.preferCulture(this.culture), "default" != this.culture) { if (e.global) e.global.preferCulture(this.culture), this.localization.calendar = e.global.culture.calendar; else if (Globalize) { var s = Globalize.culture(this.culture); this.localization.calendar = s.calendar } this.firstDayOfWeek = this.localization.calendar.firstDay } "Back" != this.localization.backString && (this.backText = this.localization.backString), "Forward" != this.localization.forwardString && (this.forwardText = this.localization.forwardString), "Today" != this.localization.todayString && this.localization.todayString && (this.todayString = this.localization.todayString), "Clear" != this.localization.clearString && this.localization.clearString && (this.clearString = this.localization.clearString), this.setMaxDate(this.max, !1), this.setMinDate(this.min, !1), this.host.attr("tabIndex") || this.host.attr("tabIndex", 0), this.host.css("outline", "none"), this.host.addClass(this.toThemeProperty("jqx-calendar")), this.host.addClass(this.toThemeProperty("jqx-widget")), this.host.addClass(this.toThemeProperty("jqx-widget-content")), this.host.addClass(this.toThemeProperty("jqx-rc-all")), this._addInput(), -1 == this.views.indexOf("month") && (this.view = "year"), -1 == this.views.indexOf("year") && -1 == this.views.indexOf("month") && (this.view = "decade"), this.addHandler(this.host, "keydown", function (e) { var t = !0; return i.keyboardNavigation && void 0 != i._handleKey && ((t = i._handleKey(e)) || (e.stopPropagation && e.stopPropagation(), e.preventDefault && e.preventDefault())), t }); var r = !1, o = this, a = !1; null != i.width && -1 != i.width.toString().indexOf("%") && (a = !0), null != i.height && -1 != i.height.toString().indexOf("%") && (a = !0), e.jqx.utilities.resize(this.host, function () { var e = o.host.find("#View" + i.element.id); r ? o.refreshTitle(e) : (r = !0, o.render()), a && (i.refreshTimer && clearTimeout(i.refreshTimer), i.refreshTimer = setTimeout(function () { i.refreshControl() }, 1)) }, !1, this._checkForHiddenParent); this.propertyChangeMap.disabled = function (e, t, s, r) { r ? e.host.addClass(i.toThemeProperty("jqx-fill-state-disabled")) : e.host.removeClass(i.toThemeProperty("jqx-fill-state-disabled")), i.refreshControl() } }, _addInput: function () { var t = this.host.attr("name"); this.input = e("<input type='hidden'/>"), this.host.append(this.input), t && this.input.attr("name", t), this.input.val(this.getDate().toString()) }, setCalendarSize: function () { null != this.width && -1 != this.width.toString().indexOf("px") ? this.host.width(this.width) : void 0 == this.width || isNaN(this.width) || this.host.width(this.width), null != this.width && -1 != this.width.toString().indexOf("%") && this.host.css("width", this.width), null != this.height && -1 != this.height.toString().indexOf("px") ? this.host.height(this.height) : void 0 == this.height || isNaN(this.height) || this.host.height(this.height), null != this.height && -1 != this.height.toString().indexOf("%") && this.host.css("height", this.height) }, _getYearAndMonthPart: function (e) { return e ? new Date(e.getFullYear(), e.getMonth(), 1) : new Date(1900, 0, 1) }, _handleKey: function (t) { if (this.readOnly) return !0; var i = t.keyCode, s = this._getSelectedDate(); if (void 0 == s) return !0; if (t.altKey) return !0; if (this._animating) return !1; if ("month" != this.view && 13 == i) { var r = this._getSelectedCell(); this._setDateAndSwitchViews(r, t, "keyboard") } if ("year" == this.view) { var o = s.getMonth(), a = this._getYearAndMonthPart(this.getMinDate()), n = this._getYearAndMonthPart(this.getMaxDate()); switch (i) { case 37: return 0 == o ? (l = new Date(s.getFullYear() - 1, 11, 1)) >= a ? (this.selectedDate = l, this.navigateBackward()) : this.selectedDate != a && (this.selectedDate = a, this.navigateBackward()) : (l = new Date(s.getFullYear(), o - 1, 1)) >= a && this._selectDate(l, "key"), !1; case 38: return (l = new Date(s.getFullYear(), o - 4, 1)) < a && (l = a), o - 4 < 0 ? (this.selectedDate = l, this.navigateBackward()) : this._selectDate(l, "key"), !1; case 40: return (l = new Date(s.getFullYear(), o + 4, 1)) > n && (l = n), o + 4 > 11 ? (this.selectedDate = l, this.navigateForward()) : this._selectDate(l, "key"), !1; case 39: if (11 == o) (l = new Date(s.getFullYear() + 1, 0, 1)) <= n ? (this.selectedDate = l, this.navigateForward()) : this.selectedDate != n && (this.selectedDate = n, this.navigateForward()); else { var l = new Date(s.getFullYear(), o + 1, 1); l <= n && this._selectDate(l, "key") } return !1 } return !0 } if ("decade" == this.view) { var h = this._renderStartDate.getFullYear(), d = this._renderEndDate.getFullYear(), c = s.getFullYear(), u = this.getMinDate().getFullYear(), p = this.getMaxDate().getFullYear(); switch (i) { case 37: return c - 1 >= u && (c <= h ? (this.selectedDate = new Date(c - 1, s.getMonth(), 1), this.navigateBackward()) : this._selectDate(new Date(c - 1, s.getMonth(), 1), "key")), !1; case 38: var m = c - 4; return c - 4 < u && (m = u), m < h ? (this.selectedDate = new Date(m, s.getMonth(), 1), this.navigateBackward()) : this._selectDate(new Date(m, s.getMonth(), 1), "key"), !1; case 40: return (m = c + 4) > p && (m = p), m > d ? (this.selectedDate = new Date(m, s.getMonth(), 1), this.navigateForward()) : this._selectDate(new Date(m, s.getMonth(), 1), "key"), !1; case 39: return c + 1 <= p && (c == d ? (this.selectedDate = new Date(c + 1, s.getMonth(), 1), this.navigateForward()) : this._selectDate(new Date(c + 1, s.getMonth(), 1), "key")), !1 } return !0 } var g = new e.jqx._jqxDateTimeInput.getDateTime(s), f = this.getViewStart(), v = this.getViewEnd(), x = e.data(this.element, "View" + this.element.id); if (void 0 == x || null == x) return !0; if (36 == i) return g._setDay(1), !this._isDisabled(g.dateTime) && (this._selectDate(g.dateTime, "key"), !1); if (35 == i) { var w = this.value._daysInMonth(this.value.year, this.value.month); return g._setDay(w), this._isDisabled(g.dateTime) ? !1 : (this._selectDate(g.dateTime, "key"), !1) } var b = 1; if (t.ctrlKey && (b = 12), 34 == i) { if (_ = this.navigateForward(b)) { if (g._addMonths(b), this._isDisabled(g.dateTime)) return !1; this._selectDate(g.dateTime, "key") } return !1 } if (33 == i) { if (_ = this.navigateBackward(b)) { if (g._addMonths(-b), this._isDisabled(g.dateTime)) return !1; this._selectDate(g.dateTime, "key") } return !1 } if (38 == i) { if (g._addDays(-7), g.dateTime < this.getMinDate()) return !1; if (g.dateTime < f && !(_ = this.navigateBackward())) return !1; if (this._isDisabled(g.dateTime)) return !1; this._selectDate(g.dateTime, "key"); for (y = 0; y < x.cells.length; y++) { j = (r = x.cells[y]).getDate(); if (r.isOtherMonth && r.isSelected && j <= g.dateTime) { this.value.day = j.getDate(), this.navigateBackward(), this._selectDate(g.dateTime, "key"); break } } return !1 } if (40 == i) { if (g._addDays(7), g.dateTime > this.getMaxDate()) return !1; if (g.dateTime > v && !(_ = this.navigateForward())) return !1; if (this._isDisabled(g.dateTime)) return !1; this._selectDate(g.dateTime, "key"); for (y = 0; y < x.cells.length; y++) { j = (r = x.cells[y]).getDate(); if (r.isOtherMonth && r.isSelected && j >= g.dateTime) { this.value.day = j.getDate(), this.navigateForward(), this._selectDate(g.dateTime, "key"); break } } return !1 } if (37 == i) { if (g._addDays(-1), g.dateTime < this.getMinDate()) return !1; if (g.dateTime < f && !(_ = this.navigateBackward())) return !1; if (this._isDisabled(g.dateTime)) return !1; this._selectDate(g.dateTime, "key"); for (y = 0; y < x.cells.length; y++) { j = (r = x.cells[y]).getDate(); if (r.isOtherMonth && r.isSelected && j <= g.dateTime) { if (g.dateTime < this.getMinDate() || g.dateTime > this.getMaxDate()) return !1; if (this._isDisabled(g.dateTime)) return !1; this.navigateBackward(), this._selectDate(g.dateTime, "key"); break } } return !1 } if (39 == i) { if (g._addDays(1), g.dateTime > this.getMaxDate()) return !1; if (g.dateTime > v) { var _ = this.navigateForward(); if (!_) return !1 } if (this._isDisabled(g.dateTime)) return !1; this._selectDate(g.dateTime, "key"); for (var y = 0; y < x.cells.length; y++) { var j = (r = x.cells[y]).getDate(); if (r.isOtherMonth && r.isSelected && j >= g.dateTime) { if (g.dateTime < this.getMinDate() || g.dateTime > this.getMaxDate()) return !1; this.navigateForward(), this._selectDate(g.dateTime, "key"); break } } return !1 } return !0 }, render: function () { if (this.canRender) { this.host.children().remove(); var e = this._renderSingleCalendar("View" + this.element.id); this.host.append(e) } }, addSpecialDate: function (e, t, i) { if (1 == this.multipleMonthRows && 1 == this.multipleMonthColumns) { var s = this.specialDates.length; this.specialDates[s] = { Date: e, Class: t, Tooltip: i }, this.refreshControl() } }, refresh: function (e) { this.render() }, invalidate: function () { this.refreshControl() }, refreshControl: function () { 1 == this.multipleMonthRows && 1 == this.multipleMonthColumns && this.refreshSingleCalendar("View" + this.element.id, null) }, getViewStart: function () { var e = this.getVisibleDate(); return this.getFirstDayOfWeek(e).dateTime }, getViewEnd: function () { var t = this.getViewStart(), i = new e.jqx._jqxDateTimeInput.getDateTime(t); return i._addDays(41), i.dateTime }, refreshSingleCalendar: function (e, t) { if (this.canRender) { var i = this.host.find("#" + e), s = this.getVisibleDate(), r = this.getFirstDayOfWeek(s); this.refreshCalendarCells(i, r, e), this.refreshTitle(i), this.refreshRowHeader(i, e), void 0 != this.selectedDate && this._selectDate(this.selectedDate); var o = this.host.height() - this.titleHeight - this.columnHeaderHeight; this.showDayNames || (o = this.host.height() - this.titleHeight), this.showFooter && (o -= 20); var a = i.find("#cellsTable" + e), n = i.find("#calendarRowHeader" + e); a.height(o), n.height(o) } }, refreshRowHeader: function (t, i) { if (this.showWeekNumbers) { var s = this.getVisibleDate(), r = this.getFirstDayOfWeek(s), o = (r.dayOfWeek, this.getWeekOfYear(r)), a = new e.jqx._jqxDateTimeInput.getDateTime(new Date(r.dateTime)); a._addDays(5), a.dayOfWeek = a.dateTime.getDay(); this.getWeekOfYear(a); var n = this.rowHeader.find("table"); n.width(this.rowHeaderWidth); for (var l = r, h = new Array, d = 0; d < 6; d++) { o.toString(); var c = new e.jqx._jqxCalendar.cell(l.dateTime), u = d + 1 + this.element.id, p = e(n[0].rows[d].cells[0]); c.element = p, c.row = d, c.column = 0; var m = p.find("#headerCellContent" + u); m.addClass(this.toThemeProperty("jqx-calendar-row-cell")), m[0].innerHTML = o, h[d] = c, l = new e.jqx._jqxDateTimeInput.getDateTime(new Date(l._addWeeks(1))), o = this.getWeekOfYear(l) } var g = e.data(this.element, t[0].id); g.rowCells = h, this._refreshOtherMonthRows(g, i) } }, _refreshOtherMonthRows: function (e, t) { if (!this.showOtherMonthDays) { this._displayLastRow(!0, t), this._displayFirstRow(!0, t); for (var i = !1, s = !1, r = 0; r < e.cells.length; r++) { var o = e.cells[r]; o.isVisible && r < 7 ? i = !0 : o.isVisible && r >= e.cells.length - 7 && (s = !0) } i || this._displayFirstRow(!1, t), s || this._displayLastRow(!1, t) } }, _displayLastRow: function (t, i) { var s = this.host.find("#" + i), r = s.find("#calendarRowHeader" + s[0].id).find("table"), o = null; if (this.showWeekNumbers && r[0].cells) o = e(r[0].rows[5]); var a = e(s.find("#cellTable" + s[0].id)[0].rows[5]); t ? (this.showWeekNumbers && o && o.css("display", "table-row"), a.css("display", "table-row")) : (this.showWeekNumbers && o && o.css("display", "none"), a.css("display", "none")) }, _displayFirstRow: function (t, i) { var s = this.host.find("#" + i), r = s.find("#calendarRowHeader" + s[0].id).find("table"), o = null; if (this.showWeekNumbers && r[0].cells) o = e(r[0].rows[0]); var a = e(s.find("#cellTable" + s[0].id)[0].rows[0]); t ? (this.showWeekNumbers && o && o.css("display", "table-row"), a.css("display", "table-row")) : (this.showWeekNumbers && o && o.css("display", "none"), a.css("display", "none")) }, _renderSingleCalendar: function (t, i) { if (this.canRender) { var s = this.host.find("#" + t.toString()); null != s && s.remove(); var r = e("<div id='" + t.toString() + "'></div>"), o = this.getVisibleDate(), a = this.getFirstDayOfWeek(o), n = new e.jqx._jqxDateTimeInput.getDateTime(a.dateTime); n._addMonths(1); var l = e.jqx._jqxCalendar.monthView(a, n, null, null, null, r); void 0 == i || null == i ? (this.host.append(r), void 0 == this.height || isNaN(this.height) ? null != this.height && -1 != this.height.toString().indexOf("px") && r.height(this.height) : r.height(this.height), void 0 == this.width || isNaN(this.width) ? null != this.width && -1 != this.width.toString().indexOf("px") && r.width(this.width) : r.width(this.width), null != this.width && -1 != this.width.toString().indexOf("%") && r.width("100%"), null != this.height && -1 != this.height.toString().indexOf("%") && r.height("100%")) : i.append(r), e.data(this.element, t, l); var h = this.host.height() - this.titleHeight - this.columnHeaderHeight; this.showDayNames || (h = this.host.height() - this.titleHeight), this.showFooter && (h -= 20), this.rowHeaderWidth < 0 && (this.rowHeaderWidth = 0), this.columnHeaderHeight < 0 && (this.columnHeaderHeight = 0), this.titleHeight < 0 && (this.titleHeight = 0); var d = this.rowHeaderWidth, c = this.columnHeaderHeight; this.showWeekNumbers || (d = 0), this.showDayNames || (c = 0); var u = "<div style='height:" + this.titleHeight + "px;'><table role='grid' style='margin: 0px; width: 100%; height: 100%; border-spacing: 0px;' cellspacing='0' cellpadding='0'><tr role='row' id='calendarTitle' width='100%'><td role='gridcell' NOWRAP id='leftNavigationArrow'></td><td aria-live='assertive' aria-atomic='true' role='gridcell' align='center' NOWRAP id='calendarTitleHeader'></td><td role='gridcell' NOWRAP id='rightNavigationArrow'></td></tr></table></div>", p = "<table role='grid' class='" + this.toThemeProperty("jqx-calendar-month") + "' style='margin: 0px; border-spacing: 0px;' cellspacing='0' cellpadding='0'><tr role='row' id='calendarHeader' height='" + c + "'><td role='gridcell' id='selectCell' width='" + d + "'></td><td role='gridcell' colspan='2' style='border: none; padding-left: 2px; padding-right: 2px' id='calendarColumnHeader'></td></tr><tr role='row' id='calendarContent'><td role='gridcell' id='calendarRowHeader' valign='top' height='" + h + "' width='" + d + "'></td><td role='gridcell' valign='top' colspan='2' style='padding-left: 2px; padding-right: 2px' id='cellsTable' height='" + h + "'></td></tr></table>", m = "<div id='footer' style='margin: 0px; display: none; height:" + g + "px;'><table style='width: 100%; height: 100%; border-spacing: 0px;' cellspacing='0' cellpadding='0'><tr id='calendarFooter'><td align='right' id='todayButton'></td><td align='left' colspan='2' id=doneButton></td></tr></table></div>"; r[0].innerHTML = u + p + m, this.header = r.find("#calendarHeader"), this.header[0].id = "calendarHeader" + t, this.header.addClass(this.toThemeProperty("calendar-header")), this.columnHeader = r.find("#calendarColumnHeader"), this.columnHeader[0].id = "calendarColumnHeader" + t, this.table = r.find("#cellsTable"), this.table[0].id = "cellsTable" + t, this.rowHeader = r.find("#calendarRowHeader"), this.rowHeader[0].id = "calendarRowHeader" + t, this.selectCell = r.find("#selectCell"), this.selectCell[0].id = "selectCell" + t, this.title = r.find("#calendarTitle"), this.title[0].id = "calendarTitle" + t, this.leftButton = r.find("#leftNavigationArrow"), this.leftButton[0].id = "leftNavigationArrow" + t, this.titleHeader = r.find("#calendarTitleHeader"), this.titleHeader[0].id = "calendarTitleHeader" + t, this.rightButton = r.find("#rightNavigationArrow"), this.rightButton[0].id = "rightNavigationArrow" + t, this.footer = r.find("#calendarFooter"), this._footer = r.find("#footer"), this._footer[0].id = "footer" + t, this.footer[0].id = "calendarFooter" + t, this.todayButton = r.find("#todayButton"), this.todayButton[0].id = "todayButton" + t, this.doneButton = r.find("#doneButton"), this.doneButton[0].id = "doneButton" + t, this.title.addClass(this.toThemeProperty("jqx-calendar-title-container")); var g = 20; if (this.showFooter && this._footer.css("display", "block"), r.find("tr").addClass(this.toThemeProperty("jqx-reset")), r.addClass(this.toThemeProperty("jqx-widget-content")), r.addClass(this.toThemeProperty("jqx-calendar-month-container")), this.month = r, this.selectCell.addClass(this.toThemeProperty("jqx-reset")), this.selectCell.addClass(this.toThemeProperty("jqx-calendar-top-left-header")), this.showWeekNumbers ? this._renderRowHeader(r) : (this.table[0].colSpan = 3, this.columnHeader[0].colSpan = 3, this.rowHeader.css("display", "none"), this.selectCell.css("display", "none")), this.showFooter) { this.footer.height(20); var f = e("<a href='javascript:;'>" + this.todayString + "</a>"); f.appendTo(this.todayButton); var v = e("<a href='javascript:;'>" + this.clearString + "</a>"); v.appendTo(this.doneButton), v.addClass(this.toThemeProperty("jqx-calendar-footer")), f.addClass(this.toThemeProperty("jqx-calendar-footer")); var x = this, w = "mousedown"; e.jqx.mobile.isTouchDevice() && (w = e.jqx.mobile.getTouchEventName("touchstart")), this.addHandler(f, w, function () { return x.today ? x.today() : x.setDate(new Date, "mouse"), !1 }), this.addHandler(v, w, function () { return x.clear ? x.clear() : x.setDate(null, "mouse"), !1 }) } "month" != this.view && this.header.hide(), this.showDayNames && "month" == this.view && this.renderColumnHeader(r), this.oldView = this.view, this.renderCalendarCells(r, a, t), void 0 != i && null != i || this.renderTitle(r), this._refreshOtherMonthRows(l, t), r.find("tbody").css({ border: "none", background: "transparent" }), void 0 != this.selectedDate && this._selectDate(this.selectedDate); var b = this; return this.addHandler(this.host, "focus", function () { b.focus() }), r } }, _getTitleFormat: function () { switch (this.view) { case "month": return this.titleFormat[0]; case "year": return this.titleFormat[1]; case "decade": return this.titleFormat[2]; case "centuries": return this.titleFormat[3] } }, renderTitle: function (t) { var i = e("<div role='button' style='float: left;'></div>"), s = e("<div role='button' style='float: right;'></div>"), r = this.title; r.addClass(this.toThemeProperty("jqx-reset")), r.addClass(this.toThemeProperty("jqx-widget-header")), r.addClass(this.toThemeProperty("jqx-calendar-title-header")); var o = r.find("td"); if (e.jqx.browser.msie && e.jqx.browser.version < 8) { if ("transparent" != o.css("background-color")) { var a = r.css("background-color"); o.css("background-color", a) } if ("transparent" != o.css("background-image")) { var n = r.css("background-image"), l = r.css("background-repeat"); r.css("background-position"); o.css("background-image", n), o.css("background-repeat", l), o.css("background-position", "left center scroll") } } else o.css("background-color", "transparent"); this.disabled && r.addClass(this.toThemeProperty("jqx-calendar-title-header-disabled")), i.addClass(this.toThemeProperty("jqx-calendar-title-navigation")), i.addClass(this.toThemeProperty("jqx-icon-arrow-left")), i.appendTo(this.leftButton); var h = this.leftButton; s.addClass(this.toThemeProperty("jqx-calendar-title-navigation")), s.addClass(this.toThemeProperty("jqx-icon-arrow-right")), s.appendTo(this.rightButton); var d = this.rightButton; this.enableTooltips && e(h).jqxTooltip && (e(h).jqxTooltip({ name: this.element.id, position: "mouse", theme: this.theme, content: this.backText }), e(d).jqxTooltip({ name: this.element.id, position: "mouse", theme: this.theme, content: this.forwardText })); var c = this.titleHeader, u = this._format(this.value.dateTime, this._getTitleFormat(), this.culture); if ("decade" == this.view) u = (p = this._format(this._renderStartDate, this._getTitleFormat(), this.culture)) + " - " + (m = this._format(this._renderEndDate, this._getTitleFormat(), this.culture)); else if ("centuries" == this.view) { var p = this._format(this._renderCenturyStartDate, this._getTitleFormat(), this.culture), m = this._format(this._renderCenturyEndDate, this._getTitleFormat(), this.culture); u = p + " - " + m } var g = e("<div style='background: transparent; margin: 0; padding: 0; border: none;'>" + u + "</div>"); c.append(g), g.addClass(this.toThemeProperty("jqx-calendar-title-content")); var f = parseInt(i.width()), v = t.width() - 2 * f; c.find(".jqx-calendar-title-content").width(v); e.data(i, "navigateLeft", this), e.data(s, "navigateRight", this); var x = e.jqx.mobile.isTouchDevice(); if (!this.disabled) { var w = this; this.addHandler(c, "mousedown", function (e) { if (w.enableViews) { if (!w._viewAnimating && !w._animating) { var t = w.view; switch (w.oldView = t, w.view) { case "month": w.view = "year"; break; case "year": w.view = "decade" } if (-1 == w.views.indexOf("year") && "year" == w.view && (w.view = "decade"), -1 == w.views.indexOf("decade") && "decade" == w.view && (w.view = t), t != w.view) { var i = "View" + w.element.id, s = w.host.find("#" + i), r = w.getVisibleDate(), o = w.getFirstDayOfWeek(r); w.renderCalendarCells(s, o, i, !0), w.refreshTitle(s), w._raiseEvent("8") } } return !1 } }), this.addHandler(i, "mousedown", function (t) { if (w._animating) return !1; e.data(i, "navigateLeftRepeat", !0); var s = e.data(i, "navigateLeft"); return s.enableFastNavigation && !x && s.startRepeat(s, i, !0, w.navigationDelay + 200), s.navigateBackward(1, "arrow"), s._raiseEvent(0, t) }), this.addHandler(i, "mouseup", function (t) { e.data(i, "navigateLeftRepeat", !1) }), this.addHandler(i, "mouseleave", function (t) { e.data(i, "navigateLeftRepeat", !1) }), this.addHandler(s, "mousedown", function (t) { if (w._animating) return !1; e.data(s, "navigateRightRepeat", !0); var i = e.data(s, "navigateRight"); return i.enableFastNavigation && !x && i.startRepeat(i, s, !1, w.navigationDelay + 200), i.navigateForward(1, "arrow"), i._raiseEvent(1, t) }), this.addHandler(s, "mouseup", function (t) { e.data(s, "navigateRightRepeat", !1) }), this.addHandler(s, "mouseleave", function (t) { e.data(s, "navigateRightRepeat", !1) }) } }, refreshTitle: function (t) { var i = this._format(this.value.dateTime, this._getTitleFormat(), this.culture); if ("decade" == this.view) i = (s = this._format(this._renderStartDate, this._getTitleFormat(), this.culture)) + " - " + (r = this._format(this._renderEndDate, this._getTitleFormat(), this.culture)); else if ("centuries" == this.view) { var s = this._format(this._renderCenturyStartDate, this._getTitleFormat(), this.culture), r = this._format(this._renderCenturyEndDate, this._getTitleFormat(), this.culture); i = s + " - " + r } var o = this.titleHeader; if (this.titleHeader) { var a = o.find(".jqx-calendar-title-content"), n = e("<div style='background: transparent; margin: 0; padding: 0; border: none;'>" + i + "</div>"); o.append(n), n.addClass(this.toThemeProperty("jqx-calendar-title-content")), null != a && a.remove() } }, startRepeat: function (t, i, s, r) { var o = window.setTimeout(function () { var a = e.data(i, "navigateLeftRepeat"); s || (a = e.data(i, "navigateRightRepeat")), a ? (r < 25 && (r = 25), s ? (t.navigateBackward(1, "arrow"), t.startRepeat(t, i, !0, r)) : (t.navigateForward(1, "arrow"), o = t.startRepeat(t, i, !1, r))) : window.clearTimeout(o) }, r) }, navigateForward: function (e, t) { void 0 != e && null != e || (e = this.stepMonths); var i = this.value.year; if ("decade" == this.view) { if (i = this._renderStartDate.getFullYear() + 12, this._renderEndDate.getFullYear() >= this.getMaxDate().getFullYear()) return } else "year" == this.view ? i = this.value.year + 1 : "centuries" == this.view && (i = this.value.year + 100); if ("month" != this.view) { var s = this.getMaxDate().getFullYear(); if ((s < i || i > s) && (i = s), this.value.year == i) return; this.value.year = i, this.value.month = 1, this.value.day = 1 } var r = this.value.day; if (this.value.month + e <= 12) { var o = this.value._daysInMonth(this.value.year, this.value.month + e); r > o && (r = o) } if ("month" == this.view) { a = new Date(this.value.year, this.value.month - 1 + e, r); "arrow" == t && 7 == this.selectableDays.length && "range" != this.selectionMode && (this.selectedDate = new Date(this.value.year, this.value.month - 1 + e, 1)) } else var a = new Date(this.value.year, this.value.month - 1, r); return this.navigateTo(a) }, navigateBackward: function (e, t) { void 0 != e && null != e || (e = this.stepMonths); var i = this.value.year; if ("decade" == this.view ? i = this._renderStartDate.getFullYear() - 12 : "year" == this.view ? i = this.value.year - 1 : "centuries" == this.view && (i = this.value.year - 100), "month" != this.view) { var s = this.getMinDate().getFullYear(); if (i < s && (i = s), "decade" == this.view && this._renderStartDate && this._renderStartDate.getFullYear() == i) return; this.value.year = i, this.value.month = 1, this.value.day = 1 } var r = this.value.day; if (this.value.month - e >= 1) { var o = this.value._daysInMonth(this.value.year, this.value.month - e); r > o && (r = o) } if ("month" == this.view) { a = new Date(this.value.year, this.value.month - 1 - e, r); "arrow" == t && 7 == this.selectableDays.length && "range" != this.selectionMode && (this.selectedDate = new Date(this.value.year, this.value.month - 1 - e, 1)) } else var a = new Date(this.value.year, this.value.month - 1, r); return this.navigateTo(a) }, _isDisabled: function (e) { var t = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"][e.getDay()]; return -1 == this.selectableDays.indexOf(t) }, refreshCalendarCells: function (t, i, s) { if ("year" != this.view && "decade" != this.view && "centuries" != this.view) { for (var r = this.table.find("#cellTable" + s.toString()), o = i, a = new Array, n = 0, l = new e.jqx._jqxDateTimeInput.getDateTime(new Date), h = 0; h < 6; h++) for (var d = 0; d < 7; d++) { var c = h + 1, u = d; this.rtl && (u = 6 - u); var p = u + 1, m = "#cell" + c + p + this.element.id, g = new Date(o.dateTime.getFullYear(), o.dateTime.getMonth(), o.dateTime.getDate()), f = new e.jqx._jqxCalendar.cell(g), v = e(r[0].rows[h].cells[p - 1]); v[0].id = m.substring(1), f.element = v, f.row = h, f.column = d, f.isVisible = !0, f.isOtherMonth = !1, f.isToday = !1, f.isWeekend = !1, f.isHighlighted = !1, f.isSelected = !1, o.month != this.value.month && (f.isOtherMonth = !0, f.isVisible = this.showOtherMonthDays), (g < this.getMinDate() || g > this.getMaxDate() || this._isDisabled(g)) && (f.isDisabled = !0), o.month == l.month && o.day == l.day && o.year == l.year && (f.isToday = !0), o.isWeekend() && (f.isWeekend = !0), e.data(this.element, "cellContent" + m.substring(1), f), e.data(this.element, m.substring(1), f), a[n] = f, n++, e.jqx.utilities.html(v, o.day), this._applyCellStyle(f, v, v), o = new e.jqx._jqxDateTimeInput.getDateTime(new Date(o._addDays(1))) } var x = e.data(this.element, t[0].id); void 0 != x && null != x && (x.cells = a), this.renderedCells = a, this._refreshOtherMonthRows(x, s) } else this.refreshViews(t, i, s) }, _getDecadeAndCenturiesData: function () { var e = new Array, t = new Array, i = this.getMaxDate().getFullYear() - this.getMinDate().getFullYear(); i < 12 && (i = 12); var s = this.getMinDate(), r = this.getMaxDate(), o = this.value.dateTime.getFullYear(); if ("decade" == this.view) { o + 12 > r.getFullYear() && (o = r.getFullYear() - 11), o < s.getFullYear() && (o = s.getFullYear()); for (d = 0; d < i; d++) { c = new Date(s.getFullYear() + d, 0, 1); if (s.getFullYear() <= o && o <= c.getFullYear()) { for (var a = new Date(c.getFullYear(), c.getMonth(), 1), n = 0; n < 12; n++) { var l = new Date(a.getFullYear() + n, this.value.dateTime.getMonth(), this.value.dateTime.getDate()), h = l.getFullYear(); s.getFullYear() <= h && h <= r.getFullYear() ? (e.push(h), t.push(l), 0 == n && (this._renderStartDate = l), this._renderEndDate = l) : (e.push(h), t.push(l)) } break } } } else if ("centuries" == this.view) for (var d = 0; d < i; d += 120) { var c = new Date(s.getFullYear() + d + 120, 0, 1); if (s.getFullYear() <= o && o <= c.getFullYear()) { (a = new Date(c.getFullYear() - 130, c.getMonth(), 1)) < s && (a = s); for (n = 0; n < 12; n++) { var u = new Date(a.getFullYear() + 10 * n, a.getMonth(), 1); a.getFullYear() >= s.getFullYear() && u.getFullYear() <= r.getFullYear() && (e.push("<span style='visibility: hidden;'>-</span>" + u.getFullYear() + "-" + (u.getFullYear() + 9)), t.push(u), 0 == n && (this._renderCenturyStartDate = u), this._renderCenturyEndDate = new Date(u.getFullYear() + 9, 0, 1)) } break } } return { years: e, dates: t } }, refreshViews: function (t, i, s) { for (var r = new Array, o = t.find("#cellTable" + s.toString()), a = this._getDecadeAndCenturiesData(), n = a.years, l = a.dates, h = 0, d = this.getMinDate(), c = this.getMaxDate(), u = 0; u < 3; u++) for (var p = 0; p < 4; p++) { var m = p; this.rtl && (m = 3 - m); (b = new Date(this.value.dateTime)).setDate(1), b.setMonth(4 * u + m); var g = new e.jqx._jqxCalendar.cell(b), f = o[0].rows["row" + (1 + u) + this.element.id], v = e(f.cells[p]); g.isSelected = !1, g.isVisible = !0, g.element = v, g.row = u, g.column = p, g.index = r.length; var x = ""; if ("year" == this.view) { var w = this.localization.calendar.months.names[4 * u + m]; switch (this.monthNameFormat) { case "default": w = this.localization.calendar.months.namesAbbr[4 * u + m]; break; case "shortest": w = this.localization.calendar.months.namesShort[4 * u + m]; break; case "firstTwoLetters": w = w.substring(0, 2); break; case "firstLetter": w = w.substring(0, 1) } x = w } else "decade" != this.view && "centuries" != this.view || (void 0 == (x = n[4 * u + m]) && (x = "<span style='cursor: default; visibility: hidden;'>2013</span>"), g.setDate(l[4 * u + m])); var b = g.getDate(); "year" == this.view ? b.getMonth() == this.getDate().getMonth() && b.getFullYear() == this.getDate().getFullYear() && (g.isSelected = !0) : b.getFullYear() == this.getDate().getFullYear() && (g.isSelected = !0), "year" == this.view ? (this._getYearAndMonthPart(b) < this._getYearAndMonthPart(d) && (g.isDisabled = !0), this._getYearAndMonthPart(b) > this._getYearAndMonthPart(c) && (g.isDisabled = !0)) : (b.getFullYear() < d.getFullYear() && (g.isDisabled = !0), b.getFullYear() > c.getFullYear() && (g.isDisabled = !0)), e.jqx.utilities.html(v, x), r[h] = g, h++ } var _ = e.data(this.element, t[0].id); void 0 != _ && null != _ && (_.cells = r), this.renderedCells = r, this._applyCellStyles() }, _createViewClone: function () { var e = this.host.find(".jqx-calendar-month"), t = e.clone(); return t.css("position", "absolute"), t.css("top", e.position().top), t }, _addCellsTable: function (e, t) { var i = this, s = this.showFooter ? 20 : 0; "month" != this.view ? t.height(this.host.height() - this.titleHeight) : t.height(this.host.height() - this.titleHeight - this.columnHeaderHeight - s), this._viewAnimating = !0; var r = this.host.find(".jqx-calendar-month-container"); r.css("position", "relative"); this.host.find(".jqx-calendar-month"); var o = this._createViewClone(); r.append(o), "month" != this.view ? (this.header.fadeOut(0), this.showWeekNumbers && this.rowHeader.fadeOut(0), this.showFooter && this._footer.fadeOut(0)) : (this.header.fadeIn(this.navigationDelay + 200), this.showWeekNumbers && this.rowHeader.fadeIn(this.navigationDelay + 200), this.showFooter && this._footer.fadeIn(this.navigationDelay + 200)), e.children().remove(), e.append(t), this._animateViews(o, t, function () { i.selectedDate || (i.selectedDate = i.renderedCells[0].getDate()); try { i.renderedCells[0].element.focus(), setTimeout(function () { i.renderedCells[0].element.focus() }, 10) } catch (e) { } i._viewAnimating = !1 }), t.addClass(this.toThemeProperty("jqx-calendar-view")) }, _animateViews: function (e, t, i) { var s = this; if (s._viewAnimating = !0, s.oldView == s.view) return e.remove(), t.fadeOut(0), t.fadeIn(0), void i(); e.fadeOut(this.navigationDelay + 100, function () { e.remove() }), t.fadeOut(0), t.fadeIn(this.navigationDelay + 200, function () { i() }) }, focus: function () { try { if (this.renderedCells && this.renderedCells.length > 0) { var e = this; e.selectedDate || "range" == e.selectionMode || this.setDate(new Date, "mouse"), this.element.focus() } } catch (e) { } }, renderViews: function (t, i, s) { var r = this, o = new Array, a = e("<table role='grid' style='border-color: transparent; width: 100%; height: 100%;' cellspacing='2' cellpadding='0' id=cellTable" + s.toString() + "><tr role='row' id='row1" + this.element.id + "'><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td></tr><tr role='row' id='row2" + this.element.id + "'><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td></tr><tr role='row' id='row3" + this.element.id + "'><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td></tr></table>"); this.host.find(".jqx-calendar-month-container").css("position", "relative"); var n = t.find("#cellsTable" + t[0].id); n[0].style.borderColor = "transparent"; var l = this._getDecadeAndCenturiesData(), h = l.years, d = l.dates, c = 0, u = this.getMinDate(), p = this.getMaxDate(), m = new Date(this.value.dateTime); m.setDate(1); for (var g = 0; g < 3; g++) for (var f = 0; f < 4; f++) { var v = f; this.rtl && (v = 3 - v); var x = a[0].rows["row" + (1 + g) + this.element.id]; (j = new Date(m)).setMonth(4 * g + v); var w = new e.jqx._jqxCalendar.cell(j), b = e(x.cells[f]); w.isVisible = !0, w.element = b, w.row = g, w.column = f, w.index = o.length, w.isSelected = !1; var _ = ""; if ("year" == this.view) { j.getMonth() == this.getDate().getMonth() && j.getFullYear() == this.getDate().getFullYear() && (w.isSelected = !0); var y = this.localization.calendar.months.names[4 * g + v]; switch (this.monthNameFormat) { case "default": y = this.localization.calendar.months.namesAbbr[4 * g + v]; break; case "shortest": y = this.localization.calendar.months.namesShort[4 * g + v]; break; case "firstTwoLetters": y = y.substring(0, 2); break; case "firstLetter": y = y.substring(0, 1) } _ = y } else "decade" != this.view && "centuries" != this.view || (_ = h[4 * g + v], w.setDate(d[4 * g + v]), w.getDate().getFullYear() == this.getDate().getFullYear() && (w.isSelected = !0), void 0 == _ && (_ = "<span style='cursor: default; visibility: hidden;'>2013</span>")); var j = w.getDate(); "year" == this.view ? (this._getYearAndMonthPart(j) < this._getYearAndMonthPart(u) && (w.isDisabled = !0), this._getYearAndMonthPart(j) > this._getYearAndMonthPart(p) && (w.isDisabled = !0)) : (j.getFullYear() < u.getFullYear() && (w.isDisabled = !0), j.getFullYear() > p.getFullYear() && (w.isDisabled = !0)), e.jqx.utilities.html(b, _), o[c] = w, c++ } e.each(o, function () { var e = this.element, t = this; r.disabled || (r.addHandler(e, "mousedown", function (e) { r._setDateAndSwitchViews(t, e, "mouse") }), r.addHandler(e, "mouseover", function (e) { var i = r.renderedCells[t.index]; "centuries" != r.view && -1 != i.element.html().toLowerCase().indexOf("span") || (i.isHighlighted = !0, r._applyCellStyle(i, i.element, i.element)) }), r.addHandler(e, "mouseout", function (e) { var i = r.renderedCells[t.index]; "centuries" != r.view && -1 != i.element.html().toLowerCase().indexOf("span") || (i.isHighlighted = !1, r._applyCellStyle(i, i.element, i.element)) })) }); var q = e.data(this.element, t[0].id); void 0 != q && null != q && (q.cells = o), this.renderedCells = o, this._addCellsTable(n, a), this._applyCellStyles() }, _setDateAndSwitchViews: function (e, t, i) { if (!this._viewAnimating && !this._animating) { this.getDate(); var s = this.renderedCells[e.index].getDate(), r = this.value.dateTime.getDate(), o = new Date(s); -1 != this.views.indexOf("month") ? o.setDate(r) : (o.setDate(1), s.setDate(1)), o.getMonth() == s.getMonth() && (s = o); var a = this.getMinDate(), n = this.getMaxDate(); if ("year" == this.view) { if (this._getYearAndMonthPart(s) < this._getYearAndMonthPart(a)) return; if (this._getYearAndMonthPart(s) > this._getYearAndMonthPart(n)) return } else { if (s.getFullYear() < a.getFullYear()) return; if (s.getFullYear() > n.getFullYear()) return } switch (this._selectDate(s), this.oldView = this.view, this.view) { case "year": this.view = "month"; break; case "decade": this.view = "year" } -1 == this.views.indexOf("month") && (this.view = "year"), -1 == this.views.indexOf("year") && (this.view = "decade"), "year" == this.view ? (this._getYearAndMonthPart(s) < this._getYearAndMonthPart(a) && (s = a), this._getYearAndMonthPart(s) > this._getYearAndMonthPart(n) && (s = n)) : (s.getFullYear() < a.getFullYear() && (s = a), s.getFullYear() > n.getFullYear() && (s = n)), this.changing && this.selectedDate && (this.selectedDate.getFullYear() != s.getFullYear() || this.selectedDate.getMonth() != s.getMonth() || this.selectedDate.getDate() != s.getDate()) && (s = this.selectedDate), this.value._setYear(s.getFullYear()), this.value._setDay(s.getDate()), this.value._setMonth(s.getMonth() + 1), this.value._setDay(s.getDate()); var l = this.getVisibleDate(), h = this.getFirstDayOfWeek(l), d = "View" + this.element.id; this.renderCalendarCells(this.month, h, d, !0), this.refreshTitle(this.month), this.showWeekNumbers && this.refreshRowHeader(this.month, d), 3 == this.views.length && "month" == this.view && this._selectDate(this.selectedDate, "view"), "month" != this.view && ("year" == this.oldView || -1 == this.views.indexOf("year") && "decade" == this.view) && ("keyboard" != i && this._raiseEvent("3"), this._raiseEvent("5", { selectionType: "mouse" })), this._raiseEvent("8") } }, renderCalendarCells: function (t, i, s, r) { if ("year" != this.view && "decade" != this.view && "centuries" != this.view) { var o = e("<table role='grid' style='width: 100%; height: 100%; border-color: transparent;' cellspacing='2' cellpadding='1' id=cellTable" + s.toString() + "><tr role='row'><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td></tr><tr role='row'><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td></tr><tr role='row'><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td></tr><tr role='row'><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td></tr><tr role='row'><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td></tr><tr role='row'><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td></tr></table>"), a = this.table; if (a[0].style.borderColor = "transparent", void 0 == r) { var n = a.find("#cellTable" + s.toString()); null != n && n.remove(), a.append(o) } var l = i, h = this.showDayNames ? 1 : 0, d = this.showWeekNumbers ? 1 : 0, c = new Array, u = 0, p = (t.width() - this.rowHeaderWidth - 2) / 7; this.showWeekNumbers || (p = (t.width() - 2) / 7), p = parseInt(p); for (var m = new e.jqx._jqxDateTimeInput.getDateTime(new Date), g = 0; g < 6; g++) { for (var f = 0; f < 7; f++) { var v = g + 1, x = f; this.rtl && (x = 6 - x); var w = x + 1, b = "#cell" + v + w + this.element.id, _ = new Date(l.dateTime.getFullYear(), l.dateTime.getMonth(), l.dateTime.getDate()), y = new e.jqx._jqxCalendar.cell(_), j = e(o[0].rows[g].cells[w - 1]); j[0].id = b.substring(1), y.isVisible = !0, y.isDisabled = !1, l.month != this.value.month && (y.isOtherMonth = !0, y.isVisible = this.showOtherMonthDays), (_ < this.getMinDate() || _ > this.getMaxDate() || this._isDisabled(_)) && (y.isDisabled = !0), l.month == m.month && l.day == m.day && l.year == m.year && (y.isToday = !0), l.isWeekend() && (y.isWeekend = !0), y.element = j, y.row = h, y.column = d, e.jqx.utilities.html(j, l.day), l = new e.jqx._jqxDateTimeInput.getDateTime(new Date(l._addDays(1))), e.data(this.element, "cellContent" + b.substring(1), y), e.data(this.element, "" + b.substring(1), y); var q = this; if (this.addHandler(j, "mousedown", function (t) { if (!q.readOnly && !q.disabled) { var i = e(t.target), s = e.data(q.element, i[0].id); q._raiseEvent(3, t); if (null != s && void 0 != s) { var r = s.getDate(); if (q.getMinDate() <= r && r <= q.getMaxDate() && !s.isDisabled) if (s.isOtherMonth && q.enableAutoNavigation) s.row < 2 ? q.navigateBackward() : q.navigateForward(), q._selectDate(s.getDate(), "mouse", t.shiftKey); else { new Date(q.getDate()); q._selectDate(s.getDate(), "mouse", t.shiftKey), q.value._setYear(r.getFullYear()), q.value._setDay(1), q.value._setMonth(r.getMonth() + 1), q.value._setDay(r.getDate()); var o = q.host.find(".jqx-calendar-month"); o.stop(), o.css("margin-left", "0px"); q.getDate(); q._raiseEvent("2"), s.isOtherMonth && q._raiseEvent("5", { selectionType: "mouse" }) } } return !1 } }), !q.disabled) { var T = function (t, i) { if (!q.readOnly) { var s = e(t.target), r = e.data(q.element, s[0].id); if (null != r && void 0 != r) { var o = r.getDate(); q.getMinDate() <= o && o <= q.getMaxDate() && (r.isHighlighted = i, q._applyCellStyle(r, r.element, s)) } } }; this.addHandler(j, "mouseenter", function (e) { return T(e, !0), !1 }), this.addHandler(j, "mouseleave", function (e) { return T(e, !1), !1 }) } d++, c[u] = y, u++ } d = 0, h++ } var C = e.data(this.element, t[0].id); void 0 != C && null != C && (C.cells = c), this.renderedCells = c, void 0 != r && this._addCellsTable(a, o), this._applyCellStyles(), this._refreshOtherMonthRows(C, s) } else this.renderViews(t, i, s) }, setMaxDate: function (t, i) { null != t && "string" == typeof t && "Invalid Date" == (t = new Date(t)) || (this.maxDate = e.jqx._jqxDateTimeInput.getDateTime(t), !1 !== i && this.render()) }, getMaxDate: function () { return null != this.maxDate && void 0 != this.maxDate ? this.maxDate.dateTime : null }, setMinDate: function (t, i) { null != t && "string" == typeof t && "Invalid Date" == (t = new Date(t)) || (this.minDate = e.jqx._jqxDateTimeInput.getDateTime(t), !1 !== i && this.render()) }, getMinDate: function () { return null != this.minDate && void 0 != this.minDate ? this.minDate.dateTime : null }, navigateTo: function (t, i) { if ("month" == this.view) { var s = this.getMinDate(), r = new Date(this.getMaxDate().getFullYear(), this.getMaxDate().getMonth() + 1, this.getMaxDate().getDate()); if (t < this._getYearAndMonthPart(s) || t > this._getYearAndMonthPart(r)) return !1 } else if (t && (t.getFullYear() < this.getMinDate().getFullYear() || t.getFullYear() > this.getMaxDate().getFullYear())) return !1; if (null == t) return !1; if (void 0 == i) { var o = this; if (this._animating) return; this._animating = !0; var a = this.host.find(".jqx-calendar-month-container"); this._viewClone && (this._viewClone.stop(), this._viewClone.remove()), this._newViewClone && (this._newViewClone.stop(), this._newViewClone.remove()), (c = this.host.find(".jqx-calendar-month")).stop(), c.css("margin-left", "0px"); var n = c.clone(); this._viewClone = n; var l = new Date(this.value.dateTime); this.value._setYear(t.getFullYear()), this.value._setDay(t.getDate()), this.value._setMonth(t.getMonth() + 1), o.refreshControl(), a.css("position", "relative"), n.css("position", "absolute"), n.css("top", c.position().top), a.append(n), e.jqx.browser.msie && e.jqx.browser.version < 8 && (this.month.css("position", "relative"), this.month.css("overflow", "hidden"), this.table.css("position", "relative"), this.table.css("overflow", "hidden")); var h = -this.host.width(); t < l && ("month" == this.view && t.getMonth() != l.getMonth() ? h = this.host.width() : t.getFullYear() != l.getFullYear() && (h = this.host.width())), n.animate({ marginLeft: parseInt(h) + "px" }, this.navigationDelay, function () { n.remove() }); var d = c.clone(); this._newViewClone = d, d.css("position", "absolute"), d.css("top", c.position().top), a.append(d), d.css("margin-left", -h), c.css("visibility", "hidden"), d.animate({ marginLeft: "0px" }, this.navigationDelay, function () { d.remove(), c.css("visibility", "visible"), o._animating = !1 }) } else { this.value._setYear(t.getFullYear()), this.value._setDay(t.getDate()), this.value._setMonth(t.getMonth() + 1); var c = this.host.find(".jqx-calendar-month"); c.stop(), c.css("margin-left", "0px"), this.refreshControl() } return this._raiseEvent("2"), this._raiseEvent("8"), !0 }, setDate: function (e) { return null != e && "string" == typeof e && (e = new Date(e)), 0 == this.canRender && (this.canRender = !0, this.render()), this.navigateTo(e, "api"), this._selectDate(e), "range" == this.selectionMode && this._selectDate(e, "mouse"), !0 }, val: function (e) { return 0 != arguments.length && (null == e && this.setDate(null), e instanceof Date && this.setDate(e), "string" == typeof e && this.setDate(e)), this.getDate() }, getDate: function () { return void 0 == this.selectedDate ? new Date : this.selectedDate }, getValue: function () { return void 0 == this.value ? new Date : this.value.dateTime }, setRange: function (e, t) { 0 == this.canRender && (this.canRender = !0, this.render()), this.navigateTo(e, "api"), this._selectDate(e, "mouse"), this._selectDate(t, "mouse") }, getRange: function () { return this.selection }, _selectDate: function (t, i, s) { if ("none" != this.selectionMode) { null != i && void 0 != i || (i = "none"), null != s && void 0 != s || (s = !1); var r = e.data(this.element, "View" + this.element.id); if (void 0 != r && null != r) { if (this.changing && t && this.selectedDate) { if (this.selectedDate.getFullYear() != t.getFullYear() || this.selectedDate.getDate() != t.getDate() || this.selectedDate.getMonth() != t.getMonth()) var o = this.changing(this.selectedDate, t); o && (t = o) } var a = this; this.input && (null != t ? this.input.val(t.toString()) : this.input.val("")); var n = this.selectedDate; if (this.selectedDate = t, "month" != this.view) return n != t && this._raiseEvent(7), e.each(this.renderedCells, function (i) { var s = this, r = s.getDate(), o = e(s.element); o.find("#cellContent" + o[0].id); if (null == t) s.isSelected = !1, s.isDisabled = !1; else if (s.isSelected = !1, r && (r.getMonth() == t.getMonth() && "year" == a.view && r.getFullYear() == t.getFullYear() || "decade" == a.view && r.getFullYear() == t.getFullYear())) { s.isSelected = !0; try { s.element.focus() } catch (e) { } } a._applyCellStyle(s, o, o) }), void (this.change && this.change(t)); if ("month" == this.view && "range" == this.selectionMode && "key" == i) { var l = this.getVisibleDate(), h = this.getFirstDayOfWeek(l); this.refreshCalendarCells(this.month, h, "View" + this.element.id) } e.each(this.renderedCells, function (r) { var o = this, n = o.getDate(), l = e(o.element), h = l; if (0 == l.length) return !1; if (null == t) o.isSelected = !1, o.isDisabled = !1, 0 == r && (a.selection = { from: null, to: null }, a._raiseEvent("2"), a._raiseEvent("5", { selectionType: i })); else if ("range" != a.selectionMode || "key" == i) { if (n.getDate() == t.getDate() && n.getMonth() == t.getMonth() && n.getFullYear() == t.getFullYear() && o.isSelected) return a._applyCellStyle(o, l, h), void a._raiseEvent("5", { selectionType: i }); if (o.isSelected && a._raiseEvent("6", { selectionType: i }), o.isSelected = !1, n.getDate() == t.getDate() && n.getMonth() == t.getMonth() && n.getFullYear() == t.getFullYear()) { o.isSelected = !0, 0 == r && (a.selection = { date: t }); try { o.element.focus(), a.host.focus() } catch (e) { } o.isOtherMonth || (a.value._setMonth(t.getMonth() + 1), a.value._setDay(t.getDate()), a.value._setYear(t.getFullYear()), a._raiseEvent("2"), a._raiseEvent("5", { selectionType: i })) } "range" == a.selectionMode && (a._clicks = 0, a.selection = { from: t, to: t }) } else if ("range" == a.selectionMode) { if ("view" == i) return o.isSelected = !1, o.isDisabled = !1, a.getMaxDate() < n && (o.isDisabled = !0), a.getMinDate() > n && (o.isDisabled = !0), a._isDisabled(n) && (o.isDisabled = !0), a._applyCellStyle(o, l, h), !0; if (0 == r) if ("none" != i) if (void 0 == a._clicks && (a._clicks = 0), a._clicks++, s && a._clicks++, 1 == a._clicks) a.selection = { from: t, to: t }; else { var d = a.selection.from, c = d <= t ? d : t, u = d <= t ? t : d; if (c) var p = new Date(c.getFullYear(), c.getMonth(), c.getDate()); if (u) var m = new Date(u.getFullYear(), u.getMonth(), u.getDate(), 23, 59, 59); a.selection = { from: p, to: m }, a._clicks = 0 } else null != a.selection && null != a.selection.from || (a.selection = { from: t, to: t }, void 0 == a._clicks && (a._clicks = 0), 2 == ++a._clicks && (a._clicks = 0)); var g = function (e) { if (null == e) return new Date; var t = new Date; return t.setHours(0, 0, 0, 0), t.setFullYear(e.getFullYear(), e.getMonth(), e.getDate()), t }; o.isOtherMonth || g(n).toString() != g(t).toString() || (a.value._setMonth(t.getMonth() + 1), a.value._setDay(t.getDate()), a.value._setYear(t.getFullYear()), a._raiseEvent("2"), a._raiseEvent("5", { selectionType: i })), o.isSelected = !1, o.isDisabled = !1, g(n) < g(a.selection.from) && 1 == a._clicks && (o.isDisabled = !0), a.getMaxDate() < n && (o.isDisabled = !0), a.getMinDate() > n && (o.isDisabled = !0), a._isDisabled(n) && (o.isDisabled = !0), o.isDisabled || g(n) >= g(a.selection.from) && g(n) <= g(a.selection.to) && (o.isSelected = !0) } a._applyCellStyle(o, l, h) }), "range" != a.selectionMode || 0 != a._clicks ? "range" != a.selectionMode && n != t && (a._raiseEvent(7), this.change && this.change(t)) : a._raiseEvent(7) } } }, _getSelectedDate: function () { var t = e.data(this.element, "View" + this.element.id); if (void 0 != t && null != t) { if ("month" != this.view) return this.selectedDate; for (var i = 0; i < t.cells.length; i++) { var s = t.cells[i], r = s.getDate(); if (s.isSelected) return r } return this.selectedDate ? this.selectedDate : void 0 } }, _getSelectedCell: function () { var t = e.data(this.element, "View" + this.element.id); if (void 0 != t && null != t) for (var i = 0; i < t.cells.length; i++) { var s = t.cells[i]; s.getDate(); if (s.isSelected) return s } }, _applyCellStyle: function (t, i, s) { var r = this; (null == s || null != s && 0 == s.length) && (s = i); var o = ""; if (o = this.toThemeProperty("jqx-rc-all"), o += " " + this.toThemeProperty("jqx-item"), (this.disabled || t.isDisabled) && (o += " " + this.toThemeProperty("jqx-calendar-cell-disabled"), o += " " + this.toThemeProperty("jqx-fill-state-disabled")), t.isOtherMonth && this.enableOtherMonthDays && t.isVisible && (o += " " + this.toThemeProperty("jqx-calendar-cell-othermonth")), t.isWeekend && this.enableWeekend && t.isVisible && t.isVisible && (o += " " + this.toThemeProperty("jqx-calendar-cell-weekend")), t.isVisible ? (o += " " + this.toThemeProperty("jqx-calendar-cell"), "month" != this.view && s.length > 0 && -1 != s.html().toLowerCase().indexOf("span") && s.css("cursor", "default")) : o += " " + this.toThemeProperty("jqx-calendar-cell-hidden"), s.removeAttr("aria-selected"), t.isSelected && t.isVisible) { o += " " + this.toThemeProperty("jqx-calendar-cell-selected"), o += " " + this.toThemeProperty("jqx-fill-state-pressed"), s.attr("aria-selected", !0), this.host.removeAttr("aria-activedescendant").attr("aria-activedescendant", s[0].id); var a = t.getDate(); this._isDisabled(a) && (o += " " + this.toThemeProperty("jqx-calendar-cell-selected-invalid")) } if (t.isHighlighted && t.isVisible && this.enableHover && (t.isDisabled || (o += " " + this.toThemeProperty("jqx-calendar-cell-hover"), o += " " + this.toThemeProperty("jqx-fill-state-hover"))), o += " " + this.toThemeProperty("jqx-calendar-cell-" + this.view), t.isToday && t.isVisible && (o += " " + this.toThemeProperty("jqx-calendar-cell-today")), s[0].className = o, this.specialDates.length > 0) { var n = this; e.each(this.specialDates, function () { void 0 != this.Class && null != this.Class && "" != this.Class ? s.removeClass(this.Class) : s.removeClass(r.toThemeProperty("jqx-calendar-cell-specialDate")); var i = t.getDate(); if (i.getFullYear() == this.Date.getFullYear() && i.getMonth() == this.Date.getMonth() && i.getDate() == this.Date.getDate()) { if (null == t.tooltip && null != this.Tooltip && (t.tooltip = this.Tooltip, e(s).jqxTooltip)) { var o = this.Class; e(s).jqxTooltip({ value: { cell: t, specialDate: this.Date }, name: n.element.id, content: this.Tooltip, position: "mouse", theme: n.theme, opening: function (e) { return !!s.hasClass(r.toThemeProperty("jqx-calendar-cell-specialDate")) || !!s.hasClass(o) } }) } return s.removeClass(r.toThemeProperty("jqx-calendar-cell-othermonth")), s.removeClass(r.toThemeProperty("jqx-calendar-cell-weekend")), void 0 == this.Class || "" == this.Class ? (s.addClass(r.toThemeProperty("jqx-calendar-cell-specialDate")), !1) : (s.addClass(this.Class), !1) } }) } }, _applyCellStyles: function () { var t = e.data(this.element, "View" + this.element.id); if (void 0 != t && null != t) for (var i = 0; i < t.cells.length; i++) { var s = t.cells[i], r = e(s.element), o = r.find("#cellContent" + r[0].id); 0 == o.length && (o = r), this._applyCellStyle(s, r, o) } }, getWeekOfYear: function (e) { var t = new Date(e.dateTime); dowOffset = this.firstDayOfWeek; var i = new Date(t.getFullYear(), 0, 1), s = i.getDay() - dowOffset; s = s >= 0 ? s : s + 7; var r, o = Math.floor((t.getTime() - i.getTime() - 6e4 * (t.getTimezoneOffset() - i.getTimezoneOffset())) / 864e5) + 1; return s < 4 ? (r = Math.floor((o + s - 1) / 7) + 1) > 52 && (nYear = new Date(t.getFullYear() + 1, 0, 1), nday = nYear.getDay() - dowOffset, nday = nday >= 0 ? nday : nday + 7, r = nday < 4 ? 1 : 53) : r = Math.floor((o + s - 1) / 7), r }, renderColumnHeader: function (t) { if (this.showDayNames) { var i = e("<table role='grid' style='border-spacing: 0px; border-collapse: collapse; width: 100%; height: 100%;' cellspacing='0' cellpadding='1'><tr role='row'><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td><td role='gridcell'></td></tr></table>"); i.find("table").addClass(this.toThemeProperty("jqx-reset")), i.find("tr").addClass(this.toThemeProperty("jqx-reset")), i.find("td").css({ background: "transparent", padding: 1, margin: 0, border: "none" }), i.addClass(this.toThemeProperty("jqx-reset")), i.addClass(this.toThemeProperty("jqx-widget-content")), i.addClass(this.toThemeProperty("jqx-calendar-column-header")), this.columnHeader.append(i); var s = this.getVisibleDate(), r = this.getFirstDayOfWeek(s), o = (r.dayOfWeek, this.getWeekOfYear(r), this.firstDayOfWeek), a = this.localization.calendar.days.names, n = new Array, l = r, h = (t.width() - this.rowHeaderWidth - 2) / 7; this.showWeekNumbers || (h = (t.width() - 2) / 7); for (var d = 0; d < 7; d++) { var c = a[o]; switch (this.rtl && (c = a[6 - o]), this.dayNameFormat) { case "default": c = this.localization.calendar.days.namesAbbr[o]; break; case "shortest": c = this.localization.calendar.days.namesShort[o]; break; case "firstTwoLetters": c = c.substring(0, 2); break; case "firstLetter": c = c.substring(0, 1) } var u = new e.jqx._jqxCalendar.cell(l.dateTime), p = d + 1 + this.element.id, m = e(i[0].rows[0].cells[d]), g = d; this.enableTooltips && e(m).jqxTooltip && e(m).jqxTooltip({ name: this.element.id, content: a[o], theme: this.theme, position: "mouse" }), o >= 6 ? o = 0 : o++, d = g, u.element = m, u.row = 0, u.column = d + 1; var f = this._textwidth(c), v = "<div style='padding: 0; margin: 0; border: none; background: transparent;' id='columnCell" + p + "'>" + c + "</div>"; if (m.append(v), m.find("#columnCell" + p).addClass(this.toThemeProperty("jqx-calendar-column-cell")), m.width(h), this.disabled && m.find("#columnCell" + p).addClass(this.toThemeProperty("jqx-calendar-column-cell-disabled")), f > 0 && h > 0) for (; f > m.width() && 0 != c.length;) c = c.substring(0, c.length - 1), e.jqx.utilities.html(m.find("#columnCell" + p), c), f = this._textwidth(c); n[d] = u, l = new e.jqx._jqxDateTimeInput.getDateTime(new Date(l._addDays(1))) } parseInt(this.columnHeader.width()) > parseInt(this.host.width()) && this.columnHeader.width(this.host.width()), e.data(this.element, t[0].id).columnCells = n } }, _format: function (t, i, s) { var r = !1; try { void 0 != Globalize && (r = !0) } catch (e) { } if (e.global) return e.global.culture.calendar = this.localization.calendar, e.global.format(t, i, this.culture); if (r) try { return Globalize.cultures[this.culture] ? (Globalize.cultures[this.culture].calendar = this.localization.calendar, Globalize.format(t, i, this.culture)) : Globalize.format(t, i, this.culture) } catch (e) { return Globalize.format(t, i) } else if (e.jqx.dataFormat) return e.jqx.dataFormat.formatdate(t, i, this.localization.calendar) }, _textwidth: function (t) { var i = e("<span>" + t + "</span>"); i.addClass(this.toThemeProperty("jqx-calendar-column-cell")), e(this.host).append(i); var s = i.width(); return i.remove(), s }, _textheight: function (t) { var i = e("<span>" + t + "</span>"); e(this.host).append(i); var s = i.height(); return i.remove(), s }, _renderRowHeader: function (t) { var i = this.getVisibleDate(), s = this.getFirstDayOfWeek(i), r = (s.dayOfWeek, this.getWeekOfYear(s)), o = new e.jqx._jqxDateTimeInput.getDateTime(new Date(s.dateTime)); o._addDays(5), o.dayOfWeek = o.dateTime.getDay(); this.getWeekOfYear(o); 53 == r && 0 == o.dateTime.getMonth() && (r = 1); var a = e("<table style='overflow: hidden; width: 100%; height: 100%;' cellspacing='0' cellpadding='1'><tr><td></td></tr><tr><td/></tr><tr><td/></tr><tr><td/></tr><tr><td/></tr><tr><td/></tr></table>"); a.find("table").addClass(this.toThemeProperty("jqx-reset")), a.find("td").addClass(this.toThemeProperty("jqx-reset")), a.find("tr").addClass(this.toThemeProperty("jqx-reset")), a.addClass(this.toThemeProperty("jqx-calendar-row-header")), a.width(this.rowHeaderWidth), this.rowHeader.append(a); for (var n = s, l = new Array, h = 0; h < 6; h++) { var d = r.toString(), c = new e.jqx._jqxCalendar.cell(n.dateTime), u = h + 1 + this.element.id, p = e(a[0].rows[h].cells[0]); c.element = p, c.row = h, c.column = 0; var m = "<div style='background: transparent; border: none; padding: 0; margin: 0;' id ='headerCellContent" + u + "'>" + d + "</div>"; p.append(m), p.find("#headerCellContent" + u).addClass(this.toThemeProperty("jqx-calendar-row-cell")), l[h] = c, n = new e.jqx._jqxDateTimeInput.getDateTime(new Date(n._addWeeks(1))), r = this.getWeekOfYear(n) } e.data(this.element, t[0].id).rowCells = l }, getFirstDayOfWeek: function (t) { var i = t; (this.firstDayOfWeek < 0 || this.firstDayOfWeek > 6) && (this.firstDayOfWeek = 6); var s = i.dayOfWeek - this.firstDayOfWeek; return s <= 0 && (s += 7), e.jqx._jqxDateTimeInput.getDateTime(i._addDays(-s)) }, getVisibleDate: function () { var t = new e.jqx._jqxDateTimeInput.getDateTime(new Date(this.value.dateTime)); t < this.minDate && (t = this.minDate), t > this.maxDate && (this.visibleDate = this.maxDate), t.dateTime.setHours(0); var i = t.day; return t = e.jqx._jqxDateTimeInput.getDateTime(t._addDays(1 - i)) }, destroy: function (e) { this.host.removeClass(), 0 != e && this.host.remove() }, _raiseEvent: function (e, t) { void 0 == t && (t = { owner: null }); var i = this.events[e], s = t || {}; s.owner = this; var r = new jQuery.Event(i); if (r.owner = this, r.args = s, 0 == e || 1 == e || 2 == e || 3 == e || 4 == e || 5 == e || 6 == e || 7 == e || 8 == e) { r.args.date = r.args.selectedDate = this.getDate(), r.args.range = this.getRange(); var o = this.getViewStart(), a = this.getViewEnd(); r.args.view = { from: o, to: a } } var n = this.host.trigger(r); return 0 != e && 1 != e || (n = !1), n }, propertyMap: function (e) { return "value" == e ? "range" != this.selectionMode ? this.getDate() : this.getRange() : null }, updateSize: function () { var e = this.host.find("#View" + this.element.id); if (e.length > 0) { this.setCalendarSize(), void 0 == this.height || isNaN(this.height) ? null != this.height && -1 != this.height.toString().indexOf("px") && e.height(this.height) : e.height(this.height), void 0 == this.width || isNaN(this.width) ? null != this.width && -1 != this.width.toString().indexOf("px") && e.width(this.width) : e.width(this.width); var t = this.host.height() - this.titleHeight - this.columnHeaderHeight, i = "View" + this.element.id; e.find("#cellsTable" + i).height(t), e.find("#calendarRowHeader" + i).height(t), this.refreshControl() } }, resize: function () { this.updateSize() }, clear: function () { "range" == this.selectionMode ? (this._clicks = 1, this.setRange(null, null), this._raiseEvent(7)) : this.setDate(null, "mouse"), this._clicks = 0, this.selection = { from: null, to: null } }, today: function () { "range" == this.selectionMode ? this.setRange(new Date, new Date) : this.setDate(new Date, "mouse") }, propertyChangedHandler: function (t, i, s, r) { if (void 0 != this.isInitialized && 0 != this.isInitialized && "enableHover" != i && "keyboardNavigation" != i) { if ("localization" == i && this.localization && (this.localization.backString && (this.backText = this.localization.backString), this.localization.forwardString && (this.forwardText = this.localization.forwardString), this.localization.todayString && (this.todayString = this.localization.todayString), this.localization.clearString && (this.clearString = this.localization.clearString), this.firstDayOfWeek = this.localization.calendar.firstDay), "culture" == i) try { if (e.global) e.global.preferCulture(t.culture), t.localization.calendar = e.global.culture.calendar; else if (Globalize) { var o = Globalize.culture(t.culture); t.localization.calendar = o.calendar } } catch (e) { } if ("views" == i) return -1 == t.views.indexOf("month") && (t.view = "year"), -1 == t.views.indexOf("year") && -1 == t.views.indexOf("month") && (t.view = "decade"), void t.render(); "showFooter" == i && t.render(), "width" != i && "height" != i ? "theme" == i ? e.jqx.utilities.setTheme(s, r, t.host) : "rowHeaderWidth" == i || "showWeekNumbers" == i ? t.render() : (t.view = "month", t.render()) : t.updateSize() } } }) }(jQuery), function (e) { e.jqx._jqxCalendar.cell = function (t) { return { dateTime: new e.jqx._jqxDateTimeInput.getDateTime(t), _date: t, getDate: function () { return this._date }, setDate: function (t) { this.dateTime = new e.jqx._jqxDateTimeInput.getDateTime(t), this._date = t }, isToday: !1, isWeekend: !1, isOtherMonth: !1, isVisible: !0, isSelected: !1, isHighlighted: !1, element: null, row: -1, column: -1, tooltip: null } }, e.jqx._jqxCalendar.monthView = function (e, t, i, s, r, o) { return { start: e, end: t, cells: i, rowCells: s, columnCells: r, element: o } } }(jQuery), function (e) { e.jqx.jqxWidget("jqxDateTimeInput", "", {}), e.extend(e.jqx._jqxDateTimeInput.prototype, { defineInstance: function () { void 0 == this.value && (this.value = e.jqx._jqxDateTimeInput.getDateTime(new Date), this.value._setHours(0), this.value._setMinutes(0), this.value._setSeconds(0), this.value._setMilliseconds(0)), void 0 == this.minDate && (this.minDate = e.jqx._jqxDateTimeInput.getDateTime(new Date), this.minDate._setYear(1900), this.minDate._setMonth(1), this.minDate._setDay(1), this.minDate._setHours(1), this.minDate._setMinutes(1), this.minDate._setSeconds(1), this.minDate._setMilliseconds(1)), this.defaultMinDate = this.minDate, void 0 == this.maxDate && (this.maxDate = e.jqx._jqxDateTimeInput.getDateTime(new Date), this.maxDate._setYear(2100), this.maxDate._setMonth(1), this.maxDate._setDay(1), this.maxDate._setHours(1), this.maxDate._setMinutes(1), this.maxDate._setSeconds(1), this.maxDate._setMilliseconds(1)), this.defaultMaxDate = this.maxDate, this.min = new Date(1900, 0, 1), this.max = new Date(2100, 0, 1), this.rowHeaderWidth = 25, this.enableViews = !0, this.views = ["month", "year", "decade"], this.selectableDays = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], this.change = null, this.changing = null, this.columnHeaderHeight = 20, this.titleHeight = 25, void 0 == this.firstDayOfWeek && (this.firstDayOfWeek = 0), void 0 == this.showWeekNumbers && (this.showWeekNumbers = !1), this.cookies = !1, this.cookieoptions = null, this.showFooter = !1, void 0 === this.formatString && (this.formatString = "dd/MM/yyyy"), void 0 === this.width && (this.width = 200), void 0 === this.height && (this.height = 25), void 0 === this.dayNameFormat && (this.dayNameFormat = "firstTwoLetters"), void 0 === this.textAlign && (this.textAlign = "left"), void 0 === this.readonly && (this.readonly = !1), void 0 === this.culture && (this.culture = "default"), this.activeEditor = this.activeEditor || null, void 0 === this.showCalendarButton && (this.showCalendarButton = !0), void 0 == this.openDelay && (this.openDelay = 250), void 0 === this.closeDelay && (this.closeDelay = 300), void 0 === this.closeCalendarAfterSelection && (this.closeCalendarAfterSelection = !0), this.isEditing = !1, this.enableBrowserBoundsDetection = !1, this.dropDownHorizontalAlignment = "left", this.enableAbsoluteSelection = !1, this.disabled = !1, this.buttonSize = 18, this.animationType = "slide", this.dropDownWidth = "200px", this.dropDownHeight = "205px", this.selectionMode = "default", this.rtl = !1, this._editor = !1, this.todayString = "Today", this.clearString = "Clear", this.popupZIndex = 9999999999999, this.allowNullDate = !0, this.enableHover = !0, this.allowKeyboardDelete = !0, this.localization = { backString: "Back", forwardString: "Forward", todayString: "Today", clearString: "Clear", calendar: { name: "Gregorian_USEnglish", "/": "/", ":": ":", firstDay: 0, days: { names: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], namesAbbr: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], namesShort: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"] }, months: { names: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", ""], namesAbbr: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", ""] }, AM: ["AM", "am", "AM"], PM: ["PM", "pm", "PM"], eras: [{ name: "A.D.", start: null, offset: 0 }], twoDigitYearMax: 2029, patterns: { d: "M/d/yyyy", D: "dddd, MMMM dd, yyyy", t: "h:mm tt", T: "h:mm:ss tt", f: "dddd, MMMM dd, yyyy h:mm tt", F: "dddd, MMMM dd, yyyy h:mm:ss tt", M: "MMMM dd", Y: "yyyy MMMM", S: "yyyy'-'MM'-'dd'T'HH':'mm':'ss", ISO: "yyyy-MM-dd hh:mm:ss" } } }, this.events = ["valuechanged", "textchanged", "mousedown", "mouseup", "keydown", "keyup", "keypress", "open", "close", "change"], this.aria = { "aria-valuenow": { name: "getDate", type: "date" }, "aria-valuetext": { name: "getText", type: "string" }, "aria-valuemin": { name: "min", type: "date" }, "aria-valuemax": { name: "max", type: "date" }, "aria-disabled": { name: "disabled", type: "boolean" } } }, createInstance: function (t) { var i = ""; if (!this.host.jqxCalendar) throw new Error("jqxDateTimeInput: Missing reference to jqxcalendar.js."); if (this.host.attr("value")) { i = !0; var s = this.host.attr("value"); "range" != this.selectionMode && (void 0 == (r = new Date(s)) || isNaN(r) || (this.value = e.jqx._jqxDateTimeInput.getDateTime(r))) } if (null != this.value && this.value instanceof Date) this.value = e.jqx._jqxDateTimeInput.getDateTime(this.value); else if (null != this.value && "string" == typeof this.value) { var r = new Date(this.value); void 0 == r || isNaN(r) ? this.value.indexOf(",") >= 0 && (this.value = this.value.replace(/\,/g, "/"), void 0 == (r = new Date(this.value)) || isNaN(r) || (this.value = e.jqx._jqxDateTimeInput.getDateTime(r))) : this.value = e.jqx._jqxDateTimeInput.getDateTime(r) } if (this.host.attr("data-role", "input"), this.render(), e.jqx.aria(this), null != this.getDate() ? e.jqx.aria(this, "aria-label", "Current focused date is " + this.getDate().toLocaleString()) : e.jqx.aria(this, "aria-label", "Current focused date is Null"), this.minDate !== this.defaultMinDate && (this.min = this.minDate), this.maxDate !== this.defaultMaxDate && (this.max = this.maxDate), this.setMaxDate(this.max, !1), this.setMinDate(this.min, !1), "range" == this.selectionMode) if (i) { var o = (s = this.host.attr("value")).substring(0, s.indexOf("-")), a = s.substring(s.indexOf("-") + 1), n = new Date(o), l = new Date(a); void 0 == n || isNaN(n) || void 0 == l || isNaN(l) || this.setRange(n, l) } else null != this.getDate() && this.setRange(this.getDate(), this.getDate()) }, _format: function (t, i, s) { var r = !1; try { void 0 != Globalize && (r = !0) } catch (e) { } if (e.global) return e.global.format(t, i, this.culture); if (!r) { if (e.jqx.dataFormat) return t instanceof Date ? e.jqx.dataFormat.formatdate(t, i, this.localization.calendar) : "number" == typeof t ? e.jqx.dataFormat.formatnumber(t, i, this.localization.calendar) : e.jqx.dataFormat.formatdate(t, i, this.localization.calendar); throw new Error("jqxDateTimeInput: Missing reference to globalize.js.") } try { return i = Globalize.format(t, i, this.culture) } catch (e) { return Globalize.format(t, i) } }, render: function () { this._removeHandlers(), this.element.innerHTML = "", this.host.attr({ role: "textbox" }), this.id = e.jqx.utilities.createId(); e.jqx.utilities.createId(), e.jqx.utilities.createId(); this._setSize(), null == this.width && (this.width = this.host.width(), this.host.width(this.width)), this.touch = e.jqx.mobile.isTouchDevice(); var t = e("<div class='jqx-max-size jqx-position-relative'></div>").appendTo(this.host); this.dateTimeInput = e("<input class='jqx-position-absolute' id='input" + this.element.id + "' autocomplete='off' type='textarea'/>").appendTo(t), this.dateTimeInput.addClass(this.toThemeProperty("jqx-reset")), this.dateTimeInput.addClass(this.toThemeProperty("jqx-clear")), this.dateTimeInput.addClass(this.toThemeProperty("jqx-input-content")), this.dateTimeInput.addClass(this.toThemeProperty("jqx-widget-content")), this.dateTimeInput.addClass(this.toThemeProperty("jqx-rc-all")); var i = this.host.attr("name"); i && this.dateTimeInput.attr("name", i), this.host.attr("tabindex") && (this.dateTimeInput.attr("tabindex", this.host.attr("tabindex")), this.host.removeAttr("tabindex")), this.rtl && (this.dateTimeInput.css("direction", "rtl"), this.dateTimeInput.addClass("jqx-rtl")), this.calendarButton = e("<div style='height: 100%;' class='jqx-position-absolute'><div></div></div>").appendTo(t), this.rtl ? this.calendarButton.addClass(this.toThemeProperty("jqx-action-button-rtl")) : this.calendarButton.addClass(this.toThemeProperty("jqx-action-button")), this.calendarButtonIcon = e(this.calendarButton.children()[0]), this.calendarButtonIcon.addClass(this.toThemeProperty("jqx-icon")), this.calendarButtonIcon.addClass(this.toThemeProperty("jqx-icon-calendar")), this.calendarButton.addClass(this.toThemeProperty("jqx-fill-state-normal")), this.rtl ? this.calendarButton.addClass(this.toThemeProperty("jqx-rc-l")) : this.calendarButton.addClass(this.toThemeProperty("jqx-rc-r")); a = this; if (this._arrange(), null != e.jqx._jqxCalendar && void 0 != e.jqx._jqxCalendar) try { var s = "calendar" + this.id, r = e(e.find("#" + s)); r.length > 0 && r.remove(), e.jqx.aria(this, "aria-owns", s), e.jqx.aria(this, "aria-haspopup", !0), e.jqx.aria(this, "aria-readonly", "range" == this.selectionMode); var o = e("<div style='overflow: hidden; background: transparent; position: absolute;' id='calendar" + this.id + "'><div id='innerCalendar" + this.id + "'></div></div>"); "opera" == e.jqx.utilities.getBrowser().browser && o.hide(), o.appendTo(document.body), this.container = o, this.calendarContainer = e(e.find("#innerCalendar" + this.id)).jqxCalendar({ changing: this.changing, change: this.change, enableViews: this.enableViews, selectableDays: this.selectableDays, views: this.views, rowHeaderWidth: this.rowHeaderWidth, titleHeight: this.titleHeight, columnHeaderHeight: this.columnHeaderHeight, _checkForHiddenParent: !1, enableAutoNavigation: !1, canRender: !1, localization: this.localization, todayString: this.todayString, clearString: this.clearString, dayNameFormat: this.dayNameFormat, rtl: this.rtl, culture: this.culture, showFooter: this.showFooter, selectionMode: this.selectionMode, firstDayOfWeek: this.firstDayOfWeek, showWeekNumbers: this.showWeekNumbers, width: this.dropDownWidth, height: this.dropDownHeight, theme: this.theme }), this.calendarContainer.css({ position: "absolute", zIndex: this.popupZIndex, top: 0, left: 0 }), this.calendarContainer.addClass(this.toThemeProperty("jqx-popup")), e.jqx.browser.msie && this.calendarContainer.addClass(this.toThemeProperty("jqx-noshadow")), this._calendar = e.data(this.calendarContainer[0], "jqxCalendar").instance; var a = this; this._calendar.today = function () { a.today() }, this._calendar.clear = function () { a.clear() }, "opera" == e.jqx.utilities.getBrowser().browser && o.show(), o.height(parseInt(this.calendarContainer.height()) + 25), o.width(parseInt(this.calendarContainer.width()) + 25), "range" == this.selectionMode && (this.readonly = !0), "none" == this.animationType ? this.container.css("display", "none") : this.container.hide() } catch (e) { } if (e.global && e.global.preferCulture(this.culture), this.selectedText = "", this._addHandlers(), this.self = this, this.oldValue = this.getDate(), this.items = new Array, this.editors = new Array, this._loadItems(), this.editorText = "", 1 == this.readonly && this.dateTimeInput.css("readonly", this.readonly), this.dateTimeInput.css("text-align", this.textAlign), this.host.addClass(this.toThemeProperty("jqx-widget")), this.host.addClass(this.toThemeProperty("jqx-datetimeinput")), this.host.addClass(this.toThemeProperty("jqx-input")), this.host.addClass(this.toThemeProperty("jqx-overflow-hidden")), this.host.addClass(this.toThemeProperty("jqx-rc-all")), this.host.addClass(this.toThemeProperty("jqx-reset")), this.host.addClass(this.toThemeProperty("jqx-clear")), this.host.addClass(this.toThemeProperty("jqx-widget-content")), this.propertyChangeMap.disabled = function (t, i, s, r) { r ? (t.host.addClass(a.toThemeProperty("jqx-input-disabled")), t.host.addClass(a.toThemeProperty("jqx-fill-state-disabled"))) : (t.host.removeClass(a.toThemeProperty("jqx-fill-state-disabled")), t.host.removeClass(a.toThemeProperty("jqx-input-disabled"))), e.jqx.aria(this, "aria-disabled", r) }, this.disabled && (this.host.addClass(this.toThemeProperty("jqx-input-disabled")), this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"))), this.host.parents("form").length > 0 && this.addHandler(this.host.parents("form"), "reset", function () { setTimeout(function () { a.setDate(new Date) }, 10) }), this.cookies) { var n = e.jqx.cookie.cookie("jqxDateTimeInput" + this.element.id); null != n && this.setDate(new Date(n)) } if (e.jqx.browser.msie && e.jqx.browser.version < 8 && this.host.parents(".jqx-window").length > 0) { var l = this.host.parents(".jqx-window").css("z-index"); this.container.css("z-index", l + 10), this.calendarContainer.css("z-index", l + 10) } "default" != this.culture && this._applyCulture(), this.value && (this.calendarContainer.jqxCalendar("_isDisabled", this.value.dateTime) ? this.dateTimeInput.addClass(this.toThemeProperty("jqx-input-invalid")) : this.dateTimeInput.removeClass(this.toThemeProperty("jqx-input-invalid"))) }, val: function (e) { if (0 != arguments.length) { if (null == e && this.setDate(null), "range" == this.selectionMode) return this.setRange(arguments[0], arguments[1]), this.getText(); if (e instanceof Date && this.setDate(e), "string" == typeof e) { if ("date" == e) return this.getDate(); this.setDate(e) } } return this.getText() }, _setSize: function () { null != this.width && -1 != this.width.toString().indexOf("px") ? this.host.width(this.width) : void 0 == this.width || isNaN(this.width) || this.host.width(this.width), null != this.height && -1 != this.height.toString().indexOf("px") ? this.host.height(this.height) : void 0 == this.height || isNaN(this.height) || this.host.height(this.height); var t = !1; null != this.width && -1 != this.width.toString().indexOf("%") && (t = !0, this.host.width(this.width)), null != this.height && -1 != this.height.toString().indexOf("%") && (t = !0, this.host.height(this.height)); var i = this, s = function () { i.calendarContainer && i._arrange() }; if (t && this.calendarContainer) { this._arrange(); var r = this.host.width(); "auto" != this.dropDownWidth && (r = this.dropDownWidth), this.calendarContainer.jqxCalendar({ width: r }), this.container.width(parseInt(r) + 25) } e.jqx.utilities.resize(this.host, function () { s() }) }, _arrange: function () { null == this.height && (this.height = 27, this.host.height(27)); var t = parseInt(this.host.width()), i = parseInt(this.host.height()), s = this.buttonSize, r = 2; this.showCalendarButton || (s = 0, buttonHeight = 0, this.calendarButton.hide(), r = 0); var o = t - s - 1 * r; o > 0 && (this.dateTimeInput[0].style.width = o + "px"), this.rtl && (this.dateTimeInput[0].style.width = -1 + o + "px"), this.dateTimeInput[0].style.left = "0px", this.dateTimeInput[0].style.top = "0px", this.calendarButton[0].style.width = s + 1 + "px", this.calendarButton[0].style.left = 1 + o + "px"; var a = this.dateTimeInput.height(); 0 == a && (a = parseInt(this.dateTimeInput.css("font-size")) + 3), -1 == this.dateTimeInput[0].className.indexOf("jqx-rc-all") && this.dateTimeInput.addClass(this.toThemeProperty("jqx-rc-all")); var n = parseInt(i) / 2 - parseInt(a) / 2; n > 0 && (this.dateTimeInput[0].style.marginTop = parseInt(n) + "px"), this.rtl && (this.calendarButton[0].style.width = s + "px", this.calendarButton.css("left", "0px"), this.dateTimeInput.css("left", this.calendarButton.width()), e.jqx.browser.msie && e.jqx.browser.version <= 8 && this.dateTimeInput.css("left", 1 + this.calendarButton.width())) }, _removeHandlers: function () { this.removeHandler(e(document), "mousedown." + this.id), this.dateTimeInput && (this.removeHandler(this.dateTimeInput, "keydown." + this.id), this.removeHandler(this.dateTimeInput, "blur"), this.removeHandler(this.dateTimeInput, "focus"), this.removeHandler(this.host, "focus"), this.removeHandler(this.dateTimeInput, "mousedown"), this.removeHandler(this.dateTimeInput, "mouseup"), this.removeHandler(this.dateTimeInput, "keydown"), this.removeHandler(this.dateTimeInput, "keyup"), this.removeHandler(this.dateTimeInput, "keypress")), null != this.calendarButton && this.removeHandler(this.calendarButton, "mousedown"), null != this.calendarContainer && (this.removeHandler(this.calendarContainer, "cellSelected"), this.removeHandler(this.calendarContainer, "cellMouseDown")), this.removeHandler(e(window), "resize." + this.id) }, isOpened: function () { var t = this, i = e.data(document.body, "openedJQXCalendar" + this.id); return null != i && i == t.calendarContainer }, wheel: function (e, t) { var i = 0; if (e || (e = window.event), e.originalEvent && e.originalEvent.wheelDelta && (e.wheelDelta = e.originalEvent.wheelDelta), e.wheelDelta ? i = e.wheelDelta / 120 : e.detail && (i = -e.detail / 3), i) { var s = t._handleDelta(i); return !s && (e.preventDefault && e.preventDefault(), e.returnValue = !1, s) } e.preventDefault && e.preventDefault(), e.returnValue = !1 }, _handleDelta: function (e) { return e < 0 ? this.spinDown() : this.spinUp(), !1 }, focus: function () { try { var e = this; this._setSelectionStart(0), this._selectGroup(-1), this.dateTimeInput.focus(), setTimeout(function () { e._setSelectionStart(0), e._selectGroup(-1), e.dateTimeInput.focus() }, 15) } catch (e) { } }, _addHandlers: function () { this.element.id, this.element; var t = this; this.host.parents() && this.addHandler(this.host.parents(), "scroll.datetimeinput" + this.element.id, function (e) { t.isOpened() && t.close() }), this.addHandler(this.host, "mouseenter", function () { !t.disabled && t.enableHover && (hovered = !0, t.calendarButtonIcon.addClass(t.toThemeProperty("jqx-icon-calendar-hover")), t.calendarButton.addClass(t.toThemeProperty("jqx-fill-state-hover"))) }), this.addHandler(this.host, "mouseleave", function () { !t.disabled && t.enableHover && (t.calendarButtonIcon.removeClass(t.toThemeProperty("jqx-icon-calendar-hover")), t.calendarButton.removeClass(t.toThemeProperty("jqx-fill-state-hover"))) }), this.addHandler(this.host, "mousewheel", function (e) { t.wheel(e, t) }), this.addHandler(e(document), "mousedown." + this.id, this._closeOpenedCalendar, { me: this }), e.jqx.mobile.isTouchDevice() && this.addHandler(e(document), e.jqx.mobile.getTouchEventName("touchstart") + "." + this.id, this._closeOpenedCalendar, { me: this }), this.addHandler(this.dateTimeInput, "keydown." + this.id, function (i) { var s = e.data(document.body, "openedJQXCalendar" + t.id); if (null != s && s == t.calendarContainer) return t.handleCalendarKey(i, t) }), null != this.calendarContainer && (this.addHandler(this.calendarContainer, "keydown", function (e) { if (13 == e.keyCode) return !(t.isOpened() && !t._calendar._viewAnimating && "month" == t._calendar.view) || (t.hideCalendar("selected"), t.dateTimeInput.focus(), !1); if (9 == e.keyCode) { if (t.isOpened()) return t.hideCalendar("selected"), !0 } else if (27 == e.keyCode) return !t.isOpened() || (t.hideCalendar(), t.dateTimeInput.focus(), !1); if (115 == e.keyCode) { if (t.isOpened()) return t.hideCalendar(), t.dateTimeInput.focus(), !1; if (!t.isOpened()) return t.showCalendar(), t.dateTimeInput.focus(), !1 } if (e.altKey) if (38 == e.keyCode) { if (t.isOpened()) return t.hideCalendar(), t.dateTimeInput.focus(), !1 } else if (40 == e.keyCode && !t.isOpened()) return t.showCalendar(), t.dateTimeInput.focus(), !1 }), this.addHandler(this.calendarContainer, "cellSelected", function (i) { if (t.closeCalendarAfterSelection) { e.data(document.body, "openedJQXCalendarValue"); "mouse" == i.args.selectionType && ("range" != t.selectionMode ? t.hideCalendar("selected") : 0 == t._calendar._clicks && t.hideCalendar("selected")) } }), this.addHandler(this.calendarContainer, "cellMouseDown", function (i) { t.closeCalendarAfterSelection && t._calendar.value && e.data(document.body, "openedJQXCalendarValue", new e.jqx._jqxDateTimeInput.getDateTime(t._calendar.value.dateTime)) })), this.addHandler(this.dateTimeInput, "blur", function (e) { if (null != t.value) { t.isEditing = !1; t.value.dateTime.getDay(), t._oldDT; t._validateValue(!0), e.stopPropagation && e.stopPropagation(), t._updateText(), t._raiseEvent(9, e) } t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")) }), this.addHandler(this.host, "focus", function (e) { t.focus() }), this.addHandler(this.dateTimeInput, "focus", function (e) { if (null != t.value) { "range" != t.selectionMode ? t._oldDT = new Date(t.value.dateTime) : t._oldDT = t.getRange(); var i = t._selection(); t.isEditing = !0, t._validateValue(), t._updateText(), t._setSelectionStart(0), t._selectGroup(-1, i), t.host.addClass(t.toThemeProperty("jqx-fill-state-focus")) } else t._setSelectionStart(0), t._selectGroup(-1), t.host.addClass(t.toThemeProperty("jqx-fill-state-focus")); if (e.stopPropagation && e.stopPropagation(), e.preventDefault) return e.preventDefault(), !1 }); var i = "mousedown"; this.touch && (i = e.jqx.mobile.getTouchEventName("touchstart")), this.addHandler(this.calendarButton, i, function (e) { var i = "block" == t.container.css("display"); if (!t.disabled && !t.isanimating) { if (i) return t.hideCalendar(), !1; t.showCalendar(), e.preventDefault() } }), this.addHandler(this.dateTimeInput, "mousedown", function (e) { return t._raiseEvent(2, e) }), this.addHandler(this.dateTimeInput, "mouseup", function (e) { return t._raiseEvent(3, e) }), this.addHandler(this.dateTimeInput, "keydown", function (e) { return t._raiseEvent(4, e) }), this.addHandler(this.dateTimeInput, "keyup", function (e) { return t._raiseEvent(5, e) }), this.addHandler(this.dateTimeInput, "keypress", function (e) { return t._raiseEvent(6, e) }) }, createID: function () { var e = Math.random() + ""; return e = e.replace(".", ""), e = "99" + e, "dateTimeInput" + (e /= 1) }, setMaxDate: function (t, i) { null != t && (null != t && "string" == typeof t && "Invalid Date" == (t = new Date(t)) || (this.maxDate = e.jqx._jqxDateTimeInput.getDateTime(t), null != this._calendar && this._calendar.setMaxDate(t), 0 != i && (null != this.getDate() && this.getDate() > t && this.setDate(t), e.jqx.aria(this, "aria-valuemax", t), this._refreshValue(), this._updateText()))) }, getMaxDate: function () { return null != this.maxDate && void 0 != this.maxDate ? this.maxDate.dateTime : null }, setMinDate: function (t, i) { null != t && (null != t && "string" == typeof t && "Invalid Date" == (t = new Date(t)) || (this.minDate = e.jqx._jqxDateTimeInput.getDateTime(t), null != this._calendar && this._calendar.setMinDate(t), 0 != i && (null != this.getDate() && this.getDate() < t && this.setDate(t), e.jqx.aria(this, "aria-valuemin", t), this._refreshValue(), this._updateText()))) }, getMinDate: function () { return null != this.minDate && void 0 != this.minDate ? this.minDate.dateTime : null }, _applyCulture: function () { var t = !1; try { void 0 != Globalize && (t = !0) } catch (e) { } try { if (e.global) e.global.preferCulture(this.culture), this.localization.calendar = e.global.culture.calendar; else if (t) { var i = Globalize.culture(this.culture); this.localization.calendar = i.calendar } this._loadItems(), null != this._calendar && (this._calendar.culture = this.culture, this._calendar.localization = this.localization, this._calendar.render()) } catch (e) { } }, propertyMap: function (e) { return "value" == e ? "range" != this.selectionMode ? this.getDate() : this.getRange() : null }, propertyChangedHandler: function (t, i, s, r) { if (void 0 != t.isInitialized && 0 != t.isInitialized) { if ("popupZIndex" == i && t.calendarContainer.css({ zIndex: r }), "selectionMode" == i && (t._calendar.selectionMode = r, t.refreshValue()), "min" == i && ("string" == typeof r ? t.setMinDate(new Date(r)) : t.setMinDate(r)), "max" == i && ("string" == typeof r ? t.setMaxDate(new Date(r)) : t.setMaxDate(r)), "value" == i) if (null != r && r instanceof Date) { if (isNaN(r.getFullYear()) || isNaN(r.getMonth()) || isNaN(r.getDate())) return void (this.value = s); r = e.jqx._jqxDateTimeInput.getDateTime(r) } else if (null != r && "string" == typeof r) { var o = new Date(r); void 0 == o || isNaN(o) || (this.value = e.jqx._jqxDateTimeInput.getDateTime(o)) } "views" == i && t.calendarContainer.jqxCalendar({ views: r }), "enableViews" == i && t.calendarContainer.jqxCalendar({ enableViews: r }), "selectableDays" == i && t.calendarContainer.jqxCalendar({ selectableDays: r }), "showFooter" == i && t.calendarContainer.jqxCalendar({ showFooter: r }), "rtl" == i && (t.calendarContainer.jqxCalendar({ rtl: r }), r ? (t.dateTimeInput.css("direction", "rtl"), t.dateTimeInput.addClass("jqx-rtl")) : (t.dateTimeInput.css("direction", "ltr"), t.dateTimeInput.removeClass("jqx-rtl"))), "todayString" != i && "clearString" != i || t.calendarContainer.jqxCalendar({ clearString: t.clearString, todayString: t.todayString }), "dayNameFormat" == i && t.calendarContainer.jqxCalendar({ dayNameFormat: r }), "firstDayOfWeek" == i && t.calendarContainer.jqxCalendar({ firstDayOfWeek: r }), "showWeekNumbers" == i && t.calendarContainer.jqxCalendar({ showWeekNumbers: r }), "culture" == i || "localization" == i ? t._applyCulture() : "formatString" == i && t._loadItems(), "theme" == i && e.jqx.utilities.setTheme(s, r, t.host), "width" != i && "height" != i ? (t._setOption(i, r), "dropDownWidth" != i && "dropDownHeight" != i || (t.calendarContainer.jqxCalendar({ width: t.dropDownWidth, height: t.dropDownHeight }), t._calendar.render(), t.container.height(t.calendarContainer.height()), t.container.width(t.calendarContainer.width()))) : t.refresh() } }, clear: function () { this.allowNullDate ? ("range" != this.selectionMode ? this.setDate(null) : (this._calendar._clicks = 1, this.setRange(null, null)), this._calendar._clicks = 0) : "range" != this.selectionMode ? this.setDate(me.getMinDate()) : (this._calendar._clicks = 1, this.setRange(me.getMinDate(), me.getMinDate()), this._calendar._clicks = 0), this.hideCalendar() }, today: function () { var e = new Date; e.setHours(0, 0, 0, 0), "range" != this.selectionMode ? this.setDate(e) : (this._calendar._clicks = 1, this.setRange(e, e), this._calendar._clicks = 0), this.hideCalendar() }, setDate: function (t) { if (null != t && "string" == typeof t && (t.toString().indexOf(",") >= 0 && (t = t.replace(/\,/g, "/"), t = new Date(t)), "" != t)) { var i = t; if ("Invalid Date" == (t = new Date(t)) && (void 0 != Globalize ? t = Globalize.parseDate(i, this.formatString, this.culture) : e.jqx.dataFormat && (t = e.jqx.dataFormat.parsedate(i, this.formatString, this.localization.calendar)), "Invalid Date" == t)) return } null != t && "null" != t && "undefined" != t || this.allowNullDate || (t = this.min), "Invalid Date" == t && (t = null), null != t && "null" != t && "undefined" != t && "" !== t ? t < this.getMinDate() || t > this.getMaxDate() || (null == this.value && (this.value = new e.jqx._jqxDateTimeInput.getDateTime(new Date), this.value._setHours(0), this.value._setMinutes(0), this.value._setSeconds(0), this.value._setMilliseconds(0)), t.getFullYear && (this.value._setYear(t.getFullYear()), this.value._setDay(1), this.value._setMonth(t.getMonth() + 1), this.value._setHours(t.getHours()), this.value._setMinutes(t.getMinutes()), this.value._setSeconds(t.getSeconds()), this.value._setMilliseconds(t.getMilliseconds()), this.value._setDay(t.getDate())), this._refreshValue(), this.cookies && null != this.value && e.jqx.cookie.cookie("jqxDateTimeInput" + this.element.id, this.value.dateTime.toString(), this.cookieoptions), this._raiseEvent("0", t), this._raiseEvent("9", t)) : null != this.value && (this.value = null, this._calendar.setDate(null), this._refreshValue(), this.cookies && null != this.value && e.jqx.cookie.cookie("jqxDateTimeInput" + this.element.id, this.value.dateTime.toString(), this.cookieoptions), this._setSelectionStart(0), this._selectGroup(-1), this._raiseEvent("0", t), this._raiseEvent("9", t)) }, getDate: function () { return void 0 == this.value ? null : new Date(this.value.dateTime) }, getText: function () { return this.dateTimeInput.val() }, setRange: function (t, i) { if ("Invalid Date" == t && (t = null), "Invalid Date" == i && (i = null), !(null != t && "string" == typeof t && "Invalid Date" == (t = new Date(t)) || null != i && "string" == typeof i && "Invalid Date" == (i = new Date(i)) || t && isNaN(t) && "NaN" == t.toString() && "string" != typeof t || i && isNaN(i) && "NaN" == i.toString() && "string" != typeof i)) { this._calendar.setRange(t, i); var s = t; null != s && s.getFullYear && (null == this.value && (this.value = new e.jqx._jqxDateTimeInput.getDateTime(new Date), this.value._setHours(0), this.value._setMinutes(0), this.value._setSeconds(0), this.value._setMilliseconds(0)), this.value._setYear(s.getFullYear()), this.value._setMonth(s.getMonth() + 1), this.value._setHours(s.getHours()), this.value._setMinutes(s.getMinutes()), this.value._setSeconds(s.getSeconds()), this.value._setMilliseconds(s.getMilliseconds()), this.value._setDay(s.getDate())), this._refreshValue(), this.value ? this._raiseEvent("0", this.value.dateTime) : this._raiseEvent("0", null) } }, getRange: function () { return this._calendar.getRange() }, _validateValue: function (e) { for (var t = 0; t < this.items.length; t++) { var i = this.editors[t].value; switch (this.items[t].type) { case "FORMAT_AMPM": i < 0 ? i = 0 : i > 1 && (i = 1); break; case "Character": break; case "Day": i < 1 ? i = 1 : i > 31 && (i = 31); break; case "FORMAT_hh": i < 1 ? i = 1 : i > 12 && (i = 12); break; case "FORMAT_HH": i < 0 ? i = 0 : i > 23 && (i = 23); break; case "Millisecond": i < 0 ? i = 0 : i > 99 && (i = 99); break; case "Minute": i < 0 ? i = 0 : i > 59 && (i = 59); break; case "Month": i < 1 ? i = 1 : i > 12 && (i = 12); break; case "ReadOnly": break; case "Second": i < 0 ? i = 0 : i > 59 && (i = 59); break; case "Year": i < this.minDate.year ? i = this.minDate.year : i > this.maxDate.year && (i = this.maxDate.year) } this.editors[t].value != i && (this.editors[t].value = i, !0) } this.updateValue(), null != this.value && !0 === e && (this.value.dateTime > this.maxDate.dateTime ? (this._internalSetValue(this.maxDate), this._updateEditorsValue()) : this.value.dateTime < this.minDate.dateTime && (this._internalSetValue(this.minDate), this._updateEditorsValue()), this._updateText()) }, spinUp: function () { if (null != this.value) { if (null != this.activeEditor) { var e = this.editors.indexOf(this.activeEditor); if (-1 == e) return; "Day" == this.items[e].type && null != this.value && (this.activeEditor.maxValue = this.value._daysInMonth(this.value.year, this.value.month)); var t = this.activeEditor.positions; this.activeEditor.increaseValue(this.enableAbsoluteSelection), this.activeEditor.positions = t } this.isEditing && (this.isEditing = !1), this.updateValue(), this.isEditing = !0, this._updateText(); var i = this.editors.indexOf(this.activeEditor); i >= 0 && this._selectGroup(i) } }, spinDown: function () { if (null != this.value) { if (null != this.activeEditor) { var e = this.editors.indexOf(this.activeEditor); if (-1 == e) return; "Day" == this.items[e].type && null != this.value && (this.activeEditor.maxValue = this.value._daysInMonth(this.value.year, this.value.month)); var t = this.activeEditor.positions; this.activeEditor.decreaseValue(this.enableAbsoluteSelection), this.activeEditor.positions = t } this.isEditing && (this.isEditing = !1), this.updateValue(), this.isEditing = !0, this._updateText(); var i = this.editors.indexOf(this.activeEditor); i >= 0 && this._selectGroup(i) } }, _passKeyToCalendar: function (e) { if (13 == e.keyCode || 9 == e.keyCode) return this.hideCalendar("selected"), !0; if (27 == e.keyCode) { this.calendarContainer; var t = this._calendar, i = this.closeCalendarAfterSelection; this.closeCalendarAfterSelection = !1, t.setDate(this.value.dateTime), this.closeCalendarAfterSelection = i, this.hideCalendar() } i = this.closeCalendarAfterSelection; this.closeCalendarAfterSelection = !1; var s = this._calendar._handleKey(e); return this.closeCalendarAfterSelection = i, s }, handleCalendarKey: function (t, i) { e(t.target); var s = e.data(document.body, "openedJQXCalendar" + this.id); return !(null != s && s.length > 0) || i._passKeyToCalendar(t) }, _findPos: function (t) { if (null != t) { for (; t && ("hidden" == t.type || 1 != t.nodeType || e.expr.filters.hidden(t)) ;) t = t.nextSibling; var i = e(t).coord(!0); return [i.left, i.top] } }, testOffset: function (t, i, s) { var r = t.outerWidth(), o = t.outerHeight(), a = e(window).width() + e(window).scrollLeft(), n = e(window).height() + e(window).scrollTop(); if (i.left + r > a && r > this.host.width()) { var l = this.host.coord().left, h = r - this.host.width(); i.left = l - h + 2 } return i.left < 0 && (i.left = parseInt(this.host.coord().left) + "px"), i.top -= Math.min(i.top, i.top + o > n && n > o ? Math.abs(o + s + 23) : 0), i }, open: function () { this.showCalendar() }, close: function (e) { this.hideCalendar() }, _getBodyOffset: function () { var t = 0, i = 0; return "0px" != e("body").css("border-top-width") && (t = parseInt(e("body").css("border-top-width")), isNaN(t) && (t = 0)), "0px" != e("body").css("border-left-width") && (i = parseInt(e("body").css("border-left-width")), isNaN(i) && (i = 0)), { left: i, top: t } }, showCalendar: function () { var t = this.calendarContainer, i = this._calendar; e.jqx.aria(this, "aria-expanded", !0), null != this.value ? "range" != this.selectionMode ? this._oldDT = new Date(this.value.dateTime) : this._oldDT = this.getRange() : this._oldDT = null, i.canRender || (i.canRender = !0, i.render()); this.container; var s, r = this, o = (e(window).scrollTop(), e(window).scrollLeft(), parseInt(this._findPos(this.host[0])[1]) + parseInt(this.host.outerHeight()) - 1 + "px"), a = parseInt(Math.round(this.host.coord(!0).left)); s = a + "px"; var n = e.jqx.mobile.isSafariMobileBrowser() || e.jqx.mobile.isWindowsPhone(); (e.jqx.utilities.hasTransform(this.host) || null != n && n) && (s = e.jqx.mobile.getLeftPos(this.element), o = e.jqx.mobile.getTopPos(this.element) + parseInt(this.host.outerHeight()), "0px" != e("body").css("border-top-width") && (o = parseInt(o) - this._getBodyOffset().top + "px"), "0px" != e("body").css("border-left-width") && (s = parseInt(s) - this._getBodyOffset().left + "px")), this.container.css("left", s), this.container.css("top", o); var l = this.closeCalendarAfterSelection; if (this.closeCalendarAfterSelection = !1, this.isEditing = !1, "default" == r.selectionMode) { this._validateValue(), this._updateText(); var h = null != this.value ? this.value.dateTime : new Date; i.setDate(h) } this.closeCalendarAfterSelection = l; var d = !1; if ("right" == this.dropDownHorizontalAlignment || this.rtl) { var c = this.container.outerWidth(), u = Math.abs(c - this.host.outerWidth() + 2); if (this.rtl || (u -= 2), c > this.host.width()) { this.container.css("left", 23 + parseInt(Math.round(a)) - u + "px") } else this.container.css("left", 25 + parseInt(Math.round(a)) + u + "px") } if (this.enableBrowserBoundsDetection) { var p = this.testOffset(t, { left: parseInt(this.container.css("left")), top: parseInt(o) }, parseInt(this.host.outerHeight())); parseInt(this.container.css("top")) != p.top ? (d = !0, t.css("top", 23), t.addClass(this.toThemeProperty("jqx-popup-up"))) : t.css("top", 0), this.container.css("top", p.top), parseInt(this.container.css("left")) != p.left && this.container.css("left", p.left) } if (this._raiseEvent(7, t), "none" != this.animationType) { this.container.css("display", "block"); var m = parseInt(t.outerHeight()); t.stop(), this.isanimating = !0, this.opening = !0, "fade" == this.animationType ? (t.css("margin-top", 0), t.css("opacity", 0), t.animate({ opacity: 1 }, this.openDelay, function () { r.isanimating = !1, r.opening = !1, e.data(document.body, "openedJQXCalendar" + r.id, t), r.calendarContainer.focus() })) : (t.css("opacity", 1), d ? t.css("margin-top", m) : t.css("margin-top", -m), t.animate({ "margin-top": 0 }, this.openDelay, function () { r.isanimating = !1, r.opening = !1, e.data(document.body, "openedJQXCalendar" + r.id, t), r.calendarContainer.focus() })) } else t.stop(), r.isanimating = !1, r.opening = !1, t.css("opacity", 1), t.css("margin-top", 0), this.container.css("display", "block"), e.data(document.body, "openedJQXCalendar" + r.id, t), this.calendarContainer.focus(); null == this.value && this._calendar && this._calendar._getSelectedCell() && (this._calendar._getSelectedCell().isSelected = !1), this.calendarButtonIcon.addClass(this.toThemeProperty("jqx-icon-calendar-pressed")), this.calendarButton.addClass(this.toThemeProperty("jqx-fill-state-hover")), this.calendarButton.addClass(this.toThemeProperty("jqx-fill-state-pressed")), this.host.addClass(this.toThemeProperty("jqx-fill-state-focus")) }, hideCalendar: function (t) { var i = this.calendarContainer, s = this.container, r = this; if (e.jqx.aria(this, "aria-expanded", !1), e.data(document.body, "openedJQXCalendar" + this.id, null), "none" != this.animationType) { var o = i.outerHeight(); i.css("margin-top", 0), this.isanimating = !0; var a = -o; parseInt(this.container.coord().top) < parseInt(this.host.coord().top) && (a = o), "fade" == this.animationType ? i.animate({ opacity: 0 }, this.closeDelay, function () { s.css("display", "none"), r.isanimating = !1 }) : i.animate({ "margin-top": a }, this.closeDelay, function () { s.css("display", "none"), r.isanimating = !1 }) } else s.css("display", "none"); void 0 != t && this._updateSelectedDate(), this.calendarButtonIcon.removeClass(this.toThemeProperty("jqx-icon-calendar-pressed")), this.calendarButton.removeClass(this.toThemeProperty("jqx-fill-state-hover")), this.calendarButton.removeClass(this.toThemeProperty("jqx-fill-state-pressed")), this.host.removeClass(this.toThemeProperty("jqx-fill-state-focus")), this._raiseEvent(8, i) }, _updateSelectedDate: function () { var t = this.value; null == t && ((t = new e.jqx._jqxDateTimeInput.getDateTime(new Date))._setHours(0), t._setMinutes(0), t._setSeconds(0), t._setMilliseconds(0)); var i = t.hour, s = t.minute, r = t.second, o = t.millisecond; if ("range" != this.selectionMode || null != this._calendar.getRange().from) { var a = new e.jqx._jqxDateTimeInput.getDateTime(this._calendar.value.dateTime); a._setHours(i), a._setMinutes(s), a._setSeconds(r), a._setMilliseconds(o), this.setDate(a.dateTime) } else this.setDate(null) }, _closeOpenedCalendar: function (t) { var i = e(t.target), s = e.data(document.body, "openedJQXCalendar" + t.data.me.id), r = !1; if (e.each(i.parents(), function () { if (this.className && this.className.indexOf) { if (-1 != this.className.indexOf("jqx-calendar")) return r = !0, !1; if (-1 != this.className.indexOf("jqx-input")) return r = !0, !1 } }), e(t.target).ischildof(t.data.me.host)) return !0; if (null != t.target && ("B" == t.target.tagName || "b" == t.target.tagName)) { var o = t.data.me.host.coord(), a = t.data.me.host.width(), n = t.data.me.host.height(), l = parseInt(o.top), h = parseInt(o.left); if (l <= t.pageY && t.pageY <= l + n && h <= t.pageX && t.pageX <= h + a) return !0 } if (null != s && !r && s.length > 0) { var d = s[0].id.toString().toString().substring(13); e(document).find("#" + d); t.data.me.hideCalendar(), e.data(document.body, "openedJQXCalendar" + t.data.me.id, null) } }, _loadItems: function () { if (null != this.value) { this.items = new Array; var e = this._getFormatValue(this.formatString); this.items = this._parseFormatValue(e), this.editors = new Array; for (var t = 0; t < this.items.length; t++) { var i = this.items[t].getDateTimeEditorByItemType(this.value, this); this.editors[t] = i } } this._updateEditorsValue(), this._updateText() }, _updateText: function () { var t = ""; if (0 == this.items.length && null != this.value && this._loadItems(), null != this.value && (this.items.length >= 1 && (t = this.format(this.value, 0, this.items.length)), this.dateTimeInput.val() != t && this._raiseEvent(1, this.value)), "range" == this.selectionMode) { var i = this.getRange(); if (fromText = this.format(this.value, 0, this.items.length), i.to) { var s = e.jqx._jqxDateTimeInput.getDateTime(i.from); fromText = this.format(s, 0, this.items.length); var r = e.jqx._jqxDateTimeInput.getDateTime(i.to); toText = this.format(r, 0, this.items.length), " - " == (t = fromText + " - " + toText) && (t = "") } else t = "" } this.dateTimeInput.val(t) }, format: function (e, t, i) { for (var s = "", r = t; r < i; ++r) { var o = this.items[r].dateParser(e, this); if (this.isEditing && "ReadOnly" != this.items[r].type && "range" != this.selectionMode) { var a = "Day" == this.items[r].type && this.items[r].format.length > 2; if ("FORMAT_AMPM" == this.items[r].type && (a = !0, o = 0 == this.editors[r].value ? this.editors[r].amString : this.editors[r].pmString), !a) for (o = this.items[r].dateParserInEditMode(new Number(this.editors[r].value), "d" + this.editors[r].maxEditPositions, this) ; o.length < this.editors[r].maxEditPositions;) o = "0" + o } s += o } return s }, _getFormatValueGroupLength: function (e) { for (i = 1; i < e.toString().length; ++i) if (e.substring(i, i + 1) != e.substring(0, 1)) return i; return e.length }, _parseFormatValue: function (t) { for (var i = new Array, s = t.toString(), r = 0; s.length > 0;) { var o = this._getFormatValueGroupLength(s), a = null; switch (s.substring(0, 1)) { case ":": case "/": o = 1, a = e.jqx._jqxDateTimeInput.DateTimeFormatItem._create(s.substring(0, 1), "ReadOnly", this.culture); break; case '"': case "'": var n = s.indexOf(s[0], 1); a = e.jqx._jqxDateTimeInput.DateTimeFormatItem._create(s.substring(1, 1 + Math.max(1, n - 1)), "ReadOnly", this.culture), o = Math.max(1, n + 1); break; case "\\": s.length >= 2 && (a = e.jqx._jqxDateTimeInput.DateTimeFormatItem._create(s.substring(1, 1), "ReadOnly", this.culture), o = 2); break; case "d": case "D": a = e.jqx._jqxDateTimeInput.DateTimeFormatItem._create(s.substring(0, o), "Day", this.culture); break; case "f": case "F": o > 7 && (o = 7), a = o > 3 ? e.jqx._jqxDateTimeInput.DateTimeFormatItem._create(s.substring(0, o), "ReadOnly", this.culture) : e.jqx._jqxDateTimeInput.DateTimeFormatItem._create(s.substring(0, o), "Millisecond", this.culture); break; case "g": a = e.jqx._jqxDateTimeInput.DateTimeFormatItem._create(s.substring(0, o), "ReadOnly", this.culture); break; case "h": a = e.jqx._jqxDateTimeInput.DateTimeFormatItem._create(s.substring(0, o), "FORMAT_hh", this.culture); break; case "H": a = e.jqx._jqxDateTimeInput.DateTimeFormatItem._create(s.substring(0, o), "FORMAT_HH", this.culture); break; case "m": a = e.jqx._jqxDateTimeInput.DateTimeFormatItem._create(s.substring(0, o), "Minute", this.culture); break; case "M": o > 4 && (o = 4), a = e.jqx._jqxDateTimeInput.DateTimeFormatItem._create(s.substring(0, o), "Month", this.culture); break; case "s": case "S": a = e.jqx._jqxDateTimeInput.DateTimeFormatItem._create(s.substring(0, o), "Second", this.culture); break; case "t": case "T": a = e.jqx._jqxDateTimeInput.DateTimeFormatItem._create(s.substring(0, o), "FORMAT_AMPM", this.culture); break; case "y": case "Y": o > 1 ? a = e.jqx._jqxDateTimeInput.DateTimeFormatItem._create(s.substring(0, o), "Year", this.culture) : (o = 1, a = e.jqx._jqxDateTimeInput.DateTimeFormatItem._create(s.substring(0, 1), dateTimeFormatInfo, "ReadOnly", this.culture)); break; case "z": a = e.jqx._jqxDateTimeInput.DateTimeFormatItem._create(s.substring(0, o), "ReadOnly", this.culture); break; default: o = 1, a = e.jqx._jqxDateTimeInput.DateTimeFormatItem._create(s.substring(0, 1), "ReadOnly", this.culture) } i[r] = e.extend(!0, {}, a), s = s.substring(o), r++ } return i }, _getFormatValue: function (e) { if (null != e && 0 != e.length || (e = "d"), 1 == e.length) switch (e.substring(0, 1)) { case "d": return this.localization.calendar.patterns.d; case "D": return this.localization.calendar.patterns.D; case "t": return this.localization.calendar.patterns.t; case "T": return this.localization.calendar.patterns.T; case "f": return this.localization.calendar.patterns.f; case "F": return this.localization.calendar.patterns.F; case "M": return this.localization.calendar.patterns.M; case "Y": return this.localization.calendar.patterns.Y; case "S": return this.localization.calendar.patterns.S } return 2 == e.length && "%" == e.substring(0, 1) && (e = e.substring(1)), e }, _updateEditorsValue: function () { var e = this.value; if (null != e) { var t = e.year, i = e.day, s = e.hour, r = e.millisecond, o = e.second, a = e.minute, n = e.month; if (null != this.items) for (var l = 0; l < this.items.length; l++) switch (this.items[l].type) { case "FORMAT_AMPM": 0 == (h = s % 12) && (h = 12), this.editors[l].value = s >= 0 && s < 12 ? 0 : 1; break; case "Day": this.editors[l].value = i; break; case "FORMAT_hh": var h = s % 12; 0 == h && (h = 12), this.editors[l].value = h; break; case "FORMAT_HH": this.editors[l].value = s; break; case "Millisecond": this.editors[l].value = r; break; case "Minute": this.editors[l].value = a; break; case "Month": this.editors[l].value = n; break; case "Second": this.editors[l].value = o; break; case "Year": this.editors[l].value = t } } }, updateValue: function () { if (!(this.isEditing || this.items && 0 == this.items.length)) { for (var t = 1, i = 1, s = 0, r = 0, o = 0, a = 0, n = 1, l = !1, h = !1, d = !1, c = new Array, u = null, p = 0, m = 0; m < this.items.length; m++) switch (this.items[m].type) { case "FORMAT_AMPM": this.editors[m].value, u = this.editors[m]; break; case "Character": break; case "Day": this.items[m].format.length < 4 && (i = this.editors[m].value, c[p++] = this.editors[m], 0 == i && (i = 1), d = !0); break; case "FORMAT_hh": case "FORMAT_HH": s = this.editors[m].value; break; case "Millisecond": r = this.editors[m].value; break; case "Minute": a = this.editors[m].value; break; case "Month": h = !0, 0 == (n = this.editors[m].value) && (n = 1); break; case "ReadOnly": break; case "Second": o = this.editors[m].value; break; case "Year": if (l = !0, t = this.editors[m].value, this.editors[m].getDateTimeItem().format.length < 3) { var g = "1900"; if (4 == g.Length) { var f = "" + g[0] + g[1]; t += 100 * parseInt(f) } } 0 == t && (t = 1) } var v = null != this.value ? new Date(this.value.dateTime) : null; if (t > 0 && n > 0 && i > 0 && a >= 0 && s >= 0 && o >= 0 && r >= 0) { var x = this.value; null != x && (l || (t = x.year), h || (n = x.month), d || (i = x.day)); try { if (n > 12 && (n = 12), n < 1 && (n = 1), x._daysInMonth(t, n) <= i && (i = x._daysInMonth(t, n), null != c && c.length > 0)) for (m = 0; m < c.length; m++) c[m].value = i; null != u && (0 == u.value ? s >= 12 && (s -= 12) : s + 12 < 24 && (s += 12)); this.value.dateTime.getDate(); this.value._setYear(parseInt(t)), this.value._setDay(i), this.value._setMonth(n), this.value._setHours(s), this.value._setMinutes(a), this.value._setSeconds(o), this.value._setMilliseconds(r) } catch (e) { this.value = x } if (null != v && !(this.value.dateTime.getFullYear() == v.getFullYear() && this.value.dateTime.getDate() == v.getDate() && this.value.dateTime.getMonth() == v.getMonth() && this.value.dateTime.getHours() == v.getHours() && this.value.dateTime.getMinutes() == v.getMinutes() && this.value.dateTime.getSeconds() == v.getSeconds())) { if (this.changing) { var w = this.changing(v, this.value.dateTime); w && (this.value = e.jqx._jqxDateTimeInput.getDateTime(w)) } this._raiseEvent("0", this.value.dateTime), this.cookies && null != this.value && e.jqx.cookie.cookie("jqxDateTimeInput" + this.element.id, this.value.dateTime.toString(), this.cookieoptions), this.change && this.change(this.value.dateTime) } } var b = this.editors.indexOf(this.activeEditor); this.items[b]; this.value && (this.calendarContainer.jqxCalendar("_isDisabled", this.value.dateTime) ? this.dateTimeInput.addClass(this.toThemeProperty("jqx-input-invalid")) : this.dateTimeInput.removeClass(this.toThemeProperty("jqx-input-invalid"))) } }, _internalSetValue: function (e) { this.value._setYear(parseInt(e.year)), this.value._setDay(e.day), this.value._setMonth(e.month), this.value._setHours(e.hour), this.value._setMinutes(e.minute), this.value._setSeconds(e.second), this.value._setMilliseconds(e.milisecond) }, _raiseEvent: function (t, i) { var s = this.events[t], r = {}; r.owner = this, null == i && (i = {}); var o = i.charCode ? i.charCode : i.keyCode ? i.keyCode : 0, a = !0, n = this.readonly, l = new jQuery.Event(s); if (l.owner = this, l.args = r, l.args.date = this.getDate(), this.element.value = this.dateTimeInput.val(), 9 == t && "range" != this.selectionMode) { h = l.args.date; if (this._oldDT) { if (null != h && h.getFullYear() == this._oldDT.getFullYear() && h.getMonth() == this._oldDT.getMonth() && h.getDate() == this._oldDT.getDate() && h.getHours() == this._oldDT.getHours() && h.getMinutes() == this._oldDT.getMinutes() && h.getSeconds() == this._oldDT.getSeconds()) return !0; e.jqx.aria(this, "aria-valuenow", this.getDate()), e.jqx.aria(this, "aria-valuetext", this.getText()), null != this.getDate() ? e.jqx.aria(this, "aria-label", "Current focused date is " + this.getDate().toLocaleString()) : e.jqx.aria(this, "aria-label", "Current focused date is Null") } } if ("range" == this.selectionMode && (l.args.date = this.getRange(), this._oldDT)) { var h = l.args.date.from; if (9 == t) { var d = !1, c = !1, u = this._oldDT.from; if (null != h && u && h.getFullYear() == u.getFullYear() && h.getMonth() == u.getMonth() && h.getDate() == u.getDate() && h.getHours() == u.getHours() && h.getMinutes() == u.getMinutes() && h.getSeconds() == u.getSeconds() && (d = !0), null != (h = l.args.date.to) && (u = this._oldDT.to) && h.getFullYear() == u.getFullYear() && h.getMonth() == u.getMonth() && h.getDate() == u.getDate() && h.getHours() == u.getHours() && h.getMinutes() == u.getMinutes() && h.getSeconds() == u.getSeconds() && (c = !0), d && c) return !0; d = null == (d = l.args.date.from) ? "" : d.toString(), c = null == (c = l.args.date.to) ? "" : c.toString(), e.jqx.aria(this, "aria-valuenow", d + "-" + c), e.jqx.aria(this, "aria-valuetext", this.getText()), d && c && e.jqx.aria(this, "aria-label", "Current focused range is " + d.toLocaleString() + "-" + c.toLocaleString()) } } if ("none" == this.host.css("display")) return !0; 2 != t && 3 != t && 4 != t && 5 != t && 6 != t && (a = this.host.trigger(l), l.stopPropagation && l.stopPropagation()); var p = this; if (n || 2 != t || this.disabled || setTimeout(function () { p.isEditing = !0, this.selectionMode, p._selectGroup(-1) }, 25), 4 == t) { if (n || this.disabled) return 8 != o && 46 != o || (this.isEditing = !1, this.allowKeyboardDelete && (this.allowNullDate ? this.setDate(null) : "range" != this.selectionMode ? this.setDate(this.getMinDate()) : this.setRange(this.getMinDate(), this.getMinDate()))), 9 == o; a = this._handleKeyDown(i, o) } else if (5 == t) { if (9 == o) return !0; if (n || this.disabled) return !1 } else if (6 == t) { if (9 == o) return !0; if (n || this.disabled) return !1; a = this._handleKeyPress(i, o) } return a }, _doLeftKey: function () { if (null != this.activeEditor) { this.isEditing || (this.isEditing = !0); var e = this.activeEditor, t = !1, i = this.editors.indexOf(this.activeEditor), s = i; if (this.enableAbsoluteSelection && i >= 0 && this.activeEditor.positions > 0) return this.activeEditor.positions--, void this._selectGroup(i); for (; i > 0;) if (this.activeEditor = this.editors[--i], this._selectGroup(i), "ReadOnly" != this.items[i].type) { t = !0; break } return t || s >= 0 && (this.activeEditor = this.editors[s]), null != this.activeEditor && e != this.activeEditor && "ReadOnly" != this.items[i].type && (this.enableAbsoluteSelection ? this.activeEditor.positions = this.activeEditor.maxEditPositions - 1 : this.activeEditor.positions = 0), this.activeEditor != e && (this._validateValue(), this._updateText(), this._selectGroup(this.editors.indexOf(this.activeEditor)), !0) } }, _doRightKey: function () { if (null != this.activeEditor) { this.isEditing || (this.isEditing = !0); var e = this.activeEditor, t = !1, i = this.editors.indexOf(this.activeEditor), s = i; if (this.enableAbsoluteSelection && i >= 0 && this.activeEditor.positions < this.activeEditor.maxEditPositions - 1) return this.activeEditor.positions++, void this._selectGroup(i); for (; i <= this.editors.length - 2;) if (this.activeEditor = this.editors[++i], this._selectGroup(i), "ReadOnly" != this.items[i].type) { if ("Day" == this.items[i].type && this.items[i].format.length > 2) break; t = !0; break } return t || s >= 0 && (this.activeEditor = this.editors[s]), null != this.activeEditor && this.activeEditor != e && "ReadOnly" != this.items[i].type && (this.activeEditor.positions = 0), this.activeEditor != e && (this._validateValue(), this._updateText(), this._selectGroup(this.editors.indexOf(this.activeEditor)), !0) } }, _saveSelectedText: function () { var e = this._selection(), t = "", s = this.dateTimeInput.val(); if (e.start > 0 || e.length > 0) for (i = e.start; i < e.end; i++) t += s[i]; return window.clipboardData.setData("Text", t), t }, _selectWithAdvancePattern: function () { var e = this.editors.indexOf(this.activeEditor), t = !1; if ("ReadOnly" != this.items[e].type && (t = !0), t) { var i = this.activeEditor; if (null != i && i.positions == i.maxEditPositions) { this.editorText = ""; var s = i.value, r = !1; switch (this.items[e].type) { case "FORMAT_AMPM": s < 0 ? s = 0 : s > 1 && (s = 1); break; case "Character": break; case "Day": s < 1 ? s = 1 : s > 31 && (s = 31); break; case "FORMAT_hh": s < 1 ? s = 1 : s > 12 && (s = 12); break; case "FORMAT_HH": s < 0 ? s = 0 : s > 23 && (s = 23); break; case "Millisecond": s < 0 ? s = 0 : s > 99 && (s = 99); break; case "Minute": s < 0 ? s = 0 : s > 59 && (s = 59); break; case "Month": s < 1 ? s = 1 : s > 12 && (s = 12); break; case "ReadOnly": break; case "Second": s < 0 ? s = 0 : s > 59 && (s = 59); break; case "Year": s < this.minDate.year ? s = this.minDate.year : s > this.maxDate.year && (s = this.maxDate.year) } return i.value != s && (r = !0), !r && (this.isEditing = !1, this._validateValue(), this._updateText(), this.isEditing = !0, this._doRightKey(), !0) } } }, _handleKeyPress: function (e, t) { var i = this._selection(), s = this; if (e.ctrlKey && 97 == t || e.ctrlKey && 65 == t) return !0; if (8 == t) return i.start > 0 && s._setSelectionStart(i.start), !1; if (46 == t) return i.start < this.items.length && s._setSelectionStart(i.start), !1; if (i.start >= 0) { var r = String.fromCharCode(t), o = parseInt(r); if ("p" != r && "a" != r && "A" != r && "P" != r || "FORMAT_AMPM" == this.activeEditor.item.type && (0 != this.activeEditor.value || "p" != r && "P" != r ? 1 != this.activeEditor.value || "a" != r && "A" != r || this.spinDown() : this.spinUp()), !isNaN(o)) { "block" == this.container.css("display") && this.hideCalendar(), this.updateValue(), this._updateText(); var a = this.editors.indexOf(this.activeEditor), n = null; if (this.isEditing = !0, "ReadOnly" != a.type && (n = this.activeEditor), null != n && 0 == n.positions && (this.editorText = ""), null == this.activeEditor && (this.activeEditor = this.editors[0]), null == this.activeEditor) return !1; this.activeEditor.insert(r), null != n && this.editorText.length >= n.maxEditPositions && (this.editorText = ""), this.editorText += r; var l = this._selectWithAdvancePattern(); if (this.activeEditor.positions == this.activeEditor.maxEditPositions) { var h = this._getLastEditableEditorIndex(); this.editors.indexOf(this.activeEditor) == h && l && this.enableAbsoluteSelection ? this.activeEditor.positions = this.activeEditor.maxEditPositions - 1 : this.activeEditor.positions = 0 } return !0, this.updateValue(), this._updateText(), this._selectGroup(this.editors.indexOf(this.activeEditor)), !1 } } return this._isSpecialKey(t) }, _getLastEditableEditorIndex: function () { for (itemIndex = this.items.length - 1; itemIndex >= 0; itemIndex--) if ("ReadOnly" != this.items[itemIndex].type) return itemIndex; return -1 }, _handleKeyDown: function (t, i) { if (115 == t.keyCode) { if (this.isOpened()) return this.hideCalendar(), !1; if (!this.isOpened()) return this.showCalendar(), !1 } if (t.altKey) if (38 == t.keyCode) { if (this.isOpened()) return this.hideCalendar(), !1 } else if (40 == t.keyCode && !this.isOpened()) return this.showCalendar(), !1; { if (!this.isOpened()) { this._selection(); if (t.ctrlKey && 99 == i || t.ctrlKey && 67 == i) return this._saveSelectedText(t), !1; if (t.ctrlKey && 122 == i || t.ctrlKey && 90 == i) return !1; if (t.ctrlKey && 118 == i || t.ctrlKey && 86 == i || t.shiftKey && 45 == i) return !1; if (8 == i || 46 == i) { if (t.altKey || t.ctrlKey || 46 != i) { if (null != this.activeEditor) { var s = this.editors.indexOf(this.activeEditor); if (this.activeEditor.positions >= 0) { var r = this._format(Number(this.activeEditor.value), "d" + this.activeEditor.maxEditPositions, this.culture); if (tmp = r, tmp = tmp.substring(0, this.activeEditor.positions) + "0" + tmp.substring(this.activeEditor.positions + 1), parseInt(tmp) < this.activeEditor.minValue && (tmp = this._format(Number(this.activeEditor.minValue), "d" + this.activeEditor.maxEditPositions, this.culture)), this.enableAbsoluteSelection ? this.activeEditor.value = tmp : this.activeEditor.value = this.activeEditor.minValue, this._validateValue(), this._updateText(), 8 == i) { var o = this; this.enableAbsoluteSelection && this.activeEditor.positions > 0 ? setTimeout(function () { o.activeEditor.positions = o.activeEditor.positions - 1, o._selectGroup(s) }, 10) : setTimeout(function () { o._doLeftKey() }, 10) } else this._selectGroup(s) } else this._doLeftKey() } } else this.isEditing = !1, this.allowKeyboardDelete && (this.allowNullDate ? this.setDate(null) : "range" != this.selectionMode ? this.setDate(this.getMinDate()) : this.setRange(this.getMinDate(), this.getMinDate())); return !1 } if (38 == i) return this.spinUp(), !1; if (40 == i) return this.spinDown(), !1; if (37 == i) return this._editor ? ((a = this._doLeftKey()) || (this.isEditing = !1, this._validateValue()), !a) : (this._doLeftKey(), !1); if (39 == i || 191 == i) { if (this._editor) { var a = this._doRightKey(); return a || (this.isEditing = !1, this._validateValue()), !a } return this._doRightKey(), !1 } var n = this._isSpecialKey(i); return null == this.value && (i >= 48 && i <= 57 || i >= 96 && i <= 105) && (new Date >= this.getMinDate() && new Date <= this.getMaxDate() ? this.setDate(new Date) : this.setDate(this.getMaxDate())), !e.jqx.browser.mozilla || (!!(e.jqx.browser.mozilla && e.jqx.browser.version > 24) || n) } if (9 == t.keyCode) return this.hideCalendar("selected"), !0 } }, _isSpecialKey: function (e) { return 8 == e || 9 == e || 13 == e || 35 == e || 36 == e || 37 == e || 39 == e || 27 == e || 46 == e }, _selection: function () { if ("selectionStart" in this.dateTimeInput[0]) { var e = this.dateTimeInput[0], t = e.selectionEnd - e.selectionStart; return { start: e.selectionStart, end: e.selectionEnd, length: t, text: e.value } } var i = document.selection.createRange(); if (null == i) return { start: 0, end: e.value.length, length: 0 }; var s = this.dateTimeInput[0].createTextRange(), r = s.duplicate(); s.moveToBookmark(i.getBookmark()), r.setEndPoint("EndToStart", s); t = i.text.length; return { start: r.text.length, end: r.text.length + i.text.length, length: t, text: i.text } }, _selectGroup: function (e, t) { if ("none" != this.host.css("display") && !this.readonly) { if (!t) var t = this._selection(); for (var i = "", s = "", r = null, o = 0; o < this.items.length; o++) { if (s = this.items[o].dateParser(this.value, this), this.isEditing && "ReadOnly" != this.items[o].type && !("Day" == this.items[o].type && this.items[o].format.length > 2) && "FORMAT_AMPM" != this.items[o].type) for (s = this.items[o].dateParserInEditMode(new Number(this.editors[o].value), "d" + this.editors[o].maxEditPositions, this) ; s.length < this.editors[o].maxEditPositions;) s = "0" + s; if (i += s, "ReadOnly" != this.items[o].type && !("Day" == this.items[o].type && this.items[o].format.length > 2)) if (void 0 != e && -1 != e) { if (o >= e) { var a = i.length - s.length, n = s.length; this.enableAbsoluteSelection && !isNaN(parseInt(s)) && this.isEditing && -1 != e && (n = 1, a += this.editors[o].positions), a == this.dateTimeInput.val().length && a--, this._setSelection(a, a + n), r = this.editors[o], this.activeEditor = r; break } } else if (i.length >= t.start) { r = this.editors[o], this.activeEditor = r; var a = i.length - s.length, n = 1; this.enableAbsoluteSelection ? !isNaN(parseInt(s)) && this.isEditing && -1 != e && (n = 1, a += this.editors[o].positions) : n = s.length, this._setSelection(a, a + n); break } } o < this.items.length && -1 == e && "ReadOnly" != this.items[o].type && (this.activeEditor.positions = 0); var l = this._selection(); if (0 == l.length && l.start > 0) this._getLastEditableEditorIndex() } }, _getLastEditableEditorIndex: function () { var e = -1; for (i = 0; i < this.editors.length; i++) "ReadOnly" != this.items[i].type && ("Day" == this.items[i].type && this.items[i].format.length > 2 || (e = i)); return e }, _setSelection: function (e, t) { try { if ("selectionStart" in this.dateTimeInput[0]) this.dateTimeInput[0].setSelectionRange(e, t); else { var i = this.dateTimeInput[0].createTextRange(); i.collapse(!0), i.moveEnd("character", t), i.moveStart("character", e), i.select() } } catch (e) { } }, _setSelectionStart: function (e) { this._setSelection(e, e) }, destroy: function () { this.host.removeClass("jqx-rc-all"), this._calendar.destroy(), this.container.remove(), this._removeHandlers(), this.dateTimeInput.remove(), this.host.remove() }, refreshValue: function () { this._refreshValue() }, refresh: function (e) { 1 != e && (this._setSize(), this._arrange()) }, resize: function (e, t) { this.width = e, this.height = t, this.refresh() }, _setOption: function (e, t) { "value" === e && (this.value = t, this._refreshValue(), this._raiseEvent(9, {})), "maxDate" == e && (this._calendar.maxDate = t, this._raiseEvent(9, {})), "minDate" == e && (this._calendar.minDate = t, this._raiseEvent(9, {})), "showCalendarButton" == e && (t ? this.calendarButton.css("display", "block") : this.calendarButton.css("display", "none")), "disabled" == e && this.dateTimeInput.attr("disabled", t), "readonly" == e && (this.readonly = t, this.dateTimeInput.css("readonly", t)), "textAlign" == e && (this.dateTimeInput.css("text-align", t), this.textAlign = t), "width" == e ? (this.width = t, this.width = parseInt(this.width), this._arrange()) : "height" == e && (this.height = t, this.height = parseInt(this.height), this._arrange()) }, _refreshValue: function () { this._updateEditorsValue(), this.updateValue(), this._validateValue(), this._updateText() } }) }(jQuery), function (e) { e.jqx._jqxDateTimeInput.DateTimeFormatItem = {}, e.extend(e.jqx._jqxDateTimeInput.DateTimeFormatItem, { _create: function (e, t, i) { return this.format = e, this.type = t, this.culture = i, this }, _itemValue: function () { switch (this.format.length) { case 1: return 9; case 2: return 99; case 3: default: return 999 } }, _maximumValue: function () { switch (this.format.length) { case 1: return 9; case 2: return 99; case 3: default: return 999 } }, dateParser: function (e, t) { return null == e ? "" : t._format(e.dateTime, 1 == this.format.length ? "%" + this.format : this.format, this.culture) }, dateParserInEditMode: function (e, t, i) { return null == e ? "" : i._format(e.toString(), 1 == t.length ? "%" + t : t, this.culture) }, getDateTimeEditorByItemType: function (t, i) { switch (this.type) { case "FORMAT_AMPM": var s = e.jqx._jqxDateTimeInput.AmPmEditor._createAmPmEditor(this.format, t.hour / 12, i.localization.calendar.AM[0], i.localization.calendar.PM[0], this, i); return v = e.extend({}, s); case "Character": return null; case "Day": var r, o = t.year, a = t.month; r = 3 == this.format.length ? i.localization.calendar.days.namesAbbr : this.format.length > 3 ? i.localization.calendar.days.names : null; t.day; null != r && t.dayOfWeek + 1; var n = e.jqx._jqxDateTimeInput.DateEditor._createDayEditor(t, t.day, 1, t._daysInMonth(o, a), 1 == this.format.length ? 1 : 2, 2, r, this, i); return v = e.extend({}, n); case "FORMAT_hh": var l = t.hour % 12; 0 == l && (l = 12); var h = e.jqx._jqxDateTimeInput.NumberEditor._createNumberEditor(l, 1, 12, 1 == this.format.length ? 1 : 2, 2, this, i); return v = e.extend({}, h); case "FORMAT_HH": var d = e.jqx._jqxDateTimeInput.NumberEditor._createNumberEditor(t.hour, 0, 23, 1 == this.format.length ? 1 : 2, 2, this, i); return v = e.extend({}, d); case "Millisecond": var c = e.jqx._jqxDateTimeInput.NumberEditor._createNumberEditor(t.millisecond / this._itemValue(), 0, this._maximumValue(), this.format.length, this.format.length, this, i); return v = e.extend({}, c); case "Minute": var u = e.jqx._jqxDateTimeInput.NumberEditor._createNumberEditor(t.minute, 0, 59, 1 == this.format.length ? 1 : 2, 2, this, i); return v = e.extend({}, u); case "Month": var p; p = 3 == this.format.length ? i.localization.calendar.months.namesAbbr : this.format.length > 3 ? i.localization.calendar.months.names : null; var m = e.jqx._jqxDateTimeInput.DateEditor._createMonthEditor(t.month, 2 == this.format.length ? 2 : 1, p, this, i); return v = e.extend({}, m); case "ReadOnly": return e.jqx._jqxDateTimeInput.DisabledEditor._create(this.format.length, t.day, this, i); case "Second": var g = e.jqx._jqxDateTimeInput.NumberEditor._createNumberEditor(t.second, 0, 59, 1 == this.format.length ? 1 : 2, 2, this, i); return v = e.extend({}, g); case "Year": var f = e.jqx._jqxDateTimeInput.DateEditor._createYearEditor(t.year, this.format.length, this, i), v = e.extend({}, f); return v } return null } }) }(jQuery), function (e) { e.jqx._jqxDateTimeInput.DateEditor = e.extend(e.jqx._jqxDateTimeInput.DateEditor, { formatValueLength: 0, handleYears: !1, handleDays: !1, handleMonths: !1, positions: 0, value: 0, minEditPositions: 0, maxEditPositions: 0, minValue: 0, maxValue: 0, item: null, dateTimeFormatInfo: null, days: null, dateTimeMonths: null, lastDayInput: null, minPositions: function () { return this.handleYears && 4 == this.formatValueLength ? this.positions <= 1 ? 1 : this.positions >= 4 ? 4 : this.positions : this.minEditPositions }, initializeFields: function (e, t, i, s, r) { this.minValue = e, this.maxValue = t, this.minEditPositions = i, this.maxEditPositions = s, this.updateActiveEditor(e), this.item = r }, _createYearEditor: function (t, i, s, r) { return e.jqx._jqxDateTimeInput.DateEditor = e.extend(!0, {}, this), this.initializeFields(0, i < 4 ? 99 : 9999, 2 == i ? 2 : 1, i > 3 ? 4 : 2, s), this.initializeYearEditor(t, i, s.culture), this.handleYears = !0, this.that = r, this }, initializeYearEditor: function (e, t, i) { this.formatValueLength = t, this.dateTimeFormatInfo = i; var s = e; s = Math.min(s, 9999), s = Math.max(s, 1), s = this.formatValueLength < 4 ? s % 100 : s, this.updateActiveEditor(s), this.value = s }, updateActiveEditor: function (e) { this.value = e, this.positions = 0 }, _createDayEditor: function (t, i, s, r, o, a, n, l, h) { return e.jqx._jqxDateTimeInput.DateEditor = e.extend(!0, {}, this), this.initializeFields(s, r, 1, a, l), this.currentValue = t, this.value = i, this.days = n, this.handleDays = !0, this.that = h, this }, getDayOfWeek: function (t) { return typeof this.currentValue == e.jqx._jqxDateTimeInput.DateTime && this.currentValue.dayOfWeek(), t }, defaultTextValue: function () { this.value; var e = this.minEditPositions; return this.that._format(this.value, "d" + e, "") }, textValue: function () { if (this.handleDays) { if (null == this.days) return this.defaultTextValue(); var e = this.value % 7 + 1; return e = this.getDayOfWeek(e), this.days[e] } return this.handleMonths ? null == this.dateTimeMonths || this.value < 1 || this.value > 12 ? this.defaultTextValue() : this.dateTimeMonths[this.value - 1] : this.defaultTextValue() }, defaultInsertString: function (e) { if (null == e) return this.deleteValue(); if (0 == e.length) return this.deleteValue(); var t = e.substring(0, 1); if (!isNaN(t)) { var i; return i = this.that._format(Number(this.value), "d" + this.maxEditPositions, this.culture), this.positions >= this.maxEditPositions && (this.positions = 0), i = i.substring(0, this.positions) + t + i.substring(this.positions + 1), i = this.setValueByString(i, 1), !0 } }, setValueByString: function (e, t) { e = this.fixValueString(e); var i = new Number(e); return this.value = i, this.positions += t, e }, fixValueString: function (e) { return e.length > this.maxEditPositions && (e = e.substring(e.length - this.maxEditPositions)), e }, initializeValueString: function (e) { var t; return t = "", this.hasDigits() && (t = e), t }, deleteValue: function () { return (this.value != this.minValue || 0 != this.hasDigits()) && (this.updateActiveEditor(this.minValue), !0) }, hasDigits: function () { return this.positions > 0 }, insert: function (e) { if (this.handleDays) { if (null != this.days) { t = !1; if (t = this.insertLongString(e, t)) return t; if (t = this.insertShortString(e, t)) return t } return 1 == this.value && null != this.lastDayInput && this.lastDayInput.toString().length > 0 && "0" == this.lastDayInput.toString() && (this.value = 0), this.lastDayInput = e, this.defaultInsertString(e) } if (this.handleMonths && null != this.dateTimeMonths) { var t = !1; if (t = this.insertLongString2(e, t)) return t; if (t = this.insertShortString2(e, t)) return t } return this.defaultInsertString(e) }, insertShortString: function (e, t) { if (1 == e.length) for (i = 0; i < 6; ++i) { var s = (this.value + i) % 7 + 1; if (this.days[s - 1].substring(0, 1) == e) return this.updateActiveEditor(s), t = !0 } return t }, insertLongString: function (e, t) { if (e.length > 0) for (i = 0; i < 6; ++i) { var s = (this.value + i) % 7 + 1; if (this.days[s - 1] == e) return this.updateActiveEditor(s), t = !0 } return t }, _createMonthEditor: function (t, i, s, r, o) { return e.jqx._jqxDateTimeInput.DateEditor = e.extend(!0, {}, this), this.initializeFields(1, 12, i, 2, r), this.dateTimeMonths = s, this.value = t, null != this.dateTimeMonths && null != this.dateTimeMonths[12] && this.dateTimeMonths[12].length > 0 && (this.dateTimeMonths = null), this.handleMonths = !0, this.that = o, this }, insertLongString2: function (e, t) { if (e.length > 0) for (i = 0; i < 11; ++i) if (month = (this.value + i) % 12 + 1, this.dateTimeMonths[month - 1] == e) return this.updateActiveEditor(month), t = !0; return t }, insertShortString2: function (e, t) { if (1 == e.length) for (i = 0; i < 11; ++i) { var s = (this.value + i) % 12 + 1; if (this.dateTimeMonths[s - 1].substring(0, 1) == e) return this.updateActiveEditor(s), t = !0 } return t }, correctMaximumValue: function (e) { return e > this.maxValue && (e = this.minValue), e }, correctMinimumValue: function (e) { return e < this.minValue && (e = this.maxValue), e }, increaseValue: function (e) { var t = this.that._format(Number(this.value), "d" + this.maxEditPositions, this.culture), i = t.toString()[this.positions]; if ((i = parseInt(i) + 1) > 9 && (i = 0), !e) { var s = this.value + 1; return s = this.correctMaximumValue(s), this.updateActiveEditor(s), !0 } var r = t.substring(0, this.positions) + i + t.substring(this.positions + 1); return !(r == this.value && !this.hasDigits()) && (this.updateActiveEditor(r), !0) }, decreaseValue: function (e) { var t = this.that._format(Number(this.value), "d" + this.maxEditPositions, this.culture), i = t.toString()[this.positions]; if ((i = parseInt(i) - 1) < 0 && (i = 9), !e) { var s = this.value - 1; return s = this.correctMinimumValue(s), this.updateActiveEditor(s), !0 } var r = t.substring(0, this.positions) + i + t.substring(this.positions + 1); return !(r == this.value && !this.hasDigits()) && (this.updateActiveEditor(r), !0) }, getDateTimeItem: function () { return this.item } }) }(jQuery), function (e) { e.jqx._jqxDateTimeInput.NumberEditor = {}, e.extend(e.jqx._jqxDateTimeInput.NumberEditor, { formatValueLength: 0, positions: 0, value: 0, minEditPositions: 0, maxEditPositions: 0, minValue: 0, maxValue: 0, item: null, minPositions: function () { return this.handleYears && 4 == this.formatValueLength ? this.positions <= 1 ? 1 : this.positions >= 4 ? 4 : this.positions : this.minEditPositions }, _createNumberEditor: function (t, i, s, r, o, a, n) { return e.jqx._jqxDateTimeInput.NumberEditor = e.extend(!0, {}, this), this.initializeFields(i, s, r, o, a), this.that = n, this }, initializeFields: function (e, t, i, s, r) { this.minValue = e, this.maxValue = t, this.minEditPositions = i, this.maxEditPositions = s, this.updateActiveEditor(e), this.item = r }, updateActiveEditor: function (e) { this.value = e, this.positions = 0 }, getDayOfWeek: function (t) { return typeof this.currentValue == e.jqx._jqxDateTimeInput.DateTime && this.currentValue.dayOfWeek(), t }, textValue: function () { this.value; var e = this.minEditPositions; return this.that._format(this.value, "d" + e, "") }, insert: function (e) { if (null == e) return this.deleteValue(); if (0 == e.length) return this.deleteValue(); var t = e.substring(0, 1); if (!isNaN(t)) { var i; return i = this.that._format(Number(this.value), "d" + this.maxEditPositions, this.culture), this.positions >= this.maxEditPositions && (this.positions = 0), i = i.substring(0, this.positions) + t + i.substring(this.positions + 1), i = this.setValueByString(i, 1), !0 } }, setValueByString: function (e, t) { e = this.fixValueString(e); var i = new Number(e); return this.value = i, this.positions += t, e }, fixValueString: function (e) { return e.length > this.maxEditPositions && (e = e.substring(e.length - this.maxEditPositions)), e }, initializeValueString: function (e) { var t; return t = "", this.hasDigits() && (t = e), t }, deleteValue: function () { return (this.value != this.minValue || 0 != this.hasDigits()) && (this.updateActiveEditor(this.minValue), !0) }, hasDigits: function () { return this.positions > 0 }, correctMaximumValue: function (e) { return e > this.maxValue && (e = this.minValue), e }, correctMinimumValue: function (e) { return e < this.minValue && (e = this.maxValue), e }, increaseValue: function (e) { var t = this.that._format(Number(this.value), "d" + this.maxEditPositions, this.culture), i = t.toString()[this.positions]; if ((i = parseInt(i) + 1) > 9 && (i = 0), !e) { var s = this.value + 1; return s = this.correctMaximumValue(s), this.updateActiveEditor(s), !0 } var r = t.substring(0, this.positions) + i + t.substring(this.positions + 1); return !(r == this.value && !this.hasDigits()) && (this.updateActiveEditor(r), !0) }, decreaseValue: function (e) { var t = this.that._format(Number(this.value), "d" + this.maxEditPositions, this.culture), i = t.toString()[this.positions]; if ((i = parseInt(i) - 1) < 0 && (i = 9), !e) { var s = this.value - 1; return s = this.correctMinimumValue(s), this.updateActiveEditor(s), !0 } var r = t.substring(0, this.positions) + i + t.substring(this.positions + 1); return !(r == this.value && !this.hasDigits()) && (this.updateActiveEditor(r), !0) }, getDateTimeItem: function () { return this.item } }) }(jQuery), function (e) { e.jqx._jqxDateTimeInput.DisabledEditor = {}, e.extend(e.jqx._jqxDateTimeInput.DisabledEditor, { _create: function (e, t, i, s, r, o) { return this.format = e, this.value = -1, this.item = r, this.that = o, this }, textValue: function () { return "" }, insert: function (e) { return !1 }, deleteValue: function () { return !1 }, increaseValue: function () { return !1 }, decreaseValue: function () { return !1 }, getDateTimeItem: function () { return this.item } }) }(jQuery), function (e) { e.jqx._jqxDateTimeInput.AmPmEditor = {}, e.extend(e.jqx._jqxDateTimeInput.AmPmEditor, { _createAmPmEditor: function (e, t, i, s, r, o) { return this.format = e, this.value = t, this.amString = i, this.pmString = s, this.item = r, this.that = o, i == s && (this.amString = "<" + i, this.pmString = ">" + s), this }, textValue: function () { var e = this.amString; return 0 != this.value && (e = this.pmString), 1 == this.format.length && e.length > 1 && (e = e.substring(0, 1)), e }, insert: function (e) { var t = e.toString(); if (0 == t.Length) return this.deleteValue(); var i = !1; if (this.amString.Length > 0 && this.pmString.Length > 0) { var s = amString[0], r = t[0], o = pmString[0]; s.toString() == r.toString() ? (this.value = 0, i = !0) : o.toString() == r.toString() && (this.value = 1, i = !0) } else this.pmString.Length > 0 ? (this.value = 1, i = !0) : this.amString.Length > 0 && (this.value = 0, i = !0); return i }, deleteValue: function () { if (0 == this.amString.Length && 0 != this.pmString.Length) { if (0 == this.value) return !1; this.value = 0 } else { if (1 == this.value) return !1; this.value = 1 } return !0 }, increaseValue: function () { return this.value = 1 - this.value, !0 }, decreaseValue: function () { return this.increaseValue(), !0 }, getDateTimeItem: function () { return this.item } }) }(jQuery), jQuery.jqx._jqxDateTimeInput.getDateTime = function (e) { return { dateTime: new Date(e), daysPer4Years: 1461, daysPerYear: 365, daysToMonth365: { 0: 0, 1: 31, 2: 59, 3: 90, 4: 120, 5: 151, 6: 181, 7: 212, 8: 243, 9: 273, 10: 304, 11: 334, 12: 365 }, daysToMonth366: { 0: 0, 1: 31, 2: 60, 3: 91, 4: 121, 5: 152, 6: 182, 7: 213, 8: 244, 9: 274, 10: 305, 11: 335, 12: 366 }, maxValue: 3155378976e9, millisPerDay: 864e5, millisPerHour: 36e5, millisPerMinute: 6e4, millisPerSecond: 1e3, minTicks: 0, minValue: 0, ticksPerDay: 864e9, ticksPerHour: 36e9, ticksPerMillisecond: 1e4, ticksPerMinute: 6e8, ticksPerSecond: 1e7, hour: e.getHours(), minute: e.getMinutes(), day: e.getDate(), second: e.getSeconds(), month: 1 + e.getMonth(), year: e.getFullYear(), millisecond: e.getMilliseconds(), dayOfWeek: e.getDay(), isWeekend: function (e) { return void 0 != e && null != e || (e = this.dateTime), e.getDay() % 6 == 0 }, dayOfYear: function (e) { void 0 != e && null != e || (e = this.dateTime); var t = new Date(e.getFullYear(), 0, 1); return Math.ceil((e - t) / 864e5) }, _setDay: function (e) { void 0 != e && null != e || (e = 0), this.dateTime.setDate(e), this.day = this.dateTime.getDate() }, _setMonth: function (e) { void 0 != e && null != e || (e = 0), this.dateTime.setMonth(e - 1), this.month = 1 + this.dateTime.getMonth() }, _setYear: function (e) { void 0 != e && null != e || (e = 0), this.dateTime.setFullYear(e), this.year = this.dateTime.getFullYear() }, _setHours: function (e) { void 0 != e && null != e || (e = 0), this.dateTime.setHours(e), this.hour = this.dateTime.getHours() }, _setMinutes: function (e) { void 0 != e && null != e || (e = 0), this.dateTime.setMinutes(e), this.minute = this.dateTime.getMinutes() }, _setSeconds: function (e) { void 0 != e && null != e || (e = 0), this.dateTime.setSeconds(e), this.second = this.dateTime.getSeconds() }, _setMilliseconds: function (e) { void 0 != e && null != e || (e = 0), this.dateTime.setMilliseconds(e), this.millisecond = this.dateTime.getMilliseconds() }, _addDays: function (e) { var t = this.dateTime, i = t.getDate(); return t.setDate(t.getDate() + e), i === t.getDate() && t.setHours(t.getHours() + t.getTimezoneOffset() / 60), t }, _addWeeks: function (e) { var t = this.dateTime; return t.setDate(t.getDate() + 7 * e), t }, _addMonths: function (e) { var t = this.dateTime; return t.setMonth(t.getMonth() + e), t }, _addYears: function (e) { var t = this.dateTime; return t.setFullYear(t.getFullYear() + e), t }, _addHours: function (e) { var t = this.dateTime; return t.setHours(t.getHours() + e), t }, _addMinutes: function (e) { var t = this.dateTime; return t.setMinutes(t.getMinutes() + e), t }, _addSeconds: function (e) { var t = this.dateTime; return t.setSeconds(t.getSeconds() + e), t }, _addMilliseconds: function (e) { var t = this.dateTime; return t.setMilliseconds(t.getMilliseconds() + e), t }, _isLeapYear: function (e) { if (e < 1 || e > 9999) throw "invalid year"; return e % 4 == 0 && (e % 100 != 0 || e % 400 == 0) }, _dateToTicks: function (e, t, i) { if (e >= 1 && e <= 9999 && t >= 1 && t <= 12) { var s = this._isLeapYear(e) ? this.daysToMonth366 : this.daysToMonth365; if (i >= 1 && i <= s[t] - s[t - 1]) return 864e9 * (365 * (e -= 1) + e / 4 - e / 100 + e / 400 + s[t - 1] + i - 1) } }, _daysInMonth: function (e, t) { if (t < 1 || t > 12) throw "Invalid month."; var i = this._isLeapYear(e) ? this.daysToMonth366 : this.daysToMonth365; return i[t] - i[t - 1] }, _timeToTicks: function (e, t, i) { return 1e7 * (3600 * e + 60 * t + i) }, _equalDate: function (e) { return this.year == e.getFullYear() && this.day == e.getDate() && this.month == e.getMonth() + 1 } } }, function (e) { e.jqx.jqxWidget("jqxChart", "", {}), e.extend(e.jqx._jqxChart.prototype, { defineInstance: function () { var t = { title: "Title", description: "Description", source: [], seriesGroups: [], categoryAxis: null, xAxis: {}, renderEngine: "", enableAnimations: !0, enableAxisTextAnimation: !1, backgroundImage: "", background: "#FFFFFF", padding: { left: 5, top: 5, right: 5, bottom: 5 }, backgroundColor: "#FFFFFF", showBorderLine: !0, borderLineWidth: 1, borderLineColor: null, borderColor: null, titlePadding: { left: 5, top: 5, right: 5, bottom: 10 }, showLegend: !0, legendLayout: null, enabled: !0, colorScheme: "scheme01", animationDuration: 500, showToolTips: !0, toolTipShowDelay: 500, toolTipDelay: 500, toolTipHideDelay: 4e3, toolTipFormatFunction: null, columnSeriesOverlap: !1, rtl: !1, legendPosition: null, greyScale: !1, axisPadding: 5, enableCrosshairs: !1, crosshairsColor: "#888888", crosshairsDashStyle: "2,2", crosshairsLineWidth: 1, enableEvents: !0, _itemsToggleState: [], _isToggleRefresh: !1, drawBefore: null, draw: null }; e.extend(!0, this, t) }, _touchEvents: { mousedown: e.jqx.mobile.getTouchEventName("touchstart"), click: e.jqx.mobile.getTouchEventName("touchstart"), mouseup: e.jqx.mobile.getTouchEventName("touchend"), mousemove: e.jqx.mobile.getTouchEventName("touchmove"), mouseenter: "mouseenter", mouseleave: "mouseleave" }, _getEvent: function (e) { return this._isTouchDevice ? this._touchEvents[e] : e }, createInstance: function (t) { if (!e.jqx.dataAdapter) throw "jqxdata.js is not loaded"; var i = this; i._refreshOnDownloadComlete(), i._isTouchDevice = e.jqx.mobile.isTouchDevice(), i.host.on(i._getEvent("mousemove"), function (t) { if (0 != i.enabled) { t.preventDefault(); var s = t.pageX || t.clientX || t.screenX, r = t.pageY || t.clientY || t.screenY; i._isTouchDevice && (s = (o = e.jqx.position(t)).left, r = o.top); var o = i.host.offset(); s -= o.left, r -= o.top, i.onmousemove(s, r) } }), i.addHandler(i.host, i._getEvent("mouseleave"), function (e) { if (0 != i.enabled) { var t = i._mouseX, s = i._mouseY, r = i._plotRect; r && t >= r.x && t <= r.x + r.width && s >= r.y && s <= r.y + r.height || (i._cancelTooltipTimer(), i._hideToolTip(0), i._unselect()) } }), i.addHandler(i.host, "click", function (e) { 0 != i.enabled && (!isNaN(i._lastClickTs) && (new Date).valueOf() - i._lastClickTs < 100 || (this._hostClickTimer = setTimeout(function () { if (i._isTouchDevice || (i._cancelTooltipTimer(), i._hideToolTip(), i._unselect()), i._pointMarker && i._pointMarker.element) { var e = i.seriesGroups[i._pointMarker.gidx], t = e.series[i._pointMarker.sidx]; i._raiseItemEvent("click", e, t, i._pointMarker.iidx) } }, 100))) }); var s = i.element.style; if (s) { var r = !1; null != s.width && (r |= -1 != s.width.toString().indexOf("%")), null != s.height && (r |= -1 != s.height.toString().indexOf("%")), r && e(window).resize(function () { i.timer && clearTimeout(i.timer); var t = e.jqx.browser.msie ? 200 : 1; i.timer = setTimeout(function () { var e = i.enableAnimations; i.enableAnimations = !1, i.refresh(), i.enableAnimations = e }, t) }) } }, _refreshOnDownloadComlete: function () { var t = this, i = this.source; if (i instanceof e.jqx.dataAdapter) { var s = i._options; (void 0 == s || void 0 != s && !s.autoBind) && (i.autoSync = !1, i.dataBind()); var r = this.element.id; if (0 == i.records.length) { i.unbindDownloadComplete(r), i.bindDownloadComplete(r, function () { t.ready && t.ready(), t.refresh() }) } else t.ready && t.ready(); i.unbindBindingUpdate(r), i.bindBindingUpdate(r, function () { t.refresh() }) } }, propertyChangedHandler: function (e, t, i, s) { void 0 != this.isInitialized && 0 != this.isInitialized && ("source" == t && this._refreshOnDownloadComlete(), this.refresh()) }, _initRenderer: function (t) { if (!e.jqx.createRenderer) throw "Please include a reference to jqxdraw.js"; return e.jqx.createRenderer(this, t) }, _internalRefresh: function () { var t = this; if (!e.jqx.isHidden(t.host)) { t._stopAnimations(), t.renderer && (t._isToggleRefresh || t._isUpdate) || (t.host.empty(), t._ttEl = void 0, t._initRenderer(t.host)); var i = t.renderer; if (i) { var s = i.getRect(); t._render({ x: 1, y: 1, width: s.width, height: s.height }), i instanceof e.jqx.HTML5Renderer && i.refresh(), t._isUpdate = !1 } } }, saveAsPNG: function (e, t, i) { return this._saveAsImage("png", e, t, i) }, saveAsJPEG: function (e, t, i) { return this._saveAsImage("jpeg", e, t, i) }, _saveAsImage: function (t, i, s, r) { return e.jqx._widgetToImage(this, t, i, s, r) }, refresh: function () { this._internalRefresh() }, update: function () { this._isUpdate = !0, this._internalRefresh() }, _seriesTypes: ["line", "stackedline", "stackedline100", "spline", "stackedspline", "stackedspline100", "stepline", "stackedstepline", "stackedstepline100", "area", "stackedarea", "stackedarea100", "splinearea", "stackedsplinearea", "stackedsplinearea100", "steparea", "stackedsteparea", "stackedsteparea100", "rangearea", "splinerangearea", "steprangearea", "column", "stackedcolumn", "stackedcolumn100", "rangecolumn", "scatter", "stackedscatter", "stackedscatter100", "bubble", "stackedbubble", "stackedbubble100", "pie", "donut"], _render: function (t) { var i = this, s = i.renderer; i._colorsCache.clear(), !i._isToggleRefresh && i._isUpdate && i._renderData && i._renderDataClone(), i._renderData = [], s.clear(), i._unselect(), i._hideToolTip(0); var r = i.backgroundImage; void 0 == r || "" == r ? i.host.css({ "background-image": "" }) : i.host.css({ "background-image": -1 != r.indexOf("(") ? r : "url('" + r + "')" }), i._rect = t; var o = i.padding || { left: 5, top: 5, right: 5, bottom: 5 }, a = s.createClipRect(t), n = s.beginGroup(); s.setClip(n, a); var l = s.rect(t.x, t.y, t.width - 2, t.height - 2); if (void 0 == r || "" == r ? s.attr(l, { fill: i.backgroundColor || i.background || "white" }) : s.attr(l, { fill: "transparent" }), 0 != i.showBorderLine) { var h = void 0 == i.borderLineColor ? i.borderColor : i.borderLineColor; void 0 == h && (h = "#888888"); var d = this.borderLineWidth; (isNaN(d) || d < 0 || d > 10) && (d = 1), s.attr(l, { "stroke-width": d, stroke: h }) } e.isFunction(i.drawBefore) && i.drawBefore(s, t); var c = { x: o.left, y: o.top, width: t.width - o.left - o.right, height: t.height - o.top - o.bottom }; i._paddedRect = c; var u = i.titlePadding || { left: 2, top: 2, right: 2, bottom: 2 }; if (i.title && i.title.length > 0) { var p = i.toThemeProperty("jqx-chart-title-text", null), m = s.measureText(i.title, 0, { class: p }); s.text(i.title, c.x + u.left, c.y + u.top, c.width - (u.left + u.right), m.height, 0, { class: p }, !0, "center", "center"), c.y += m.height, c.height -= m.height } if (i.description && i.description.length > 0) { var g = i.toThemeProperty("jqx-chart-title-description", null), m = s.measureText(i.description, 0, { class: g }); s.text(i.description, c.x + u.left, c.y + u.top, c.width - (u.left + u.right), m.height, 0, { class: g }, !0, "center", "center"), c.y += m.height, c.height -= m.height } (i.title || i.description) && (c.y += u.bottom + u.top, c.height -= u.bottom + u.top); var f = { x: c.x, y: c.y, width: c.width, height: c.height }; i._buildStats(f); for (var v = i._isPieOnlySeries(), x = i.seriesGroups, w = {}, b = 0; b < x.length && !v; b++) if ("pie" != x[b].type && "donut" != x[b].type) { var _ = "horizontal" == x[b].orientation, y = x[b].valueAxis; if (y || (y = x[b].valueAxis = {}), !(B = i._getCategoryAxis(b))) throw "seriesGroup[" + b + "] is missing " + (_ ? "valueAxis" : "xAxis") + " definition"; w[C = B == i._getCategoryAxis() ? -1 : b] = 0 } var j = i.axisPadding; isNaN(j) && (j = 5); for (var q = { left: 0, right: 0, leftCount: 0, rightCount: 0 }, T = [], b = 0; b < x.length; b++) if ("pie" != (R = x[b]).type && "donut" != R.type && 1 != R.spider && 1 != R.polar) { var _ = "horizontal" == R.orientation, C = i._getCategoryAxis(b) == i._getCategoryAxis() ? -1 : b, S = y.axisSize, k = { x: 0, y: f.y, width: f.width, height: f.height }, I = void 0; S && "auto" != S || (_ ? (S = this._renderCategoryAxis(b, k, !0, f).width, 1 == (1 & w[C]) ? S = 0 : S > 0 && (w[C] |= 1), I = i._getCategoryAxis(b).position) : (S = i._renderValueAxis(b, k, !0, f).width, R.valueAxis && (I = R.valueAxis.position))), "left" != I && 1 == i.rtl && (I = "right"), "right" != I && (I = "left"), q[I + "Count"] > 0 && q[I] > 0 && S > 0 && (q[I] += j), T.push({ width: S, position: I, xRel: q[I] }), q[I] += S, q[I + "Count"]++ } else T.push({ width: 0, position: 0, xRel: 0 }); for (var D = { top: 0, bottom: 0, topCount: 0, bottomCount: 0 }, P = [], b = 0; b < x.length; b++) if ("pie" != (R = x[b]).type && "donut" != R.type && 1 != R.spider && 1 != R.polar) { var _ = "horizontal" == R.orientation, B = i._getCategoryAxis(b), C = B == i._getCategoryAxis() ? -1 : b; I = void 0, (O = B.axisSize) && "auto" != O || (_ ? (O = i._renderValueAxis(b, { x: 0, y: 0, width: 1e7, height: 0 }, !0, f).height, i.seriesGroups[b].valueAxis && (I = R.valueAxis.position)) : (O = i._renderCategoryAxis(b, { x: 0, y: 0, width: 1e7, height: 0 }, !0).height, 2 == (2 & w[C]) ? O = 0 : O > 0 && (w[C] |= 2), I = i._getCategoryAxis(b).position)), "top" != I && (I = "bottom"), D[I + "Count"] > 0 && D[I] > 0 && O > 0 && (D[I] += j), P.push({ height: O, position: I, yRel: D[I] }), D[I] += O, D[I + "Count"]++ } else P.push({ height: 0, position: 0, yRel: 0 }); i._createAnimationGroup("series"), i._plotRect = f; var z = 0 != i.showLegend, H = z ? i._renderLegend(i.legendLayout ? i._rect : c, !0) : { width: 0, height: 0 }; if (!this.legendLayout || isNaN(this.legendLayout.left) && isNaN(this.legendLayout.top) || (H = { width: 0, height: 0 }), c.height < D.top + D.bottom + H.height || c.width < q.left + q.right) s.endGroup(); else { f.height -= D.top + D.bottom + H.height, f.x += q.left, f.width -= q.left + q.right, f.y += D.top; var M = []; if (!v) { i._getCategoryAxis().tickMarksColor; for (b = 0; b < x.length; b++) if (1 != (R = x[b]).polar && 1 != R.spider) { var _ = "horizontal" == R.orientation, C = i._getCategoryAxis(b) == i._getCategoryAxis() ? -1 : b, k = { x: f.x, y: 0, width: f.width, height: P[b].height }; if ("top" != P[b].position ? k.y = f.y + f.height + P[b].yRel : k.y = f.y - P[b].yRel - P[b].height, _) i._renderValueAxis(b, k, !1, f); else { if (4 == (4 & w[C])) continue; if (!i._isGroupVisible(b)) continue; M.push(k), i._renderCategoryAxis(b, k, !1, f), w[C] |= 4 } } } if (z) { var E = i.legendLayout ? i._rect : c, A = c.x + e.jqx._ptrnd((c.width - H.width) / 2), L = f.y + f.height + D.bottom, S = c.width, O = H.height; i.legendLayout && (isNaN(i.legendLayout.left) || (A = i.legendLayout.left), isNaN(i.legendLayout.top) || (L = i.legendLayout.top), isNaN(i.legendLayout.width) || (S = i.legendLayout.width), isNaN(i.legendLayout.height) || (O = i.legendLayout.height)), A + S > E.x + E.width && (S = E.x + E.width - A), L + O > E.y + E.height && (O = E.y + E.height - L), i._renderLegend({ x: A, y: L, width: S, height: O }) } if (i._hasHorizontalLines = !1, !v) for (b = 0; b < x.length; b++) if (1 != (R = x[b]).polar && 1 != R.spider) { var _ = "horizontal" == x[b].orientation, k = { x: f.x - T[b].xRel - T[b].width, y: f.y, width: T[b].width, height: f.height }; if ("left" != T[b].position && (k.x = f.x + f.width + T[b].xRel), _) { if (8 == (8 & w[i._getCategoryAxis(b)])) continue; if (!i._isGroupVisible(b)) continue; M.push(k), i._renderCategoryAxis(b, k, !1, f), w[i._getCategoryAxis(b)] |= 8 } else i._renderValueAxis(b, k, !1, f) } if (!(f.width <= 0 || f.height <= 0)) { i._plotRect = { x: f.x, y: f.y, width: f.width, height: f.height }; var N = s.createClipRect({ x: f.x, y: f.y, width: f.width, height: f.height }), F = s.beginGroup(); s.setClip(F, N); for (b = 0; b < x.length; b++) { var R = x[b], W = !1; for (var V in i._seriesTypes) if (i._seriesTypes[V] == R.type) { W = !0; break } if (!W) throw 'jqxChart: invalid series type "' + R.type + '"'; if (e.isFunction(R.drawBefore) && R.drawBefore(s, t, b), 1 != R.polar && 1 != R.spider || -1 == R.type.indexOf("pie") && -1 == R.type.indexOf("donut") && i._renderSpiderAxis(b, f), R.bands) for (var G = 0; G < R.bands.length; G++) i._renderBand(b, G, f); -1 != R.type.indexOf("column") ? i._renderColumnSeries(b, f) : -1 != R.type.indexOf("pie") || -1 != R.type.indexOf("donut") ? i._renderPieSeries(b, f) : -1 != R.type.indexOf("line") || -1 != R.type.indexOf("area") ? i._renderLineSeries(b, f) : -1 == R.type.indexOf("scatter") && -1 == R.type.indexOf("bubble") || i._renderScatterSeries(b, f), e.isFunction(R.draw) && i.draw(s, t, b) } if (s.endGroup(), 0 == i.enabled) { var U = s.rect(t.x, t.y, t.width, t.height); s.attr(U, { fill: "#777777", opacity: .5, stroke: "#00FFFFFF" }) } if (e.isFunction(i.draw) && i.draw(s, t), s.endGroup(), i._startAnimation("series"), this._renderCategoryAxisRangeSelector) for (var Y = [], b = 0; b < i.seriesGroups.length; b++) { var K = this._getCategoryAxis(b); -1 == Y.indexOf(K) && (this._renderCategoryAxisRangeSelector(b, M[b]), Y.push(K)) } } } }, _isPieOnlySeries: function () { var e = this.seriesGroups; if (0 == e.length) return !1; for (var t = 0; t < e.length; t++) if ("pie" != e[t].type && "donut" != e[t].type) return !1; return !0 }, _renderChartLegend: function (t, i, s, r) { for (var o = this, a = o.renderer, n = { x: i.x + 3, y: i.y + 3, width: i.width - 6, height: i.height - 6 }, l = { width: n.width, height: 0 }, h = 0, d = 0, c = 20, u = 0, p = 10, m = 0, g = 0; g < t.length; g++) { var f = t[g].css; f || (f = o.toThemeProperty("jqx-chart-legend-text", null)), c = 20; var v = t[g].text, x = a.measureText(v, 0, { class: f }); x.height > c && (c = x.height), x.width > m && (m = x.width), r ? (0 != g && (d += c), d > n.height && (d = 0, h += m + 10, m = x.width, l.width = h + m)) : (0 != h && (h += 10), h + 20 + x.width > n.width && x.width < n.width && (h = 0, d += c, c = 20, u = n.width, l.height = d + c)); var w = !1; if (x.width > i.width) { w = !0; for (var b = i.width, _ = (A = v).split(/\s+/).reverse(), y = [], j = "", q = new Array; word = _.pop() ;) y.push(word), j = y.join(" "), (k = o.renderer.measureText(j, 0, { class: f })).width > b && q.length > 0 && (y.pop(), j = (y = [word]).join(" ")), q.push({ text: j }); x.width = 0; for (var T = 0, C = 0; C < q.length; C++) { var S = q[C].text, k = o.renderer.measureText(S, 0, { class: f }); x.width = Math.max(x.width, k.width), T += x.height } x.height = T } I = n.x + h + x.width < i.x + i.width && n.y + d + x.height < i.y + i.height; if (o.legendLayout) var I = n.x + h + x.width < o._rect.x + o._rect.width && n.y + d + x.height < o._rect.y + o._rect.height; if (!s && I) { var D = t[g].seriesIndex, P = t[g].groupIndex, B = t[g].itemIndex, z = t[g].color, H = o._isSerieVisible(P, D, B), M = a.beginGroup(), E = H ? t[g].opacity : .1; if (w) { for (var A = v, b = i.width, _ = A.split(/\s+/).reverse(), y = [], j = "", L = 0, q = new Array; word = _.pop() ;) y.push(word), j = y.join(" "), (k = o.renderer.measureText(j, 0, { class: f })).width > b && q.length > 0 && (y.pop(), L += k.height, j = (y = [word]).join(" ")), q.push({ text: j, dy: L }); for (C = 0; C < q.length; C++) { S = q[C].text; L = q[C].dy; k = o.renderer.measureText(S, 0, { class: f }); r ? o.renderer.text(S, n.x + h + 15, n.y + d + L, x.width, c, 0, { class: f }, !1, "left", "center") : o.renderer.text(S, n.x + h + 15, n.y + d + L, x.width, c, 0, { class: f }, !1, "center", "center") } O = a.rect(n.x + h, n.y + d + 5 + L / 2, p, p); r && (d += L), o.renderer.attr(O, { fill: z, "fill-opacity": E, stroke: z, "stroke-width": 1, "stroke-opacity": t[g].opacity }) } else { var O = a.rect(n.x + h, n.y + d + 5, p, p); o.renderer.attr(O, { fill: z, "fill-opacity": E, stroke: z, "stroke-width": 1, "stroke-opacity": t[g].opacity }), r ? o.renderer.text(v, n.x + h + 15, n.y + d, x.width, x.height + 5, 0, { class: f }, !1, "left", "center") : o.renderer.text(v, n.x + h + 15, n.y + d, x.width, c, 0, { class: f }, !1, "center", "center") } o.renderer.endGroup(), o._setLegendToggleHandler(P, D, B, M) } r || u < (h += x.width + 20) && (u = h) } if (s) return l.height = e.jqx._ptrnd(d + c + 5), l.width = e.jqx._ptrnd(u), l }, _isSerieVisible: function (t, i, s) { for (; this._itemsToggleState.length < t + 1;) this._itemsToggleState.push([]); for (var r = this._itemsToggleState[t]; r.length < i + 1;) r.push(!!isNaN(s) || []); var o = r[i]; if (isNaN(s)) return o; for (e.isArray(o) || (r[i] = o = []) ; o.length < s + 1;) o.push(!0); return o[s] }, _isGroupVisible: function (e) { var t = !1, i = this.seriesGroups[e].series; if (!i) return t; for (var s = 0; s < i.length; s++) if (this._isSerieVisible(e, s)) { t = !0; break } return t }, _toggleSerie: function (t, i, s, r) { var o = !this._isSerieVisible(t, i, s); void 0 != r && (o = r); var a = this.seriesGroups[t], n = a.series[i]; if (this._raiseEvent("toggle", { state: o, seriesGroup: a, serie: n, elementIndex: s }), isNaN(s)) this._itemsToggleState[t][i] = o; else { var l = this._itemsToggleState[t][i]; for (e.isArray(l) || (l = []) ; l.length < s;) l.push(!0); l[s] = o } this._isToggleRefresh = !0, this.update(), this._isToggleRefresh = !1 }, showSerie: function (e, t, i) { this._toggleSerie(e, t, i, !0) }, hideSerie: function (e, t, i) { this._toggleSerie(e, t, i, !1) }, _setLegendToggleHandler: function (e, t, i, s) { var r = this.seriesGroups[e], o = r.series[t].enableSeriesToggle; if (void 0 == o && (o = 0 != r.enableSeriesToggle), o) { var a = this; this.renderer.addHandler(s, "click", function (s) { s.preventDefault(), a._toggleSerie(e, t, i) }) } }, _renderLegend: function (e, t) { for (var i = this, s = [], r = 0; r < i.seriesGroups.length; r++) { var o = i.seriesGroups[r]; if (0 != o.showLegend) for (var a = 0; a < o.series.length; a++) { var n = o.series[a]; if (0 != n.showLegend) { var l, h = i._getSerieSettings(r, a); if ("pie" != o.type && "donut" != o.type) { var d = n.legendFormatSettings || o.legendFormatSettings, c = n.legendFormatFunction || o.legendFormatFunction; l = i._formatValue(n.displayText || n.dataField || "", d, c, r, a, m); g = i._getSeriesColors(r, a); s.push({ groupIndex: r, seriesIndex: a, text: l, css: n.displayTextClass, color: g.fillColor, opacity: h.opacity }) } else for (var u = i._getCategoryAxis(r), d = n.legendFormatSettings || o.legendFormatSettings || u.formatSettings || n.formatSettings || o.formatSettings, c = n.legendFormatFunction || o.legendFormatFunction || u.formatFunction || n.formatFunction || o.formatFunction, p = i._getDataLen(r), m = 0; m < p; m++) { l = i._getDataValue(m, n.displayText, r), l = i._formatValue(l, d, c, r, a, m); var g = i._getColors(r, a, m); s.push({ groupIndex: r, seriesIndex: a, itemIndex: m, text: l, css: n.displayTextClass, color: g.fillColor, opacity: h.opacity }) } } } } return i._renderChartLegend(s, e, t, i.legendLayout && "vertical" == i.legendLayout.flow) }, _renderCategoryAxis: function (e, t, i, s) { var r = this, o = r._getCategoryAxis(e), a = r.seriesGroups[e], n = "horizontal" == a.orientation, l = { width: 0, height: 0 }; if (!o || 0 == o.visible || "spider" == a.type) return l; if (!r._isGroupVisible(e)) return l; var h = r._alignValuesWithTicks(e); r.rtl && (o.flip = !0); var d = n ? t.height : t.width, c = o.text, u = r._calculateXOffsets(e, d), p = u.axisStats, m = o.rangeSelector, g = 0; if (m) { if (!this._selectorGetSize) throw new Error("jqxChart: Missing reference to jqxchart.rangeselector.js"); g = this._selectorGetSize(o) } var f = p.interval; if (!isNaN(f)) { var v, x = { visible: 0 != o.showGridLines, color: o.gridLinesColor || "#888888", unitInterval: o.gridLinesInterval || f, dashStyle: o.gridLinesDashStyle, offsets: [] }, w = { visible: 0 != o.showTickMarks, color: o.tickMarksColor || "#888888", unitInterval: o.tickMarksInterval || f, dashStyle: o.tickMarksDashStyle, offsets: [] }, b = o.textRotationAngle || 0, _ = p.min, y = p.max, j = u.padding, q = 1 == o.flip || r.rtl; "date" == o.type ? (x.offsets = this._generateDTOffsets(_, y, d, j, x.unitInterval, f, p.dateTimeUnit, h, NaN, !1, q), w.offsets = this._generateDTOffsets(_, y, d, j, w.unitInterval, f, p.dateTimeUnit, h, NaN, !1, q), v = this._generateDTOffsets(_, y, d, j, f, f, p.dateTimeUnit, h, NaN, !0, q)) : (x.offsets = this._generateOffsets(_, y, d, j, x.unitInterval, f, h, NaN, !1, q), w.offsets = this._generateOffsets(_, y, d, j, w.unitInterval, f, h, NaN, !1, q), v = this._generateOffsets(_, y, d, j, f, f, h, NaN, !0, q)), 0 == u.length && (v = []); var T, C = o.horizontalTextAlignment; r.renderer.getRect().width, t.x, t.width, r._getDataLen(e); r._elementRenderInfo && r._elementRenderInfo.length > e && (T = r._elementRenderInfo[e].xAxis); var S = [], k = o.formatFunction, I = o.formatSettings; "date" != o.type || I || k || (k = this._getDefaultDTFormatFn(o.baseUnit || "day")); for (var D = 0; D < v.length; D++) { var P = v[D].value, B = v[D].offset; if ("date" != o.type && p.useIndeces && o.dataField) { var z = Math.round(P); void 0 == (P = r._getDataValue(z, o.dataField)) && (P = "") } void 0 != (c = r._formatValue(P, I, k, e, void 0, D)) && "" != c || (c = p.useIndeces ? (p.min + D).toString() : void 0 == P ? "" : P.toString()); var H = { key: P, text: c, targetX: B, x: B }; T && T.itemOffsets[P] && (H.x = T.itemOffsets[P].x, H.y = T.itemOffsets[P].y), S.push(H) } var M = o.descriptionClass; M || (M = r.toThemeProperty("jqx-chart-axis-description", null)); var E = o.class; E || (E = r.toThemeProperty("jqx-chart-axis-text", null)), n && (b -= 90); for (var A = { text: o.description, style: M, halign: o.horizontalDescriptionAlignment || "center", valign: o.verticalDescriptionAlignment || "center", textRotationAngle: n ? -90 : 0 }, L = { textRotationAngle: b, style: E, halign: C, valign: o.verticalTextAlignment || "center", textRotationPoint: o.textRotationPoint || "auto", textOffset: o.textOffset }, O = n && "right" == o.position || !n && "top" == o.position, N = { rangeLength: u.rangeLength, itemWidth: u.itemWidth, intervalWidth: u.intervalWidth, data: u, rect: t }, F = { items: S, renderData: N }; r._renderData.length < e + 1;) r._renderData.push({}); r._renderData[e].xAxis = N; var R = r._getAnimProps(e), W = R.enabled && S.length < 500 ? R.duration : 0; 0 == r.enableAxisTextAnimation && (W = 0), !i && m && (n ? (t.width -= g, "right" != o.position && (t.x += g)) : (t.height -= g, "top" == o.position && (t.y += g))); var V = r._renderAxis(n, O, A, L, { x: t.x, y: t.y, width: t.width, height: t.height }, s, f, !1, !0, F, x, w, i, W); return n ? V.width += g : V.height += g, V } }, _animateAxisText: function (e, t) { for (var i = e.items, s = e.textSettings, r = 0; r < i.length; r++) { var o = i[r]; if (o.visible) { var a = o.targetX, n = o.targetY; isNaN(o.x) || isNaN(o.y) || (a = o.x + (a - o.x) * t, n = o.y + (n - o.y) * t), o.element && (this.renderer.removeElement(o.element), o.element = void 0), o.element = this.renderer.text(o.text, a, n, o.width, o.height, s.textRotationAngle, { class: s.style }, !1, s.halign, s.valign, s.textRotationPoint) } } }, _getPolarAxisCoords: function (t, i) { var s = this.seriesGroups[t], r = this._calcGroupOffsets(t, i).xoffsets; if (r) { var o = i.x + e.jqx.getNum([s.offsetX, i.width / 2]), a = i.y + e.jqx.getNum([s.offsetY, i.height / 2]), n = s.radius; isNaN(n) && (n = Math.min(i.width, i.height) / 2 * .6); var l = this._alignValuesWithTicks(t), h = s.startAngle; return isNaN(h) ? h = 0 : (h = (h < 0 ? -1 : 1) * (Math.abs(h) % 360), h = 2 * Math.PI * h / 360), { x: o, y: a, r: n, itemWidth: r.itemWidth, rangeLength: r.rangeLength, valuesOnTicks: l, startAngle: h } } }, _toPolarCoord: function (t, i, s, r) { var o = 2 * (s - i.x) * Math.PI / Math.max(1, i.width) + t.startAngle, a = (i.height + i.y - r) * t.r / Math.max(1, i.height), n = t.x + a * Math.cos(o), l = t.y + a * Math.sin(o); return { x: e.jqx._ptrnd(n), y: e.jqx._ptrnd(l) } }, _renderSpiderAxis: function (t, i) { var s = this, r = s._getCategoryAxis(t); if (r && 0 != r.visible) { s.seriesGroups[t]; var o = s._getPolarAxisCoords(t, i); if (o) { var a = e.jqx._ptrnd(o.x), n = e.jqx._ptrnd(o.y), l = o.r, h = o.startAngle; if (!(l < 1)) { l = e.jqx._ptrnd(l); var d = 2 * Math.PI * l, c = s._calculateXOffsets(t, d); if (c.rangeLength) { var u = r.unitInterval; (isNaN(u) || u < 1) && (u = 1); var p, m = { visible: 0 != r.showGridLines, color: r.gridLinesColor || "#888888", unitInterval: r.gridLinesInterval || r.unitInterval || u, dashStyle: r.gridLinesDashStyle, offsets: [] }, g = { visible: 0 != r.showTickMarks, color: r.tickMarksColor || "#888888", unitInterval: r.tickMarksInterval || r.unitInterval || u, dashStyle: r.tickMarksDashStyle, offsets: [] }, f = r.horizontalTextAlignment, v = s._alignValuesWithTicks(t), x = s.renderer, w = c.axisStats, b = w.min, _ = w.max, y = this._getPaddingSize(c.axisStats, r, v, d, !0, !1), j = 1 == r.flip || s.rtl; "date" == r.type ? (m.offsets = this._generateDTOffsets(b, _, d, y, m.unitInterval, u, r.baseUnit, !1, 0, !1, j), g.offsets = this._generateDTOffsets(b, _, d, y, g.unitInterval, u, r.baseUnit, !1, 0, !1, j), p = this._generateDTOffsets(b, _, d, y, u, u, r.baseUnit, !1, 0, !0, j)) : (m.offsets = this._generateOffsets(b, _, d, y, m.unitInterval, u, !0, 0, !1, j), g.offsets = this._generateOffsets(b, _, d, y, g.unitInterval, u, !0, 0, !1, j), p = this._generateOffsets(b, _, d, y, u, u, !0, 0, !1, j)); var q, f = r.horizontalTextAlignment; s.renderer.getRect().width, i.x, i.width, s._getDataLen(t); s._elementRenderInfo && s._elementRenderInfo.length > t && (q = s._elementRenderInfo[t].xAxis); for (var T = [], C = 0; C < p.length; C++) { var S = p[C].offset, k = p[C].value; if ("date" != r.type && w.useIndeces && r.dataField) { var I = Math.round(k); void 0 == (k = s._getDataValue(I, r.dataField)) && (k = "") } void 0 != (z = s._formatValue(k, r.formatSettings, r.formatFunction, t, void 0, C)) && "" != z || (z = w.useIndeces ? (w.min + C).toString() : void 0 == k ? "" : k.toString()); var D = { key: k, text: z, targetX: S, x: S }; q && q.itemOffsets[k] && (D.x = q.itemOffsets[k].x, D.y = q.itemOffsets[k].y), T.push(D) } var P = r.descriptionClass; P || (P = s.toThemeProperty("jqx-chart-axis-description", null)); var B = r.class; B || (B = s.toThemeProperty("jqx-chart-axis-text", null)); var z = r.text, H = r.textRotationAngle || 0, M = "horizontal" == s.seriesGroups[t].orientation; M && (H -= 90); r.description, r.horizontalDescriptionAlignment, r.verticalDescriptionAlignment, r.verticalTextAlignment, r.textRotationPoint, r.textOffset, M && "right" == r.position || !M && r.position; for (var E = { rangeLength: c.rangeLength, itemWidth: c.itemWidth }; s._renderData.length < t + 1;) s._renderData.push({}); s._renderData[t].xAxis = E; for (var A = { stroke: m.color, fill: "none", "stroke-width": 1, "stroke-dasharray": m.dashStyle || "" }, L = (x.circle(a, n, l, A), T.length), O = (Math.PI, h), C = 0; C < T.length; C++) { (R = (360 - (R = O + 2 * (G = T[C].x) * Math.PI / Math.max(1, d)) / (2 * Math.PI) * 360) % 360) < 0 && (R = 360 + R); var N = x.measureText(T[C].text, 0, { class: B }), F = this._adjustTextBoxPosition(a, n, N, l + (g.visible ? 7 : 2), R, !1, !1, !0); x.text(T[C].text, F.x, F.y, N.width, N.height, 0, { class: B }, !1, "center", "center") } if (m.visible) for (C = 0; C < m.offsets.length; C++) { G = m.offsets[C].offset; v || (G -= y.right / 2); var R = O + 2 * G * Math.PI / Math.max(1, d), W = a + l * Math.cos(R), V = n + l * Math.sin(R); x.line(a, n, e.jqx._ptrnd(W), e.jqx._ptrnd(V), A) } if (g.visible) for (var A = { stroke: g.color, fill: "none", "stroke-width": 1, "stroke-dasharray": g.dashStyle || "" }, C = 0; C < g.offsets.length; C++) { var G = g.offsets[C].offset; v || (G -= y.right / 2); var R = O + 2 * G * Math.PI / Math.max(1, d), U = { x: a + l * Math.cos(R), y: n + l * Math.sin(R) }, Y = { x: a + (l + 5) * Math.cos(R), y: n + (l + 5) * Math.sin(R) }; x.line(e.jqx._ptrnd(U.x), e.jqx._ptrnd(U.y), e.jqx._ptrnd(Y.x), e.jqx._ptrnd(Y.y), A) } s._renderSpiderValueAxis(t, i) } } } } }, _renderSpiderValueAxis: function (t, i) { var s = this.seriesGroups[t], r = this._getPolarAxisCoords(t, i); if (r) { var o = e.jqx._ptrnd(r.x), a = e.jqx._ptrnd(r.y), n = r.r; r.startAngle; if (!(n < 1)) { n = e.jqx._ptrnd(n); var l = this.seriesGroups[t].valueAxis; if (l && 0 != l.displayValueAxis && 0 != l.visible) { var h = l.class; h || (h = this.toThemeProperty("jqx-chart-axis-text", null)); var d = l.formatSettings; -1 != s.type.indexOf("stacked") && -1 != s.type.indexOf("100") && !d && (d = { sufix: "%" }), this._calcValueAxisItems(t, n); var c = this._stats.seriesGroups[t].mu, u = { visible: 0 != l.showGridLines, color: l.gridLinesColor || "#888888", unitInterval: l.gridLinesInterval || c || 1, dashStyle: l.gridLinesDashStyle }, p = { stroke: u.color, fill: "none", "stroke-width": 1, "stroke-dasharray": u.dashStyle || "" }, m = this._renderData[t].valueAxis, g = m.items; g.length && this.renderer.line(o, a, o, e.jqx._ptrnd(a - n), p), g = g.reverse(); for (var f = this.renderer, v = 0; v < g.length - 1; v++) { var x = g[v], w = l.formatFunction ? l.formatFunction(x) : this._formatNumber(x, d), b = f.measureText(w, 0, { class: h }), _ = o + (0 != l.showTickMarks ? 3 : 2), y = a - m.itemWidth * v - b.height; f.text(w, _, y, b.width, b.height, 0, { class: h }, !1, "center", "center") } var j = 1 == l.logarithmicScale ? g.length : m.rangeLength; if (aIncrement = 2 * Math.PI / j, u.visible) for (var p = { stroke: u.color, fill: "none", "stroke-width": 1, "stroke-dasharray": u.dashStyle || "" }, v = 0; v < j; v += u.unitInterval) { y = e.jqx._ptrnd(n * v / j); f.circle(o, a, y, p) } var q = { visible: 0 != l.showTickMarks, color: l.tickMarksColor || "#888888", unitInterval: l.tickMarksInterval || c, dashStyle: l.tickMarksDashStyle }; if (q.visible) { tickMarkSize = 5; for (var p = { stroke: q.color, fill: "none", "stroke-width": 1, "stroke-dasharray": q.dashStyle || "" }, T = o - Math.round(tickMarkSize / 2), C = T + tickMarkSize, v = 0; v < j; v += q.unitInterval) if (!u.visible || v % u.unitInterval != 0) { y = e.jqx._ptrnd(a - n * v / j); f.line(e.jqx._ptrnd(T), y, e.jqx._ptrnd(C), y, p) } } } } } }, _renderAxis: function (t, i, s, r, o, a, n, l, h, d, c, u, p, m) { var g = u.visible ? 4 : 0, f = { width: 0, height: 0 }, v = { width: 0, height: 0 }; t ? f.height = v.height = o.height : f.width = v.width = o.width, !p && i && t && (o.x -= o.width); var x = d.renderData, w = x.itemWidth; if (void 0 != s.text && "" != s) { var b = s.textRotationAngle, _ = this.renderer.measureText(s.text, b, { class: s.style }); v.width = _.width, v.height = _.height, p || this.renderer.text(s.text, o.x + (t ? i ? 2 * o.width - 2 - v.width : 2 : 0), o.y + (t ? 0 : i ? 2 : o.height - 2 - v.height), t ? v.width : o.width, t ? o.height : v.height, b, { class: s.style }, !0, s.halign, s.valign) } var y = 0, j = h ? -w / 2 : 0; h && !t && (r.halign = "center"); var q = o.x, T = o.y, C = r.textOffset; C && (isNaN(C.x) || (q += C.x), isNaN(C.y) || (T += C.y)), t ? (q += 2 + (v.width > 0 ? v.width + 2 : 0) + (i ? o.width - v.width : 0), T += j) : (q += j, i ? (T += v.height > 0 ? v.height + 6 : 4, T += g - (h ? g : g / 4)) : T += h ? g : g / 4); var S = 0, k = 0, I = d.items; x.itemOffsets = {}, !this._isToggleRefresh && this._isUpdate || (m = 0); for (var D = !1, P = 0, B = 0; B < I.length; B++, y += w) { var z = I[B].text; if (isNaN(I[B].targetX) || (y = I[B].targetX), (_ = this.renderer.measureText(z, r.textRotationAngle, { class: r.style })).width > k && (k = _.width), _.height > S && (S = _.height), P += t ? S : k, !p) { if (t && y > o.height + 2 || !t && y > o.width + 2) break; var H = t ? q + (i ? 0 == v.width ? g : g - 2 : 0) : q + y, M = t ? T + y : T; x.itemOffsets[I[B].key] = { x: H, y: M }, D || (!isNaN(I[B].x) || !isNaN(I[B].y) && m) && (D = !0), I[B].targetX = H, I[B].targetY = M, I[B].width = t ? o.width - 4 - g - (v.width > 0 ? v.width + 2 : 0) : w, I[B].height = t ? w : o.height - 4 - g - (v.height > 0 ? v.height + 2 : 0), I[B].visible = !l || l && B % n == 0 } } if (x.avgWidth = 0 == I.length ? 0 : P / I.length, !p) { var E = { items: I, textSettings: r }; if (!isNaN(m) && D || (m = 0), this._animateAxisText(E, 0 == m ? 1 : 0), 0 != m) { var A = this; this._enqueueAnimation("series", void 0, void 0, m, function (e, t, i) { A._animateAxisText(t, i) }, E) } } f.width += 4 + g + v.width + k + (t && v.width > 0 ? 2 : 0), f.height += 4 + g + v.height + S + (!t && v.height > 0 ? 2 : 0); var L = {}, O = { stroke: c.color, "stroke-width": 1, "stroke-dasharray": c.dashStyle || "" }; if (!p) { M = e.jqx._ptrnd(o.y + (i ? o.height : 0)); t ? this.renderer.line(e.jqx._ptrnd(o.x + o.width), o.y, e.jqx._ptrnd(o.x + o.width), o.y + o.height, O) : this.renderer.line(e.jqx._ptrnd(o.x), M, e.jqx._ptrnd(o.x + o.width + 1), M, O) } if (!p && 0 != c.visible) for (var N = c.offsets, B = 0; B < N.length; B++) { if (t) { if ((F = e.jqx._ptrnd(o.y + N[B].offset)) < o.y - .5) break } else if ((F = e.jqx._ptrnd(o.x + N[B].offset)) > o.x + o.width + .5) break; t ? this.renderer.line(e.jqx._ptrnd(a.x), F, e.jqx._ptrnd(a.x + a.width), F, O) : this.renderer.line(F, e.jqx._ptrnd(a.y), F, e.jqx._ptrnd(a.y + a.height), O), L[F] = !0 } O = { stroke: u.color, "stroke-width": 1, "stroke-dasharray": u.dashStyle || "" }; if (!p && u.visible) for (var N = u.offsets, B = 0; B < N.length; B++) { var F = e.jqx._ptrnd(t ? o.y + N[B].offset : o.x + N[B].offset); if (L[F - 1] ? F-- : L[F + 1] && F++, t) { if (F > o.y + o.height + .5) break } else if (F > o.x + o.width + .5) break; var R = i ? g : -g; if (t) this.renderer.line(o.x + o.width, F, o.x + o.width + R, F, O); else { M = e.jqx._ptrnd(o.y + (i ? o.height : 0)); this.renderer.line(F, M, F, M - R, O) } } return f.width = e.jqx._rup(f.width), f.height = e.jqx._rup(f.height), f }, _calcValueAxisItems: function (e, t) { var i = this._stats.seriesGroups[e]; if (!i || !i.isValid) return !1; var s = this.seriesGroups[e], r = (s.orientation, s.valueAxis), o = 0 != r.valuesOnTicks, a = (r.dataField, i.intervals), n = t / a, l = i.min, h = i.mu, d = 1 == r.logarithmicScale, c = r.logarithmicScaleBase || 10, u = -1 != s.type.indexOf("stacked") && -1 != s.type.indexOf("100"); for (d && (h = isNaN(r.unitInterval) ? 1 : r.unitInterval), o || (a = Math.max(a - 1, 1)) ; this._renderData.length < e + 1;) this._renderData.push({}); this._renderData[e].valueAxis = {}; var p = this._renderData[e].valueAxis; p.itemWidth = p.intervalWidth = n, p.items = []; for (var m = p.items, g = 0; g <= a; g++) { var f = 0; f = d ? u ? i.max / Math.pow(c, a - g) : l * Math.pow(c, g) : o ? l + g * h : l + (g + .5) * h, m.push(f) } return p.rangeLength = d && !u ? i.intervals : i.intervals * h, 1 != s.valueAxis.flip && (m = m.reverse()), !0 }, _renderValueAxis: function (e, t, i, s) { var r = this.seriesGroups[e], o = "horizontal" == r.orientation, a = r.valueAxis; if (!a) throw "SeriesGroup " + e + " is missing valueAxis definition"; var n = { width: 0, height: 0 }; if (!this._isGroupVisible(e) || this._isPieOnlySeries() || "spider" == r.type) return n; if (!this._calcValueAxisItems(e, o ? t.width : t.height) || 0 == a.displayValueAxis || 0 == a.visible) return n; var l = a.descriptionClass; l || (l = this.toThemeProperty("jqx-chart-axis-description", null)); var h = { text: a.description, style: l, halign: a.horizontalDescriptionAlignment || "center", valign: a.verticalDescriptionAlignment || "center", textRotationAngle: o ? 0 : this.rtl ? 90 : -90 }, d = a.itemsClass; d || (d = this.toThemeProperty("jqx-chart-axis-text", null)); var c = { style: d, halign: a.horizontalTextAlignment || "center", valign: a.verticalTextAlignment || "center", textRotationAngle: a.textRotationAngle || 0, textRotationPoint: a.textRotationPoint || "auto", textOffset: a.textOffset }, u = 0 != a.valuesOnTicks, p = this._stats.seriesGroups[e], m = p.mu, g = a.formatSettings; -1 != r.type.indexOf("stacked") && -1 != r.type.indexOf("100") && !g && (g = { sufix: "%" }); var f = 1 == a.logarithmicScale; a.logarithmicScaleBase; f && (m = isNaN(a.unitInterval) ? 1 : a.unitInterval); var v, x = [], w = this._renderData[e].valueAxis; this._elementRenderInfo && this._elementRenderInfo.length > e && (v = this._elementRenderInfo[e].valueAxis); for (var b = 0; b < w.items.length; b++) { var _ = w.items[b], y = { key: _, text: a.formatFunction ? a.formatFunction(_) : this._formatNumber(_, g) }; v && v.itemOffsets[_] && (y.x = v.itemOffsets[_].x, y.y = v.itemOffsets[_].y), x.push(y) } var j = a.gridLinesInterval || a.unitInterval; (isNaN(j) || f && j < m) && (j = m); var q = o ? t.width : t.height, T = { visible: 0 != a.showGridLines, color: a.gridLinesColor || "#888888", unitInterval: j, dashStyle: a.gridLinesDashStyle }, C = p.logarithmic ? p.minPow : p.min, S = p.logarithmic ? p.maxPow : p.max; T.visible && (T.offsets = this._generateOffsets(C, S, q, { left: 0, right: 0 }, T.unitInterval, m, !0, 0, !1, !1)); var k = a.tickMarksInterval || a.unitInterval; (isNaN(k) || f && k < m) && (k = m); var I = { visible: 0 != a.showTickMarks, color: a.tickMarksColor || "#888888", unitInterval: k, dashStyle: a.tickMarksDashStyle }; I.visible && (I.offsets = this._generateOffsets(C, S, q, { left: 0, right: 0 }, I.unitInterval, m, !0, 0, !1, !1)); var D = o && "top" == a.position || !o && "right" == a.position || !o && this.rtl && "left" != a.position, P = { items: x, renderData: w }, B = this._getAnimProps(e), z = B.enabled && x.length < 500 ? B.duration : 0; return 0 == this.enableAxisTextAnimation && (z = 0), this._renderAxis(!o, D, h, c, t, s, m, f, u, P, T, I, i, z) }, _generateOffsets: function (e, t, i, s, r, o, a, n, l, h) { var d = [], c = t - e, u = i - s.left - s.right; if (0 == c) return l || a ? d.push({ offset: s.left + u / 2, value: e }) : d.push({ offset: 0, value: e }), d; var p = u / c * o, m = s.left; a || l || (t += o); for (v = e; v <= t; v += o, m += p) d.push({ offset: m, value: v }); if (!a && d.length > 1) { isNaN(n) && (n = l ? 0 : p / 2); for (v = 0; v < d.length; v++) d[v].offset -= n, d[v].offset <= 2 && (d[v].offset = 0), d[v].offset >= i - 2 && (d[v].offset = i) } if (r > o) { for (var g = [], f = Math.round(r / o), v = 0; v < d.length; v++) v % f == 0 && g.push({ offset: d[v].offset, value: d[v].value }); d = g } if (h) for (v = 0; v < d.length; v++) d[v].offset = i - d[v].offset; return d }, _generateDTOffsets: function (t, i, s, r, o, a, n, l, h, d, c) { n || (n = "day"); var u = []; if (t > i) return u; if (t == i) return d ? u.push({ offset: l ? s / 2 : r.left, value: t }) : l && u.push({ offset: s / 2, value: t }), u; var p = s - r.left - r.right, m = t, g = r.left, f = g, v = a = Math.max(a, 1), x = Math.min(1, a); for (a > 1 && (a = 1) ; e.jqx._ptrnd(f) <= e.jqx._ptrnd(r.left + p + (l ? 0 : r.right)) ;) { u.push({ offset: f, value: m }); var w = new Date(m.valueOf()); "millisecond" == n ? w.setMilliseconds(m.getMilliseconds() + a) : "second" == n ? w.setSeconds(m.getSeconds() + a) : "minute" == n ? w.setMinutes(m.getMinutes() + a) : "hour" == n ? w.setHours(m.getHours() + a) : "day" == n ? w.setDate(m.getDate() + a) : "month" == n ? w.setMonth(m.getMonth() + a) : "year" == n && w.setFullYear(m.getFullYear() + a), f = g + ((m = w).valueOf() - t.valueOf()) * x / (i.valueOf() - t.valueOf()) * p } if (c) for (_ = 0; _ < u.length; _++) u[_].offset = s - u[_].offset; if (v > 1) { for (var b = [], _ = 0; _ < u.length; _ += v) b.push({ offset: u[_].offset, value: u[_].value }); u = b } if (!l && !d && u.length > 1) { (b = []).push({ offset: 0, value: void 0 }); for (_ = 1; _ < u.length; _++) b.push({ offset: u[_ - 1].offset + (u[_].offset - u[_ - 1].offset) / 2, value: void 0 }); var y = b.length; y > 1 ? b.push({ offset: b[y - 1].offset + (b[y - 1].offset - b[y - 2].offset) }) : b.push({ offset: s, value: void 0 }), u = b } if (o > a) { for (var b = [], j = Math.round(o / v), _ = 0; _ < u.length; _++) _ % j == 0 && b.push({ offset: u[_].offset, value: u[_].value }); u = b } return u }, _buildStats: function (t) { var i = { seriesGroups: new Array }; this._stats = i; for (var s = 0; s < this.seriesGroups.length; s++) { var r = this.seriesGroups[s]; i.seriesGroups[s] = {}; var o = i.seriesGroups[s]; o.isValid = !0; var a = void 0 != r.valueAxis, n = "horizontal" == r.orientation ? t.width : t.height, l = !1, h = 10; a && (l = 1 == r.valueAxis.logarithmicScale, h = r.valueAxis.logarithmicScaleBase, isNaN(h) && (h = 10)); var d = -1 != r.type.indexOf("stacked"), c = d && -1 != r.type.indexOf("100"), u = -1 != r.type.indexOf("range"); c && (o.psums = new Array, o.nsums = new Array); var p = NaN, m = NaN, g = NaN, f = NaN, v = r.baselineValue; isNaN(v) && (v = l && !c ? 1 : 0); for (var x = this._getDataLen(s), w = 0, b = NaN, _ = 0; _ < x && o.isValid; _++) { for (var y = a ? r.valueAxis.minValue : 1 / 0, j = a ? r.valueAxis.maxValue : -1 / 0, q = 0, T = 0, C = 0; C < r.series.length; C++) if (this._isSerieVisible(s, C)) { var S = void 0, k = void 0, I = void 0; if (u) { var D = this._getDataValueAsNumber(_, r.series[C].dataFieldFrom, s), P = this._getDataValueAsNumber(_, r.series[C].dataFieldTo, s); k = Math.max(D, P), I = Math.min(D, P) } else { if (S = this._getDataValueAsNumber(_, r.series[C].dataField, s), isNaN(S) || l && S <= 0) continue; I = k = S } (isNaN(j) || k > j) && (!a || isNaN(r.valueAxis.maxValue) || k <= r.valueAxis.maxValue) && (j = Math.max(k, v)), (isNaN(y) || I < y) && (!a || isNaN(r.valueAxis.minValue) || I >= r.valueAxis.minValue) && (y = Math.min(I, v)), isNaN(S) || (S > v ? q += S : S < v && (T += S)) } if (!c && a && (isNaN(r.valueAxis.maxValue) || (q = Math.min(r.valueAxis.maxValue, q)), isNaN(r.valueAxis.minValue) || (T = Math.max(r.valueAxis.minValue, T))), l && c) for (C = 0; C < r.series.length; C++) if (this._isSerieVisible(s, C)) { S = this._getDataValueAsNumber(_, r.series[C].dataField, s); if (isNaN(S) || S <= 0) b = .01; else { A = 0 == q ? 0 : S / q; (isNaN(b) || A < b) && (b = A) } } else b = .01; var B = q - T; w < B && (w = B), c && (o.psums[_] = q, o.nsums[_] = T), (j > m || isNaN(m)) && (m = j), (y < p || isNaN(p)) && (p = y), (q > g || isNaN(g)) && (g = q), (T < f || isNaN(f)) && (f = T) } c && (g = 0 == g ? 0 : Math.max(g, -f), f = 0 == f ? 0 : Math.min(f, -g)); var z = a ? r.valueAxis.unitInterval : 0; z || (z = a ? this._calcInterval(d ? f : p, d ? g : m, Math.max(n / 80, 2)) : d ? (g - f) / 10 : (m - p) / 10); var H = NaN, M = 0, E = 0; if (l) { if (c) { H = 0; var A = 1; for (M = E = e.jqx.log(100, h) ; A > b;) A /= h, M--, H++; p = Math.pow(h, M) } else d && (m = Math.max(m, g)), E = e.jqx._rnd(e.jqx.log(m, h), 1, !0), m = Math.pow(h, E), M = e.jqx._rnd(e.jqx.log(p, h), 1, !1), p = Math.pow(h, M); z = h } p < f && (f = p), m > g && (g = m); var L = l ? p : e.jqx._rnd(d ? f : p, z, !1), O = l ? m : e.jqx._rnd(d ? g : m, z, !0); c && O > 100 && (O = 100), c && !l && (O = O > 0 ? 100 : 0, L = L < 0 ? -100 : 0, z = a ? r.valueAxis.unitInterval : 10, (isNaN(z) || z <= 0 || z >= 100) && (z = 10)), isNaN(O) || isNaN(L) || isNaN(z) || (isNaN(H) && (H = parseInt(((O - L) / (0 == z ? 1 : z)).toFixed())), l && !c && (H = E - M, w = Math.pow(h, H)), H < 1 || (o.min = L, o.max = O, o.logarithmic = l, o.logBase = h, o.base = v, o.minPow = M, o.maxPow = E, o.mu = z, o.maxRange = w, o.intervals = H)) } }, _getDataLen: function (t) { var i = this.source; return void 0 != t && -1 != t && this.seriesGroups[t].source && (i = this.seriesGroups[t].source), i instanceof e.jqx.dataAdapter && (i = i.records), i ? i.length : 0 }, _getDataValue: function (t, i, s) { var r = this.source; if (void 0 != s && -1 != s && (r = this.seriesGroups[s].source || r), r instanceof e.jqx.dataAdapter && (r = r.records), !(!r || t < 0 || t > r.length - 1)) return e.isFunction(i) ? i(t, r) : i && "" != i ? r[t][i] : r[t] }, _getDataValueAsNumber: function (e, t, i) { var s = this._getDataValue(e, t, i); return this._isDate(s) ? s.valueOf() : ("number" != typeof s && (s = parseFloat(s)), "number" != typeof s && (s = void 0), s) }, _renderPieSeries: function (t, i) { for (var s = this._getDataLen(t), r = this.seriesGroups[t], o = this._calcGroupOffsets(t, i).offsets, a = 0; a < r.series.length; a++) { var n = r.series[a], l = this._getSerieSettings(t, a), h = (n.colorScheme || r.colorScheme || this.colorScheme, this._getAnimProps(t, a)), d = h.enabled && s < 5e3 && !this._isToggleRefresh && 1 != this._isVML ? h.duration : 0; e.jqx.mobile.isMobileBrowser() && this.renderer instanceof e.jqx.HTML5Renderer && (d = 0); for (var c = { rect: i, groupIndex: t, serieIndex: a, settings: l, items: [] }, u = 0; u < s; u++) { var p = o[a][u]; if (p.visible) { var m = p.fromAngle, g = p.toAngle, f = this.renderer.pieslice(p.x, p.y, p.innerRadius, p.outerRadius, m, 0 == d ? g : m, p.centerOffset), v = { element: f, displayValue: p.displayValue, itemIndex: u, visible: p.visible, x: p.x, y: p.y, innerRadius: p.innerRadius, outerRadius: p.outerRadius, fromAngle: m, toAngle: g, centerOffset: p.centerOffset }; c.items.push(v) } } this._animatePieSlices(c, 0); var x = this; this._enqueueAnimation("series", f, void 0, d, function (e, t, i) { x._animatePieSlices(t, i) }, c) } }, _sliceSortFunction: function (e, t) { return e.fromAngle - t.fromAngle }, _animatePieSlices: function (t, i) { var s; this._elementRenderInfo && this._elementRenderInfo.length > t.groupIndex && this._elementRenderInfo[t.groupIndex].series && this._elementRenderInfo[t.groupIndex].series.length > t.serieIndex && (s = this._elementRenderInfo[t.groupIndex].series[t.serieIndex]); for (var r = [], o = 0; o < t.items.length; o++) if ((c = t.items[o]).visible) { var a = c.fromAngle, n = c.fromAngle + i * (c.toAngle - c.fromAngle); if (s && s[c.displayValue]) { var l = s[c.displayValue].fromAngle, h = s[c.displayValue].toAngle; a = l + (a - l) * i, n = h + (n - h) * i } r.push({ index: o, from: a, to: n }) } s && r.sort(this._sliceSortFunction); for (var d = NaN, o = 0; o < r.length; o++) { var c = t.items[r[o].index]; c.labelElement && this.renderer.removeElement(c.labelElement); var a = r[o].from, n = r[o].to; s && (!isNaN(d) && a > d && (a = d), d = n, o == r.length - 1 && n != r[0].from && (n = 360 + r[0].from)); var u = this.renderer.pieSlicePath(c.x, c.y, c.innerRadius, c.outerRadius, a, n, c.centerOffset); this.renderer.attr(c.element, { d: u }); var p = this._getColors(t.groupIndex, t.serieIndex, c.itemIndex, "radialGradient", c.outerRadius), m = t.settings; this.renderer.attr(c.element, { fill: p.fillColor, stroke: p.lineColor, "stroke-width": m.stroke, "fill-opacity": m.opacity, "stroke-opacity": m.opacity, "stroke-dasharray": "none" }); var g = this.seriesGroups[t.groupIndex], f = g.series[t.serieIndex]; if (1 == f.showLabels || !f.showLabels && 1 == g.showLabels) { var v = a, x = n, w = Math.abs(v - x); w > 360 && (v = 0, x = 360); Math.PI, Math.PI; var b, _ = w / 2 + v, y = (_ %= 360) * Math.PI * 2 / 360; 1 == f.labelsAutoRotate && (b = _ < 90 || _ > 270 ? 360 - _ : 180 - _); var j = this._showLabel(t.groupIndex, t.serieIndex, c.itemIndex, { x: 0, y: 0, width: 0, height: 0 }, "center", "center", !0, !1, !1, b), q = f.labelRadius || c.outerRadius + Math.max(j.width, j.height); q += c.centerOffset; var T = e.jqx.getNum([f.offsetX, g.offsetX, t.rect.width / 2]), C = e.jqx.getNum([f.offsetY, g.offsetY, t.rect.height / 2]), S = t.rect.x + T, k = t.rect.y + C, I = this._adjustTextBoxPosition(S, k, j, q, _, c.outerRadius > q, 0 != f.labelLinesAngles, 1 == f.labelsAutoRotate); c.labelElement = this._showLabel(t.groupIndex, t.serieIndex, c.itemIndex, { x: I.x, y: I.y, width: j.width, height: j.height }, "left", "top", !1, !1, !1, b), q > c.outerRadius + 5 && 0 != f.labelLinesEnabled && (c.labelArrowPath = this._updateLebelArrowPath(c.labelArrowPath, S, k, q, c.outerRadius, y, 0 != f.labelLinesAngles, p, m)) } 1 == i && this._installHandlers(c.element, "pieslice", t.groupIndex, t.serieIndex, c.itemIndex) } }, _updateLebelArrowPath: function (t, i, s, r, o, a, n, l, h) { var d = e.jqx._ptrnd(i + (r - 0) * Math.cos(a)), c = e.jqx._ptrnd(s - (r - 0) * Math.sin(a)), u = e.jqx._ptrnd(i + (o + 2) * Math.cos(a)), p = e.jqx._ptrnd(s - (o + 2) * Math.sin(a)), m = "M " + d + "," + c + " L" + u + "," + p; return n && (m = "M " + d + "," + c + " L" + u + "," + c + " L" + u + "," + p), t ? this.renderer.attr(t, { d: m }) : t = this.renderer.path(m, {}), this.renderer.attr(t, { fill: "none", stroke: l.lineColor, "stroke-width": h.stroke, "stroke-opacity": h.opacity, "stroke-dasharray": "none" }), t }, _adjustTextBoxPosition: function (t, i, s, r, o, a, n, l) { var h = o * Math.PI * 2 / 360, d = e.jqx._ptrnd(t + r * Math.cos(h)), c = e.jqx._ptrnd(i - r * Math.sin(h)); if (l) { var u = s.width, p = s.height, m = Math.atan(p / u) % (2 * Math.PI), g = h % (2 * Math.PI), f = 0; g <= m ? ((f = u / 2 * Math.cos(h)) * Math.sin(h), -u / 2) : g >= m && g < Math.PI - m ? (f = p / 2 * Math.sin(h), p / 2, -Math.cos(h) * f) : g >= Math.PI - m && g < Math.PI + m ? (-(f = u / 2 * Math.cos(h)) * Math.sin(h), u / 2) : g >= Math.PI + m && g < 2 * Math.PI - m ? (f = p / 2 * Math.sin(h), -p / 2, Math.cos(h) * f) : g >= 2 * Math.PI - m && g < 2 * Math.PI && ((f = u / 2 * Math.cos(h)) * Math.sin(h), -u / 2), r += Math.abs(f) + 3; var d = e.jqx._ptrnd(t + r * Math.cos(h)), c = e.jqx._ptrnd(i - r * Math.sin(h)); return d -= s.width / 2, c -= s.height / 2, { x: d, y: c } } return a ? (d -= s.width / 2, c -= s.height / 2) : n ? o >= 90 && o < 270 ? (c -= s.height / 2, d -= s.width) : c -= s.height / 2 : o >= 0 && o < 45 || o >= 315 && o < 360 ? c -= s.height / 2 : o >= 45 && o < 135 ? (c -= s.height, d -= s.width / 2) : o >= 135 && o < 225 ? (c -= s.height / 2, d -= s.width) : o >= 225 && o < 315 && (d -= s.width / 2), { x: d, y: c } }, _getColumnGroupsCount: function (e) { var t = 0; e = e || "vertical"; for (var i = this.seriesGroups, s = 0; s < i.length; s++) { var r = i[s].orientation || "vertical"; -1 != i[s].type.indexOf("column") && r == e && t++ } return t }, _getColumnGroupIndex: function (e) { for (var t = 0, i = this.seriesGroups[e].orientation || "vertical", s = 0; s < e; s++) { var r = this.seriesGroups[s], o = r.orientation || "vertical"; -1 != r.type.indexOf("column") && o == i && t++ } return t }, _renderBand: function (e, t, i) { var s = this.seriesGroups[e]; if (s.bands && !(s.bands.length <= t)) { var r = i; "horizontal" == s.orientation && (r = { x: i.y, y: i.x, width: i.height, height: i.width }); var o = this._calcGroupOffsets(e, r); if (o && !(o.length <= e)) { var a = s.bands[t], n = o.bands[t], l = n.from, h = n.to, d = Math.abs(l - h), c = { x: r.x, y: Math.min(l, h), width: r.width, height: d }; if ("horizontal" == s.orientation) { var u = c.x; c.x = c.y, c.y = u, u = c.width, c.width = c.height, c.height = u } var p = this.renderer.rect(c.x, c.y, c.width, c.height), m = a.color || "#AAAAAA", g = a.opacity; (isNaN(g) || g < 0 || g > 1) && (g = .5), this.renderer.attr(p, { fill: m, "fill-opacity": g, stroke: m, "stroke-opacity": g, "stroke-width": 0 }) } } }, _renderColumnSeries: function (t, i) { var s = this.seriesGroups[t]; if (s.series && 0 != s.series.length) { var r = -1 != s.type.indexOf("stacked"), o = (r && s.type.indexOf("100"), s.type.indexOf("range"), this._getDataLen(t), s.columnsGapPercent); (isNaN(o) || o < 0 || o > 100) && (o = 25); var a = s.seriesGapPercent; (isNaN(a) || a < 0 || a > 100) && (a = 10); var n = "horizontal" == s.orientation, l = i; n && (l = { x: i.y, y: i.x, width: i.height, height: i.width }); var h = this._calcGroupOffsets(t, l); if (h && 0 != h.xoffsets.length) { var d = this._getColumnGroupsCount(s.orientation), c = this._getColumnGroupIndex(t); 1 == this.columnSeriesOverlap && (d = 1, c = 0); var u; 1 != s.polar && 1 != s.spider || (u = this._getPolarAxisCoords(t, l), o = 0, a = 0); for (var p = { groupIndex: t, rect: i, vertical: !n, seriesCtx: [], renderData: h, polarAxisCoords: u }, m = this._getGroupGradientType(t), g = 0; g < s.series.length; g++) { var f = s.series[g], v = f.columnsMaxWidth || s.columnsMaxWidth, w = (f.dataField, this._getAnimProps(t, g)), b = w.enabled && !this._isToggleRefresh && h.xoffsets.length < 100 ? w.duration : 0, _ = 0, y = h.xoffsets.itemWidth; _ -= y / 2; var j = (_ += y * (c / d)) + (y /= d), q = j - _, T = (j - _) / (1 + o / 100), C = !r && s.series.length > 1 ? T * a / 100 / (s.series.length - 1) : 0, S = T - C * (s.series.length - 1); T < 1 && (T = 1); var k = 0; !r && s.series.length > 1 && (S /= s.series.length, k = g); var I = _ + (q - T) / 2 + k * (C + S); if (k == s.series.length && (S = q - _ + T - x), !isNaN(v)) { var D = Math.min(S, v); I += (S - D) / 2, S = D } var P = this._isSerieVisible(t, g), B = this._getSerieSettings(t, g), z = this._getColors(t, g, NaN, this._getGroupGradientType(t), 4), H = []; if (e.isFunction(f.colorFunction) && !u) for (var M = h.xoffsets.first; M <= h.xoffsets.last; M++) H.push(this._getColors(t, g, M, m, 4)); var E = { seriesIndex: g, serieColors: z, itemsColors: H, settings: B, columnWidth: S, xAdjust: I, isVisible: P }; p.seriesCtx.push(E) } this._animateColumns(p, 0 == b ? 1 : 0); var A = this; this._enqueueAnimation("series", void 0, void 0, b, function (e, t, i) { A._animateColumns(t, i) }, p) } } }, _getColumnOffsets: function (e, t, i, s, r, o) { for (var a = this.seriesGroups[t], n = [], l = 0; l < i.length; l++) { var h = i[l], d = h.seriesIndex, c = (a.series[d], e.offsets[d][s].from), u = e.offsets[d][s].to, p = e.xoffsets.data[s], m = void 0, g = h.isVisible; if (g || (u = c), g && this._elementRenderInfo && this._elementRenderInfo.length > t) { var f = e.xoffsets.xvalues[s]; !(m = this._elementRenderInfo[t].series[d][f]) || isNaN(m.from) || isNaN(m.to) || (c = m.from + (c - m.from) * o, u = m.to + (u - m.to) * o, p = m.xoffset + (p - m.xoffset) * o) } m || (u = c + (u - c) * (r ? 1 : o)), isNaN(c) && (c = 0), isNaN(u) && (u = isNaN(c) ? 0 : c), n.push({ from: c, to: u, xOffset: p }) } if (r && n.length > 1 && !(this._elementRenderInfo && this._elementRenderInfo.length > t)) { for (var v = 0, x = 0, w = 0; w < n.length; w++) n[w].to >= n[w].from ? x += n[w].to - n[w].from : v += n[w].from - n[w].to; v *= o, x *= o; for (var b = 0, _ = 0, w = 0; w < n.length; w++) if (n[w].to >= n[w].from) (y = n[w].to - n[w].from) + _ > x && (y = Math.max(0, x - _), n[w].to = n[w].from + y), _ += y; else { var y = n[w].from - n[w].to; y + b > v && (y = Math.max(0, v - b), n[w].to = n[w].from - y), b += y } } return n }, _columnAsPieSlice: function (t, i, s, r, o) { var a = this._toPolarCoord(r, s, o.x, o.y), n = this._toPolarCoord(r, s, o.x, o.y + o.height), l = (this._toPolarCoord(r, s, o.x + o.width, o.y), e.jqx._ptdist(r.x, r.y, n.x, n.y)), h = e.jqx._ptdist(r.x, r.y, a.x, a.y), d = s.width, c = -360 * (o.x - s.x) / d, u = -360 * (o.x + o.width - s.x) / d, p = r.startAngle; if (p = 360 * p / (2 * Math.PI), c -= p, u -= p, void 0 != t[i]) { var m = this.renderer.pieSlicePath(r.x, r.y, l, h, u, c, 0); this.renderer.attr(t[i], { d: m }) } else t[i] = this.renderer.pieslice(r.x, r.y, l, h, u, c, 0); return { fromAngle: u, toAngle: c, innerRadius: l, outerRadius: h } }, _animateColumns: function (t, i) { for (var s = t.groupIndex, r = this.seriesGroups[s], o = t.renderData, a = -1 != r.type.indexOf("stacked"), n = t.polarAxisCoords, l = (this._getGroupGradientType(s), o.xoffsets.first) ; l <= o.xoffsets.last; l++) for (var h = this._getColumnOffsets(o, s, t.seriesCtx, l, a, i), d = 0; d < t.seriesCtx.length; d++) { var c = t.seriesCtx[d], u = c.seriesIndex, p = (r.series[u], h[d].from), m = h[d].to, g = h[d].xOffset; c.elements || (c.elements = {}), c.labelElements || (c.labelElements = {}); var f = c.elements, v = c.labelElements, x = (t.vertical ? t.rect.x : t.rect.y) + c.xAdjust, w = c.settings, b = 0 != c.itemsColors.length ? c.itemsColors[l - o.xoffsets.first] : c.serieColors, _ = this._isSerieVisible(s, u); if (_ || a) { var y = e.jqx._ptrnd(x + g), j = { x: y, width: c.columnWidth }, q = !0; t.vertical ? (j.y = p, j.height = m - p, j.height < 0 && (j.y += j.height, j.height = -j.height, q = !1)) : (j.x = p < m ? p : m, j.width = Math.abs(p - m), j.y = y, j.height = c.columnWidth); var T = p - m; if (!isNaN(T)) { if (T = Math.abs(T), void 0 == f[l] && (n ? this._columnAsPieSlice(f, l, t.rect, n, j) : f[l] = this.renderer.rect(j.x, j.y, t.vertical ? j.width : 0, t.vertical ? 0 : j.height), this.renderer.attr(f[l], { fill: b.fillColor, "fill-opacity": w.opacity, "stroke-opacity": w.opacity, stroke: b.lineColor, "stroke-width": w.stroke, "stroke-dasharray": w.dashStyle })), T < 1 && 1 != i ? this.renderer.attr(f[l], { display: "none" }) : this.renderer.attr(f[l], { display: "block" }), n) { var C = this._columnAsPieSlice(f, l, t.rect, n, j), b = this._getColors(s, u, void 0, "radialGradient", C.outerRadius); this.renderer.attr(f[l], { fill: b.fillColor, "fill-opacity": w.opacity, "stroke-opacity": w.opacity, stroke: b.lineColor, "stroke-width": w.stroke, "stroke-dasharray": w.dashStyle }) } else 1 == t.vertical ? this.renderer.attr(f[l], { x: j.x, y: j.y, height: T }) : this.renderer.attr(f[l], { x: j.x, y: j.y, width: T }); this.renderer.removeElement(v[l]), !_ || 0 == T && i < 1 || (v[l] = this._showLabel(s, u, l, j, void 0, void 0, !1, !1, q), 1 == i && this._installHandlers(f[l], "column", s, u, l)) } } } }, _renderScatterSeries: function (t, i) { var s = this.seriesGroups[t]; if (s.series && 0 != s.series.length) { var r = -1 != s.type.indexOf("bubble"), o = "horizontal" == s.orientation, a = i; o && (a = { x: i.y, y: i.x, width: i.height, height: i.width }); var n = this._calcGroupOffsets(t, a); if (n && 0 != n.xoffsets.length) { var l, h = a.width; (s.polar || s.spider) && (h = 2 * (l = this._getPolarAxisCoords(t, a)).r); this._alignValuesWithTicks(t); for (var d = this._getGroupGradientType(t), c = 0; c < s.series.length; c++) { var u = this._getSerieSettings(t, c), p = s.series[c], m = p.dataField, g = e.isFunction(p.colorFunction), f = this._getColors(t, c, NaN, d), v = NaN, x = NaN; if (r) for (T = n.xoffsets.first; T <= n.xoffsets.last; T++) { if ("number" != typeof (C = this._getDataValueAsNumber(T, p.radiusDataField, t))) throw "Invalid radiusDataField value at [" + T + "]"; isNaN(C) || ((isNaN(v) || C < v) && (v = C), (isNaN(x) || C > x) && (x = C)) } var w = p.minRadius; isNaN(w) && (w = h / 50); var b = p.maxRadius; isNaN(b) && (b = h / 25), w > b && (b = w); for (var _ = p.radius || 5, y = this._getAnimProps(t, c), j = y.enabled && !this._isToggleRefresh && n.xoffsets.length < 5e3 ? y.duration : 0, q = { groupIndex: t, seriesIndex: c, "fill-opacity": u.opacity, "stroke-opacity": u.opacity, "stroke-width": u.stroke, "stroke-dasharray": u.dashStyle, items: [], polarAxisCoords: l }, T = n.xoffsets.first; T <= n.xoffsets.last; T++) { var C = this._getDataValueAsNumber(T, m, t); if ("number" == typeof C) { var S = n.xoffsets.data[T], k = n.offsets[c][T].to, I = n.xoffsets.xvalues[T]; if (!isNaN(S) && !isNaN(k)) { if (o) { E = S; S = k, k = E + i.y } else S += i.x; var D = _; if (r) { var P = this._getDataValueAsNumber(T, p.radiusDataField, t); if ("number" != typeof P) continue; D = w + (b - w) * (P - v) / Math.max(1, x - v), isNaN(D) && (D = w) } var B = NaN, z = NaN, H = 0; if (void 0 != I && this._elementRenderInfo && this._elementRenderInfo.length > t) { var M = this._elementRenderInfo[t].series[c][I]; if (M && !isNaN(M.to)) { if (B = M.to, z = M.xoffset, H = _, o) { var E = z; z = B, B = E + i.y } else z += i.x; r && (H = w + (b - w) * (M.valueRadius - v) / Math.max(1, x - v), isNaN(H) && (H = w)) } } g && (f = this._getColors(t, c, T, d)), q.items.push({ from: H, to: D, itemIndex: T, fill: f.fillColor, stroke: f.lineColor, x: S, y: k, xFrom: z, yFrom: B }) } } } this._animR(q, 0); var A = this; this._enqueueAnimation("series", void 0, void 0, j, function (e, t, i) { A._animR(t, i) }, q) } } } }, _animR: function (t, i) { for (var s = t.items, r = 0; r < s.length; r++) { var o = s[r], a = o.x, n = o.y, l = Math.round((o.to - o.from) * i + o.from); if (isNaN(o.yFrom) || (n = o.yFrom + (n - o.yFrom) * i), isNaN(o.xFrom) || (a = o.xFrom + (a - o.xFrom) * i), t.polarAxisCoords) { var h = this._toPolarCoord(t.polarAxisCoords, this._plotRect, a, n); a = h.x, n = h.y } a = e.jqx._ptrnd(a), n = e.jqx._ptrnd(n), l = e.jqx._ptrnd(l); var d = o.element; d || (d = this.renderer.circle(a, n, l), this.renderer.attr(d, { fill: o.fill, "fill-opacity": t["fill-opacity"], "stroke-opacity": t["fill-opacity"], stroke: o.stroke, "stroke-width": t["stroke-width"], "stroke-dasharray": t["stroke-dasharray"] }), o.element = d), this._isVML ? this.renderer.updateCircle(d, void 0, void 0, l) : this.renderer.attr(d, { r: l, cy: n, cx: a }), o.labelElement && this.renderer.removeElement(o.labelElement), o.labelElement = this._showLabel(t.groupIndex, t.seriesIndex, o.itemIndex, { x: a - l, y: n - l, width: 2 * l, height: 2 * l }), i >= 1 && this._installHandlers(d, "circle", t.groupIndex, t.seriesIndex, o.itemIndex) } }, _showToolTip: function (t, i, s, r, o) { var a = this, n = a._getCategoryAxis(s); if (!a._ttEl || s != a._ttEl.gidx || r != a._ttEl.sidx || o != a._ttEl.iidx) { var l = a.seriesGroups[s], h = l.series[r], d = a.enableCrosshairs && !(l.polar || l.spider); a._pointMarker ? (t = parseInt(a._pointMarker.x + 5), i = parseInt(a._pointMarker.y - 5)) : d = !1; var c = d && 0 == a.showToolTips; t = e.jqx._ptrnd(t), i = e.jqx._ptrnd(i); var u = void 0 == a._ttEl; if (0 != l.showToolTips && 0 != h.showToolTips) { var p = h.toolTipFormatSettings || l.toolTipFormatSettings, m = h.toolTipFormatFunction || l.toolTipFormatFunction || a.toolTipFormatFunction, g = a._getColors(s, r, o), f = a._getDataValue(o, n.dataField, s); void 0 != n.dataField && "" != n.dataField || (f = o), "date" == n.type && (f = a._castAsDate(f)); var v = ""; if (e.isFunction(m)) { var x = {}; -1 == l.type.indexOf("range") ? x = a._getDataValue(o, h.dataField, s) : (x.from = a._getDataValue(o, h.dataFieldFrom, s), x.to = a._getDataValue(o, h.dataFieldTo, s)), v = m(x, o, h, l, f, n) } else { v = a._getFormattedValue(s, r, o, p, m); var w = n.toolTipFormatSettings || n.formatSettings, b = n.toolTipFormatFunction || n.formatFunction; b || w || "date" != n.type || (b = this._getDefaultDTFormatFn(n.baseUnit || "day")); var _ = a._formatValue(f, w, b); "pie" != l.type && "donut" != l.type ? v = (h.displayText || h.dataField || "") + ", " + _ + ": " + v : (f = a._getDataValue(o, h.displayText || h.dataField, s), v = (_ = a._formatValue(f, w, b)) + ": " + v) } var y = h.toolTipClass || l.toolTipClass || this.toThemeProperty("jqx-chart-tooltip-text", null), j = h.toolTipBackground || l.toolTipBackground || "#FFFFFF", q = h.toolTipLineColor || l.toolTipLineColor || g.lineColor; if (a._ttEl || (a._ttEl = {}), a._ttEl.sidx = r, a._ttEl.gidx = s, a._ttEl.iidx = o, rect = a.renderer.getRect(), d) { var T = e.jqx._ptrnd(a._pointMarker.x), C = e.jqx._ptrnd(a._pointMarker.y); if (a._ttEl.vLine && a._ttEl.hLine) a.renderer.attr(a._ttEl.vLine, { x1: T, x2: T }), a.renderer.attr(a._ttEl.hLine, { y1: C, y2: C }); else { var S = a.crosshairsColor || "#888888"; a._ttEl.vLine = a.renderer.line(T, a._plotRect.y, T, a._plotRect.y + a._plotRect.height, { stroke: S, "stroke-width": a.crosshairsLineWidth || 1, "stroke-dasharray": a.crosshairsDashStyle || "" }), a._ttEl.hLine = a.renderer.line(a._plotRect.x, C, a._plotRect.x + a._plotRect.width, C, { stroke: S, "stroke-width": a.crosshairsLineWidth || 1, "stroke-dasharray": a.crosshairsDashStyle || "" }) } } if (!c && 0 != a.showToolTips) { var k = u ? document.createElement("div") : a._ttEl.box, I = { left: 0, top: 0 }; u && (k.style.position = "absolute", k.style.cursor = "default", k.style.overflow = "hidden", e(k).addClass("jqx-rc-all jqx-button"), e(k).css("z-index", 9999999), e(document.body).append(k)), k.style.backgroundColor = j, k.style.borderColor = q, a._ttEl.box = k, a._ttEl.txt = v; var D = "<span class='" + y + "'>" + v + "</span>", P = a._ttEl.tmp; if (u && (a._ttEl.tmp = P = document.createElement("div"), P.style.position = "absolute", P.style.cursor = "default", P.style.overflow = "hidden", P.style.display = "none", P.style.zIndex = 999999, P.style.backgroundColor = j, P.style.borderColor = q, e(P).addClass("jqx-rc-all jqx-button"), a.host.append(P)), e(P).html(D), !v || 0 == v.length) return void e(k).fadeTo(0, 0); var B = { width: e(P).width(), height: e(P).height() }; if (B.width = B.width + 5, B.height = B.height + 6, t = Math.max(t, rect.x), i = Math.max(i - B.height, rect.y), B.width > rect.width || B.height > rect.height) return; t + I.left + B.width > rect.x + rect.width - 5 && (t = rect.x + rect.width - B.width - I.left - 5), i + I.top + B.height > rect.y + rect.height - 5 && (i = rect.y + rect.height - B.height - 5); var z = a.host.coord(); u && (e(k).fadeOut(0, 0), k.style.left = I.left + t + z.left + "px", k.style.top = I.top + i + z.top + "px"), e(k).html(D), e(k).clearQueue(), e(k).animate({ left: I.left + t + z.left, top: I.top + i + z.top, opacity: 1 }, 300, "easeInOutCirc"), e(k).fadeTo(400, 1) } } } }, _hideToolTip: function (t) { this._ttEl && (this._ttEl.box && (0 == t ? e(this._ttEl.box).hide() : e(this._ttEl.box).fadeOut()), this._hideCrosshairs(), this._ttEl.gidx = void 0) }, _hideCrosshairs: function () { this._ttEl && (this._ttEl.vLine && (this.renderer.removeElement(this._ttEl.vLine), this._ttEl.vLine = void 0), this._ttEl.hLine && (this.renderer.removeElement(this._ttEl.hLine), this._ttEl.hLine = void 0)) }, _showLabel: function (e, t, i, s, r, o, a, n, l, h) { var d = this.seriesGroups[e], c = d.series[t], u = { width: 0, height: 0 }; if (0 == c.showLabels || !c.showLabels && !d.showLabels) return a ? u : void 0; if (s.width < 0 || s.height < 0) return a ? u : void 0; var p = c.labelClass || d.labelClass || this.toThemeProperty("jqx-chart-label-text", null), m = c.labelAngle || c.labelsAngle || d.labelAngle || d.labelsAngle || 0; isNaN(h) || (m = h); var g = c.labelOffset || c.labelsOffset || d.labelOffset || d.labelsOffset || {}, f = { x: g.x, y: g.y }; isNaN(f.x) && (f.x = 0), isNaN(f.y) && (f.y = 0), r = r || c.labelsHorizontalAlignment || d.labelsHorizontalAlignment || "center", o = o || c.labelsVerticalAlignment || d.labelsVerticalAlignment || "center"; var v = this._getFormattedValue(e, t, i), x = s.width, w = s.height; if (1 == n && "center" != r && (r = "right" == r ? "left" : "right"), 1 == l && "center" != o && "middle" != o && (o = "top" == o ? "bottom" : "top", f.y *= -1), u = this.renderer.measureText(v, m, { class: p }), a) return u; var b = 0; x > 0 && ("" == r || "center" == r ? b += (x - u.width) / 2 : "right" == r && (b += x - u.width)); var _ = 0; w > 0 && ("" == o || "center" == o ? _ += (w - u.height) / 2 : "bottom" == o && (_ += w - u.height)), b += s.x + f.x, _ += s.y + f.y; var y = this._plotRect; b <= y.x && (b = y.x + 2), _ <= y.y && (_ = y.y + 2); var j = { width: Math.max(u.width, 1), height: Math.max(u.height, 1) }; _ + j.height >= y.y + y.height && (_ = y.y + y.height - j.height - 2), b + j.width >= y.x + y.width && (b = y.x + y.width - j.width - 2); var q = this.renderer.text(v, b, _, u.width, u.height, m, { class: p }, !1, "center", "center"); return this.renderer.attr(q, { class: p }), this._isVML && (this.renderer.removeElement(q), this.renderer.getContainer()[0].appendChild(q)), q }, _getAnimProps: function (e, t) { var i = this.seriesGroups[e], s = isNaN(t) ? void 0 : i.series[t], r = 1 == this.enableAnimations; i.enableAnimations && (r = 1 == i.enableAnimations), s && s.enableAnimations && (r = 1 == s.enableAnimations); var o = this.animationDuration; isNaN(o) && (o = 1e3); var a = i.animationDuration; if (isNaN(a) || (o = a), s) { var n = s.animationDuration; isNaN(n) || (o = n) } return o > 5e3 && (o = 1e3), { enabled: r, duration: o } }, _isColorTransition: function (e, t, i, s) { if (s - 1 < i.xoffsets.first) return !1; var r = this._getColors(e, t, s, this._getGroupGradientType(e)), o = this._getColors(e, t, s - 1, this._getGroupGradientType(e)); return r.fillColor != o.fillColor }, _renderLineSeries: function (t, i) { var s = this.seriesGroups[t]; if (s.series && 0 != s.series.length) { var r = -1 != s.type.indexOf("area"), o = -1 != s.type.indexOf("stacked"), a = o && -1 != s.type.indexOf("100"), n = -1 != s.type.indexOf("spline"), l = -1 != s.type.indexOf("step"), h = -1 != s.type.indexOf("range"), d = 1 == s.polar || 1 == s.spider; if (d && (l = !1), !l || !n) { var c = this._getDataLen(t), u = (i.width, "horizontal" == s.orientation), p = 1 == this._getCategoryAxis(t).flip, m = i; u && (m = { x: i.y, y: i.x, width: i.height, height: i.width }); var g = this._calcGroupOffsets(t, m); if (g && 0 != g.xoffsets.length) { this._linesRenderInfo || (this._linesRenderInfo = {}), this._linesRenderInfo[t] = {}; for (var f = s.series.length - 1; f >= 0; f--) { var v = this._getSerieSettings(t, f), x = { groupIndex: t, serieIndex: f, swapXY: u, isArea: r, isSpline: n, isRange: h, isPolar: d, settings: v, segments: [], pointsLength: 0 }; if (this._isSerieVisible(t, f)) { var w = s.series[f], b = e.isFunction(w.colorFunction), _ = g.xoffsets.first, y = _, j = this._getColors(t, f, NaN, this._getGroupGradientType(t)); do { var q = [], T = [], C = [], S = 0, k = NaN, I = NaN, D = NaN; if (!(g.xoffsets.length < 1)) { for (var P = this._getAnimProps(t, f), B = P.enabled && !this._isToggleRefresh && g.xoffsets.length < 1e4 && 1 != this._isVML ? P.duration : 0, z = _, H = !1, M = (this._getColors(t, f, _, this._getGroupGradientType(t)), _) ; M <= g.xoffsets.last; M++) { _ = M; var E = g.xoffsets.data[M], A = g.xoffsets.xvalues[M]; if (!isNaN(E)) { S = E = Math.max(E, 1); var L = g.offsets[f][M].to, O = g.offsets[f][M].from; if (isNaN(L) || isNaN(O)) { if ("connect" == w.emptyPointsDisplay) continue; if ("zero" != w.emptyPointsDisplay) { H = !0; break } isNaN(L) && (L = g.baseOffset), isNaN(O) && (O = g.baseOffset) } if (b && this._isColorTransition(t, f, g, _) && q.length > 1) { _--; break } if (this._elementRenderInfo && this._elementRenderInfo.length > t && this._elementRenderInfo[t].series.length > f) { var N = this._elementRenderInfo[t].series[f][A], D = e.jqx._ptrnd(N ? N.to : void 0), F = e.jqx._ptrnd(m.x + (N ? N.xoffset : void 0)); C.push(u ? { y: F, x: D, index: M } : { x: F, y: D, index: M }) } y = M, v.stroke < 2 && (L - m.y <= 1 && (L = m.y + 1), O - m.y <= 1 && (O = m.y + 1), m.y + m.height - L <= 1 && (L = m.y + m.height - 1), m.y + m.height - L <= 1 && (O = m.y + m.height - 1)), !r && a && (L <= m.y && (L = m.y + 1), L >= m.y + m.height && (L = m.y + m.height - 1), O <= m.y && (O = m.y + 1), O >= m.y + m.height && (O = m.y + m.height - 1)), S = (E = Math.max(E, 1)) + m.x, !l || isNaN(k) || isNaN(I) || I != L && q.push(u ? { y: S, x: e.jqx._ptrnd(I) } : { x: S, y: e.jqx._ptrnd(I) }), q.push(u ? { y: S, x: e.jqx._ptrnd(L), index: M } : { x: S, y: e.jqx._ptrnd(L), index: M }), T.push(u ? { y: S, x: e.jqx._ptrnd(O), index: M } : { x: S, y: e.jqx._ptrnd(O), index: M }), k = S, I = L, isNaN(D) && (D = L) } } if (0 != q.length) { var R = q[q.length - 1].index; b && (j = this._getColors(t, f, R, this._getGroupGradientType(t))); var W = m.x + g.xoffsets.data[z], V = m.x + g.xoffsets.data[y]; if (r && 1 == s.alignEndPointsWithIntervals) { if (W > m.x && (W = m.x), V < m.x + m.width && (V = m.x + m.width), p) { var G = W; W = V, V = G } } V = e.jqx._ptrnd(V), W = e.jqx._ptrnd(W); var U = g.baseOffset; D = e.jqx._ptrnd(D); var Y = e.jqx._ptrnd(L) || U; h && (q = q.concat(T.reverse())), x.pointsLength += q.length; var K = { lastItemIndex: R, colorSettings: j, pointsArray: q, pointsStart: C, left: W, right: V, pyStart: D, pyEnd: Y, yBase: U, labelElements: [], symbolElements: [] }; x.segments.push(K) } else _++ } } while (_ < g.xoffsets.length - 1 || H); this._linesRenderInfo[t][f] = x } else this._linesRenderInfo[t][f] = x } var $ = this._linesRenderInfo[t], X = []; for (var M in $) X.push($[M]); X = X.sort(function (e, t) { return e.serieIndex - t.serieIndex }), r && o && X.reverse(); for (M = 0; M < X.length; M++) { x = X[M]; this._animateLine(x, 0 == B ? 1 : 0); var Q = this; this._enqueueAnimation("series", void 0, void 0, B, function (e, t, i) { Q._animateLine(t, i) }, x) } } } } }, _animateLine: function (e, t) { for (var i = e.settings, s = e.groupIndex, r = e.serieIndex, o = this.seriesGroups[s], a = o.series[r], n = this._getSymbol(s, r), l = 1 == a.showLabels || o.showLabels && 0 != a.showLabels, h = 0, d = 0; d < e.segments.length; d++) { var c = e.segments[d], u = this._calculateLine(s, e.pointsLength, h, c.pointsArray, c.pointsStart, c.yBase, t, e.isArea, e.swapXY); if (h += c.pointsArray.length, "" != u) { var p = u.split(" "), m = (p.length, u); m = "" != m ? this._buildLineCmd(u, e.isRange, c.left, c.right, c.pyStart, c.pyEnd, c.yBase, e.isArea, e.isPolar, e.isSpline, e.swapXY) : "M 0 0"; var g = c.colorSettings; if (c.pathElement ? this.renderer.attr(c.pathElement, { d: m }) : (c.pathElement = this.renderer.path(m, { "stroke-width": i.stroke, stroke: g.lineColor, "stroke-opacity": i.opacity, "fill-opacity": i.opacity, "stroke-dasharray": i.dashStyle, fill: e.isArea ? g.fillColor : "none" }), this._installHandlers(c.pathElement, "path", s, r, c.lastItemIndex)), c.labelElements) { for (v = 0; v < c.labelElements.length; v++) this.renderer.removeElement(c.labelElements[v]); c.labelElements = [] } if (c.symbolElements) { for (v = 0; v < c.symbolElements.length; v++) this.renderer.removeElement(c.symbolElements[v]); c.symbolElements = [] } if (c.pointsArray.length == p.length && ("none" != n || l)) for (var f = a.symbolSize, v = 0; v < p.length; v++) { var x = p[v].split(","); if (x = { x: parseFloat(x[0]), y: parseFloat(x[1]) }, "none" != n) { var w = this._getColors(s, r, c.pointsArray[v].index, this._getGroupGradientType(s)), b = this._drawSymbol(n, x.x, x.y, w.fillColorSymbol, w.lineColorSymbol, 1, i.opacity, f); c.symbolElements.push(b) } if (l) { var _ = (v > 0 ? p[v - 1] : p[v]).split(","); _ = { x: parseFloat(_[0]), y: parseFloat(_[1]) }; var y = (v < p.length - 1 ? p[v + 1] : p[v]).split(","); y = { x: parseFloat(y[0]), y: parseFloat(y[1]) }, x = this._adjustLineLabelPosition(s, r, c.pointsArray[v].index, x, _, y); var j = this._showLabel(s, r, c.pointsArray[v].index, { x: x.x, y: x.y, width: 0, height: 0 }); c.labelElements.push(j) } } if (1 == t && "none" != n) for (v = 0; v < c.symbolElements.length; v++) this._installHandlers(c.symbolElements[v], "symbol", s, r, c.pointsArray[v].index) } } }, _adjustLineLabelPosition: function (e, t, i, s, r, o) { var a = this._showLabel(e, t, i, { width: 0, height: 0 }, "", "", !0); return s.y == r.y && s.x == r.x ? o.y < s.y ? { x: s.x, y: s.y + a.height } : { x: s.x, y: s.y - a.height } : s.y == o.y && s.x == o.x && (r.y < s.y ? { x: s.x, y: s.y + a.height } : { x: s.x, y: s.y - a.height }), s.y > r.y && s.y > o.y ? { x: s.x, y: s.y + a.height } : { x: s.x, y: s.y - a.height } }, _calculateLine: function (t, i, s, r, o, a, n, l, h) { var d = this.seriesGroups[t], c = void 0; 1 != d.polar && 1 != d.spider || (c = this._getPolarAxisCoords(t, this._plotRect)); var u = "", p = r.length; l || 0 != o.length || (p = i * n - s); for (var m = 0; m < p + 1 && m < r.length; m++) { m > 0 && (u += " "); var g = r[m].y, f = r[m].x, v = l ? a : g, x = f; if (o && o.length > m && (v = o[m].y, x = o[m].x, (isNaN(v) || isNaN(x)) && (v = g, x = f)), x, p <= r.length && m > 0 && m == p && (x = r[m - 1].x, v = r[m - 1].y), h ? (f = e.jqx._ptrnd((f - v) * (l ? n : 1) + v), g = e.jqx._ptrnd(g)) : (f = e.jqx._ptrnd((f - x) * n + x), g = e.jqx._ptrnd((g - v) * n + v)), c) { var w = this._toPolarCoord(c, this._plotRect, f, g); f = w.x, g = w.y } u += f + "," + g, 1 != r.length || l || (u += " " + (f + 2) + "," + (g + 2)) } return u }, _buildLineCmd: function (e, t, i, s, r, o, a, n, l, h, d) { var c = e; if (n && !l && !t) { var u = d ? a + "," + i : i + "," + a; c = u + " " + e + " " + (d ? a + "," + s : s + "," + a) } h && (c = this._getBezierPoints(c)); var p = c.split(" ")[0].replace("C", ""); return c = n && !l ? t ? "M " + p + " L " + p + (h ? "" : " L " + p + " ") + c : "M " + u + " L " + p + " " + c : h ? "M " + p + " " + c : "M " + p + " L " + p + " " + c, l && (c += " Z"), c }, _getSerieSettings: function (e, t) { var i = this.seriesGroups[e], s = -1 != i.type.indexOf("area"), r = -1 != i.type.indexOf("line"), o = i.series[t], a = o.dashStyle || i.dashStyle || "", n = o.opacity || i.opacity; (isNaN(n) || n < 0 || n > 1) && (n = 1); var l = o.lineWidth; return isNaN(l) && "auto" != l && (l = i.lineWidth), ("auto" == l || isNaN(l) || l < 0 || l > 15) && (l = s ? 2 : r ? 3 : 1), { stroke: l, opacity: n, dashStyle: a } }, _getColors: function (t, i, s, r, o) { var a = this.seriesGroups[t], n = a.series[i], l = n.useGradient; void 0 == l && (l = n.useGradientColors), void 0 == l && (l = a.useGradient), void 0 == l && (l = a.useGradientColors), void 0 == l && (l = !0); var h = this._getSeriesColors(t, i, s); h.fillColor || (h.fillColor = color, h.fillColorSelected = e.jqx.adjustColor(color, 1.1), h.lineColor = h.symbolColor = e.jqx.adjustColor(color, .9), h.lineColorSelected = h.symbolColorSelected = e.jqx.adjustColor(color, .9)); var d = [[0, 1.4], [100, 1]], c = [[0, 1], [25, 1.1], [50, 1.4], [100, 1]], u = [[0, 1.3], [90, 1.2], [100, 1]], p = NaN; if (isNaN(o) || (p = 2 == o ? d : c), l) if ("verticalLinearGradient" == r) h.fillColor = this.renderer._toLinearGradient(h.fillColor, !0, p || d), h.fillColorSelected = this.renderer._toLinearGradient(h.fillColorSelected, !0, p || d); else if ("horizontalLinearGradient" == r) h.fillColor = this.renderer._toLinearGradient(h.fillColor, !1, p || c), h.fillColorSelected = this.renderer._toLinearGradient(h.fillColorSelected, !1, p || c); else if ("radialGradient" == r) { var m = void 0, p = d; ("pie" == a.type || "donut" == a.type || a.polar) && void 0 != s && this._renderData[t] && this._renderData[t].offsets[i] && (m = this._renderData[t].offsets[i][s], p = u), h.fillColor = this.renderer._toRadialGradient(h.fillColor, p, m), h.fillColorSelected = this.renderer._toRadialGradient(h.fillColorSelected, p, m) } return h }, _installHandlers: function (e, t, i, s, r) { if (!this.enableEvents) return !1; var o = this, a = this.seriesGroups[i], n = this.seriesGroups[i].series[s], l = -1 != a.type.indexOf("line") || -1 != a.type.indexOf("area"); l || (this.renderer.addHandler(e, "mousemove", function (e) { e.preventDefault(); var t = e.pageX || e.clientX || e.screenX, a = e.pageY || e.clientY || e.screenY, n = o.host.offset(); t -= n.left, a -= n.top, o._mouseX == t && o._mouseY == a || o._ttEl && o._ttEl.gidx == i && o._ttEl.sidx == s && o._ttEl.iidx == r || o._startTooltipTimer(i, s, r) }), this.renderer.addHandler(e, "mouseout", function (e) { !isNaN(o._lastClickTs) && (new Date).valueOf() - o._lastClickTs < 100 || (e.preventDefault(), void 0 != r && o._cancelTooltipTimer(), l || o._unselect()) })), this.renderer.addHandler(e, "mouseover", function (a) { a.preventDefault(), o._select(e, t, i, s, r, r) }), this.renderer.addHandler(e, "click", function (e) { clearTimeout(o._hostClickTimer), o._lastClickTs = (new Date).valueOf(), l && "symbol" != t && "pointMarker" != t || (-1 != a.type.indexOf("column") && o._unselect(), isNaN(r) || o._raiseItemEvent("click", a, n, r)) }) }, _getHorizontalOffset: function (t, i, s, r) { var o = this._plotRect; if (0 == this._getDataLen(t)) return { index: void 0, value: s }; var a = this._calcGroupOffsets(t, this._plotRect); if (0 == a.xoffsets.length) return { index: void 0, value: void 0 }; var n, l = s, h = r, d = this.seriesGroups[t]; if ((d.polar || d.spider) && (n = this._getPolarAxisCoords(t, o)), "horizontal" == d.orientation && !n) { var c = l; l = h, h = c } this._getCategoryAxis(t).flip; for (var u, p, m, g, f = a.xoffsets.first; f <= a.xoffsets.last; f++) { var v = a.xoffsets.data[f], x = a.offsets[i][f].to, w = 0; if (n) { var b = this._toPolarCoord(n, o, v + o.x, x); v = b.x, x = b.y, w = e.jqx._ptdist(l, h, v, x) } else v += o.x, x += o.y, w = Math.abs(l - v); (isNaN(u) || u > w) && (u = w, p = f, m = v, g = x) } return { index: p, value: a.xoffsets.data[p], polarAxisCoords: n, x: m, y: g } }, onmousemove: function (t, i) { if ((this._mouseX != t || this._mouseY != i) && (this._mouseX = t, this._mouseY = i, this._selected)) { var s = this._selected.group, r = this._selected.series, o = this.seriesGroups[s], a = o.series[r], n = this._plotRect; if (this.renderer && ((n = this.renderer.getRect()).x += 5, n.y += 5, n.width -= 10, n.height -= 10), t < n.x || t > n.x + n.width || i < n.y || i > n.y + n.height) return this._hideToolTip(), void this._unselect(); var l = "horizontal" == o.orientation, n = this._plotRect; if (-1 != o.type.indexOf("line") || -1 != o.type.indexOf("area")) { var h = this._getHorizontalOffset(s, this._selected.series, t, i), d = h.index; if (void 0 == d) return; if (this._selected.item == d) return; for (var c = this._linesRenderInfo[s][r].segments, u = 0; d > c[u].lastItemIndex;) if (++u >= c.length) return; var p = c[u].pathElement, m = c[u].lastItemIndex; this._unselect(!1), this._select(p, "path", s, r, d, m); var g = this._getSymbol(this._selected.group, this._selected.series); "none" == g && (g = "circle"); var f = this._calcGroupOffsets(s, n), v = f.offsets[this._selected.series][d].to, x = v; -1 != o.type.indexOf("range") && (x = f.offsets[this._selected.series][d].from); var w = l ? t : i; if (i = !isNaN(x) && Math.abs(w - x) < Math.abs(w - v) ? x : v, isNaN(i)) return; if (t = h.value, l) { var b = t; t = i, i = b + n.y } else t += n.x; if (h.polarAxisCoords && (t = h.x, i = h.y), i = e.jqx._ptrnd(i), t = e.jqx._ptrnd(t), this._pointMarker && this._pointMarker.element && (this.renderer.removeElement(this._pointMarker.element), this._pointMarker.element = void 0), isNaN(t) || isNaN(i)) return; var _ = this._getSeriesColors(s, r, d), y = a.opacity; (isNaN(y) || y < 0 || y > 1) && (y = o.opacity), (isNaN(y) || y < 0 || y > 1) && (y = 1); var j = a.symbolSizeSelected; isNaN(j) && (j = a.symbolSize), (isNaN(j) || j > 50 || j < 0) && (j = o.symbolSize), (isNaN(j) || j > 50 || j < 0) && (j = 6), this._pointMarker = { type: g, x: t, y: i, gidx: s, sidx: r, iidx: d }, this._pointMarker.element = this._drawSymbol(g, t, i, _.fillColorSymbolSelected, _.lineColorSymbolSelected, 1, y, j), this._installHandlers(this._pointMarker.element, "pointMarker", s, r, d), this._startTooltipTimer(s, this._selected.series, d) } } }, _drawSymbol: function (e, t, i, s, r, o, a, n) { var l, h = n || 6, d = h / 2; switch (e) { case "none": return; case "circle": l = this.renderer.circle(t, i, h / 2); break; case "square": d = (h -= 1) / 2, l = this.renderer.rect(t - d, i - d, h, h); break; case "diamond": c = "M " + (t - d) + "," + i + " L" + t + "," + (i - d) + " L" + (t + d) + "," + i + " L" + t + "," + (i + d) + " Z"; l = this.renderer.path(c); break; case "triangle_up": c = "M " + (t - d) + "," + (i + d) + " L " + (t + d) + "," + (i + d) + " L " + t + "," + (i - d) + " Z"; l = this.renderer.path(c); break; case "triangle_down": c = "M " + (t - d) + "," + (i - d) + " L " + t + "," + (i + d) + " L " + (t + d) + "," + (i - d) + " Z"; l = this.renderer.path(c); break; case "triangle_left": c = "M " + (t - d) + "," + i + " L " + (t + d) + "," + (i + d) + " L " + (t + d) + "," + (i - d) + " Z"; l = this.renderer.path(c); break; case "triangle_right": var c = "M " + (t - d) + "," + (i - d) + " L " + (t - d) + "," + (i + d) + " L " + (t + d) + "," + i + " Z"; l = this.renderer.path(c); break; default: l = this.renderer.circle(t, i, h) } return this.renderer.attr(l, { fill: s, stroke: r, "stroke-width": o, "stroke-opacity": a, "fill-opacity": a }), l }, _getSymbol: function (e, t) { var i = ["circle", "square", "diamond", "triangle_up", "triangle_down", "triangle_left", "triangle_right"], s = this.seriesGroups[e], r = s.series[t], o = void 0; return void 0 != r.symbolType && (o = r.symbolType), void 0 == o && (o = s.symbolType), "default" == o ? i[t % i.length] : void 0 != o ? o : "none" }, _startTooltipTimer: function (e, t, i) { this._cancelTooltipTimer(); var s = this, r = (s.seriesGroups[e], this.toolTipShowDelay || this.toolTipDelay); (isNaN(r) || r > 1e4 || r < 0) && (r = 500), (this._ttEl || 1 == this.enableCrosshairs && 0 == this.showToolTips) && (r = 0), clearTimeout(this._tttimerHide), 0 == r && s._showToolTip(s._mouseX, s._mouseY - 3, e, t, i), this._tttimer = setTimeout(function () { 0 != r && s._showToolTip(s._mouseX, s._mouseY - 3, e, t, i); var o = s.toolTipHideDelay; isNaN(o) && (o = 4e3), s._tttimerHide = setTimeout(function () { s._hideToolTip(), s._unselect() }, o) }, r) }, _cancelTooltipTimer: function () { clearTimeout(this._tttimer) }, _getGroupGradientType: function (e) { var t = this.seriesGroups[e]; return -1 != t.type.indexOf("area") ? "horizontal" == t.orientation ? "horizontalLinearGradient" : "verticalLinearGradient" : -1 != t.type.indexOf("column") ? t.polar ? "radialGradient" : "horizontal" == t.orientation ? "verticalLinearGradient" : "horizontalLinearGradient" : -1 != t.type.indexOf("scatter") || -1 != t.type.indexOf("bubble") || -1 != t.type.indexOf("pie") || -1 != t.type.indexOf("donut") ? "radialGradient" : void 0 }, _select: function (e, t, i, s, r, o) { if (this._selected) { if (this._selected.item == r && this._selected.series == s && this._selected.group == i) return; this._unselect() } this._selected = { element: e, type: t, group: i, series: s, item: r, iidxBase: o }; var a = this.seriesGroups[i], n = a.series[s], l = -1 != a.type.indexOf("line") && -1 == a.type.indexOf("area"), h = this._getColors(i, s, o || r, this._getGroupGradientType(i)), d = h.fillColorSelected; l && (d = "none"); var c = this._getSerieSettings(i, s), u = "symbol" == t ? h.lineColorSymbolSelected : h.lineColorSelected; d = "symbol" == t ? h.fillColorSymbolSelected : d; var p = c.stroke; this.renderer.attr(e, { stroke: u, fill: d, "stroke-width": p }), this._raiseItemEvent("mouseover", a, n, r) }, _unselect: function () { var e = this; if (e._selected) { var t = e._selected.group, i = e._selected.series, s = e._selected.item, r = e._selected.iidxBase, o = e._selected.type, a = e.seriesGroups[t], n = a.series[i], l = -1 != a.type.indexOf("line") && -1 == a.type.indexOf("area"), h = e._getColors(t, i, r || s, e._getGroupGradientType(t)), d = h.fillColor; l && (d = "none"); var c = e._getSerieSettings(t, i), u = "symbol" == o ? h.lineColorSymbol : h.lineColor; d = "symbol" == o ? h.fillColorSymbol : d; var p = c.stroke; this.renderer.attr(e._selected.element, { stroke: u, fill: d, "stroke-width": p }), e._selected = void 0, isNaN(s) || e._raiseItemEvent("mouseout", a, n, s) } e._pointMarker && (e._pointMarker.element && (e.renderer.removeElement(e._pointMarker.element), e._pointMarker.element = void 0), e._pointMarker = void 0, e._hideCrosshairs()) }, _raiseItemEvent: function (t, i, s, r) { for (var o = s[t] || i[t], a = 0; a < this.seriesGroups.length && this.seriesGroups[a] != i; a++); if (a != this.seriesGroups.length) { var n = { event: t, seriesGroup: i, serie: s, elementIndex: r, elementValue: this._getDataValue(r, s.dataField, a) }; o && e.isFunction(o) && o(n), this._raiseEvent(t, n) } }, _raiseEvent: function (t, i) { var s = new e.Event(t); return s.owner = this, s.args = i, this.host.trigger(s) }, _calcInterval: function (e, t, i) { var s = Math.abs(t - e) / i, r = [.5, .25, .125, .1], o = .1, a = [1, 2, 3, 4, 5, 10, 15, 20, 25, 50, 100]; s < 1 && (a = r, o = 10); var n = 0; do { n = 0, s >= 1 ? o *= 10 : o /= 10; for (var l = 1; l < a.length && Math.abs(a[n] * o - s) > Math.abs(a[l] * o - s) ; l++) n = l } while (n == a.length - 1); return a[n] * o }, _renderDataClone: function () { if (this._renderData && !this._isToggleRefresh) for (var e = this._elementRenderInfo = [], t = 0; t < this._renderData.length; t++) { for (this._getCategoryAxis(t).dataField; e.length <= t;) e.push({}); var i = e[t], s = this._renderData[t]; if (s.offsets) { if (s.valueAxis) { i.valueAxis = { itemOffsets: {} }; for (var r in s.valueAxis.itemOffsets) i.valueAxis.itemOffsets[r] = s.valueAxis.itemOffsets[r] } if (s.xAxis) { i.xAxis = { itemOffsets: {} }; for (var r in s.xAxis.itemOffsets) i.xAxis.itemOffsets[r] = s.xAxis.itemOffsets[r] } i.series = []; for (var o = i.series, a = this.seriesGroups[t].type, n = -1 != a.indexOf("pie") || -1 != a.indexOf("donut"), l = 0; l < s.offsets.length; l++) { o.push({}); for (var h = 0; h < s.offsets[l].length; h++) if (n) { var d = s.offsets[l][h]; o[l][d.displayValue] = { value: d.value, x: d.x, y: d.y, fromAngle: d.fromAngle, toAngle: d.toAngle } } else o[l][s.xoffsets.xvalues[h]] = { value: s.offsets[l][h].value, valueFrom: s.offsets[l][h].valueFrom, valueRadius: s.offsets[l][h].valueRadius, xoffset: s.xoffsets.data[h], from: s.offsets[l][h].from, to: s.offsets[l][h].to } } } } }, _calcGroupOffsets: function (t, i) { for (var s = this.seriesGroups[t]; this._renderData.length < t + 1;) this._renderData.push({}); if (null != this._renderData[t] && void 0 != this._renderData[t].offsets) return this._renderData[t]; if (-1 != s.type.indexOf("pie") || -1 != s.type.indexOf("donut")) return this._calcPieSeriesGroupOffsets(t, i); if (!s.valueAxis || !s.series || 0 == s.series.length) return this._renderData[t]; var r = 1 == s.valueAxis.flip, o = 1 == s.valueAxis.logarithmicScale, a = s.valueAxis.logarithmicScaleBase || 10, n = new Array, l = -1 != s.type.indexOf("stacked"), h = l && -1 != s.type.indexOf("100"), d = -1 != s.type.indexOf("range"), c = -1 != s.type.indexOf("column"), u = this._getDataLen(t), p = s.baselineValue || s.valueAxis.baselineValue || 0; (d || c && l || h) && (p = 0); var m = this._stats.seriesGroups[t]; if (m && m.isValid) { p > m.max && (p = m.max), p < m.min && (p = m.min); var g = h || o ? m.maxRange : m.max - m.min, f = m.min, v = m.max, x = i.height / (o ? m.intervals : g), w = 0; w = h ? f * v < 0 ? -((g /= 2) + p) * x : -p * x : -(p - f) * x, r ? w = i.y - w : w += i.y + i.height; var b, _ = new Array, y = new Array, j = new Array; o && (b = e.jqx.log(v, a) - e.jqx.log(p, a), l && (b = m.intervals, p = h ? 0 : f), m.intervals - b, r || (w = i.y + b / m.intervals * i.height)), w = e.jqx._ptrnd(w); var q = f * v < 0 ? i.height / 2 : i.height, T = [], C = []; if (s.bands) for (z = 0; z < s.bands.length; z++) { var S = s.bands[z].minValue, k = s.bands[z].maxValue; isNaN(S) && (S = p), isNaN(k) && (k = p); var I = 0, D = 0; o ? (I = (e.jqx.log(S, a) - e.jqx.log(p, a)) * x, D = (e.jqx.log(k, a) - e.jqx.log(p, a)) * x) : (I = (S - p) * x, D = (k - p) * x), this._isVML && (I = Math.round(I), D = Math.round(D)), r ? C.push({ from: w + D, to: w + I }) : C.push({ from: w - D, to: w - I }) } for (var P = [], B = c || !c && !l || h || o, z = 0; z < s.series.length; z++) { !l && o && (T = []); var H = s.series[z].dataField, M = s.series[z].dataFieldFrom, E = s.series[z].dataFieldTo, A = s.series[z].radiusDataField; n.push(new Array); for (var L = this._isSerieVisible(t, z), O = 0; O < u; O++) { for (; P.length <= O;) P.push(0); var N = NaN; d && (N = this._getDataValueAsNumber(O, M, t), isNaN(N) && (N = p)); var F = NaN; F = d ? this._getDataValueAsNumber(O, E, t) : this._getDataValueAsNumber(O, H, t); var R = this._getDataValueAsNumber(O, A, t); if (L || (F = NaN), isNaN(F) || o && F <= 0) n[z].push({ from: void 0, to: void 0 }); else { var W; B ? W = F >= p ? _ : y : P[O] = F = P[O] + F; var V = x * (F - p); if (d && (V = x * (F - N)), o) { for (; T.length <= O;) T.push({ p: { value: 0, height: 0 }, n: { value: 0, height: 0 } }); var G = d ? N : p, U = F > G ? T[O].p : T[O].n; U.value += F, h ? (F = U.value / (m.psums[O] + m.nsums[O]) * 100, V = (e.jqx.log(F, a) - m.minPow) * x) : (V = e.jqx.log(U.value, a) - e.jqx.log(G, a), V *= x), V -= U.height, U.height += V } var Y = w; if (d) { var K = 0; K = o ? (e.jqx.log(N, a) - e.jqx.log(p, a)) * x : (N - p) * x, Y += r ? K : -K } if (l) { if (h && !o) { var $ = m.psums[O] - m.nsums[O]; F > p ? (V = m.psums[O] / $ * q, 0 != m.psums[O] && (V *= F / m.psums[O])) : (V = m.nsums[O] / $ * q, 0 != m.nsums[O] && (V *= F / m.nsums[O])) } B && (isNaN(W[O]) && (W[O] = Y), Y = W[O]) } isNaN(j[O]) && (j[O] = 0); var X = j[O], Q = V = Math.abs(V); if (h_new = this._isVML ? Math.round(V) : e.jqx._ptrnd(V) - 1, V = Math.abs(V - h_new) > .5 ? Math.round(V) : h_new, X += V - Q, l || (X = 0), Math.abs(X) > .5 && (X > 0 ? (V -= 1, X -= 1) : (V += 1, X += 1)), j[O] = X, z == s.series.length - 1 && h) { for (var J = 0, Z = 0; Z < z; Z++) J += Math.abs(n[Z][O].to - n[Z][O].from); if ((J += V) < q) if (V > .5) V = e.jqx._ptrnd(V + q - J); else for (Z = z - 1; Z >= 0;) { if (Math.abs(n[Z][O].to - n[Z][O].from) > 1) { n[Z][O].from > n[Z][O].to && (n[Z][O].from += q - J); break } Z-- } } r && (V *= -1); var ee = F < p; d && (ee = N > F); var te = isNaN(N) ? F : { from: N, to: F }; ee ? (B && (W[O] += V), n[z].push({ from: Y, to: Y + V, value: te, valueFrom: N, valueRadius: R })) : (B && (W[O] -= V), n[z].push({ from: Y, to: Y - V, value: te, valueFrom: N, valueRadius: R })) } } } var ie = this._renderData[t]; return ie.baseOffset = w, ie.offsets = n, ie.bands = C, ie.xoffsets = this._calculateXOffsets(t, i.width), this._renderData[t] } }, _calcPieSeriesGroupOffsets: function (t, i) { for (var s = this._getDataLen(t), r = this.seriesGroups[t], o = this._renderData[t] = {}, a = o.offsets = [], n = 0; n < r.series.length; n++) { var l = r.series[n], h = l.minAngle; (isNaN(h) || h < 0 || h > 360) && (h = 0); var d = l.maxAngle; (isNaN(d) || d < 0 || d > 360) && (d = 360); var c = d - h, u = l.initialAngle || 0; u < h && (u = h), u > d && (u = d); var p = u, m = l.radius || .4 * Math.min(i.width, i.height); isNaN(m) && (m = 1); var g = l.innerRadius || 0; (isNaN(g) || g >= m) && (g = 0); var f = l.centerOffset || 0, v = e.jqx.getNum([l.offsetX, r.offsetX, i.width / 2]), x = e.jqx.getNum([l.offsetY, r.offsetY, i.height / 2]); a.push([]); for (var w = 0, b = 0, _ = 0; _ < s; _++) { j = this._getDataValueAsNumber(_, l.dataField, t); isNaN(j) || (this._isSerieVisible(t, n, _) || 1 == l.hiddenPointsDisplay) && (j > 0 ? w += j : b += j) } var y = w - b; 0 == y && (y = 1); for (_ = 0; _ < s; _++) { var j = this._getDataValueAsNumber(_, l.dataField, t); if (isNaN(j)) a[n].push({}); else { var q = l.displayText || l.displayField, T = this._getDataValue(_, q, t); void 0 == T && (T = _); var C = 0, S = this._isSerieVisible(t, n, _); (S || 1 == l.hiddenPointsDisplay) && (C = Math.abs(j) / y * c); var k = i.x + v, I = i.y + x, D = f; e.isFunction(f) && (D = f({ seriesIndex: n, seriesGroupIndex: t, itemIndex: _ })), isNaN(D) && (D = 0); var P = { key: t + "_" + n + "_" + _, value: j, displayValue: T, x: k, y: I, fromAngle: p, toAngle: p + C, centerOffset: D, innerRadius: g, outerRadius: m, visible: S }; a[n].push(P), p += C } } } return o }, _isPointSeriesOnly: function () { for (var e = 0; e < this.seriesGroups.length; e++) { var t = this.seriesGroups[e]; if (-1 == t.type.indexOf("line") && -1 == t.type.indexOf("area") && -1 == t.type.indexOf("scatter") && -1 == t.type.indexOf("bubble")) return !1 } return !0 }, _hasColumnSeries: function () { for (var e = 0; e < this.seriesGroups.length; e++) if (-1 != this.seriesGroups[e].type.indexOf("column")) return !0; return !1 }, _alignValuesWithTicks: function (e) { var t = this._isPointSeriesOnly(), i = this.seriesGroups[e], s = this._getCategoryAxis(e), r = void 0 == s.valuesOnTicks ? t : 0 != s.valuesOnTicks; return void 0 == e ? r : void 0 == i.valuesOnTicks ? r : i.valuesOnTicks }, _getYearsDiff: function (e, t) { return t.getFullYear() - e.getFullYear() }, _getMonthsDiff: function (e, t) { return 12 * (t.getFullYear() - e.getFullYear()) + t.getMonth() - e.getMonth() }, _getDateDiff: function (t, i, s, r) { var o = 0; switch ("year" != s && "month" != s && (o = i.valueOf() - t.valueOf()), s) { case "year": o = this._getYearsDiff(t, i); break; case "month": o = this._getMonthsDiff(t, i); break; case "day": o /= 864e5; break; case "hour": o /= 36e5; break; case "minute": o /= 6e4; break; case "second": o /= 1e3 } return "year" != s && "month" != s && 0 != r && (o = e.jqx._rnd(o, 1, !0)), o }, _getAsDate: function (e, t) { return e = this._castAsDate(e), "month" == t ? new Date(e.getFullYear(), e.getMonth(), 1) : "year" == t ? new Date(e.getFullYear(), 0, 1) : "day" == t ? new Date(e.getFullYear(), e.getMonth(), e.getDate()) : e }, _getCategoryAxisStats: function (e, t, i) { for (var s, r, o = this._getDataLen(e), a = "date" == t.type || "time" == t.type, n = a ? this._castAsDate(t.minValue) : this._castAsNumber(t.minValue), l = a ? this._castAsDate(t.maxValue) : this._castAsNumber(t.maxValue), h = void 0 == t.type || "auto" == t.type, d = h || "basic" == t.type, c = 0, u = 0, p = 0; p < o && t.dataField; p++) { var m = this._getDataValue(p, t.dataField, e); m = a ? this._castAsDate(m) : this._castAsNumber(m), isNaN(m) || (a ? c++ : u++, (isNaN(s) || m < s) && (s = m), (isNaN(r) || m >= r) && (r = m)) } h && (!a && u == o || a && c == o) && (d = !1), d && (s = 0, r = o - 1), isNaN(n) && (n = s), isNaN(l) && (l = r), a ? (n = new Date(n), l = new Date(l), this._isDate(n) || (n = this._isDate(l) ? l : new Date), this._isDate(l) || (l = this._isDate(n) ? n : new Date)) : (isNaN(n) && (n = 0), isNaN(l) && (l = d ? o - 1 : n)), void 0 == s && (s = n), void 0 == r && (r = l); var g, f; if (a) { if (!(g = t.baseUnit)) { g = "day"; var v = l.valueOf() - n.valueOf(); g = v < 1e3 ? "second" : v < 36e5 ? "minute" : v < 864e5 ? "hour" : v < 2592e6 ? "day" : v < 31104e6 ? "month" : "year" } f = "hour" == g || "minute" == g || "second" == g || "millisecond" == g } var x = t.unitInterval; return (isNaN(x) || x <= 0) && (x = this._estAxisInterval(n, l, e, i, g)), { min: n, max: l, dsRange: { min: s, max: r }, useIndeces: d, isDateTime: a, isTimeUnit: f, dateTimeUnit: g, interval: x } }, _getDefaultDTFormatFn: function (e) { var t = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]; return "year" == e || "month" == e || "day" == e ? function (e) { return e.getDate() + "-" + t[e.getMonth()] + "-" + e.getFullYear() } : function (e) { return e.getHours() + ":" + e.getMinutes() + ":" + e.getSeconds() } }, _estimateDTIntCnt: function (e, t, i, s) { var r = 0, o = new Date(e), a = new Date(t); if (i <= 0) return 1; for (; o.valueOf() < a.valueOf() ;) "millisecond" == s ? o.setMilliseconds(o.getMilliseconds() + i) : "second" == s ? o.setSeconds(o.getSeconds() + i) : "minute" == s ? o.setMinutes(o.getMinutes() + i) : "hour" == s ? o.setHours(o.getHours() + i) : "day" == s ? o.setDate(o.getDate() + i) : "month" == s ? o.setMonth(o.getMonth() + i) : "year" == s && o.setFullYear(o.getFullYear() + i), r++; return r }, _estAxisInterval: function (e, t, i, s, r) { var o = [1, 2, 5, 10, 15, 20, 50, 100, 200, 500], a = 0, n = s / 50; if (this._renderData && this._renderData.length > i && this._renderData[i].xAxis && !isNaN(this._renderData[i].xAxis.avgWidth)) { var l = Math.max(1, this._renderData[i].xAxis.avgWidth); 0 != l && (n = .9 * s / l) } if (n <= 1) return 1; for (; ;) { var h = a >= o.length ? Math.pow(10, 3 + a - o.length) : o[a]; if ((this._isDate(e) && this._isDate(t) ? this._estimateDTIntCnt(e, t, h, r) : (t - e) / h) <= n) return h; a++ } }, _getPaddingSize: function (t, i, s, r, o, a) { var n = t.min, l = t.max, h = t.interval, d = t.dateTimeUnit; if (o) return { left: 0, right: r / Math.max(1, l - n + 1) * h }; if (s && !a) return { left: 0, right: 0 }; if (this._isDate(n) && this._isDate(l)) { var c = this._estimateDTIntCnt(n, l, Math.min(h, l - n), d); return { left: (u = r / Math.max(2, c)) / 2, right: u / 2 } } if (1 == (c = Math.max(1, l - n))) return p = r / 4, { left: p, right: p }; var u = r / c, p = u * h / 2; a && (p = Math.max(p, u / 2)); var m = r - 2 * p; e.jqx._rnd(m / Math.max(1, u * h), 1, !1); return p -= p - (u = m / c) * h / 2, { left: p, right: p } }, _calculateXOffsets: function (t, i) { var s = this.seriesGroups[t], r = this._getCategoryAxis(t), o = new Array, a = new Array, n = this._getDataLen(t), l = this._getCategoryAxisStats(t, r, i), h = l.min, d = l.max, c = l.isDateTime, u = l.isTimeUnit, p = this._hasColumnSeries(), m = s.polar || s.spider, g = this._alignValuesWithTicks(t), f = this._getPaddingSize(l, r, g, i, m, p), v = d - h; 0 == v && (v = 1); var x = i - f.left - f.right; m && g && (f.left = f.right = 0); for (var w = -1, b = -1, _ = 0; _ < n; _++) { var y = void 0 === r.dataField ? _ : this._getDataValue(_, r.dataField, t); if (l.useIndeces) { if (_ < h || _ > d) { o.push(NaN), a.push(void 0); continue } o.push(e.jqx._ptrnd(f.left + (_ - h) / v * x)), a.push(y), -1 == w && (w = _), (-1 == b || b < _) && (b = _) } else if (y = c ? this._castAsDate(y) : this._castAsNumber(y), isNaN(y) || y < h || y > d) o.push(NaN), a.push(void 0); else { var j = 0; !c || c && u ? (diffFromMin = y - h, j = (y - h) * x / v) : j = (y.valueOf() - h.valueOf()) / (d.valueOf() - h.valueOf()) * x, j = e.jqx._ptrnd(f.left + j), o.push(j), a.push(y), -1 == w && (w = _), (-1 == b || b < _) && (b = _) } } if (1 == r.flip) for (_ = 0; _ < o.length; _++) isNaN(o[_]) || (o[_] = i - o[_]); u && (v = this._getDateDiff(h, d, r.baseUnit), v = e.jqx._rnd(v, 1, !1)); var q = x / Math.max(1, c ? o.length : v); return w == b && (o[w] = f.left + x / 2), { axisStats: l, data: o, xvalues: a, first: w, last: b, length: -1 == b ? 0 : b - w + 1, itemWidth: q, intervalWidth: q * l.interval, rangeLength: v, useIndeces: l.useIndeces, padding: f } }, _getCategoryAxis: function (e) { return void 0 == e || this.seriesGroups.length <= e ? this.categoryAxis || this.xAxis : this.seriesGroups[e].categoryAxis || this.seriesGroups[e].xAxis || this.categoryAxis || this.xAxis }, _isGreyScale: function (e, t) { var i = this.seriesGroups[e], s = i.series[t]; return 1 == s.greyScale || 0 != s.greyScale && (1 == i.greyScale || 0 != i.greyScale && 1 == this.greyScale) }, _getSeriesColors: function (t, i, s) { var r = this._getSeriesColorsInternal(t, i, s); if (this._isGreyScale(t, i)) for (var o in r) r[o] = e.jqx.toGreyScale(r[o]); return r }, _getColorFromScheme: function (e, t, i) { var s = "#000000", r = this.seriesGroups[e], o = r.series[t]; if ("pie" == r.type || "donut" == r.type) { var a = this._getDataLen(e); s = this._getItemColorFromScheme(o.colorScheme || r.colorScheme || this.colorScheme, t * a + i, e, t) } else { for (var n = 0, l = 0; l <= e; l++) for (var h in this.seriesGroups[l].series) { if (l == e && h == t) break; n++ } var d = this.colorScheme; if (r.colorScheme && (d = r.colorScheme, sidex = seriesIndex), void 0 != d && "" != d || (d = this.colorSchemes[0].name), !d) return s; for (l = 0; l < this.colorSchemes.length; l++) { var c = this.colorSchemes[l]; if (c.name == d) { for (; n > c.colors.length;) n -= c.colors.length, ++l >= this.colorSchemes.length && (l = 0), c = this.colorSchemes[l]; s = c.colors[n % c.colors.length] } } } return s }, _colorsCache: { get: function (e) { if (this._store[e]) return this._store[e] }, set: function (e, t) { this._size < 1e4 && (this._store[e], this._size++) }, clear: function () { this._store = {}, this._size = 0 }, _size: 0, _store: {} }, _getSeriesColorsInternal: function (t, i, s) { var r = t + "_" + i + "_" + (isNaN(s) ? "NaN" : s); if (this._colorsCache.get(r)) return this._colorsCache.get(r); var o = this.seriesGroups[t], a = o.series[i], n = { lineColor: "#222222", lineColorSelected: "#151515", lineColorSymbol: "#222222", lineColorSymbolSelected: "#151515", fillColor: "#222222", fillColorSelected: "#333333", fillColorSymbol: "#222222", fillColorSymbolSelected: "#333333" }, l = void 0; if (e.isFunction(a.colorFunction)) { var h = isNaN(s) ? NaN : this._getDataValue(s, a.dataField, t); if (-1 != o.type.indexOf("range") && (h = { from: this._getDataValue(s, a.dataFieldFrom, t), to: this._getDataValue(s, a.dataFieldTo, t) }), "object" == typeof (l = a.colorFunction(h, s, a, o))) for (var d in l) n[d] = l[d]; else n.fillColor = l } else { for (var d in n) a.key && (n[d] = a[d]); a.fillColor || a.color ? a.fillColor = a.fillColor || a.color : n.fillColor = this._getColorFromScheme(t, i, s) } var c = { fillColor: { baseColor: "fillColor", adjust: 1 }, fillColorSelected: { baseColor: "fillColor", adjust: 1.1 }, fillColorSymbol: { baseColor: "fillColor", adjust: 1 }, fillColorSymbolSelected: { baseColor: "fillColorSymbol", adjust: 2 }, lineColor: { baseColor: "fillColor", adjust: .9 }, lineColorSelected: { baseColor: "lineColor", adjust: .8 }, lineColorSymbol: { baseColor: "lineColor", adjust: 1 }, lineColorSymbolSelected: { baseColor: "lineColorSelected", adjust: 1 } }; for (var d in n) "object" == typeof l && l[d] || (a[d] ? n[d] = a[d] : n[d] = e.jqx.adjustColor(n[c[d].baseColor], c[d].adjust)); return this._colorsCache.set(r, n), n }, _getItemColorFromScheme: function (t, i, s, r) { void 0 != t && "" != t || (t = this.colorSchemes[0].name); for (var o = 0; o < this.colorSchemes.length && t != this.colorSchemes[o].name; o++); for (var a = 0; a <= i;) { o == this.colorSchemes.length && (o = 0); var n = this.colorSchemes[o].colors.length; if (!(a + n <= i)) { var l = this.colorSchemes[o].colors[i - a]; return this._isGreyScale(s, r) && 0 == l.indexOf("#") && (l = e.jqx.toGreyScale(l)), l } a += n, o++ } }, getColorScheme: function (e) { for (var t in this.colorSchemes) if (this.colorSchemes[t].name == e) return this.colorSchemes[t].colors }, addColorScheme: function (e, t) { for (var i in this.colorSchemes) if (this.colorSchemes[i].name == e) return void (this.colorSchemes[i].colors = t); this.colorSchemes.push({ name: e, colors: t }) }, removeColorScheme: function (e) { for (var t in this.colorSchemes) if (this.colorSchemes[t].name == e) { this.colorSchemes.splice(t, 1); break } }, colorSchemes: [{ name: "scheme01", colors: ["#307DD7", "#AA4643", "#89A54E", "#71588F", "#4198AF"] }, { name: "scheme02", colors: ["#7FD13B", "#EA157A", "#FEB80A", "#00ADDC", "#738AC8"] }, { name: "scheme03", colors: ["#E8601A", "#FF9639", "#F5BD6A", "#599994", "#115D6E"] }, { name: "scheme04", colors: ["#D02841", "#FF7C41", "#FFC051", "#5B5F4D", "#364651"] }, { name: "scheme05", colors: ["#25A0DA", "#309B46", "#8EBC00", "#FF7515", "#FFAE00"] }, { name: "scheme06", colors: ["#0A3A4A", "#196674", "#33A6B2", "#9AC836", "#D0E64B"] }, { name: "scheme07", colors: ["#CC6B32", "#FFAB48", "#FFE7AD", "#A7C9AE", "#888A63"] }, { name: "scheme08", colors: ["#3F3943", "#01A2A6", "#29D9C2", "#BDF271", "#FFFFA6"] }, { name: "scheme09", colors: ["#1B2B32", "#37646F", "#A3ABAF", "#E1E7E8", "#B22E2F"] }, { name: "scheme10", colors: ["#5A4B53", "#9C3C58", "#DE2B5B", "#D86A41", "#D2A825"] }, { name: "scheme11", colors: ["#993144", "#FFA257", "#CCA56A", "#ADA072", "#949681"] }, { name: "scheme12", colors: ["#105B63", "#EEEAC5", "#FFD34E", "#DB9E36", "#BD4932"] }, { name: "scheme13", colors: ["#BBEBBC", "#F0EE94", "#F5C465", "#FA7642", "#FF1E54"] }, { name: "scheme14", colors: ["#60573E", "#F2EEAC", "#BFA575", "#A63841", "#BFB8A3"] }, { name: "scheme15", colors: ["#444546", "#FFBB6E", "#F28D00", "#D94F00", "#7F203B"] }, { name: "scheme16", colors: ["#583C39", "#674E49", "#948658", "#F0E99A", "#564E49"] }, { name: "scheme17", colors: ["#142D58", "#447F6E", "#E1B65B", "#C8782A", "#9E3E17"] }, { name: "scheme18", colors: ["#4D2B1F", "#635D61", "#7992A2", "#97BFD5", "#BFDCF5"] }, { name: "scheme19", colors: ["#844341", "#D5CC92", "#BBA146", "#897B26", "#55591C"] }, { name: "scheme20", colors: ["#56626B", "#6C9380", "#C0CA55", "#F07C6C", "#AD5472"] }, { name: "scheme21", colors: ["#96003A", "#FF7347", "#FFBC7B", "#FF4154", "#642223"] }, { name: "scheme22", colors: ["#5D7359", "#E0D697", "#D6AA5C", "#8C5430", "#661C0E"] }, { name: "scheme23", colors: ["#16193B", "#35478C", "#4E7AC7", "#7FB2F0", "#ADD5F7"] }, { name: "scheme24", colors: ["#7B1A25", "#BF5322", "#9DA860", "#CEA457", "#B67818"] }, { name: "scheme25", colors: ["#0081DA", "#3AAFFF", "#99C900", "#FFEB3D", "#309B46"] }, { name: "scheme26", colors: ["#0069A5", "#0098EE", "#7BD2F6", "#FFB800", "#FF6800"] }, { name: "scheme27", colors: ["#FF6800", "#A0A700", "#FF8D00", "#678900", "#0069A5"] }], _formatValue: function (t, i, s, r, o, a) { if (void 0 == t) return ""; if (this._isObject(t) && !s) return ""; if (s) { if (!e.isFunction(s)) return t.toString(); try { return s(t, a, o, r) } catch (e) { return e.message } } return this._isNumber(t) ? this._formatNumber(t, i) : this._isDate(t) ? this._formatDate(t, i) : i ? (i.prefix || "") + t.toString() + (i.sufix || "") : t.toString() }, _getFormattedValue: function (t, i, s, r, o) { var a = this.seriesGroups[t], n = a.series[i], l = "", h = r, d = o; if (d || (d = n.formatFunction || a.formatFunction), h || (h = n.formatSettings || a.formatSettings), !n.formatFunction && n.formatSettings && (d = void 0), -1 != a.type.indexOf("range")) { var c = this._getDataValue(s, n.dataFieldFrom, t), u = this._getDataValue(s, n.dataFieldTo, t); if (d && e.isFunction(d)) try { return d({ from: c, to: u }, s, n, a) } catch (e) { return e.message } void 0 != c && (l = this._formatValue(c, h, d, t, i, s)), void 0 != u && (l += ", " + this._formatValue(u, h, d, t, i, s)) } else { var p = this._getDataValue(s, n.dataField, t); void 0 != p && (l = this._formatValue(p, h, d, t, i, s)) } return l || "" }, _isNumberAsString: function (t) { if ("string" != typeof t) return !1; t = e.trim(t); for (var i = 0; i < t.length; i++) { var s = t.charAt(i); if (!(s >= "0" && s <= "9" || "," == s || "." == s) && (("-" != s || 0 != i) && !("(" == s && 0 == i || ")" == s && i == t.length - 1))) return !1 } return !0 }, _castAsDate: function (t) { if (t instanceof Date && !isNaN(t)) return t; if ("string" == typeof t) { var i = new Date(t); if (isNaN(i)) if (e.jqx.dataFormat) { var s = e.jqx.dataFormat.tryparsedate(t); i = s || this._parseISO8601Date(t) } else i = this._parseISO8601Date(t); else -1 == t.indexOf(":") && i.setHours(0, 0, 0, 0); if (void 0 != i && !isNaN(i)) return i } }, _parseISO8601Date: function (e) { var t = e.split(" "); if (t.length < 0) return NaN; var i = t[0].split("-"), s = 2 == t.length ? t[1].split(":") : "", r = i[0], o = i.length > 1 ? i[1] - 1 : 0, a = i.length > 2 ? i[2] : 1, n = s[1], l = s.length > 1 ? s[1] : 0, n = s.length > 2 ? s[2] : 0, h = s.length > 3 ? s[3] : 0; return new Date(r, o, a, n, l, h) }, _castAsNumber: function (e) { if (e instanceof Date && !isNaN(e)) return e.valueOf(); if ("string" == typeof e) if (this._isNumber(e)) e = parseFloat(e); else if (!/[a-zA-Z]/.test(e)) { var t = new Date(e); void 0 != t && (e = t.valueOf()) } return e }, _isNumber: function (e) { return "string" == typeof e && this._isNumberAsString(e) && (e = parseFloat(e)), "number" == typeof e && isFinite(e) }, _isDate: function (e) { return e instanceof Date && !isNaN(e.getDate()) }, _isBoolean: function (e) { return "boolean" == typeof e }, _isObject: function (t) { return t && ("object" == typeof t || e.isFunction(t)) || !1 }, _formatDate: function (e, t) { return e.toString() }, _formatNumber: function (e, t) { if (!this._isNumber(e)) return e; var i = (t = t || {}).decimalSeparator || ".", s = t.thousandsSeparator || "", r = t.prefix || "", o = t.sufix || "", a = t.decimalPlaces; isNaN(a) && (a = 100 * e != 100 * parseInt(e) ? 2 : 0); var n = t.negativeWithBrackets || !1, l = e < 0; l && n && (e *= -1); var h, d = e.toString(), c = Math.pow(10, a); if (d = (Math.round(e * c) / c).toString(), isNaN(d) && (d = ""), h = d.lastIndexOf("."), a > 0) for (h < 0 ? h = (d += i).length - 1 : "." !== i && (d = d.replace(".", i)) ; d.length - 1 - h < a;) d += "0"; h = (h = d.lastIndexOf(i)) > -1 ? h : d.length; for (var u = d.substring(h), p = 0, m = h; m > 0; m--, p++) p % 3 == 0 && m !== h && (!l || m > 1 || l && n) && (u = s + u), u = d.charAt(m - 1) + u; return d = u, l && n && (d = "(" + d + ")"), r + d + o }, _defaultNumberFormat: { prefix: "", sufix: "", decimalSeparator: ".", thousandsSeparator: ",", decimalPlaces: 2, negativeWithBrackets: !1 }, _getBezierPoints: function (t) { for (var i = [], s = t.split(" "), r = 0; r < s.length; r++) { var o = s[r].split(","); i.push({ x: parseFloat(o[0]), y: parseFloat(o[1]) }) } var a = ""; if (i.length < 3) for (r = 0; r < i.length; r++) a += (r > 0 ? " " : "") + i[r].x + "," + i[r].y; else for (r = 0; r < i.length - 1; r++) { var n = []; 0 == r ? (n.push(i[r]), n.push(i[r]), n.push(i[r + 1]), n.push(i[r + 2])) : i.length - 2 == r ? (n.push(i[r - 1]), n.push(i[r]), n.push(i[r + 1]), n.push(i[r + 1])) : (n.push(i[r - 1]), n.push(i[r]), n.push(i[r + 1]), n.push(i[r + 2])); var l = [], h = r > 3 ? 9 : 5, d = 0 == r ? 81 : h, c = { x: (-n[0].x + d * n[1].x + n[2].x) / d, y: (-n[0].y + d * n[1].y + n[2].y) / d }; 0 == r && (d = h); var u = { x: (n[1].x + d * n[2].x - n[3].x) / d, y: (n[1].y + d * n[2].y - n[3].y) / d }; l.push({ x: n[1].x, y: n[1].y }), l.push(c), l.push(u), l.push({ x: n[2].x, y: n[2].y }), a += "C" + e.jqx._ptrnd(l[1].x) + "," + e.jqx._ptrnd(l[1].y) + " " + e.jqx._ptrnd(l[2].x) + "," + e.jqx._ptrnd(l[2].y) + " " + e.jqx._ptrnd(l[3].x) + "," + e.jqx._ptrnd(l[3].y) + " " } return a }, _animTickInt: 50, _createAnimationGroup: function (e) { this._animGroups || (this._animGroups = {}), this._animGroups[e] = { animations: [], startTick: NaN } }, _startAnimation: function (e) { var t = (new Date).getTime(); this._animGroups[e].startTick = t, this._runAnimation(), this._enableAnimTimer() }, _enqueueAnimation: function (e, t, i, s, r, o, a) { s < 0 && (s = 0), void 0 == a && (a = "easeInOutSine"), this._animGroups[e].animations.push({ key: t, properties: i, duration: s, fn: r, context: o, easing: a }) }, _stopAnimations: function () { clearTimeout(this._animtimer), this._animtimer = void 0, this._animGroups = void 0 }, _enableAnimTimer: function () { if (!this._animtimer) { var e = this; this._animtimer = setTimeout(function () { e._runAnimation() }, this._animTickInt) } }, _runAnimation: function (t) { if (this._animGroups) { var i = (new Date).getTime(), s = {}; for (var r in this._animGroups) { for (var o = this._animGroups[r].animations, a = this._animGroups[r].startTick, n = 0, l = 0; l < o.length; l++) { var h = o[l], d = i - a; h.duration > n && (n = h.duration); var c = h.duration > 0 ? d / h.duration : 1, u = c; if (h.easing && 0 != h.duration && (u = e.easing[h.easing](c, d, 0, 1, h.duration)), c > 1 && (c = 1, u = 1), h.fn) h.fn(h.key, h.context, u); else { for (var p = {}, r = 0; r < h.properties.length; r++) { var m = h.properties[r], g = 0; g = 1 == c ? m.to : easeParecent * (m.to - m.from) + m.from, p[m.key] = g } this.renderer.attr(h.key, p) } } a + n > i && (s[r] = { startTick: a, animations: o }) } this._animGroups = s, this.renderer instanceof e.jqx.HTML5Renderer && this.renderer.refresh() } this._animtimer = null; for (var r in this._animGroups) { this._enableAnimTimer(); break } } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxDraw", "", {}), e.extend(e.jqx._jqxDraw.prototype, { defineInstance: function () { var t = { renderEngine: "" }; e.extend(!0, this, t); var i = ["clear", "on", "off", "removeElement", "attr", "getAttr", "line", "circle", "rect", "path", "pieslice", "text", "measureText"]; for (var s in i) this._addFn(e.jqx._jqxDraw.prototype, i[s]) }, _addFn: function (e, t) { e[t] || (e[t] = function () { return this.renderer[t].apply(this.renderer, arguments) }) }, createInstance: function (e) { }, _initRenderer: function (t) { return e.jqx.createRenderer(this, t) }, _internalRefresh: function () { var t = this; if (!e.jqx.isHidden(t.host)) { t.renderer || (t.host.empty(), t._initRenderer(t.host)); var i = t.renderer; if (i) { var s = i.getRect(); t._render({ x: 1, y: 1, width: s.width, height: s.height }), i instanceof e.jqx.HTML5Renderer && i.refresh() } } }, _saveAsImage: function (t, i, s, r) { return e.jqx._widgetToImage(this, t, i, s, r) }, _render: function (e) { var t = this; t.renderer; t._plotRect = e }, refresh: function () { this._internalRefresh() }, getSize: function () { var e = this._plotRect; return { width: e.width, height: e.height } }, saveAsPNG: function (e, t, i) { return this._saveAsImage("png", e, t, i) }, saveAsJPEG: function (e, t, i) { return this._saveAsImage("jpeg", e, t, i) } }) }(jQuery), function (e) { e.jqx.toGreyScale = function (t) { if (-1 == t.indexOf("#")) return t; var i = e.jqx.cssToRgb(t); i[0] = i[1] = i[2] = Math.round(.3 * i[0] + .59 * i[1] + .11 * i[2]); var s = e.jqx.rgbToHex(i[0], i[1], i[2]); return "#" + s[0] + s[1] + s[2] }, e.jqx.adjustColor = function (t, i) { if ("string" != typeof t) return "#000000"; if (-1 == t.indexOf("#")) return t; var s = e.jqx.cssToRgb(t), r = e.jqx.rgbToHsl(s); r[2] = Math.min(1, r[2] * i), r[1] = Math.min(1, r[1] * i * 1.1), s = e.jqx.hslToRgb(r); for (var t = "#", o = 0; o < 3; o++) { var a = Math.round(s[o]); 1 == (a = e.jqx.decToHex(a)).toString().length && (t += "0"), t += a } return t.toUpperCase() }, e.jqx.decToHex = function (e) { return e.toString(16) }, e.jqx.hexToDec = function (e) { return parseInt(e, 16) }, e.jqx.rgbToHex = function (t, i, s) { return [e.jqx.decToHex(t), e.jqx.decToHex(i), e.jqx.decToHex(s)] }, e.jqx.hexToRgb = function (t, i, s) { return [e.jqx.hexToDec(t), e.jqx.hexToDec(i), e.jqx.hexToDec(s)] }, e.jqx.cssToRgb = function (t) { return t.indexOf("rgb") <= -1 ? e.jqx.hexToRgb(t.substring(1, 3), t.substring(3, 5), t.substring(5, 7)) : t.substring(4, t.length - 1).split(",") }, e.jqx.hslToRgb = function (t) { var i = parseFloat(t[0]), s = parseFloat(t[1]), o = parseFloat(t[2]); if (0 == s) r = g = b = o; else { var a = o < .5 ? o * (1 + s) : o + s - o * s, n = 2 * o - a; r = e.jqx.hueToRgb(n, a, i + 1 / 3), g = e.jqx.hueToRgb(n, a, i), b = e.jqx.hueToRgb(n, a, i - 1 / 3) } return [255 * r, 255 * g, 255 * b] }, e.jqx.hueToRgb = function (e, t, i) { return i < 0 && (i += 1), i > 1 && (i -= 1), i < 1 / 6 ? e + 6 * (t - e) * i : i < .5 ? t : i < 2 / 3 ? e + (t - e) * (2 / 3 - i) * 6 : e }, e.jqx.rgbToHsl = function (e) { var t, i, s = parseFloat(e[0]) / 255, r = parseFloat(e[1]) / 255, o = parseFloat(e[2]) / 255, a = Math.max(s, r, o), n = Math.min(s, r, o), l = (a + n) / 2; if (a == n) t = i = 0; else { var h = a - n; switch (i = l > .5 ? h / (2 - a - n) : h / (a + n), a) { case s: t = (r - o) / h + (r < o ? 6 : 0); break; case r: t = (o - s) / h + 2; break; case o: t = (s - r) / h + 4 } t /= 6 } return [t, i, l] }, e.jqx.swap = function (e, t) { var i = e; e = t, t = i }, e.jqx.getNum = function (t) { if (e.isArray(t)) { for (var i = 0; i < t.length; i++) if (!isNaN(t[i])) return t[i] } else if (isNaN(t)) return 0; return 0 }, e.jqx._ptdist = function (e, t, i, s) { return Math.sqrt((i - e) * (i - e) + (s - t) * (s - t)) }, e.jqx._ptrnd = function (t) { if (!document.createElementNS) return Math.round(t) == t ? t : e.jqx._rnd(t, 1, !1, !0); var i = e.jqx._rnd(t, .5, !1, !0); return .5 != Math.abs(i - Math.round(i)) ? i > t ? i - .5 : i + .5 : i }, e.jqx._rup = function (e) { var t = Math.round(e); return e > t && t++, t }, e.jqx.log = function (e, t) { return Math.log(e) / (t ? Math.log(t) : 1) }, e.jqx._mod = function (e, t) { var i = Math.abs(e > t ? t : e), s = 1; if (0 != i) for (; i * s < 100;) s *= 10; return e *= s, t *= s, e % t / s }, e.jqx._rnd = function (t, i, s, r) { if (isNaN(t)) return t; var o = t - (1 == r ? t % i : e.jqx._mod(t, i)); return t == o ? o : (s ? t > o && (o += i) : o > t && (o -= i), o) }, e.jqx.commonRenderer = { pieSlicePath: function (e, t, i, s, r, o, a) { s || (s = 1); var n = Math.abs(r - o), l = n > 180 ? 1 : 0; n >= 360 && (o = r + 359.99); var h = r * Math.PI * 2 / 360, d = o * Math.PI * 2 / 360, c = e, u = e, p = t, m = t, g = !isNaN(i) && i > 0; if (g && (a = 0), a + i > 0) { if (a > 0) { var f = (n / 2 + r) * Math.PI * 2 / 360; e += a * Math.cos(f), t -= a * Math.sin(f) } if (g) { var v = i; c = e + v * Math.cos(h), p = t - v * Math.sin(h), u = e + v * Math.cos(d), m = t - v * Math.sin(d) } } var x = e + s * Math.cos(h), w = e + s * Math.cos(d), b = t - s * Math.sin(h), _ = t - s * Math.sin(d), y = ""; return g ? (y = "M " + u + "," + m, y += " a" + i + "," + i, y += " 0 " + l + ",1 " + (c - u) + "," + (p - m), y += " L" + x + "," + b, y += " a" + s + "," + s, y += " 0 " + l + ",0 " + (w - x) + "," + (_ - b)) : (y = "M " + w + "," + _, y += " a" + s + "," + s, y += " 0 " + l + ",1 " + (x - w) + "," + (b - _), y += " L" + e + "," + t + " Z"), y }, measureText: function (t, i, s, r, o) { var a = o._getTextParts(t, i, s), n = a.width, l = a.height; 0 == r && (l /= .6); var h = {}; if (isNaN(i) && (i = 0), 0 == i) h = { width: e.jqx._rup(n), height: e.jqx._rup(l) }; else { var d = i * Math.PI * 2 / 360, c = Math.abs(Math.sin(d)), u = Math.abs(Math.cos(d)), p = Math.abs(n * c + l * u), m = Math.abs(n * u + l * c); h = { width: e.jqx._rup(m), height: e.jqx._rup(p) } } return r && (h.textPartsInfo = a), h }, alignTextInRect: function (t, i, s, r, o, a, n, l, h, d) { var c = h * Math.PI * 2 / 360, u = Math.sin(c), p = Math.cos(c), m = o * u, g = o * p; "center" == n || "" == n || "undefined" == n ? t += s / 2 : "right" == n && (t += s), "center" == l || "middle" == l || "" == l || "undefined" == l ? i += r / 2 : "bottom" == l ? i += r - a / 2 : "top" == l && (i += a / 2); var f = "middle"; -1 != (d = d || "").indexOf("top") ? f = "top" : -1 != d.indexOf("bottom") && (f = "bottom"); var v = "center"; return -1 != d.indexOf("left") ? v = "left" : -1 != d.indexOf("right") && (v = "right"), "center" == v ? (t -= g / 2, i -= m / 2) : "right" == v && (t -= g, i -= m), "top" == f ? (t -= a * u, i += a * p) : "middle" == f && (t -= a * u / 2, i += a * p / 2), t = e.jqx._rup(t), i = e.jqx._rup(i), { x: t, y: i } } }, e.jqx.svgRenderer = function () { }, e.jqx.svgRenderer.prototype = { _svgns: "http://www.w3.org/2000/svg", init: function (e) { e.append("<table id=tblChart cellspacing='0' cellpadding='0' border='0' align='left' valign='top'><tr><td colspan=2 id=tdTop></td></tr><tr><td id=tdLeft></td><td><div class='chartContainer' onselectstart='return false;'></div></td></tr></table>"), this.host = e; var t = e.find(".chartContainer"); t[0].style.width = e.width() + "px", t[0].style.height = e.height() + "px"; try { var i = document.createElementNS(this._svgns, "svg"); i.setAttribute("id", "svgChart"), i.setAttribute("version", "1.1"), i.setAttribute("width", "100%"), i.setAttribute("height", "100%"), i.setAttribute("overflow", "hidden"), t[0].appendChild(i), this.canvas = i } catch (e) { return !1 } return this._id = (new Date).getTime(), this.clear(), this._layout(), this._runLayoutFix(), !0 }, refresh: function () { }, _runLayoutFix: function () { this._fixLayout() }, _fixLayout: function () { var t = e(this.canvas).position(), i = parseFloat(t.left) == parseInt(t.left), s = parseFloat(t.top) == parseInt(t.top); if (e.jqx.browser.msie) { for (var i = !0, s = !0, r = this.host, o = 0, a = 0; r && r.position && r[0].parentNode;) { var n = r.position(); o += parseFloat(n.left) - parseInt(n.left), a += parseFloat(n.top) - parseInt(n.top), r = r.parent() } i = parseFloat(o) == parseInt(o), s = parseFloat(a) == parseInt(a) } i || (this.host.find("#tdLeft")[0].style.width = "0.5px"), s || (this.host.find("#tdTop")[0].style.height = "0.5px") }, _layout: function () { e(this.canvas).offset(); var t = this.host.find(".chartContainer"); this._width = Math.max(e.jqx._rup(this.host.width()) - 1, 0), this._height = Math.max(e.jqx._rup(this.host.height()) - 1, 0), t[0].style.width = this._width, t[0].style.height = this._height, this._fixLayout() }, getRect: function () { return { x: 0, y: 0, width: this._width, height: this._height } }, getContainer: function () { return this.host.find(".chartContainer") }, clear: function () { for (; this.canvas.childElementCount > 0;) this.removeElement(this.canvas.firstElementChild); this._defaultParent = void 0, this._defs = document.createElementNS(this._svgns, "defs"), this._gradients = {}, this.canvas.appendChild(this._defs) }, removeElement: function (e) { if (void 0 != e) { this.removeHandler(e); try { for (; e.firstChild;) this.removeElement(e.firstChild); e.parentNode ? e.parentNode.removeChild(e) : this.canvas.removeChild(e) } catch (e) { } } }, _openGroups: [], beginGroup: function () { var e = this._activeParent(), t = document.createElementNS(this._svgns, "g"); return e.appendChild(t), this._openGroups.push(t), t }, endGroup: function () { 0 != this._openGroups.length && this._openGroups.pop() }, _activeParent: function () { return 0 == this._openGroups.length ? this.canvas : this._openGroups[this._openGroups.length - 1] }, createClipRect: function (e) { var t = document.createElementNS(this._svgns, "clipPath"), i = document.createElementNS(this._svgns, "rect"); return this.attr(i, { x: e.x, y: e.y, width: e.width, height: e.height, fill: "none" }), this._clipId = this._clipId || 0, t.id = "cl" + this._id + "_" + (++this._clipId).toString(), t.appendChild(i), this._defs.appendChild(t), t }, setClip: function (e, t) { return this.attr(e, { "clip-path": "url(#" + t.id + ")" }) }, _clipId: 0, addHandler: function (t, i, s) { e(t).on ? e(t).on(i, s) : e(t).bind(i, s) }, removeHandler: function (t, i, s) { e(t).off ? e(t).off(i, s) : e(t).unbind(i, s) }, on: function (e, t, i) { this.addHandler(e, t, i) }, off: function (e, t, i) { this.removeHandler(e, t, i) }, shape: function (e, t) { var i = document.createElementNS(this._svgns, e); if (i) { for (var s in t) i.setAttribute(s, t[s]); return this._activeParent().appendChild(i), i } }, _getTextParts: function (t, i, s) { var r = { width: 0, height: 0, parts: [] }, o = t.toString().split("<br>"), a = this._activeParent(), n = document.createElementNS(this._svgns, "text"); this.attr(n, s); for (var l = 0; l < o.length; l++) { var h = o[l], d = n.ownerDocument.createTextNode(h); n.appendChild(d), a.appendChild(n); var c; try { c = n.getBBox() } catch (e) { } var u = e.jqx._rup(c.width), p = e.jqx._rup(.6 * c.height); n.removeChild(d), r.width = Math.max(r.width, u), r.height += p + (l > 0 ? 4 : 0), r.parts.push({ width: u, height: p, text: h }) } return a.removeChild(n), r }, _measureText: function (t, i, s, r) { return e.jqx.commonRenderer.measureText(t, i, s, r, this) }, measureText: function (e, t, i) { return this._measureText(e, t, i, !1) }, text: function (t, i, s, r, o, a, n, l, h, d, c) { var u, p = this._measureText(t, a, n, !0).textPartsInfo, m = p.parts; if (h || (h = "center"), d || (d = "center"), (m.length > 1 || l) && (u = this.beginGroup()), l) { var g = this.createClipRect({ x: e.jqx._rup(i) - 1, y: e.jqx._rup(s) - 1, width: e.jqx._rup(r) + 2, height: e.jqx._rup(o) + 2 }); this.setClip(u, g) } var f = this._activeParent(), v = 0, x = 0; v = p.width, x = p.height, (isNaN(r) || r <= 0) && (r = v), (isNaN(o) || o <= 0) && (o = x); var w = r || 0, b = o || 0; if (!a || 0 == a) { s += x, "center" == d || "middle" == d ? s += (b - x) / 2 : "bottom" == d && (s += b - x), r || (r = v), o || (o = x); for (var f = this._activeParent(), _ = 0, y = m.length - 1; y >= 0; y--) { var j = document.createElementNS(this._svgns, "text"); this.attr(j, n), this.attr(j, { cursor: "default" }); P = j.ownerDocument.createTextNode(m[y].text); j.appendChild(P); var q = i, T = m[y].width, C = m[y].height; "center" == h ? q += (w - T) / 2 : "right" == h && (q += w - T), this.attr(j, { x: e.jqx._rup(q), y: e.jqx._rup(s + _), width: e.jqx._rup(T), height: e.jqx._rup(C) }), f.appendChild(j), _ -= m[y].height + 4 } return u ? (this.endGroup(), u) : j } var S = e.jqx.commonRenderer.alignTextInRect(i, s, r, o, v, x, h, d, a, c); i = S.x, s = S.y; var k = this.shape("g", { transform: "translate(" + i + "," + s + ")" }), I = this.shape("g", { transform: "rotate(" + a + ")" }); k.appendChild(I); for (var _ = 0, y = m.length - 1; y >= 0; y--) { var D = document.createElementNS(this._svgns, "text"); this.attr(D, n), this.attr(D, { cursor: "default" }); var P = D.ownerDocument.createTextNode(m[y].text); D.appendChild(P); var q = 0, T = m[y].width, C = m[y].height; "center" == h ? q += (p.width - T) / 2 : "right" == h && (q += p.width - T), this.attr(D, { x: e.jqx._rup(q), y: e.jqx._rup(_), width: e.jqx._rup(T), height: e.jqx._rup(C) }), I.appendChild(D), _ -= C + 4 } return f.appendChild(k), u && this.endGroup(), k }, line: function (e, t, i, s, r) { var o = this.shape("line", { x1: e, y1: t, x2: i, y2: s }); return this.attr(o, r), o }, path: function (e, t) { var i = this.shape("path"); return i.setAttribute("d", e), t && this.attr(i, t), i }, rect: function (t, i, s, r, o) { t = e.jqx._ptrnd(t), i = e.jqx._ptrnd(i), s = e.jqx._rup(s), r = e.jqx._rup(r); var a = this.shape("rect", { x: t, y: i, width: s, height: r }); return o && this.attr(a, o), a }, circle: function (e, t, i, s) { var r = this.shape("circle", { cx: e, cy: t, r: i }); return s && this.attr(r, s), r }, pieSlicePath: function (t, i, s, r, o, a, n) { return e.jqx.commonRenderer.pieSlicePath(t, i, s, r, o, a, n) }, pieslice: function (e, t, i, s, r, o, a, n) { var l = this.pieSlicePath(e, t, i, s, r, o, a), h = this.shape("path"); return h.setAttribute("d", l), n && this.attr(h, n), h }, attr: function (e, t) { if (e && t) for (var i in t) "textContent" == i ? e.textContent = t[i] : e.setAttribute(i, t[i]) }, getAttr: function (e, t) { return e.getAttribute(t) }, _gradients: {}, _toLinearGradient: function (t, i, s) { var r = "grd" + this._id + t.replace("#", "") + (i ? "v" : "h"), o = "url(#" + r + ")"; if (this._gradients[o]) return o; var a = document.createElementNS(this._svgns, "linearGradient"); this.attr(a, { x1: "0%", y1: "0%", x2: i ? "0%" : "100%", y2: i ? "100%" : "0%", id: r }); for (var n in s) { var l = document.createElementNS(this._svgns, "stop"), h = "stop-color:" + e.jqx.adjustColor(t, s[n][1]); this.attr(l, { offset: s[n][0] + "%", style: h }), a.appendChild(l) } return this._defs.appendChild(a), this._gradients[o] = !0, o }, _toRadialGradient: function (t, i, s) { var r = "grd" + this._id + t.replace("#", "") + "r" + (void 0 != s ? s.key : ""), o = "url(#" + r + ")"; if (this._gradients[o]) return o; var a = document.createElementNS(this._svgns, "radialGradient"); void 0 == s ? this.attr(a, { cx: "50%", cy: "50%", r: "100%", fx: "50%", fy: "50%", id: r }) : this.attr(a, { cx: s.x, cy: s.y, r: s.outerRadius, id: r, gradientUnits: "userSpaceOnUse" }); for (var n in i) { var l = document.createElementNS(this._svgns, "stop"), h = "stop-color:" + e.jqx.adjustColor(t, i[n][1]); this.attr(l, { offset: i[n][0] + "%", style: h }), a.appendChild(l) } return this._defs.appendChild(a), this._gradients[o] = !0, o } }, e.jqx.vmlRenderer = function () { }, e.jqx.vmlRenderer.prototype = { init: function (t) { t.append("<div class='chartContainer' style=\"position:relative;overflow:hidden;\"><div>"), this.host = t; var i = t.find(".chartContainer"); i[0].style.width = t.width() + "px", i[0].style.height = t.height() + "px"; var s = !0; try { for (var r = 0; r < document.namespaces.length; r++) if ("v" == document.namespaces[r].name && "urn:schemas-microsoft-com:vml" == document.namespaces[r].urn) { s = !1; break } } catch (e) { return !1 } return e.jqx.browser.msie && parseInt(e.jqx.browser.version) < 9 && document.childNodes && document.childNodes.length > 0 && document.childNodes[0].data && -1 != document.childNodes[0].data.indexOf("DOCTYPE") ? (s && document.namespaces.add("v", "urn:schemas-microsoft-com:vml"), this._ie8mode = !0) : s && (document.namespaces.add("v", "urn:schemas-microsoft-com:vml"), document.createStyleSheet().cssText = "v\\:* { behavior: url(#default#VML); display: inline-block; }"), this.canvas = i[0], this._width = Math.max(e.jqx._rup(i.width()), 0), this._height = Math.max(e.jqx._rup(i.height()), 0), i[0].style.width = this._width + 2, i[0].style.height = this._height + 2, this._id = (new Date).getTime(), this.clear(), !0 }, refresh: function () { }, getRect: function () { return { x: 0, y: 0, width: this._width, height: this._height } }, getContainer: function () { return this.host.find(".chartContainer") }, clear: function () { for (; this.canvas.childElementCount > 0;) this.removeHandler(this.canvas.firstElementChild), this.canvas.removeChild(this.canvas.firstElementChild); this._gradients = {}, this._defaultParent = void 0 }, removeElement: function (e) { null != e && (this.removeHandler(e), e.parentNode.removeChild(e)) }, _openGroups: [], beginGroup: function () { var e = this._activeParent(), t = document.createElement("v:group"); return t.style.position = "absolute", t.coordorigin = "0,0", t.coordsize = this._width + "," + this._height, t.style.left = 0, t.style.top = 0, t.style.width = this._width, t.style.height = this._height, e.appendChild(t), this._openGroups.push(t), t }, endGroup: function () { 0 != this._openGroups.length && this._openGroups.pop() }, _activeParent: function () { return 0 == this._openGroups.length ? this.canvas : this._openGroups[this._openGroups.length - 1] }, createClipRect: function (e) { var t = document.createElement("div"); return t.style.height = e.height + 1 + "px", t.style.width = e.width + 1 + "px", t.style.position = "absolute", t.style.left = e.x + "px", t.style.top = e.y + "px", t.style.overflow = "hidden", this._clipId = this._clipId || 0, t.id = "cl" + this._id + "_" + (++this._clipId).toString(), this._activeParent().appendChild(t), t }, setClip: function (e, t) { }, _clipId: 0, addHandler: function (t, i, s) { e(t).on ? e(t).on(i, s) : e(t).bind(i, s) }, removeHandler: function (t, i, s) { e(t).off ? e(t).off(i, s) : e(t).unbind(i, s) }, on: function (e, t, i) { this.addHandler(e, t, i) }, off: function (e, t, i) { this.removeHandler(e, t, i) }, _getTextParts: function (t, i, s) { var r = { width: 0, height: 0, parts: [] }, o = t.toString().split("<br>"), a = this._activeParent(), n = document.createElement("v:textbox"); this.attr(n, s), a.appendChild(n); for (var l = 0; l < o.length; l++) { var h = o[l], d = document.createElement("span"); d.appendChild(document.createTextNode(h)), n.appendChild(d), s && s.class && (d.className = s.class); var c = e(n), u = e.jqx._rup(c.width()), p = e.jqx._rup(.6 * c.height()); if (0 == p && e.jqx.browser.msie && parseInt(e.jqx.browser.version) < 9) { var m = c.css("font-size"); m && (p = parseInt(m), isNaN(p) && (p = 0)) } n.removeChild(d), r.width = Math.max(r.width, u), r.height += p + (l > 0 ? 2 : 0), r.parts.push({ width: u, height: p, text: h }) } return a.removeChild(n), r }, _measureText: function (t, i, s, r) { return i = Math.abs(i) > 45 ? 90 : 0, e.jqx.commonRenderer.measureText(t, i, s, r, this) }, measureText: function (e, t, i) { return this._measureText(e, t, i, !1) }, text: function (t, i, s, r, o, a, n, l, h, d) { var c; n && n.stroke && (c = n.stroke), void 0 == c && (c = "black"); var u = this._measureText(t, a, n, !0), p = u.textPartsInfo.parts, m = u.width, g = u.height; (isNaN(r) || 0 == r) && (r = m), (isNaN(o) || 0 == o) && (o = g); var f; if (h || (h = "center"), d || (d = "center"), (p.length > 0 || l) && (f = this.beginGroup()), l) { var v = this.createClipRect({ x: e.jqx._rup(i), y: e.jqx._rup(s), width: e.jqx._rup(r), height: e.jqx._rup(o) }); this.setClip(f, v) } var x = this._activeParent(), w = r || 0, b = o || 0; a = Math.abs(a) > 45 ? 90 : 0; var _ = 0, y = 0; "center" == h ? _ += (w - m) / 2 : "right" == h && (_ += w - m), "center" == d ? y = (b - g) / 2 : "bottom" == d && (y = b - g), 0 == a ? (s += g + y, i += _) : (i += m + _, s += y); for (var j, q = 0, T = p.length - 1; T >= 0; T--) { var C = p[T], S = (m - C.width) / 2; 0 == a && "left" == h ? S = 0 : 0 == a && "right" == h ? S = m - C.width : 90 == a && (S = (g - C.width) / 2); var k = q - C.height; y = 90 == a ? S : k, _ = 90 == a ? k : S, (j = document.createElement("v:textbox")).style.position = "absolute", j.style.left = e.jqx._rup(i + _), j.style.top = e.jqx._rup(s + y), j.style.width = e.jqx._rup(C.width), j.style.height = e.jqx._rup(C.height), 90 == a && (j.style.filter = "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)"); var I = document.createElement("span"); I.appendChild(document.createTextNode(C.text)), n && n.class && (I.className = n.class), j.appendChild(I), x.appendChild(j), q -= C.height + (T > 0 ? 2 : 0) } return f ? (this.endGroup(), x) : j }, shape: function (e, t) { var i = document.createElement(this._createElementMarkup(e)); if (i) { for (var s in t) i.setAttribute(s, t[s]); return this._activeParent().appendChild(i), i } }, line: function (e, t, i, s, r) { var o = "M " + e + "," + t + " L " + i + "," + s + " X E", a = this.path(o); return this.attr(a, r), a }, _createElementMarkup: function (e) { var t = "<v:" + e + ' style=""></v:' + e + ">"; return this._ie8mode && (t = t.replace('style=""', 'style="behavior: url(#default#VML);"')), t }, path: function (e, t) { var i = document.createElement(this._createElementMarkup("shape")); return i.style.position = "absolute", i.coordsize = this._width + " " + this._height, i.coordorigin = "0 0", i.style.width = parseInt(this._width), i.style.height = parseInt(this._height), i.style.left = "0px", i.style.top = "0px", i.setAttribute("path", e), this._activeParent().appendChild(i), t && this.attr(i, t), i }, rect: function (t, i, s, r, o) { t = e.jqx._ptrnd(t), i = e.jqx._ptrnd(i), s = e.jqx._rup(s), r = e.jqx._rup(r); var a = this.shape("rect", o); return a.style.position = "absolute", a.style.left = t, a.style.top = i, a.style.width = s, a.style.height = r, a.strokeweight = 0, o && this.attr(a, o), a }, circle: function (t, i, s, r) { var o = this.shape("oval"); return t = e.jqx._ptrnd(t - s), i = e.jqx._ptrnd(i - s), s = e.jqx._rup(s), o.style.position = "absolute", o.style.left = t, o.style.top = i, o.style.width = 2 * s, o.style.height = 2 * s, r && this.attr(o, r), o }, updateCircle: function (t, i, s, r) { void 0 == i && (i = parseFloat(t.style.left) + parseFloat(t.style.width) / 2), void 0 == s && (s = parseFloat(t.style.top) + parseFloat(t.style.height) / 2), void 0 == r && (r = parseFloat(t.width) / 2), i = e.jqx._ptrnd(i - r), s = e.jqx._ptrnd(s - r), r = e.jqx._rup(r), t.style.left = i, t.style.top = s, t.style.width = 2 * r, t.style.height = 2 * r }, pieSlicePath: function (t, i, s, r, o, a, n) { r || (r = 1); var l = Math.abs(o - a); l > 360 && (o = 0, a = 360); var h = o * Math.PI * 2 / 360, d = a * Math.PI * 2 / 360, c = t, u = i, p = !isNaN(s) && s > 0; if (p && (n = 0), n > 0) { var m = (l / 2 + o) * Math.PI * 2 / 360; t += n * Math.cos(m), i -= n * Math.sin(m) } if (p) { var g = s; c = e.jqx._ptrnd(t + g * Math.cos(h)), u = e.jqx._ptrnd(i - g * Math.sin(h)), e.jqx._ptrnd(t + g * Math.cos(d)), e.jqx._ptrnd(i - g * Math.sin(d)) } e.jqx._ptrnd(t + r * Math.cos(h)); var f = e.jqx._ptrnd(t + r * Math.cos(d)), v = (e.jqx._ptrnd(i - r * Math.sin(h)), e.jqx._ptrnd(i - r * Math.sin(d))); r = e.jqx._ptrnd(r), s = e.jqx._ptrnd(s), t = e.jqx._ptrnd(t), i = e.jqx._ptrnd(i); var x = Math.round(65535 * o), w = Math.round(65536 * (a - o)); s < 0 && (s = 1); var b = ""; return p ? (b = "M" + c + " " + u, b += " AE " + t + " " + i + " " + s + " " + s + " " + x + " " + w, b += " L " + f + " " + v, x = Math.round(65535 * (o - a)), b += " AE " + t + " " + i + " " + r + " " + r + " " + (w = Math.round(65536 * a)) + " " + x, b += " L " + c + " " + u) : (b = "M" + t + " " + i, b += " AE " + t + " " + i + " " + r + " " + r + " " + x + " " + w), b += " X E" }, pieslice: function (e, t, i, s, r, o, a, n) { var l = this.pieSlicePath(e, t, i, s, r, o, a), h = this.path(l, n); return n && this.attr(h, n), h }, _keymap: [{ svg: "fill", vml: "fillcolor" }, { svg: "stroke", vml: "strokecolor" }, { svg: "stroke-width", vml: "strokeweight" }, { svg: "stroke-dasharray", vml: "dashstyle" }, { svg: "fill-opacity", vml: "fillopacity" }, { svg: "stroke-opacity", vml: "strokeopacity" }, { svg: "opacity", vml: "opacity" }, { svg: "cx", vml: "style.left" }, { svg: "cy", vml: "style.top" }, { svg: "height", vml: "style.height" }, { svg: "width", vml: "style.width" }, { svg: "x", vml: "style.left" }, { svg: "y", vml: "style.top" }, { svg: "d", vml: "v" }, { svg: "display", vml: "style.display" }], _translateParam: function (e) { for (var t in this._keymap) if (this._keymap[t].svg == e) return this._keymap[t].vml; return e }, attr: function (e, t) { if (e && t) for (var i in t) { var s = this._translateParam(i); "fillcolor" == s && -1 != t[i].indexOf("grd") ? e.type = t[i] : "fillcolor" == s && "transparent" == t[i] ? (e.style.filter = "alpha(opacity=0)", e["-ms-filter"] = "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)") : "opacity" == s || "fillopacity" == s ? e.fill && (e.fill.opacity = t[i]) : "textContent" == s ? e.children[0].innerText = t[i] : "dashstyle" == s ? e.dashstyle = t[i].replace(",", " ") : -1 == s.indexOf("style.") ? e[s] = t[i] : e.style[s.replace("style.", "")] = t[i] } }, getAttr: function (e, t) { var i = this._translateParam(t); return "opacity" == i || "fillopacity" == i ? e.fill ? e.fill.opacity : 1 : -1 == i.indexOf("style.") ? e[i] : e.style[i.replace("style.", "")] }, _gradients: {}, _toRadialGradient: function (e, t, i) { return e }, _toLinearGradient: function (t, i, s) { if (this._ie8mode) return t; var r = "grd" + t.replace("#", "") + (i ? "v" : "h"), o = "#" + r; if (this._gradients[o]) return o; var a = document.createElement(this._createElementMarkup("fill")); a.type = "gradient", a.method = "linear", a.angle = i ? 0 : 90; var n = ""; for (var l in s) l > 0 && (n += ", "), n += s[l][0] + "% " + e.jqx.adjustColor(t, s[l][1]); a.colors = n; var h = document.createElement(this._createElementMarkup("shapetype")); return h.appendChild(a), h.id = r, this.canvas.appendChild(h), o } }, e.jqx.HTML5Renderer = function () { }, e.jqx.ptrnd = function (e) { if (.5 == Math.abs(Math.round(e) - e)) return e; var t = Math.round(e); return t < e && (t -= 1), t + .5 }, e.jqx.HTML5Renderer.prototype = { _elements: {}, init: function (e) { try { this.host = e, this.host.append("<canvas id='__jqxCanvasWrap' style='width:100%; height: 100%;'/>"), this.canvas = e.find("#__jqxCanvasWrap"), this.canvas[0].width = e.width(), this.canvas[0].height = e.height(), this.ctx = this.canvas[0].getContext("2d") } catch (e) { return !1 } return !0 }, getContainer: function () { if (this.canvas && 1 == this.canvas.length) return this.canvas }, getRect: function () { return { x: 0, y: 0, width: this.canvas[0].width - 1, height: this.canvas[0].height - 1 } }, beginGroup: function () { }, endGroup: function () { }, setClip: function () { }, createClipRect: function (e) { }, addHandler: function (e, t, i) { }, removeHandler: function (e, t, i) { }, on: function (e, t, i) { this.addHandler(e, t, i) }, off: function (e, t, i) { this.removeHandler(e, t, i) }, clear: function () { this._elements = {}, this._maxId = 0, this._renderers._gradients = {}, this._gradientId = 0 }, removeElement: function (e) { void 0 != e && this._elements[e.id] && delete this._elements[e.id] }, _maxId: 0, shape: function (e, t) { var i = { type: e, id: this._maxId++ }; for (var s in t) i[s] = t[s]; return this._elements[i.id] = i, i }, attr: function (e, t) { for (var i in t) e[i] = t[i] }, rect: function (e, t, i, s, r) { if (isNaN(e)) throw 'Invalid value for "x"'; if (isNaN(t)) throw 'Invalid value for "y"'; if (isNaN(i)) throw 'Invalid value for "width"'; if (isNaN(s)) throw 'Invalid value for "height"'; var o = this.shape("rect", { x: e, y: t, width: i, height: s }); return r && this.attr(o, r), o }, path: function (e, t) { var i = this.shape("path", t); return this.attr(i, { d: e }), i }, line: function (e, t, i, s, r) { return this.path("M " + e + "," + t + " L " + i + "," + s, r) }, circle: function (e, t, i, s) { var r = this.shape("circle", { x: e, y: t, r: i }); return s && this.attr(r, s), r }, pieSlicePath: function (t, i, s, r, o, a, n) { return e.jqx.commonRenderer.pieSlicePath(t, i, s, r, o, a, n) }, pieslice: function (e, t, i, s, r, o, a, n) { var l = this.path(this.pieSlicePath(e, t, i, s, r, o, a), n); return this.attr(l, { x: e, y: t, innerRadius: i, outerRadius: s, angleFrom: r, angleTo: o }), l }, _getCSSStyle: function (e) { var t = document.styleSheets; try { for (var i = 0; i < t.length; i++) for (var s = 0; t[i].cssRules && s < t[i].cssRules.length; s++) if (-1 != t[i].cssRules[s].selectorText.indexOf(e)) return t[i].cssRules[s].style } catch (e) { } return {} }, _getTextParts: function (t, i, s) { var r = "Arial", o = "10pt", a = ""; if (s && s.class) { var n = this._getCSSStyle(s.class); n.fontSize && (o = n.fontSize), n.fontFamily && (r = n.fontFamily), n.fontWeight && (a = n.fontWeight) } this.ctx.font = a + " " + o + " " + r; for (var l = { width: 0, height: 0, parts: [] }, h = t.toString().split("<br>"), d = 0; d < h.length; d++) { var c = h[d], u = this.ctx.measureText(c).width, p = document.createElement("span"); p.font = this.ctx.font, p.textContent = c, document.body.appendChild(p); var m = .6 * p.offsetHeight; document.body.removeChild(p), l.width = Math.max(l.width, e.jqx._rup(u)), l.height += m + (d > 0 ? 4 : 0), l.parts.push({ width: u, height: m, text: c }) } return l }, _measureText: function (t, i, s, r) { return e.jqx.commonRenderer.measureText(t, i, s, r, this) }, measureText: function (e, t, i) { return this._measureText(e, t, i, !1) }, text: function (e, t, i, s, r, o, a, n, l, h, d) { var c = this.shape("text", { text: e, x: t, y: i, width: s, height: r, angle: o, clip: n, halign: l, valign: h, rotateAround: d }); if (a && this.attr(c, a), c.fontFamily = "Arial", c.fontSize = "10pt", c.fontWeight = "", c.color = "#000000", a && a.class) { var u = this._getCSSStyle(a.class); c.fontFamily = u.fontFamily || c.fontFamily, c.fontSize = u.fontSize || c.fontSize, c.fontWeight = u.fontWeight || c.fontWeight, c.color = u.color || c.color } var p = this._measureText(e, 0, a, !0); return this.attr(c, { textPartsInfo: p.textPartsInfo, textWidth: p.width, textHeight: p.height }), (s <= 0 || isNaN(s)) && this.attr(c, { width: p.width }), (r <= 0 || isNaN(r)) && this.attr(c, { height: p.height }), c }, _toLinearGradient: function (t, i, s) { if (this._renderers._gradients[t]) return t; for (var r = [], o = 0; o < s.length; o++) r.push({ percent: s[o][0] / 100, color: e.jqx.adjustColor(t, s[o][1]) }); var a = "gr" + this._gradientId++; return this.createGradient(a, i ? "vertical" : "horizontal", r), a }, _toRadialGradient: function (t, i) { if (this._renderers._gradients[t]) return t; for (var s = [], r = 0; r < i.length; r++) s.push({ percent: i[r][0] / 100, color: e.jqx.adjustColor(t, i[r][1]) }); var o = "gr" + this._gradientId++; return this.createGradient(o, "radial", s), o }, _gradientId: 0, createGradient: function (e, t, i) { this._renderers.createGradient(e, t, i) }, _renderers: { _gradients: {}, createGradient: function (e, t, i) { this._gradients[e] = { orientation: t, colorStops: i } }, setStroke: function (e, t) { e.strokeStyle = t.stroke || "transparent", e.lineWidth = t["stroke-width"] || 1, t["fill-opacity"] ? e.globalAlpha = t["fill-opacity"] : e.globalAlpha = 1, e.setLineDash && (t["stroke-dasharray"] ? e.setLineDash(t["stroke-dasharray"].split(",")) : e.setLineDash([])) }, setFillStyle: function (t, i) { if (t.fillStyle = "transparent", i["fill-opacity"] ? t.globalAlpha = i["fill-opacity"] : t.globalAlpha = 1, i.fill && -1 == i.fill.indexOf("#") && this._gradients[i.fill]) { var s, r = "horizontal" != this._gradients[i.fill].orientation, o = "radial" == this._gradients[i.fill].orientation, a = e.jqx.ptrnd(i.x), n = e.jqx.ptrnd(i.y), l = e.jqx.ptrnd(i.x + (r ? 0 : i.width)), h = e.jqx.ptrnd(i.y + (r ? i.height : 0)); "circle" != i.type && "path" != i.type || !o || (x = e.jqx.ptrnd(i.x), y = e.jqx.ptrnd(i.y), r1 = i.innerRadius || 0, r2 = i.outerRadius || i.r || 0, s = t.createRadialGradient(x, y, r1, x, y, r2)), o || ((isNaN(a) || isNaN(l) || isNaN(n) || isNaN(h)) && (a = 0, n = 0, l = r ? 0 : t.canvas.width, h = r ? t.canvas.height : 0), s = t.createLinearGradient(a, n, l, h)); for (var d = this._gradients[i.fill].colorStops, c = 0; c < d.length; c++) s.addColorStop(d[c].percent, d[c].color); t.fillStyle = s } else i.fill && (t.fillStyle = i.fill) }, rect: function (t, i) { 0 != i.width && 0 != i.height && (t.fillRect(e.jqx.ptrnd(i.x), e.jqx.ptrnd(i.y), i.width, i.height), t.strokeRect(e.jqx.ptrnd(i.x), e.jqx.ptrnd(i.y), i.width, i.height)) }, circle: function (t, i) { 0 != i.r && (t.beginPath(), t.arc(e.jqx.ptrnd(i.x), e.jqx.ptrnd(i.y), i.r, 0, 2 * Math.PI, !1), t.closePath(), t.fill(), t.stroke()) }, _parsePoint: function (e) { return { x: this._parseNumber(e), y: this._parseNumber(e) } }, _parseNumber: function (e) { for (var t = !1, i = this._pos; i < e.length; i++) if (e[i] >= "0" && e[i] <= "9" || "." == e[i] || "-" == e[i] && !t) t = !0; else { if (t || " " != e[i] && "," != e[i]) break; this._pos++ } var s = parseFloat(e.substring(this._pos, i)); if (!isNaN(s)) return this._pos = i, s }, _pos: 0, _cmds: "mlcaz", _lastCmd: "", _isRelativeCmd: function (t) { return e.jqx.string.contains(this._cmds, t) }, _parseCmd: function (t) { for (var i = this._pos; i < t.length; i++) { if (e.jqx.string.containsIgnoreCase(this._cmds, t[i])) return this._pos = i + 1, this._lastCmd = t[i], this._lastCmd; if (" " != t[i]) { if (t[i] >= "0" && t[i] <= "9") { if (this._pos = i, "" == this._lastCmd) break; return this._lastCmd } } else this._pos++ } }, _toAbsolutePoint: function (e) { return { x: this._currentPoint.x + e.x, y: this._currentPoint.y + e.y } }, _currentPoint: { x: 0, y: 0 }, path: function (e, t) { var i = t.d; this._pos = 0, this._lastCmd = ""; var s = void 0; this._currentPoint = { x: 0, y: 0 }, e.beginPath(); for (; this._pos < i.length;) { var r = this._parseCmd(i); if (void 0 == r) break; if ("M" != r && "m" != r) if ("L" != r && "l" != r) if ("A" != r && "a" != r) if ("Z" != r && "z" != r || void 0 == s) if ("C" != r && "c" != r); else { var o = this._parsePoint(i), a = this._parsePoint(i), n = this._parsePoint(i); e.bezierCurveTo(o.x, o.y, a.x, a.y, n.x, n.y), this._currentPoint = n } else e.lineTo(s.x, s.y), this._currentPoint = s; else { var l = this._parseNumber(i), h = this._parseNumber(i), d = this._parseNumber(i) * (Math.PI / 180), c = this._parseNumber(i), u = this._parseNumber(i), p = this._parsePoint(i); if (this._isRelativeCmd(r) && (p = this._toAbsolutePoint(p)), 0 == l || 0 == h) continue; var m = this._currentPoint, g = { x: Math.cos(d) * (m.x - p.x) / 2 + Math.sin(d) * (m.y - p.y) / 2, y: -Math.sin(d) * (m.x - p.x) / 2 + Math.cos(d) * (m.y - p.y) / 2 }, f = Math.pow(g.x, 2) / Math.pow(l, 2) + Math.pow(g.y, 2) / Math.pow(h, 2); f > 1 && (l *= Math.sqrt(f), h *= Math.sqrt(f)); var v = (c == u ? -1 : 1) * Math.sqrt((Math.pow(l, 2) * Math.pow(h, 2) - Math.pow(l, 2) * Math.pow(g.y, 2) - Math.pow(h, 2) * Math.pow(g.x, 2)) / (Math.pow(l, 2) * Math.pow(g.y, 2) + Math.pow(h, 2) * Math.pow(g.x, 2))); isNaN(v) && (v = 0); var x = { x: v * l * g.y / h, y: v * -h * g.x / l }, w = { x: (m.x + p.x) / 2 + Math.cos(d) * x.x - Math.sin(d) * x.y, y: (m.y + p.y) / 2 + Math.sin(d) * x.x + Math.cos(d) * x.y }, b = function (e) { return Math.sqrt(Math.pow(e[0], 2) + Math.pow(e[1], 2)) }, _ = function (e, t) { return (e[0] * t[0] + e[1] * t[1]) / (b(e) * b(t)) }, y = function (e, t) { return (e[0] * t[1] < e[1] * t[0] ? -1 : 1) * Math.acos(_(e, t)) }, j = y([1, 0], [(g.x - x.x) / l, (g.y - x.y) / h]), q = [(g.x - x.x) / l, (g.y - x.y) / h], T = [(-g.x - x.x) / l, (-g.y - x.y) / h], C = y(q, T); _(q, T) <= -1 && (C = Math.PI), _(q, T) >= 1 && (C = 0), 0 == u && C > 0 && (C -= 2 * Math.PI), 1 == u && C < 0 && (C += 2 * Math.PI); var _ = l > h ? l : h, S = l > h ? 1 : l / h, k = l > h ? h / l : 1; e.translate(w.x, w.y), e.rotate(d), e.scale(S, k), e.arc(0, 0, _, j, j + C, 1 - u), e.scale(1 / S, 1 / k), e.rotate(-d), e.translate(-w.x, -w.y) } else { var I = this._parsePoint(i); if (void 0 == I) break; e.lineTo(I.x, I.y), this._currentPoint = I } else { if (void 0 == (I = this._parsePoint(i))) break; e.moveTo(I.x, I.y), this._currentPoint = I, void 0 == s && (s = I) } } e.fill(), e.stroke(), e.closePath() }, text: function (t, i) { var s = e.jqx.ptrnd(i.x), r = e.jqx.ptrnd(i.y), o = e.jqx.ptrnd(i.width), a = e.jqx.ptrnd(i.height), n = i.halign, l = i.valign, h = i.angle, d = i.rotateAround, c = i.textPartsInfo, u = c.parts, p = i.clip; void 0 == p && (p = !0), t.save(), n || (n = "center"), l || (l = "center"), p && (t.rect(s, r, o, a), t.clip()); var m = i.textWidth, g = i.textHeight, f = o || 0, v = a || 0; if (t.fillStyle = i.color, t.font = i.fontWeight + " " + i.fontSize + " " + i.fontFamily, h && 0 != h) { var x = e.jqx.commonRenderer.alignTextInRect(s, r, o, a, m, g, n, l, h, d); s = x.x, r = x.y; var w = h * Math.PI * 2 / 360; t.translate(s, r), t.rotate(w); for (var b = 0, _ = c.width, y = u.length - 1; y >= 0; y--) { q = 0; "center" == n ? q += (_ - u[y].width) / 2 : "right" == n && (q += _ - u[y].width), t.fillText(u[y].text, q, b), b -= u[y].height + 4 } t.restore() } else { r += g, "center" == l || "middle" == l ? r += (v - g) / 2 : "bottom" == l && (r += v - g), o || (o = m), a || (a = g); for (var b = 0, y = u.length - 1; y >= 0; y--) { var j = u[y], q = s, T = u[y].width; u[y].height; "center" == n ? q += (f - T) / 2 : "right" == n && (q += f - T), t.fillText(j.text, q, r + b), b -= j.height + (y > 0 ? 4 : 0) } t.restore() } } }, refresh: function () { this.ctx.clearRect(0, 0, this.canvas[0].width, this.canvas[0].height); for (var e in this._elements) { var t = this._elements[e]; this._renderers.setFillStyle(this.ctx, t), this._renderers.setStroke(this.ctx, t), this._renderers[this._elements[e].type](this.ctx, t) } } }, e.jqx.createRenderer = function (t, i) { var s = t, r = s.renderer = null; if (document.createElementNS && "HTML5" != s.renderEngine && "VML" != s.renderEngine && !(r = new e.jqx.svgRenderer).init(i)) { if ("SVG" == s.renderEngine) throw "Your browser does not support SVG"; return null } if (null == r && "HTML5" != s.renderEngine) { if (!(r = new e.jqx.vmlRenderer).init(i)) { if ("VML" == s.renderEngine) throw "Your browser does not support VML"; return null } s._isVML = !0 } if (null == r && ("HTML5" == s.renderEngine || void 0 == s.renderEngine) && !(r = new e.jqx.HTML5Renderer).init(i)) throw "Your browser does not support HTML5 Canvas"; return s.renderer = r, r }, e.jqx._widgetToImage = function (t, i, s, r, o) { var a = t; if (!a) return !1; void 0 != s && "" != s || (s = "image." + i); var n = a.renderEngine, l = a.enableAnimations; if (a.enableAnimations = !1, a.renderEngine = "HTML5", a.renderEngine != n) try { a.refresh() } catch (e) { return a.renderEngine = n, a.refresh(), a.enableAnimations = l, !1 } var h = a.renderer.getContainer()[0], d = e.jqx.exportImage(h, i, s, r, o); return a.renderEngine != n && (a.renderEngine = n, a.refresh(), a.enableAnimations = l), d }, e.jqx.exportImage = function (t, i, s, r, o) { if (!t) return !1; if (void 0 != s && "" != s || (s = "image." + i), void 0 == r || "" == r) throw "Please specifiy export server"; var a = !0; try { if (t) { var n = t.toDataURL("image/" + i); if (n = n.replace("data:image/" + i + ";base64,", ""), o) e.ajax({ dataType: "string", url: r, type: "POST", data: { content: n, fname: s }, async: !1, success: function (e, t, i) { a = !0 }, error: function (e, t, i) { a = !1 } }); else { var l = document.createElement("form"); l.method = "POST", l.action = r, l.style.display = "none", document.body.appendChild(l); var h = document.createElement("input"); h.name = "fname", h.value = s, h.style.display = "none"; var d = document.createElement("input"); d.name = "content", d.value = n, d.style.display = "none", l.appendChild(h), l.appendChild(d), l.submit(), document.body.removeChild(l), a = !0 } } } catch (e) { a = !1 } return a } }(jQuery), function (e) { e.extend(e.jqx._jqxChart.prototype, { _renderCategoryAxisRangeSelector: function (t, i) { var s = this; s._isTouchDevice = e.jqx.mobile.isTouchDevice(); var r = s._getCategoryAxis(t), o = s.seriesGroups[t]; if (r && 0 != r.visible && "spider" != o.type && s._isGroupVisible(t)) { var a = r.rangeSelector; if (a) { this._isSelectorRefresh || this.host.find(".rangeSelector").remove(); var n = "horizontal" == o.orientation; a.renderTo && (n = !1), s.rtl && (r.flip = !0); var l = n ? this.host.height() : this.host.width(); l -= 3; var h = this._getCategoryAxisStats(t, r, l), d = r.position; if (a.renderTo && a.position && (d = a.position), !this._isSelectorRefresh) { var c = a.renderTo, u = e("<div class='rangeSelector jqx-disableselect' style='position: absolute; background-color: transparent;' onselectstart='return false;'></div>").appendTo(c || this.host.find(".chartContainer")); if (c) u.css({ width: c.width(), height: c.height() }), i.width = c.width(), i.height = c.height(); else { var p = this.host.coord(); selectorSize = this._selectorGetSize(r), n ? (u.css("left", p.left + 1 + i.x + ("right" != d ? -selectorSize : i.width)), u.css("top", p.top), u.css("height", l), u.css("width", selectorSize), i.height = selectorSize) : (u.css("left", p.left + 1), u.css("top", p.top + i.y + ("top" != d ? i.height : -selectorSize)), u.css("height", selectorSize), u.css("width", l), i.width = selectorSize) } this._refreshSelector(t, r, h, u, i, n) } } } }, _refreshSelector: function (t, i, s, r, o, a) { var n = {}, l = i.rangeSelector; this.seriesGroups[t]; for (var h in l) n[h] = l[h]; var d = n.minValue, c = n.maxValue; void 0 == d && (d = Math.min(s.min.valueOf(), s.dsRange.min.valueOf())), void 0 == c && (c = Math.max(s.max.valueOf(), s.dsRange.max.valueOf())), this._isDate(s.min) && (d = new Date(d)), this._isDate(s.max) && (c = new Date(c)); var u = i.position; l.renderTo && l.position && (u = l.position), n.dataField = i.dataField, n.rangeSelector = void 0, n.type = i.type, n.baseUnit = l.baseUnit || i.baseUnit, n.minValue = d, n.maxValue = c, n.flip = i.flip, n.position = u; var p = a ? 0 : o.x, m = a ? 0 : this.padding.right, g = a ? o.y : 5, f = a ? this._paddedRect.height - this._plotRect.height : 5, v = l.padding; v = void 0 != v || l.renderTo ? { left: v && v.left ? v.left : p, top: v && v.top ? v.top : g, right: v && v.right ? v.right : m, bottom: v && v.bottom ? v.bottom : f } : { left: p, top: g, right: m, bottom: f }; for (var x = i.rangeSelector.dataField, h = 0; void 0 == x && h < this.seriesGroups.length; h++) for (var w = 0; void 0 == x && w < this.seriesGroups[h].series.length; w++) x = this.seriesGroups[h].series[w].dataField; var b = { padding: v, title: l.title || "", description: l.description || "", titlePadding: l.titlePadding, colorScheme: l.colorScheme || this.colorScheme, backgroundColor: l.backgroundColor || this.backgroundColor || "transparent", backgroundImage: l.backgroundImage || "", showBorderLine: l.showBorderLine || !!l.renderTo, borderLineWidth: l.borderLineWidth || this.borderLineWidth, borderLineColor: l.borderLineColor || this.borderLineColor, rtl: l.rtl || this.rtl, greyScale: l.greyScale || this.greyScale, showLegend: !1, enableAnimations: !1, enableEvents: !1, showToolTips: !1, source: this.source, xAxis: n, seriesGroups: [{ orientation: a ? "horizontal" : "vertical", valueAxis: { visible: !1 }, type: i.rangeSelector.serieType || "area", series: [{ dataField: x, opacity: .8, lineWidth: 1 }] }] }; r.empty(), r.jqxChart(b); var _ = this; r.on(_._getEvent("mousemove"), function () { _._unselect(), _._hideToolTip() }); var y = r.jqxChart("getInstance"); if (y._plotRect) { var j = y._paddedRect; if (j.height = y._plotRect.height, a || "top" != u) { if (a) { var q = y._renderData[0].xAxis.rect.width; j.width -= q, "right" != u && (j.x += q) } } else j.y += y._renderData[0].xAxis.rect.height; _._createSliderElements(t, r, j, l), _.addHandler(e(document), _._getEvent("mousemove"), _._onSliderMouseMove, { self: this, groupIndex: t, renderTo: r, swapXY: a }), _.addHandler(e(document), _._getEvent("mousedown"), _._onSliderMouseDown, { self: this, groupIndex: t, renderTo: r, swapXY: a }), _.addHandler(e(document), _._getEvent("mouseup"), _._onSliderMouseUp, { self: this, groupIndex: t, renderTo: r, swapXY: a }) } }, _createSliderElements: function (t, i, s, r) { i.find(".slider").remove(); var o = r.colorSelectedRange || "blue", a = r.colorUnselectedRange || "white", n = e("<div class='slider' style='position: absolute;'></div>"); for (n.css({ background: o, opacity: .1, left: s.x, top: s.y, width: s.width, height: s.height }), n.appendTo(i), this._sliders || (this._sliders = []) ; this._sliders.length < t + 1;) this._sliders.push({}); var l = "<div class='slider' style='position: absolute;  background: " + a + "; opacity: 0.5;'></div>", h = "<div class='slider' style='position: absolute; background: grey; opacity: 0.5;'></div>"; this._sliders[t] = { element: n, host: i, fullRect: { x: n.coord().left, y: n.coord().top, width: s.width, height: s.height }, rect: s, left: e(l), right: e(l), leftTop: e(h), rightTop: e(h), leftBorder: e(h), rightBorder: e(h) }, this._sliders[t].left.appendTo(i), this._sliders[t].right.appendTo(i), this._sliders[t].leftTop.appendTo(i), this._sliders[t].rightTop.appendTo(i), this._sliders[t].leftBorder.appendTo(i), this._sliders[t].rightBorder.appendTo(i); var d = this._renderData[t].xAxis.data.axisStats, c = d.min.valueOf(), u = d.max.valueOf(), p = this._valueToOffset(t, c), m = this._valueToOffset(t, u); if (p > m) { var g = m; m = p, p = g } "horizontal" != this.seriesGroups[t].orientation ? n.css({ left: Math.round(s.x + p), top: s.y, width: Math.round(m - p), height: s.height }) : n.css({ top: Math.round(s.y + p), left: s.x, height: Math.round(m - p), width: s.width }), this._setSliderPositions(t, p, m) }, _setSliderPositions: function (e, t, i) { var s = this.seriesGroups[e], r = this._getCategoryAxis(e), o = r.rangeSelector, a = "horizontal" == s.orientation; r.rangeSelector.renderTo && (a = !1); var n = r.position; o.renderTo && o.position && (n = o.position); var l = this._sliders[e], h = a ? "top" : "left", d = a ? "left" : "top", c = a ? "height" : "width", u = a ? "width" : "height", p = a ? "y" : "x", m = a ? "x" : "y", g = l.rect; l.left.css(h, g[p]), l.left.css(d, g[m]), l.left.css(c, t), l.left.css(u, g[u]), l.right.css(h, g[p] + i), l.right.css(d, g[m]), l.right.css(c, g[c] - i + 1), l.right.css(u, g[u]), l.leftTop.css(h, g[p]), l.leftTop.css(d, g[m] + (a && "right" == n || !a && "top" != n ? 0 : g[u])), l.leftTop.css(c, t), l.leftTop.css(u, 1), l.rightTop.css(h, g[p] + i), l.rightTop.css(d, g[m] + (a && "right" == n || !a && "top" != n ? 0 : g[u])), l.rightTop.css(c, g[c] - i + 1), l.rightTop.css(u, 1), l.leftBorder.css(h, g[p] + t), l.leftBorder.css(d, g[m]), l.leftBorder.css(c, 1), l.leftBorder.css(u, g[u]), l.rightBorder.css(h, g[p] + i), l.rightBorder.css(d, g[m]), l.rightBorder.css(c, 1), l.rightBorder.css(u, g[u]) }, _resizeState: {}, _onSliderMouseDown: function (e) { var t = e.data.self; t._sliders[e.data.groupIndex] && (void 0 == t._resizeState.state && t._testAndSetReadyResize(e), "ready" == t._resizeState.state && (t._resizeState.state = "resizing")) }, _valueToOffset: function (e, t) { var i = this.seriesGroups[e], s = this._sliders[e], r = s.host.jqxChart("getInstance")._renderData[0].xAxis.data.axisStats, o = Math.min(r.min.valueOf(), r.dsRange.min.valueOf()), a = Math.max(r.max.valueOf(), r.dsRange.max.valueOf()) - o; 0 == a && (a = 1); var n = this._getCategoryAxis(e), l = "horizontal" == i.orientation ? "height" : "width", h = (t.valueOf() - o) / a; return s.fullRect[l] * (n.flip ? 1 - h : h) }, _offsetToValue: function (e, t) { var i = this._sliders[e], s = this.seriesGroups[e], r = this._getCategoryAxis(e), o = "horizontal" == s.orientation ? "height" : "width", a = i.fullRect[o]; 0 == a && (a = 1); var n = i.host.jqxChart("getInstance")._renderData[0].xAxis.data.axisStats, l = Math.min(n.min.valueOf(), n.dsRange.min.valueOf()), h = Math.max(n.max.valueOf(), n.dsRange.max.valueOf()), d = t / a * (h - l) + l; return 1 == r.flip && (d = h - t / a * (h - l)), this._isDate(n.min) || this._isDate(n.max) ? d = new Date(d) : (void 0 == r.dataField && (d = Math.round(d)), d < n.min && (d = n.min), d > n.max && (d = n.max)), d }, _onSliderMouseUp: function (e) { var t = e.data.self, i = e.data.groupIndex, s = e.data.swapXY, r = t._sliders[i]; if (r && "resizing" == t._resizeState.state) { t._resizeState = {}, t.host.css("cursor", "default"); var o = s ? "top" : "left", a = s ? "y" : "x", n = r.element.coord()[o], l = n + (s ? r.element.height() : r.element.width()), h = t._offsetToValue(i, n - r.fullRect[a]), d = t._offsetToValue(i, l - r.fullRect[a]); !r.host.jqxChart("getInstance")._renderData[0].xAxis.data.axisStats.isTimeUnit && d.valueOf() - h.valueOf() > 864e5 && (h.setHours(0, 0, 0, 0), d.setDate(d.getDate() + 1), d.setHours(0, 0, 0, 0)); var c = t._getCategoryAxis(i); if (c.flip) { var u = h; h = d, d = u } c.minValue = h, c.maxValue = d, t._isSelectorRefresh = !0; var p = t.enableAnimations; t.enableAnimations = !1, t.update(), t.enableAnimations = p } }, _onSliderMouseMove: function (t) { var i = t.data.self, s = (t.data.renderTo, t.data.groupIndex), r = i._sliders[s], o = t.data.swapXY; if (r) { var a = r.fullRect, n = r.element, l = e.jqx.position(t), h = n.coord(), d = o ? "top" : "left", c = o ? "height" : "width", u = o ? "y" : "x"; if ("resizing" == i._resizeState.state) { if ("left" == i._resizeState.side) { var p = Math.round(l[d] - h[d]), m = a[u]; if (h[d] + p >= m && h[d] + p <= m + a[c]) { var g = parseInt(n.css(d)), f = Math.max(2, (o ? n.height() : n.width()) - p); n.css(c, f), n.css(d, g + p) } } else if ("right" == i._resizeState.side) { var v = o ? n.height() : n.width(), p = Math.round(l[d] - h[d] - v), m = a[u]; if (h[d] + v + p >= m && h[d] + p + v <= m + a[c]) { f = Math.max(2, v + p); n.css(c, f) } } var x = parseInt(n.css(d)) - r.rect[u], w = x + (o ? n.height() : n.width()); i._setSliderPositions(s, x, w) } else i._testAndSetReadyResize(t) } }, _testAndSetReadyResize: function (t) { var i = t.data.self, s = t.data.renderTo, r = t.data.groupIndex, o = i._sliders[r], a = t.data.swapXY, n = o.fullRect, l = o.element, h = e.jqx.position(t), d = l.coord(), c = a ? "left" : "top", u = a ? "top" : "left", p = a ? "width" : "height", m = i._isTouchDevice ? 15 : 5; h[c] >= d[c] && h[c] <= d[c] + n[p] ? Math.abs(h[u] - d[u]) <= m ? (s.css("cursor", a ? "row-resize" : "col-resize"), i._resizeState = { state: "ready", side: "left" }) : Math.abs(h[u] - d[u] - (a ? l.height() : l.width())) <= m ? (s.css("cursor", a ? "row-resize" : "col-resize"), i._resizeState = { state: "ready", side: "right" }) : (s.css("cursor", "default"), i._resizeState = {}) : (s.css("cursor", "default"), i._resizeState = {}) }, _selectorGetSize: function (e) { return e.rangeSelector.renderTo ? 0 : e.rangeSelector.size || this._paddedRect.height / 3 } }) }(jQuery), function (e) { var t = { defineInstance: function () { var t = { width: 350, height: 350, radius: "50%", endAngle: 270, startAngle: 30, value: 0, min: 0, max: 220, disabled: !1, ticksDistance: "20%", colorScheme: "scheme01", animationDuration: 400, showRanges: !0, easing: "easeOutCubic", labels: null, pointer: null, cap: null, caption: null, border: null, ticksMinor: null, ticksMajor: null, style: null, ranges: [], _radius: 100, _border: null, _radiusDifference: 2, _pointer: null, _labels: [], _cap: null, _ticks: [], _ranges: [], _gauge: null, _caption: null, _animationTimeout: 10, renderer: null, _animations: [], aria: { "aria-valuenow": { name: "value", type: "number" }, "aria-valuemin": { name: "min", type: "number" }, "aria-valuemax": { name: "max", type: "number" }, "aria-disabled": { name: "disabled", type: "boolean" } } }; e.extend(!0, this, t) }, createInstance: function (t) { var i = this; i.that = this, e.jqx.aria(i), i._radius = i.radius, i.value = new Number(i.value), i.endAngle = i.endAngle * Math.PI / 180 + Math.PI / 2, i.startAngle = i.startAngle * Math.PI / 180 + Math.PI / 2, i._refresh(), i.setValue(i.value, 0), i.renderer.getContainer().css("overflow", "hidden"), e.jqx.utilities.resize(i.host, function () { i._refresh() }), i.host.addClass(i.toThemeProperty("jqx-widget")) }, _validateEasing: function () { return !!e.easing[this.easing] }, _validateProperties: function () { if (this.startAngle === this.endAngle) throw new Error("The end angle can not be equal to the start angle!"); this._validateEasing() || (this.easing = "linear"), this.ticksDistance = this._validatePercentage(this.ticksDistance, "20%"), this.border = this._borderConstructor(this.border, this), this.style = this.style || { fill: "#ffffff", stroke: "#E0E0E0" }, this.ticksMinor = new this._tickConstructor(this.ticksMinor, this), this.ticksMajor = new this._tickConstructor(this.ticksMajor, this), this.cap = new this._capConstructor(this.cap, this), this.pointer = new this._pointerConstructor(this.pointer, this), this.labels = new this._labelsConstructor(this.labels, this), this.caption = new this._captionConstructor(this.caption, this); for (var e = 0; e < this.ranges.length; e += 1) this.ranges[e] = new this._rangeConstructor(this.ranges[e], this) }, _hostInit: function () { var e = this._getScale(this.width, "width", this.host.parent()), t = this._getScale(this.height, "height", this.host.parent()), i = this._outerBorderOffset(), s = this.host; s.width(e), s.height(t), this.radius = (this._getScale(this._radius, "width", this.host) || e / 2) - i, this._originalRadius = parseInt(this.radius, 10) - this._radiusDifference, this._innerRadius = this._originalRadius, this.border && (this._innerRadius -= this._getSize(this.border.size)), s[0].innerHTML = "<div />", this._gaugeParent = s.children(), this._gaugeParent.width(e), this._gaugeParent.height(t), this.renderer.init(this._gaugeParent) }, _initRenderer: function (t) { if (!e.jqx.createRenderer) throw "Please include a reference to jqxdraw.js"; return e.jqx.createRenderer(this, t) }, _refresh: function () { var t = this; t._isVML = !1, t.renderer || (t.host.empty(), t._initRenderer(t.host)), t.renderer && (t._ranges && e(t._ranges).remove(), t._pointer && e(t._pointer).remove(), t._labels && e(t._labels).remove(), t._cap && e(t._cap).remove(), t._ticks && e(t._ticks).remove(), t._border && e(t._border).remove(), t._caption && e(t._caption).remove(), t._caption = null, t._labels = [], t._cap = null, t._ticks = [], t._ranges = [], t._border = null, t._pointer = null, t._validateProperties(), t._removeElements(), t._hostInit(), t._render(), t.setValue(this.value, 0)) }, val: function (e) { if (0 == arguments.length || "object" == typeof e) return this.value; this.setValue(e, 0) }, refresh: function () { this._refresh.apply(this, Array.prototype.slice(arguments)) }, _outerBorderOffset: function () { return (parseInt(this.border.style["stroke-width"], 10) || 1) / 2 }, _removeCollection: function (t) { for (var i = 0; i < t.length; i += 1) e(t[i]).remove(); t = [] }, _render: function () { this._addBorder(), this._addGauge(), this._addRanges(), this._addTicks(), this._addLabels(), this._addCaption(), this._addPointer(), this._addCap() }, _addBorder: function () { if (this.border.visible) { var e = this.border.style.fill, t = this._outerBorderOffset(); e || (e = "#BABABA"), this.border.showGradient && (e.indexOf("url") < 0 && e.indexOf("#grd") < 0 ? this._originalColor = e : e = this._originalColor, e = this.renderer._toLinearGradient(e, !0, [[0, 1], [25, 1.1], [50, 1.5], [100, 1]])), this._border = this.renderer.circle(this._originalRadius + t, this._originalRadius + t, this._originalRadius), this.border.style.fill = e, this.renderer.attr(this._border, this.border.style) } }, _addGauge: function () { var e = this._originalRadius, t = (this.renderer._toLinearGradient("#ffffff", [[3, 2], [100, 1]]), this._outerBorderOffset()); this._gauge = this.renderer.circle(e + t, e + t, this._innerRadius), this.renderer.attr(this._gauge, this.style) }, _addCap: function () { var t = "visible", i = this._outerBorderOffset(); this.cap.visible || (t = "hidden"); var s, r = this._originalRadius, o = this._getSize(this.cap.size); s = this.renderer.circle(r + i, r + i, o), this._capCenter = [r, r], this.renderer.attr(s, this.cap.style), e(s).css("visibility", t), this._cap = s }, _addTicks: function () { for (var e = this.ticksMinor, t = this.ticksMajor, i = e.interval, s = t.interval, r = {}, o = this.min, a = this.min; o <= this.max || a <= this.max; o += i, a += s) a <= this.max && t.visible && (this._drawTick({ angle: this._getAngleByValue(a), distance: this._getDistance(this.ticksDistance), style: t.style, size: this._getSize(t.size), type: "major" }), r[a.toFixed(5)] = !0), !r[o.toFixed(5)] && e.visible && o <= this.max && this._drawTick({ angle: this._getAngleByValue(o), distance: this._getDistance(this.ticksDistance), style: e.style, size: this._getSize(e.size), type: "minor" }); this._handleTicksVisibility() }, _handleTicksVisibility: function () { this.ticksMinor.visible ? this.host.children(".jqx-gauge-tick-minor").css("visibility", "visible") : this.host.children(".jqx-gauge-tick-minor").css("visibility", "hidden"), this.ticksMajor.visible ? this.host.children(".jqx-gauge-tick-major").css("visibility", "visible") : this.host.children(".jqx-gauge-tick-major").css("visibility", "hidden") }, _getSize: function (e) { return e.toString().indexOf("%") >= 0 && (e = parseInt(e, 10) / 100 * this._innerRadius), e = parseInt(e, 10) }, _getDistance: function (e) { return this._getSize(e) + (this._originalRadius - this._innerRadius) }, _drawTick: function (e) { var t, i = this.that, s = e.angle, r = e.distance, o = e.size, a = i._outerBorderOffset(), n = i._originalRadius, l = n - r, h = l - o, d = n + a + l * Math.sin(s), c = n + a + l * Math.cos(s), u = n + a + h * Math.sin(s), p = n + a + h * Math.cos(s); e.style.class = i.toThemeProperty("jqx-gauge-tick-" + e.type), i._isVML && (d = Math.round(d), u = Math.round(u), c = Math.round(c), p = Math.round(p)), t = i.renderer.line(d, c, u, p, e.style), i._ticks.push(t) }, _addRanges: function () { var e = "visible"; if (this.showRanges) for (var t = this.ranges, i = 0; i < t.length; i += 1) this._addRange(t[i], e); else e = "hidden" }, _getMaxRangeSize: function () { for (var e, t, i = -1, s = 0; s < this.ranges.length; s += 1) e = this.ranges[s].startWidth, t = this.ranges[s].endWidth, e > i && (i = e), t > i && (i = t); return i }, _getRangeDistance: function (e, t) { var i = this._getLabelsDistance(), s = this._getDistance(e), r = this._getMaxRangeSize(); if ("outside" === this.labels.position) { if (i < s + this._getMaxTickSize()) return this._getDistance(this.ticksDistance) + r / 2 + this._getSize(this.ticksMajor.size) } else if ("inside" === this.labels.position && i + this._getMaxTickSize() < s) return this._getSize(this.border.size) + this._originalRadius / 20; return s }, _addRange: function (e, t) { var i = this.that; if (!(e.startValue < i.min || e.endValue > i.max)) { var s, e, r = i._getAngleByValue(e.startValue), o = i._getAngleByValue(e.endValue), a = i._originalRadius, n = a - i._getRangeDistance(e.startDistance, e.startWidth), l = a - i._getRangeDistance(e.endDistance, e.endWidth), h = e.startWidth, d = e.endWidth, c = i._outerBorderOffset(), u = { x: a + c + n * Math.sin(r), y: a + c + n * Math.cos(r) }, p = { x: a + c + l * Math.sin(o), y: a + c + l * Math.cos(o) }, m = i._getProjectionPoint(r, a + c, n, h), g = i._getProjectionPoint(o, a + c, l, d), f = "default"; Math.abs(o - r) > Math.PI && (f = "opposite"), s = i._isVML ? i._rangeVMLRender(u, p, a, m, g, d, h, n, l, f) : i._rangeSVGRender(u, p, a, m, g, d, h, n, l, f), e.style.visibility = t, e.style.class = i.toThemeProperty("jqx-gauge-range"), e = i.renderer.path(s, e.style), i._ranges.push(e) } }, _rangeSVGRender: function (e, t, i, s, r, o, a, n, l, h) { var d = "", n = i - n, c = ["0,1", "0,0"]; return "opposite" === h && (c = ["1,1", "1,0"]), d = "M" + e.x + "," + e.y + " ", d += "A" + (i - n) + "," + (i - n) + " 100 " + c[0] + " " + t.x + "," + t.y + " ", d += "L " + r.x + "," + r.y + " ", d += "A" + (i - o - n) + "," + (i - o - n) + " 100 " + c[1] + " " + s.x + "," + s.y + " ", d += "L " + e.x + "," + e.y + " ", d += "z" }, _rangeVMLRender: function (e, t, i, s, r, o, a, n, l, h) { i -= i - n + 10; var d = "", c = Math.floor(i + (a + o) / 2), n = Math.floor(i - n), l = Math.floor(l), u = { x: (s.x + r.x) / 2, y: (s.y + r.y) / 2 }, p = Math.sqrt((r.x - s.x) * (r.x - s.x) + (r.y - s.y) * (r.y - s.y)), m = Math.floor(u.x + Math.sqrt(i * i - p / 2 * (p / 2)) * (s.y - r.y) / p), g = Math.floor(u.y + Math.sqrt(i * i - p / 2 * (p / 2)) * (r.x - s.x) / p), f = { x: (e.x + t.x) / 2, y: (e.y + t.y) / 2 }, v = Math.sqrt((t.x - e.x) * (t.x - e.x) + (t.y - e.y) * (t.y - e.y)), x = Math.floor(f.x + Math.sqrt(Math.abs(c * c - v / 2 * (v / 2))) * (e.y - t.y) / v), w = Math.floor(f.y + Math.sqrt(Math.abs(c * c - v / 2 * (v / 2))) * (t.x - e.x) / v); return "opposite" === h && (m = Math.floor(u.x - Math.sqrt(i * i - p / 2 * (p / 2)) * (s.y - r.y) / p), g = Math.floor(u.y - Math.sqrt(i * i - p / 2 * (p / 2)) * (r.x - s.x) / p), x = Math.floor(f.x - Math.sqrt(Math.abs(c * c - v / 2 * (v / 2))) * (e.y - t.y) / v), w = Math.floor(f.y - Math.sqrt(Math.abs(c * c - v / 2 * (v / 2))) * (t.x - e.x) / v)), i = Math.floor(i), t = { x: Math.floor(t.x), y: Math.floor(t.y) }, e = { x: Math.floor(e.x), y: Math.floor(e.y) }, s = { x: Math.floor(s.x), y: Math.floor(s.y) }, r = { x: Math.floor(r.x), y: Math.floor(r.y) }, d = "m " + t.x + "," + t.y, d += "at " + (x - c) + " " + (w - c) + " " + (c + x) + " " + (c + w) + " " + t.x + "," + t.y + " " + e.x + "," + e.y, d += "l " + s.x + "," + s.y, d += "m " + t.x + "," + t.y, d += "l " + r.x + "," + r.y, d += "at " + (m - i) + " " + (g - i) + " " + (i + m) + " " + (i + g) + " " + r.x + "," + r.y + " " + s.x + "," + s.y, d += "qx " + s.x + " " + s.y }, _getProjectionPoint: function (e, t, i, s) { return { x: t + (i - s) * Math.sin(e), y: t + (i - s) * Math.cos(e) } }, _addLabels: function (e) { for (var t = this._getDistance(this._getLabelsDistance()), i = this.min; i <= this.max; i += this.labels.interval) this.labels.visible && this._addLabel({ angle: this._getAngleByValue(i), value: this.labels.interval >= 1 ? i : new Number(i).toFixed(2), distance: t, style: this.labels.className }) }, _getLabelsDistance: function () { var e = this._getMaxLabelSize(), t = this._getDistance(this.labels.distance), i = this._getDistance(this.ticksDistance); return e = e.width, "inside" === this.labels.position ? i + e - 5 : "outside" === this.labels.position ? t < i - 1.5 * e ? t : Math.max(i - 1.5 * e, .6 * e) : this.labels.distance }, _addLabel: function (e) { var t, i, s = this.that, r = e.angle, o = s._originalRadius, a = o - e.distance, n = s.labels.offset, l = s.labels.formatValue, h = s._outerBorderOffset(), d = o + h + a * Math.sin(r) + n[0], c = o + h + a * Math.cos(r) + n[1], u = e.value, p = e.style || ""; "function" == typeof l && (u = l(u)), t = s.renderer.measureText(u, 0, { class: p }), i = s.renderer.text(u, Math.round(d) - t.width / 2, Math.round(c), t.width, t.height, 0, { class: this.toThemeProperty("jqx-gauge-label") }), s._labels.push(i) }, _addCaption: function () { var e = this.that, t = e.caption.value, i = e.toThemeProperty("jqx-gauge-caption"), s = e.caption.offset, r = e.renderer.measureText(t, 0, { class: i }), o = e._getPosition(this.caption.position, r, s), a = (e.caption.style, e._outerBorderOffset()), n = e.renderer.text(t, o.left + a, o.top + a, r.width, r.height, 0, { class: i }); this._caption = n }, _getPosition: function (e, t, i) { var s = 0, r = 0, o = this._originalRadius; switch (e) { case "left": s = (o - t.width) / 2, r = o - t.height / 2; break; case "right": s = o + (o - t.width) / 2, r = o - t.height / 2; break; case "bottom": s = (2 * o - t.width) / 2, r = (o + 2 * o - t.height) / 2; break; default: s = (2 * o - t.width) / 2, r = (o + t.height) / 2 } return { left: s + i[0], top: r + i[1] } }, _addPointer: function () { var t = "visible"; this.pointer.visible || (t = "hidden"); this._originalRadius; var i, s = this._getSize(this.pointer.length), r = this._getAngleByValue(this.value), o = this.pointer.pointerType; i = this._computePointerPoints(this._getSize(this.pointer.width), r, s, "default" !== o), this._pointer = this.renderer.path(i, this.pointer.style), e(this._pointer).css("visibility", t) }, _computePointerPoints: function (e, t, i, s) { return s ? this._computeRectPoints(e, t, i) : this._computeArrowPoints(e, t, i) }, _computeArrowPoints: function (e, t, i) { var s = this._originalRadius - .5, r = Math.sin(t), o = Math.cos(t), a = this._outerBorderOffset(), n = s + a + i * r, l = s + a + i * o, h = s + a + e * o, d = s + a - e * r, c = s + a - e * o, u = s + a + e * r; return this._isVML && (h = Math.round(h), c = Math.round(c), d = Math.round(d), u = Math.round(u), n = Math.round(n), l = Math.round(l)), "M " + h + "," + d + " L " + c + "," + u + " L " + n + "," + l }, _computeRectPoints: function (e, t, i) { var s = this._originalRadius, r = Math.sin(t), o = Math.cos(t), a = this._outerBorderOffset(), n = s + a - e * o + i * r, l = s + a + e * r + i * o, h = s + a + e * o + i * r, d = s + a - e * r + i * o, c = s + a + e * o, u = s + a - e * r, p = s + a - e * o, m = s + a + e * r; return this._isVML && (c = Math.round(c), p = Math.round(p), u = Math.round(u), m = Math.round(m), n = Math.round(n), l = Math.round(l), h = Math.round(h), d = Math.round(d)), "M " + c + "," + u + " L " + p + "," + m + " L " + n + "," + l + " " + h + "," + d }, _getAngleByValue: function (e) { var t = this.startAngle, i = this.endAngle, s = this.min; return (t - i) / (this.max - s) * (e - this.min) + t + Math.PI }, _setValue: function (t) { if (t <= this.max && t >= this.min) { var i = this._getAngleByValue(t), s = this.pointer.pointerType, r = this._computePointerPoints(this._getSize(this.pointer.width), i, this._getSize(this.pointer.length), "default" !== s); this._isVML ? (this._pointer && e(this._pointer).remove(), this._pointer = this.renderer.path(r, this.pointer.style)) : this.renderer.attr(this._pointer, { d: r }), this.value = t, e.jqx.aria(this, "aria-valuenow", t) } }, resize: function (e, t) { this.width = e, this.height = t, this.refresh() }, propertyChangedHandler: function (t, i, s, r) { r != s && ("min" == i && (this.min = parseInt(r), e.jqx.aria(t, "aria-valuemin", r)), "max" == i && (this.max = parseInt(r), e.jqx.aria(t, "aria-valuemax", r)), "value" == i && (this.value = parseInt(r)), "disabled" === i ? (r ? this.disable() : this.enable(), e.jqx.aria(this, "aria-disabled", r)) : "value" === i ? (this.value = s, this.setValue(r)) : ("startAngle" === i ? this.startAngle = this.startAngle * Math.PI / 180 + Math.PI / 2 : "endAngle" === i ? this.endAngle = this.endAngle * Math.PI / 180 + Math.PI / 2 : "colorScheme" === i ? (this.pointer.style = null, this.cap.style = null) : "radius" === i && (this._radius = r), "animationDuration" !== i && "easing" !== i && this._refresh()), this.renderer instanceof e.jqx.HTML5Renderer && this.renderer.refresh()) }, _tickConstructor: function (e, t) { if (this.host) return new this._tickConstructor(e, t); e = e || {}, this.size = t._validatePercentage(e.size, "10%"), this.interval = parseFloat(e.interval), this.interval || (this.interval = 5), this.style = e.style || { stroke: "#898989", "stroke-width": 1 }, void 0 === e.visible ? this.visible = !0 : this.visible = e.visible }, _capConstructor: function (e, t) { var i = t._getColorScheme(t.colorScheme)[0]; if (this.host) return new this._capConstructor(e, t); void 0 === (e = e || {}).visible ? this.visible = !0 : this.visible = e.visible, this.size = t._validatePercentage(e.size, "4%"), this.style = e.style || { fill: i, "stroke-width": "1px", stroke: i, "z-index": 30 } }, _pointerConstructor: function (e, t) { var i = t._getColorScheme(t.colorScheme)[0]; if (this.host) return new this._pointerConstructor(e, t); void 0 === (e = e || {}).visible ? this.visible = !0 : this.visible = e.visible, this.pointerType = e.pointerType, "default" !== this.pointerType && "rectangle" !== this.pointerType && (this.pointerType = "default"), this.style = e.style || { "z-index": 0, stroke: i, fill: i, "stroke-width": 1 }, this.length = t._validatePercentage(e.length, "70%"), this.width = t._validatePercentage(e.width, "2%") }, _labelsConstructor: function (e, t) { if (this.host) return new this._labelsConstructor(e, t); void 0 === (e = e || {}).visible ? this.visible = !0 : this.visible = e.visible, this.offset = e.offset, this.offset instanceof Array || (this.offset = [0, -10]), this.interval = parseFloat(e.interval), this.interval || (this.interval = 20), this.distance = t._validatePercentage(e.distance, "38%"), this.position = e.position, "inside" !== this.position && "outside" !== this.position && (this.position = "none"), this.formatValue = e.formatValue, "function" != typeof this.formatValue && (this.formatValue = function (e) { return e }) }, _captionConstructor: function (e, t) { if (this.host) return new this._captionConstructor(e, t); void 0 === (e = e || {}).visible ? this.visible = !0 : this.visible = e.visible, this.value = e.value || "", this.position = e.position, "bottom" !== this.position && "top" !== this.position && "left" !== this.position && "right" !== this.position && (this.position = "bottom"), this.offset = e.offset, this.offset instanceof Array || (this.offset = [0, 0]) }, _rangeConstructor: function (e, t) { if (this.host) return new this._rangeConstructor(e, t); e = e || {}, this.startDistance = t._validatePercentage(e.startDistance, "5%"), this.endDistance = t._validatePercentage(e.endDistance, "5%"), this.style = e.style || { fill: "#000000", stroke: "#111111" }, this.startWidth = parseFloat(e.startWidth, 10), this.startWidth || (this.startWidth = 10), this.startWidth = Math.max(this.startWidth, 2), this.endWidth = parseFloat(e.endWidth, 10), this.endWidth || (this.endWidth = 10), this.endWidth = Math.max(this.endWidth, 2), this.startValue = parseFloat(e.startValue, 10), this.startValue || (this.startValue = 0), this.endValue = parseFloat(e.endValue, 10), void 0 == this.endValue && (this.endValue = 100) }, _borderConstructor: function (e, t) { if (this.host) return new this._borderConstructor(e, t); e = e || {}, this.size = t._validatePercentage(e.size, "10%"), this.style = e.style || { stroke: "#cccccc" }, void 0 === e.showGradient ? this.showGradient = !0 : this.showGradient = e.showGradient, void 0 === e.visible ? this.visible = !0 : this.visible = e.visible } }, i = { _events: ["valueChanging", "valueChanged"], _animationTimeout: 10, _schemes: [{ name: "scheme01", colors: ["#307DD7", "#AA4643", "#89A54E", "#71588F", "#4198AF"] }, { name: "scheme02", colors: ["#7FD13B", "#EA157A", "#FEB80A", "#00ADDC", "#738AC8"] }, { name: "scheme03", colors: ["#E8601A", "#FF9639", "#F5BD6A", "#599994", "#115D6E"] }, { name: "scheme04", colors: ["#D02841", "#FF7C41", "#FFC051", "#5B5F4D", "#364651"] }, { name: "scheme05", colors: ["#25A0DA", "#309B46", "#8EBC00", "#FF7515", "#FFAE00"] }, { name: "scheme06", colors: ["#0A3A4A", "#196674", "#33A6B2", "#9AC836", "#D0E64B"] }, { name: "scheme07", colors: ["#CC6B32", "#FFAB48", "#FFE7AD", "#A7C9AE", "#888A63"] }, { name: "scheme08", colors: ["#3F3943", "#01A2A6", "#29D9C2", "#BDF271", "#FFFFA6"] }, { name: "scheme09", colors: ["#1B2B32", "#37646F", "#A3ABAF", "#E1E7E8", "#B22E2F"] }, { name: "scheme10", colors: ["#5A4B53", "#9C3C58", "#DE2B5B", "#D86A41", "#D2A825"] }, { name: "scheme11", colors: ["#993144", "#FFA257", "#CCA56A", "#ADA072", "#949681"] }, { name: "scheme12", colors: ["#105B63", "#EEEAC5", "#FFD34E", "#DB9E36", "#BD4932"] }, { name: "scheme13", colors: ["#BBEBBC", "#F0EE94", "#F5C465", "#FA7642", "#FF1E54"] }, { name: "scheme14", colors: ["#60573E", "#F2EEAC", "#BFA575", "#A63841", "#BFB8A3"] }, { name: "scheme15", colors: ["#444546", "#FFBB6E", "#F28D00", "#D94F00", "#7F203B"] }, { name: "scheme16", colors: ["#583C39", "#674E49", "#948658", "#F0E99A", "#564E49"] }, { name: "scheme17", colors: ["#142D58", "#447F6E", "#E1B65B", "#C8782A", "#9E3E17"] }, { name: "scheme18", colors: ["#4D2B1F", "#635D61", "#7992A2", "#97BFD5", "#BFDCF5"] }, { name: "scheme19", colors: ["#844341", "#D5CC92", "#BBA146", "#897B26", "#55591C"] }, { name: "scheme20", colors: ["#56626B", "#6C9380", "#C0CA55", "#F07C6C", "#AD5472"] }, { name: "scheme21", colors: ["#96003A", "#FF7347", "#FFBC7B", "#FF4154", "#642223"] }, { name: "scheme22", colors: ["#5D7359", "#E0D697", "#D6AA5C", "#8C5430", "#661C0E"] }, { name: "scheme23", colors: ["#16193B", "#35478C", "#4E7AC7", "#7FB2F0", "#ADD5F7"] }, { name: "scheme24", colors: ["#7B1A25", "#BF5322", "#9DA860", "#CEA457", "#B67818"] }, { name: "scheme25", colors: ["#0081DA", "#3AAFFF", "#99C900", "#FFEB3D", "#309B46"] }, { name: "scheme26", colors: ["#0069A5", "#0098EE", "#7BD2F6", "#FFB800", "#FF6800"] }, { name: "scheme27", colors: ["#FF6800", "#A0A700", "#FF8D00", "#678900", "#0069A5"] }], _getScale: function (e, t, i) { return e && e.toString().indexOf("%") >= 0 ? (e = parseInt(e, 10) / 100, i[t]() * e) : parseInt(e, 10) }, _removeElements: function () { this.host.children(".chartContainer").remove(), this.host.children("#tblChart").remove() }, _getMaxLabelSize: function () { var e = this.max, t = this.min; this.labels.interval < 1 && (t = new Number(t).toFixed(2), e = new Number(e).toFixed(2)); var i = this.renderer.measureText(e, 0, { class: this.toThemeProperty("jqx-gauge-label") }), s = this.renderer.measureText(t, 0, { class: this.toThemeProperty("jqx-gauge-label") }); return s.width > i.width ? s : i }, disable: function () { this.disabled = !0, this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")) }, enable: function () { this.disabled = !1, this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")) }, destroy: function () { var t = this; t._timeout && clearTimeout(this._timeout), t._timeout = null, e.jqx.utilities.resize(t.host, null, !0), t._removeElements(), t.renderer.clear(), t.renderer = null; var i = e.data(t.element, "jqxGauge"); i && delete i.instance, t.host.children().remove(), t._caption = null, t._caption = null, t._pointer = null, t._labels = [], t._cap = null, t._ticks = [], t._ranges = [], t._border = null, t._gauge = null, t._caption = null, t.renderer = null, t._animations = [], t.host.removeData(), t.host.removeClass(), t.host.remove(), t.that = null, t.element = null, t._gaugeParent = null, delete t._gaugeParent, delete t.element, delete t.host }, _validatePercentage: function (e, t) { return 0 === parseFloat(e) || e && parseInt(e, 10) || (e = t), e }, _getColorScheme: function (e) { for (var t, i = 0; i < this._schemes.length; i += 1) if ((t = this._schemes[i]).name === e) return t.colors; return null }, setValue: function (t, i) { if (!this.disabled) { t > this.max && (t = this.max), t < this.min && (t = this.min); var s = (i = i || this.animationDuration || 0) / this._animationTimeout; this._animate((t - this.value) / s, this.value, t, i), e.jqx.aria(this, "aria-valuenow", t) } }, _animate: function (e, t, i, s) { this._timeout && this._endAnimation(this.value, !1), s ? this._animateHandler(e, t, i, 0, s) : this._endAnimation(i, !0) }, _animateHandler: function (t, i, s, r, o) { var a = this; r <= o ? this._timeout = setTimeout(function () { a.value = i + (s - i) * e.easing[a.easing](r / o, r, 0, 1, o), a._setValue(a.value), a._raiseEvent(0, { value: a.value }), a._animateHandler(t, i, s, r + a._animationTimeout, o) }, this._animationTimeout) : this._endAnimation(s, !0) }, _endAnimation: function (e, t) { clearTimeout(this._timeout), this._timeout = null, this._setValue(e), t && this._raiseEvent(1, { value: e }) }, _getMaxTickSize: function () { return Math.max(this._getSize(this.ticksMajor.size), this._getSize(this.ticksMinor.size)) }, _raiseEvent: function (t, i) { var s = e.Event(this._events[t]); return s.args = i || {}, this.host.trigger(s) } }, s = { defineInstance: function () { var t = { value: -50, max: 40, min: -60, width: 100, height: 300, pointer: {}, labels: {}, animationDuration: 1e3, showRanges: {}, ticksMajor: { size: "15%", interval: 5 }, ticksMinor: { size: "10%", interval: 2.5 }, ranges: [], easing: "easeOutCubic", colorScheme: "scheme01", disabled: !1, rangesOffset: 0, background: {}, ticksPosition: "both", rangeSize: "5%", scaleStyle: null, ticksOffset: null, scaleLength: "90%", orientation: "vertical", aria: { "aria-valuenow": { name: "value", type: "number" }, "aria-valuemin": { name: "min", type: "number" }, "aria-valuemax": { name: "max", type: "number" }, "aria-disabled": { name: "disabled", type: "boolean" } }, _originalColor: "", _width: null, _height: null, renderer: null }; e.extend(!0, this, t) }, createInstance: function () { e.jqx.aria(this), this.host.css("overflow", "hidden"), this.host.addClass(this.toThemeProperty("jqx-widget")); var t = this; e.jqx.utilities.resize(this.host, function () { t.refresh(!1, !1) }) }, val: function (e) { if (0 == arguments.length || "object" == typeof e) return this.value; this.setValue(e, 0) }, _initRenderer: function (t) { if (!e.jqx.createRenderer) throw "Please include a reference to jqxdraw.js"; return e.jqx.createRenderer(this, t) }, refresh: function (e, t) { var i = this; i._isVML = !1, i.renderer || (i.host.empty(), i._initRenderer(i.host)), i.renderer && (i._validateProperties(), i._reset(), i._init(), i._performLayout(), i._render(), !1 !== t && i.setValue(i.value, 1)) }, _getBorderSize: function () { var e, t = 1; return this._isVML && (t = 0), this.background ? (e = (parseInt(this.background.style["stroke-width"], 10) || t) / 2, this._isVML ? Math.round(e) : e) : t }, _validateProperties: function () { this.background = this._backgroundConstructor(this.background, this), this.ticksOffset = this.ticksOffset || this._getDefaultTicksOffset(), this.rangesOffset = this.rangesOffset || 0, this.rangeSize = this._validatePercentage(this.rangeSize, 5), this.ticksOffset[0] = this._validatePercentage(this.ticksOffset[0], "5%"), this.ticksOffset[1] = this._validatePercentage(this.ticksOffset[1], "5%"), this.ticksMinor = this._tickConstructor(this.ticksMinor, this), this.ticksMajor = this._tickConstructor(this.ticksMajor, this), this.scaleStyle = this.scaleStyle || this.ticksMajor.style, this.labels = this._labelsConstructor(this.labels, this), this.pointer = this._pointerConstructor(this.pointer, this); for (var e = 0; e < this.ranges.length; e += 1) this.ranges[e] = this._rangeConstructor(this.ranges[e], this) }, _getDefaultTicksOffset: function () { return "horizontal" === this.orientation ? ["5%", "36%"] : ["36%", "5%"] }, _handleOrientation: function () { "vertical" === this.orientation ? e.extend(this, linearVerticalGauge) : e.extend(this, linearHorizontalGauge) }, _reset: function () { this.host.empty() }, _performLayout: function () { var e = parseInt(this.background.style["stroke-width"], 10) || 1; this._width -= e, this._height -= e, this.host.css("padding", e / 2) }, _init: function () { var e; this._getBorderSize(); this._width = this._getScale(this.width, "width", this.host.parent()) - 3, this._height = this._getScale(this.height, "height", this.host.parent()) - 3, this.element.innerHTML = "<div/>", this.host.width(this._width), this.host.height(this._height), this.host.children().width(this._width), this.host.children().height(this._height), this.renderer.init(this.host.children()), (e = this.renderer.getContainer()).width(this._width), e.height(this._height) }, _render: function () { this._renderBackground(), this._renderTicks(), this._renderLabels(), this._renderRanges(), this._renderPointer() }, _renderBackground: function () { if (this.background.visible) { var t, i = this.background.style, s = e.jqx._rup(this._getBorderSize()), r = "rect"; i = this._handleShapeOptions(i), "roundedRectangle" === this.background.backgroundType && this._isVML && (r = "roundrect"), this._Vml || (i.x = s, i.y = s), t = this.renderer.shape(r, i), this._isVML && this._fixVmlRoundrect(t, i) } }, _handleShapeOptions: function (e) { var t = this.background.style.fill; this._getBorderSize(); return t || (t = "#cccccc"), this.background.showGradient && (t.indexOf("url") < 0 && t.indexOf("#grd") < 0 ? this._originalColor = t : t = this._originalColor, t = this.renderer._toLinearGradient(t, "horizontal" === this.orientation, [[1, 1.1], [90, 1.5]])), this.background.style.fill = t, "roundedRectangle" === this.background.backgroundType && (this._isVML ? e.arcsize = this.background.borderRadius + "%" : (e.rx = this.background.borderRadius, e.ry = this.background.borderRadius)), e.width = this._width - 1, e.height = this._height - 1, e }, _fixVmlRoundrect: function (e, t) { var i = this._getBorderSize(); e.style.position = "absolute", e.style.left = i, e.style.top = i, e.style.width = this._width - 1, e.style.height = this._height - 1, e.strokeweight = 0, delete t.width, delete t.height, delete t.arcsize, this.renderer.attr(e, t) }, _renderTicks: function () { var e, t, i = Math.abs(this.max - this.min), s = this.ticksMinor, r = this.ticksMajor; r.interval, s.interval; e = { size: this._getSize(r.size), style: r.style, visible: r.visible, interval: r.interval }, t = { size: this._getSize(s.size), style: s.style, visible: s.visible, interval: s.interval, checkOverlap: !0 }, "near" !== this.ticksPosition && "both" !== this.ticksPosition || (this._ticksRenderHandler(e), this._ticksRenderHandler(t)), "far" !== this.ticksPosition && "both" !== this.ticksPosition || (e.isFar = !0, t.isFar = !0, this._ticksRenderHandler(e), this._ticksRenderHandler(t)), this._renderConnectionLine() }, _ticksRenderHandler: function (e) { if (e.visible) { this._getSize(this.ticksOffset[0], "width"), this._getSize(this.ticksOffset[1], "height"); var t = this._getBorderSize(), i = this._calculateTickOffset() + this._getMaxTickSize(); e.isFar && (i += e.size), this._drawTicks(e, t, i + t) } }, _drawTicks: function (e, t, i) { for (var s, r = this.min; r <= this.max; r += e.interval) s = this._valueToCoordinates(r), e.checkOverlap && this._overlapTick(r) || this._renderTick(e.size, s, e.style, i) }, _calculateTickOffset: function () { var e = this._getSize(this.ticksOffset[0], "width"), t = this._getSize(this.ticksOffset[1], "height"); return "vertical" === this.orientation && (t = e), t }, _overlapTick: function (e) { return (e += this.min) % this.ticksMinor.interval == e % this.ticksMajor.interval }, _renderConnectionLine: function () { if (this.ticksMajor.visible || this.ticksMinor.visible) { this._getScaleLength(); var e = this._getBorderSize(), t = this._valueToCoordinates(this.max), i = this._valueToCoordinates(this.min), s = this._getMaxTickSize() + e; "vertical" === this.orientation ? (s += this._getSize(this.ticksOffset[0], "width"), this.renderer.line(s, t, s, i, this.scaleStyle)) : (s += this._getSize(this.ticksOffset[1], "height"), this.renderer.line(t, s, i, s, this.scaleStyle)) } }, _getScaleLength: function () { return this._getSize(this.scaleLength, "vertical" === this.orientation ? "height" : "width") }, _renderTick: function (e, t, i, s) { var r = this._handleTickCoordinates(e, t, s); this.renderer.line(Math.round(r.x1), Math.round(r.y1), Math.round(r.x2), Math.round(r.y2), i) }, _handleTickCoordinates: function (e, t, i) { return "vertical" === this.orientation ? { x1: i - e, x2: i, y1: t, y2: t } : { x1: t, x2: t, y1: i - e, y2: i } }, _getTickCoordinates: function (e, t) { var i = this._handleTickCoordinates(e, 0, this._calculateTickOffset()); return i = "vertical" === this.orientation ? i.x1 : i.y1, i += e }, _renderLabels: function () { if (this.labels.visible) { var e, t = this._getSize(this.ticksOffset[0], "width"), i = this._getMaxTickSize(), s = this.labels.position, r = "height", o = this._getBorderSize(), a = this._calculateTickOffset() + i; "vertical" === this.orientation && (t = this._getSize(this.ticksOffset[1], "height"), r = "width"), e = this._getMaxLabelSize()[r], "near" !== s && "both" !== s || this._labelListRender(a - i - e + o, t + o, e, "near"), "far" !== s && "both" !== s || this._labelListRender(a + i + e + o, t + o, e, "far") } }, _labelListRender: function (e, t, i, s) { var r = this.labels.interval, o = Math.abs(this.max - this.min) / r, a = this._getScaleLength() / o, n = "vertical" === this.orientation ? this.max : this.min; e += this._getSize(this.labels.offset); for (var l = 0; l <= o; l += 1) this._renderLabel(t, s, e, i, n), n += "vertical" === this.orientation ? -r : r, t += a }, _renderLabel: function (e, t, i, s, r) { var o, a, n, l = { class: this.toThemeProperty("jqx-gauge-label") }; this.labels.interval; n = this.labels.formatValue(r, t), a = this.renderer.measureText(n, 0, l), "vertical" === this.orientation ? (o = "near" === t ? s - a.width : 0, this.renderer.text(n, Math.round(i) + o - s / 2, Math.round(e - a.height / 2), a.width, a.height, 0, l)) : (o = "near" === t ? s - a.height : 0, this.renderer.text(n, Math.round(e - a.width / 2), Math.round(i) + o - s / 2, a.width, a.height, 0, l)) }, _renderRanges: function () { if (this.showRanges) for (var e, t = "vertical" === this.orientation ? "width" : "height", i = this._getSize(this.rangesOffset, t), s = this._getSize(this.rangeSize, t), r = 0; r < this.ranges.length; r += 1) (e = this.ranges[r]).size = s, this._renderRange(e, i) }, _renderRange: function (e, t) { this._getScaleLength(); var i = this._getBorderSize(), s = this._getSize(this.ticksOffset[0], "width"), r = this._getSize(this.ticksOffset[1], "height"), o = this._getMaxTickSize(), a = this._getSize(e.size), n = this._valueToCoordinates(e.endValue), l = e.startValue; l < this.min && (l = this.min); var h, d, c = Math.abs(this._valueToCoordinates(l) - n); "vertical" === this.orientation ? h = this.renderer.rect(s + o + t - a + i, n, e.size, c, e.style) : (d = c, h = this.renderer.rect(this._valueToCoordinates(e.startValue), r + o + i, d, e.size, e.style)), this.renderer.attr(h, e.style) }, _renderPointer: function () { this.pointer.visible && ("default" === this.pointer.pointerType ? this._renderColumnPointer() : this._renderArrowPointer()) }, _renderColumnPointer: function () { this._pointer = this.renderer.rect(0, 0, 0, 0, this.pointer.style), this.renderer.attr(this._pointer, this.pointer.style), this._setValue(this.value) }, _renderArrowPointer: function () { var e = this._getArrowPathByValue(0); this._pointer = this.renderer.path(e, this.pointer.style) }, _renderArrowPointerByValue: function (e) { var t = this._getArrowPathByValue(e); this._pointer = this.renderer.path(t, this.pointer.style) }, _getArrowPathByValue: function (e) { var t, i, s, r = this._getBorderSize(), o = Math.ceil(this._valueToCoordinates(e)) + r, a = r, n = Math.ceil(this._getSize(this.ticksOffset[0], "width")), l = (Math.ceil(this._getSize(this.ticksOffset[1], "height")), Math.ceil(this._getSize(this.pointer.offset))), h = Math.ceil(this._getMaxTickSize()), d = Math.ceil(this._getSize(this.pointer.size)), c = Math.ceil(Math.sqrt(d * d / 3)); return "vertical" === this.orientation ? t = "M " + (a += n + h + l) + " " + o + " L " + (i = l >= 0 ? a + d : a - d) + " " + (o - c) + " L " + i + " " + (o + c) : (a += n + h + l + this._getMaxLabelSize().height, this._isVML && (a -= 2), s = o, o = a, t = "M " + (a = s) + " " + o + " L " + (a - c) + " " + (i = o - d) + " L " + (a + c) + " " + i), t }, _setValue: function (e) { "default" === this.pointer.pointerType ? this._performColumnPointerLayout(e) : this._performArrowPointerLayout(e), this.value = e }, _performColumnPointerLayout: function (e) { var t = this._valueToCoordinates(this.min), i = this._valueToCoordinates(e), s = Math.abs(t - i), r = this._getBorderSize(), o = this._getSize(this.ticksOffset[0], "width"), a = this._getSize(this.ticksOffset[1], "height"), n = this._getMaxTickSize(), l = this._getSize(this.pointer.size), h = this._getSize(this.pointer.offset), d = {}; d = "vertical" === this.orientation ? { left: o + n + h + 1 + r, top: i, height: s, width: l } : { left: t, top: a + n + h - l - 1 + r, height: l, width: s }, this._setRectAttrs(d) }, _performArrowPointerLayout: function (t) { var i = this._getArrowPathByValue(t); this._isVML ? (this._pointer && e(this._pointer).remove(), this._renderArrowPointerByValue(t)) : this.renderer.attr(this._pointer, { d: i }) }, _setRectAttrs: function (e) { this._isVML ? (this._pointer.style.top = e.top, this._pointer.style.left = e.left, this._pointer.style.width = e.width, this._pointer.style.height = e.height) : (this.renderer.attr(this._pointer, { x: e.left }), this.renderer.attr(this._pointer, { y: e.top }), this.renderer.attr(this._pointer, { width: e.width }), this.renderer.attr(this._pointer, { height: e.height })) }, _valueToCoordinates: function (e) { var t = this._getBorderSize(), i = this._getScaleLength(), s = this._getSize(this.ticksOffset[0], "width"), r = this._getSize(this.ticksOffset[1], "height"), o = Math.abs(this.min - e), a = Math.abs(this.max - this.min); return "vertical" === this.orientation ? this._height - o / a * i - (this._height - r - i) + t : o / a * i + (this._width - s - i) + t }, _getSize: function (e, t) { return t = t || ("vertical" === this.orientation ? "width" : "height"), e.toString().indexOf("%") >= 0 && (e = parseInt(e, 10) / 100 * this["_" + t]), e = parseInt(e, 10) }, propertyChangedHandler: function (t, i, s, r) { if (r != s) { if ("min" == i && (this.min = parseInt(r), e.jqx.aria(this, "aria-valuemin", r)), "max" == i && (this.max = parseInt(r), e.jqx.aria(this, "aria-valuemax", r)), "value" == i && (this.value = parseInt(r)), "disabled" === i) r ? this.disable() : this.enable(), e.jqx.aria(this, "aria-disabled", r); else if ("value" === i) void 0 != this._timeout && (clearTimeout(this._timeout), this._timeout = null), this.value = s, this.setValue(r); else { if ("colorScheme" === i) this.pointer.style = null; else if ("orientation" === i && s !== r) { var o = this.ticksOffset[0]; this.ticksOffset[0] = this.ticksOffset[1], this.ticksOffset[1] = o } "animationDuration" !== i && "easing" !== i && this.refresh() } this.renderer instanceof e.jqx.HTML5Renderer && this.renderer.refresh() } }, _backgroundConstructor: function (e, t) { if (this.host) return new this._backgroundConstructor(e, t); var i = { rectangle: !0, roundedRectangle: !0 }; e = e || {}, this.style = e.style || { stroke: "#cccccc", fill: null }, e.visible || void 0 === e.visible ? this.visible = !0 : this.visible = !1, i[e.backgroundType] ? this.backgroundType = e.backgroundType : this.backgroundType = "roundedRectangle", "roundedRectangle" === this.backgroundType && ("number" == typeof e.borderRadius ? this.borderRadius = e.borderRadius : this.borderRadius = 15), void 0 === e.showGradient ? this.showGradient = !0 : this.showGradient = e.showGradient }, resize: function (e, t) { this.width = e, this.height = t, this.refresh() }, _tickConstructor: function (e, t) { if (this.host) return new this._tickConstructor(e, t); this.size = t._validatePercentage(e.size, "10%"), this.interval = parseFloat(e.interval), this.interval || (this.interval = 5), this.style = e.style || { stroke: "#A1A1A1", "stroke-width": "1px" }, void 0 === e.visible ? this.visible = !0 : this.visible = e.visible }, _labelsConstructor: function (e, t) { if (this.host) return new this._labelsConstructor(e, t); this.position = e.position, "far" !== this.position && "near" !== this.position && "both" !== this.position && (this.position = "both"), "function" == typeof e.formatValue ? this.formatValue = e.formatValue : this.formatValue = function (e) { return e }, this.visible = e.visible, !1 !== this.visible && !0 !== this.visible && (this.visible = !0), "number" != typeof e.interval ? this.interval = 10 : this.interval = e.interval, this.offset = t._validatePercentage(e.offset, 0) }, _rangeConstructor: function (e, t) { if (this.host) return new this._rangeConstructor(e, t); "number" == typeof e.startValue ? this.startValue = e.startValue : this.startValue = t.min, "number" == typeof e.endValue && e.endValue > e.startValue ? this.endValue = e.endValue : this.endValue = this.startValue + 1, this.style = e.style || { fill: "#dddddd", stroke: "#dddddd" } }, _pointerConstructor: function (e, t) { if (this.host) return new this._pointerConstructor(e, t); var i = t._getColorScheme(t.colorScheme)[0]; this.pointerType = e.pointerType, "default" !== this.pointerType && "arrow" !== this.pointerType && (this.pointerType = "default"), this.style = e.style || { fill: i, stroke: i, "stroke-width": 1 }, this.size = t._validatePercentage(e.size, "7%"), this.visible = e.visible, !0 !== this.visible && !1 !== this.visible && (this.visible = !0), this.offset = t._validatePercentage(e.offset, 0) } }; e.extend(t, i), e.extend(s, i), e.jqx.jqxWidget("jqxLinearGauge", "", {}), e.jqx.jqxWidget("jqxGauge", "", {}), e.extend(e.jqx._jqxGauge.prototype, t), e.extend(e.jqx._jqxLinearGauge.prototype, s) }(jQuery), function (e) { e.jqx.jqxWidget("jqxCheckBox", "", {}), e.extend(e.jqx._jqxCheckBox.prototype, { defineInstance: function () { this.animationShowDelay = 300, this.animationHideDelay = 300, this.width = null, this.height = null, this.boxSize = "13px", this.checked = !1, this.hasThreeStates = !1, this.disabled = !1, this.enableContainerClick = !0, this.locked = !1, this.groupName = "", this.keyboardCheck = !0, this.enableHover = !0, this.hasInput = !0, this.rtl = !1, this.updated = null, this.disabledContainer = !1, this._canFocus = !0, this.aria = { "aria-checked": { name: "checked", type: "boolean" }, "aria-disabled": { name: "disabled", type: "boolean" } }, this.events = ["checked", "unchecked", "indeterminate", "change"] }, createInstance: function (e) { this.render() }, _addInput: function () { if (this.hasInput) { this.input && this.input.remove(); var t = this.host.attr("name"); this.input = e("<input type='hidden'/>"), this.host.append(this.input), t && this.input.attr("name", t), this.input.val(this.checked), this.host.attr("role", "checkbox"), e.jqx.aria(this) } }, render: function () { this.init = !0; var t = this; this.setSize(), this.propertyChangeMap.width = function (e, i, s, r) { t.setSize() }, this.propertyChangeMap.height = function (e, i, s, r) { t.setSize() }, this._removeHandlers(), this.checkbox && (this.checkbox.remove(), this.checkbox = null), this.checkMark && (this.checkMark.remove(), this.checkMark = null), this.box && (this.box.remove(), this.box = null), this.clear && (this.clear.remove(), this.clear = null), null == this.boxSize && (this.boxSize = 13); var i = parseInt(this.boxSize) + "px"; this.checkbox = e('<div><div style="width: ' + i + "; height: " + i + ';"><span style="width: ' + i + "; height: " + i + ';"></span></div></div>'), this.host.prepend(this.checkbox), this.disabledContainer || (this.host.attr("tabIndex") || this.host.attr("tabIndex", 0), this.clear = e('<div style="clear: both;"></div>'), this.host.append(this.clear)), this.checkMark = e(this.checkbox[0].firstChild.firstChild), this.box = this.checkbox, this.box.addClass(this.toThemeProperty("jqx-checkbox-default") + " " + this.toThemeProperty("jqx-fill-state-normal") + " " + this.toThemeProperty("jqx-rc-all")), this.disabled && this.disable(), this.disabledContainer || (this.host.addClass(this.toThemeProperty("jqx-widget")), this.host.addClass(this.toThemeProperty("jqx-checkbox"))), this.locked && !this.disabledContainer && this.host.css("cursor", "auto"); var s = this.element.getAttribute("checked"); "checked" != s && "true" != s && 1 != s || (this.checked = !0), this._addInput(), this._render(), this._addHandlers(), this.init = !1 }, refresh: function (e) { e || (this.setSize(), this._render()) }, resize: function (e, t) { this.width = e, this.height = t, this.refresh() }, setSize: function () { null != this.width && -1 != this.width.toString().indexOf("px") ? this.host.width(this.width) : void 0 == this.width || isNaN(this.width) || this.host.width(this.width), null != this.height && -1 != this.height.toString().indexOf("px") ? this.host.height(this.height) : void 0 == this.height || isNaN(this.height) || this.host.height(this.height) }, _addHandlers: function () { var t = this, i = "mousedown"; e.jqx.mobile.isTouchDevice() && (i = e.jqx.mobile.getTouchEventName("touchend")), this.addHandler(this.box, i, function (e) { if (!t.disabled && !t.enableContainerClick && !t.locked) return t.toggle(), t.updated && (e.owner = t, t.updated(e, t.checked, t.oldChecked)), e.preventDefault && e.preventDefault(), !1 }), this.disabledContainer || (this.addHandler(this.host, "keydown", function (e) { if (!t.disabled && !t.locked && t.keyboardCheck && 32 == e.keyCode) return !t._canFocus || (t.toggle(), t.updated && (e.owner = t, t.updated(e, t.checked, t.oldChecked)), e.preventDefault && e.preventDefault(), !1) }), this.addHandler(this.host, i, function (e) { if (!t.disabled && t.enableContainerClick && !t.locked) return t.toggle(), e.preventDefault && e.preventDefault(), !1 }), this.addHandler(this.host, "selectstart", function (e) { if (!t.disabled && t.enableContainerClick) return e.preventDefault && e.preventDefault(), !1 }), this.addHandler(this.host, "mouseup", function (e) { !t.disabled && t.enableContainerClick && e.preventDefault && e.preventDefault() }), this.addHandler(this.host, "focus", function (e) { if (!t.disabled && !t.locked) return !t._canFocus || (t.enableHover && t.box.addClass(t.toThemeProperty("jqx-checkbox-hover")), t.box.addClass(t.toThemeProperty("jqx-fill-state-focus")), e.preventDefault && e.preventDefault(), t.hovered = !0, !1) }), this.addHandler(this.host, "blur", function (e) { if (!t.disabled && !t.locked) return !t._canFocus || (t.enableHover && t.box.removeClass(t.toThemeProperty("jqx-checkbox-hover")), t.box.removeClass(t.toThemeProperty("jqx-fill-state-focus")), e.preventDefault && e.preventDefault(), t.hovered = !1, !1) }), this.addHandler(this.host, "mouseenter", function (e) { if (t.locked && t.host.css("cursor", "arrow"), t.enableHover && !t.disabled && t.enableContainerClick && !t.locked) return t.box.addClass(t.toThemeProperty("jqx-checkbox-hover")), t.box.addClass(t.toThemeProperty("jqx-fill-state-hover")), e.preventDefault && e.preventDefault(), t.hovered = !0, !1 }), this.addHandler(this.host, "mouseleave", function (e) { if (t.enableHover && !t.disabled && t.enableContainerClick && !t.locked) return t.box.removeClass(t.toThemeProperty("jqx-checkbox-hover")), t.box.removeClass(t.toThemeProperty("jqx-fill-state-hover")), e.preventDefault && e.preventDefault(), t.hovered = !1, !1 }), this.addHandler(this.box, "mouseenter", function () { t.locked || t.disabled || t.enableContainerClick || (t.box.addClass(t.toThemeProperty("jqx-checkbox-hover")), t.box.addClass(t.toThemeProperty("jqx-fill-state-hover"))) }), this.addHandler(this.box, "mouseleave", function () { t.disabled || t.enableContainerClick || (t.box.removeClass(t.toThemeProperty("jqx-checkbox-hover")), t.box.removeClass(t.toThemeProperty("jqx-fill-state-hover"))) })) }, focus: function () { try { this.host.focus() } catch (e) { } }, _removeHandlers: function () { var t = "mousedown"; e.jqx.mobile.isTouchDevice() && (t = "touchend"), this.box && (this.removeHandler(this.box, t), this.removeHandler(this.box, "mouseenter"), this.removeHandler(this.box, "mouseleave")), this.removeHandler(this.host, t), this.removeHandler(this.host, "mouseup"), this.removeHandler(this.host, "selectstart"), this.removeHandler(this.host, "mouseenter"), this.removeHandler(this.host, "mouseleave"), this.removeHandler(this.host, "keydown"), this.removeHandler(this.host, "blur"), this.removeHandler(this.host, "focus") }, _render: function () { this.disabled ? this.disable() : this.enableContainerClick ? this.host.css("cursor", "pointer") : this.init || this.host.css("cursor", "auto"), this.rtl && (this.box.addClass(this.toThemeProperty("jqx-checkbox-rtl")), this.host.addClass(this.toThemeProperty("jqx-rtl"))), this.updateStates() }, _setState: function (e) { this.checked != e && (this.checked = e, this.checked ? this.checkMark[0].className = this.toThemeProperty("jqx-checkbox-check-checked") : null == this.checked ? this.checkMark[0].className = this.toThemeProperty("jqx-checkbox-check-indeterminate") : this.checkMark[0].className = "") }, val: function (e) { return 0 == arguments.length || null != e && "object" == typeof e ? this.checked : ("string" == typeof e ? ("true" == e && this.check(), "false" == e && this.uncheck(), "" == e && this.indeterminate()) : (1 == e && this.check(), 0 == e && this.uncheck(), null == e && this.indeterminate()), this.checked) }, check: function () { this.checked = !0; var t = this; if (this.checkMark.removeClass(), e.jqx.browser.msie || 0 == this.animationShowDelay ? this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-checked")) : (this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-checked")), this.checkMark.css("opacity", 0), this.checkMark.stop().animate({ opacity: 1 }, this.animationShowDelay, function () { })), null != this.groupName && this.groupName.length > 0) { var i = e.find(this.toThemeProperty(".jqx-checkbox", !0)); e.each(i, function () { e(this).jqxCheckBox("groupName") == t.groupName && this != t.element && e(this).jqxCheckBox("uncheck") }) } this._raiseEvent("0", !0), this._raiseEvent("3", { checked: !0 }), void 0 != this.input && (this.input.val(this.checked), e.jqx.aria(this, "aria-checked", this.checked)) }, uncheck: function () { this.checked = !1; var t = this; e.jqx.browser.msie || 0 == this.animationHideDelay ? "" != t.checkMark[0].className && (t.checkMark[0].className = "") : (this.checkMark.css("opacity", 1), this.checkMark.stop().animate({ opacity: 0 }, this.animationHideDelay, function () { "" != t.checkMark[0].className && (t.checkMark[0].className = "") })), this._raiseEvent("1"), this._raiseEvent("3", { checked: !1 }), void 0 != this.input && (this.input.val(this.checked), e.jqx.aria(this, "aria-checked", this.checked)) }, indeterminate: function () { this.checked = null, this.checkMark.removeClass(), e.jqx.browser.msie || 0 == this.animationShowDelay ? this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-indeterminate")) : (this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-indeterminate")), this.checkMark.css("opacity", 0), this.checkMark.stop().animate({ opacity: 1 }, this.animationShowDelay, function () { })), this._raiseEvent("2"), this._raiseEvent("3", { checked: null }), void 0 != this.input && (this.input.val(this.checked), e.jqx.aria(this, "aria-checked", "undefined")) }, toggle: function () { this.disabled || this.locked || (null != this.groupName && this.groupName.length > 0 ? 1 != this.checked && (this.checked = !0, this.updateStates()) : (this.oldChecked = this.checked, 1 == this.checked ? this.checked = !!this.hasThreeStates && null : this.checked = null != this.checked, this.updateStates(), void 0 != this.input && this.input.val(this.checked))) }, updateStates: function () { this.checked ? this.check() : 0 == this.checked ? this.uncheck() : null == this.checked && this.indeterminate() }, disable: function () { this.disabled = !0, 1 == this.checked ? this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-disabled")) : null == this.checked && this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-indeterminate-disabled")), this.box.addClass(this.toThemeProperty("jqx-checkbox-disabled-box")), this.host.addClass(this.toThemeProperty("jqx-checkbox-disabled")), this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")), this.box.addClass(this.toThemeProperty("jqx-checkbox-disabled")), e.jqx.aria(this, "aria-disabled", this.disabled) }, enable: function () { 1 == this.checked ? this.checkMark.removeClass(this.toThemeProperty("jqx-checkbox-check-disabled")) : null == this.checked && this.checkMark.removeClass(this.toThemeProperty("jqx-checkbox-check-indeterminate-disabled")), this.box.removeClass(this.toThemeProperty("jqx-checkbox-disabled-box")), this.host.removeClass(this.toThemeProperty("jqx-checkbox-disabled")), this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")), this.box.removeClass(this.toThemeProperty("jqx-checkbox-disabled")), this.disabled = !1, e.jqx.aria(this, "aria-disabled", this.disabled) }, destroy: function () { this.host.remove() }, _raiseEvent: function (e, t) { if (!this.init) { var i = this.events[e], s = new jQuery.Event(i); s.owner = this, s.args = t; try { var r = this.host.trigger(s) } catch (e) { } return r } }, propertyChangedHandler: function (t, i, s, r) { if (void 0 != this.isInitialized && 0 != this.isInitialized) { if (i != t.enableContainerClick || t.disabled || t.locked || (r ? t.host.css("cursor", "pointer") : t.host.css("cursor", "auto")), "rtl" == i && (r ? (t.box.addClass(t.toThemeProperty("jqx-checkbox-rtl")), t.host.addClass(t.toThemeProperty("jqx-rtl"))) : (t.box.removeClass(t.toThemeProperty("jqx-checkbox-rtl")), t.host.removeClass(t.toThemeProperty("jqx-rtl")))), "boxSize" == i && t.render(), "theme" == i && e.jqx.utilities.setTheme(s, r, t.host), "checked" == i && r != s) switch (r) { case !0: t.check(); break; case !1: t.uncheck(); break; case null: t.indeterminate() } "disabled" == i && r != s && (r ? t.disable() : t.enable()) } } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxButtonGroup", "", {}), e.extend(e.jqx._jqxButtonGroup.prototype, { defineInstance: function () { var t = { mode: "default", roundedCorners: !0, disabled: !1, enableHover: !1, orientation: "horizontal", width: null, height: null, _eventsMap: { mousedown: e.jqx.mobile.getTouchEventName("touchstart"), mouseup: e.jqx.mobile.getTouchEventName("touchend") }, _events: ["selected", "unselected", "buttonclick"], _buttonId: {}, _selected: null, _pressed: null, rtl: !1, _baseId: "group_button", aria: { "aria-disabled": { name: "disabled", type: "boolean" } } }; e.extend(!0, this, t) }, createInstance: function (t) { var i = this; i._isTouchDevice = e.jqx.mobile.isTouchDevice(), e.jqx.aria(i), i.addHandler(i.host, "selectstart", function (e) { i.disabled || e.preventDefault() }) }, refresh: function () { var e = this; e.width && (e.width.toString() && e.width.indexOf("%") >= 0 ? e.element.style.width = e.width : e.host.width(e.width)), e.height && e.host.height(e.height), e._refreshButtons() }, render: function () { this.refresh() }, resize: function () { this.refresh() }, _getEvent: function (e) { var t = this; if (t._isTouchDevice) { var i = t._eventsMap[e] || e; return i += "." + t.element.id } return e += "." + t.element.id }, _refreshButtons: function () { var t = this; t.lastElement && t.lastElement.remove(), t.lastElement = e("<div style='clear: both;'></div>"); var i, s = t.host.children(), r = s.length; switch (t.mode) { case "radio": t.host.attr("role", "radiogroup"); break; case "checkbox": case "default": t.host.attr("role", "group") } for (var o = new Number(100 / r).toFixed(2), a = 0; a < r; a += 1) i = e(s[a]), t.width && ("horizontal" === t.orientation ? (i.css("width", o + "%"), i.css("box-sizing", "border-box"), i.css("-moz-box-sizing", "border-box"), i.css("white-space", "nowrap"), i.css("text-overflow", "ellipsis"), i.css("overflow", "hidden")) : (i.css("box-sizing", "border-box"), i.css("-moz-box-sizing", "border-box"), i.css("width", "100%"))), t._refreshButton(i, a, r); t.lastElement.appendTo(t.host) }, _refreshButton: function (e, t, i) { (function (e) { var s = this; e = s._render(e), s._removeStyles(e), s._addStyles(e, t, i), s._performLayout(e), s._removeButtonListeners(e), s._addButtonListeners(e), s._handleButtonId(e, t), "radio" == s.mode ? e.attr("role", "radio") : e.attr("role", "button"), e.attr("disabled", s.disabled), s.disabled ? e.addClass(s.toThemeProperty("jqx-fill-state-disabled")) : e.removeClass(s.toThemeProperty("jqx-fill-state-disabled")) }).apply(this, [e]) }, destroy: function (t) { for (var i, s = this, r = s.host.children(), o = r.length, a = 0; a < o; a += 1) i = e(r[a]), s._removeStyles(i), s._removeButtonListeners(i); 0 != t && s.host.remove() }, _render: function (e) { var t = this; return "button" === e[0].tagName.toLowerCase() ? t._renderFromButton(e) : t._renderButton(e) }, _renderButton: function (e) { return e.wrapInner("<div/>"), e }, _removeStyles: function (e) { var t = this, i = t.toThemeProperty; t.host.removeClass("jqx-widget"), t.host.removeClass("jqx-rc-all"), e.removeClass(i.call(this, "jqx-fill-state-normal")), e.removeClass(i.call(this, "jqx-group-button-normal")), e.removeClass(i.call(this, "jqx-rc-tl")), e.removeClass(i.call(this, "jqx-rc-bl")), e.removeClass(i.call(this, "jqx-rc-tr")), e.removeClass(i.call(this, "jqx-rc-br")), e.css("margin-left", 0) }, _addStyles: function (e, t, i) { var s = this, r = this.toThemeProperty; s.host.addClass(r.call(this, "jqx-widget")), s.host.addClass(r.call(this, "jqx-rc-all")), s.host.addClass(r.call(this, "jqx-buttongroup")), e.addClass(r.call(this, "jqx-button")), e.addClass(r.call(this, "jqx-group-button-normal")), e.addClass(r.call(this, "jqx-fill-state-normal")), s.roundedCorners && (0 === t ? s._addRoundedCorners(e, !0) : t === i - 1 && s._addRoundedCorners(e, !1)), "horizontal" == s.orientation ? e.css("margin-left", -parseInt(e.css("border-left-width"), 10)) : e.css("margin-top", -parseInt(e.css("border-left-width"), 10)) }, _addRoundedCorners: function (e, t) { var i = this, s = i.toThemeProperty; "horizontal" == i.orientation ? t ? (e.addClass(s.call(this, "jqx-rc-tl")), e.addClass(s.call(this, "jqx-rc-bl"))) : (e.addClass(s.call(this, "jqx-rc-tr")), e.addClass(s.call(this, "jqx-rc-br"))) : t ? (e.addClass(s.call(this, "jqx-rc-tl")), e.addClass(s.call(this, "jqx-rc-tr"))) : (e.addClass(s.call(this, "jqx-rc-bl")), e.addClass(s.call(this, "jqx-rc-br"))) }, _centerContent: function (e, t) { return e.css({ "margin-top": (t.height() - e.height()) / 2, "margin-left": (t.width() - e.width()) / 2 }), e }, _renderFromButton: function (t) { var i = t.val(); "" == i && (i = t.html()); var s, r = t[0].id; return t.wrap("<div/>"), (s = t.parent()).attr("style", t.attr("style")), t.remove(), e.jqx.utilities.html(s, i), s[0].id = r, s }, _performLayout: function (t) { "horizontal" == this.orientation ? this.rtl ? t.css("float", "right") : t.css("float", "left") : t.css("float", "none"), this._centerContent(e(t.children()), t) }, _mouseEnterHandler: function (t) { var i = t.data.self, s = e(t.currentTarget); if (!i._isDisabled(s) && i.enableHover) { var r = i.toThemeProperty; s.addClass(r.call(i, "jqx-group-button-hover")), s.addClass(r.call(i, "jqx-fill-state-hover")) } }, _mouseLeaveHandler: function (t) { var i = t.data.self, s = e(t.currentTarget); if (!i._isDisabled(s) && i.enableHover) { var r = i.toThemeProperty; s.removeClass(r.call(i, "jqx-group-button-hover")), s.removeClass(r.call(i, "jqx-fill-state-hover")) } }, _mouseDownHandler: function (t) { var i = t.data.self, s = e(t.currentTarget); if (!i._isDisabled(s)) { i._pressed = s; var r = i.toThemeProperty; s.addClass(r.call(i, "jqx-group-button-pressed")), s.addClass(r.call(i, "jqx-fill-state-pressed")) } }, _mouseUpHandler: function (t) { var i = t.data.self, s = e(t.currentTarget); i._isDisabled(s) || (i._handleSelection(s), i._pressed = null, s = i._buttonId[s[0].id], i._raiseEvent(2, { index: s.num, button: s.btn })) }, _isDisabled: function (e) { return !(!e || !e[0]) && this._buttonId[e[0].id].disabled }, _documentUpHandler: function (e) { var t = e.data.self, i = t._pressed; i && !t._buttonId[i[0].id].selected && (i.removeClass(t.toThemeProperty("jqx-fill-state-pressed")), t._pressed = null) }, _addButtonListeners: function (t) { var i = this, s = i.addHandler, r = i._getEvent; s(t, r.call(i, "mouseenter"), i._mouseEnterHandler, { self: i }), s(t, r.call(i, "mouseleave"), i._mouseLeaveHandler, { self: i }), s(t, r.call(i, "mousedown"), i._mouseDownHandler, { self: i }), s(t, r.call(i, "mouseup"), i._mouseUpHandler, { self: i }), s(e(document), r.call(i, "mouseup"), i._documentUpHandler, { self: i }) }, _removeButtonListeners: function (t) { var i = this, s = i.removeHandler, r = i._getEvent; s(t, r.call(i, "mouseenter"), i._mouseEnterHandler), s(t, r.call(i, "mouseleave"), i._mouseLeaveHandler), s(t, r.call(i, "mousedown"), i._mouseDownHandler), s(t, r.call(i, "mouseup"), i._mouseUpHandler), s(e(document), r.call(i, "mouseup"), i._documentUpHandler) }, _handleSelection: function (e) { var t = this; "radio" === t.mode ? t._handleRadio(e) : "checkbox" === t.mode ? t._handleCheckbox(e) : t._handleDefault(e) }, _handleRadio: function (e) { var t = this, i = t._getSelectedButton(); i && i.btn[0].id !== e[0].id && t._unselectButton(i.btn, !0); for (var s in t._buttonId) t._buttonId[s].selected = !0, t._unselectButton(t._buttonId[s].btn, !1); t._selectButton(e, !0) }, _handleCheckbox: function (e) { var t = this, i = t._buttonId[e[0].id]; i.selected ? t._unselectButton(i.btn, !0) : t._selectButton(e, !0) }, _handleDefault: function (e) { var t = this; t._selectButton(e, !1); for (var i in t._buttonId) t._buttonId[i].selected = !0, t._unselectButton(t._buttonId[i].btn, !1) }, _getSelectedButton: function () { var e = this; for (var t in e._buttonId) if (e._buttonId[t].selected) return e._buttonId[t]; return null }, _getSelectedButtons: function () { var e = this, t = []; for (var i in e._buttonId) e._buttonId[i].selected && t.push(e._buttonId[i].num); return t }, _getButtonByIndex: function (e) { var t = this; for (var i in t._buttonId) if (t._buttonId[i].num === e) return t._buttonId[i]; return null }, _selectButton: function (t, i) { var s = this, r = s._buttonId[t[0].id]; if (!r.selected) { var o = s.toThemeProperty; r.btn.addClass(o.call(this, "jqx-group-button-pressed")), r.btn.addClass(o.call(this, "jqx-fill-state-pressed")), r.selected = !0, i && s._raiseEvent(0, { index: r.num, button: r.btn }), e.jqx.aria(r.btn, "aria-checked", !0) } }, _unselectButton: function (t, i) { var s = this, r = s._buttonId[t[0].id]; if (r.selected) { var o = s.toThemeProperty; r.btn.removeClass(o.call(this, "jqx-group-button-pressed")), r.btn.removeClass(o.call(this, "jqx-fill-state-pressed")), r.selected = !1, i && s._raiseEvent(1, { index: r.num, button: r.btn }), e.jqx.aria(r.btn, "aria-checked", !1) } }, setSelection: function (e) { var t = this; if (-1 !== e) if ("checkbox" === t.mode) if ("number" == typeof e) t._setSelection(e); else for (var i = 0; i < e.length; i += 1) t._setSelection(e[i]); else "number" == typeof e && "radio" === t.mode && t._setSelection(e); else t.clearSelection() }, _setSelection: function (e) { var t = this, i = t._getButtonByIndex(e); i && t._handleSelection(i.btn) }, getSelection: function () { var e = this; if ("radio" === e.mode) { if (e._getSelectedButton()) return e._getSelectedButton().num } else if ("checkbox" === e.mode) return e._getSelectedButtons() }, disable: function () { var t = this; t.disabled = !0; var i; for (var s in t._buttonId) i = t._buttonId[s], t.disableAt(i.num); e.jqx.aria(t, "aria-disabled", !0) }, enable: function () { var t = this; t.disabled = !1; var i; for (var s in t._buttonId) i = t._buttonId[s], t.enableAt(i.num); e.jqx.aria(t, "aria-disabled", !1) }, disableAt: function (e) { var t = this, i = t._getButtonByIndex(e); i.disabled || (i.disabled = !0, i.btn.addClass(t.toThemeProperty("jqx-fill-state-disabled"))) }, enableAt: function (e) { var t = this, i = t._getButtonByIndex(e); i.disabled && (i.disabled = !1, i.btn.removeClass(t.toThemeProperty("jqx-fill-state-disabled"))) }, _handleButtonId: function (e, t) { var i = e[0].id, s = { btn: e, num: t, selected: !1 }; return i || (i = this._baseId + e.index()), e[0].id = i, this._buttonId[i] = s, i }, _raiseEvent: function (t, i) { var s = e.Event(this._events[t]); return s.args = i, this.host.trigger(s) }, _unselectAll: function () { for (var e in this._buttonId) this._unselectButton(this._buttonId[e].btn, !1) }, clearSelection: function () { this._unselectAll() }, propertyChangedHandler: function (t, i, s, r) { if ("theme" == i && null != r && e.jqx.utilities.setTheme(s, r, t.host), "mode" === i) return t._unselectAll(), void t.refresh(); "disabled" === i ? r ? t.disable() : t.enable() : t.refresh() } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxListBox", "", {}), e.extend(e.jqx._jqxListBox.prototype, { defineInstance: function () { this.disabled = !1, this.width = null, this.height = null, this.items = new Array, this.multiple = !1, this.selectedIndex = -1, this.selectedIndexes = new Array, this.source = null, this.scrollBarSize = e.jqx.utilities.scrollBarSize, this.enableHover = !0, this.enableSelection = !0, this.visualItems = new Array, this.groups = new Array, this.equalItemsWidth = !0, this.itemHeight = -1, this.visibleItems = new Array, this.emptyGroupText = "Group", this.checkboxes = !1, this.hasThreeStates = !1, this.autoHeight = !1, this.autoItemsHeight = !1, this.roundedcorners = !0, this.touchMode = "auto", this.displayMember = "", this.valueMember = "", this.searchMode = "startswithignorecase", this.incrementalSearch = !0, this.incrementalSearchDelay = 1e3, this.incrementalSearchKeyDownDelay = 300, this.allowDrag = !1, this.allowDrop = !0, this.dropAction = "default", this.touchModeStyle = "auto", this.keyboardNavigation = !0, this.enableMouseWheel = !0, this.multipleextended = !1, this.emptyString = "", this.rtl = !1, this.rendered = null, this.renderer = null, this.dragStart = null, this.dragEnd = null, this.focusable = !0, this.ready = null, this._checkForHiddenParent = !0, this.autoBind = !0, this.aria = { "aria-disabled": { name: "disabled", type: "boolean" } }, this.events = ["select", "unselect", "change", "checkChange", "dragStart", "dragEnd", "bindingComplete"] }, createInstance: function (t) { 15 != e.jqx.utilities.scrollBarSize && (this.scrollBarSize = e.jqx.utilities.scrollBarSize), null == this.width && (this.width = 200), null == this.height && (this.height = 200), this.render(); var i = this; e.jqx.utilities.resize(this.host, function () { i._updateSize() }, !1, this._checkForHiddenParent) }, resize: function (e, t) { this.width = e, this.height = t, this._updateSize() }, render: function () { this.element.innerHTML = ""; var t = this.element.className; t += " " + this.toThemeProperty("jqx-listbox"), t += " " + this.toThemeProperty("jqx-reset"), t += " " + this.toThemeProperty("jqx-rc-all"), t += " " + this.toThemeProperty("jqx-widget"), t += " " + this.toThemeProperty("jqx-widget-content"), this.element.className = t; null != this.width && -1 != this.width.toString().indexOf("%") && this.host.width(this.width), null != this.height && -1 != this.height.toString().indexOf("%") && (this.host.height(this.height), 0 == this.host.height() && this.host.height(200)), null != this.width && -1 != this.width.toString().indexOf("px") ? this.host.width(this.width) : void 0 == this.width || isNaN(this.width) || (this.element.style.width = parseInt(this.width) + "px"), null != this.height && -1 != this.height.toString().indexOf("px") ? this.host.height(this.height) : void 0 == this.height || isNaN(this.height) || (this.element.style.height = parseInt(this.height) + "px"), this.multiple || this.multipleextended || this.checkboxes ? e.jqx.aria(this, "aria-multiselectable", !0) : e.jqx.aria(this, "aria-multiselectable", !1); var i = e("<div style='-webkit-appearance: none; background: transparent; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div style='-webkit-appearance: none; border: none; background: transparent; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='listBoxContent' style='-webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='verticalScrollBar" + this.element.id + "' style='visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='horizontalScrollBar" + this.element.id + "' style='visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; border: none; position: absolute;'/></div></div>"); this._checkForHiddenParent && (this._addInput(), this.host.attr("tabIndex") || this.host.attr("tabIndex", 1)), this.host.attr("role", "listbox"), this.host.append(i); var s = this.host.find("#verticalScrollBar" + this.element.id); if (!this.host.jqxButton) throw new Error("jqxListBox: Missing reference to jqxbuttons.js."); if (!s.jqxScrollBar) throw new Error("jqxListBox: Missing reference to jqxscrollbar.js."); var r = parseInt(this.host.height()) / 2; 0 == r && (r = 10), this.vScrollBar = s.jqxScrollBar({ _initialLayout: !0, vertical: !0, rtl: this.rtl, theme: this.theme, touchMode: this.touchMode, largestep: r }); var o = this.host.find("#horizontalScrollBar" + this.element.id); if (this.hScrollBar = o.jqxScrollBar({ _initialLayout: !0, vertical: !1, rtl: this.rtl, touchMode: this.touchMode, theme: this.theme }), this.content = this.host.find("#listBoxContent"), this.content[0].id = "listBoxContent" + this.element.id, this.bottomRight = this.host.find("#bottomRight").addClass(this.toThemeProperty("jqx-listbox-bottomright")).addClass(this.toThemeProperty("jqx-scrollbar-state-normal")), this.bottomRight[0].id = "bottomRight" + this.element.id, this.vScrollInstance = e.data(this.vScrollBar[0], "jqxScrollBar").instance, this.hScrollInstance = e.data(this.hScrollBar[0], "jqxScrollBar").instance, this.isTouchDevice() && !(e.jqx.browser.msie && e.jqx.browser.version < 9)) { var a = e("<div class='overlay' style='z-index: 99; -webkit-appearance: none; border: none; background: black; opacity: 0.01; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div>"); this.content.parent().append(a), this.overlayContent = this.host.find(".overlay") } this._updateTouchScrolling(), this.host.addClass("jqx-disableselect"), this.host.jqxDragDrop && jqxListBoxDragDrop() }, _highlight: function (e, t) { var i = t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&"); return e.replace(new RegExp("(" + i + ")", "ig"), function (e, t) { return "<b>" + t + "</b>" }) }, _addInput: function () { var t = this.host.attr("name"); t && this.host.attr("name", ""), this.input = e("<input type='hidden'/>"), this.host.append(this.input), this.input.attr("name", t) }, _updateTouchScrolling: function () { var t = this; if (this.isTouchDevice()) { t.enableHover = !1; var i = this.overlayContent ? this.overlayContent : this.content; this.removeHandler(e(i), e.jqx.mobile.getTouchEventName("touchstart") + ".touchScroll"), this.removeHandler(e(i), e.jqx.mobile.getTouchEventName("touchmove") + ".touchScroll"), this.removeHandler(e(i), e.jqx.mobile.getTouchEventName("touchend") + ".touchScroll"), this.removeHandler(e(i), "touchcancel.touchScroll"), e.jqx.mobile.touchScroll(i, t.vScrollInstance.max, function (e, i) { if ("hidden" != t.vScrollBar.css("visibility")) { s = t.vScrollInstance.value; t.vScrollInstance.setPosition(s + i), t._lastScroll = new Date } if ("hidden" != t.hScrollBar.css("visibility")) { var s = t.hScrollInstance.value; t.hScrollInstance.setPosition(s + e), t._lastScroll = new Date } }, this.element.id, this.hScrollBar, this.vScrollBar), "visible" != t.vScrollBar.css("visibility") && "visible" != t.hScrollBar.css("visibility") ? e.jqx.mobile.setTouchScroll(!1, this.element.id) : e.jqx.mobile.setTouchScroll(!0, this.element.id), this._arrange() } }, isTouchDevice: function () { var t = e.jqx.mobile.isTouchDevice(); if (1 == this.touchMode) { if (this.touchDevice) return !0; if (e.jqx.browser.msie && e.jqx.browser.version < 9) return !1; this.touchDevice = !0, t = !0, e.jqx.mobile.setMobileSimulator(this.element) } else 0 == this.touchMode && (t = !1); return t && 0 != this.touchModeStyle && (this.scrollBarSize = e.jqx.utilities.touchScrollBarSize), t && this.host.addClass(this.toThemeProperty("jqx-touch")), t }, beginUpdate: function () { this.updatingListBox = !0 }, endUpdate: function () { this.updatingListBox = !1, this._addItems(), this._renderItems() }, beginUpdateLayout: function () { this.updating = !0 }, resumeUpdateLayout: function () { this.updating = !1, this.vScrollInstance.value = 0, this._render(!1) }, propertyChangedHandler: function (t, i, s, r) { if (void 0 != this.isInitialized && 0 != this.isInitialized) { if ("renderer" == i && (t._cachedItemHtml = new Array, t.refresh()), "itemHeight" == i && t.refresh(), "source" != i && "checkboxes" != i || (null == r && s && s.unbindBindingUpdate && (s.unbindBindingUpdate(t.element.id), s.unbindDownloadComplete(t.element.id)), t.clearSelection(), t.refresh()), "scrollBarSize" != i && "equalItemsWidth" != i || r != s && t._updatescrollbars(), "disabled" == i && (t._renderItems(), t.vScrollBar.jqxScrollBar({ disabled: r }), t.hScrollBar.jqxScrollBar({ disabled: r })), "touchMode" == i || "rtl" == i) { if (t._removeHandlers(), t.vScrollBar.jqxScrollBar({ touchMode: r }), t.hScrollBar.jqxScrollBar({ touchMode: r }), "touchMode" == i && !(e.jqx.browser.msie && e.jqx.browser.version < 9)) { var o = e("<div class='overlay' style='z-index: 99; -webkit-appearance: none; border: none; background: black; opacity: 0.01; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div>"); t.content.parent().append(o), t.overlayContent = t.host.find(".overlay") } t._updateTouchScrolling(), t._addHandlers(), t._render(!1) } if (this.updating || "width" != i && "height" != i || t._updateSize(), "theme" == i && s != r && (t.hScrollBar.jqxScrollBar({ theme: t.theme }), t.vScrollBar.jqxScrollBar({ theme: t.theme }), t.host.removeClass(), t.host.addClass(t.toThemeProperty("jqx-listbox")), t.host.addClass(t.toThemeProperty("jqx-widget")), t.host.addClass(t.toThemeProperty("jqx-widget-content")), t.host.addClass(t.toThemeProperty("jqx-reset")), t.host.addClass(t.toThemeProperty("jqx-rc-all")), t.refresh()), "selectedIndex" == i && (t.clearSelection(), t.selectIndex(r, !0)), "displayMember" == i || "valueMember" == i) { if (s != r) { var a = t.selectedIndex; t.refresh(), t.selectedIndex = a, t.selectedIndexes[a] = a } t._renderItems() } "autoHeight" == i && (s != r ? t._render(!1) : (t._updatescrollbars(), t._renderItems())), t._checkForHiddenParent && e.jqx.isHidden(t.host) && e.jqx.utilities.resize(this.host, function () { t._updateSize() }, !1, t._checkForHiddenParent) } }, loadFromSelect: function (t) { if (null != t) { var i = e("#" + t); if (i.length > 0) { var s = i.find("option"), r = i.find("optgroup"), o = 0, a = -1, n = new Array; e.each(s, function () { var t = r.find(this).length > 0, i = null; this.text == this.value || null != this.label && "" != this.label || (this.label = this.text); var s = { disabled: this.disabled, value: this.value, label: this.label, title: this.title, originalItem: this }; e.jqx.browser.msie && e.jqx.browser.version < 8 && "" == s.value && null != this.text && this.text.length > 0 && (s.value = this.text), t && (i = r.find(this).parent()[0].label, s.group = i), this.selected && (a = o), n[o] = s, o++ }), this.source = n, this.fromSelect = !0, this.clearSelection(), this.selectedIndex = a, this.selectedIndexes[this.selectedIndex] = this.selectedIndex, this.refresh() } } }, invalidate: function () { this._cachedItemHtml = [], this._renderItems(), this.virtualSize = null, this._updateSize() }, refresh: function (t) { var i = this; if (void 0 != this.vScrollBar) { this._cachedItemHtml = [], this.visibleItems = new Array; var s = function (e) { if (1 == e && -1 != i.selectedIndex) { var t = i.selectedIndex; i.selectedIndex = -1, i._stopEvents = !0, i.selectIndex(t, !1, !0), -1 == i.selectedIndex && (i.selectedIndex = t), i._stopEvents = !1 } }; if (null != this.itemswrapper && (this.itemswrapper.remove(), this.itemswrapper = null), e.jqx.dataAdapter && null != this.source && this.source._source) return this.databind(this.source, t), void s(t); (this.autoBind || !this.autoBind && !t) && (this.items = this.loadItems(this.source)), this._raiseEvent("6"), this._render(!1, 1 == t), s(t) } }, _render: function (e, t) { if (this._addItems(), this._renderItems(), this.vScrollInstance.setPosition(0), this._cachedItemHtml = new Array, (void 0 == e || e) && void 0 != this.items && null != this.items && this.selectedIndex >= 0 && this.selectedIndex < this.items.length && this.selectIndex(this.selectedIndex, !0, !0, !0), this.allowDrag && this._enableDragDrop && (this._enableDragDrop(), this.isTouchDevice())) return this._removeHandlers(), this.overlayContent && (this.overlayContent.remove(), this.overlayContent = null), this._updateTouchScrolling(), void this._addHandlers(); this._updateTouchScrolling(), this.rendered && this.rendered(), this.ready && this.ready() }, _hitTest: function (e, t) { var i = parseInt(this.vScrollInstance.value), s = this._searchFirstVisibleIndex(t + i, this.renderedVisibleItems); if (void 0 != this.renderedVisibleItems[s] && this.renderedVisibleItems[s].isGroup) return null; if (this.renderedVisibleItems.length > 0) { var r = this.renderedVisibleItems[this.renderedVisibleItems.length - 1]; if (r.height + r.top < t + i) return null } return s = this._searchFirstVisibleIndex(t + i), this.visibleItems[s] }, _searchFirstVisibleIndex: function (e, t) { void 0 == e && (e = parseInt(this.vScrollInstance.value)); var i = 0; void 0 != t && null != t || (t = this.visibleItems); for (var s = t.length; i <= s;) { mid = parseInt((i + s) / 2); var r = t[mid]; if (void 0 == r) break; if (r.initialTop > e && r.initialTop + r.height > e) s = mid - 1; else { if (!(r.initialTop < e && r.initialTop + r.height <= e)) return mid; i = mid + 1 } } return 0 }, _renderItems: function () { if (void 0 != this.items && 0 != this.items.length) { if (1 != this.updatingListBox) { var t = this.isTouchDevice(), i = this.vScrollInstance, s = this.hScrollInstance, r = parseInt(i.value), o = parseInt(s.value); this.rtl && "hidden" != this.hScrollBar[0].style.visibility && (o = s.max - o); this.items.length, this.host.width(); var a = parseInt(this.content[0].style.width), n = a + parseInt(s.max); parseInt(this.vScrollBar[0].style.width); "hidden" == this.vScrollBar[0].style.visibility && 0, "visible" != this.hScrollBar[0].style.visibility && (n = a); this._getVirtualItemsCount(); var l = new Array, h = 0, d = parseInt(this.element.style.height) + 2; -1 != this.element.style.height.indexOf("%") && (d = this.host.outerHeight()), isNaN(d) && (d = 0); var c = 0, u = 0, p = 0; if (0 == i.value || 0 == this.visibleItems.length) for (q = 0; q < this.items.length; q++) (S = this.items[q]).visible && (S.top = -r, S.initialTop = -r, !S.isGroup && S.visible && (this.visibleItems[u++] = S, S.visibleIndex = u - 1), this.renderedVisibleItems[p++] = S, S.left = -o, (x = S.top + S.height) >= 0 && S.top - S.height <= d && (l[h++] = { index: q, item: S }), r -= S.height); var m = r > 0 ? this._searchFirstVisibleIndex(this.vScrollInstance.value, this.renderedVisibleItems) : 0, g = 0; h = 0; for (var f = this.vScrollInstance.value, v = 0; g < 100 + d && void 0 != (S = this.renderedVisibleItems[m]) ;) { if (S.visible) { S.left = -o; var x = S.top + S.height - f; x >= 0 && S.initialTop - f - S.height <= 2 * d && (l[h++] = { index: m, item: S }) } if (m++, S.visible && (g += S.initialTop - f + S.height - g), ++v > this.items.length - 1) break } for (var w = this.toThemeProperty("jqx-listitem-state-normal") + " " + this.toThemeProperty("jqx-item"), b = this.toThemeProperty("jqx-listitem-state-group"), _ = this.toThemeProperty("jqx-listitem-state-disabled") + " " + this.toThemeProperty("jqx-fill-state-disabled"), y = 0, j = this, q = 0; q < this.visualItems.length; q++) { var T = this.visualItems[q], C = function () { var e = T[0].firstChild; j.checkboxes && (e = T[0].lastChild), null != e && (e.style.visibility = "hidden", e.className = ""), j.checkboxes && T.find(".chkbox").css({ visibility: "hidden" }) }; if (q < l.length) { var S = l[q].item; if (S.initialTop - f >= d) { C(); continue } var k = e(T[0].firstChild); if (this.checkboxes && (k = e(T[0].lastChild)), 0 == k.length) continue; if (null == k[0]) continue; k[0].className = "", k[0].style.display = "block", k[0].style.visibility = "inherit"; var I = ""; if (I = !S.isGroup && !this.selectedIndexes[S.index] >= 0 ? w : b, (S.disabled || this.disabled) && (I += " " + _), this.roundedcorners && (I += " " + this.toThemeProperty("jqx-rc-all")), t && (I += " " + this.toThemeProperty("jqx-listitem-state-normal-touch")), k[0].className = I, this.renderer) if (S.key || (S.key = this.generatekey()), this._cachedItemHtml || (this._cachedItemHtml = new Array), this._cachedItemHtml[S.key]) k[0].innerHTML != this._cachedItemHtml[S.key] && (k[0].innerHTML = this._cachedItemHtml[S.key]); else { var D = this.renderer(S.index, S.label, S.value); k[0].innerHTML = D, this._cachedItemHtml[S.key] = k[0].innerHTML } else { if (-1 !== this.itemHeight) { var P = 2 + 2 * parseInt(k.css("padding-top")); k[0].style.lineHeight = S.height - P + "px", k.css("vertical-align", "middle") } null != S.html && S.html.toString().length > 0 ? k[0].innerHTML = S.html : null != S.label || null != S.value ? null != S.label ? (k[0].innerHTML !== S.label && (k[0].innerHTML = S.label), "" == e.trim(S.label) && (k[0].innerHTML = this.emptyString, "" == this.emptyString && (k[0].style.height = S.height - 8 + "px")), this.incrementalSearch || S.disabled || void 0 != this.searchString && "" != this.searchString && (k[0].innerHTML = this._highlight(S.label.toString(), this.searchString))) : null === S.label ? (k[0].innerHTML = this.emptyString, "" == this.emptyString && (k[0].style.height = S.height - 8 + "px")) : k[0].innerHTML !== S.value ? k[0].innerHTML = S.value : "" == S.label && (k[0].innerHTML = " ") : "" != S.label && null != S.label || (k[0].innerHTML = "", k[0].style.height = S.height - 8 + "px") } if (T[0].style.left = S.left + "px", T[0].style.top = S.initialTop - f + "px", S.element = k[0], S.title && (k[0].title = S.title), this.equalItemsWidth && !S.isGroup) { if (0 == c) { var B = parseInt(n); B -= parseInt(k.outerWidth()) - parseInt(k.width()); var z = 1; c = B -= 2 * (z = null != z ? parseInt(z) : 0), this.checkboxes && "hidden" == this.hScrollBar[0].style.visibility && (c -= 18) } a > this.virtualSize.width ? (k[0].style.width = c + "px", S.width = c) : (k[0].style.width = -4 + this.virtualSize.width + "px", S.width = this.virtualSize.width - 4) } else k.width() < this.host.width() && k.width(this.host.width() - 2); if (this.rtl && (k[0].style.textAlign = "right"), this.autoItemsHeight && (k[0].style.whiteSpace = "normal", k.width(c), S.width = c), y = 0, this.checkboxes && !S.isGroup) { 0 == y && (y = (S.height - 16) / 2, y++), (E = e(T.children()[0]))[0].item = S, this.rtl ? "0px" != k[0].style.left && (k[0].style.left = "0px") : "18px" != k[0].style.left && (k[0].style.left = "18px"), this.rtl && E.css("left", 8 + S.width + "px"), E[0].style.top = y + "px", E[0].style.display = "block", E[0].style.visibility = "inherit"; var H = S.checked, M = S.checked ? " " + this.toThemeProperty("jqx-checkbox-check-checked") : ""; E[0].firstChild && E[0].firstChild.firstChild && E[0].firstChild.firstChild.firstChild && (H ? E[0].firstChild.firstChild.firstChild.className = M : !1 === H ? E[0].firstChild.firstChild.firstChild.className = "" : null === H && (E[0].firstChild.firstChild.firstChild.className = this.toThemeProperty("jqx-checkbox-check-indeterminate"))), e.jqx.ariaEnabled && (H ? T[0].setAttribute("aria-selected", !0) : T[0].removeAttribute("aria-selected")) } else if (this.checkboxes) { var E = e(T.children()[0]); E.css({ display: "none", visibility: "inherit" }) } this.selectedIndexes[S.visibleIndex] >= 0 && !S.disabled ? (k.addClass(this.toThemeProperty("jqx-listitem-state-selected")), k.addClass(this.toThemeProperty("jqx-fill-state-pressed")), e.jqx.ariaEnabled && (T[0].setAttribute("aria-selected", !0), this._activeElement = T[0])) : this.checkboxes || e.jqx.ariaEnabled && T[0].removeAttribute("aria-selected") } else C() } } } else this.visibleItems = new Array }, generatekey: function () { var e = function () { return (65536 * (1 + Math.random()) | 0).toString(16).substring(1) }; return e() + e() + "-" + e() + "-" + e() + "-" + e() + "-" + e() + e() + e() }, _calculateVirtualSize: function () { var t = 0, i = 2, s = 0, r = e("<span></span>"); this.equalItemsWidth && r.css("float", "left"); var o = 0, a = this.host.outerHeight(); e(document.body).append(r); var n = this.items.length, l = this.host.width(); if (this.autoItemsHeight && (l -= 10, "hidden" != this.vScrollBar.css("visibility") && (l -= 20)), this.autoItemsHeight || this.renderer || this.groups.length > 1 || n > 0 && null != this.items[0].html && "" != this.items[0].html) { for (s = 0; s < n; s++) if ((!(v = this.items[s]).isGroup || "" != v.label || "" != v.html) && v.visible) { x = ""; if (v.isGroup ? x += this.toThemeProperty("jqx-listitem-state-group jqx-rc-all") : x += this.toThemeProperty("jqx-listitem-state-normal jqx-rc-all"), x += " " + this.toThemeProperty("jqx-fill-state-normal"), this.isTouchDevice() && (x += " " + this.toThemeProperty("jqx-touch")), r[0].className = x, this.autoItemsHeight) { r[0].style.whiteSpace = "normal"; w = this.checkboxes ? -20 : 0; r[0].style.width = w + l + "px" } if (this.renderer) { var h = this.renderer(v.index, v.label, v.value); r[0].innerHTML = h } else null != v.html && v.html.toString().length > 0 ? r[0].innerHTML = v.html : null == v.label && null == v.value || (null != v.label ? (r[0].innerHTML = v.label, "" == v.label && (r[0].innerHTML = "Empty")) : r[0].innerHTML = v.value); var d = r.outerHeight(), c = r.outerWidth(); this.itemHeight > -1 && (d = this.itemHeight), v.height = d, v.width = c, i += d, t = Math.max(t, c), i <= a && o++ } } else { for (var i = 0, u = 0, p = "", m = 0, g = 0, f = -1, s = 0; s < n; s++) { var v = this.items[s]; if ((!v.isGroup || "" != v.label || "" != v.html) && v.visible) { var x = ""; if (0 == ++f) { if (x += this.toThemeProperty("jqx-listitem-state-normal jqx-rc-all"), x += " " + this.toThemeProperty("jqx-fill-state-normal"), x += " " + this.toThemeProperty("jqx-widget"), x += " " + this.toThemeProperty("jqx-listbox"), x += " " + this.toThemeProperty("jqx-widget-content"), this.isTouchDevice() && (x += " " + this.toThemeProperty("jqx-touch"), x += " " + this.toThemeProperty("jqx-listitem-state-normal-touch")), r[0].className = x, this.autoItemsHeight) { r[0].style.whiteSpace = "normal"; var w = this.checkboxes ? -20 : 0; r[0].style.width = w + l + "px" } null == v.html || "" == v.label || null == v.label ? r[0].innerHTML = "Item" : null != v.html && v.html.toString().length > 0 ? r[0].innerHTML = v.html : null == v.label && null == v.value || (null != v.label ? null != v.label.toString().match(new RegExp("\\w")) || null != v.label.toString().match(new RegExp("\\d")) ? r[0].innerHTML = v.label : r[0].innerHTML = "Item" : r[0].innerHTML = v.value); d = 1 + r.outerHeight(); this.itemHeight > -1 && (d = this.itemHeight), u = d } void 0 != m && (g = m), null != v.html && v.html.toString().length > 0 ? g != (m = Math.max(m, v.html.toString().length)) && (p = v.html) : null != v.label ? g != (m = Math.max(m, v.label.length)) && (p = v.label) : null != v.value && g != (m = Math.max(m, v.value.length)) && (p = v.value), v.height = u, (i += u) <= a && o++ } } r[0].innerHTML = p, t = r.outerWidth() } return i += 2, o < 10 && (o = 10), r.remove(), { width: t, height: i, itemsPerPage: o } }, _getVirtualItemsCount: function () { if (0 == this.virtualItemsCount) { var e = parseInt(this.host.height()) / 5; return e > this.items.length && (e = this.items.length), e } return this.virtualItemsCount }, _addItems: function (t) { if (1 != this.updatingListBox) { if (void 0 == this.items || 0 == this.items.length) return this.virtualSize = { width: 0, height: 0, itemsPerPage: 0 }, this._updatescrollbars(), this.renderedVisibleItems = new Array, void (this.itemswrapper && this.itemswrapper.children().remove()); if (0 == t) { o = 2 * (r = this._calculateVirtualSize()).itemsPerPage; this.autoHeight && (o = this.items.length), this.virtualItemsCount = Math.min(o, this.items.length); r.width; return this.virtualSize = r, void this._updatescrollbars() } var i = this, s = 0; this.visibleItems = new Array, this.renderedVisibleItems = new Array, this._removeHandlers(), this.allowDrag && this._enableDragDrop && (this.itemswrapper = null), null == this.itemswrapper && (this.content[0].innerHTML = "", this.itemswrapper = e('<div style="outline: 0 none; overflow:hidden; width:100%; position: relative;"></div>'), this.itemswrapper.height(2 * this.host.height()), this.content.append(this.itemswrapper)); var r = this._calculateVirtualSize(), o = 2 * r.itemsPerPage; this.autoHeight && (o = this.items.length), this.virtualItemsCount = Math.min(o, this.items.length); r.width; this.virtualSize = r, this.itemswrapper.width(Math.max(this.host.width(), 17 + r.width)); for (var a = "", n = e.jqx.browser.msie && e.jqx.browser.version < 9 ? ' unselectable="on"' : "", l = 0; l < this.virtualItemsCount; l++) { c = this.items[l]; if (a += "<div" + n + " role='option' id='" + ("listitem" + l + this.element.id) + "' class='jqx-listitem-element'>", this.checkboxes) { a += '<div style="background-color: transparent; padding: 0; margin: 0; position: absolute; float: left; width: 16px; height: 16px;" class="chkbox">'; var h = '<div class="' + this.toThemeProperty("jqx-checkbox-default") + " " + this.toThemeProperty("jqx-fill-state-normal") + " " + this.toThemeProperty("jqx-rc-all") + '"><div style="cursor: pointer; width: 13px; height: 13px;">'; h += '<span style="width: 13px; height: 13px;" class="checkBoxCheck' + (c.checked ? " " + this.toThemeProperty("jqx-checkbox-check-checked") : "") + '"></span>', a += h += "</div></div>", a += "</div>" } a += "<span" + n + " style='-ms-touch-action: none;'></span></div>" } i.WinJS ? this.itemswrapper.html(a) : this.itemswrapper[0].innerHTML = a; for (var d = this.itemswrapper.children(), l = 0; l < this.virtualItemsCount; l++) { var c = this.items[l], u = e(d[l]); if (this.allowDrag && this._enableDragDrop && u.addClass("draggable"), this.checkboxes) { e(u.children()[0]); u.css("float", "left"), e(u[0].firstChild).css("float", "left") } u[0].style.height = c.height + "px", u[0].style.top = s + "px", s += c.height, this.visualItems[l] = u } if (this._addHandlers(), this._updatescrollbars(), this.autoItemsHeight) { o = 2 * (r = this._calculateVirtualSize()).itemsPerPage; this.autoHeight && (o = this.items.length), this.virtualItemsCount = Math.min(o, this.items.length); r.width; this.virtualSize = r, this._updatescrollbars() } e.jqx.browser.msie && e.jqx.browser.version < 8 && (this.host.attr("hideFocus", !0), this.host.find("div").attr("hideFocus", !0)) } }, _updatescrollbars: function () { if (this.virtualSize) { var t = this.virtualSize.height, i = this.virtualSize.width, s = this.vScrollInstance, r = this.hScrollInstance; this._arrange(!1); var o = !1, a = this.host.outerWidth(), n = this.host.outerHeight(), l = 0; if (i > a && (l = this.hScrollBar.outerHeight() + 2), t + l > n) { var h = s.max; s.max = 2 + parseInt(t) + l - parseInt(n - 2), "inherit" != this.vScrollBar[0].style.visibility && (this.vScrollBar[0].style.visibility = "inherit", o = !0), h != s.max && s._arrange() } else "hidden" != this.vScrollBar[0].style.visibility && (this.vScrollBar[0].style.visibility = "hidden", o = !0, s.setPosition(0)); var d = 0; "hidden" != this.vScrollBar[0].style.visibility && (d = this.scrollBarSize + 6); var c = this.checkboxes ? 20 : 0; if (this.autoItemsHeight) this.hScrollBar[0].style.visibility = "hidden"; else if (i >= a - d - c) { var u = r.max; "inherit" == this.vScrollBar[0].style.visibility ? r.max = c + d + parseInt(i) - this.host.width() + 4 : r.max = c + parseInt(i) - this.host.width() + 6, "inherit" != this.hScrollBar[0].style.visibility && (this.hScrollBar[0].style.visibility = "inherit", o = !0), u != r.max && r._arrange(), "inherit" == this.vScrollBar[0].style.visibility && (s.max = 2 + parseInt(t) + this.hScrollBar.outerHeight() + 2 - parseInt(this.host.height())) } else "hidden" != this.hScrollBar[0].style.visibility && (this.hScrollBar[0].style.visibility = "hidden", o = !0); r.setPosition(0), o && this._arrange(), this.itemswrapper && (this.itemswrapper[0].style.width = Math.max(0, Math.max(a - 2, 17 + i)) + "px", this.itemswrapper[0].style.height = Math.max(0, 2 * n) + "px"), this.isTouchDevice() && ("visible" != this.vScrollBar.css("visibility") && "visible" != this.hScrollBar.css("visibility") ? e.jqx.mobile.setTouchScroll(!1, this.element.id) : e.jqx.mobile.setTouchScroll(!0, this.element.id)) } }, clear: function () { this.source = null, this.clearSelection(), this.refresh() }, clearSelection: function (e) { for (var t = 0; t < this.selectedIndexes.length; t++) this.selectedIndexes[t] && -1 != this.selectedIndexes[t] && this._raiseEvent("1", { index: t, type: "api", item: this.getVisibleItem(t), originalEvent: null }), this.selectedIndexes[t] = -1; this.selectedIndex = -1, this.selectedValue = null, 0 != e && this._renderItems() }, unselectIndex: function (e, t) { if (!isNaN(e)) { this.selectedIndexes[e] = -1; for (var i = !1, s = 0; s < this.selectedIndexes.length; s++) -1 != (e = this.selectedIndexes[s]) && void 0 != e && (i = !0); i || (this.selectedValue = null, this.selectedIndex = -1), void 0 != t && 1 != t || (this._renderItems(), this._raiseEvent("1", { index: e, type: "api", item: this.getVisibleItem(e), originalEvent: null })), this._updateInputSelection(), this._raiseEvent("2", { index: e, type: "api", item: this.getItem(e) }) } }, getItem: function (t) { if (-1 == t || isNaN(t) || "string" == typeof t) return -1 === t ? null : this.getItemByValue(t); var i = null; e.each(this.items, function () { if (this.index == t) return i = this, !1 }); return i }, getVisibleItem: function (e) { return -1 == e || isNaN(e) || "string" == typeof e ? -1 === e ? null : this.getItemByValue(e) : this.visibleItems[e] }, getVisibleItems: function () { return this.visibleItems }, checkIndex: function (t, i, s) { if (this.checkboxes && !isNaN(t) && !(t < 0 || t >= this.visibleItems.length || null != this.visibleItems[t] && this.visibleItems[t].disabled || this.disabled)) { r = this.getItem(t); if (this.groups.length > 0) var r = this.getVisibleItem(t); if (null != r) { e(r.checkBoxElement); r.checked = !0, void 0 != i && 1 != i || this._updateCheckedItems() } void 0 != s && 1 != s || this._raiseEvent(3, { label: r.label, value: r.value, checked: !0, item: r }) } }, getCheckedItems: function () { if (!this.checkboxes) return null; var t = new Array; if (void 0 != this.items) return e.each(this.items, function () { this.checked && (t[t.length] = this) }), t }, checkAll: function (t) { if (this.checkboxes && !this.disabled) { var i = this; e.each(this.items, function () { var e = this; !1 !== t && !0 !== e.checked && i._raiseEvent(3, { label: e.label, value: e.value, checked: !0, item: e }), this.checked = !0 }), this._updateCheckedItems() } }, uncheckAll: function (t) { if (this.checkboxes && !this.disabled) { var i = this; e.each(this.items, function () { var e = this; !1 !== t && !1 !== e.checked && (this.checked = !1, i._raiseEvent(3, { label: e.label, value: e.value, checked: !1, item: e })), this.checked = !1 }), this._updateCheckedItems() } }, uncheckIndex: function (t, i, s) { if (this.checkboxes && !isNaN(t) && !(t < 0 || t >= this.visibleItems.length || null != this.visibleItems[t] && this.visibleItems[t].disabled || this.disabled)) { r = this.getItem(t); if (this.groups.length > 0) var r = this.getVisibleItem(t); if (null != r) { e(r.checkBoxElement); r.checked = !1, void 0 != i && 1 != i || this._updateCheckedItems() } void 0 != s && 1 != s || this._raiseEvent(3, { label: r.label, value: r.value, checked: !1, item: r }) } }, indeterminateIndex: function (t, i, s) { if (this.checkboxes && !isNaN(t) && !(t < 0 || t >= this.visibleItems.length || null != this.visibleItems[t] && this.visibleItems[t].disabled || this.disabled)) { r = this.getItem(t); if (this.groups.length > 0) var r = this.getVisibleItem(t); if (null != r) { e(r.checkBoxElement); r.checked = null, void 0 != i && 1 != i || this._updateCheckedItems() } void 0 != s && 1 != s || this._raiseEvent(3, { checked: null }) } }, getSelectedIndex: function () { return this.selectedIndex }, getSelectedItems: function () { var e = this.getVisibleItems(), t = this.selectedIndexes, i = []; for (var s in t) -1 != t[s] && (i[i.length] = e[s]); return i }, getSelectedItem: function () { return this.getItem(this.selectedIndex) }, _updateCheckedItems: function () { var t = this.selectedIndex; this.clearSelection(!1); this.getCheckedItems(); this.selectedIndex = t, this._renderItems(); var i = e.data(this.element, "hoveredItem"); null != i && (e(i).addClass(this.toThemeProperty("jqx-listitem-state-hover")), e(i).addClass(this.toThemeProperty("jqx-fill-state-hover"))), this._updateInputSelection() }, getItemByValue: function (t) { if (null != this.visibleItems) { if (this.itemsByValue) return this.itemsByValue[e.trim(t).split(" ").join("")]; for (var i = this.visibleItems, s = 0; s < i.length; s++) if (i[s].value == t) return i[s] } }, checkItem: function (e) { if (null != e) { var t = this._getItemByParam(e); return this.checkIndex(t.index, !0) } return !1 }, uncheckItem: function (e) { if (null != e) { var t = this._getItemByParam(e); return this.uncheckIndex(t.index, !0) } return !1 }, indeterminateItem: function (e) { if (null != e) { var t = this._getItemByParam(e); return this.indeterminateIndex(t.index, !0) } return !1 }, val: function (e) { if (this.input && 0 == arguments.length) return this.input.val(); var t = this.getItemByValue(e); return null != t && this.selectItem(t), this.input ? this.input.val() : void 0 }, selectItem: function (e) { if (null != e) { if (void 0 == e.index) { var t = this.getItemByValue(e); t && (e = t) } return this.selectIndex(e.visibleIndex, !0) } return !1 }, unselectItem: function (e) { if (null != e) { if (void 0 == e.index) { var t = this.getItemByValue(e); t && (e = t) } return this.unselectIndex(e.visibleIndex, !0) } return !1 }, selectIndex: function (e, t, i, s, r, o) { if (!isNaN(e) && !(e < -1 || e >= this.visibleItems.length || null != this.visibleItems[e] && this.visibleItems[e].disabled || this.disabled)) if (this.multiple || this.multipleextended || this.selectedIndex != e || s) { if (!this.checkboxes) { this.focused = !0; var a = !1; this.selectedIndex != e && (a = !0); var n = this.selectedIndex; this.selectedIndex != e || this.multiple || (n = -1), void 0 == r && (r = "none"); var l = this.getItem(e), h = this.getItem(n); if (this.visibleItems && this.items && this.visibleItems.length != this.items.length && (l = this.getVisibleItem(e), h = this.getVisibleItem(n)), void 0 != s && s) this._raiseEvent("1", { index: n, type: r, item: h, originalEvent: o }), this.selectedIndex = e, this.selectedIndexes[n] = -1, this.selectedIndexes[e] = e, l && (this.selectedValue = l.value), this._raiseEvent("0", { index: e, type: r, item: l, originalEvent: o }); else { var d = this, c = function (e, t, i, s, r, o) { d._raiseEvent("1", { index: t, type: i, item: s, originalEvent: o }), d.selectedIndex = e, d.selectedIndexes = [], t = e, d.selectedIndexes[e] = e, d._raiseEvent("0", { index: e, type: i, item: r, originalEvent: o }) }, u = function (e, t, i, s, r, o) { void 0 == d.selectedIndexes[e] || -1 == d.selectedIndexes[e] ? (d.selectedIndexes[e] = e, d.selectedIndex = e, d._raiseEvent("0", { index: e, type: i, item: r, originalEvent: o })) : (t = d.selectedIndexes[e], s = d.getVisibleItem(t), d.selectedIndexes[e] = -1, d.selectedIndex = -1, d._raiseEvent("1", { index: t, type: i, item: s, originalEvent: o })) }; if (this.multipleextended) if (this._shiftKey || this._ctrlKey) { if (this._ctrlKey) "keyboard" == r && (this.clearSelection(!1), d._clickedIndex = e), u(e, n, r, h, l, o); else if (this._shiftKey) { void 0 == d._clickedIndex && (d._clickedIndex = n); var p = Math.min(d._clickedIndex, e), m = Math.max(d._clickedIndex, e); this.clearSelection(!1); for (var g = p; g <= m; g++) d.selectedIndexes[g] = g, d._raiseEvent("0", { index: g, type: r, item: this.getVisibleItem(g), originalEvent: o }); d.selectedIndex = "keyboard" != r ? d._clickedIndex : e } } else "keyboard" != r && "mouse" != r ? (u(e, n, r, h, l, o), d._clickedIndex = e) : (this.clearSelection(!1), d._clickedIndex = e, c(e, n, r, h, l, o)); else this.multiple ? u(e, n, r, h, l, o) : (l && (this.selectedValue = l.value), c(e, n, r, h, l, o)) } return void 0 != i && 1 != i || this._renderItems(), void 0 != t && null != t && 1 == t && this.ensureVisible(e), this._raiseEvent("2", { index: e, item: l, oldItem: h, type: r, originalEvent: o }), this._updateInputSelection(), a } this._updateCheckedItems() } else this.visibleItems && this.items && this.visibleItems.length != this.items.length && (l = this.getVisibleItem(e)) && (this.selectedValue = l.value) }, _updateInputSelection: function () { if (this.input && (-1 == this.selectedIndex ? this.input.val("") : this.items && void 0 != this.items[this.selectedIndex] && this.input.val(this.items[this.selectedIndex].value), this.multiple || this.multipleextended || this.checkboxes)) { var e = this.checkboxes ? this.getCheckedItems() : this.getSelectedItems(), t = ""; if (e) { for (var i = 0; i < e.length; i++) void 0 != e[i] && (i == e.length - 1 ? t += e[i].value : t += e[i].value + ","); this.input.val(t) } } }, isIndexInView: function (e) { if (isNaN(e)) return !1; if (!this.items) return !1; if (e < 0 || e >= this.items.length) return !1; var t = this.vScrollInstance.value, i = this.visibleItems[e]; if (void 0 == i) return !0; var s = i.initialTop, r = i.height; return !(s - t < 0 || s - t + r >= this.host.outerHeight()) }, _itemsInPage: function () { var t = 0, i = this; return this.items && e.each(this.items, function () { if (this.initialTop + this.height >= i.content.height()) return !1; t++ }), t }, _firstItemIndex: function () { return null != this.visibleItems ? this.visibleItems[0] && this.visibleItems[0].isGroup ? this._nextItemIndex(0) : 0 : -1 }, _lastItemIndex: function () { return null != this.visibleItems ? this.visibleItems[this.visibleItems.length - 1] && this.visibleItems[this.visibleItems.length - 1].isGroup ? this._prevItemIndex(this.visibleItems.length - 1) : this.visibleItems.length - 1 : -1 }, _nextItemIndex: function (e) { for (indx = e + 1; indx < this.visibleItems.length; indx++) if (this.visibleItems[indx] && !this.visibleItems[indx].disabled && !this.visibleItems[indx].isGroup) return indx; return -1 }, _prevItemIndex: function (e) { for (indx = e - 1; indx >= 0; indx--) if (this.visibleItems[indx] && !this.visibleItems[indx].disabled && !this.visibleItems[indx].isGroup) return indx; return -1 }, _getMatches: function (t, i) { if (void 0 == t || 0 == t.length) return -1; void 0 == i && (i = 0); var s = this.getItems(), r = this, o = -1; return e.each(s, function (s) { var a = ""; if (!this.isGroup) { a = this.label ? this.label.toString() : this.value ? this.value.toString() : this.title ? this.title.toString() : "jqxItem"; var n = !1; switch (r.searchMode) { case "containsignorecase": n = e.jqx.string.containsIgnoreCase(a, t); break; case "contains": n = e.jqx.string.contains(a, t); break; case "equals": n = e.jqx.string.equals(a, t); break; case "equalsignorecase": n = e.jqx.string.equalsIgnoreCase(a, t); break; case "startswith": n = e.jqx.string.startsWith(a, t); break; case "startswithignorecase": n = e.jqx.string.startsWithIgnoreCase(a, t); break; case "endswith": n = e.jqx.string.endsWith(a, t); break; case "endswithignorecase": n = e.jqx.string.endsWithIgnoreCase(a, t) } if (n && this.visibleIndex >= i) return o = this.visibleIndex, !1 } }), o }, findItems: function (t) { var i = this.getItems(), s = this, r = 0, o = new Array; return e.each(i, function (i) { var a = ""; if (!this.isGroup) { a = this.label ? this.label : this.value ? this.value : this.title ? this.title : "jqxItem"; var n = !1; switch (s.searchMode) { case "containsignorecase": n = e.jqx.string.containsIgnoreCase(a, t); break; case "contains": n = e.jqx.string.contains(a, t); break; case "equals": n = e.jqx.string.equals(a, t); break; case "equalsignorecase": n = e.jqx.string.equalsIgnoreCase(a, t); break; case "startswith": n = e.jqx.string.startsWith(a, t); break; case "startswithignorecase": n = e.jqx.string.startsWithIgnoreCase(a, t); break; case "endswith": n = e.jqx.string.endsWith(a, t); break; case "endswithignorecase": n = e.jqx.string.endsWithIgnoreCase(a, t) } n && (o[r++] = this) } }), o }, _handleKeyDown: function (e) { var t = e.keyCode, i = this, s = i.selectedIndex, r = i.selectedIndex; if (this.keyboardNavigation && this.enableSelection) { var o = function () { i.multiple && i.clearSelection(!1) }; if (e.altKey && (t = -1), i.incrementalSearch) { var a = -1; i._searchString || (i._searchString = ""), (8 == t || 46 == t) && i._searchString.length >= 1 && (i._searchString = i._searchString.substr(0, i._searchString.length - 1)); var n = String.fromCharCode(t), l = !isNaN(parseInt(n)), h = !1; if (t >= 65 && t <= 97 || l || 8 == t || 32 == t || 46 == t) { e.shiftKey || (n = n.toLocaleLowerCase()); var d = 1 + i.selectedIndex; 8 != t && 32 != t && 46 != t && (i._searchString.length > 0 && i._searchString.substr(0, 1) == n ? d = 1 + i.selectedIndex : i._searchString += n), 32 == t && (i._searchString += " "); c = this._getMatches(i._searchString, d); if ((a = c) == i._lastMatchIndex || -1 == a) { var c = this._getMatches(i._searchString, 0); a = c } if (i._lastMatchIndex = a, a >= 0) { var u = function () { o(), i.selectIndex(a, !1, !1, !1, "keyboard", e), i.isIndexInView(a) ? i._renderItems() : i.ensureVisible(a) }; i._toSelectTimer && clearTimeout(i._toSelectTimer), i._toSelectTimer = setTimeout(function () { u() }, i.incrementalSearchKeyDownDelay) } h = !0 } if (void 0 != i._searchTimer && clearTimeout(i._searchTimer), 27 != t && 13 != t || (i._searchString = ""), i._searchTimer = setTimeout(function () { i._searchString = "", i._renderItems() }, i.incrementalSearchDelay), a >= 0) return; if (h) return !1 } if (this.checkboxes) return !0; if (33 == t) { m = i._itemsInPage(); i.selectedIndex - m >= 0 ? (o(), i.selectIndex(r - m, !1, !1, !1, "keyboard", e)) : (o(), i.selectIndex(i._firstItemIndex(), !1, !1, !1, "keyboard", e)), i._searchString = "" } if (32 == t && this.checkboxes) { var p = this.getItem(s); null != p && (i._updateItemCheck(p, s), e.preventDefault()), i._searchString = "" } if (36 == t && (o(), i.selectIndex(i._firstItemIndex(), !1, !1, !1, "keyboard", e), i._searchString = ""), 35 == t && (o(), i.selectIndex(i._lastItemIndex(), !1, !1, !1, "keyboard", e), i._searchString = ""), 34 == t) { var m = i._itemsInPage(); i.selectedIndex + m < i.visibleItems.length ? (o(), i.selectIndex(r + m, !1, !1, !1, "keyboard", e)) : (o(), i.selectIndex(i._lastItemIndex(), !1, !1, !1, "keyboard", e)), i._searchString = "" } if (38 == t) { if (i._searchString = "", !(i.selectedIndex > 0)) return !1; if ((g = i._prevItemIndex(i.selectedIndex)) == i.selectedIndex || -1 == g) return !0; o(), i.selectIndex(g, !1, !1, !1, "keyboard", e) } else if (40 == t) { if (i._searchString = "", !(i.selectedIndex + 1 < i.visibleItems.length)) return !1; var g = i._nextItemIndex(i.selectedIndex); if (g == i.selectedIndex || -1 == g) return !0; o(), i.selectIndex(g, !1, !1, !1, "keyboard", e) } return 35 != t && 36 != t && 38 != t && 40 != t && 34 != t && 33 != t || (i.isIndexInView(i.selectedIndex) ? i._renderItems() : i.ensureVisible(i.selectedIndex), !1) } }, _updateItemCheck: function (e, t) { if (!this.disabled) switch (1 == e.checked ? e.checked = !(!e.hasThreeStates || !this.hasThreeStates) && null : e.checked = null != e.checked, e.checked) { case !0: this.checkIndex(t); break; case !1: this.uncheckIndex(t); break; default: this.indeterminateIndex(t) } }, wheel: function (e, t) { if (t.autoHeight || !t.enableMouseWheel) return e.returnValue = !0, !0; if (t.disabled) return !0; var i = 0; if (e || (e = window.event), e.originalEvent && e.originalEvent.wheelDelta && (e.wheelDelta = e.originalEvent.wheelDelta), e.wheelDelta ? i = e.wheelDelta / 120 : e.detail && (i = -e.detail / 3), i) { var s = t._handleDelta(i); return s && (e.preventDefault && e.preventDefault(), null != e.originalEvent && (e.originalEvent.mouseHandled = !0), void 0 != e.stopPropagation && e.stopPropagation()), !!s && (s = !1, e.returnValue = s, s) } e.preventDefault && e.preventDefault(), e.returnValue = !1 }, _handleDelta: function (e) { var t = this.vScrollInstance.value; return e < 0 ? this.scrollDown() : this.scrollUp(), t != this.vScrollInstance.value }, focus: function () { try { this.focused = !0, this.host.focus(); var e = this; setTimeout(function () { e.host.focus() }, 10) } catch (e) { } }, _removeHandlers: function () { this.removeHandler(e(document), "keydown.listbox" + this.element.id), this.removeHandler(e(document), "keyup.listbox" + this.element.id), this.removeHandler(this.vScrollBar, "valuechanged"), this.removeHandler(this.hScrollBar, "valuechanged"), this._mousewheelfunc ? this.removeHandler(this.host, "mousewheel", this._mousewheelfunc) : this.removeHandler(this.host, "mousewheel"), this.removeHandler(this.host, "keydown"), this.removeHandler(this.content, "mouseleave"), this.removeHandler(this.content, "focus"), this.removeHandler(this.content, "blur"), this.removeHandler(this.host, "focus"), this.removeHandler(this.host, "blur"), this.removeHandler(this.content, "mouseenter"), this.removeHandler(this.content, "mouseup"), this.removeHandler(this.content, "mousedown"), this.removeHandler(this.content, "touchend"), this._mousemovefunc ? this.removeHandler(this.content, "mousemove", this._mousemovefunc) : this.removeHandler(this.content, "mousemove"), this.removeHandler(this.content, "selectstart"), this.overlayContent && this.removeHandler(this.overlayContent, e.jqx.mobile.getTouchEventName("touchend")) }, _updateSize: function () { this.virtualSize || (this._oldheight = null, this.virtualSize = this._calculateVirtualSize()); var e = this; if (e._arrange(), e.host.height() != e._oldheight || e.host.width() != e._oldwidth) { e.host.width(), e._oldwidth; if (e.autoItemsHeight) e._render(!1); else if (e.items) if (e.items.length > 0 && e.virtualItemsCount * e.items[0].height < e._oldheight - 2) e._render(!1); else { var t = e.vScrollInstance.value; e._updatescrollbars(), e._renderItems(), t < e.vScrollInstance.max ? e.vScrollInstance.setPosition(t) : e.vScrollInstance.setPosition(e.vScrollInstance.max) } e._oldwidth = e.host.width(), e._oldheight = e.host.height() } }, _addHandlers: function () { var t = this; this.focused = !1; new Date; a = this.isTouchDevice(); this.addHandler(this.vScrollBar, "valuechanged", function (i) { e.jqx.browser.msie && e.jqx.browser.version > 9 ? setTimeout(function () { t._renderItems() }, 1) : t._renderItems() }), this.addHandler(this.hScrollBar, "valuechanged", function () { t._renderItems() }), this._mousewheelfunc && this.removeHandler(this.host, "mousewheel", this._mousewheelfunc), this._mousewheelfunc = function (e) { t.wheel(e, t) }, this.addHandler(this.host, "mousewheel", this._mousewheelfunc), this.addHandler(e(document), "keydown.listbox" + this.element.id, function (e) { t._ctrlKey = e.ctrlKey, t._shiftKey = e.shiftKey }), this.addHandler(e(document), "keyup.listbox" + this.element.id, function (e) { t._ctrlKey = e.ctrlKey, t._shiftKey = e.shiftKey }), this.addHandler(this.host, "keydown", function (e) { return t._handleKeyDown(e) }), this.addHandler(this.content, "mouseleave", function (i) { t.focused = !1; var s = e.data(t.element, "hoveredItem"); null != s && (e(s).removeClass(t.toThemeProperty("jqx-listitem-state-hover")), e(s).removeClass(t.toThemeProperty("jqx-fill-state-hover")), e.data(t.element, "hoveredItem", null)) }), this.addHandler(this.content, "focus", function (e) { t.disabled || (t.host.addClass(t.toThemeProperty("jqx-fill-state-focus")), t.focused = !0) }), this.addHandler(this.content, "blur", function (e) { t.focused = !1, t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")) }), this.addHandler(this.host, "focus", function (e) { t.disabled || (t.host.addClass(t.toThemeProperty("jqx-fill-state-focus")), t.focused = !0) }), this.addHandler(this.host, "blur", function (i) { e.jqx.browser.msie && e.jqx.browser.version < 9 && t.focused || (t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")), t.focused = !1) }), this.addHandler(this.content, "mouseenter", function (e) { t.focused = !0 }); var i = e.jqx.utilities.hasTransform(this.host); if (this.enableSelection) { var s = t.isTouchDevice() && !0 !== this.touchMode, r = s ? "touchend" : "mousedown"; if (this.overlayContent) this.addHandler(this.overlayContent, e.jqx.mobile.getTouchEventName("touchend"), function (i) { if (!t.enableSelection) return !0; if (s && (t._newScroll = new Date, t._newScroll - t._lastScroll < 500)) return !0; var r = e.jqx.mobile.getTouches(i)[0]; if (void 0 != r) { var o = t.host.offset(), a = parseInt(r.pageX), n = parseInt(r.pageY); 1 == t.touchMode && (a = parseInt(r._pageX), n = parseInt(r._pageY)), a -= o.left, n -= o.top; var l = t._hitTest(a, n); if (null != l && !l.isGroup) { if (t._newScroll = new Date, t._newScroll - t._lastScroll < 500) return !1; if (t.checkboxes) return void t._updateItemCheck(l, l.visibleIndex); if (-1 == l.html.indexOf("href")) return t.selectIndex(l.visibleIndex, !1, !0, !1, "mouse", i), t.content.trigger("click"), !1; setTimeout(function () { return t.selectIndex(l.visibleIndex, !1, !0, !1, "mouse", i), t.content.trigger("click"), !1 }, 100) } } }); else { var o = !1; this.addHandler(this.content, r, function (a) { if (!t.enableSelection) return !0; if (o = !0, s && (t._newScroll = new Date, t._newScroll - t._lastScroll < 500)) return !1; if (t.focused = !0, !t.isTouchDevice() && t.focusable && t.host.focus(), a.target.id != "listBoxContent" + t.element.id && t.itemswrapper[0] != a.target) { var n = a.target, l = e(n).offset(), h = t.host.offset(); if (i) { var d = e.jqx.mobile.getLeftPos(n), c = e.jqx.mobile.getTopPos(n); l.left = d, l.top = c, d = e.jqx.mobile.getLeftPos(t.element), c = e.jqx.mobile.getTopPos(t.element), h.left = d, h.top = c } var u = parseInt(l.top) - parseInt(h.top), p = parseInt(l.left) - parseInt(h.left), m = t._hitTest(p, u); if (null != m && !m.isGroup) { var g = function (e, i) { if (t._shiftKey || (t._clickedIndex = e.visibleIndex), t.checkboxes) if (t.selectedIndex = e.visibleIndex, p = 20 + i.pageX - l.left, t.rtl) { "hidden" != t.hScrollBar.css("visibility") ? t.hScrollInstance.max : t.host.width(); p <= t.host.width() - 20 && (t.allowDrag ? setTimeout(function () { t._dragItem || o || t._updateItemCheck(e, e.visibleIndex) }, 200) : t._updateItemCheck(e, e.visibleIndex)) } else p + t.hScrollInstance.value >= 20 && (t.allowDrag ? setTimeout(function () { t._dragItem || o || t._updateItemCheck(e, e.visibleIndex) }, 200) : t._updateItemCheck(e, e.visibleIndex)); else t.selectIndex(e.visibleIndex, !1, !0, !1, "mouse", i) }; m.disabled || (-1 != m.html.indexOf("href") ? setTimeout(function () { g(m, a) }, 100) : g(m, a)) } if ("mousedown" == r) { var f = !1; return a.which ? f = 3 == a.which : a.button && (f = 2 == a.button), !!f } } return !0 }) } this.addHandler(this.content, "mouseup", function (e) { t.vScrollInstance.handlemouseup(t, e), o = !1 }), e.jqx.browser.msie && this.addHandler(this.content, "selectstart", function (e) { return !1 }) } var a = this.isTouchDevice(); this.enableHover && !a && (this._mousemovefunc = function (s) { if (a) return !0; if (!t.enableHover) return !0; 1 == e.jqx.browser.msie && e.jqx.browser.version; if (null == s.target) return !0; if (t.disabled) return !0; if (t.focused = !0, !t.vScrollInstance.isScrolling() && s.target.id != "listBoxContent" + t.element.id && t.itemswrapper[0] != s.target) { var r = s.target, o = e(r).offset(), n = t.host.offset(); if (i) { var l = e.jqx.mobile.getLeftPos(r), h = e.jqx.mobile.getTopPos(r); o.left = l, o.top = h, l = e.jqx.mobile.getLeftPos(t.element), h = e.jqx.mobile.getTopPos(t.element), n.left = l, n.top = h } var d = parseInt(o.top) - parseInt(n.top), c = parseInt(o.left) - parseInt(n.left), u = t._hitTest(c, d); if (null != u && !u.isGroup && !u.disabled) { var p = e.data(t.element, "hoveredItem"); null != p && (e(p).removeClass(t.toThemeProperty("jqx-listitem-state-hover")), e(p).removeClass(t.toThemeProperty("jqx-fill-state-hover"))), e.data(t.element, "hoveredItem", u.element); var m = e(u.element); m.addClass(t.toThemeProperty("jqx-listitem-state-hover")), m.addClass(t.toThemeProperty("jqx-fill-state-hover")) } } }, this.addHandler(this.content, "mousemove", this._mousemovefunc)) }, _arrange: function (e) { void 0 == e && (e = !0); var t = null, i = null, s = this, r = function (e) { return 0 == (e = s.host.height()) && (e = 200, s.host.height(e)), e }; null != this.width && -1 != this.width.toString().indexOf("px") ? t = this.width : void 0 == this.width || isNaN(this.width) || (t = this.width), null != this.height && -1 != this.height.toString().indexOf("px") ? i = this.height : void 0 == this.height || isNaN(this.height) || (i = this.height), null != this.width && -1 != this.width.toString().indexOf("%") && (this.host.css("width", this.width), t = this.host.width()), null != this.height && -1 != this.height.toString().indexOf("%") && (this.host.css("height", this.height), i = r(i)), null != t && (t = parseInt(t), parseInt(this.element.style.width) != parseInt(this.width) && this.host.width(this.width)), this.autoHeight ? this.virtualSize && ("hidden" != this.hScrollBar.css("visibility") ? (this.host.height(this.virtualSize.height + parseInt(this.scrollBarSize) + 3), this.height = this.virtualSize.height + parseInt(this.scrollBarSize) + 3, i = this.height) : (this.host.height(this.virtualSize.height), this.height = this.virtualSize.height, i = this.virtualSize.height)) : null != i && (i = parseInt(i), parseInt(this.element.style.height) != parseInt(this.height) && (this.host.height(this.height), r(i))); var o = this.scrollBarSize; isNaN(o) && (o = parseInt(o), isNaN(o) ? o = "17px" : o += "px"), o = parseInt(o); var a = 2, n = 0; if (this.vScrollBar && ("hidden" != this.vScrollBar[0].style.visibility ? n = o + 4 : this.vScrollInstance.setPosition(0), this.hScrollBar)) { "hidden" != this.hScrollBar[0].style.visibility ? a = o + 4 : this.hScrollInstance.setPosition(0), this.autoItemsHeight && (this.hScrollBar[0].style.visibility = "hidden", a = 0), null == i && (i = 0); var l = parseInt(i) - 4 - o; l < 0 && (l = 0), parseInt(this.hScrollBar[0].style.height) != o && (parseInt(o) < 0 && (o = 0), this.hScrollBar[0].style.height = parseInt(o) + "px"), this.hScrollBar[0].style.top != l + "px" && (this.hScrollBar[0].style.top = l + "px", this.hScrollBar[0].style.left = "0px"); var h = t - o - 4; h < 0 && (h = 0); var d = h + "px"; if (this.hScrollBar[0].style.width != d && (this.hScrollBar[0].style.width = d), 0 == n && t >= 2 && (this.hScrollBar[0].style.width = parseInt(t - 2) + "px"), o != parseInt(this.vScrollBar[0].style.width) && (this.vScrollBar[0].style.width = parseInt(o) + "px"), parseInt(i) - a != parseInt(this.vScrollBar[0].style.height)) { var c = parseInt(i) - a; c < 0 && (c = 0), this.vScrollBar[0].style.height = c + "px" } null == t && (t = 0); var u = parseInt(t) - parseInt(o) - 4 + "px"; u != this.vScrollBar[0].style.left && (parseInt(u) >= 0 && (this.vScrollBar[0].style.left = u), this.vScrollBar[0].style.top = "0px"); var p = this.vScrollInstance; p.disabled = this.disabled, e && p._arrange(); var m = this.hScrollInstance; if (m.disabled = this.disabled, e && m._arrange(), "hidden" != this.vScrollBar[0].style.visibility && "hidden" != this.hScrollBar[0].style.visibility ? (this.bottomRight[0].style.visibility = "inherit", this.bottomRight[0].style.left = 1 + parseInt(this.vScrollBar[0].style.left) + "px", this.bottomRight[0].style.top = 1 + parseInt(this.hScrollBar[0].style.top) + "px", this.rtl && this.bottomRight.css({ left: 0 }), this.bottomRight[0].style.width = parseInt(o) + 3 + "px", this.bottomRight[0].style.height = parseInt(o) + 3 + "px") : this.bottomRight[0].style.visibility = "hidden", parseInt(this.content[0].style.width) != parseInt(t) - n) { var g = parseInt(t) - n; g < 0 && (g = 0), this.content[0].style.width = g + "px" } if (this.rtl && (this.vScrollBar.css({ left: "0px", top: "0px" }), this.hScrollBar.css({ left: this.vScrollBar.width() + 2 + "px" }), "hidden" != this.vScrollBar[0].style.visibility ? this.content.css("margin-left", 4 + this.vScrollBar.width()) : (this.content.css("margin-left", 0), this.hScrollBar.css({ left: "0px" }))), parseInt(this.content[0].style.height) != parseInt(i) - a) { var f = parseInt(i) - a; f < 0 && (f = 0), this.content[0].style.height = f + "px" } this.overlayContent && (this.overlayContent.width(parseInt(t) - n), this.overlayContent.height(parseInt(i) - a)) } }, ensureVisible: function (t) { if (isNaN(t) && (i = this.getItemByValue(t)) && (t = i.index), !this.isIndexInView(t)) { if (t < 0) return; if (this.autoHeight) (s = e.data(this.vScrollBar[0], "jqxScrollBar").instance).setPosition(0); else for (indx = 0; indx < this.visibleItems.length; indx++) { var i = this.visibleItems[indx]; if (i.visibleIndex == t && !i.isGroup) { var s = e.data(this.vScrollBar[0], "jqxScrollBar").instance, r = s.value, o = "hidden" === this.hScrollBar.css("visibility") ? 0 : this.scrollBarSize + 4; i.initialTop < r ? s.setPosition(i.initialTop) : i.initialTop + i.height > r + this.host.height() && s.setPosition(i.initialTop + i.height + 2 - this.host.height() + o); break } } } this._renderItems() }, scrollTo: function (e, t) { "hidden" != this.vScrollBar.css("visibility") && this.vScrollInstance.setPosition(t), "hidden" != this.hScrollBar.css("visibility") && this.hScrollInstance.setPosition(e) }, scrollDown: function () { if ("hidden" == this.vScrollBar.css("visibility")) return !1; var e = this.vScrollInstance; return e.value + e.largestep <= e.max ? (e.setPosition(e.value + e.largestep), !0) : (e.setPosition(e.max), !0) }, scrollUp: function () { if ("hidden" == this.vScrollBar.css("visibility")) return !1; var e = this.vScrollInstance; return e.value - e.largestep >= e.min ? (e.setPosition(e.value - e.largestep), !0) : e.value != e.min && (e.setPosition(e.min), !0) }, databind: function (t, i) { this.records = new Array; var s = !!t._source, r = new e.jqx.dataAdapter(t, { autoBind: !1 }); s && (r = t, t = t._source); var o = function (t, i) { var s = function (i) { if ("string" == typeof i) var s = i, r = i; else var r = i[t.valueMember], s = i[t.displayMember]; var o = new e.jqx._jqxListBox.item; return o.label = s, o.value = r, o.html = "", o.visible = !0, o.originalItem = i, o.group = "", o.groupHtml = "", o.disabled = !1, o.hasThreeStates = !0, o }; if (void 0 != i && r._changedrecords[0]) e.each(r._changedrecords, function () { var e = this.index, r = this.record; if ("remove" != i) var o = s(r); switch (i) { case "update": t.updateAt(o, e); break; case "add": t.insertAt(o, e); break; case "remove": t.removeAt(e) } }); else { t.records = r.records; var o = t.records.length; t.items = new Array, t.itemsByValue = new Array; for (var a = 0; a < o; a++) { var n = t.records[a], l = s(n); l.index = a, t.items[a] = l; var h = l.value; "" != l.value && null != l.value || (h = a), t.itemsByValue[e.trim(h).split(" ").join("")] = l } t._render(), t._raiseEvent("6") } }; void 0 != t.type && (r._options.type = t.type), void 0 != t.formatdata && (r._options.formatData = t.formatdata), void 0 != t.contenttype && (r._options.contentType = t.contenttype), void 0 != t.async && (r._options.async = t.async); var a = this; switch (t.datatype) { case "local": case "array": default: null != t.localdata && (r.unbindBindingUpdate(this.element.id), (this.autoBind || !this.autoBind && !i) && r.dataBind(), o(this), r.bindBindingUpdate(this.element.id, function (e) { o(a, e) })); break; case "json": case "jsonp": case "xml": case "xhtml": case "script": case "text": case "csv": case "tab": if (null != t.localdata) return r.unbindBindingUpdate(this.element.id), (this.autoBind || !this.autoBind && !i) && r.dataBind(), o(this), void r.bindBindingUpdate(this.element.id, function () { o(a) }); var n = {}; r._options.data ? e.extend(r._options.data, n) : (t.data && e.extend(n, t.data), r._options.data = n); r.unbindDownloadComplete(a.element.id), r.bindDownloadComplete(a.element.id, function () { o(a) }), (this.autoBind || !this.autoBind && !i) && r.dataBind() } }, loadItems: function (t) { if (null == t) return this.groups = new Array, this.items = new Array, void (this.visualItems = new Array); var i = this, s = 0, r = 0, o = 0; this.groups = new Array, this.items = new Array, this.visualItems = new Array; var a = new Array; this.itemsByValue = new Array, e.map(t, function (t) { if (void 0 == t) return null; var n = new e.jqx._jqxListBox.item, l = t.group, h = t.groupHtml, d = t.title; if (null != d && void 0 != d || (d = ""), null != l && void 0 != l || (l = ""), null != h && void 0 != h || (h = ""), !i.groups[l]) { i.groups[l] = { items: new Array, index: -1, caption: l, captionHtml: h }; var c = ++s + "jqxGroup"; i.groups[c] = i.groups[l], r++, i.groups.length = r } var u = i.groups[l]; return u.index++, u.items[u.index] = n, "string" == typeof t ? (n.label = t, n.value = t) : null == t.label && null == t.value && null == t.html && null == t.group && null == t.groupHtml ? (n.label = t.toString(), n.value = t.toString()) : (n.label = t.label || t.value, n.value = t.value || t.label), "string" != typeof t && ("" != i.displayMember && (void 0 != t[i.displayMember] ? n.label = t[i.displayMember] : n.label = ""), "" != i.valueMember && (n.value = t[i.valueMember])), n.hasThreeStates = void 0 == t.hasThreeStates || t.hasThreeStates, n.originalItem = t, n.title = d, n.html = t.html || "", t.html && t.html, n.group = l, n.checked = t.checked || !1, n.groupHtml = t.groupHtml || "", n.disabled = t.disabled || !1, n.visible = void 0 == t.visible || t.visible, n.index = o, a[o] = n, o++, n }); var n = new Array, l = 0; if (void 0 == this.fromSelect || 0 == this.fromSelect) for (var h = 0; h < r; h++) { var d = (s = h + 1) + "jqxGroup", c = this.groups[d]; if (void 0 == c || null == c) break; if (0 == h && "" == c.caption && "" == c.captionHtml && r <= 1) { for (var u = 0; u < c.items.length; u++) { g = c.items[u].value; void 0 != c.items[u].value && null != c.items[u].value || (g = u), this.itemsByValue[e.trim(g).split(" ").join("")] = c.items[u] } return c.items } var p = new e.jqx._jqxListBox.item; p.isGroup = !0, p.label = c.caption, "" == c.caption && "" == c.captionHtml && (c.caption = this.emptyGroupText, p.label = c.caption), p.html = c.captionHtml, n[l] = p, l++; for (var m = 0; m < c.items.length; m++) { n[l] = c.items[m]; var g = c.items[m].value; "" != c.items[m].value && null != c.items[m].value || (g = l), i.itemsByValue[e.trim(g).split(" ").join("")] = c.items[m], l++ } } else { var l = 0, f = new Array; e.each(a, function () { if (!f[this.group] && "" != this.group) { var t = new e.jqx._jqxListBox.item; t.isGroup = !0, t.label = this.group, n[l] = t, l++, f[this.group] = !0 } n[l] = this; var s = this.value; "" != this.value && null != this.value || (s = l - 1), i.itemsByValue[e.trim(s).split(" ").join("")] = this, l++ }) } return n }, _mapItem: function (t) { var i = new e.jqx._jqxListBox.item; return this.displayMember && (void 0 == t.label && (t.label = t[this.displayMember]), void 0 == t.value && (t.value = t[this.valueMember])), "string" == typeof t ? (i.label = t, i.value = t) : "number" == typeof t ? (i.label = t.toString(), i.value = t.toString()) : (i.label = t.label || t.value, i.value = t.value || t.label), void 0 == i.label && void 0 == i.value && void 0 == i.html && (i.label = i.value = t), i.html = t.html || "", i.group = t.group || "", i.checked = t.checked || !1, i.title = t.title || "", i.groupHtml = t.groupHtml || "", i.disabled = t.disabled || !1, i.visible = t.visible || !0, i }, addItem: function (e) { return this.insertAt(e, this.items ? this.items.length : 0) }, _getItemByParam: function (e) { if (null != e && void 0 == e.index) { var t = this.getItemByValue(e); t && (e = t) } return e }, insertItem: function (e, t) { var i = this._getItemByParam(e); return this.insertAt(i, t) }, updateItem: function (e, t) { var i = this._getItemByParam(t); return !(!i || void 0 == i.index) && this.updateAt(e, i.index) }, updateAt: function (t, i) { if (null != t) { var s = this._mapItem(t); this.itemsByValue[e.trim(s.value).split(" ").join("")] = this.items[i], this.items[i].value = s.value, this.items[i].label = s.label, this.items[i].html = s.html, this.items[i].disabled = s.disabled } this._cachedItemHtml = [], this._renderItems(), this.rendered && this.rendered() }, insertAt: function (t, i) { if (null == t) return !1; if (this._cachedItemHtml = [], void 0 == this.items || 0 == this.items.length) { this.source = new Array, this.refresh(), (s = this._mapItem(t)).index = 0, this.items[this.items.length] = s, this._addItems(!0), this._renderItems(), this.rendered && this.rendered(), this.allowDrag && this._enableDragDrop && this._enableDragDrop(); h = s.value; return "" != s.value && null != s.value || (h = i), this.itemsByValue[e.trim(h).split(" ").join("")] = s, !1 } var s = this._mapItem(t); if (-1 == i || void 0 == i || null == i || i >= this.items.length) s.index = this.items.length, this.items[this.items.length] = s; else { for (var r = new Array, o = 0, a = !1, n = 0, l = 0; l < this.items.length; l++) 0 == this.items[l].isGroup && n >= i && !a && (r[o++] = s, s.index = i, n++, a = !0), r[o] = this.items[l], this.items[l].isGroup || (r[o].index = n, n++), o++; this.items = r } var h = s.value; "" != s.value && null != s.value || (h = i), this.itemsByValue[e.trim(h).split(" ").join("")] = s, this.visibleItems = new Array, this.renderedVisibleItems = new Array; var d = e.data(this.vScrollBar[0], "jqxScrollBar").instance, c = d.value; return d.setPosition(0), this.allowDrag && this._enableDragDrop || this.virtualSize && this.virtualSize.height < 10 + this.host.height() ? this._addItems(!0) : this._addItems(!1), this._renderItems(), this.allowDrag && this._enableDragDrop && this._enableDragDrop(), d.setPosition(c), this.rendered && this.rendered(), !0 }, removeAt: function (t) { if (t < 0 || t > this.items.length - 1) return !1; if (void 0 == t) return !1; var i = this.items[t].height; "" != (c = this.items[t].value) && null != c || (c = t), this.itemsByValue[e.trim(c).split(" ").join("")] = null, this.items.splice(t, 1); for (var s = new Array, r = 0, o = 0, a = 0; a < this.items.length; a++) s[r] = this.items[a], this.items[a].isGroup || (s[r].index = o, o++), r++; this.items = s; var n = e.data(this.vScrollBar[0], "jqxScrollBar").instance, l = (n = e.data(this.vScrollBar[0], "jqxScrollBar").instance).value; if (n.setPosition(0), this.visibleItems = new Array, this.renderedVisibleItems = new Array, this.items.length > 0) { if (this.virtualSize) { this.virtualSize.height -= i; var h = 2 * this.virtualSize.itemsPerPage; this.autoHeight && (h = this.items.length), this.virtualItemsCount = Math.min(h, this.items.length) } this._updatescrollbars() } else this._addItems(); this._renderItems(), this.allowDrag && this._enableDragDrop && this._enableDragDrop(), "hidden" != this.vScrollBar.css("visibility") ? n.setPosition(l) : n.setPosition(0), this.itemsByValue = new Array; for (var d = 0; d < this.items.length; d++) { var c = this.items[d].value; "" != this.items[d].value && null != this.items[d].value || (c = d), this.itemsByValue[e.trim(c).split(" ").join("")] = this.items[d] } return this.rendered && this.rendered(), !0 }, removeItem: function (e, t) { var i = this._getItemByParam(e), s = -1; if (i && void 0 != i.index && !0 !== t) { for (var r = 0; r < this.items.length; r++) if (this.items[r].label == i.label && this.items[r].value == i.value) { s = r; break } if (-1 != s) return this.removeAt(s) } if (-1 == s) return this.removeAt(i.index) }, getItems: function () { return this.items }, disableItem: function (e) { var t = this._getItemByParam(e); this.disableAt(t.index) }, enableItem: function (e) { var t = this._getItemByParam(e); this.enableAt(t.index) }, disableAt: function (e) { return !!this.items && (!(e < 0 || e > this.items.length - 1) && (this.items[e].disabled = !0, this._renderItems(), !0)) }, enableAt: function (e) { return !!this.items && (!(e < 0 || e > this.items.length - 1) && (this.items[e].disabled = !1, this._renderItems(), !0)) }, destroy: function () { this.source && this.source.unbindBindingUpdate && this.source.unbindBindingUpdate(this.element.id), this._removeHandlers(), this.vScrollBar.jqxScrollBar("destroy"), this.hScrollBar.jqxScrollBar("destroy"), this.vScrollBar.remove(), this.hScrollBar.remove(), this.content.remove(), e.jqx.utilities.resize(this.host, null, !0); var t = e.data(this.element, "jqxListBox"); delete this.hScrollInstance, delete this.vScrollInstance, delete this.vScrollBar, delete this.hScrollBar, delete this.content, delete this.bottomRight, delete this.itemswrapper, delete this.visualItems, delete this.visibleItems, delete this.items, delete this.groups, delete this.renderedVisibleItems, delete this._mousewheelfunc, delete this._mousemovefunc, delete this._cachedItemHtml, delete this.itemsByValue, delete this._activeElement, delete this.source, delete this.events, this.input && (this.input.remove(), delete this.input), t && delete t.instance, this.host.removeData(), this.host.removeClass(), this.host.remove(), this.element = null, delete this.element, this.host = null, delete this.set, delete this.get, delete this.call, delete this.host }, _raiseEvent: function (e, t) { if (1 == this._stopEvents) return !0; void 0 == t && (t = { owner: null }); var i = this.events[e]; args = t, args.owner = this, this._updateInputSelection(); var s = new jQuery.Event(i); if (s.owner = this, s.args = args, null != this.host) var r = this.host.trigger(s); return r } }) }(jQuery), jQuery.jqx._jqxListBox.item = function () { return { group: "", groupHtml: "", selected: !1, isGroup: !1, highlighted: !1, value: null, label: "", html: null, visible: !0, disabled: !1, element: null, width: null, height: null, initialTop: null, top: null, left: null, title: "", index: -1, checkBoxElement: null, originalItem: null, checked: !1, visibleIndex: -1 } }, function (e) { e.jqx.jqxWidget("jqxTree", "", {}), e.extend(e.jqx._jqxTree.prototype, { defineInstance: function () { this.items = new Array, this.width = null, this.height = null, this.easing = "easeInOutCirc", this.animationShowDuration = "fast", this.animationHideDuration = "fast", this.treeElements = new Array, this.disabled = !1, this.enableHover = !0, this.keyboardNavigation = !0, this.enableKeyboardNavigation = !0, this.toggleMode = "dblclick", this.source = null, this.checkboxes = !1, this.checkSize = 13, this.toggleIndicatorSize = 16, this.hasThreeStates = !1, this.selectedItem = null, this.touchMode = "auto", this.allowDrag = !0, this.allowDrop = !0, this.searchMode = "startswithignorecase", this.incrementalSearch = !0, this.incrementalSearchDelay = 700, this.animationHideDelay = 0, this.submitCheckedItems = !1, this.dragStart = null, this.dragEnd = null, this.rtl = !1, this.dropAction = "default", this.events = ["expand", "collapse", "select", "initialized", "added", "removed", "checkChange", "dragEnd", "dragStart"], this.aria = { "aria-activedescendant": { name: "getActiveDescendant", type: "string" }, "aria-disabled": { name: "disabled", type: "boolean" } } }, createInstance: function (t) { var i = this; if (this.host.attr("role", "tree"), this.host.attr("data-role", "treeview"), this.propertyChangeMap.disabled = function (t, s, r, o) { i.disabled ? i.host.addClass(i.toThemeProperty("jqx-tree-disabled")) : i.host.removeClass(i.toThemeProperty("jqx-tree-disabled")), e.jqx.aria(i, "aria-disabled", o) }, null != this.width && -1 != this.width.toString().indexOf("px") ? this.host.width(this.width) : void 0 == this.width || isNaN(this.width) || this.host.width(this.width), null != this.height && -1 != this.height.toString().indexOf("px") ? this.host.height(this.height) : void 0 == this.height || isNaN(this.height) || this.host.height(this.height), null != this.width && -1 != this.width.toString().indexOf("%") && this.host.width(this.width), null != this.height && -1 != this.height.toString().indexOf("%") && this.host.height(this.height), this.host.attr("tabindex") || this.host.attr("tabIndex", 1), this.disabled && (this.host.addClass(this.toThemeProperty("jqx-tree-disabled")), e.jqx.aria(this, "aria-disabled", !0)), this.host.jqxDragDrop && jqxTreeDragDrop(), this.originalInnerHTML = this.element.innerHTML, this.createdTree = !1, this.element.innerHTML.indexOf("UL") && (r = this.host.find("ul:first")).length > 0 && (this.createTree(r[0]), this.createdTree = !0), null != this.source) { var s = this.loadItems(this.source); this.element.innerHTML = s, (r = this.host.find("ul:first")).length > 0 && (this.createTree(r[0]), this.createdTree = !0) } if (this._itemslength = this.items.length, !this.createdTree && 0 == this.host.find("ul").length) { this.host.append(e("<ul></ul>")); var r = this.host.find("ul:first"); r.length > 0 && (this.createTree(r[0]), this.createdTree = !0), this.createdTree = !0 } 1 == this.createdTree && (this._render(), this._handleKeys()), this._updateCheckLayout() }, checkItems: function (t, i) { var s = this; if (null != t) { var r = 0, o = !1, a = 0; if (a = (l = e(t.element).find("li")).length, e.each(l, function (e) { var t = s.itemMapping["id" + this.id].item; 0 != t.checked && (null == t.checked && (o = !0), r++) }), t != i) r == a ? this.checkItem(t.element, !0, "tree") : r > 0 ? this.checkItem(t.element, null, "tree") : this.checkItem(t.element, !1, "tree"); else { var n = i.checked, l = e(i.element).find("li"); e.each(l, function () { s.itemMapping["id" + this.id].item; s.checkItem(this, n, "tree") }) } this.checkItems(this._parentItem(t), i) } else { var n = i.checked, l = e(i.element).find("li"); e.each(l, function () { s.itemMapping["id" + this.id].item; s.checkItem(this, n, "tree") }) } }, _getMatches: function (t, i) { if (void 0 == t || 0 == t.length) return -1; for (var s = this.items, r = new Array, o = 0; o < s.length; o++) this._isVisible(s[o]) && !s[o].disabled && r.push(s[o]); s = r, void 0 != i && (s = s.slice(i)); var a = new Array; return e.each(s, function (i) { var s = this.label; s || (s = ""), e.jqx.string.startsWithIgnoreCase(s.toString(), t) && a.push({ id: this.id, element: this.element }) }), a }, _handleKeys: function () { var t = this; this.addHandler(this.host, "keydown", function (i) { var s = i.keyCode; if ((t.keyboardNavigation || t.enableKeyboardNavigation) && null != t.selectedItem) { var r = t.selectedItem.element; if (t.incrementalSearch && !(s >= 33 && s <= 40)) { t._searchString || (t._searchString = ""), (8 == s || 46 == s) && t._searchString.length >= 1 && (t._searchString = t._searchString.substr(0, t._searchString.length - 1)); var o = String.fromCharCode(s), a = !isNaN(parseInt(o)); if (s >= 65 && s <= 97 || a || 8 == s || 32 == s || 46 == s) { if (i.shiftKey || (o = o.toLocaleLowerCase()), 8 != s && 32 != s && 46 != s && (t._searchString.length > 0 && t._searchString.substr(0, 1) == o || (t._searchString += o)), 32 == s && (t._searchString += " "), t._searchTime = new Date, c = t.selectedItem) { for (var n = c.id, l = -1, h = 0; h < t.items.length; h++) if (t.items[h].id == n) { l = h + 1; break } if (0 == (d = t._getMatches(t._searchString, l)).length || d.length > 0 && d[0].id == n) d = t._getMatches(t._searchString) } else var d = t._getMatches(t._searchString); if (d.length > 0) { var c = t.selectedItem; t.selectedItem && t.selectedItem.id != d[0].id && (t.clearSelection(), t.selectItem(d[0].element)), t._lastSearchString = t._searchString } } void 0 != t._searchTimer && clearTimeout(t._searchTimer), 27 != s && 13 != s || (t._searchString = "", t._lastSearchString = ""), t._searchTimer = setTimeout(function () { t._searchString = "", t._lastSearchString = "" }, 500) } switch (s) { case 32: if (t.checkboxes) { t.fromKey = !0; var u = e(t.selectedItem.checkBoxElement).jqxCheckBox("checked"); return t.checkItem(t.selectedItem.element, !u, "tree"), t.hasThreeStates && t.checkItems(t.selectedItem, t.selectedItem), !1 } return !0; case 33: for (var p = t._getItemsOnPage(), m = t.selectedItem, h = 0; h < p; h++) m = t._prevVisibleItem(m); return null != m ? (t.selectItem(m.element), t.ensureVisible(m.element)) : (t.selectItem(t._firstItem().element), t.ensureVisible(t._firstItem().element)), !1; case 34: for (var p = t._getItemsOnPage(), g = t.selectedItem, h = 0; h < p; h++) g = t._nextVisibleItem(g); return null != g ? (t.selectItem(g.element), t.ensureVisible(g.element)) : (t.selectItem(t._lastItem().element), t.ensureVisible(t._lastItem().element)), !1; case 37: case 39: if (37 == s && !t.rtl || 39 == s && t.rtl) if (t.selectedItem.hasItems && t.selectedItem.isExpanded) t.collapseItem(r); else { var f = t._parentItem(t.selectedItem); null != f && (t.selectItem(f.element), t.ensureVisible(f.element)) } return (39 == s && !t.rtl || 37 == s && t.rtl) && t.selectedItem.hasItems && (t.selectedItem.isExpanded ? null != (g = t._nextVisibleItem(t.selectedItem)) && (t.selectItem(g.element), t.ensureVisible(g.element)) : t.expandItem(r)), !1; case 13: return t.selectedItem.hasItems && (t.selectedItem.isExpanded ? t.collapseItem(r) : t.expandItem(r)), !1; case 36: return t.selectItem(t._firstItem().element), t.ensureVisible(t._firstItem().element), !1; case 35: return t.selectItem(t._lastItem().element), t.ensureVisible(t._lastItem().element), !1; case 38: return null != (m = t._prevVisibleItem(t.selectedItem)) && (t.selectItem(m.element), t.ensureVisible(m.element)), !1; case 40: return null != (g = t._nextVisibleItem(t.selectedItem)) && (t.selectItem(g.element), t.ensureVisible(g.element)), !1 } } }) }, _firstItem: function () { var t = null, s = this, r = this.host.find("ul:first"), o = e(r).find("li"); for (i = 0; i <= o.length - 1; i++) { var a = o[i]; if (t = this.itemMapping["id" + a.id].item, s._isVisible(t)) return t } return null }, _lastItem: function () { var t = null, s = this, r = this.host.find("ul:first"), o = e(r).find("li"); for (i = o.length - 1; i >= 0; i--) { var a = o[i]; if (t = this.itemMapping["id" + a.id].item, s._isVisible(t)) return t } return null }, _parentItem: function (t) { if (null == t || void 0 == t) return null; var i = t.parentElement; if (!i) return null; var s = null; return e.each(this.items, function () { if (this.element == i) return s = this, !1 }), s }, _nextVisibleItem: function (e) { if (null == e || void 0 == e) return null; for (var t = e; null != t;) if (t = t.nextItem, this._isVisible(t) && !t.disabled) return t; return null }, _prevVisibleItem: function (e) { if (null == e || void 0 == e) return null; for (var t = e; null != t;) if (t = t.prevItem, this._isVisible(t) && !t.disabled) return t; return null }, _isVisible: function (e) { if (null == e || void 0 == e) return !1; if (!this._isElementVisible(e.element)) return !1; var t = this._parentItem(e); if (null == t) return !0; if (null != t) { if (!this._isElementVisible(t.element)) return !1; if (!t.isExpanded) return !1; for (; null != t;) { if (null != (t = this._parentItem(t)) && !this._isElementVisible(t.element)) return !1; if (null != t && !t.isExpanded) return !1 } } return !0 }, _getItemsOnPage: function () { var t = 0, i = (this.panel.jqxPanel("getVScrollPosition"), parseInt(this.host.height())), s = 0, r = this._firstItem(); if (parseInt(e(r.element).height()) > 0) for (; s <= i;) s += parseInt(e(r.element).outerHeight()), t++; return t }, _isElementVisible: function (t) { return null != t && ("none" != e(t).css("display") && "hidden" != e(t).css("visibility")) }, refresh: function (t) { if (null != this.width && -1 != this.width.toString().indexOf("px") ? this.host.width(this.width) : void 0 == this.width || isNaN(this.width) || this.host.width(this.width), null != this.height && -1 != this.height.toString().indexOf("px") ? this.host.height(this.height) : void 0 == this.height || isNaN(this.height) || this.host.height(this.height), this.panel) { if (null != this.width && -1 != this.width.toString().indexOf("%")) { i = this; this.panel.jqxPanel("width", "100%"), i.removeHandler(e(window), "resize.jqxtree" + i.element.id), i.addHandler(e(window), "resize.jqxtree" + i.element.id, function () { i._calculateWidth() }) } else this.panel.jqxPanel("width", this.host.width()); this.panel.jqxPanel("_arrange") } if (this._calculateWidth(), e.jqx.isHidden(this.host)) { var i = this; this._hiddenTimer = setInterval(function () { e.jqx.isHidden(i.host) || (clearInterval(i._hiddenTimer), i._calculateWidth()) }, 100) } 1 != t && this.checkboxes && this._updateCheckLayout(null) }, resize: function (e, t) { this.width = e, this.height = t, this.refresh() }, loadItems: function (t) { if (null != t) { var i = this; this.items = new Array; var s = "<ul>"; return e.map(t, function (e) { if (void 0 == e) return null; s += i._parseItem(e) }), s += "</ul>" } }, _parseItem: function (e) { var t = ""; if (void 0 == e) return null; var i = e.label; !e.label && e.html && (i = e.html), i || (i = "Item"), "string" == typeof e && (i = e); var s = !1; void 0 != e.expanded && e.expanded && (s = !0); var r = !1; void 0 != e.locked && e.locked && (r = !0); var o = !1; void 0 != e.selected && e.selected && (o = !0); var a = !1; void 0 != e.disabled && e.disabled && (a = !0); var n = !1; void 0 != e.checked && e.checked && (n = !0); var l = e.icon, h = e.iconsize; t += "<li", s && (t += ' item-expanded="true" '), r && (t += ' item-locked="true" '), a && (t += ' item-disabled="true" '), o && (t += ' item-selected="true" '), h && (t += ' item-iconsize="' + e.iconsize + '" '), null != l && void 0 != l && (t += ' item-icon="' + l + '" '), e.label && !e.html && (t += ' item-label="' + i + '" '), null != e.value && (t += ' item-value="' + e.value + '" '), void 0 != e.checked && (t += ' item-checked="' + n + '" '); var d = ""; return void 0 != e.id ? t += ' id="' + (d = e.id) + '" ' : t += ' id="' + (d = this.createID()) + '" ', t += ">" + i, e.items && (t += this.loadItems(e.items)), this._valueList || (this._valueList = new Array), this._valueList[d] = e.value, t += "</li>" }, ensureVisible: function (t) { if (null != t && void 0 != t) { var i = this.panel.jqxPanel("getVScrollPosition"), s = this.panel.jqxPanel("getHScrollPosition"), r = parseInt(this.host.height()), o = e(t).position().top; (o <= i || o >= r + i) && this.panel.jqxPanel("scrollTo", s, o - r + e(t).outerHeight()) } }, _syncItems: function (t) { this._visibleItems = new Array; var i = this; e.each(t, function () { var t = e(this); if ("none" != t.css("display")) { var s = t.outerHeight(); if (t.height() > 0) { var r = parseInt(t.offset().top); i._visibleItems[i._visibleItems.length] = { element: this, top: r, height: s, bottom: r + s } } } }) }, hitTest: function (t, i) { var s = this, r = null, o = this.host.find(".jqx-item"); if (this._syncItems(o), s._visibleItems) { var a = parseInt(s.host.offset().left), n = s.host.outerWidth(); e.each(s._visibleItems, function (o) { if (t >= a && t < a + n && this.top + 5 < i && i < this.top + this.height) { var l = e(this.element).parents("li:first"); if (l.length > 0 && null != (r = s.getItem(l[0]))) return r.height = this.height, r.top = this.top, !1 } }) } return r }, addBefore: function (e, t, i) { return this.addBeforeAfter(e, t, !0, i) }, addAfter: function (e, t, i) { return this.addBeforeAfter(e, t, !1, i) }, addBeforeAfter: function (t, i, s, r) { var o = this, a = new Array; i && void 0 != i.treeInstance && (i = i.element), e.isArray(t) ? a = t : a[0] = t; var n = "", l = this; e.each(a, function () { n += l._parseItem(this) }); var h = e(n); if (o.element.innerHTML.indexOf("UL")) var d = o.host.find("ul:first"); void 0 == i && null == i ? d.append(h) : s ? e(i).before(h) : e(i).after(h); for (var c = h, u = 0; u < c.length; u++) { this._createItem(c[u]); var p = e(c[u]).find("li"); if (p.length > 0) for (var m = 0; m < p.length; m++) this._createItem(p[m]) } var g = function (t) { l._refreshMapping(!1), l._updateItemsNavigation(), t && l.allowDrag && l._enableDragDrop && l._enableDragDrop(), null != l.selectedItem && (e(l.selectedItem.titleElement).addClass(l.toThemeProperty("jqx-fill-state-pressed")), e(l.selectedItem.titleElement).addClass(l.toThemeProperty("jqx-tree-item-selected"))) }; if (0 == r) return g(!0), void this._raiseEvent("4", { items: this.getItems() }); g(!1), l._render(), this._raiseEvent("4", { items: this.getItems() }), l.checkboxes && l._updateCheckLayout(null) }, addTo: function (t, i, s) { var r = this, o = new Array; i && void 0 != i.treeInstance && (i = i.element), e.isArray(t) ? o = t : o[0] = t; var a = "", n = this; e.each(o, function () { a += n._parseItem(this) }); var l = e(a); if (r.element.innerHTML.indexOf("UL")) var h = r.host.find("ul:first"); if (void 0 == i && null == i) h.append(l); else { var d = (i = e(i)).find("ul:first"); if (0 == d.length) { ulElement = e("<ul></ul>"), e(i).append(ulElement), d = i.find("ul:first"); var c = r.itemMapping["id" + i[0].id].item; c.subtreeElement = d[0], c.hasItems = !0, d.addClass(r.toThemeProperty("jqx-tree-dropdown")), n.rtl && d.addClass(r.toThemeProperty("jqx-tree-dropdown-rtl")), d.append(l); var u = d.find("li:first"); c.parentElement = u } else d.append(l) } for (var p = l, m = 0; m < p.length; m++) { this._createItem(p[m]); var g = e(p[m]).find("li"); if (g.length > 0) for (var f = 0; f < g.length; f++) this._createItem(g[f]) } var v = function (t) { n._refreshMapping(!1), n._updateItemsNavigation(), t && n.allowDrag && n._enableDragDrop && n._enableDragDrop(), null != n.selectedItem && (e(n.selectedItem.titleElement).addClass(n.toThemeProperty("jqx-fill-state-pressed")), e(n.selectedItem.titleElement).addClass(n.toThemeProperty("jqx-tree-item-selected"))) }; if (0 == s) return v(!0), void this._raiseEvent("4", { items: this.getItems() }); v(!1), n._render(), n.checkboxes && n._updateCheckLayout(null), this._raiseEvent("4", { items: this.getItems() }) }, updateItem: function (t, i) { if (!(r = void 0 != t.treeInstance ? t : this.getItem(t))) { var s = t; t = i, i = s; var r = void 0 != t.treeInstance ? t : this.getItem(t) } if (r) { if ("string" == typeof i && (i = { label: i }), i.value && (r.value = i.value), i.label && (r.label = i.label, e.jqx.utilities.html(e(r.titleElement), i.label), e.jqx.browser.msie && e.jqx.browser.version < 8)) { e(document.body).append(this._measureItem), this._measureItem.html(e(r.titleElement).text()); var o = this._measureItem.width(); r.icon && (o += 20), e(e(r.titleElement).find("img")).length > 0 && (o += 20), e(r.titleElement).css("max-width", o + "px"), this._measureItem.remove() } if (i.icon) if (e(r.element).children(".itemicon").length > 0) e(r.element).find(".itemicon")[0].src = i.icon; else { var a = i.iconsize; a || (a = 16); var n = e('<img width="' + a + '" height="' + a + '" style="float: left;" class="itemicon" src="' + i.icon + '"/>'); e(r.titleElement).prepend(n), n.css("margin-right", "4px"), this.rtl && (n.css("margin-right", "0px"), n.css("margin-left", "4px"), n.css("float", "right")) } return i.expanded && this.expandItem(r), i.disabled && this.disableItem(r), i.selected && this.selectItem(r), !0 } return !1 }, removeItem: function (t, i) { if (void 0 != t && null != t) { void 0 != t.treeInstance && (t = t.element); var s = this, r = (t.id, this.getItem(t)); r && -1 != this.items.indexOf(r) && function t(i) { var s = -1; -1 != (s = this.items.indexOf(i)) && this.items.splice(s, 1); var r = e(i.element).find("li"), o = r.length, a = this, n = new Array; if (o > 0) { e.each(r, function (e) { var t = a.itemMapping["id" + this.id].item; n.push(t) }); for (var l = 0; l < n.length; l++) t.apply(this, [n[l]]) } }.apply(this, [r]), this.host.find("#" + t.id).length > 0 && e(t).remove(), 0 != i ? (s._updateItemsNavigation(), s._render(), null != s.selectedItem && s.selectedItem.element == t && (e(s.selectedItem.titleElement).removeClass(s.toThemeProperty("jqx-fill-state-pressed")), e(s.selectedItem.titleElement).removeClass(s.toThemeProperty("jqx-tree-item-selected")), s.selectedItem = null), this._raiseEvent("5"), s.checkboxes && s._updateCheckLayout(null)) : this._raiseEvent("5") } }, clear: function () { this.items = new Array, this.itemMapping = new Array; var e = this.host.find("ul:first"); e.length > 0 && (e[0].innerHTML = ""), this.selectedItem = null }, disableItem: function (t) { if (null == t) return !1; void 0 != t.treeInstance && (t = t.element); var i = this; e.each(i.items, function () { var s = this; if (s.element == t) return s.disabled = !0, e(s.titleElement).addClass(i.toThemeProperty("jqx-fill-state-disabled")), e(s.titleElement).addClass(i.toThemeProperty("jqx-tree-item-disabled")), i.checkboxes && s.checkBoxElement && e(s.checkBoxElement).jqxCheckBox({ disabled: !0 }), !1 }) }, _updateInputSelection: function () { if (this.input) { if (null == this.selectedItem) this.input.val(""); else { var e = this.selectItem.value; null == e && (e = this.selectedItem.label), this.input.val(e) } if (this.checkboxes) { var t = this.getCheckedItems(); if (this.submitCheckedItems) { for (var i = "", s = 0; s < t.length; s++) { var r = t[s].value; null == r && (r = t[s].label), s == t.length - 1 ? i += r : i += r + "," } this.input.val(i) } } } }, getCheckedItems: function () { var t = new Array, i = this; return e.each(i.items, function () { var e = this; e.checked && t.push(e) }), t }, getUncheckedItems: function () { var t = new Array, i = this; return e.each(i.items, function () { var e = this; e.checked || t.push(e) }), t }, checkAll: function () { var t = this; e.each(t.items, function () { var t = this; t.disabled || (t.checked = !0, e(t.checkBoxElement).jqxCheckBox("_setState", !0)) }), this._raiseEvent("6", { element: this, checked: !0 }) }, uncheckAll: function () { var t = this; e.each(t.items, function () { var t = this; t.disabled || (t.checked = !1, e(t.checkBoxElement).jqxCheckBox("_setState", !1)) }), this._raiseEvent("6", { element: this, checked: !1 }) }, checkItem: function (t, i, s) { if (null == t) return !1; void 0 === i && (i = !0), void 0 != t.treeInstance && (t = t.element); var r = this, o = !1, a = null; e.each(r.items, function () { var s = this; if (s.element == t && !s.disabled) return o = !0, s.checked = i, a = s, e(s.checkBoxElement).jqxCheckBox({ checked: i }), !1 }), o && (this._raiseEvent("6", { element: t, checked: i }), this._updateInputSelection()), void 0 == s && a && this.hasThreeStates && this.checkItems(a, a) }, uncheckItem: function (e) { this.checkItem(e, !1) }, enableItem: function (t) { if (null == t) return !1; void 0 != t.treeInstance && (t = t.element); var i = this; e.each(i.items, function () { var s = this; if (s.element == t) return s.disabled = !1, e(s.titleElement).removeClass(i.toThemeProperty("jqx-fill-state-disabled")), e(s.titleElement).removeClass(i.toThemeProperty("jqx-tree-item-disabled")), i.checkboxes && s.checkBoxElement && e(s.checkBoxElement).jqxCheckBox({ disabled: !1 }), !1 }) }, enableAll: function () { var t = this; e.each(t.items, function () { var i = this; i.disabled = !1, e(i.titleElement).removeClass(t.toThemeProperty("jqx-tree-item-disabled")), e(i.titleElement).removeClass(t.toThemeProperty("jqx-fill-state-disabled")), t.checkboxes && i.checkBoxElement && e(i.checkBoxElement).jqxCheckBox({ disabled: !1 }) }) }, lockItem: function (t) { if (null == t) return !1; var i = this; e.each(i.items, function () { var e = this; if (e.element == t) return e.locked = !0, !1 }) }, unlockItem: function (t) { if (null == t) return !1; var i = this; e.each(i.items, function () { var e = this; if (e.element == t) return e.locked = !1, !1 }) }, getItems: function () { return this.items }, getItem: function (e) { return null == e || void 0 == e ? null : this.itemMapping["id" + e.id] ? this.itemMapping["id" + e.id].item : null }, isExpanded: function (e) { if (null == e || void 0 == e) return !1; var t = this.itemMapping["id" + e.id].item; return null != t && t.isExpanded }, isSelected: function (e) { if (null == e || void 0 == e) return !1; var t = this.itemMapping["id" + e.id].item; return null != t && t == this.selectedItem }, getPrevItem: function (e) { var t = this.getItem(e); return void 0 != e.treeInstance && (t = e), this._prevVisibleItem(t) }, getNextItem: function (e) { var t = this.getItem(e); return void 0 != e.treeInstance && (t = e), this._nextVisibleItem(t) }, getSelectedItem: function (e) { return this.selectedItem }, val: function (e) { if (0 == arguments.length || "object" == typeof e) return this.selectedItem; if ("string" == typeof e) { var t = this.host.find("#" + e); if (t.length > 0) { i = this.getItem(t[0]); this.selectItem(i) } } else { var i = this.getItem(e); this.selectItem(i) } }, getActiveDescendant: function () { return this.selectedItem ? this.selectedItem.element.id : "" }, clearSelection: function () { this.selectItem(null) }, selectItem: function (t) { if (!this.disabled) { var i = this; if (t && void 0 != t.treeInstance && (t = t.element), null != t && void 0 != t) { if (null == this.selectedItem || this.selectedItem.element != t) { var s = null != this.selectedItem ? this.selectedItem.element : null; s && e(s).removeAttr("aria-selected"), e.each(i.items, function () { var s = this; this.selected = !1, s.disabled || s.element == t && (null == i.selectedItem || null != i.selectedItem && i.selectedItem.titleElement != s.titleElement) && (null != i.selectedItem && (e(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-fill-state-pressed")), e(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-tree-item-selected"))), e(s.titleElement).addClass(i.toThemeProperty("jqx-fill-state-pressed")), e(s.titleElement).addClass(i.toThemeProperty("jqx-tree-item-selected")), i.selectedItem = s, this.selected = !0, e(s.element).attr("aria-selected", "true"), e.jqx.aria(i, "aria-activedescendant", s.element.id)) }), this._updateInputSelection(), this._raiseEvent("2", { element: t, prevElement: s }) } } else null != i.selectedItem && (e(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-fill-state-pressed")), e(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-tree-item-selected")), i.selectedItem = null) } }, collapseAll: function () { this.isUpdating = !0; var t = this, i = t.items, s = this.animationHideDuration; this.animationHideDuration = 0, e.each(i, function () { var e = this; 1 == e.isExpanded && t._collapseItem(t, e) }), setTimeout(function () { t.isUpdating = !1, t._calculateWidth() }, this.animationHideDuration), this.animationHideDuration = s }, expandAll: function () { var t = this; this.isUpdating = !0; var i = this.animationShowDuration; this.animationShowDuration = 0, e.each(this.items, function () { var e = this; e.hasItems && t._expandItem(t, e) }), setTimeout(function () { t.isUpdating = !1, t._calculateWidth() }, this.animationShowDuration), this.animationShowDuration = i }, collapseItem: function (t) { if (null == t) return !1; void 0 != t.treeInstance && (t = t.element); var i = this; return e.each(this.items, function () { var e = this; if (1 == e.isExpanded && e.element == t) return i._collapseItem(i, e), !1 }), !0 }, expandItem: function (t) { if (null == t) return !1; void 0 != t.treeInstance && (t = t.element); var i = this; return e.each(i.items, function () { var e = this; 0 != e.isExpanded || e.element != t || e.disabled || e.locked || (i._expandItem(i, e), e.parentElement && i.expandItem(e.parentElement)) }), !0 }, _getClosedSubtreeOffset: function (t) { var i = e(t.subtreeElement), s = -i.outerHeight(); i.outerWidth(); return 0, { left: 0, top: s } }, _collapseItem: function (t, i, s, r) { if (null == t || null == i) return !1; if (i.disabled) return !1; if (t.disabled) return !1; if (t.locked) return !1; var o = e(i.subtreeElement), a = this._getClosedSubtreeOffset(i); a.top, a.left; $treeElement = e(i.element); t.animationHideDelay; null != o.data("timer").show && (clearTimeout(o.data("timer").show), o.data("timer").show = null); var n = function () { if (i.isExpanded = !1, t.checkboxes) { var s = o.find(".chkbox"); s.stop(), s.css("opacity", 1), o.find(".chkbox").animate({ opacity: 0 }, 50) } var r = e(i.arrow); t._arrowStyle(r, "", i.isExpanded), o.slideUp(t.animationHideDuration, function () { i.isCollapsing = !1, t._calculateWidth(); var s = e(i.arrow); t._arrowStyle(s, "", i.isExpanded), o.hide(), t._raiseEvent("1", { element: i.element }) }) }; n() }, _expandItem: function (t, i) { if (null == t || null == i) return !1; if (i.isExpanded) return !1; if (i.locked) return !1; if (i.disabled) return !1; if (t.disabled) return !1; var s = e(i.subtreeElement); null != s.data("timer") && null != s.data("timer").hide && clearTimeout(s.data("timer").hide); e(i.element); if (0 != parseInt(s.css("top"))) { var r = e(i.arrow); if (t._arrowStyle(r, "", i.isExpanded), t.checkboxes) { var o = s.find(".chkbox"); o.stop(), o.css("opacity", 0), o.animate({ opacity: 1 }, t.animationShowDuration) } if (s.slideDown(t.animationShowDuration, t.easing, function () { var s = e(i.arrow); i.isExpanded = !0, t._arrowStyle(s, "", i.isExpanded), i.isExpanding = !1, t._raiseEvent("0", { element: i.element }), t._calculateWidth() }), t.checkboxes && (t._updateCheckItemLayout(i), i.subtreeElement)) { var a = e(i.subtreeElement).find("li"); e.each(a, function () { var e = t.getItem(this); null != e && t._updateCheckItemLayout(e) }) } } else i.isExpanded = !0 }, _calculateWidth: function () { var t = this, i = this.checkboxes ? 20 : 0, s = 0; if (!this.isUpdating) { if (e.each(this.items, function () { if (0 != e(this.element).height()) { var t = this.titleElement.outerWidth() + 10 + i + 20 * (1 + this.level); if (s = Math.max(s, t), this.hasItems) { var r = parseInt(e(this.titleElement).css("padding-top")); isNaN(r) && (r = 0), r *= 2; var o = ((r += 2) + e(this.titleElement).height()) / 2 - 8.5; e.jqx.browser.msie && e.jqx.browser.version < 9 ? e(this.arrow).css("margin-top", "3px") : parseInt(o) >= 0 && e(this.arrow).css("margin-top", parseInt(o) + "px") } } }), this.toggleIndicatorSize > 16 && (s = s + this.toggleIndicatorSize - 16), t.panel) if (s > this.host.width()) { var r = s - this.host.width(); r += "hidden" !== t.panel.jqxPanel("vScrollBar").css("visibility") ? 10 : 0, t.panel.jqxPanel({ horizontalScrollBarMax: r }) } else t.panel.jqxPanel({ horizontalScrollBarMax: 0 }); this.host.find("ul:first").width(s); var o = this.host.width() - 30; o > 0 && this.host.find("ul:first").css("min-width", o), t.panel && t.panel.jqxPanel("_arrange") } }, _arrowStyle: function (e, t, i) { var s = this; if (e.length > 0) { e.removeClass(); var r = ""; "hover" == t && (r = "-" + t); var o = "jqx-tree-item-arrow" + (a = i ? "-expand" : "-collapse") + r; if (e.addClass(s.toThemeProperty(o)), !this.rtl) { a = i ? "-down" : "-right"; e.addClass(s.toThemeProperty("jqx-icon-arrow" + a)) } if (this.rtl) { e.addClass(s.toThemeProperty(o + "-rtl")); var a = i ? "-down" : "-left"; e.addClass(s.toThemeProperty("jqx-icon-arrow" + a)) } } }, _initialize: function (t, i) { var s = this; this.host.addClass(s.toThemeProperty("jqx-widget")), this.host.addClass(s.toThemeProperty("jqx-widget-content")), this.host.addClass(s.toThemeProperty("jqx-tree")), this._updateDisabledState(); var r = e.jqx.browser.msie && e.jqx.browser.version < 8; e.each(this.items, function () { var t = this; $element = e(t.element); var i = null; if (s.checkboxes && !t.hasItems && t.checkBoxElement && e(t.checkBoxElement).css("margin-left", "0px"), r) !t.hasItems && e(t.element).find("ul").length > 0 && e(t.element).find("ul").remove(); else { if (!t.hasItems) return s.rtl ? t.element.style.marginRight = parseInt(s.toggleIndicatorSize) + "px" : t.element.style.marginLeft = parseInt(s.toggleIndicatorSize) + "px", (o = e(t.arrow)).length > 0 && (o.remove(), t.arrow = null), !0; t.element.style.marginLeft = "0px" } var o = e(t.arrow); o.length > 0 && o.remove(), (i = e('<span style="height: 17px; border: none; background-color: transparent;" id="arrow' + $element[0].id + '"></span>')).prependTo($element), s.rtl ? i.css("float", "right") : i.css("float", "left"), i.css("clear", "both"), i.width(s.toggleIndicatorSize), s._arrowStyle(i, "", t.isExpanded); var a = parseInt(e(this.titleElement).css("padding-top")); isNaN(a) && (a = 0), a *= 2; var n = ((a += 2) + e(this.titleElement).height()) / 2 - 8.5; e.jqx.browser.msie && e.jqx.browser.version < 9 ? i.css("margin-top", "3px") : parseInt(n) >= 0 && i.css("margin-top", parseInt(n) + "px"), $element.addClass(s.toThemeProperty("jqx-disableselect")), i.addClass(s.toThemeProperty("jqx-disableselect")); var l = "click", h = s.isTouchDevice(); h && (l = e.jqx.mobile.getTouchEventName("touchend")), s.addHandler(i, l, function () { return t.isExpanded ? s._collapseItem(s, t) : s._expandItem(s, t), !1 }), s.addHandler(i, "selectstart", function () { return !1 }), s.addHandler(i, "mouseup", function () { if (!h) return !1 }), t.hasItems = e(t.element).find("li").length > 0, t.arrow = i[0], t.hasItems || i.css("visibility", "hidden"), $element.css("float", "none") }) }, _getOffset: function (t) { var i = e(window).scrollTop(), s = e(window).scrollLeft(), r = e.jqx.mobile.isSafariMobileBrowser(), o = e(t).offset(), a = o.top, n = o.left; return null != r && r ? { left: n - s, top: a - i } : e(t).offset() }, _renderHover: function (t, i, s) { var r = this; if (!s) { var o = e(i.titleElement); r.addHandler(o, "mouseenter", function () { i.disabled || !r.enableHover || r.disabled || (o.addClass(r.toThemeProperty("jqx-fill-state-hover")), o.addClass(r.toThemeProperty("jqx-tree-item-hover"))) }), r.addHandler(o, "mouseleave", function () { i.disabled || !r.enableHover || r.disabled || (o.removeClass(r.toThemeProperty("jqx-fill-state-hover")), o.removeClass(r.toThemeProperty("jqx-tree-item-hover"))) }) } }, _updateDisabledState: function () { this.disabled ? this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")) : this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")) }, _addInput: function () { if (null == this.input) { var t = this.host.attr("name"); t && this.host.attr("name", ""), this.input = e("<input type='hidden'/>"), this.host.append(this.input), this.input.attr("name", t), this._updateInputSelection() } }, render: function () { this._updateItemsNavigation(), this._render() }, _render: function (t, i) { if (e.jqx.browser.msie && e.jqx.browser.version < 8) { s = this; e.each(this.items, function () { var t = e(this.element), i = t.parent(), s = parseInt(this.titleElement.css("margin-left")) + this.titleElement[0].scrollWidth + 13; t.css("min-width", s); var r = parseInt(i.css("min-width")); isNaN(r) && (r = 0); var o = t.css("min-width"); r < parseInt(t.css("min-width")) && i.css("min-width", o), this.titleElement[0].style.width = null }) } var s = this; if (e.data(s.element, "animationHideDelay", s.animationHideDelay), e.data(document.body, "treeel", this), this._initialize(), this.isTouchDevice() && "dblclick" == this.toggleMode && (this.toggleMode = "click"), void 0 != t && 1 != t || e.each(this.items, function () { s._updateItemEvents(s, this) }), this.allowDrag && this._enableDragDrop && (void 0 == i || 1 == i) && this._enableDragDrop(), this._addInput(), this.host.jqxPanel) { if (this.host.find("#panel" + this.element.id).length > 0) return this.panel.jqxPanel({ touchMode: this.touchMode }), void this.panel.jqxPanel("refresh"); this.host.find("ul:first").wrap('<div style="background-color: transparent; overflow: hidden; width: 100%; height: 100%;" id="panel' + this.element.id + '"></div>'); var r = this.host.find("div:first"), o = "fixed"; null != this.height && "auto" != this.height || (o = "verticalwrap"), null != this.width && "auto" != this.width || (o = "fixed" == o ? "horizontalwrap" : "wrap"), r.jqxPanel({ rtl: this.rtl, theme: this.theme, width: "100%", height: "100%", touchMode: this.touchMode, sizeMode: o }), e.jqx.browser.msie && e.jqx.browser.version < 8 && r.jqxPanel("content").css("left", "0px"), r.data({ nestedWidget: !0 }), (null == this.height || null != this.height && -1 != this.height.toString().indexOf("%")) && this.isTouchDevice() && (this.removeHandler(r, e.jqx.mobile.getTouchEventName("touchend") + ".touchScroll touchcancel.touchScroll"), this.removeHandler(r, e.jqx.mobile.getTouchEventName("touchmove") + ".touchScroll"), this.removeHandler(r, e.jqx.mobile.getTouchEventName("touchstart") + ".touchScroll")); var a = e.data(r[0], "jqxPanel").instance; null != a && (this.vScrollInstance = a.vScrollInstance, this.hScrollInstance = a.hScrollInstance), this.panelInstance = a, e.jqx.browser.msie && e.jqx.browser.version < 8 && (this.host.attr("hideFocus", !0), this.host.find("div").attr("hideFocus", !0), this.host.find("ul").attr("hideFocus", !0)), r[0].className = "", this.panel = r } this._raiseEvent("3", this) }, focus: function () { try { this.host.focus() } catch (e) { } }, _updateItemEvents: function (t, i) { var s = this.isTouchDevice(); s && (this.toggleMode = e.jqx.mobile.getTouchEventName("touchend")); var r = e(i.element); t.enableRoundedCorners && r.addClass(t.toThemeProperty("jqx-rc-all")); var o = s ? e.jqx.mobile.getTouchEventName("touchend") : "mousedown"; !0 === t.touchMode && t.removeHandler(e(i.checkBoxElement), "mousedown"), t.removeHandler(e(i.checkBoxElement), o), t.addHandler(e(i.checkBoxElement), o, function (e) { return t.disabled || this.treeItem.disabled || (this.treeItem.checked = !this.treeItem.checked, t.checkItem(this.treeItem.element, this.treeItem.checked, "tree"), t.hasThreeStates && t.checkItems(this.treeItem, this.treeItem)), !1 }); var a = e(i.titleElement); t.removeHandler(r), this.allowDrag && this._enableDragDrop ? (t.removeHandler(a, "mousedown.item"), t.removeHandler(a, "click"), t.removeHandler(a, "dblclick"), t.removeHandler(a, "mouseenter"), t.removeHandler(a, "mouseleave")) : t.removeHandler(a), t._renderHover(r, i, s); var n = e(i.subtreeElement); if (n.length > 0) { var l = i.isExpanded ? "block" : "none"; n.css({ overflow: "hidden", display: l }), n.data("timer", {}) } t.addHandler(a, "selectstart", function (e) { return !1 }), e.jqx.browser.opera && t.addHandler(a, "mousedown.item", function (e) { return !1 }), "click" != t.toggleMode && t.addHandler(a, "click", function (e) { t.selectItem(i.element), null != t.panel && t.panel.jqxPanel({ focused: !0 }), a.focus() }), t.addHandler(a, t.toggleMode, function (e) { if (n.length > 0 && clearTimeout(n.data("timer").hide), null != t.panel && t.panel.jqxPanel({ focused: !0 }), t.selectItem(i.element), void 0 == i.isExpanding && (i.isExpanding = !1), void 0 == i.isCollapsing && (i.isCollapsing = !1), n.length > 0) return i.isExpanded ? 0 == i.isCollapsing && (i.isCollapsing = !0, t._collapseItem(t, i, !0)) : 0 == i.isExpanding && (i.isExpanding = !0, t._expandItem(t, i)), !1 }) }, isTouchDevice: function () { if (void 0 != this._isTouchDevice) return this._isTouchDevice; var t = e.jqx.mobile.isTouchDevice(); return 1 == this.touchMode ? t = !0 : 0 == this.touchMode && (t = !1), this._isTouchDevice = t, t }, createID: function () { return e.jqx.utilities.createId() }, createTree: function (t) { if (null != t) { var i = this, s = e(t).find("li"); this.items = new Array, this.itemMapping = new Array, e(t).addClass(i.toThemeProperty("jqx-tree-dropdown-root")), this.rtl && e(t).addClass(i.toThemeProperty("jqx-tree-dropdown-root-rtl")), (this.rtl || e.jqx.browser.msie && e.jqx.browser.version < 8) && (this._measureItem = e("<span style='position: relative; visibility: hidden;'></span>"), this._measureItem.addClass(this.toThemeProperty("jqx-widget")), this._measureItem.addClass(this.toThemeProperty("jqx-fill-state-normal")), this._measureItem.addClass(this.toThemeProperty("jqx-tree-item")), this._measureItem.addClass(this.toThemeProperty("jqx-item")), e(document.body).append(this._measureItem)), e.jqx.browser.msie && e.jqx.browser.version; for (var r = 0; r < s.length; r++) this._createItem(s[r]); (this.rtl || e.jqx.browser.msie && e.jqx.browser.version < 8) && this._measureItem.remove(), this._updateItemsNavigation(), this._updateCheckStates() } }, _updateCheckLayout: function (t) { var i = this; this.checkboxes && e.each(this.items, function () { this.level != t && void 0 != t || i._updateCheckItemLayout(this) }) }, _updateCheckItemLayout: function (t) { if (this.checkboxes && "none" != e(t.titleElement).css("display")) { var i = e(t.checkBoxElement), s = e(t.titleElement).outerHeight() / 2 - 1 - parseInt(this.checkSize) / 2; i.css("margin-top", s), this.rtl || (e.jqx.browser.msie && e.jqx.browser.version < 8 ? t.titleElement.css("margin-left", parseInt(this.checkSize) + 25) : t.hasItems && i.css("margin-left", this.toggleIndicatorSize)) } }, _updateCheckStates: function () { var t = this; t.hasThreeStates ? e.each(this.items, function () { t._updateCheckState(this) }) : e.each(this.items, function () { null == this.checked && t.checkItem(this.element, !1, "tree") }) }, _updateCheckState: function (t) { if (null != t && void 0 != t) { var i = this, s = 0, r = !1, o = 0, a = e(t.element).find("li"); o = a.length, t.checked && o > 0 && e.each(a, function (e) { var t = i.itemMapping["id" + this.id].item, s = t.element.getAttribute("item-checked"); void 0 != s && null != s && "true" != s && 1 != s || i.checkItem(t.element, !0, "tree") }), e.each(a, function (e) { var t = i.itemMapping["id" + this.id].item; 0 != t.checked && (null == t.checked && (r = !0), s++) }), o > 0 && (s == o ? this.checkItem(t.element, !0, "tree") : s > 0 ? this.checkItem(t.element, null, "tree") : this.checkItem(t.element, !1, "tree")) } }, _updateItemsNavigation: function () { for (var t = this.host.find("ul:first"), i = e(t).find("li"), s = 0; s < i.length; s++) { var r = i[s]; if (this.itemMapping["id" + r.id]) { var o = this.itemMapping["id" + r.id].item; if (!o) continue; o.prevItem = null, o.nextItem = null, s > 0 && this.itemMapping["id" + i[s - 1].id] && (o.prevItem = this.itemMapping["id" + i[s - 1].id].item), s < i.length - 1 && this.itemMapping["id" + i[s + 1].id] && (o.nextItem = this.itemMapping["id" + i[s + 1].id].item) } } }, _applyTheme: function (t, i) { var s = this; this.host.removeClass("jqx-tree-" + t), this.host.removeClass("jqx-widget-" + t), this.host.removeClass("jqx-widget-content-" + t), this.host.addClass(s.toThemeProperty("jqx-tree")), this.host.addClass(s.toThemeProperty("jqx-widget")); var r = this.host.find("ul:first"); e(r).removeClass(s.toThemeProperty("jqx-tree-dropdown-root-" + t)), e(r).addClass(s.toThemeProperty("jqx-tree-dropdown-root")), this.rtl && (e(r).removeClass(s.toThemeProperty("jqx-tree-dropdown-root-rtl-" + t)), e(r).addClass(s.toThemeProperty("jqx-tree-dropdown-root-rtl"))); for (var o = e(r).find("li"), a = 0; a < o.length; a++) { var n = o[a]; e(n).children().each(function () { if ("ul" == this.tagName || "UL" == this.tagName) return e(this).removeClass(s.toThemeProperty("jqx-tree-dropdown-" + t)), e(this).addClass(s.toThemeProperty("jqx-tree-dropdown")), s.rtl && (e(this).removeClass(s.toThemeProperty("jqx-tree-dropdown-rtl-" + t)), e(this).addClass(s.toThemeProperty("jqx-tree-dropdown-rtl"))), !1 }) } e.each(this.items, function () { var r = this, o = e(r.element); o.removeClass(s.toThemeProperty("jqx-tree-item-li-" + t)), o.addClass(s.toThemeProperty("jqx-tree-item-li")), this.rtl && (o.removeClass(s.toThemeProperty("jqx-tree-item-li-" + t)), o.addClass(s.toThemeProperty("jqx-tree-item-li"))), e(r.titleElement).removeClass(s.toThemeProperty("jqx-tree-item-" + t)), e(r.titleElement).addClass(s.toThemeProperty("jqx-tree-item")), e(r.titleElement).removeClass("jqx-item-" + t), e(r.titleElement).addClass(s.toThemeProperty("jqx-item")); var a = e(r.arrow); a.length > 0 && s._arrowStyle(a, "", r.isExpanded), r.checkBoxElement && e(r.checkBoxElement).jqxCheckBox({ theme: i }), s.enableRoundedCorners && (o.removeClass("jqx-rc-all-" + t), o.addClass(s.toThemeProperty("jqx-rc-all"))) }), this.host.jqxPanel && this.panel.jqxPanel({ theme: i }) }, _refreshMapping: function (t, i) { for (var s = this.host.find("li"), r = new Array, o = new Array, a = e.data(document.body, "treeItemsStorage"), n = this, l = 0; l < s.length; l++) { var h = s[l], d = e(h), c = a[h.id]; if (null != c) { o[o.length] = c, void 0 != t && 1 != t || this._updateItemEvents(this, c), c.level = d.parents("li").length, c.treeInstance = this; var u = null, p = null; -1 != c.titleElement[0].className.indexOf("jqx-fill-state-pressed") && (e(c.titleElement).removeClass(n.toThemeProperty("jqx-fill-state-pressed")), e(c.titleElement).removeClass(n.toThemeProperty("jqx-tree-item-selected"))), d.children().each(function () { if ("ul" == this.tagName || "UL" == this.tagName) return c.subtreeElement = this, e(this).addClass(n.toThemeProperty("jqx-tree-dropdown")), n.rtl && e(this).addClass(n.toThemeProperty("jqx-tree-dropdown-rtl")), !1 }), d.parents().each(function () { if ("li" == this.tagName || "LI" == this.tagName) return p = this.id, u = this, !1 }), c.parentElement = u, c.parentId = p, c.hasItems = e(c.element).find("li").length > 0, null != c && (r[l] = { element: h, item: c }, r["id" + h.id] = r[l]) } } this.itemMapping = r, this.items = o }, _createItem: function (t) { if (null != t && void 0 != t) { var i = t.id; i || (i = this.createID()); var s = t, r = e(t); s.id = i; var o = e.data(document.body, "treeItemsStorage"); void 0 == o && (o = new Array); var a = this.items.length; this.items[a] = new e.jqx._jqxTree.jqxTreeItem, this.treeElements[i] = this.items[a], o[s.id] = this.items[a], e.data(document.body, "treeItemsStorage", o), a = this.items.length; var n = 0, l = this, h = null; r.attr("role", "treeitem"), r.children().each(function () { if ("ul" == this.tagName || "UL" == this.tagName) return l.items[a - 1].subtreeElement = this, e(this).addClass(l.toThemeProperty("jqx-tree-dropdown")), l.rtl && (e(this).addClass(l.toThemeProperty("jqx-tree-dropdown-rtl")), e(this).css("clear", "both")), !1 }), r.parents().each(function () { if ("li" == this.tagName || "LI" == this.tagName) return n = this.id, h = this, !1 }); var d = t.getAttribute("item-expanded"); d = null != d && void 0 != d && ("true" == d || 1 == d), s.removeAttribute("item-expanded"); var c = t.getAttribute("item-locked"); c = null != c && void 0 != c && ("true" == c || 1 == c), s.removeAttribute("item-locked"); var u = t.getAttribute("item-selected"); u = null != u && void 0 != u && ("true" == u || 1 == u), s.removeAttribute("item-selected"); var p = t.getAttribute("item-disabled"); p = null != p && void 0 != p && ("true" == p || 1 == p), s.removeAttribute("item-disabled"); var m = t.getAttribute("item-checked"); m = null != m && void 0 != m && ("true" == m || 1 == m); var g = t.getAttribute("item-title"); (null == g || void 0 == g || "true" != g && 1 != g) && (g = !1), s.removeAttribute("item-title"); var f = t.getAttribute("item-icon"), v = t.getAttribute("item-iconsize"), x = t.getAttribute("item-label"), w = t.getAttribute("item-value"); s.removeAttribute("item-icon"), s.removeAttribute("item-iconsize"), s.removeAttribute("item-label"), s.removeAttribute("item-value"); var b = this.items[a - 1]; b.id = i, void 0 == b.value && (this._valueList && this._valueList[i] ? b.value = this._valueList[i] : b.value = w), b.icon = f, b.iconsize = v, b.parentId = n, b.disabled = p, b.parentElement = h, b.element = t, b.locked = c, b.selected = u, b.checked = m, b.isExpanded = d, b.treeInstance = this, this.itemMapping[a - 1] = { element: s, item: b }, this.itemMapping["id" + s.id] = this.itemMapping[a - 1]; if (!1, this.rtl && (e(b.element).css("float", "right"), e(b.element).css("clear", "both")), e(s.firstChild).length > 0) { if (b.icon) { (v = b.iconsize) || (v = 16); f = e('<img width="' + v + '" height="' + v + '" style="float: left;" class="itemicon" src="' + b.icon + '"/>'); e(s).prepend(f), f.css("margin-right", "4px"), this.rtl && (f.css("margin-right", "0px"), f.css("margin-left", "4px"), f.css("float", "right")) } var _ = s.innerHTML.indexOf("<ul"); if (-1 == _ && (_ = s.innerHTML.indexOf("<UL")), -1 == _) b.originalTitle = s.innerHTML, s.innerHTML = '<div style="display: inline-block;">' + s.innerHTML + "</div>", b.titleElement = e(e(s)[0].firstChild); else { var y = s.innerHTML.substring(0, _); y = e.trim(y), b.originalTitle = y, y = e('<div style="display: inline-block;">' + y + "</div>"); var j = e(s).find("ul:first"); j.remove(), s.innerHTML = "", e(s).prepend(y), e(s).append(j), b.titleElement = y, this.rtl && y.css("float", "right") } if (e.jqx.browser.msie && e.jqx.browser.version < 8) { e(e(s)[0].firstChild).css("display", "inline-block"); var q = !1; 0 == this._measureItem.parents().length && (e(document.body).append(this._measureItem), q = !0), this._measureItem.css("min-width", "20px"), this._measureItem[0].innerHTML = e(b.titleElement).text(); var T = this._measureItem.width(); b.icon && (T += 20), e(e(item.titleElement).find("img")).length > 0 && (T += 20), e(e(s)[0].firstChild).css("max-width", T + "px"), q && this._measureItem.remove() } } else b.originalTitle = "Item", e(s).append(e("<span>Item</span>")), e(s.firstChild).wrap("<span/>"), b.titleElement = e(s)[0].firstChild, e.jqx.browser.msie && e.jqx.browser.version < 8 && e(s.firstChild).css("display", "inline-block"); var C = e(b.titleElement), S = this.toThemeProperty("jqx-rc-all"); if (this.allowDrag && C.addClass("draggable"), null == x || void 0 == x ? (x = b.titleElement, b.label = e.trim(C.text())) : b.label = x, e(s).addClass(this.toThemeProperty("jqx-tree-item-li")), this.rtl && e(s).addClass(this.toThemeProperty("jqx-tree-item-li-rtl")), S += " " + this.toThemeProperty("jqx-tree-item") + " " + this.toThemeProperty("jqx-item"), this.rtl && (S += " " + this.toThemeProperty("jqx-tree-item-rtl")), C[0].className = C[0].className + " " + S, b.level = e(t).parents("li").length, b.hasItems = e(t).find("li").length > 0, this.rtl && b.parentElement && (this.checkboxes || C.css("margin-right", "5px")), this.checkboxes) { if (!this.host.jqxCheckBox) throw new Error("jqxTree: Missing reference to jqxcheckbox.js."); var k = e('<div style="position: absolute; width: 18px; height: 18px;" tabIndex=0 class="chkbox"/>'); if (k.width(parseInt(this.checkSize)), k.height(parseInt(this.checkSize)), e(s).prepend(k), this.rtl && (k.css("float", "right"), k.css("position", "static")), k.jqxCheckBox({ hasInput: !1, checked: b.checked, boxSize: this.checkSize, animationShowDelay: 0, animationHideDelay: 0, disabled: p, theme: this.theme }), this.rtl) { b.parentElement ? k.css("margin-right", "10px") : k.css("margin-right", "5px") } else C.css("margin-left", parseInt(this.checkSize) + 6); b.checkBoxElement = k[0], k[0].treeItem = b; var I = C.outerHeight() / 2 - 1 - parseInt(this.checkSize) / 2; k.css("margin-top", I), e.jqx.browser.msie && e.jqx.browser.version < 8 ? (C.css("width", "1%"), C.css("margin-left", parseInt(this.checkSize) + 25)) : b.hasItems && (this.rtl || k.css("margin-left", this.toggleIndicatorSize)) } else e.jqx.browser.msie && e.jqx.browser.version < 8 && C.css("width", "1%"); p && this.disableItem(b.element), u && this.selectItem(b.element), e.jqx.browser.msie && e.jqx.browser.version < 8 && (e(s).css("margin", "0px"), e(s).css("padding", "0px")) } }, destroy: function () { this.removeHandler(e(window), "resize.jqxtree" + this.element.id), this.host.removeClass(), this.isTouchDevice() && (this.removeHandler(this.panel, e.jqx.mobile.getTouchEventName("touchend") + ".touchScroll touchcancel.touchScroll"), this.removeHandler(this.panel, e.jqx.mobile.getTouchEventName("touchmove") + ".touchScroll"), this.removeHandler(this.panel, e.jqx.mobile.getTouchEventName("touchstart") + ".touchScroll")); var t = this, i = this.isTouchDevice(); e.each(this.items, function () { var s = this, r = e(this.element), o = i ? e.jqx.mobile.getTouchEventName("touchend") : "click"; t.removeHandler(e(s.checkBoxElement), o); var a = e(s.titleElement); t.removeHandler(r), t.allowDrag && t._enableDragDrop ? (t.removeHandler(a, "mousedown.item"), t.removeHandler(a, "click"), t.removeHandler(a, "dblclick"), t.removeHandler(a, "mouseenter"), t.removeHandler(a, "mouseleave")) : t.removeHandler(a), $arrowSpan = e(s.arrow), $arrowSpan.length > 0 && (t.removeHandler($arrowSpan, o), t.removeHandler($arrowSpan, "selectstart"), t.removeHandler($arrowSpan, "mouseup"), i || (t.removeHandler($arrowSpan, "mouseenter"), t.removeHandler($arrowSpan, "mouseleave")), t.removeHandler(a, "selectstart")), e.jqx.browser.opera && t.removeHandler(a, "mousedown.item"), "click" != t.toggleMode && t.removeHandler(a, "click"), t.removeHandler(a, t.toggleMode) }), this.panel && (this.panel.jqxPanel("destroy"), this.panel = null), this.host.remove() }, _raiseEvent: function (e, t) { void 0 == t && (t = { owner: null }); var i = this.events[e]; args = t, args.owner = this; var s = new jQuery.Event(i); return s.owner = this, s.args = args, this.host.trigger(s) }, propertyChangedHandler: function (t, i, s, r) { if (void 0 != this.isInitialized && 0 != this.isInitialized) { if ("submitCheckedItems" == i && t._updateInputSelection(), "disabled" == i && t._updateDisabledState(), "theme" == i && t._applyTheme(s, r), "keyboardNavigation" == i && (t.enableKeyboardNavigation = r), ("width" == i || "height" == i) && (t.refresh(), t._initialize(), t._calculateWidth(), t.host.jqxPanel)) { var o = "fixed"; null != this.height && "auto" != this.height || (o = "verticalwrap"), null != this.width && "auto" != this.width || (o = "fixed" == o ? "horizontalwrap" : "wrap"), t.panel.jqxPanel({ sizeMode: o }) } if ("touchMode" == i && (t._isTouchDevice = null, r && (t.enableHover = !1), t._render()), ("source" == i || "checkboxes" == i) && null != this.source) { var a = []; e.each(t.items, function () { this.isExpanded && (a[a.length] = { label: this.label, level: this.level }) }); var n = t.loadItems(t.source); t.host.jqxPanel ? t.panel.jqxPanel("setcontent", n) : t.element.innerHTML = n; var l = t.disabled, h = t.host.find("ul:first"); h.length > 0 && (t.createTree(h[0]), t._render()); var d = t, c = d.animationShowDuration; d.animationShowDuration = 0, t.disabled = !1, a.length > 0 && e.each(t.items, function () { for (var e = 0; e < a.length; e++) if (a[e].label == this.label && a[e].level == this.level) { var t = d.getItem(this.element); d._expandItem(d, t) } }), t.disabled = l, d.animationShowDuration = c } "hasThreeStates" == i && (t._render(), t._updateCheckStates()), "toggleIndicatorSize" == i && (t._updateCheckLayout(), t._render()) } } }) }(jQuery), jQuery.jqx._jqxTree.jqxTreeItem = function (e, t, i) { return { label: null, id: e, parentId: t, parentElement: null, parentItem: null, disabled: !1, selected: !1, locked: !1, checked: !1, level: 0, isExpanded: !1, hasItems: !1, element: null, subtreeElement: null, checkBoxElement: null, titleElement: null, arrow: null, prevItem: null, nextItem: null } }, function (e) { e.jqx.jqxWidget("jqxDragDrop", "", {}), e.extend(e.jqx._jqxDragDrop.prototype, { defineInstance: function () { this.restricter = "document", this.handle = !1, this.feedback = "clone", this.opacity = .6, this.revert = !1, this.revertDuration = 400, this.distance = 5, this.disabled = !1, this.tolerance = "intersect", this.data = null, this.dropAction = "default", this.dragZIndex = 999999, this.appendTo = "parent", this.cursor = "move", this.onDragEnd = null, this.onDrag = null, this.onDragStart = null, this.onTargetDrop = null, this.onDropTargetEnter = null, this.onDropTargetLeave = null, this.initFeedback = null, this.dropTarget = null, this.isDestroyed = !1, this.triggerEvents = !0, this._touchEvents = { mousedown: e.jqx.mobile.getTouchEventName("touchstart"), click: e.jqx.mobile.getTouchEventName("touchstart"), mouseup: e.jqx.mobile.getTouchEventName("touchend"), mousemove: e.jqx.mobile.getTouchEventName("touchmove"), mouseenter: "mouseenter", mouseleave: "mouseleave" }, this._restricter = null, this._zIndexBackup = 0, this._targetEnterFired = !1, this._oldOpacity = 1, this._feedbackType, this._isTouchDevice = !1, this._events = ["dragStart", "dragEnd", "dragging", "dropTargetEnter", "dropTargetLeave"] }, createInstance: function () { this._createDragDrop() }, _createDragDrop: function () { var t = e.data(document.body, "jqx-draggables") || 1; if (this.appendTo = this._getParent(), this._isTouchDevice = e.jqx.mobile.isTouchDevice(), /(static|relative)/.test(this.host.css("position")) && (!this.feedback || "original" === this.feedback)) { var i = this._getRelativeOffset(this.host), s = this.appendTo.offset(); "static" != this.appendTo.css("position") && (s = { left: 0, top: 0 }), this.element.style.position = "absolute", this.element.style.left = s.left + i.left + "px", this.element.style.top = s.top + i.top + "px" } this._validateProperties(), this._idHandler(t), this.disabled && this.disable(), "string" == typeof this.dropTarget && (this.dropTarget = e(this.dropTarget)), this._refresh(), t += 1, e.data(document.body, "jqx-draggables", t), this.host.addClass("jqx-draggable"), this.disabled || this.host.css("cursor", this.cursor) }, _getParent: function () { var t = this.appendTo; if ("string" == typeof this.appendTo) switch (this.appendTo) { case "parent": t = this.host.parent(); break; case "document": t = e(document); break; case "body": t = e(document.body); break; default: t = e(this.appendTo) } return t }, _idHandler: function (e) { if (!this.element.id) { var t = "jqx-draggable-" + e; this.element.id = t } }, _refresh: function () { this._removeEventHandlers(), this._addEventHandlers() }, _getEvent: function (e) { return this._isTouchDevice ? this._touchEvents[e] : e }, _validateProperties: function () { "clone" === this.feedback ? this._feedbackType = "clone" : this._feedbackType = "original", "default" !== this.dropAction && (this.dropAction = "nothing") }, _removeEventHandlers: function () { this.removeHandler(this.host, "dragstart"), this.removeHandler(this.host, this._getEvent("mousedown") + ".draggable." + this.element.id, this._mouseDown), this.removeHandler(e(document), this._getEvent("mousemove") + ".draggable." + this.element.id, this._mouseMove), this.removeHandler(e(document), this._getEvent("mouseup") + ".draggable." + this.element.id, this._mouseUp) }, _addEventHandlers: function () { var t = this; this.addHandler(this.host, "dragstart", function (i) { return !!t.disabled || (e.jqx.mobile.isTouchDevice() ? void 0 : (i.preventDefault(), !1)) }), this.addHandler(this.host, this._getEvent("mousedown") + ".draggable." + this.element.id, this._mouseDown, { self: this }), this.addHandler(e(document), this._getEvent("mousemove") + ".draggable." + this.element.id, this._mouseMove, { self: this }), this.addHandler(e(document), this._getEvent("mouseup") + ".draggable." + this.element.id, this._mouseUp, { self: this }); try { if (("" != document.referrer || window.frameElement) && null != window.top && window.top != window.self) { var i = ""; if (window.parent && document.referrer && (i = document.referrer), -1 != i.indexOf(document.location.host)) { var s = function (e) { t._mouseUp(t) }; window.top.document.addEventListener ? window.top.document.addEventListener("mouseup", s, !1) : window.top.document.attachEvent && window.top.document.attachEvent("onmouseup", s) } } } catch (e) { } }, _mouseDown: function (e) { var t = e.data.self, i = t._getMouseCoordinates(e), s = t._mouseCapture(e); if (t._originalPageX = i.left, t._originalPageY = i.top, t.disabled) return !0; return t._mouseStarted || (t._mouseUp(e), !0), s && (t._mouseDownEvent = e), !!t._isTouchDevice || (1 !== e.which || !s || void e.preventDefault()) }, _mouseMove: function (e) { var t = e.data.self; return !!t.disabled || (t._mouseStarted ? (t._mouseDrag(e), e.preventDefault && e.preventDefault(), !1) : (t._mouseDownEvent && t._isMovedDistance(e) && (t._mouseStart(t._mouseDownEvent, e) ? t._mouseStarted = !0 : t._mouseStarted = !1, t._mouseStarted ? t._mouseDrag(e) : t._mouseUp(e)), !t._mouseStarted)) }, _mouseUp: function (e) { var t; return !!(t = e.data && e.data.self ? e.data.self : this).disabled || (t._mouseDownEvent = !1, t._movedDistance = !1, t._mouseStarted && (t._mouseStarted = !1, t._mouseStop(e)), t.feedback && t.feedback[0] && "original" !== t._feedbackType && "function" == typeof t.feedback.remove && !t.revert && t.feedback.remove(), !!t._isTouchDevice && void 0) }, cancelDrag: function () { var e = this.revertDuration; this.revertDuration = 0, this._mouseDownEvent = !1, this._movedDistance = !1, this._mouseStarted = !1, this._mouseStop(), this.feedback.remove(), this.revertDuration = e }, _isMovedDistance: function (e) { var t = this._getMouseCoordinates(e); return !!this._movedDistance || (t.left >= this._originalPageX + this.distance || t.left <= this._originalPageX - this.distance || t.top >= this._originalPageY + this.distance || t.top <= this._originalPageY - this.distance) && (this._movedDistance = !0, !0) }, _getMouseCoordinates: function (t) { if (this._isTouchDevice) { var i = e.jqx.position(t); return { left: i.left, top: i.top } } return { left: t.pageX, top: t.pageY } }, destroy: function () { return this._enableSelection(this.host), this.host.removeData("draggable").off(".draggable").removeClass("jqx-draggable jqx-draggable-dragging jqx-draggable-disabled"), this._removeEventHandlers(), this.isDestroyed = !0, this }, _disableSelection: function (t) { t.each(function () { e(this).attr("unselectable", "on").css({ "-ms-user-select": "none", "-moz-user-select": "none", "-webkit-user-select": "none", "user-select": "none" }).each(function () { this.onselectstart = function () { return !1 } }) }) }, _enableSelection: function (t) { t.each(function () { e(this).attr("unselectable", "off").css({ "-ms-user-select": "text", "-moz-user-select": "text", "-webkit-user-select": "text", "user-select": "text" }).each(function () { this.onselectstart = null }) }) }, _mouseCapture: function (e) { return !this.disabled && (!!this._getHandle(e) && (this._disableSelection(this.host), !0)) }, _getScrollParent: function (t) { var i; return i = e.jqx.browser.msie && /(static|relative)/.test(t.css("position")) || /absolute/.test(t.css("position")) ? t.parents().filter(function () { return /(relative|absolute|fixed)/.test(e.css(this, "position", 1)) && /(auto|scroll)/.test(e.css(this, "overflow", 1) + e.css(this, "overflow-y", 1) + e.css(this, "overflow-x", 1)) }).eq(0) : t.parents().filter(function () { return /(auto|scroll)/.test(e.css(this, "overflow", 1) + e.css(this, "overflow-y", 1) + e.css(this, "overflow-x", 1)) }).eq(0), /fixed/.test(t.css("position")) || !i.length ? e(document) : i }, _mouseStart: function (t) { var i = this._getMouseCoordinates(t); this._getParentOffset(this.host); this.feedback = this._createFeedback(t), this._zIndexBackup = this.feedback.css("z-index"), this.feedback[0].style.zIndex = this.dragZIndex, this._backupFeedbackProportions(), this._backupeMargins(), this._positionType = this.feedback.css("position"), this._scrollParent = this._getScrollParent(this.feedback), this._offset = this.positionAbs = this.host.offset(), this._offset = { top: this._offset.top - this.margins.top, left: this._offset.left - this.margins.left }, e.extend(this._offset, { click: { left: i.left - this._offset.left, top: i.top - this._offset.top }, parent: this._getParentOffset(), relative: this._getRelativeOffset(), hostRelative: this._getRelativeOffset(this.host) }), this.position = this._generatePosition(t), this.originalPosition = this._fixPosition(), this.restricter && this._setRestricter(), this.feedback.addClass(this.toThemeProperty("jqx-draggable-dragging")); this._raiseEvent(0, t); return this.onDragStart && "function" == typeof this.onDragStart && this.onDragStart(this.position), this._mouseDrag(t, !0), !0 }, _fixPosition: function () { var e = this._getRelativeOffset(this.host); this.position; return { left: this.position.left + e.left, top: this.position.top + e.top } }, _mouseDrag: function (e, t) { return this.position = this._generatePosition(e), this.positionAbs = this._convertPositionTo("absolute"), this.feedback[0].style.left = this.position.left + "px", this.feedback[0].style.top = this.position.top + "px", this._raiseEvent(2, e), this.onDrag && "function" == typeof this.onDrag && this.onDrag(this.data, this.position), this._handleTarget(), !1 }, _over: function (t, i, s) { if (this.dropTarget) { var r = !1, o = this; e.each(this.dropTarget, function (e, a) { if ((r = o._overItem(a, t, i, s)).over) return !1 }) } return r }, _overItem: function (t, i, s, r) { var o = (t = e(t)).offset(), a = t.outerHeight(), n = t.outerWidth(); if (t && t[0] !== this.element) { var l = !1; switch (this.tolerance) { case "intersect": i.left + s > o.left && i.left < o.left + n && i.top + r > o.top && i.top < o.top + a && (l = !0); break; case "fit": s + i.left <= o.left + n && i.left >= o.left && r + i.top <= o.top + a && i.top >= o.top && (l = !0) } return { over: l, target: t } } }, _handleTarget: function () { if (this.dropTarget) { var e = this.feedback.offset(), t = this.feedback.outerWidth(), i = this.feedback.outerHeight(), s = this._over(e, t, i); s.over ? (this._targetEnterFired && s.target.length > 0 && this._oldtarget && this._oldtarget.length > 0 && s.target[0] != this._oldtarget[0] && (this._raiseEvent(4, { target: this._oldtarget }), this.onDropTargetLeave && "function" == typeof this.onDropTargetLeave && this.onDropTargetLeave(this._oldtarget)), (!this._targetEnterFired || s.target.length > 0 && this._oldtarget && this._oldtarget.length > 0 && s.target[0] != this._oldtarget[0]) && (this._targetEnterFired = !0, this._raiseEvent(3, { target: s.target }), this.onDropTargetEnter && "function" == typeof this.onDropTargetEnter && this.onDropTargetEnter(s.target)), this._oldtarget = s.target) : this._targetEnterFired && (this._targetEnterFired = !1, this._raiseEvent(4, { target: this._oldtarget || s.target }), this.onDropTargetLeave && "function" == typeof this.onDropTargetLeave && this.onDropTargetLeave(this._oldtarget || s.target)) } }, _mouseStop: function (e) { var t = this._fixPosition(), i = { width: this.host.outerWidth(), height: this.host.outerHeight() }; return this.feedback[0].style.opacity = this._oldOpacity, this.revert || (this.feedback[0].style.zIndex = this._zIndexBackup), this._enableSelection(this.host), this.dropped && (this.dropped, this.dropped = !1), !!(this.element && this.element.parentNode || "original" !== this.feedback) && (this._dropElement(t), this.feedback.removeClass(this.toThemeProperty("jqx-draggable-dragging")), this._raiseEvent(1, e), this.onDragEnd && "function" == typeof this.onDragEnd && this.onDragEnd(this.data), this.onTargetDrop && "function" == typeof this.onTargetDrop && this._over(t, i.width, i.height).over && this.onTargetDrop(this._over(t, i.width, i.height).target), this._revertHandler(), !1) }, _dropElement: function (e) { if ("default" === this.dropAction && this.feedback && this.feedback[0] !== this.element && "original" !== this.feedback && !this.revert && !/(fixed|absolute)/.test(this.host.css("position"))) { this.host.css("position", "relative"); var t = this._getRelativeOffset(this.host); (e = this.position).left -= t.left, e.top -= t.top, this.element.style.left = e.left + "px", this.element.style.top = e.top + "px" } }, _revertHandler: function () { if (this.revert || e.isFunction(this.revert) && this.revert()) { var t = this; "original" != this._feedbackType ? null != this.feedback && ("none" != this.dropAction ? e(this.feedback).animate({ left: t.originalPosition.left - t._offset.hostRelative.left, top: t.originalPosition.top - t._offset.hostRelative.top }, parseInt(this.revertDuration, 10), function () { t.feedback && t.feedback[0] && "original" !== t._feedbackType && "function" == typeof t.feedback.remove && t.feedback.remove() }) : t.feedback && t.feedback[0] && "original" !== t._feedbackType && "function" == typeof t.feedback.remove && t.feedback.remove()) : (this.element.style.zIndex = this.dragZIndex, e(this.host).animate({ left: t.originalPosition.left - t._offset.hostRelative.left, top: t.originalPosition.top - t._offset.hostRelative.top }, parseInt(this.revertDuration, 10), function () { t.element.style.zIndex = t._zIndexBackup })) } }, _getHandle: function (t) { var i; return this.handle ? e(this.handle, this.host).find("*").andSelf().each(function () { this == t.target && (i = !0) }) : i = !0, i }, _createFeedback: function (e) { var t; if (t = "function" == typeof this._feedbackType ? this._feedbackType() : "clone" === this._feedbackType ? this.host.clone().removeAttr("id") : this.host, /(absolute|fixed)/.test(t.css("position")) || t.css("position", "absolute"), this.appendTo[0] !== this.host.parent()[0] || t[0] !== this.element) { t.css({ left: this.host.offset().left - this._getParentOffset(this.host).left + this._getParentOffset(t).left, top: this.host.offset().top - this._getParentOffset(this.host).top + this._getParentOffset(t).top }), t.appendTo(this.appendTo) } return "function" == typeof this.initFeedback && this.initFeedback(t), t }, _getParentOffset: function (t) { var t = t || this.feedback; this._offsetParent = t.offsetParent(); var i = this._offsetParent.offset(); return "absolute" == this._positionType && this._scrollParent[0] !== document && e.contains(this._scrollParent[0], this._offsetParent[0]) && (i.left += this._scrollParent.scrollLeft(), i.top += this._scrollParent.scrollTop()), (this._offsetParent[0] == document.body || this._offsetParent[0].tagName && "html" == this._offsetParent[0].tagName.toLowerCase() && e.jqx.browser.msie) && (i = { top: 0, left: 0 }), { top: i.top + (parseInt(this._offsetParent.css("border-top-width"), 10) || 0), left: i.left + (parseInt(this._offsetParent.css("border-left-width"), 10) || 0) } }, _getRelativeOffset: function (e) { this._scrollParent || e.parent(); if ("relative" === (e = e || this.feedback).css("position")) { var t = this.host.position(); return { top: t.top - (parseInt(e.css("top"), 10) || 0), left: t.left - (parseInt(e.css("left"), 10) || 0) } } return { top: 0, left: 0 } }, _backupeMargins: function () { this.margins = { left: parseInt(this.host.css("margin-left"), 10) || 0, top: parseInt(this.host.css("margin-top"), 10) || 0, right: parseInt(this.host.css("margin-right"), 10) || 0, bottom: parseInt(this.host.css("margin-bottom"), 10) || 0 } }, _backupFeedbackProportions: function () { this.feedback[0].style.opacity = this.opacity, this._feedbackProportions = { width: this.feedback.outerWidth(), height: this.feedback.outerHeight() } }, _setRestricter: function () { "parent" == this.restricter && (this.restricter = this.feedback[0].parentNode), "document" != this.restricter && "window" != this.restricter || this._handleNativeRestricter(), void 0 !== this.restricter.left && void 0 !== this.restricter.top && void 0 !== this.restricter.height && void 0 !== this.restricter.width ? this._restricter = [this.restricter.left, this.restricter.top, this.restricter.width, this.restricter.height] : /^(document|window|parent)$/.test(this.restricter) || this.restricter.constructor == Array ? this.restricter.constructor == Array && (this._restricter = this.restricter) : this._handleDOMParentRestricter() }, _handleNativeRestricter: function () { this._restricter = ["document" === this.restricter ? 0 : e(window).scrollLeft() - this._offset.relative.left - this._offset.parent.left, "document" === this.restricter ? 0 : e(window).scrollTop() - this._offset.relative.top - this._offset.parent.top, ("document" === this.restricter ? 0 : e(window).scrollLeft()) + e("document" === this.restricter ? document : window).width() - this._feedbackProportions.width - this.margins.left, ("document" === this.restricter ? 0 : e(window).scrollTop()) + (e("document" === this.restricter ? document : window).height() || document.body.parentNode.scrollHeight) - this._feedbackProportions.height - this.margins.top] }, _handleDOMParentRestricter: function () { var t = e(this.restricter), i = t[0]; if (i) { var s = "hidden" !== e(i).css("overflow"); this._restricter = [(parseInt(e(i).css("borderLeftWidth"), 10) || 0) + (parseInt(e(i).css("paddingLeft"), 10) || 0), (parseInt(e(i).css("borderTopWidth"), 10) || 0) + (parseInt(e(i).css("paddingTop"), 10) || 0), (s ? Math.max(i.scrollWidth, i.offsetWidth) : i.offsetWidth) - (parseInt(e(i).css("borderLeftWidth"), 10) || 0) - (parseInt(e(i).css("paddingRight"), 10) || 0) - this._feedbackProportions.width - this.margins.left - this.margins.right, (s ? Math.max(i.scrollHeight, i.offsetHeight) : i.offsetHeight) - (parseInt(e(i).css("borderTopWidth"), 10) || 0) - (parseInt(e(i).css("paddingBottom"), 10) || 0) - this._feedbackProportions.height - this.margins.top - this.margins.bottom], this._restrictiveContainer = t } }, _convertPositionTo: function (t, i) { i || (i = this.position); var s, r, o; return s = "absolute" === t ? 1 : -1, r = "absolute" !== this._positionType || this._scrollParent[0] != document && e.contains(this._scrollParent[0], this._offsetParent[0]) ? this._scrollParent : this._offsetParent, o = /(html|body)/i.test(r[0].tagName), this._getPosition(i, s, o, r) }, _getPosition: function (t, i, s, r) { return { top: t.top + this._offset.relative.top * i + this._offset.parent.top * i - (e.jqx.browser.safari && e.jqx.browser.version < 526 && "fixed" == this._positionType ? 0 : ("fixed" == this._positionType ? -this._scrollParent.scrollTop() : s ? 0 : r.scrollTop()) * i), left: t.left + this._offset.relative.left * i + this._offset.parent.left * i - (e.jqx.browser.safari && e.jqx.browser.version < 526 && "fixed" == this._positionType ? 0 : ("fixed" == this._positionType ? -this._scrollParent.scrollLeft() : s ? 0 : r.scrollLeft()) * i) } }, _generatePosition: function (t) { var i = "absolute" != this._positionType || this._scrollParent[0] != document && e.contains(this._scrollParent[0], this._offsetParent[0]) ? this._scrollParent : this._offsetParent, s = /(html|body)/i.test(i[0].tagName), r = this._getMouseCoordinates(t), o = r.left, a = r.top; if (this.originalPosition) { var n; if (this.restricter) { if (this._restrictiveContainer) { var l = this._restrictiveContainer.offset(); n = [this._restricter[0] + l.left, this._restricter[1] + l.top, this._restricter[2] + l.left, this._restricter[3] + l.top] } else n = this._restricter; r.left - this._offset.click.left < n[0] && (o = n[0] + this._offset.click.left), r.top - this._offset.click.top < n[1] && (a = n[1] + this._offset.click.top), r.left - this._offset.click.left > n[2] && (o = n[2] + this._offset.click.left), r.top - this._offset.click.top > n[3] && (a = n[3] + this._offset.click.top) } } return { top: a - this._offset.click.top - this._offset.relative.top - this._offset.parent.top + (e.jqx.browser.safari && e.jqx.browser.version < 526 && "fixed" == this._positionType ? 0 : "fixed" == this._positionType ? -this._scrollParent.scrollTop() : s ? 0 : i.scrollTop()), left: o - this._offset.click.left - this._offset.relative.left - this._offset.parent.left + (e.jqx.browser.safari && e.jqx.browser.version < 526 && "fixed" == this._positionType ? 0 : "fixed" == this._positionType ? -this._scrollParent.scrollLeft() : s ? 0 : i.scrollLeft()) } }, _raiseEvent: function (t, i) { if (void 0 == this.triggerEvents || 0 != this.triggerEvents) { var s = this._events[t], r = e.Event(s); return (i = i || {}).position = this.position, i.element = this.element, e.extend(i, this.data), i.feedback = this.feedback, r.args = i, this.host.trigger(r) } }, disable: function () { this.disabled = !0, this.host.addClass(this.toThemeProperty("jqx-draggable-disabled")), this._enableSelection(this.host) }, enable: function () { this.disabled = !1, this.host.removeClass(this.toThemeProperty("jqx-draggable-disabled")) }, propertyChangedHandler: function (t, i, s, r) { "dropTarget" === i ? "string" == typeof r && (t.dropTarget = e(r)) : "disabled" == i ? r && t._enableSelection(t.host) : "cursor" == i && t.host.css("cursor", t.cursor) } }) }(jQuery), function (e) { jqxListBoxDragDrop = function () { e.extend(e.jqx._jqxListBox.prototype, { _hitTestBounds: function (e, t, i) { var s = e.host.offset(), r = i - parseInt(s.top), o = t - parseInt(s.left), a = e._hitTest(o, r); if (r < 0) return null; if (null != a) { var n = parseInt(s.left), l = n + e.host.width(); return n <= t + a.width / 2 && t <= l ? a : null } if (e.items && e.items.length > 0) { var h = e.items[e.items.length - 1]; if (h.top + h.height + 15 >= r) return h } return null }, _handleDragStart: function (t, i) { e.jqx.mobile.isTouchDevice() && i.allowDrag && t.on(e.jqx.mobile.getTouchEventName("touchstart"), function () { e.jqx.mobile.setTouchScroll(!1, i.element.id) }), t.off("dragStart"), t.on("dragStart", function (t) { if (i.allowDrag && !i.disabled) { i.feedbackElement = e("<div style='z-index: 99999; position: absolute;'></div>"), i.feedbackElement.addClass(i.toThemeProperty("jqx-listbox-feedback")), i.feedbackElement.appendTo(e(document.body)), i.feedbackElement.hide(), i.isDragging = !0, i._dragCancel = !1; var s = i._getMouseCoordinates(t), r = i._hitTestBounds(i, s.left, s.top), o = e.find(".jqx-listbox"); i._listBoxes = o, e.each(i._listBoxes, function () { var t = e.data(this, "jqxListBox").instance; t._enableHover = t.enableHover, t.enableHover = !1, e.jqx.mobile.setTouchScroll(!1, i.element.id) }); var a = function () { i._dragCancel = !0, e(t.args.element).jqxDragDrop({ triggerEvents: !1 }), e(t.args.element).jqxDragDrop("cancelDrag"), clearInterval(i._autoScrollTimer), e(t.args.element).jqxDragDrop({ triggerEvents: !0 }), e.each(i._listBoxes, function () { var t = e.data(this, "jqxListBox").instance; void 0 != t._enableHover && (t.enableHover = t._enableHover, e.jqx.mobile.setTouchScroll(!0, i.element.id)) }) }; if (null == r || r.isGroup) null == r && a(); else { if (i._dragItem = r, i.dragStart && 0 == i.dragStart(r)) return a(), !1; r.disabled && a(), i._raiseEvent(4, { label: r.label, value: r.value, originalEvent: t.args }) } } return !1 }) }, _handleDragging: function (t, i) { t.off("dragging"), t.on("dragging", function (t) { var s = t.args; if (!i._dragCancel) { var r = i._getMouseCoordinates(t), o = r; i._lastDraggingPosition = r, i._dragOverItem = null, i.feedbackElement.hide(), e.each(i._listBoxes, function () { if (e.jqx.isHidden(e(this))) return !0; var t = e(this).offset(), a = t.top + 20, n = e(this).height() + a - 40, l = t.left, h = l + e(this).width(), d = e.data(this, "jqxListBox").instance, c = d._hitTestBounds(d, r.left, r.top), u = d.vScrollInstance; if (null != c && d.allowDrop && !d.disabled && (i._dragOverItem = c, c.element)) { i.feedbackElement.show(); var p = e(c.element).offset().top + 1; o.top > p + c.height / 2 && (p += c.height), i.feedbackElement.css("top", p), i.feedbackElement.css("left", l), "visible" != d.vScrollBar.css("visibility") ? i.feedbackElement.width(e(this).width()) : i.feedbackElement.width(e(this).width() - 20) } r.left >= l && r.left < h ? s.position.top < a && s.position.top >= a - 30 ? (clearInterval(d._autoScrollTimer), 0 != u.value && i.feedbackElement.hide(), d._autoScrollTimer = setInterval(function () { d.scrollUp() || clearInterval(d._autoScrollTimer) }, 100)) : s.position.top > n && s.position.top < n + 30 ? (clearInterval(d._autoScrollTimer), "hidden" != d.vScrollBar.css("visibility") && u.value != u.max && i.feedbackElement.hide(), d._autoScrollTimer = setInterval(function () { d.scrollDown() || clearInterval(d._autoScrollTimer) }, 100)) : clearInterval(d._autoScrollTimer) : (null == i._dragOverItem && i.feedbackElement.hide(), clearInterval(d._autoScrollTimer)) }) } }) }, _handleDragEnd: function (t, i) { e.find(".jqx-listbox"); t.off("dragEnd"), t.on("dragEnd", function (t) { clearInterval(i._autoScrollTimer); var s = e.jqx.mobile.isTouchDevice() ? i._lastDraggingPosition : i._getMouseCoordinates(t), r = e.find(".jqx-listbox"), o = null; if (i.feedbackElement.remove(), !i._dragCancel) { e.each(r, function () { if (e.jqx.isHidden(e(this))) return !0; var t = parseInt(e(this).offset().left), r = t + e(this).width(), a = e.data(this, "jqxListBox").instance; if (clearInterval(a._autoScrollTimer), void 0 != a._enableHover && (a.enableHover = a._enableHover, e.jqx.mobile.setTouchScroll(!0, i.element.id)), null != i._dragItem && s.left + i._dragItem.width / 2 >= t && s.left < r) { var n = parseInt(e(this).offset().top), l = n + e(this).height(); s.top >= n && s.top <= l && (o = e(this)) } }); var a = i._dragItem; if (null != o && o.length > 0) { var n = e.data(o[0], "jqxListBox").instance; if (n.allowDrop && !n.disabled) { var l = (n = e.data(o[0], "jqxListBox").instance)._hitTestBounds(n, s.left, s.top); if (null == (l = i._dragOverItem) || l.isGroup) { if ("none" != n.dropAction) { if (n.content.find(".draggable").length > 0 && n.content.find(".draggable").jqxDragDrop("destroy"), i.dragEnd) { if (0 == (h = i.dragEnd(i._dragItem, null, t.args))) return e(t.args.element).jqxDragDrop({ triggerEvents: !1 }), e(t.args.element).jqxDragDrop("cancelDrag"), clearInterval(i._autoScrollTimer), e(t.args.element).jqxDragDrop({ triggerEvents: !0 }), t.preventDefault && t.preventDefault(), t.stopPropagation && t.stopPropagation(), !1; void 0 == h && (h = !0) } n.addItem(i._dragItem), "default" == n.dropAction && (a.index > 0 && i.selectIndex(a.index - 1), i.removeItem(a, !0)), n.clearSelection(), n.selectIndex(n.items.length - 1) } } else { var h = !0; if (i.dragEnd) { if (0 == (h = i.dragEnd(a, l, t.args))) return e(t.args.element).jqxDragDrop({ triggerEvents: !1 }), e(t.args.element).jqxDragDrop("cancelDrag"), clearInterval(i._autoScrollTimer), e(t.args.element).jqxDragDrop({ triggerEvents: !0 }), t.preventDefault && t.preventDefault(), t.stopPropagation && t.stopPropagation(), !1; void 0 == h && (h = !0) } if (h) { l.index; if ("none" != n.dropAction) { var d = e(l.element).offset().top + 1; n.content.find(".draggable").length > 0 && n.content.find(".draggable").jqxDragDrop("destroy"), s.top > d + l.height / 2 ? n.insertAt(i._dragItem, l.index + 1) : n.insertAt(i._dragItem, l.index), "default" == i.dropAction && (a.index > 0 && i.selectIndex(a.index - 1), i.removeItem(a, !0)); var c = function () { for (var e = l.index, t = e - 2; t <= e + 2; t++) if (n.items && n.items.length > t) { var i = n.items[t]; if (null != i && i.value == a.value) return t } return e }(); n.clearSelection(), n.selectIndex(c) } } } } } else if (i.dragEnd && 0 == i.dragEnd(a, t.args)) return t.preventDefault && t.preventDefault(), t.stopPropagation && t.stopPropagation(), !1; return null != a && i._raiseEvent(5, { label: a.label, value: a.value, originalEvent: t.args }), !1 } t.stopPropagation() }) }, _enableDragDrop: function () { if (this.allowDrag && this.host.jqxDragDrop) { var t = this.content.find(".draggable"); if (t.length > 0) { var i = this; t.jqxDragDrop({ cursor: "arrow", revertDuration: 0, appendTo: "body", dragZIndex: 99999, revert: !0, initFeedback: function (t) { var s = e('<span style="white-space: nowrap;" class="' + i.toThemeProperty("jqx-fill-state-normal") + '">' + t.text() + "</span>"); e(document.body).append(s); var r = s.width(); s.remove(), t.width(r + 5), t.addClass(i.toThemeProperty("jqx-fill-state-pressed")) } }), this._autoScrollTimer = null, i._dragItem = null, i._handleDragStart(t, i), i._handleDragging(t, i), i._handleDragEnd(t, i) } } }, _getMouseCoordinates: function (t) { if (this._isTouchDevice = e.jqx.mobile.isTouchDevice(), this._isTouchDevice) { var i = e.jqx.position(t.args); return { left: i.left, top: i.top } } return { left: t.args.pageX, top: t.args.pageY } } }) }, jqxTreeDragDrop = function () { e.extend(e.jqx._jqxTree.prototype, { _hitTestBounds: function (t, i, s) { var r = null; if (t._visibleItems) { var o = parseInt(t.host.offset().left), a = t.host.outerWidth(); e.each(t._visibleItems, function (n) { if (i >= o && i < o + a && this.top + 5 < s && s < this.top + this.height) { var l = e(this.element).parents("li:first"); if (l.length > 0 && null != (r = t.getItem(l[0]))) return r.height = this.height, r.top = this.top, !1 } }) } return r }, _handleDragStart: function (t, i) { i._dragOverItem && i._dragOverItem.titleElement.removeClass(i.toThemeProperty("jqx-fill-state-hover")), e.jqx.mobile.isTouchDevice() && i.allowDrag && t.on(e.jqx.mobile.getTouchEventName("touchstart"), function () { e.jqx.mobile.setTouchScroll(!1, "panel" + i.element.id) }), t.off("dragStart"), t.on("dragStart", function (t) { i.feedbackElement = e("<div style='z-index: 99999; position: absolute;'></div>"), i.feedbackElement.addClass(i.toThemeProperty("jqx-listbox-feedback")), i.feedbackElement.appendTo(e(document.body)), i.feedbackElement.hide(), i._dragCancel = !1; t.args.position; var s = e.find(".jqx-tree"); return i._trees = s, e.each(s, function () { var s = e.data(this, "jqxTree").instance, r = s.host.find(".draggable"); if (s._syncItems(r), s.allowDrag && !s.disabled) { var o = e(t.target).parents("li:first"); if (o.length > 0) { var a = s.getItem(o[0]); if (a) { if (i._dragItem = a, s.dragStart && 0 == s.dragStart(a)) return i._dragCancel = !0, e(t.args.element).jqxDragDrop({ triggerEvents: !1 }), e(t.args.element).jqxDragDrop("cancelDrag"), clearInterval(i._autoScrollTimer), e(t.args.element).jqxDragDrop({ triggerEvents: s }), !1; s._raiseEvent(8, { label: a.label, value: a.value, originalEvent: t.args }) } } } }), !1 }) }, _getMouseCoordinates: function (t) { if (this._isTouchDevice = e.jqx.mobile.isTouchDevice(), this._isTouchDevice) { var i = e.jqx.position(t.args); return { left: i.left, top: i.top } } return { left: t.args.pageX, top: t.args.pageY } }, _handleDragging: function (t, i) { (t = this.host.find(".draggable")).off("dragging"), t.on("dragging", function (t) { t.args.position; var s = i._trees; if (!i._dragCancel) { i._dragOverItem && i._dragOverItem.titleElement.removeClass(i.toThemeProperty("jqx-fill-state-hover")); var r = !0, o = i._getMouseCoordinates(t); i._lastDraggingPosition = o, e.each(s, function () { if (e.jqx.isHidden(e(this))) return !0; var t = e(this).offset(), s = t.top + 20, a = e(this).height() + s - 40, n = (p = t.left) + e(this).width(), l = e.data(this, "jqxTree").instance; if (!l.disabled && l.allowDrop) { var h = l.vScrollInstance, d = l._hitTestBounds(l, o.left, o.top); if (null != d && (i._dragOverItem && i._dragOverItem.titleElement.removeClass(l.toThemeProperty("jqx-fill-state-hover")), i._dragOverItem = d, d.element)) { i.feedbackElement.show(); var c = d.top, u = o.top; i._dropPosition = "before", u > c + d.height / 3 && (c = d.top + d.height / 2, i._dragOverItem.titleElement.addClass(i.toThemeProperty("jqx-fill-state-hover")), i.feedbackElement.hide(), i._dropPosition = "inside"), u > d.top + d.height - d.height / 3 && (c = d.top + d.height, i._dragOverItem.titleElement.removeClass(i.toThemeProperty("jqx-fill-state-hover")), i.feedbackElement.show(), i._dropPosition = "after"), i.feedbackElement.css("top", c); var p = -2 + parseInt(d.titleElement.offset().left); i.feedbackElement.css("left", p), i.feedbackElement.width(e(d.titleElement).width() + 12) } o.left >= p && o.left < n ? (o.top + 20 >= s && o.top <= s + l.host.height() && (r = !1), o.top < s && o.top >= s - 30 ? (clearInterval(l._autoScrollTimer), 0 != h.value && i.feedbackElement.hide(), l._autoScrollTimer = setInterval(function () { var e = l.panelInstance.scrollUp(), t = l.host.find(".draggable"); l._syncItems(t), e || clearInterval(l._autoScrollTimer) }, 100)) : o.top > a && o.top < a + 30 ? (clearInterval(l._autoScrollTimer), h.value != h.max && i.feedbackElement.hide(), l._autoScrollTimer = setInterval(function () { var e = l.panelInstance.scrollDown(), t = l.host.find(".draggable"); l._syncItems(t), e || clearInterval(l._autoScrollTimer) }, 100)) : clearInterval(l._autoScrollTimer)) : clearInterval(l._autoScrollTimer) } }), r && i.feedbackElement && i.feedbackElement.hide() } }) }, _handleDragEnd: function (t, i) { t.off("dragEnd"), t.on("dragEnd", function (t) { i.host.find(".draggable"); clearInterval(i._autoScrollTimer); t.args.position; var s = i._trees, r = null, o = e.jqx.mobile.isTouchDevice() ? i._lastDraggingPosition : i._getMouseCoordinates(t); if (i.feedbackElement.remove(), i._dragCancel) return !1; i._dragOverItem && i._dragOverItem.titleElement.removeClass(i.toThemeProperty("jqx-fill-state-hover")), e.each(s, function () { if (e.jqx.isHidden(e(this))) return !0; var t = parseInt(e(this).offset().left), s = t + e(this).width(), a = e.data(this, "jqxTree").instance; if (clearInterval(a._autoScrollTimer), null != i._dragItem && o.left >= t && o.left < s) { var n = parseInt(e(this).offset().top), l = n + e(this).height(); o.top >= n && o.top <= l && (r = e(this)) } }); var a = i._dragItem; if (null != r && r.length > 0) { if (r.jqxTree("allowDrop")) { var n = e.data(r[0], "jqxTree").instance, l = i._dragOverItem; if (null != l && i._dragOverItem.treeInstance.element.id == n.element.id) { c = !0; if (i.dragEnd && (0 == (c = i.dragEnd(a, l, t.args, i._dropPosition, r)) && (e(t.args.element).jqxDragDrop({ triggerEvents: !1 }), e(t.args.element).jqxDragDrop("cancelDrag"), clearInterval(i._autoScrollTimer), e(t.args.element).jqxDragDrop({ triggerEvents: !0 })), void 0 == c && (c = !0)), c) { var h = function () { var e = i._dragItem.treeInstance; e._refreshMapping(), e._updateItemsNavigation(), e._render(!0, !1), e.checkboxes && e._updateCheckStates(), i._dragItem.treeInstance = n, i._syncItems(i._dragItem.treeInstance.host.find(".draggable")) }; if ("none" != n.dropAction && i._dragItem.id != i._dragOverItem.id) if ("inside" == i._dropPosition) n._drop(i._dragItem.element, i._dragOverItem.element, -1, n), h(); else { var d = 0; "after" == i._dropPosition && d++, n._drop(i._dragItem.element, i._dragOverItem.parentElement, d + e(i._dragOverItem.element).index(), n), h() } n._render(!0, !1); p = n.host.find(".draggable"); i._syncItems(p), i._dragOverItem = null, i._dragItem = null, n._refreshMapping(), n._updateItemsNavigation(), n.selectedItem = null, n.selectItem(a.element), n.checkboxes && n._updateCheckStates(), n._render(!0, !1) } } else if ("none" != n.dropAction && n.allowDrop) { var c = !0; if (i.dragEnd && (0 == (c = i.dragEnd(a, l, t.args, i._dropPosition, r)) && (e(t.args.element).jqxDragDrop({ triggerEvents: !1 }), e(t.args.element).jqxDragDrop("cancelDrag"), clearInterval(i._autoScrollTimer), e(t.args.element).jqxDragDrop({ triggerEvents: !0 })), void 0 == c && (c = !0)), c) { i._dragItem.parentElement = null, n._drop(i._dragItem.element, null, -1, n); var u = i._dragItem.treeInstance; u._refreshMapping(), u._updateItemsNavigation(), u.checkboxes && u._updateCheckStates(); p = u.host.find(".draggable"); i._syncItems(p), i._dragItem.treeInstance = n, n.items[n.items.length] = i._dragItem, n._render(!0, !1), n.selectItem(a.element), n._refreshMapping(), n._updateItemsNavigation(); var p = n.host.find(".draggable"); n._syncItems(p), n.checkboxes && n._updateCheckStates(), i._dragOverItem = null, i._dragItem = null } } } } else if (i.dragEnd && 0 == i.dragEnd(a, t.args)) return !1; return null != a && i._raiseEvent(7, { label: a.label, value: a.value, originalEvent: t.args }), !1 }) }, _drop: function (t, i, s, r) { if (!(e(i).parents("#" + t.id).length > 0 || null != i && i.id == t.id)) { if (r.element.innerHTML.indexOf("UL")) var o = r.host.find("ul:first"); if (void 0 == i && null == i) void 0 == s || -1 == s ? o.append(t) : 0 == o.children("li").eq(s).length ? o.children("li").eq(s - 1).after(t) : o.children("li").eq(s)[0].id != t.id && o.children("li").eq(s).before(t); else if (void 0 == s || -1 == s) 0 == (a = (i = e(i)).find("ul:first")).length ? (ulElement = e("<ul></ul>"), e(i).append(ulElement), a = i.find("ul:first"), (n = r.itemMapping["id" + i[0].id].item).subtreeElement = a[0], n.hasItems = !0, a.addClass(r.toThemeProperty("jqx-tree-dropdown")), a.append(t), t = a.find("li:first"), n.parentElement = t) : a.append(t); else { var a = (i = e(i)).find("ul:first"); if (0 == a.length) { if (ulElement = e("<ul></ul>"), e(i).append(ulElement), a = i.find("ul:first"), i) { var n = r.itemMapping["id" + i[0].id].item; n.subtreeElement = a[0], n.hasItems = !0 } a.addClass(r.toThemeProperty("jqx-tree-dropdown")), a.append(t), t = a.find("li:first"), n.parentElement = t } else 0 == a.children("li").eq(s).length ? a.children("li").eq(s - 1).after(t) : a.children("li").eq(s)[0].id != t.id && a.children("li").eq(s).before(t) } } }, _enableDragDrop: function () { if (this.allowDrag && this.host.jqxDragDrop) { var t = this.host.find(".draggable"), i = this; t.length > 0 && (t.jqxDragDrop({ cursor: "arrow", revertDuration: 0, appendTo: "body", dragZIndex: 99999, revert: !0, initFeedback: function (t) { var s = e('<span style="white-space: nowrap;" class="' + i.toThemeProperty("jqx-fill-state-normal") + '">' + t.text() + "</span>"); e(document.body).append(s); var r = s.width(); s.remove(), t.width(r + 5), t.addClass(i.toThemeProperty("jqx-fill-state-pressed")) } }), t.jqxDragDrop("isDestroyed") && t.jqxDragDrop("_createDragDrop"), this._autoScrollTimer = null, i._dragItem = null, i._handleDragStart(t, i), i._handleDragging(t, i), i._handleDragEnd(t, i)) } } }) } }(jQuery), function (e) { e.jqx.jqxWidget("jqxComboBox", "", {}), e.extend(e.jqx._jqxComboBox.prototype, { defineInstance: function () { this.disabled = !1, this.width = 200, this.height = 25, this.items = new Array, this.selectedIndex = -1, this.selectedItems = new Array, this._selectedItems = new Array, this.source = null, this.scrollBarSize = e.jqx.utilities.scrollBarSize, this.arrowSize = 18, this.enableHover = !0, this.enableSelection = !0, this.visualItems = new Array, this.groups = new Array, this.equalItemsWidth = !0, this.itemHeight = -1, this.visibleItems = new Array, this.emptyGroupText = "Group", this.emptyString = "", void 0 == this.openDelay && (this.openDelay = 250), void 0 == this.closeDelay && (this.closeDelay = 300), this.animationType = "default", this.dropDownWidth = "auto", this.dropDownHeight = "200px", this.autoDropDownHeight = !1, this.enableBrowserBoundsDetection = !1, this.dropDownHorizontalAlignment = "left", this.searchMode = "startswithignorecase", this.autoComplete = !1, this.remoteAutoComplete = !1, this.remoteAutoCompleteDelay = 500, this.selectionMode = "default", this.minLength = 2, this.displayMember = "", this.valueMember = "", this.keyboardSelection = !0, this.renderer = null, this.autoOpen = !1, this.checkboxes = !1, this.promptText = "", this.placeHolder = "", this.rtl = !1, this.listBox = null, this.renderSelectedItem = null, this.search = null, this.popupZIndex = 1e5, this.searchString = null, this.multiSelect = !1, this.showArrow = !0, this._disabledItems = new Array, this.touchMode = "auto", this.autoBind = !0, this.aria = { "aria-disabled": { name: "disabled", type: "boolean" } }, this.events = ["open", "close", "select", "unselect", "change", "checkChange", "bindingComplete"] }, createInstance: function (t) { if (this.host.attr("role", "combobox"), e.jqx.aria(this, "aria-autocomplete", "both"), null == e.jqx._jqxListBox || void 0 == e.jqx._jqxListBox) throw new Error("jqxComboBox: Missing reference to jqxlistbox.js."); e.jqx.aria(this), "" != this.promptText && (this.placeHolder = this.promptText), this.render() }, render: function () { this.removeHandlers(), this.isanimating = !1, this.id = e.jqx.utilities.createId(), this.element.innerHTML = ""; var t = e("<div style='background-color: transparent; -webkit-appearance: none; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; border: 0px; position: relative;'><div id='dropdownlistWrapper' style='padding: 0; margin: 0; border: none; background-color: transparent; float: left; width:100%; height: 100%; position: relative;'><div id='dropdownlistContent' style='padding: 0; margin: 0; border-top: none; border-bottom: none; float: left; position: absolute;'/><div id='dropdownlistArrow' style='padding: 0; margin: 0; border-left-width: 1px; border-bottom-width: 0px; border-top-width: 0px; border-right-width: 0px; float: right; position: absolute;'/></div></div>"); if (this.comboStructure = t, null == e.jqx._jqxListBox || void 0 == e.jqx._jqxListBox) throw "jqxComboBox: Missing reference to jqxlistbox.js."; this.touch = e.jqx.mobile.isTouchDevice(), !0 === this.touchMode && (this.touch = !0), this.host.append(t), this.dropdownlistWrapper = this.host.find("#dropdownlistWrapper"), this.dropdownlistArrow = this.host.find("#dropdownlistArrow"), this.dropdownlistContent = this.host.find("#dropdownlistContent"), this.dropdownlistContent.addClass(this.toThemeProperty("jqx-combobox-content")), this.dropdownlistContent.addClass(this.toThemeProperty("jqx-widget-content")), this.dropdownlistWrapper[0].id = "dropdownlistWrapper" + this.element.id, this.dropdownlistArrow[0].id = "dropdownlistArrow" + this.element.id, this.dropdownlistContent[0].id = "dropdownlistContent" + this.element.id, this.dropdownlistContent.append(e('<input autocomplete="off" style="margin: 0; padding: 0; border: 0;" type="textarea"/>')), this.input = this.dropdownlistContent.find("input"), this.input.addClass(this.toThemeProperty("jqx-combobox-input")), this.input.addClass(this.toThemeProperty("jqx-widget-content")), this.host.attr("tabindex") && (this.input.attr("tabindex", this.host.attr("tabindex")), this.host.removeAttr("tabindex")), this._addInput(), this.rtl && (this.input.css({ direction: "rtl" }), this.dropdownlistContent.addClass(this.toThemeProperty("jqx-combobox-content-rtl"))); try { var i = "listBox" + this.id, s = e(e.find("#" + i)); s.length > 0 && s.remove(), e.jqx.aria(this, "aria-owns", i), e.jqx.aria(this, "aria-haspopup", !0), e.jqx.aria(this, "aria-multiline", !1), this.listBoxContainer && this.listBoxContainer.jqxListBox("destroy"), this.container && this.container.remove(); var r = e("<div style='overflow: hidden; border: none; background-color: transparent; position: absolute;' id='listBox" + this.id + "'><div id='innerListBox" + this.id + "'></div></div>"); r.hide(), r.appendTo(document.body), this.container = r, this.listBoxContainer = e(e.find("#innerListBox" + this.id)); var o = this.width; "auto" != this.dropDownWidth && (o = this.dropDownWidth), null == this.dropDownHeight && (this.dropDownHeight = 200); var a = this; this.container.width(parseInt(o) + 25), this.container.height(parseInt(this.dropDownHeight) + 25), this.addHandler(this.listBoxContainer, "bindingComplete", function (e) { a._raiseEvent("6") }); this.listBoxContainer.jqxListBox({ _checkForHiddenParent: !1, checkboxes: this.checkboxes, emptyString: this.emptyString, autoBind: !this.remoteAutoComplete && this.autoBind, renderer: this.renderer, rtl: this.rtl, itemHeight: this.itemHeight, selectedIndex: this.selectedIndex, incrementalSearch: !1, width: o, scrollBarSize: this.scrollBarSize, autoHeight: this.autoDropDownHeight, height: this.dropDownHeight, displayMember: this.displayMember, valueMember: this.valueMember, source: this.source, theme: this.theme, rendered: function () { if (a.listBox = e.data(a.listBoxContainer[0], "jqxListBox").instance, a.remoteAutoComplete) if (a.autoDropDownHeight ? (a.container.height(a.listBox.virtualSize.height + 25), a.listBoxContainer.height(a.listBox.virtualSize.height), a.listBox._arrange()) : (a.listBox._arrange(), a.listBox.ensureVisible(0), a.listBox._renderItems(), a.container.height(a.listBoxContainer.height() + 25)), void 0 != a.searchString && a.searchString.length >= a.minLength) { var t = a.listBoxContainer.jqxListBox("items"); t && t.length > 0 ? a.isOpened() || a.open() : a.close() } else a.close(); else a.renderSelection("mouse"), a.multiSelect && a.doMultiSelect(!1); a.rendered && a.rendered() } }), this.listBoxContainer.css({ position: "absolute", zIndex: this.popupZIndex, top: 0, left: 0 }), this.listBoxContainer.css("border-top-width", "1px"), this.listBoxContainer.addClass(this.toThemeProperty("jqx-popup")), e.jqx.browser.msie && this.listBoxContainer.addClass(this.toThemeProperty("jqx-noshadow")), this.listBox = e.data(this.listBoxContainer[0], "jqxListBox").instance, this.listBox.enableSelection = this.enableSelection, this.listBox.enableHover = this.enableHover, this.listBox.equalItemsWidth = this.equalItemsWidth, this.listBox._arrange(), this.addHandler(this.listBoxContainer, "unselect", function (e) { a.multiSelect || a._raiseEvent("3", { index: e.args.index, type: e.args.type, item: e.args.item }) }), this.addHandler(this.listBoxContainer, "change", function (e) { a.multiSelect || a._raiseEvent("4", { index: e.args.index, type: e.args.type, item: e.args.item }) }), "none" == this.animationType ? this.container.css("display", "none") : this.container.hide(), !1 } catch (e) { throw e } var n = this; if (n.input.attr("disabled", n.disabled), e.jqx.browser.msie && e.jqx.browser.version < 8 || n.input.attr("placeholder", n.placeHolder), this.propertyChangeMap.disabled = function (t, i, s, r) { r ? (t.host.addClass(n.toThemeProperty("jqx-combobox-state-disabled")), t.host.addClass(n.toThemeProperty("jqx-fill-state-disabled")), t.dropdownlistContent.addClass(n.toThemeProperty("jqx-combobox-content-disabled"))) : (t.host.removeClass(n.toThemeProperty("jqx-combobox-state-disabled")), t.host.removeClass(n.toThemeProperty("jqx-fill-state-disabled")), t.dropdownlistContent.removeClass(n.toThemeProperty("jqx-combobox-content-disabled"))), t.input.attr("disabled", t.disabled), e.jqx.aria(t, "aria-disabled", t.disabled), t.input.attr("disabled", t.disabled) }, this.disabled && (this.host.addClass(this.toThemeProperty("jqx-combobox-state-disabled")), this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")), this.dropdownlistContent.addClass(this.toThemeProperty("jqx-combobox-content-disabled"))), this.host.addClass(this.toThemeProperty("jqx-combobox-state-normal")), this.host.addClass(this.toThemeProperty("jqx-combobox")), this.host.addClass(this.toThemeProperty("jqx-rc-all")), this.host.addClass(this.toThemeProperty("jqx-widget")), this.host.addClass(this.toThemeProperty("jqx-widget-content")), this.dropdownlistArrowIcon = e("<div></div>"), this.dropdownlistArrowIcon.addClass(this.toThemeProperty("jqx-icon-arrow-down")), this.dropdownlistArrowIcon.addClass(this.toThemeProperty("jqx-icon")), this.dropdownlistArrow.append(this.dropdownlistArrowIcon), this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-combobox-arrow-normal")), this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-fill-state-normal")), this.rtl ? this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-rc-l")) : this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-rc-r")), this._setSize(), this._updateHandlers(), this.addHandler(this.input, "keyup.textchange", function (e) { a._search(e); a.cinput && a.input && (a.cinput[0].value = a.input[0].value) }), e.jqx.browser.msie && e.jqx.browser.version < 8 && this.host.parents(".jqx-window").length > 0) { var l = this.host.parents(".jqx-window").css("z-index"); r.css("z-index", l + 10), this.listBoxContainer.css("z-index", l + 10) } this.checkboxes ? (this.input.attr("readonly", !0), e.jqx.aria(this, "aria-readonly", !0)) : e.jqx.aria(this, "aria-readonly", !1), this.remoteAutoComplete || (this.searchString = "") }, _addInput: function () { var t = this.host.attr("name"); this.cinput = e("<input type='hidden'/>"), this.host.append(this.cinput), t && this.cinput.attr("name", t) }, _updateInputSelection: function () { if (this.cinput) { if (-1 == this.selectedIndex) this.cinput.val(""); else { var e = this.getSelectedItem(); null != e ? this.cinput.val(e.value) : this.cinput.val(this.dropdownlistContent.text()) } if (this.checkboxes || this.multiSelect) { if (this.multiSelect) t = this.getSelectedItems(); else var t = this.getCheckedItems(); var i = ""; if (null != t) for (var s = 0; s < t.length; s++) s == t.length - 1 ? i += t[s].value : i += t[s].value + ","; this.cinput.val(i) } } }, _search: function (t) { if (9 != t.keyCode && "none" != this.searchMode && null != this.searchMode && "undefined" != this.searchMode && 16 != t.keyCode && 17 != t.keyCode && 20 != t.keyCode && !this.checkboxes) { if (this.multiSelect) { var i = e("<span style='visibility: hidden; white-space: nowrap;'>" + this.input.val() + "</span>"); i.addClass(this.toThemeProperty("jqx-widget")), e(document.body).append(i); var s = i.width() + 15; i.remove(), s > this.host.width() && (s = this.host.width()), s < 25 && (s = 25), this.input.css("width", s + "px"), 0 == this.selectedItems.length ? (this.input.css("width", "100%"), this.input.attr("placeholder", this.placeHolder)) : this.input.attr("placeholder", ""); var r = parseInt(this._findPos(this.host[0])[1]) + parseInt(this.host.outerHeight()) - 1 + "px", o = e.jqx.mobile.isSafariMobileBrowser() || e.jqx.mobile.isWindowsPhone(); (e.jqx.utilities.hasTransform(this.host) || null != o && o) && (r = e.jqx.mobile.getTopPos(this.element) + parseInt(this.host.outerHeight()), "0px" != e("body").css("border-top-width") && (r = parseInt(r) - this._getBodyOffset().top + "px")), this.container.css("top", r); var a = parseInt(this.host.height()); this.dropdownlistArrow.height(a) } if (!this.isanimating) { if (t.altKey && 38 == t.keyCode) return this.hideListBox("altKey"), !1; if (t.altKey && 40 == t.keyCode) return this.isOpened() || this.showListBox("altKey"), !1 } if (37 == t.keyCode || 39 == t.keyCode) return !1; if (!t.altKey && 18 != t.keyCode && !(t.keyCode >= 33 && t.keyCode <= 40 || (t.ctrlKey || this.ctrlKey) && 88 != t.keyCode && 86 != t.keyCode)) { var n = this.input.val(); if (0 == n.length && !this.autoComplete) return this.listBox.searchString = this.input.val(), this.listBox.clearSelection(), this.hideListBox("search"), void (this.searchString = this.input.val()); if (this.remoteAutoComplete) { var l = this, h = function () { l.listBox.vScrollInstance.value = 0 }; n.length >= l.minLength ? t.ctrlKey || t.altKey || (l.searchString != n && (null == l.listBoxContainer.jqxListBox("source") && l.listBoxContainer.jqxListBox({ source: l.source }), this._searchTimer && clearTimeout(this._searchTimer), 13 != t.keyCode && 27 != t.keyCode && (this._searchTimer = setTimeout(function () { if (h(), l.autoDropDownHeight && (l.listBox.autoHeight = !0), l.searchString = l.input.val(), null == l.search) throw "'search' function is not defined"; l.search(l.input.val()) }, this.remoteAutoCompleteDelay))), l.searchString = n) : (this._searchTimer && clearTimeout(this._searchTimer), h(), l.searchString = "", l.listBoxContainer.jqxListBox({ source: null })) } else if (n !== (l = this).searchString) { if ("27" != t.keyCode && "13" != t.keyCode) { var d = this._updateItemsVisibility(n), c = d.matchItems, u = d.index; this.autoComplete || this.removeAutoComplete || (!this.multiSelect || this.multiSelect && u >= 0) && (this.listBox.selectIndex(u), this.listBox.isIndexInView(u) ? this.listBox._renderItems() : this.listBox.ensureVisible(u)), this.autoComplete && 0 === c.length && this.hideListBox("search") } if ("13" == t.keyCode) { if ((p = "block" == this.container.css("display")) && !this.isanimating) return this.hideListBox("keyboard"), void (this._oldvalue = this.listBox.selectedValue) } else if ("27" == t.keyCode) { var p = "block" == this.container.css("display"); if (p && !this.isanimating) { if (m.multiSelect) m.input.val(""), m.listBox.selectedValue = null; else if (g = this.listBox.getVisibleItem(this._oldvalue)) { var m = this; setTimeout(function () { m.autoComplete && m._updateItemsVisibility(""), m.listBox.selectIndex(g.index), m.renderSelection("api") }, m.closeDelay) } else this.clearSelection(); return this.hideListBox("keyboard"), this.renderSelection("api"), t.preventDefault(), !1 } } else { this.isOpened() || this.opening || t.ctrlKey || this.listBox.visibleItems && this.listBox.visibleItems.length > 0 && this.input.val() != this.searchString && void 0 != this.searchString && -1 != u && this.showListBox("search"), this.searchString = this.input.val(), "" == this.searchString && (this.listBox.itemsByValue[""] || (u = -1)); var g = this.listBox.getVisibleItem(u); void 0 != g && this._updateInputSelection() } } } } }, val: function (e) { if (!this.input) return ""; if ("object" == typeof e || 0 == arguments.length) return (t = this.getSelectedItem()) ? t.value : this.input.val(); var t = this.getItemByValue(e); return null != t ? this.selectItem(t) : this.input.val(e), this.input.val() }, focus: function () { var e = this, t = function () { e.input.focus(); var t = e.input.val(); e._setSelection(0, t.length) }; t(), setTimeout(function () { t() }, 10) }, _setSelection: function (e, t) { try { if ("selectionStart" in this.input[0]) this.input[0].focus(), this.input[0].setSelectionRange(e, t); else { var i = this.input[0].createTextRange(); i.collapse(!0), i.moveEnd("character", t), i.moveStart("character", e), i.select() } } catch (e) { } }, setContent: function (e) { this.input.val(e) }, _updateItemsVisibility: function (t) { var i = this.getItems(); if (void 0 == i) return { index: -1, matchItem: new Array }; var s = this, r = -1, o = new Array, a = 0; e.each(i, function (i) { var n = ""; if (!this.isGroup) { n = (n = this.label ? this.label : this.value ? this.value : this.title ? this.title : "jqxItem").toString(); var l = !1; switch (s.searchMode) { case "containsignorecase": l = e.jqx.string.containsIgnoreCase(n, t); break; case "contains": l = e.jqx.string.contains(n, t); break; case "equals": l = e.jqx.string.equals(n, t); break; case "equalsignorecase": l = e.jqx.string.equalsIgnoreCase(n, t); break; case "startswith": l = e.jqx.string.startsWith(n, t); break; case "startswithignorecase": l = e.jqx.string.startsWithIgnoreCase(n, t); break; case "endswith": l = e.jqx.string.endsWith(n, t); break; case "endswithignorecase": l = e.jqx.string.endsWithIgnoreCase(n, t) } if (s.autoComplete && !l && (this.visible = !1), l && s.autoComplete && (o[a++] = this, this.visible = !0, r = this.visibleIndex), "" == t && s.autoComplete && (this.visible = !0, l = !1), s.multiSelect && (this.disabled = !1, (s.selectedItems.indexOf(this.value) >= 0 || s._disabledItems.indexOf(this.value) >= 0) && (this.disabled = !0, l = !1)), s.multiSelect) { if (l && !s.autoComplete) return -1 === r && (r = this.visibleIndex), !0 } else if (l && !s.autoComplete) return r = this.visibleIndex, !1 } }), this.listBox.searchString = t; var n = this, l = function () { if (n.multiSelect) { for (var e = 0, t = !1, i = null, s = 0; s < n.listBox.items.length; s++) n.listBox.selectedIndexes[s] = -1, n.listBox.items[s].disabled || 0 == t && (e = (i = n.listBox.items[s]).visibleIndex, t = !0); n.listBox.selectedIndex = -1, n.listBox.selectedIndex = e, n.listBox.selectedIndexes[e] = e, n.listBox.visibleItems.length > 0 ? n.listBox.selectedValue = i ? i.value : null : n.listBox.selectedValue = null, n.listBox.ensureVisible(0) } }; if (!this.autoComplete) return l(), { index: r, matchItems: o }; this.listBox.renderedVisibleItems = new Array; var h = this.listBox.vScrollInstance.value; this.listBox.vScrollInstance.value = 0, this.listBox.visibleItems = new Array, this.listBox._renderItems(); var d = this.listBox.selectedValue, c = this.listBox.getItemByValue(d); if (this.multiSelect) l(); else if (c) if (c.visible) { this.listBox.selectedIndex = c.visibleIndex; for (u = 0; u < this.listBox.items.length; u++) this.listBox.selectedIndexes[u] = -1; this.listBox.selectedIndexes[c.visibleIndex] = c.visibleIndex } else { for (var u = 0; u < this.listBox.items.length; u++) this.listBox.selectedIndexes[u] = -1; this.listBox.selectedIndex = -1 } this.listBox._renderItems(); var p = this.listBox._calculateVirtualSize().height; if (p < h && (h = 0, this.listBox.vScrollInstance.refresh()), this.autoDropDownHeight) this._disableSelection = !0, this.listBox.autoHeight != this.autoDropDownHeight && this.listBoxContainer.jqxListBox({ autoHeight: this.autoDropDownHeight }), this.container.height(p + 25), this.listBox.invalidate(), this._disableSelection = !1; else if (p < parseInt(this.dropDownHeight)) { var m = "hidden" == this.listBox.hScrollBar[0].style.visibility ? 0 : 20; this.listBox.height = m + p, this.container.height(p + 25 + m), this.listBox.invalidate() } else this.listBox.height = parseInt(this.dropDownHeight), this.container.height(parseInt(this.dropDownHeight) + 25), this.listBox.invalidate(); return this.listBox.vScrollInstance.setPosition(h), { index: r, matchItems: o } }, findItems: function (t) { var i = this.getItems(), s = this, r = 0, o = new Array; return e.each(i, function (i) { var a = ""; if (!this.isGroup) { a = this.label ? this.label : this.value ? this.value : this.title ? this.title : "jqxItem"; var n = !1; switch (s.searchMode) { case "containsignorecase": n = e.jqx.string.containsIgnoreCase(a, t); break; case "contains": n = e.jqx.string.contains(a, t); break; case "equals": n = e.jqx.string.equals(a, t); break; case "equalsignorecase": n = e.jqx.string.equalsIgnoreCase(a, t); break; case "startswith": n = e.jqx.string.startsWith(a, t); break; case "startswithignorecase": n = e.jqx.string.startsWithIgnoreCase(a, t); break; case "endswith": n = e.jqx.string.endsWith(a, t); break; case "endswithignorecase": n = e.jqx.string.endsWithIgnoreCase(a, t) } n && (o[r++] = this) } }), o }, _resetautocomplete: function () { e.each(this.listBox.items, function (e) { this.visible = !0 }), this.listBox.vScrollInstance.value = 0, this.listBox._addItems(), this.listBox.autoHeight = !1, this.listBox.height = this.dropDownHeight, this.container.height(parseInt(this.dropDownHeight) + 25), this.listBoxContainer.height(parseInt(this.dropDownHeight)), this.listBox._arrange(), this.listBox._addItems(), this.listBox._renderItems() }, getItems: function () { return this.listBox.items }, getVisibleItems: function () { return this.listBox.getVisibleItems() }, _setSize: function () { null != this.width && -1 != this.width.toString().indexOf("px") ? this.host.width(this.width) : void 0 == this.width || isNaN(this.width) || this.host.width(this.width), null != this.height && -1 != this.height.toString().indexOf("px") ? this.host.height(this.height) : void 0 == this.height || isNaN(this.height) || this.host.height(this.height); var t = !1; if (null != this.width && -1 != this.width.toString().indexOf("%") && (t = !0, this.host.width(this.width)), null != this.height && -1 != this.height.toString().indexOf("%") && (t = !0, this.host.height(this.height)), t) { var i = this, s = this.host.width(); "auto" != this.dropDownWidth && (s = this.dropDownWidth), this.listBoxContainer.jqxListBox({ width: s }), this.container.width(parseInt(s) + 25), this._arrange() } var i = this, r = function () { i.multiSelect && i.host.height(i.height), i._arrange(), i.multiSelect && i.host.height("auto") }; e.jqx.utilities.resize(this.host, function () { r(), i.hideListBox("api") }) }, isOpened: function () { var t = this, i = e.data(document.body, "openedComboJQXListBox" + this.element.id); return "block" == this.container.css("display") && (null != i && i == t.listBoxContainer) }, _updateHandlers: function () { var t = this, i = !1; this.removeHandlers(), this.multiSelect && (this.addHandler(this.dropdownlistContent, "click", function (e) { if (e.target.href) return !1; t.input.focus(), setTimeout(function () { t.input.focus() }, 10) }), this.addHandler(this.dropdownlistContent, "focus", function (e) { if (e.target.href) return !1; t.input.focus(), setTimeout(function () { t.input.focus() }, 10) })), this.touch || (this.host.parents() && this.addHandler(this.host.parents(), "scroll.combobox" + this.element.id, function (e) { t.isOpened() && t.close() }), this.addHandler(this.host, "mouseenter", function () { !t.disabled && t.enableHover && (i = !0, t.host.addClass(t.toThemeProperty("jqx-combobox-state-hover")), t.dropdownlistArrowIcon.addClass(t.toThemeProperty("jqx-icon-arrow-down-hover")), t.dropdownlistArrow.addClass(t.toThemeProperty("jqx-combobox-arrow-hover")), t.dropdownlistArrow.addClass(t.toThemeProperty("jqx-fill-state-hover"))) }), this.addHandler(this.host, "mouseleave", function () { !t.disabled && t.enableHover && (t.host.removeClass(t.toThemeProperty("jqx-combobox-state-hover")), t.dropdownlistArrowIcon.removeClass(t.toThemeProperty("jqx-icon-arrow-down-hover")), t.dropdownlistArrow.removeClass(t.toThemeProperty("jqx-combobox-arrow-hover")), t.dropdownlistArrow.removeClass(t.toThemeProperty("jqx-fill-state-hover")), i = !1) })), t.autoOpen && (this.addHandler(this.host, "mouseenter", function () { !t.isOpened() && t.autoOpen && (t.open(), t.host.focus()) }), this.addHandler(e(document), "mousemove." + t.id, function (e) { if (t.isOpened() && t.autoOpen) { var i = t.host.coord(), s = i.top, r = i.left, o = t.container.coord(), a = o.left, n = o.top; canClose = !0, e.pageY >= s && e.pageY <= s + t.host.height() + 2 && e.pageX >= r && e.pageX < r + t.host.width() && (canClose = !1), e.pageY >= n && e.pageY <= n + t.container.height() - 20 && e.pageX >= a && e.pageX < a + t.container.width() && (canClose = !1), canClose && t.close() } })); var s = "mousedown"; this.touch && (s = e.jqx.mobile.getTouchEventName("touchstart")); var r = function (i) { if (!t.disabled) { var s = "block" == t.container.css("display"); if (!t.isanimating) { if (s) return t.hideListBox("api"), e.jqx.mobile.isTouchDevice() || (t.input.focus(), setTimeout(function () { t.input.focus() }, 10)), !0; if (t.autoDropDownHeight && (t.container.height(t.listBoxContainer.height() + 25), t.listBoxContainer.jqxListBox("autoHeight") || (t.listBoxContainer.jqxListBox({ autoHeight: t.autoDropDownHeight }), t.listBox._arrange(), t.listBox.ensureVisible(0), t.listBox._renderItems(), t.container.height(t.listBoxContainer.height() + 25))), t.showListBox("api"), e.jqx.mobile.isTouchDevice()) return !0; setTimeout(function () { t.input.focus() }, 10) } } }; this.addHandler(this.dropdownlistArrow, s, function (e) { r() }), this.addHandler(this.dropdownlistArrowIcon, s, function (e) { }), this.addHandler(this.host, "focus", function () { t.focus() }), this.addHandler(this.input, "focus", function (e) { return t.focused = !0, t.host.addClass(t.toThemeProperty("jqx-combobox-state-focus")), t.host.addClass(t.toThemeProperty("jqx-fill-state-focus")), t.dropdownlistContent.addClass(t.toThemeProperty("jqx-combobox-content-focus")), e.stopPropagation && e.stopPropagation(), e.preventDefault && e.preventDefault(), !1 }), this.addHandler(this.input, "blur", function () { t.focused = !1, t.isOpened() || t.opening || ("dropDownList" == t.selectionMode && t._selectOldValue(), t.host.removeClass(t.toThemeProperty("jqx-combobox-state-focus")), t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")), t.dropdownlistContent.removeClass(t.toThemeProperty("jqx-combobox-content-focus"))), t._searchTimer && clearTimeout(t._searchTimer) }), this.addHandler(e(document), "mousedown." + this.id, t.closeOpenedListBox, { me: this, listbox: this.listBox, id: this.id }), this.touch && this.addHandler(e(document), e.jqx.mobile.getTouchEventName("touchstart") + "." + this.id, t.closeOpenedListBox, { me: this, listbox: this.listBox, id: this.id }), this.addHandler(this.host, "keydown", function (e) { var i = "block" == t.container.css("display"); if (t.ctrlKey = e.ctrlKey, "none" == t.host.css("display")) return !0; if (("13" == e.keyCode || "9" == e.keyCode) && i && !t.isanimating) { if (-1 != t.listBox.selectedIndex) { t.renderSelection("mouse"); var s = t.listBox.selectedIndex; (r = t.listBox.getVisibleItem(s)) && (t.listBox.selectedValue = r.value), t._setSelection(t.input.val().length, t.input.val().length), t.hideListBox("keyboard") } return "13" == e.keyCode && (t._oldvalue = t.listBox.selectedValue), t.keyboardSelection || t._raiseEvent("2", { index: t.selectedIndex, type: "keyboard", item: t.getItem(t.selectedIndex) }), "9" == e.keyCode } if (115 == e.keyCode) return t.isanimating || (t.isOpened() ? t.isOpened() && t.hideListBox("keyboard") : t.showListBox("keyboard")), !1; if (e.altKey && "block" == t.host.css("display") && (t.isanimating || (38 == e.keyCode ? t.isOpened() && t.hideListBox("altKey") : 40 == e.keyCode && (t.isOpened() || t.showListBox("altKey")))), ("27" == e.keyCode || "9" == e.keyCode) && t.isOpened() && !t.isanimating) { if ("27" == e.keyCode) if (t.multiSelect) t.listBox.selectedValue = null, t.input.val(""); else { var r = t.listBox.getItemByValue(t._oldvalue); r ? setTimeout(function () { t.autoComplete && t._updateItemsVisibility(""), t.listBox.selectIndex(r.index), t.renderSelection("api") }, t.closeDelay) : t.clearSelection() } return t.hideListBox("keyboard"), "9" == e.keyCode ? !0 : (t.renderSelection("api"), e.preventDefault(), !1) } var o = e.keyCode; if (i && !t.disabled && 8 != o) return t.listBox._handleKeyDown(e); if (!(t.disabled || i || 33 != (o = e.keyCode) && 34 != o && 35 != o && 36 != o && 38 != o && 40 != o)) return t.listBox._handleKeyDown(e); if (8 === o && t.multiSelect && 0 === t.input.val().length) { var a = t.selectedItems[t.selectedItems.length - 1]; return t.selectedItems.pop(), t._selectedItems.pop(), a && (t._raiseEvent("3", { index: a.index, type: "keyboard", item: a }), t._raiseEvent("4", { index: a.index, type: "keyboard", item: a })), t.listBox.selectedValue = null, t.doMultiSelect(), !1 } }), this.addHandler(this.listBoxContainer, "checkChange", function (e) { t.renderSelection("mouse"), t._updateInputSelection(), t._raiseEvent(5, { label: e.args.label, value: e.args.value, checked: e.args.checked, item: e.args.item }) }), this.addHandler(this.listBoxContainer, "select", function (e) { if (!t.disabled && ("keyboard" != e.args.type || t.keyboardSelection) && (t.renderSelection(e.args.type), t.multiSelect || t._raiseEvent("2", { index: e.args.index, type: e.args.type, item: e.args.item }), "mouse" == e.args.type && (t._oldvalue = t.listBox.selectedValue, !t.checkboxes))) { if (t.hideListBox("mouse"), t.touch) return !1; t.input.focus() } }), null != this.listBox && null != this.listBox.content && this.addHandler(this.listBox.content, "click", function (e) { if (!t.disabled) { if (t.listBox.itemswrapper && e.target === t.listBox.itemswrapper[0]) return !0; if (e.target && e.target.className && e.target.className.indexOf("jqx-fill-state-disabled") >= 0) return !0; t.renderSelection("mouse"), t._oldvalue = t.listBox.selectedValue, t.touch || t.ishiding || t.checkboxes || (t.hideListBox("mouse"), t.input.focus()), !0 === t.touch && (t.checkboxes || t.hideListBox("mouse")) } }) }, _selectOldValue: function () { var e = this; if (-1 == e.listBox.selectedIndex) if (e.multiSelect) e.listBox.selectedValue = null, e.input.val(""); else { var t = e.listBox.getItemByValue(e._oldvalue); t ? setTimeout(function () { e.autoComplete && e._updateItemsVisibility(""), e.listBox.selectIndex(t.index), e.renderSelection("api") }, e.closeDelay) : (e.clearSelection(), e.listBox.selectIndex(0), e.renderSelection("api")) } else e.renderSelection("api") }, removeHandlers: function () { var t = this; if (null != this.dropdownlistWrapper && this.removeHandler(this.dropdownlistWrapper, "mousedown"), this.dropdownlistContent && (this.removeHandler(this.dropdownlistContent, "click"), this.removeHandler(this.dropdownlistContent, "focus")), this.removeHandler(this.host, "keydown"), this.removeHandler(this.host, "focus"), null != this.input && (this.removeHandler(this.input, "focus"), this.removeHandler(this.input, "blur")), this.removeHandler(this.host, "mouseenter"), this.removeHandler(this.host, "mouseleave"), this.removeHandler(e(document), "mousemove." + t.id), this.listBoxContainer && (this.removeHandler(this.listBoxContainer, "checkChange"), this.removeHandler(this.listBoxContainer, "select")), this.host.parents() && this.removeHandler(this.host.parents(), "scroll.combobox" + this.element.id), this.dropdownlistArrowIcon && this.dropdownlistArrow) { var i = "mousedown"; this.touch && (i = e.jqx.mobile.getTouchEventName("touchstart")), this.removeHandler(this.dropdownlistArrowIcon, i), this.removeHandler(this.dropdownlistArrow, i) } }, getItem: function (e) { return this.listBox.getItem(e) }, getItemByValue: function (e) { return this.listBox.getItemByValue(e) }, getVisibleItem: function (e) { return this.listBox.getVisibleItem(e) }, renderSelection: function (t) { if (void 0 != t && "none" != t && !0 !== this._disableSelection && null != this.listBox && !this.multiSelect) { i = this.listBox.visibleItems[this.listBox.selectedIndex]; if (this.autoComplete && !this.checkboxes && void 0 !== this.listBox.selectedValue) var i = this.getItemByValue(this.listBox.selectedValue); if (this.checkboxes) { var s = this.getCheckedItems(); i = null != s && s.length > 0 ? s[0] : null } if (null == i) { var r = e.jqx.browser.msie && e.jqx.browser.version < 8; return this.input.val(""), r || this.input.attr("placeholder", this.placeHolder), void this._updateInputSelection() } this.selectedIndex = this.listBox.selectedIndex; var o = e("<span></span>"); void 0 != i.label && null != i.label && i.label.toString().length > 0 ? e.jqx.utilities.html(o, i.label) : void 0 != i.value && null != i.value && i.value.toString().length > 0 ? e.jqx.utilities.html(o, i.value) : void 0 != i.title && null != i.title && i.title.toString().length > 0 ? e.jqx.utilities.html(o, i.title) : e.jqx.utilities.html(o, this.emptyString); o.outerHeight(); if (this.checkboxes) { for (var a = this.getCheckedItems(), n = "", l = 0; l < a.length; l++) l == a.length - 1 ? n += a[l].label : n += a[l].label + ", "; this.input.val(n) } else this.input.val(o.text()); if (o.remove(), this.renderSelectedItem) { var h = this.renderSelectedItem(this.listBox.selectedIndex, i); void 0 != h && this.input.val(h) } this._updateInputSelection(), this.listBox && this.listBox._activeElement && e.jqx.aria(this, "aria-activedescendant", this.listBox._activeElement.id) } }, dataBind: function () { this.listBoxContainer.jqxListBox({ source: this.source }), this.renderSelection("mouse"), null == this.source && this.clearSelection() }, clear: function () { this.listBoxContainer.jqxListBox({ source: null }), this.clearSelection() }, clearSelection: function (e) { this.selectedIndex = -1, this.listBox.clearSelection(), this.input.val(""), this.multiSelect && (this.listBox.selectedValue = "", this.selectedItems = new Array, this._selectedItems = new Array, this.doMultiSelect(!1)) }, unselectIndex: function (e, t) { if (!isNaN(e) && (this.autoComplete && this._updateItemsVisibility(""), this.listBox.unselectIndex(e, t), this.renderSelection("mouse"), this.multiSelect)) { if (e >= 0) { var i = this.getItem(e), s = this.selectedItems.indexOf(i.value); s >= 0 && (i.value === this.listBox.selectedValue && (this.listBox.selectedValue = null), this.selectedItems.splice(s, 1), this._selectedItems.splice(s, 1)) } this.doMultiSelect(!1) } }, selectIndex: function (e, t, i, s) { this.autoComplete && this._updateItemsVisibility(""), this.listBox.selectIndex(e, t, i, s), this.renderSelection("mouse"), this.selectedIndex = e, this.multiSelect && this.doMultiSelect() }, selectItem: function (e) { this.autoComplete && this._updateItemsVisibility(""), void 0 != this.listBox && (this.listBox.selectedIndex = -1, this.listBox.selectItem(e), this.selectedIndex = this.listBox.selectedIndex, this.renderSelection("mouse"), this.multiSelect && this.doMultiSelect(!1)) }, unselectItem: function (e) { if (this.autoComplete && this._updateItemsVisibility(""), void 0 != this.listBox && (this.listBox.unselectItem(e), this.renderSelection("mouse"), this.multiSelect)) { var t = this.getItemByValue(e); if (t) { var i = this.selectedItems.indexOf(t.value); i >= 0 && (t.value === this.listBox.selectedValue && (this.listBox.selectedValue = null), this.selectedItems.splice(i, 1), this._selectedItems.splice(i, 1)) } this.doMultiSelect(!1) } }, checkItem: function (e) { this.autoComplete && this._updateItemsVisibility(""), void 0 != this.listBox && this.listBox.checkItem(e) }, uncheckItem: function (e) { this.autoComplete && this._updateItemsVisibility(""), void 0 != this.listBox && this.listBox.uncheckItem(e) }, indeterminateItem: function (e) { this.autoComplete && this._updateItemsVisibility(""), void 0 != this.listBox && this.listBox.indeterminateItem(e) }, getSelectedValue: function () { return this.listBox.selectedValue }, getSelectedIndex: function () { return this.listBox.selectedIndex }, getSelectedItem: function () { return this.getVisibleItem(this.listBox.selectedIndex) }, getSelectedItems: function () { var t = new Array, i = this; return e.each(this.selectedItems, function () { var e = i.getItemByValue(this); e ? t.push(e) : (e = i._selectedItems[this]) && t.push(e) }), t }, getCheckedItems: function () { return this.listBox.getCheckedItems() }, checkIndex: function (e) { this.listBox.checkIndex(e) }, uncheckIndex: function (e) { this.listBox.uncheckIndex(e) }, indeterminateIndex: function (e) { this.listBox.indeterminateIndex(e) }, checkAll: function () { this.listBox.checkAll(), this.renderSelection("mouse") }, uncheckAll: function () { this.listBox.uncheckAll(), this.renderSelection("mouse") }, insertAt: function (e, t) { return null != e && this.listBox.insertAt(e, t) }, addItem: function (e) { return this.listBox.addItem(e) }, removeAt: function (e) { var t = this.listBox.removeAt(e); return this.renderSelection("mouse"), t }, removeItem: function (e) { var t = this.listBox.removeItem(e); return this.renderSelection("mouse"), t }, updateItem: function (e, t) { var i = this.listBox.updateItem(e, t); return this.renderSelection("mouse"), i }, updateAt: function (e, t) { var i = this.listBox.updateAt(e, t); return this.renderSelection("mouse"), i }, ensureVisible: function (e) { return this.listBox.ensureVisible(e) }, disableAt: function (e) { var t = this.getVisibleItem(e); return t && this._disabledItems.push(t.value), this.listBox.disableAt(e) }, enableAt: function (e) { var t = this.getVisibleItem(e); return t && this._disabledItems.splice(this._disabledItems.indexOf(t.value), 1), this.listBox.enableAt(e) }, disableItem: function (e) { return (e = this.getVisibleItem(e)) && this._disabledItems.push(e.value), this.listBox.disableItem(e) }, enableItem: function (e) { return (e = this.getVisibleItem(e)) && this._disabledItems.splice(this._disabledItems.indexOf(e.value), 1), this.listBox.enableItem(e) }, _findPos: function (t) { for (; t && ("hidden" == t.type || 1 != t.nodeType || e.expr.filters.hidden(t)) ;) t = t.nextSibling; if (t) { var i = e(t).coord(!0); return [i.left, i.top] } }, testOffset: function (t, i, s) { var r = t.outerWidth(), o = t.outerHeight(), a = e(window).width() + e(window).scrollLeft(), n = e(window).height() + e(window).scrollTop(); if (i.left + r > a && r > this.host.width()) { var l = this.host.coord().left, h = r - this.host.width(); i.left = l - h + 2 } return i.left < 0 && (i.left = parseInt(this.host.coord().left) + "px"), i.top -= Math.min(i.top, i.top + o > n && n > o ? Math.abs(o + s + 23) : 0), i }, open: function () { this.isOpened() || this.opening || this.showListBox("api") }, close: function () { this.isOpened() && this.hideListBox("api") }, _getBodyOffset: function () { var t = 0, i = 0; return "0px" != e("body").css("border-top-width") && (t = parseInt(e("body").css("border-top-width")), isNaN(t) && (t = 0)), "0px" != e("body").css("border-left-width") && (i = parseInt(e("body").css("border-left-width")), isNaN(i) && (i = 0)), { left: i, top: t } }, showListBox: function (t) { if (!this.listBox.items || 0 != this.listBox.items.length) { if ("search" != t || this.autoComplete || this.remoteAutoComplete || this.autoDropDownHeight && this.container.height(this.listBoxContainer.height() + 25), (this.autoComplete || this.multiSelect && !this.remoteAutoComplete) && "search" != t && (this._updateItemsVisibility(""), this.multiSelect)) for (var i = this.getVisibleItems(), s = 0; s < i.length; s++) if (!i[s].disabled) { this.ensureVisible(s); break } if (this.remoteAutoComplete && this.listBox.clearSelection(), "search" != t && (this._oldvalue = this.listBox.selectedValue), e.jqx.aria(this, "aria-expanded", !0), "auto" == this.dropDownWidth && null != this.width && this.width.indexOf && -1 != this.width.indexOf("%") && this.listBox.host.width() != this.host.width()) { var r = this.host.width(); this.listBoxContainer.jqxListBox({ width: r }), this.container.width(parseInt(r) + 25) } var o, a = this, n = this.listBoxContainer, l = this.listBox, h = (e(window).scrollTop(), e(window).scrollLeft(), parseInt(this._findPos(this.host[0])[1]) + parseInt(this.host.outerHeight()) - 1 + "px"), d = parseInt(Math.round(this.host.coord(!0).left)); o = d + "px"; var c = e.jqx.mobile.isSafariMobileBrowser() || e.jqx.mobile.isWindowsPhone(); this.ishiding = !1, (e.jqx.utilities.hasTransform(this.host) || null != c && c) && (o = e.jqx.mobile.getLeftPos(this.element), h = e.jqx.mobile.getTopPos(this.element) + parseInt(this.host.outerHeight()), "0px" != e("body").css("border-top-width") && (h = parseInt(h) - this._getBodyOffset().top + "px"), "0px" != e("body").css("border-left-width") && (o = parseInt(o) - this._getBodyOffset().left + "px")), this.host.addClass(this.toThemeProperty("jqx-combobox-state-selected")), this.dropdownlistArrowIcon.addClass(this.toThemeProperty("jqx-icon-arrow-down-selected")), this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-combobox-arrow-selected")), this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-fill-state-pressed")), this.host.addClass(this.toThemeProperty("jqx-combobox-state-focus")), this.host.addClass(this.toThemeProperty("jqx-fill-state-focus")), this.dropdownlistContent.addClass(this.toThemeProperty("jqx-combobox-content-focus")), this.container.css("left", o), this.container.css("top", h), l._arrange(); var u = !1; if ("right" == this.dropDownHorizontalAlignment || this.rtl) { var p = this.container.outerWidth(), m = Math.abs(p - this.host.width()); p > this.host.width() ? this.container.css("left", 25 + parseInt(Math.round(d)) - m + "px") : this.container.css("left", 25 + parseInt(Math.round(d)) + m + "px") } if (this.enableBrowserBoundsDetection) { var g = this.testOffset(n, { left: parseInt(this.container.css("left")), top: parseInt(h) }, parseInt(this.host.outerHeight())); parseInt(this.container.css("top")) != g.top ? (u = !0, n.css("top", 23), n.addClass(this.toThemeProperty("jqx-popup-up"))) : n.css("top", 0), this.container.css("top", g.top), this.container.css("top", g.top), parseInt(this.container.css("left")) != g.left && this.container.css("left", g.left) } if ("none" == this.animationType) this.container.css("display", "block"), e.data(document.body, "openedComboJQXListBoxParent", a), e.data(document.body, "openedComboJQXListBox" + a.element.id, n), n.css("margin-top", 0), n.css("opacity", 1); else { this.container.css("display", "block"); var f = n.outerHeight(); n.stop(), "fade" == this.animationType ? (n.css("margin-top", 0), n.css("opacity", 0), n.animate({ opacity: 1 }, this.openDelay, function () { a.isanimating = !1, a.opening = !1, e.data(document.body, "openedComboJQXListBoxParent", a), e.data(document.body, "openedComboJQXListBox" + a.element.id, n) })) : (n.css("opacity", 1), u ? n.css("margin-top", f) : n.css("margin-top", -f), this.isanimating = !0, this.opening = !0, n.animate({ "margin-top": 0 }, this.openDelay, function () { a.isanimating = !1, a.opening = !1, e.data(document.body, "openedComboJQXListBoxParent", a), e.data(document.body, "openedComboJQXListBox" + a.element.id, n) })) } l._renderItems(), u ? (this.host.addClass(this.toThemeProperty("jqx-rc-t-expanded")), n.addClass(this.toThemeProperty("jqx-rc-b-expanded")), this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-rc-t-expanded"))) : (this.host.addClass(this.toThemeProperty("jqx-rc-b-expanded")), n.addClass(this.toThemeProperty("jqx-rc-t-expanded")), this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-rc-b-expanded"))), n.addClass(this.toThemeProperty("jqx-fill-state-focus")), this._raiseEvent("0", l) } }, doMultiSelect: function (t) { this.checkboxes && (this.multiSelect = !1); var i = this; if (!this.multiSelect) { var s = i.dropdownlistContent.find(".jqx-button"), r = "mousedown"; return this.touch && (r = e.jqx.mobile.getTouchEventName("touchstart")), this.removeHandler(s, r), this.removeHandler(s.find(".jqx-icon-close"), r), s.remove(), this.selectedItems = new Array, void (this._selectedItems = new Array) } if (!this.validateSelection || this.validateSelection(this.listBox.selectedValue)) { this.selectedItems; if (this.listBox.selectedValue) { if (-1 === this.selectedItems.indexOf(this.listBox.selectedValue)) { var o = this.getItemByValue(this.listBox.selectedValue); o && o.visible && (this.selectedItems.push(this.listBox.selectedValue), this._selectedItems.push(o), this._raiseEvent("2", { index: o.index, item: o }), this._raiseEvent("4", { index: o.index, item: o })) } this.listBox.selectedIndex = 0 } if (n = this.listBox.items) { for (var a = 0; a < n.length; a++) n[a].disabled = !1, (this.selectedItems.indexOf(n[a].value) >= 0 || this._disabledItems.indexOf(this.value) >= 0) && (n[a].disabled = !0); this.listBox._renderItems(), this.searchString = "", this.input.val(""); var n = "", r = "mousedown", s = i.dropdownlistContent.find(".jqx-button"); this.touch && (r = e.jqx.mobile.getTouchEventName("touchstart")), this.removeHandler(s, r), this.removeHandler(s.find(".jqx-icon-close"), r), s.remove(), i.input.detach(), this.selectedItems.length > 0 ? (i.input.css("width", "25px"), i.input.attr("placeholder", "")) : (i.input.css("width", "100%"), i.input.attr("placeholder", this.placeHolder)), e.each(this.selectedItems, function (t) { var s = i.getItemByValue(this); s && !i.remoteAutoComplete || (s = i._selectedItems[t]); var r = e('<div style="overflow: hidden; float: left;"></div>'); if (r.addClass(i.toThemeProperty("jqx-button")), r.addClass(i.toThemeProperty("jqx-combobox-multi-item")), r.addClass(i.toThemeProperty("jqx-fill-state-normal")), r.addClass(i.toThemeProperty("jqx-rc-all")), s) { var o = s.label; "" == r[0].innerHTML && (r[0].innerHTML = '<a data-value="' + s.value + '" style="float: left;" href="#">' + o + "</a>"), i.rtl && (r[0].innerHTML = '<a data-value="' + s.value + '" style="float: right;" href="#">' + o + "</a>"); var a = i.rtl ? "left" : "right", n = '<div style="position: relative; overflow: hidden; float: ' + a + '; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px; float: none; width: 16px; height: 16px;" class="' + i.toThemeProperty("jqx-icon-close") + '"></div></div>'; if (e.jqx.browser.msie && e.jqx.browser.version < 8 && (n = '<div style="position: relative; overflow: hidden; float: left; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px; float: none; width: 16px; height: 16px;" class="' + i.toThemeProperty("jqx-icon-close") + '"></div></div>'), i.rtl) { n = '<div style="position: relative; overflow: hidden; float: ' + a + '; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-top: -7px; float: none; width: 16px; height: 16px;" class="' + i.toThemeProperty("jqx-icon-close") + '"></div></div>'; e.jqx.browser.msie && e.jqx.browser.version < 8 && (n = '<div style="position: relative; overflow: hidden; float: left; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-top: -7px; float: none; width: 16px; height: 16px;" class="' + i.toThemeProperty("jqx-icon-close") + '"></div></div>') } r[0].innerHTML += n } else "" == r[0].innerHTML && (r[0].innerHTML = '<a href="#"></a>'); i.dropdownlistContent.append(r) }), i.dropdownlistContent.append(i.input), i.input.val(""), !1 !== t && (i.input.focus(), setTimeout(function () { i.input.focus() }, 10)); s = i.dropdownlistContent.find(".jqx-button"); !0 === this.touchMode && (r = "mousedown"), this.addHandler(s, r, function (t) { if (t.target.className.indexOf("jqx-icon-close") >= 0) return !0; if (i.disabled) return !0; var s = e(t.target).attr("data-value"); return i.getItemByValue(s) && (i.listBox.selectedValue = null, i.listBox.clearSelection()), i.listBox.scrollTo(0, 0), i.open(), t.preventDefault && t.preventDefault(), t.stopPropagation && t.stopPropagation(), !1 }), this.addHandler(s.find(".jqx-icon-close"), r, function (t) { if (!i.disabled) { var s = e(t.target).parent().parent().find("a").attr("data-value"), r = i.getItemByValue(s); if (r) { i.listBox.selectedValue = null; var o = i.selectedItems.indexOf(s); if (o >= 0) i.selectedItems.splice(o, 1), i._selectedItems.splice(o, 1), i._raiseEvent("3", { index: r.index, type: "mouse", item: r }), i._raiseEvent("4", { index: r.index, type: "mouse", item: r }), i.doMultiSelect(); else for (var a = 0; a < i.selectedItems.length; a++) if (i.selectedItems[a] == s) { i.selectedItems.splice(a, 1), i._selectedItems.splice(a, 1), i._raiseEvent("3", { index: r.index, type: "mouse", item: r }), i._raiseEvent("4", { index: r.index, type: "mouse", item: r }), i.doMultiSelect(); break } } } }), i.dropdownlistArrow.height(this.host.height()), i._updateInputSelection() } } }, hideListBox: function (t) { var i = this.listBoxContainer, s = this.listBox, r = this.container; if ("none" != this.container[0].style.display) { e.jqx.aria(this, "aria-expanded", !1), "keyboard" != t && "mouse" != t || (this.listBox.searchString = ""), ("keyboard" == t || "mouse" == t && this.multiSelect) && this.doMultiSelect(); var o = this; if (e.data(document.body, "openedComboJQXListBox" + this.element.id, null), "none" == this.animationType) this.opening = !1, this.container.css("display", "none"); else if (!this.ishiding) { var a = i.outerHeight(); i.css("margin-top", 0), i.stop(), this.opening = !1, this.isanimating = !0; var n = -a; parseInt(this.container.coord().top) < parseInt(this.host.coord().top) && (n = a), "fade" == this.animationType ? (i.css({ opacity: 1 }), i.animate({ opacity: 0 }, this.closeDelay, function () { o.isanimating = !1, r.css("display", "none"), o.ishiding = !1 })) : i.animate({ "margin-top": n }, this.closeDelay, function () { o.isanimating = !1, r.css("display", "none"), o.ishiding = !1 }) } this.ishiding = !0, this.host.removeClass(this.toThemeProperty("jqx-combobox-state-selected")), this.dropdownlistArrowIcon.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected")), this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-combobox-arrow-selected")), this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-fill-state-pressed")), this.focused || (this.host.removeClass(this.toThemeProperty("jqx-combobox-state-focus")), this.host.removeClass(this.toThemeProperty("jqx-fill-state-focus")), this.dropdownlistContent.removeClass(this.toThemeProperty("jqx-combobox-content-focus"))), this.host.removeClass(this.toThemeProperty("jqx-rc-b-expanded")), i.removeClass(this.toThemeProperty("jqx-rc-t-expanded")), this.host.removeClass(this.toThemeProperty("jqx-rc-t-expanded")), i.removeClass(this.toThemeProperty("jqx-rc-b-expanded")), i.removeClass(this.toThemeProperty("jqx-fill-state-focus")), this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-rc-t-expanded")), this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-rc-b-expanded")), this._raiseEvent("1", s) } }, closeOpenedListBox: function (t) { var i = t.data.me, s = e(t.target), r = t.data.listbox; if (null == r) return !0; if (!e(t.target).ischildof(t.data.me.host)) { var o = !1; return e.each(s.parents(), function () { if ("undefined" != this.className && this.className.indexOf) { if (-1 != this.className.indexOf("jqx-listbox")) return o = !0, !1; if (-1 != this.className.indexOf("jqx-combobox")) return i.element.id == this.id && (o = !0), !1 } }), null == r || o || i.isOpened() && (i.hideListBox("api"), i.input.blur()), !0 } }, loadFromSelect: function (e) { this.listBox.loadFromSelect(e) }, refresh: function (e) { this._setSize(), this._arrange(), this.listBox && this.renderSelection() }, resize: function () { this._setSize(), this._arrange() }, _arrange: function () { var t = parseInt(this.host.width()), i = parseInt(this.host.height()), s = (this.arrowSize, this.arrowSize), r = 1; this.showArrow || (s = 0, 0, this.dropdownlistArrow.hide(), r = 0, this.host.css("cursor", "arrow")); var o = t - s - 1 * r; o > 0 && (this.dropdownlistContent[0].style.width = o + "px"), this.rtl && (this.dropdownlistContent[0].style.width = -1 + o + "px"), this.dropdownlistContent[0].style.height = i + "px", this.dropdownlistContent[0].style.left = "0px", this.dropdownlistContent[0].style.top = "0px", this.dropdownlistArrow[0].style.width = s + 1 + "px", this.dropdownlistArrow[0].style.height = i + "px", this.dropdownlistArrow[0].style.left = 1 + o + "px", this.input[0].style.width = "100%"; var a = this.input.height(); 0 == a && (a = parseInt(this.input.css("font-size")) + 3), -1 == this.input[0].className.indexOf("jqx-rc-all") && this.input.addClass(this.toThemeProperty("jqx-rc-all")); var n = parseInt(i) / 2 - parseInt(a) / 2; if (n > 0 && (this.input[0].style.marginTop = parseInt(n) + "px"), this.rtl && (this.dropdownlistArrow.css("left", "0px"), this.dropdownlistContent.css("left", this.dropdownlistArrow.width()), e.jqx.browser.msie && e.jqx.browser.version <= 8 && this.dropdownlistContent.css("left", 1 + this.dropdownlistArrow.width())), this.multiSelect) { this.input.css("float", "left"), this.dropdownlistWrapper.parent().css("height", "auto"), this.dropdownlistContent.css("height", "auto"), this.dropdownlistWrapper.css("height", "auto"), this.dropdownlistContent.css("position", "relative"), this.dropdownlistContent.css("cursor", "text"), this.host.css("height", "auto"), this.host.css("min-height", this.height), this.dropdownlistContent.css("min-height", this.height); i = parseInt(this.host.height()); this.dropdownlistArrow.height(i); var l = parseInt(this.host.css("min-height")); (n = parseInt(l) / 2 - parseInt(a) / 2) > 0 && this.input.css("margin-top", n) } }, destroy: function () { this.source && this.source.unbindBindingUpdate && (this.source.unbindBindingUpdate(this.element.id), this.source.unbindBindingUpdate(this.listBoxContainer[0].id), this.source.unbindDownloadComplete(this.element.id), this.source.unbindDownloadComplete(this.listBoxContainer[0].id)), e.jqx.utilities.resize(this.host, null, !0), this.removeHandler(this.listBoxContainer, "select"), this.removeHandler(this.listBoxContainer, "unselect"), this.removeHandler(this.listBoxContainer, "change"), this.removeHandler(this.listBoxContainer, "bindingComplete"), this.removeHandler(this.dropdownlistWrapper, "selectstart"), this.removeHandler(this.dropdownlistWrapper, "mousedown"), this.removeHandler(this.host, "keydown"), this.removeHandler(this.listBoxContainer, "select"), this.removeHandler(this.listBox.content, "click"), this.removeHandlers(), this.removeHandler(this.input, "keyup.textchange"), this.listBoxContainer.jqxListBox("destroy"), this.listBoxContainer.remove(), this.host.removeClass(), this.removeHandler(e(document), "mousedown." + this.id, this.closeOpenedListBox), this.touch && this.removeHandler(e(document), e.jqx.mobile.getTouchEventName("touchstart") + "." + this.id), this.cinput.remove(), delete this.cinput, this.dropdownlistArrow.remove(), delete this.dropdownlistArrow, this.dropdownlistArrowIcon.remove(), delete this.dropdownlistArrowIcon, delete this.dropdownlistWrapper, delete this.listBoxContainer, delete this.input, delete this.dropdownlistContent, delete this.comboStructure, this.container.remove(), delete this.listBox, delete this.container; var t = e.data(this.element, "jqxComboBox"); t && delete t.instance, this.host.removeData(), this.host.remove(), delete this.host, delete this.set, delete this.get, delete this.call, delete this.element }, _raiseEvent: function (e, t) { void 0 == t && (t = { owner: null }); var i = this.events[e]; args = t, args.owner = this; var s = new jQuery.Event(i); return s.owner = this, 2 != e && 3 != e && 4 != e && 5 != e || (s.args = t), this.host.trigger(s) }, propertyChangedHandler: function (t, i, s, r) { if (void 0 != t.isInitialized && 0 != t.isInitialized) { if ("itemHeight" == i && t.listBoxContainer.jqxListBox({ itemHeight: r }), "renderSelectedItem" == i && t.renderSelection("mouse"), "renderer" == i && t.listBoxContainer.jqxListBox({ renderer: r }), "enableSelection" == i && t.listBoxContainer.jqxListBox({ enableSelection: r }), "enableHover" == i && t.listBoxContainer.jqxListBox({ enableHover: r }), "touchMode" === i && (t.listBoxContainer.jqxListBox({ touchMode: r }), t.touch = e.jqx.mobile.isTouchDevice(), !0 === t.touchMode && (t.touch = !0), t._updateHandlers()), "multiSelect" == i && (r ? t.doMultiSelect(!1) : (t.doMultiSelect(!1), t.dropdownlistWrapper.parent().css("height", "100%"), t.dropdownlistContent.css("height", "100"), t.dropdownlistWrapper.css("height", "100"), t.dropdownlistContent.css("position", "relative"), t.host.css("min-height", null), t._setSize(), t._arrange())), "showArrow" == i && (t._arrange(), t.multiSelect && t.doMultiSelect(!1)), "popupZIndex" == i && t.listBoxContainer.css({ zIndex: t.popupZIndex }), "promptText" == i && (t.placeHolder = r), "autoOpen" == i && t._updateHandlers(), "renderer" == i && (t.listBox.renderer = t.renderer), "itemHeight" == i && (t.listBox.itemHeight = r), "source" == i && (t.input.val(""), t.listBoxContainer.jqxListBox({ source: t.source }), t.renderSelection("mouse"), null == t.source && t.clearSelection(), t.multiSelect && (t.selectedItems = new Array, t._selectedItems = new Array, t.doMultiSelect(!1))), "rtl" == i && (r ? (t.dropdownlistArrow.css("float", "left"), t.dropdownlistContent.css("float", "right")) : (t.dropdownlistArrow.css("float", "right"), t.dropdownlistContent.css("float", "left")), t.listBoxContainer.jqxListBox({ rtl: t.rtl })), "displayMember" != i && "valueMember" != i || (t.listBoxContainer.jqxListBox({ displayMember: t.displayMember, valueMember: t.valueMember }), t.renderSelection("mouse")), "autoDropDownHeight" == i && (t.listBoxContainer.jqxListBox({ autoHeight: t.autoDropDownHeight }), t.autoDropDownHeight ? t.container.height(t.listBoxContainer.height() + 25) : (t.listBoxContainer.jqxListBox({ height: t.dropDownHeight }), t.container.height(parseInt(t.dropDownHeight) + 25)), t.listBox._arrange(), t.listBox._updatescrollbars()), "dropDownHeight" == i && (t.autoDropDownHeight || (t.listBoxContainer.jqxListBox({ height: t.dropDownHeight }), t.container.height(parseInt(t.dropDownHeight) + 25))), "dropDownWidth" == i || "scrollBarSize" == i) { o = t.width; "auto" != t.dropDownWidth && (o = t.dropDownWidth), t.listBoxContainer.jqxListBox({ width: o, scrollBarSize: t.scrollBarSize }), t.container.width(parseInt(o) + 25) } if ("autoComplete" == i && t._resetautocomplete(), "checkboxes" == i && (t.listBoxContainer.jqxListBox({ checkboxes: t.checkboxes }), t.checkboxes ? (t.input.attr("readonly", !0), e.jqx.aria(t, "aria-readonly", !0)) : e.jqx.aria(t, "aria-readonly", !1)), "theme" == i && null != r && (t.listBoxContainer.jqxListBox({ theme: r }), t.listBoxContainer.addClass(t.toThemeProperty("jqx-popup")), e.jqx.browser.msie && t.listBoxContainer.addClass(t.toThemeProperty("jqx-noshadow")), t.dropdownlistContent.removeClass(), t.dropdownlistContent.addClass(t.toThemeProperty("jqx-combobox-content")), t.dropdownlistContent.addClass(t.toThemeProperty("jqx-widget-content")), t.input.removeClass(), t.input.addClass(t.toThemeProperty("jqx-combobox-input")), t.input.addClass(this.toThemeProperty("jqx-widget-content")), t.host.removeClass(), t.host.addClass(t.toThemeProperty("jqx-combobox-state-normal")), t.host.addClass(t.toThemeProperty("jqx-rc-all")), t.host.addClass(t.toThemeProperty("jqx-widget")), t.host.addClass(t.toThemeProperty("jqx-widget-content")), t.dropdownlistArrow.removeClass(), t.dropdownlistArrowIcon.addClass(t.toThemeProperty("jqx-icon-arrow-down")), t.dropdownlistArrow.addClass(t.toThemeProperty("jqx-combobox-arrow-normal")), t.dropdownlistArrow.addClass(t.toThemeProperty("jqx-fill-state-normal"))), "rtl" == i && (t.render(), t.refresh()), "width" == i || "height" == i) { if (t._setSize(), "width" == i && "auto" == t.dropDownWidth) { var o = t.host.width(); t.listBoxContainer.jqxListBox({ width: o }), t.container.width(parseInt(o) + 25) } t._arrange() } "selectedIndex" == i && (t.listBox.selectIndex(r), t.renderSelection("mouse")) } } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxDropDownList", "", {}), e.extend(e.jqx._jqxDropDownList.prototype, { defineInstance: function () { this.disabled = !1, this.width = null, this.height = null, this.items = new Array, this.selectedIndex = -1, this.source = null, this.scrollBarSize = 15, this.arrowSize = 19, this.enableHover = !0, this.enableSelection = !0, this.visualItems = new Array, this.groups = new Array, this.equalItemsWidth = !0, this.itemHeight = -1, this.visibleItems = new Array, this.emptyGroupText = "Group", this.checkboxes = !1, void 0 == this.openDelay && (this.openDelay = 250), void 0 == this.closeDelay && (this.closeDelay = 300), this.animationType = "default", this.autoOpen = !1, this.dropDownWidth = "auto", this.dropDownHeight = "200px", this.autoDropDownHeight = !1, this.keyboardSelection = !0, this.enableBrowserBoundsDetection = !1, this.dropDownHorizontalAlignment = "left", this.displayMember = "", this.valueMember = "", this.searchMode = "startswithignorecase", this.incrementalSearch = !0, this.incrementalSearchDelay = 700, this.renderer = null, this.placeHolder = "Airline Filteration", this.promptText = "Airline Filteration", this.emptyString = "", this.rtl = !1, this.selectionRenderer = null, this.listBox = null, this.popupZIndex = 9999999999999, this.renderMode = "default", this.touchMode = "auto", this._checkForHiddenParent = !0, this.autoBind = !0, this.focusable = !0, this.aria = { "aria-disabled": { name: "disabled", type: "boolean" } }, this.events = ["open", "close", "select", "unselect", "change", "checkChange", "bindingComplete"] }, createInstance: function (e) { this.render() }, render: function () { this.width || (this.width = 200), this.height || (this.height = 25), this.element.innerHTML = "", this.isanimating = !1, this.id = this.element.id || e.jqx.utilities.createId(), this.host.attr("role", "combobox"), e.jqx.aria(this, "aria-autocomplete", "both"), e.jqx.aria(this, "aria-readonly", !1); var t = e("<div style='background-color: transparent; -webkit-appearance: none; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; border: 0px; position: relative;'><div id='dropdownlistWrapper' style='outline: none; background-color: transparent; border: none; float: left; width:100%; height: 100%; position: relative;'><div id='dropdownlistContent' unselectable='on' style='outline: none; background-color: transparent; border: none; float: left; position: relative;'/><div id='dropdownlistArrow' unselectable='on' style='background-color: transparent; border: none; float: right; position: relative;'><div unselectable='on'></div></div></div></div>"); if (this._addInput(), null == e.jqx._jqxListBox || void 0 == e.jqx._jqxListBox) throw new Error("jqxDropDownList: Missing reference to jqxlistbox.js."); this.host.attr("tabindex") ? (t.attr("tabindex", this.host.attr("tabindex")), this.host.removeAttr("tabindex")) : t.attr("tabindex", 0); n = this; this.touch = e.jqx.mobile.isTouchDevice(), this.comboStructure = t, this.host.append(t), this.dropdownlistWrapper = this.host.find("#dropdownlistWrapper"), this.dropdownlistArrow = this.host.find("#dropdownlistArrow"), this.arrow = e(this.dropdownlistArrow.children()[0]), this.dropdownlistContent = this.host.find("#dropdownlistContent"), this.dropdownlistContent.addClass(this.toThemeProperty("jqx-dropdownlist-content")), this.dropdownlistWrapper.addClass(this.toThemeProperty("jqx-disableselect")), this.rtl && (this.dropdownlistContent.addClass(this.toThemeProperty("jqx-rtl")), this.dropdownlistContent.addClass(this.toThemeProperty("jqx-dropdownlist-content-rtl"))), this.addHandler(this.dropdownlistWrapper, "selectstart", function () { return !1 }), this.dropdownlistWrapper[0].id = "dropdownlistWrapper" + this.element.id, this.dropdownlistArrow[0].id = "dropdownlistArrow" + this.element.id, this.dropdownlistContent[0].id = "dropdownlistContent" + this.element.id, "Airline Filteration" != this.promptText && (this.placeHolder = this.promptText); var i = this.toThemeProperty("jqx-widget") + " " + this.toThemeProperty("jqx-dropdownlist-state-normal") + " " + this.toThemeProperty("jqx-rc-all") + " " + this.toThemeProperty("jqx-fill-state-normal"); this.element.className += " " + i, this._firstDiv = this.host.find("div:first"); try { var s = "listBox" + this.id, r = e(e.find("#" + s)); r.length > 0 && r.remove(), e.jqx.aria(this, "aria-owns", s), e.jqx.aria(this, "aria-haspopup", !0); var o = e("<div style='overflow: hidden; background-color: transparent; border: none; position: absolute;' id='listBox" + this.id + "'><div id='innerListBox" + this.id + "'></div></div>"); o.hide(), o.appendTo(document.body), this.container = o, this.listBoxContainer = e(e.find("#innerListBox" + this.id)); var a = this.width; "auto" != this.dropDownWidth && (a = this.dropDownWidth), null == a && 0 == (a = this.host.width()) && (a = this.dropDownWidth), null == this.dropDownHeight && (this.dropDownHeight = 200); var n = this; this.container.width(parseInt(a) + 25), this.container.height(parseInt(this.dropDownHeight) + 25), this.addHandler(this.listBoxContainer, "bindingComplete", function (e) { n._raiseEvent("6") }), this.listBoxContainer.jqxListBox({ autoBind: this.autoBind, _checkForHiddenParent: !1, focusable: this.focusable, touchMode: this.touchMode, checkboxes: this.checkboxes, rtl: this.rtl, emptyString: this.emptyString, itemHeight: this.itemHeight, width: a, searchMode: this.searchMode, incrementalSearch: this.incrementalSearch, incrementalSearchDelay: this.incrementalSearchDelay, displayMember: this.displayMember, valueMember: this.valueMember, height: this.dropDownHeight, autoHeight: this.autoDropDownHeight, scrollBarSize: this.scrollBarSize, selectedIndex: this.selectedIndex, source: this.source, theme: this.theme, rendered: function () { n.selectedIndex != n.listBoxContainer.jqxListBox("selectedIndex") ? (n.listBox = e.data(n.listBoxContainer[0], "jqxListBox").instance, n.listBoxContainer.jqxListBox({ selectedIndex: n.selectedIndex }), n.renderSelection("mouse")) : n.renderSelection("mouse") }, renderer: this.renderer }), this.listBoxContainer.css({ position: "absolute", zIndex: this.popupZIndex, top: 0, left: 0 }), this.listBox = e.data(this.listBoxContainer[0], "jqxListBox").instance, this.listBox.enableSelection = this.enableSelection, this.listBox.enableHover = this.enableHover, this.listBox.equalItemsWidth = this.equalItemsWidth, this.listBox.selectIndex(this.selectedIndex), this.listBox._arrange(), this.listBoxContainer.addClass(this.toThemeProperty("jqx-popup")), e.jqx.browser.msie && this.listBoxContainer.addClass(this.toThemeProperty("jqx-noshadow")), this.addHandler(this.listBoxContainer, "unselect", function (e) { n._raiseEvent("3", { index: e.args.index, type: e.args.type, item: e.args.item }) }), this.addHandler(this.listBoxContainer, "change", function (e) { "keyboard" != e.args.type ? n._raiseEvent("4", { index: e.args.index, type: e.args.type, item: e.args.item }) : "keyboard" == e.args.type && (n.isOpened() || n._raiseEvent("4", { index: n.selectedIndex, type: "keyboard", item: n.getItem(n.selectedIndex) })) }), "none" == this.animationType ? this.container.css("display", "none") : this.container.hide() } catch (e) { } var l = this; if (this.propertyChangeMap.disabled = function (t, i, s, r) { r ? (t.host.addClass(l.toThemeProperty("jqx-dropdownlist-state-disabled")), t.host.addClass(l.toThemeProperty("jqx-fill-state-disabled")), t.dropdownlistContent.addClass(l.toThemeProperty("jqx-dropdownlist-content-disabled"))) : (t.host.removeClass(l.toThemeProperty("jqx-dropdownlist-state-disabled")), t.host.removeClass(l.toThemeProperty("jqx-fill-state-disabled")), t.dropdownlistContent.removeClass(l.toThemeProperty("jqx-dropdownlist-content-disabled"))), e.jqx.aria(t, "aria-disabled", t.disabled) }, this.disabled && (this.host.addClass(this.toThemeProperty("jqx-dropdownlist-state-disabled")), this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")), this.dropdownlistContent.addClass(this.toThemeProperty("jqx-dropdownlist-content-disabled"))), this.arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down")), this.arrow.addClass(this.toThemeProperty("jqx-icon")), "simple" === this.renderMode && (this.arrow.remove(), this.host.removeClass(this.toThemeProperty("jqx-fill-state-normal")), this.host.removeClass(this.toThemeProperty("jqx-rc-all"))), this._updateHandlers(), this._setSize(), this._arrange(), this.listBox && this.renderSelection(), e.jqx.browser.msie && e.jqx.browser.version < 8 && this.host.parents(".jqx-window").length > 0) { var h = this.host.parents(".jqx-window").css("z-index"); o.css("z-index", h + 10), this.listBoxContainer.css("z-index", h + 10) } }, resize: function (e, t) { this.width = e, this.height = t, this._setSize(), this._arrange() }, val: function (e) { if (!this.dropdownlistContent) return ""; if (this.input && 0 == arguments.length) return this.input.val(); var t = this.getItemByValue(e); return null != t && this.selectItem(t), this.input ? this.input.val() : void 0 }, focus: function () { try { var e = this, t = function () { e.host.focus(), e._firstDiv && e._firstDiv.focus() }; t(), setTimeout(function () { t() }, 10) } catch (e) { } }, _addInput: function () { var t = this.host.attr("name"); this.input = e("<input type='hidden'/>"), this.host.append(this.input), t && this.input.attr("name", t) }, getItems: function () { return this.listBox ? this.listBox.items : new Array }, getVisibleItems: function () { return this.listBox.getVisibleItems() }, _setSize: function () { null != this.width && -1 != this.width.toString().indexOf("px") ? this.host.width(this.width) : void 0 == this.width || isNaN(this.width) || this.host.width(this.width), null != this.height && -1 != this.height.toString().indexOf("px") ? this.host.height(this.height) : void 0 == this.height || isNaN(this.height) || this.host.height(this.height); var t = !1; null != this.width && -1 != this.width.toString().indexOf("%") && (t = !0, this.host.width(this.width)), null != this.height && -1 != this.height.toString().indexOf("%") && (t = !0, this.host.height(this.height)); var i = this, s = function () { if (i._arrange(), "auto" == i.dropDownWidth) { var e = i.host.width(); i.listBoxContainer.jqxListBox({ width: e }), i.container.width(parseInt(e) + 25) } }; if (t) { var r = this.host.width(); "auto" != this.dropDownWidth && (r = this.dropDownWidth), this.listBoxContainer.jqxListBox({ width: r }), this.container.width(parseInt(r) + 25) } e.jqx.utilities.resize(this.host, function () { s() }, !1, this._checkForHiddenParent) }, isOpened: function () { var t = this, i = e.data(document.body, "openedJQXListBox" + this.id); return null != i && i == t.listBoxContainer }, _updateHandlers: function () { var t = this, i = !1; this.removeHandlers(), this.touch || (this.addHandler(this.host, "mouseenter", function () { !t.disabled && t.enableHover && "simple" !== t.renderMode && (i = !0, t.host.addClass(t.toThemeProperty("jqx-dropdownlist-state-hover")), t.arrow.addClass(t.toThemeProperty("jqx-icon-arrow-down-hover")), t.host.addClass(t.toThemeProperty("jqx-fill-state-hover"))) }), this.addHandler(this.host, "mouseleave", function () { !t.disabled && t.enableHover && "simple" !== t.renderMode && (t.host.removeClass(t.toThemeProperty("jqx-dropdownlist-state-hover")), t.host.removeClass(t.toThemeProperty("jqx-fill-state-hover")), t.arrow.removeClass(t.toThemeProperty("jqx-icon-arrow-down-hover")), i = !1) })), this.host.parents() && this.addHandler(this.host.parents(), "scroll.dropdownlist" + this.element.id, function (e) { t.isOpened() && t.close() }); var s = "mousedown"; this.touch && (s = e.jqx.mobile.getTouchEventName("touchstart")), this.addHandler(this.dropdownlistWrapper, s, function (e) { if (!t.disabled) { var i = "block" == t.container.css("display"); if (!t.isanimating) { if (i) return t.hideListBox(), !1; t.showListBox(), t.focusable ? t.focus() : e.preventDefault && e.preventDefault() } } }), t.autoOpen && (this.addHandler(this.host, "mouseenter", function () { !t.isOpened() && t.autoOpen && (t.open(), t.host.focus()) }), e(document).on("mousemove." + t.id, function (e) { if (t.isOpened() && t.autoOpen) { var i = t.host.coord(), s = i.top, r = i.left, o = t.container.coord(), a = o.left, n = o.top; canClose = !0, e.pageY >= s && e.pageY <= s + t.host.height() && e.pageX >= r && e.pageX < r + t.host.width() && (canClose = !1), e.pageY >= n && e.pageY <= n + t.container.height() && e.pageX >= a && e.pageX < a + t.container.width() && (canClose = !1), canClose && t.close() } })), this.touch ? this.addHandler(e(document), e.jqx.mobile.getTouchEventName("touchstart") + "." + this.id, t.closeOpenedListBox, { me: this, listbox: this.listBox, id: this.id }) : this.addHandler(e(document), "mousedown." + this.id, t.closeOpenedListBox, { me: this, listbox: this.listBox, id: this.id }), this.addHandler(this.host, "keydown", function (e) { var i = "block" == t.container.css("display"); if ("none" == t.host.css("display")) return !0; if (("13" == e.keyCode || "9" == e.keyCode) && !t.isanimating) return i && (t.renderSelection(), "13" == e.keyCode && t.focusable && t._firstDiv.focus(), t.hideListBox(), t.keyboardSelection || t._raiseEvent("2", { index: t.selectedIndex, type: "keyboard", item: t.getItem(t.selectedIndex) }), "13" == e.keyCode && t._raiseEvent("4", { index: t.selectedIndex, type: "keyboard", item: t.getItem(t.selectedIndex) })), !i || "9" == e.keyCode; if (115 == e.keyCode) return t.isanimating || (t.isOpened() ? t.isOpened() && t.hideListBox() : t.showListBox()), !1; if (e.altKey && "block" == t.host.css("display")) if (38 == e.keyCode) { if (t.isOpened()) return t.hideListBox(), !0 } else if (40 == e.keyCode && !t.isOpened()) return t.showListBox(), !0; return "27" != e.keyCode || t.ishiding ? t.disabled ? void 0 : t.listBox._handleKeyDown(e) : (t.isOpened() && (t.hideListBox(), void 0 != t.tempSelectedIndex && t.selectIndex(t.tempSelectedIndex)), !0) }), this.addHandler(this.listBoxContainer, "checkChange", function (e) { t.renderSelection(), t._updateInputSelection(), t._raiseEvent(5, { label: e.args.label, value: e.args.value, checked: e.args.checked, item: e.args.item }) }), this.addHandler(this.listBoxContainer, "select", function (e) { t.disabled || ("keyboard" != e.args.type || t.isOpened() || t.renderSelection(), ("keyboard" != e.args.type || t.keyboardSelection) && (t.renderSelection(), t._raiseEvent("2", { index: e.args.index, type: e.args.type, item: e.args.item, originalEvent: e.args.originalEvent }), "mouse" == e.args.type && (t.checkboxes || (t.hideListBox(), t._firstDiv && t.focusable && t._firstDiv.focus())))) }), this.listBox && this.listBox.content && this.addHandler(this.listBox.content, "click", function (e) { if (!t.disabled) { if (t.listBox.itemswrapper && e.target === t.listBox.itemswrapper[0]) return !0; t.renderSelection("mouse"), t.touch || t.ishiding || t.checkboxes || (t.hideListBox(), t._firstDiv && t.focusable && t._firstDiv.focus()), t.keyboardSelection || (void 0 == t._oldSelectedInd && (t._oldSelectedIndx = t.selectedIndex), t.selectedIndex != t._oldSelectedIndx && (t._raiseEvent("2", { index: t.selectedIndex, type: "keyboard", item: t.getItem(t.selectedIndex) }), t._oldSelectedIndx = t.selectedIndex)) } }), this.addHandler(this.host, "focus", function (e) { "simple" !== t.renderMode && (t.host.addClass(t.toThemeProperty("jqx-dropdownlist-state-focus")), t.host.addClass(t.toThemeProperty("jqx-fill-state-focus"))) }), this.addHandler(this.host, "blur", function () { "simple" !== t.renderMode && (t.host.removeClass(t.toThemeProperty("jqx-dropdownlist-state-focus")), t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus"))) }), this.addHandler(this._firstDiv, "focus", function (e) { "simple" !== t.renderMode && (t.host.addClass(t.toThemeProperty("jqx-dropdownlist-state-focus")), t.host.addClass(t.toThemeProperty("jqx-fill-state-focus"))) }), this.addHandler(this._firstDiv, "blur", function () { "simple" !== t.renderMode && (t.host.removeClass(t.toThemeProperty("jqx-dropdownlist-state-focus")), t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus"))) }) }, removeHandlers: function () { var t = this, i = "mousedown"; this.touch && (i = e.jqx.mobile.getTouchEventName("touchstart")), this.removeHandler(this.dropdownlistWrapper, i), this.listBox && this.listBox.content && this.removeHandler(this.listBox.content, "click"), this.removeHandler(this.host, "loadContent"), this.removeHandler(this.listBoxContainer, "checkChange"), this.removeHandler(this.host, "keydown"), this.removeHandler(this.host, "focus"), this.removeHandler(this.host, "blur"), this.removeHandler(this._firstDiv, "focus"), this.removeHandler(this._firstDiv, "blur"), this.removeHandler(this.host, "mouseenter"), this.removeHandler(this.host, "mouseleave"), this.removeHandler(e(document), "mousemove." + t.id) }, getItem: function (e) { return this.listBox.getItem(e) }, getItemByValue: function (e) { return this.listBox.getItemByValue(e) }, selectItem: function (e) { void 0 != this.listBox && (this.listBox.selectItem(e), this.selectedIndex = this.listBox.selectedIndex, this.renderSelection("mouse")) }, unselectItem: function (e) { void 0 != this.listBox && (this.listBox.unselectItem(e), this.renderSelection("mouse")) }, checkItem: function (e) { void 0 != this.listBox && this.listBox.checkItem(e) }, uncheckItem: function (e) { void 0 != this.listBox && this.listBox.uncheckItem(e) }, indeteterminateItem: function (e) { void 0 != this.listBox && this.listBox.indeteterminateItem(e) }, renderSelection: function () { if (null != this.listBox) { this.height && -1 != this.height.toString().indexOf("%") && this._arrange(); var t = this.listBox.visibleItems[this.listBox.selectedIndex]; if (this.checkboxes) { var i = this.getCheckedItems(); t = null != i && i.length > 0 ? i[0] : null } if (null == t) { (a = e('<span unselectable="on" style="color: inherit; border: none; background-color: transparent;"></span>')).appendTo(e(document.body)), a.addClass(this.toThemeProperty("jqx-widget")), a.addClass(this.toThemeProperty("jqx-listitem-state-normal")), a.addClass(this.toThemeProperty("jqx-item")), e.jqx.utilities.html(a, this.placeHolder); var s = this.dropdownlistContent.css("padding-top"), r = this.dropdownlistContent.css("padding-bottom"); a.css("padding-top", s), a.css("padding-bottom", r); var o = a.outerHeight(); a.remove(), a.removeClass(), e.jqx.utilities.html(this.dropdownlistContent, a); u = this.host.height(); return null != this.height && void 0 != this.height && -1 === this.height.toString().indexOf("%") && (u = parseInt(this.height)), (p = parseInt((parseInt(u) - parseInt(o)) / 2)) > 0 && (this.dropdownlistContent.css("margin-top", p + "px"), this.dropdownlistContent.css("margin-bottom", p + "px")), this.selectionRenderer && (e.jqx.utilities.html(this.dropdownlistContent, this.selectionRenderer(a, -1, "", "")), this.dropdownlistContent.css("margin-top", "0px"), this.dropdownlistContent.css("margin-bottom", "0px"), this._updateInputSelection()), this.selectedIndex = this.listBox.selectedIndex, "auto" === this.width && this._arrange(), void (this.focusable && this.isOpened() && this.focus()) } this.selectedIndex = this.listBox.selectedIndex; var a = e('<span unselectable="on" style="color: inherit; border: none; background-color: transparent;"></span>'); a.appendTo(e(document.body)), a.addClass(this.toThemeProperty("jqx-widget")), a.addClass(this.toThemeProperty("jqx-listitem-state-normal")), a.addClass(this.toThemeProperty("jqx-item")); var n = !1; try { void 0 != t.html && null != t.html && t.html.toString().length > 0 ? e.jqx.utilities.html(a, t.html) : void 0 != t.label && null != t.label && t.label.toString().length > 0 ? e.jqx.utilities.html(a, t.label) : null === t.label || "" === t.label ? (n = !0, e.jqx.utilities.html(a, "")) : void 0 != t.value && null != t.value && t.value.toString().length > 0 ? e.jqx.utilities.html(a, t.value) : void 0 != t.title && null != t.title && t.title.toString().length > 0 ? e.jqx.utilities.html(a, t.title) : "" != t.label && null != t.label || (n = !0, e.jqx.utilities.html(a, "")) } catch (e) { } var s = this.dropdownlistContent.css("padding-top"), r = this.dropdownlistContent.css("padding-bottom"); a.css("padding-top", s), a.css("padding-bottom", r), 0 === (o = a.outerHeight()) && (o = 16), "" != t.label && null != t.label || !n || e.jqx.utilities.html(a, ""); var l = this.width && this.width.toString().indexOf("%") <= 0; if (a.remove(), a.removeClass(), this.selectionRenderer) e.jqx.utilities.html(this.dropdownlistContent, this.selectionRenderer(a, t.index, t.label, t.value)), this.focusable && this.isOpened() && this.focus(); else if (this.checkboxes) { for (var h = this.getCheckedItems(), d = "", c = 0; c < h.length; c++) c == h.length - 1 ? d += h[c].label : d += h[c].label + ","; a.text(d), l && a.css("max-width", this.host.width() - 30), a.css("overflow", "hidden"), a.css("display", "block"), this.rtl || l && a.css("width", this.host.width() - 30), a.css("text-overflow", "ellipsis"), a.css("padding-bottom", 1 + parseInt(r)), this.dropdownlistContent.html(a), this.focusable && this.isOpened() && this.focus() } else this.width && "auto" !== this.width && (l && (this.rtl || a.css("max-width", this.host.width() - this.arrowSize - 3)), a.css("overflow", "hidden"), a.css("display", "block"), a.css("padding-bottom", 1 + parseInt(r)), this.rtl || l && a.css("width", this.host.width() - this.arrowSize - 3), a.css("text-overflow", "ellipsis")), this.dropdownlistContent.html(a), this.focusable && this.isOpened() && this.focus(); var u = this.host.height(); null != this.height && void 0 != this.height && -1 === this.height.toString().indexOf("%") && (u = parseInt(this.height)); var p = parseInt((parseInt(u) - parseInt(o)) / 2); p > 0 && (this.dropdownlistContent.css("margin-top", p + "px"), this.dropdownlistContent.css("margin-bottom", p + "px")), this.selectionRenderer && (this.dropdownlistContent.css("margin-top", "0px"), this.dropdownlistContent.css("margin-bottom", "0px")), this.dropdownlistContent && this.input && this._updateInputSelection(), this.listBox && this.listBox._activeElement && e.jqx.aria(this, "aria-activedescendant", this.listBox._activeElement.id), "auto" === this.width && this._arrange() } }, _updateInputSelection: function () { if (this.input) { if (-1 == this.selectedIndex) this.input.val(""); else { var e = this.getSelectedItem(); null != e ? this.input.val(e.value) : this.input.val(this.dropdownlistContent.text()) } if (this.checkboxes) { var t = this.getCheckedItems(), i = ""; if (null != t) for (var s = 0; s < t.length; s++) { var r = t[s].value; void 0 != r && (s == t.length - 1 ? i += r : i += r + ",") } this.input.val(i) } } }, setContent: function (t) { e.jqx.utilities.html(this.dropdownlistContent, t), this._updateInputSelection() }, dataBind: function () { this.listBoxContainer.jqxListBox({ source: this.source }), this.renderSelection("mouse"), null == this.source && this.clearSelection() }, clear: function () { this.listBoxContainer.jqxListBox({ source: null }), this.clearSelection() }, clearSelection: function (t) { this.selectedIndex = -1, this._updateInputSelection(), this.listBox.clearSelection(), this.renderSelection(), this.selectionRenderer || e.jqx.utilities.html(this.dropdownlistContent, this.placeHolder) }, unselectIndex: function (e, t) { isNaN(e) || (this.listBox.unselectIndex(e, t), this.renderSelection()) }, selectIndex: function (e, t, i, s) { this.listBox.selectIndex(e, t, i, s, "api") }, getSelectedIndex: function () { return this.selectedIndex }, getSelectedItem: function () { return this.listBox.getVisibleItem(this.selectedIndex) }, getCheckedItems: function () { return this.listBox.getCheckedItems() }, checkIndex: function (e) { this.listBox.checkIndex(e) }, uncheckIndex: function (e) { this.listBox.uncheckIndex(e) }, indeterminateIndex: function (e) { this.listBox.indeterminateIndex(e) }, checkAll: function () { this.listBox.checkAll(), this.renderSelection("mouse") }, uncheckAll: function () { this.listBox.uncheckAll(), this.renderSelection("mouse") }, addItem: function (e) { return this.listBox.addItem(e) }, insertAt: function (e, t) { return null != e && this.listBox.insertAt(e, t) }, removeAt: function (e) { var t = this.listBox.removeAt(e); return this.renderSelection("mouse"), t }, removeItem: function (e) { var t = this.listBox.removeItem(e); return this.renderSelection("mouse"), t }, updateItem: function (e, t) { var i = this.listBox.updateItem(e, t); return this.renderSelection("mouse"), i }, updateAt: function (e, t) { var i = this.listBox.updateAt(e, t); return this.renderSelection("mouse"), i }, ensureVisible: function (e) { return this.listBox.ensureVisible(e) }, disableAt: function (e) { return this.listBox.disableAt(e) }, enableAt: function (e) { return this.listBox.enableAt(e) }, disableItem: function (e) { return this.listBox.disableItem(e) }, enableItem: function (e) { return this.listBox.enableItem(e) }, _findPos: function (t) { for (; t && ("hidden" == t.type || 1 != t.nodeType || e.expr.filters.hidden(t)) ;) t = t.nextSibling; var i = e(t).coord(!0); return [i.left, i.top] }, testOffset: function (t, i, s) { var r = t.outerWidth(), o = t.outerHeight(), a = e(window).width() + e(window).scrollLeft(), n = e(window).height() + e(window).scrollTop(); if (i.left + r > a && r > this.host.width()) { var l = this.host.coord().left, h = r - this.host.width(); i.left = l - h + 2 } return i.left < 0 && (i.left = parseInt(this.host.coord().left) + "px"), i.top -= Math.min(i.top, i.top + o > n && n > o ? Math.abs(o + s + 22) : 0), i }, open: function () { this.showListBox() }, close: function () { this.hideListBox() }, _getBodyOffset: function () { var t = 0, i = 0; return "0px" != e("body").css("border-top-width") && (t = parseInt(e("body").css("border-top-width")), isNaN(t) && (t = 0)), "0px" != e("body").css("border-left-width") && (i = parseInt(e("body").css("border-left-width")), isNaN(i) && (i = 0)), { left: i, top: t } }, showListBox: function () { if (e.jqx.aria(this, "aria-expanded", !0), "auto" == this.dropDownWidth && null != this.width && this.width.indexOf && (-1 != this.width.indexOf("%") || -1 != this.width.indexOf("auto")) && this.listBox.host.width() != this.host.width()) { var t = this.host.width(); this.listBoxContainer.jqxListBox({ width: t }), this.container.width(parseInt(t) + 25) } var i, s = this, r = this.listBoxContainer, o = this.listBox, a = (e(window).scrollTop(), e(window).scrollLeft(), parseInt(this._findPos(this.host[0])[1]) + parseInt(this.host.outerHeight()) - 1 + "px"), n = parseInt(Math.round(this.host.coord(!0).left)); i = n + "px"; var l = e.jqx.mobile.isSafariMobileBrowser() || e.jqx.mobile.isWindowsPhone(); if (null != this.listBox) { var h = e.jqx.utilities.hasTransform(this.host); this.ishiding = !1, this.keyboardSelection || (this.listBox.selectIndex(this.selectedIndex), this.listBox.ensureVisible(this.selectedIndex)), this.tempSelectedIndex = this.selectedIndex, this.autoDropDownHeight && this.container.height(this.listBoxContainer.height() + 25), (h || null != l && l) && (i = e.jqx.mobile.getLeftPos(this.element), a = e.jqx.mobile.getTopPos(this.element) + parseInt(this.host.outerHeight()), "0px" != e("body").css("border-top-width") && (a = parseInt(a) - this._getBodyOffset().top + "px"), "0px" != e("body").css("border-left-width") && (i = parseInt(i) - this._getBodyOffset().left + "px")), r.stop(), "simple" !== this.renderMode && (this.host.addClass(this.toThemeProperty("jqx-dropdownlist-state-selected")), this.host.addClass(this.toThemeProperty("jqx-fill-state-pressed")), this.arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down-selected"))), this.container.css("left", i), this.container.css("top", a), o._arrange(); var d = !1; if ("right" == this.dropDownHorizontalAlignment || this.rtl) { var c = this.container.outerWidth(), u = Math.abs(c - this.host.width()); c > this.host.width() ? this.container.css("left", 25 + parseInt(Math.round(n)) - u + "px") : this.container.css("left", 25 + parseInt(Math.round(n)) + u + "px") } if (this.enableBrowserBoundsDetection) { var p = this.testOffset(r, { left: parseInt(this.container.css("left")), top: parseInt(a) }, parseInt(this.host.outerHeight())); parseInt(this.container.css("top")) != p.top ? (d = !0, r.css("top", 23), r.addClass(this.toThemeProperty("jqx-popup-up"))) : r.css("top", 0), this.container.css("top", p.top), parseInt(this.container.css("left")) != p.left && this.container.css("left", p.left) } if ("none" == this.animationType) this.container.css("display", "block"), e.data(document.body, "openedJQXListBoxParent", s), e.data(document.body, "openedJQXListBox" + this.id, r), r.css("margin-top", 0), r.css("opacity", 1), o._renderItems(), s._raiseEvent("0", o); else if (this.container.css("display", "block"), s.isanimating = !0, "fade" == this.animationType) r.css("margin-top", 0), r.css("opacity", 0), r.animate({ opacity: 1 }, this.openDelay, function () { e.data(document.body, "openedJQXListBoxParent", s), e.data(document.body, "openedJQXListBox" + s.id, r), s.ishiding = !1, s.isanimating = !1, o._renderItems(), s._raiseEvent("0", o) }); else { r.css("opacity", 1); var m = r.outerHeight(); d ? r.css("margin-top", m) : r.css("margin-top", -m), r.animate({ "margin-top": 0 }, this.openDelay, function () { e.data(document.body, "openedJQXListBoxParent", s), e.data(document.body, "openedJQXListBox" + s.id, r), s.ishiding = !1, s.isanimating = !1, o._renderItems(), s._raiseEvent("0", o) }) } d ? (this.host.addClass(this.toThemeProperty("jqx-rc-t-expanded")), r.addClass(this.toThemeProperty("jqx-rc-b-expanded"))) : (this.host.addClass(this.toThemeProperty("jqx-rc-b-expanded")), r.addClass(this.toThemeProperty("jqx-rc-t-expanded"))), "simple" !== this.renderMode && (r.addClass(this.toThemeProperty("jqx-fill-state-focus")), this.host.addClass(this.toThemeProperty("jqx-dropdownlist-state-focus")), this.host.addClass(this.toThemeProperty("jqx-fill-state-focus"))) } }, hideListBox: function () { e.jqx.aria(this, "aria-expanded", !1); var t = this.listBoxContainer, i = this.listBox, s = this.container, r = this; if (e.data(document.body, "openedJQXListBox" + this.id, null), "none" == this.animationType) this.container.css("display", "none"); else if (!r.ishiding) { t.stop(); var o = t.outerHeight(); t.css("margin-top", 0), r.isanimating = !0; var a = -o; parseInt(this.container.coord().top) < parseInt(this.host.coord().top) && (a = o), "fade" == this.animationType ? (t.css({ opacity: 1 }), t.animate({ opacity: 0 }, this.closeDelay, function () { s.css("display", "none"), r.isanimating = !1, r.ishiding = !1 })) : t.animate({ "margin-top": a }, this.closeDelay, function () { s.css("display", "none"), r.isanimating = !1, r.ishiding = !1 }) } this.ishiding = !0, this.host.removeClass(this.toThemeProperty("jqx-dropdownlist-state-selected")), this.host.removeClass(this.toThemeProperty("jqx-fill-state-pressed")), this.arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected")), this.host.removeClass(this.toThemeProperty("jqx-rc-b-expanded")), t.removeClass(this.toThemeProperty("jqx-rc-t-expanded")), this.host.removeClass(this.toThemeProperty("jqx-rc-t-expanded")), t.removeClass(this.toThemeProperty("jqx-rc-b-expanded")), t.removeClass(this.toThemeProperty("jqx-fill-state-focus")), this.host.removeClass(this.toThemeProperty("jqx-dropdownlist-state-focus")), this.host.removeClass(this.toThemeProperty("jqx-fill-state-focus")), this._raiseEvent("1", i) }, closeOpenedListBox: function (t) { var i = t.data.me, s = e(t.target), r = t.data.listbox; if (null == r) return !0; if (e(t.target).ischildof(t.data.me.host)) return !0; if (!i.isOpened()) return !0; var o = !1; return e.each(s.parents(), function () { if ("undefined" != this.className && this.className.indexOf) { if (-1 != this.className.indexOf("jqx-listbox")) return o = !0, !1; if (-1 != this.className.indexOf("jqx-dropdownlist")) return i.element.id == this.id && (o = !0), !1 } }), null != r && !o && i.isOpened() && i.hideListBox(), !0 }, loadFromSelect: function (e) { this.listBox.loadFromSelect(e) }, refresh: function (e) { !0 !== e && (this._setSize(), this._arrange(), this.listBox && this.renderSelection()) }, _arrange: function () { var e = parseInt(this.host.width()), t = parseInt(this.host.height()), i = (this.arrowSize, this.arrowSize), s = e - i - 6; s > 0 && "auto" !== this.width && this.dropdownlistContent.width(s + "px"), "auto" === this.width && (this.dropdownlistContent.css("width", "auto"), e = this.dropdownlistContent.width() + i + 6, this.host.width(e)), this.dropdownlistContent.height(t), this.dropdownlistContent.css("left", 0), this.dropdownlistContent.css("top", 0), this.dropdownlistArrow.width(i), this.dropdownlistArrow.height(t), this.rtl && (this.dropdownlistArrow.css("float", "left"), this.dropdownlistContent.css("float", "right")) }, destroy: function () { e.jqx.utilities.resize(this.host, null, !0), this.removeHandler(this.listBoxContainer, "select"), this.removeHandler(this.listBoxContainer, "unselect"), this.removeHandler(this.listBoxContainer, "change"), this.removeHandler(this.dropdownlistWrapper, "selectstart"), this.removeHandler(this.dropdownlistWrapper, "mousedown"), this.removeHandler(this.host, "keydown"), this.removeHandler(this.listBoxContainer, "select"), this.removeHandler(this.listBox.content, "click"), this.removeHandler(this.listBoxContainer, "bindingComplete"), this.host.parents() && this.removeHandler(this.host.parents(), "scroll.dropdownlist" + this.element.id), this.removeHandlers(), this.listBoxContainer.jqxListBox("destroy"), this.listBoxContainer.remove(), this.host.removeClass(), this.removeHandler(e(document), "mousedown." + this.id, this.closeOpenedListBox), this.touch && this.removeHandler(e(document), e.jqx.mobile.getTouchEventName("touchstart") + "." + this.id), this.dropdownlistArrow.remove(), delete this.dropdownlistArrow, delete this.dropdownlistWrapper, delete this.listBoxContainer, delete this.input, delete this.arrow, delete this.dropdownlistContent, delete this.listBox, delete this._firstDiv, this.container.remove(), delete this.container; var t = e.data(this.element, "jqxDropDownList"); t && delete t.instance, this.host.removeData(), this.host.remove(), delete this.comboStructure, delete this.host, delete this.set, delete this.get, delete this.call, delete this.element }, _raiseEvent: function (e, t) { void 0 == t && (t = { owner: null }); var i = this.events[e]; args = t, args.owner = this; var s = new jQuery.Event(i); return s.owner = this, 2 != e && 3 != e && 4 != e && 5 != e || (s.args = t), this.host.trigger(s) }, propertyChangedHandler: function (t, i, s, r) { if (void 0 != t.isInitialized && 0 != t.isInitialized) { if ("enableSelection" == i && t.listBoxContainer.jqxListBox({ enableSelection: r }), "enableHover" == i && t.listBoxContainer.jqxListBox({ enableHover: r }), "autoOpen" == i && t._updateHandlers(), "emptyString" == i && (t.listBox.emptyString = t.emptyString), "itemHeight" == i && t.listBoxContainer.jqxListBox({ itemHeight: r }), "renderer" == i && t.listBoxContainer.jqxListBox({ renderer: r }), "rtl" == i && (r ? (t.dropdownlistArrow.css("float", "left"), t.dropdownlistContent.css("float", "right")) : (t.dropdownlistArrow.css("float", "right"), t.dropdownlistContent.css("float", "left")), t.listBoxContainer.jqxListBox({ rtl: t.rtl })), "source" == i && (t.listBoxContainer.jqxListBox({ source: t.source }), t.listBox.selectedIndex = -1, t.listBox.selectIndex(this.selectedIndex), t.renderSelection(), null == r && t.clear()), "displayMember" != i && "valueMember" != i || (t.listBoxContainer.jqxListBox({ displayMember: t.displayMember, valueMember: t.valueMember }), t.renderSelection()), "placeHolder" == i && t.renderSelection(), "theme" == i && null != r && (t.listBoxContainer.jqxListBox({ theme: r }), t.listBoxContainer.addClass(t.toThemeProperty("jqx-popup")), e.jqx.browser.msie && t.listBoxContainer.addClass(t.toThemeProperty("jqx-noshadow")), t.dropdownlistContent.removeClass(), t.dropdownlistContent.addClass(t.toThemeProperty("jqx-dropdownlist-content")), t.dropdownlistWrapper.removeClass(), t.dropdownlistWrapper.addClass(t.toThemeProperty("jqx-disableselect")), t.host.removeClass(), t.host.addClass(t.toThemeProperty("jqx-fill-state-normal")), t.host.addClass(t.toThemeProperty("jqx-dropdownlist-state-normal")), t.host.addClass(t.toThemeProperty("jqx-rc-all")), t.host.addClass(t.toThemeProperty("jqx-widget")), t.arrow.removeClass(), t.arrow.addClass(t.toThemeProperty("jqx-icon-arrow-down")), t.arrow.addClass(t.toThemeProperty("jqx-icon"))), "autoDropDownHeight" == i && (t.listBoxContainer.jqxListBox({ autoHeight: t.autoDropDownHeight }), t.autoDropDownHeight ? t.container.height(t.listBoxContainer.height() + 25) : (t.listBoxContainer.jqxListBox({ height: t.dropDownHeight }), t.container.height(parseInt(t.dropDownHeight) + 25)), t.listBox._arrange(), t.listBox._updatescrollbars()), "searchMode" == i && t.listBoxContainer.jqxListBox({ searchMode: t.searchMode }), "incrementalSearch" == i && t.listBoxContainer.jqxListBox({ incrementalSearch: t.incrementalSearch }), "incrementalSearchDelay" == i && t.listBoxContainer.jqxListBox({ incrementalSearchDelay: t.incrementalSearchDelay }), "dropDownHeight" == i && (t.autoDropDownHeight || (t.listBoxContainer.jqxListBox({ height: t.dropDownHeight }), t.container.height(parseInt(t.dropDownHeight) + 25))), "dropDownWidth" == i || "scrollBarSize" == i) { o = t.width; "auto" != t.dropDownWidth && (o = t.dropDownWidth), t.listBoxContainer.jqxListBox({ width: o, scrollBarSize: t.scrollBarSize }), t.container.width(parseInt(o) + 25) } if (("width" == i || "height" == i) && r != s && (this.refresh(), "width" == i && "auto" == t.dropDownWidth)) { var o = t.host.width(); t.listBoxContainer.jqxListBox({ width: o }), t.container.width(parseInt(o) + 25) } "checkboxes" == i && t.listBoxContainer.jqxListBox({ checkboxes: t.checkboxes }), "selectedIndex" == i && null != t.listBox && (t.listBox.selectIndex(parseInt(r)), t.renderSelection()) } } }) }(jQuery), function (e) { function t(t, s) { var r = t.nodeName.toLowerCase(); if ("area" === r) { var o, a = t.parentNode, n = a.name; return !(!t.href || !n || "map" !== a.nodeName.toLowerCase()) && (!!(o = e("img[usemap=#" + n + "]")[0]) && i(o)) } return (/input|select|textarea|button|object/.test(r) ? !t.disabled : "a" == r ? t.href || s : s) && i(t) } function i(t) { return !e(t).parents().andSelf().filter(function () { return "hidden" === e.css(this, "visibility") || e.expr.filters.hidden(this) }).length } function s(i) { var s = e.attr(i, "tabindex"), r = isNaN(s); return (r || s >= 0) && t(i, !r) } e.jqx.jqxWidget("jqxWindow", "", {}), e.extend(e.jqx._jqxWindow.prototype, { defineInstance: function () { this.height = "auto", this.width = 200, this.minHeight = 50, this.maxHeight = 600, this.minWidth = 50, this.maxWidth = 800, this.showCloseButton = !0, this.disabled = !1, this.autoOpen = !0, this.keyboardCloseKey = "esc", this.title = "", this.content = "", this.draggable = !0, this.resizable = !0, this.animationType = "fade", this.closeAnimationDuration = 250, this.showAnimationDuration = 250, this.isModal = !1, this.position = "center", this.closeButtonSize = 16, this.closeButtonAction = "hide", this.modalOpacity = .3, this.dragArea = null, this.okButton = null, this.cancelButton = null, this.dialogResult = { OK: !1, Cancel: !1, None: !0 }, this.collapsed = !1, this.showCollapseButton = !1, this.collapseAnimationDuration = 150, this.collapseButtonSize = 16, this.rtl = !1, this.keyboardNavigation = !0, this.headerHeight = null, this._events = ["created", "closed", "moving", "moved", "open", "collapse", "expand", "open", "close", "resize"], this.initContent = null, this.enableResize = !0, this.restricter = null, this.closing = null, this._invalidArgumentExceptions = { invalidHeight: "Invalid height!", invalidWidth: "Invalid width!", invalidMinHeight: "Invalid minHeight!", invalidMaxHeight: "Invalid maxHeight!", invalidMinWidth: "Invalid minWidth!", invalidMaxWidth: "Invalid maxWidth", invalidKeyCode: "Invalid keyCode!", invalidAnimationType: "Invalid animationType!", invalidCloseAnimationDuration: "Invalid closeAnimationDuration!", invalidShowAnimationDuration: "Invalid showAnimationDuration!", invalidPosition: "Invalid position!", invalidCloseButtonSize: "Invalid closeButtonSize!", invalidCollapseButtonSize: "Invalid collapseButtonSize!", invalidCloseButtonAction: "Invalid cluseButtonAction!", invalidModalOpacity: "Invalid modalOpacity!", invalidDragArea: "Invalid dragArea!", invalidDialogResult: "Invalid dialogResult!", invalidIsModal: "You can have just one modal window!" }, this._enableResizeCollapseBackup, this._enableResizeBackup, this._heightBeforeCollapse, this._minHeightBeforeCollapse, this._mouseDown = !1, this._isDragging = !1, this._rightContentWrapper = null, this._leftContentWrapper = null, this._headerContentWrapper = null, this._closeButton = null, this._collapseButton = null, this._title = null, this._content = null, this._mousePosition = {}, this._windowPosition = {}, this._modalBackground = null, this._SCROLL_WIDTH = 21, this._visible = !0, this.modalBackgroundZIndex = 12990, this.modalZIndex = 18e3, this.zIndex = 9001, this._touchEvents = { mousedown: e.jqx.mobile.getTouchEventName("touchstart"), mouseup: e.jqx.mobile.getTouchEventName("touchend"), mousemove: e.jqx.mobile.getTouchEventName("touchmove"), mouseenter: "mouseenter", mouseleave: "mouseleave", click: e.jqx.mobile.getTouchEventName("touchstart") } }, createInstance: function () { this.host.attr("role", "dialog"), this.host.removeAttr("data-bind"), this.host.detach(), e(document.body).append(this.host); var t = this, i = function () { var i = parseInt(e(t.restricter).css("padding-top")), s = parseInt(e(t.restricter).css("padding-left")), r = parseInt(e(t.restricter).css("padding-bottom")), o = parseInt(e(t.restricter).css("padding-right")), a = e(t.restricter).coord(); t.dragArea = { left: s + a.left, top: i + a.top, width: 1 + o + e(t.restricter).width(), height: 1 + r + e(t.restricter).height() } }; if (this.restricter && i(), this.restricter && (this.addHandler(e(window), "resize." + this.element.id, function () { i() }), this.addHandler(e(window), "orientationchanged." + this.element.id, function () { i() }), this.addHandler(e(window), "orientationchange." + this.element.id, function () { i() })), this._isTouchDevice = e.jqx.mobile.isTouchDevice(), this._validateProperties(), this._createStructure(), this._refresh(), this.autoOpen || this.host.css("display", "none"), e.jqx.browser.msie && this.host.addClass(this.toThemeProperty("jqx-noshadow")), this.isModal || this._fixWindowZIndex(), this._setStartupSettings(), this._positionWindow(), this._raiseEvent(0), this.autoOpen) { this._performLayout(); var s = this; s.initContent && (s.initContent(), s._contentInitialized = !0), this.isModal && this._fixWindowZIndex("modal-show"), this._raiseEvent(7), this._raiseEvent(9) } }, refresh: function () { this._performLayout() }, _setStartupSettings: function () { this.disabled && this.disable(), this.collapsed && (this.collapsed = !1, this.collapse(0)), this.autoOpen || (this.hide(null, .001, !0), this._visible = !1), null !== this.title && "" !== this.title && this.setTitle(this.title), null !== this.content && "" !== this.content && this.setContent(this.content), this.title = this._headerContentWrapper.html(), this.content = this._content.html() }, _fixWindowZIndex: function (t) { var i = e.data(document.body, "jqxwindows-list") || [], s = this.zIndex; if (this.isModal) { i && (i = this._removeFromArray(this.host, i), e.data(document.body, "jqxwindows-list", i)); var r = e.data(document.body, "jqxwindows-modallist"); if (r) if ("modal-show" == t) r.push(this.host); else { var o = r.indexOf(this.host); -1 != o && r.splice(o, 1) } else if ("modal-show" == t) { var a = new Array; a.push(this.host), e.data(document.body, "jqxwindows-modallist", a), r = a } else e.data(document.body, "jqxwindows-modallist", new Array), r = new Array; s = this.modalZIndex; return e.each(r, function (e) { if (this.data() && this.data().jqxWindow) { var t = this.data().jqxWindow.instance; t._modalBackground.css("z-index", s), t.host.css("z-index", s + 1), s += 2 } }), void e.data(document.body, "jqxwindow-modal", this.host) } if (this._indexOf(this.host, i) < 0 && i.push(this.host), e.data(document.body, "jqxwindows-list", i), i.length > 1) { var n = i[i.length - 2]; s = parseInt(n.css("z-index"), 10) + 1 } this.host.css("z-index", s), this._sortByStyle("z-index", i) }, _validateProperties: function () { try { if (this._validateSize(), this._validateAnimationProperties(), this._validateInteractionProperties(), this._validateModalProperties(), !this.position) throw new Error(this._invalidArgumentExceptions.invalidPosition); if (isNaN(this.closeButtonSize) || parseInt(this.closeButtonSize) < 0) throw new Error(this._invalidArgumentExceptions.invalidCloseButtonSize); if (isNaN(this.collapseButtonSize) || parseInt(this.collapseButtonSize) < 0) throw new Error(this._invalidArgumentExceptions.invalidCollapseButtonSize) } catch (e) { alert(e) } }, _validateModalProperties: function () { if (this.modalOpacity < 0 || this.modalOpacity > 1) throw new Error(this._invalidArgumentExceptions.invalidModalOpacity); if (this.isModal && !this._singleModalCheck()) throw new Error(this._invalidArgumentExceptions.invalidIsModal) }, _validateSize: function () { if (this._validateSizeLimits(), "auto" !== this.height && isNaN(parseInt(this.height))) throw new Error(this._invalidArgumentExceptions.invalidHeight); if ("auto" !== this.width && isNaN(parseInt(this.width))) throw new Error(this._invalidArgumentExceptions.invalidWidth); "auto" !== this.height && this.height < this.minHeight && (this.height = this.minHeight), this.width < this.minWidth && (this.width = this.minWidth), "auto" !== this.height && this.height > this.maxHeight && (this.height = this.maxHeight), this.width > this.maxWidth && (this.width = this.maxWidth), null !== this.dragArea && (this.dragArea && (null !== this.dragArea.height && this.host.height() > this.dragArea.height || parseInt(this.height, 10) > this.dragArea.height) || null !== this.dragArea.width && this.width > this.dragArea.width || this.maxHeight > this.dragArea.height || (this.maxWidth, this.dragArea.width)) }, _validateSizeLimits: function () { if (null == this.maxHeight && (this.maxHeight = 9999), null == this.minWidth && (this.minWidth = 0), null == this.maxWidth && (this.maxWidth = 9999), null == this.minHeight && (this.minHeight = 0), isNaN(parseInt(this.minHeight))) throw new Error(this._invalidArgumentExceptions.invalidMinHeight); if (isNaN(parseInt(this.maxHeight))) throw new Error(this._invalidArgumentExceptions.invalidMaxHeight); if (isNaN(parseInt(this.minWidth))) throw new Error(this._invalidArgumentExceptions.invalidMinWidth); if (isNaN(parseInt(this.maxWidth))) throw new Error(this._invalidArgumentExceptions.invalidMaxWidth); if (this.minHeight > this.maxHeight) throw new Error(this._invalidArgumentExceptions.invalidMinHeight); if (this.minWidth > this.maxWidth) throw new Error(this._invalidArgumentExceptions.invalidMinWidth) }, _validateAnimationProperties: function () { if ("fade" !== this.animationType && "slide" !== this.animationType && "combined" !== this.animationType && "none" !== this.animationType) throw new Error(this._invalidArgumentExceptions.invalidAnimationType); if (isNaN(parseInt(this.closeAnimationDuration), 10) || this.closeAnimationDuration < 0) throw new Error(this._invalidArgumentExceptions.invalidCloseAnimationDuration); if (isNaN(parseInt(this.showAnimationDuration), 10) || this.showAnimationDuration < 0) throw new Error(this._invalidArgumentExceptions.invalidShowAnimationDuration) }, _validateInteractionProperties: function () { if (parseInt(this.keyCode, 10) < 0 || parseInt(this.keyCode, 10) > 130 && "esc" !== this.keyCode) throw new Error(this._invalidArgumentExceptions.invalidKeyCode); if (null !== this.dragArea && (void 0 === this.dragArea.width || void 0 === this.dragArea.height || void 0 === this.dragArea.left || void 0 === this.dragArea.top)) throw new Error(this._invalidArgumentExceptions.invalidDragArea); if (!this.dialogResult || !this.dialogResult.OK && !this.dialogResult.Cancel && !this.dialogResult.None) throw new Error(this._invalidArgumentExceptions.invalidDialogResult); if ("hide" !== this.closeButtonAction && "close" !== this.closeButtonAction) throw new Error(this._invalidArgumentExceptions.invalidCloseButtonAction) }, _singleModalCheck: function () { for (var t = e.data(document.body, "jqxwindows-list") || [], i = t.length; i;) if (i -= 1, e(t[i].attr("id")).length > 0 && e(t[i].attr("id")).jqxWindow("isModal")) return !1; return !0 }, _createStructure: function () { var t = this.host.children("DIV"); if (1 === t.length) this._header = e("<div>" + this.host.attr("caption") + "</div>"), this.host.prepend(this._header), this.host.attr("caption", ""), this._content = e(t[0]); else { if (2 !== t.length) throw new Error("Invalid structure!"); this._header = e(t[0]), this._content = e(t[1]) } }, _refresh: function () { this._render(), this._addStyles(), this._performLayout(), this._removeEventHandlers(), this._addEventHandlers(), this._initializeResize() }, _render: function () { this._addHeaderWrapper(), this._addCloseButton(), this._addCollapseButton(), this._removeModal(), this._makeModal() }, _addHeaderWrapper: function () { this._headerContentWrapper || (this._header.wrapInner('<div style="float:left;"></div>'), this._headerContentWrapper = this._header.children(0), null !== this.headerHeight && this._header.height(this.headerHeight)) }, _addCloseButton: function () { this._closeButton || (this._closeButtonWrapper = e('<div class="' + this.toThemeProperty("jqx-window-close-button-background") + '"></div>'), this._closeButton = e('<div style="width: 100%; height: 100%;" class="' + this.toThemeProperty("jqx-window-close-button") + " " + this.toThemeProperty("jqx-icon-close") + '"></div>'), this._closeButtonWrapper.append(this._closeButton), this._header.append(this._closeButtonWrapper)) }, _addCollapseButton: function () { this._collapseButton || (this._collapseButtonWrapper = e('<div class="' + this.toThemeProperty("jqx-window-collapse-button-background") + '"></div>'), this._collapseButton = e('<div style="width: 100%; height: 100%;" class="' + this.toThemeProperty("jqx-window-collapse-button") + " " + this.toThemeProperty("jqx-icon-arrow-up") + '"></div>'), this._collapseButtonWrapper.append(this._collapseButton), this._header.append(this._collapseButtonWrapper)) }, _removeModal: function () { !this.isModal && "object" == typeof this._modalBackground && null !== this._modalBackground && this._modalBackground.length >= 1 && (e("." + this.toThemeProperty("jqx-window-modal")).remove(), this._modalBackground = null) }, focus: function () { try { this.host.focus(); var e = this; setTimeout(function () { e.host.focus() }, 10) } catch (e) { } }, _makeModal: function () { if (this.isModal && (!this._modalBackground || this._modalBackground.length < 1)) { var t = e.data(document.body, "jqxwindows-list"); t && (this._removeFromArray(this.host, t), e.data(document.body, "jqxwindows-list", t)), this._modalBackground = e("<div></div>"), this._modalBackground.addClass(this.toThemeProperty("jqx-window-modal")), this._setModalBackgroundStyles(), e(document.body).append(this._modalBackground), this.addHandler(this._modalBackground, this._getEvent("click"), function () { return !1 }); var i = this, s = function (t, i) { var s = e(t).parents().get(); for (j = 0; j < s.length; j++) if (e(s[j]).is(i)) return !0; return !1 }; this.addHandler(this._modalBackground, "mouseup", function (e) { i._stopResizing(i), e.preventDefault() }), this.addHandler(this._modalBackground, "mousedown", function (e) { var t = i._getTabbables(); return t.length > 0 && (t[0].focus(1), setTimeout(function () { t[0].focus(1) }, 100)), e.preventDefault(), !1 }), this.addHandler(e(document), "keydown.window" + this.element.id, function (t) { if (9 === t.keyCode) { var r = e.data(document.body, "jqxwindows-modallist"); if (!(r.length > 1 && r[r.length - 1][0] != i.element)) { var o = i._getTabbables(), a = null, n = null; if (o.length > 0 && (a = o[0], n = o[o.length - 1]), t.target != i.element && null != a) return s(t.target, i.host) && (t.target !== n || t.shiftKey) ? t.target === a && t.shiftKey ? (n.focus(1), !1) : void 0 : (a.focus(1), !1) } } }) } }, _addStyles: function () { this.host.addClass(this.toThemeProperty("jqx-rc-all")), this.host.addClass(this.toThemeProperty("jqx-window")), this.host.addClass(this.toThemeProperty("jqx-popup")), e.jqx.browser.msie && this.host.addClass(this.toThemeProperty("jqx-noshadow")), this.host.addClass(this.toThemeProperty("jqx-widget")), this.host.addClass(this.toThemeProperty("jqx-widget-content")), this._header.addClass(this.toThemeProperty("jqx-window-header")), this._content.addClass(this.toThemeProperty("jqx-window-content")), this._header.addClass(this.toThemeProperty("jqx-widget-header")), this._content.addClass(this.toThemeProperty("jqx-widget-content")), this._header.addClass(this.toThemeProperty("jqx-disableselect")), this._header.addClass(this.toThemeProperty("jqx-rc-t")), this._content.addClass(this.toThemeProperty("jqx-rc-b")), this.host.attr("tabindex") || (this.element.tabIndex = 0, this.host.children().css("tab-index", 0)), this.host.attr("hideFocus", "true").css("outline", "none") }, _performHeaderLayout: function () { this._handleHeaderButtons(), this._header.css("position", "relative"), this.rtl ? (this._headerContentWrapper.css("direction", "rtl"), this._headerContentWrapper.css("float", "right")) : (this._headerContentWrapper.css("direction", "ltr"), this._headerContentWrapper.css("float", "left")), this._performHeaderCloseButtonLayout(), this._performHeaderCollapseButtonLayout(), this._centerElement(this._headerContentWrapper, this._header, "y", "margin"), this.headerHeight && (this._centerElement(this._closeButtonWrapper, this._header, "y", "margin"), this._centerElement(this._collapseButtonWrapper, this._header, "y", "margin")) }, _handleHeaderButtons: function () { this._closeButtonWrapper && (this.showCloseButton ? (this._closeButtonWrapper.css("visibility", "visible"), this._closeButtonWrapper.width(this.closeButtonSize), this._closeButtonWrapper.height(this.closeButtonSize)) : this._closeButtonWrapper.css("visibility", "hidden"), this.showCollapseButton ? (this._collapseButtonWrapper.css("visibility", "visible"), this._collapseButtonWrapper.width(this.collapseButtonSize), this._collapseButtonWrapper.height(this.collapseButtonSize)) : this._collapseButtonWrapper.css("visibility", "hidden")) }, _performHeaderCloseButtonLayout: function () { if (this._closeButtonWrapper) { var e = parseInt(this._header.css("padding-right"), 10); isNaN(e) || (this._closeButtonWrapper.width(this._closeButton.width()), this.rtl ? (this._closeButtonWrapper.css("margin-left", e), this._closeButtonWrapper.css("margin-right", "0px")) : (this._closeButtonWrapper.css("margin-right", e), this._closeButtonWrapper.css("margin-left", "0px"))), this.rtl ? this._closeButtonWrapper.css({ position: "absolute", left: "0px", right: "" }) : this._closeButtonWrapper.css({ position: "absolute", right: "0px", left: "" }) } }, _performHeaderCollapseButtonLayout: function () { if (this._closeButtonWrapper) { var e = parseInt(this._header.css("padding-right"), 10); isNaN(e) || (this._collapseButtonWrapper.width(this.collapseButtonSize), this._collapseButtonWrapper.height(this.collapseButtonSize), this.rtl ? (this._collapseButtonWrapper.css("margin-left", e), this._collapseButtonWrapper.css("margin-right", "0px")) : (this._collapseButtonWrapper.css("margin-right", e), this._collapseButtonWrapper.css("margin-left", "0px"))), this.rtl ? this._collapseButtonWrapper.css({ position: "absolute", left: this.showCloseButton ? this._closeButton.outerWidth(!0) : 0, right: "" }) : this._collapseButtonWrapper.css({ position: "absolute", right: this.showCloseButton ? this._closeButton.outerWidth(!0) : 0, left: "" }), this._centerElement(this._collapseButton, this._collapseButton.parent(), "y") } }, _performWidgetLayout: function () { var e; "auto" !== this.width && this.host.css("width", this.width), this.collapsed || ("auto" !== this.height ? this.host.height(this.height) : this.host.height(this.host.height()), this.host.css("min-height", this.minHeight)), this._setChildrenLayout(), e = this._validateMinSize(), this.host.css({ "max-height": this.maxHeight, "min-width": this.minWidth, "max-width": this.maxWidth }), e || this._setChildrenLayout() }, _setChildrenLayout: function () { this._header.width(this.host.width() - (this._header.outerWidth(!0) - this._header.width())), this._content.width(this.host.width() - (this._content.outerWidth(!0) - this._content.width())), this._content.height(this.host.height() - this._header.outerHeight(!0) - (this._content.outerHeight(!0) - this._content.height())) }, _validateMinSize: function () { var e = !0; this.minHeight < this._header.height() && (this.minHeight = this._header.height(), e = !1); var t = this._header.children(0).outerWidth(!0) + this._header.children(1).outerWidth(!0); return this.minWidth < 100 && (this.minWidth = Math.min(t, 100), e = !1), e }, _centerElement: function (e, t, i, s) { "number" == typeof t.left && "number" == typeof t.top && "number" == typeof t.height && "number" == typeof t.width ? this._centerElementInArea(e, t, i) : this._centerElementInParent(e, t, i, s) }, _centerElementInParent: function (e, t, i, s) { if (i = i.toLowerCase(), s ? s += "-" : s = "", i.indexOf("y") >= 0) { var r = e.outerHeight(!0), o = t.height(), a = Math.max(0, o - r) / 2; e.css(s + "top", a + "px") } if (i.indexOf("x") >= 0) { var n = e.outerWidth(!0), l = t.width(), h = Math.max(0, l - n) / 2; e.css(s + "left", h + "px") } }, _centerElementInArea: function (e, t, i) { if ((i = i.toLowerCase()).indexOf("y") >= 0) { var s = e.outerHeight(!0), r = (t.height - s) / 2; e.css("top", r + t.top + "px") } if (i.indexOf("x") >= 0) { var o = e.outerWidth(!0), a = (t.width - o) / 2; e.css("left", a + t.left + "px") } }, _removeEventHandlers: function () { this.removeHandler(this._header, this._getEvent("mousedown")), this.removeHandler(this._header, this._getEvent("mousemove")), this.removeHandler(this._header, "focus"), this.removeHandler(e(document), this._getEvent("mousemove") + "." + this.host.attr("id")), this.removeHandler(e(document), this._getEvent("mouseup") + "." + this.host.attr("id")), this.removeHandler(this.host, "keydown"), this.removeHandler(this._closeButton, this._getEvent("click")), this.removeHandler(this._closeButton, this._getEvent("mouseenter")), this.removeHandler(this._closeButton, this._getEvent("mouseleave")), this.removeHandler(this._collapseButton, this._getEvent("click")), this.removeHandler(this._collapseButton, this._getEvent("mouseenter")), this.removeHandler(this._collapseButton, this._getEvent("mouseleave")), this.removeHandler(this.host, this._getEvent("mousedown")), this.removeHandler(e(this.okButton), this._getEvent("click"), this._setDialogResultHandler), this.removeHandler(e(this.cancelButton), this._getEvent("click"), this._setDialogResultHandler), this.removeHandler(this._header, this._getEvent("mouseenter")), this.removeHandler(this._header, this._getEvent("mouseleave")), this.removeHandler(this.host, "resizing", this._windowResizeHandler) }, _removeFromArray: function (e, t) { return this._indexOf(e, t) >= 0 ? t.splice(this._indexOf(e, t), 1) : t }, _sortByStyle: function (e, t) { for (var i = 0; i < t.length; i++) for (var s = t.length - 1; s > i; s--) { var r, o = t[s], a = t[s - 1]; parseInt(o.css(e), 10) < parseInt(a.css(e), 10) && (r = o, t[s] = a, t[s - 1] = r) } }, _initializeResize: function () { if (this.resizable) { var e = this; this.initResize({ target: this.host, alsoResize: e._content, maxWidth: e.maxWidth, minWidth: e.minWidth, maxHeight: e.maxHeight, minHeight: e.minHeight, indicatorSize: 10, resizeParent: e.dragArea }) } }, _removeResize: function () { this.removeResize() }, _getEvent: function (e) { return this._isTouchDevice ? this._touchEvents[e] : e }, _addEventHandlers: function () { this._addDragDropHandlers(), this._addCloseHandlers(), this._addCollapseHandlers(), this._addFocusHandlers(), this._documentResizeHandlers(), this._closeButtonHover(), this._collapseButtonHover(), this._addDialogButtonsHandlers(), this._addHeaderHoverEffect(), this._addResizeHandlers(); var e = this; this.addHandler(this._header, this._getEvent("mousemove"), function (t) { e._addHeaderCursorHandlers(e) }) }, _addResizeHandlers: function () { this.addHandler(this.host, "resizing", this._windowResizeHandler, { self: this }) }, _windowResizeHandler: function (e) { var t = e.data.self; t._header.width(t.host.width() - (t._header.outerWidth(!0) - t._header.width())), t.width = e.args.width, t.height = e.args.height }, _addHeaderHoverEffect: function () { var t = this; this.addHandler(this._header, this._getEvent("mouseenter"), function () { e(this).addClass(t.toThemeProperty("jqx-window-header-hover")) }), this.addHandler(this._header, this._getEvent("mouseleave"), function () { e(this).removeClass(t.toThemeProperty("jqx-window-header-hover")) }) }, _addDialogButtonsHandlers: function () { this.okButton && this.addHandler(e(this.okButton), this._getEvent("click"), this._setDialogResultHandler, { self: this, result: "ok" }), this.cancelButton && this.addHandler(e(this.cancelButton), this._getEvent("click"), this._setDialogResultHandler, { self: this, result: "cancel" }) }, _documentResizeHandlers: function () { var t = this; this.isModal && this.addHandler(e(window), "resize.window" + this.element.id, function () { "object" == typeof t._modalBackground && null !== t._modalBackground && (t.isOpen() && t._modalBackground.hide(), t.restricter ? (t._modalBackground.css("left", t.dragArea.left), t._modalBackground.css("top", t.dragArea.top), t._modalBackground.width(t.dragArea.width), t._modalBackground.height(t.dragArea.height)) : (t._modalBackground.width(t._getDocumentSize().width), t._modalBackground.height(t._getDocumentSize().height)), t.isOpen() && t._modalBackground.show()) }) }, _setDialogResultHandler: function (e) { var t = e.data.self; t._setDialogResult(e.data.result), t.closeWindow() }, _setDialogResult: function (e) { switch (this.dialogResult.OK = !1, this.dialogResult.None = !1, this.dialogResult.Cancel = !1, e = e.toLowerCase()) { case "ok": this.dialogResult.OK = !0; break; case "cancel": this.dialogResult.Cancel = !0; break; default: this.dialogResult.None = !0 } }, _getDocumentSize: function () { var t = e.jqx.browser.msie && e.jqx.browser.version < 9, i = t ? 4 : 0, s = i; return document.body.scrollHeight > document.body.clientHeight && t && (i = this._SCROLL_WIDTH), document.body.scrollWidth > document.body.clientWidth && t && (s = this._SCROLL_WIDTH), { width: e(document).width() - i, height: e(document).height() - s } }, _closeButtonHover: function () { var e = this; this.addHandler(this._closeButton, this._getEvent("mouseenter"), function () { e._closeButton.addClass(e.toThemeProperty("jqx-window-close-button-hover")) }), this.addHandler(this._closeButton, this._getEvent("mouseleave"), function () { e._closeButton.removeClass(e.toThemeProperty("jqx-window-close-button-hover")) }) }, _collapseButtonHover: function () { var e = this; this.addHandler(this._collapseButton, this._getEvent("mouseenter"), function () { e._collapseButton.addClass(e.toThemeProperty("jqx-window-collapse-button-hover")) }), this.addHandler(this._collapseButton, this._getEvent("mouseleave"), function () { e._collapseButton.removeClass(e.toThemeProperty("jqx-window-collapse-button-hover")) }) }, _setModalBackgroundStyles: function () { this.isModal && (this._modalBackground.fadeTo(0, this.modalOpacity), this._modalBackground.css({ position: "absolute", top: "0px", left: "0px", width: this._getDocumentSize().width, height: this._getDocumentSize().height, "z-index": this.modalBackgroundZIndex }), this.autoOpen || this._modalBackground.css("display", "none")) }, _addFocusHandlers: function () { var e = this; this.addHandler(this.host, this._getEvent("mousedown"), function () { e.isModal || e.bringToFront() }) }, _indexOf: function (e, t) { for (var i = 0; i < t.length; i++) if (t[i][0] === e[0]) return i; return -1 }, _addCloseHandlers: function () { var e = this; this.addHandler(this._closeButton, this._getEvent("click"), function (t) { return e._closeWindow(t) }), "none" !== this.keyboardCloseKey && "number" != typeof this.keyboardCloseKey && "esc" === this.keyboardCloseKey.toLowerCase() && (this.keyboardCloseKey = 27), this.addHandler(this.host, "keydown", function (t) { t.keyCode === e.keyboardCloseKey && null != e.keyboardCloseKey && "none" != e.keyboardCloseKey ? e._closeWindow(t) : e._handleKeys(t) }, { self: this }), this.addHandler(this.host, "keyup", function (t) { if (e.keyboardNavigation && e._moved) { var i = e.host.coord(), s = i.left, r = i.top; e._raiseEvent(3, s, r, s, r), e._moved = !1 } }) }, _handleKeys: function (t) { if (this.keyboardNavigation && this._headerFocused && !e(document.activeElement).ischildof(this._content)) { var i = t.ctrlKey, s = t.keyCode, r = this.host.coord(), o = r.left, a = r.top, n = this._getDraggingArea(), l = this.host.width(), h = this.host.height(), d = !0, c = 10; switch (s) { case 37: i ? this.resizable && this.resize(l - c, h) : this.draggable && o - c >= 0 && this.move(o - c, a), d = !1; break; case 38: i ? this.resizable && this.resize(l, h - c) : this.draggable && a - c >= 0 && this.move(o, a - c), d = !1; break; case 39: i ? this.resizable && this.resize(l + c, h) : this.draggable && o + l + c <= n.width && this.move(o + c, a), d = !1; break; case 40: i ? this.resizable && this.resize(l, h + c) : this.draggable && a + h + c <= n.height && this.move(o, a + c), d = !1 } return d || (t.preventDefault && t.preventDefault(), t.stopPropagation && t.stopPropagation()), d } }, _addCollapseHandlers: function () { var e = this; this.addHandler(this._collapseButton, this._getEvent("click"), function () { e.collapsed ? e.expand() : e.collapse() }) }, _closeWindow: function (e) { return this.closeWindow(), !1 }, _addHeaderCursorHandlers: function (e) { e.resizeArea && e.resizable && !e.collapsed ? e._header.css("cursor", e._resizeWrapper.css("cursor")) : e.draggable ? e._header.css("cursor", "move") : (e._header.css("cursor", "default"), e._resizeWrapper && e._resizeWrapper.length > 0 && e._resizeWrapper.css("cursor", "default")) }, _addDragDropHandlers: function () { if (this.draggable) { var t = this; this.addHandler(this.host, "focus", function () { t._headerFocused = !0 }), this.addHandler(this.host, "blur", function () { t._headerFocused = !1 }), this.addHandler(this._header, "focus", function () { return t._headerFocused = !0, !1 }), this.addHandler(this._header, this._getEvent("mousedown"), function (e) { return t._headerMouseDownHandler(t, e), !0 }), this.addHandler(this._header, "dragstart", function (e) { return e.preventDefault && e.preventDefault(), !1 }), this.addHandler(this._header, this._getEvent("mousemove"), function (e) { return t._headerMouseMoveHandler(t, e) }), this.addHandler(e(document), this._getEvent("mousemove") + "." + this.host.attr("id"), function (e) { return t._dragHandler(t, e) }), this.addHandler(e(document), this._getEvent("mouseup") + "." + this.host.attr("id"), function (e) { return t._dropHandler(t, e) }); try { if ("" != document.referrer || window.frameElement) { var i = null; if (null != window.top && window.top != window.self && window.parent && document.referrer && (i = document.referrer), i && -1 != i.indexOf(document.location.host)) { var s = function (e) { t._dropHandler(t, e) }; window.top.document.addEventListener ? window.top.document.addEventListener("mouseup", s, !1) : window.top.document.attachEvent && window.top.document.attachEvent("onmouseup", s) } } } catch (e) { } } }, _headerMouseDownHandler: function (t, i) { if (t.isModal || t.bringToFront(), null == t._resizeDirection) { e.jqx.mobile.getTouches(i)[0]; var s = e.jqx.position(i); t._mousePosition.x = s.left, t._mousePosition.y = s.top, t._mouseDown = !0, t._isDragging = !1 } }, _headerMouseMoveHandler: function (t, i) { if (t._mouseDown && !t._isDragging) { var s = e.jqx.mobile.getTouches(i)[0], r = s.pageX, o = s.pageY, a = e.jqx.position(i); return r = a.left, o = a.top, (r + 3 < t._mousePosition.x || r - 3 > t._mousePosition.x || o + 3 < t._mousePosition.y || o - 3 > t._mousePosition.y) && (t._isDragging = !0, t._mousePosition = { x: r, y: o }, t._windowPosition = { x: t.host.coord().left, y: t.host.coord().top }, e(document.body).addClass(t.toThemeProperty("jqx-disableselect"))), !!t._isTouchDevice && (i.preventDefault(), !0) } return !t._isDragging || !!t._isTouchDevice && (i.preventDefault(), !0) }, _dropHandler: function (t, i) { var s = !0; if (t._isDragging && !t.isResizing && !t._resizeDirection) { var r = parseInt(t.host.css("left"), 10), o = parseInt(t.host.css("top"), 10), a = t._isTouchDevice ? 0 : i.pageX, n = t._isTouchDevice ? 0 : i.pageY; t.enableResize = t._enableResizeBackup, t._enableResizeBackup = "undefined", t._raiseEvent(3, r, o, a, n), s = !1, "undefined" != i.preventDefault && i.preventDefault(), null != i.originalEvent && (i.originalEvent.mouseHandled = !0), "undefined" != i.stopPropagation && i.stopPropagation() } return t._isDragging = !1, t._mouseDown = !1, e(document.body).removeClass(t.toThemeProperty("jqx-disableselect")), s }, _dragHandler: function (t, i) { if (t._isDragging && !t.isResizing && !t._resizeDirection) { var s = t._isTouchDevice ? i.originalEvent.which : i.which; if (void 0 === t._enableResizeBackup && (t._enableResizeBackup = t.enableResize), t.enableResize = !1, 0 === s && e.jqx.browser.msie && e.jqx.browser.version < 8) return t._dropHandler(t, i); e.jqx.mobile.getTouches(i)[0]; var r = e.jqx.position(i), o = r.left, a = r.top, n = o - t._mousePosition.x, l = a - t._mousePosition.y, h = t._windowPosition.x + n, d = t._windowPosition.y + l; return t.move(h, d, i), i.preventDefault(), !1 } return !0 }, _validateCoordinates: function (e, t, i, s) { var r = this._getDraggingArea(); e = e < r.left ? r.left : e, t = t < r.top ? r.top : t; var o = this.host.outerWidth(!0), a = this.host.outerHeight(!0); return e + o >= r.width + r.left - 2 * s && (e = r.width + r.left - o - s), t + a >= r.height + r.top - i && (t = r.height + r.top - a - i), { x: e, y: t } }, _performLayout: function () { this._performHeaderLayout(), this._performWidgetLayout() }, _parseDragAreaAttributes: function () { null !== this.dragArea && (this.dragArea.height = parseInt(this.dragArea.height, 10), this.dragArea.width = parseInt(this.dragArea.width, 10), this.dragArea.top = parseInt(this.dragArea.top, 10), this.dragArea.left = parseInt(this.dragArea.left, 10)) }, _positionWindow: function () { if (this._parseDragAreaAttributes(), this.position instanceof Array && 2 === this.position.length && "number" == typeof this.position[0] && "number" == typeof this.position[1]) this.host.css({ left: this.position[0], top: this.position[1] }); else if (this.position instanceof Object) { if (this.position.left) this.host.offset(this.position); else if (void 0 !== this.position.x && void 0 != this.position.y) this.host.css({ left: this.position.x, top: this.position.y }); else if (this.position.center) { this._centerElement(this.host, this.position.center, "xy"); var e = this.position.center.coord(), t = parseInt(this.host.css("left")), i = parseInt(this.host.css("top")); this.host.css({ left: t + e.left, top: i + e.top }) } } else this._positionFromLiteral() }, _getDraggingArea: function () { var e = {}; return e.left = this.dragArea && this.dragArea.left ? this.dragArea.left : 0, e.top = this.dragArea && this.dragArea.top ? this.dragArea.top : 0, e.width = this.dragArea && this.dragArea.width ? this.dragArea.width : this._getDocumentSize().width, e.height = this.dragArea && this.dragArea.height ? this.dragArea.height : this._getDocumentSize().height, e }, _positionFromLiteral: function () { this.position instanceof Array || (this.position = this.position.split(",")); for (var t = this.position.length, i = this._getDraggingArea() ; t;) switch (t -= 1, this.position[t] = this.position[t].replace(/ /g, ""), this.position[t]) { case "top": this.host.css("top", i.top); break; case "left": this.host.css("left", i.left); break; case "bottom": this.host.css("top", i.height - this.host.height() + i.top); break; case "right": this.host.css("left", i.left + i.width - this.host.width()); break; default: this.dragArea || (i = e(window)), this._centerElement(this.host, i, "xy") } }, _raiseEvent: function (t) { var i = this._events[t], s = e.Event(i), r = {}; return 2 !== t && 3 !== t || (r.x = arguments[1], r.y = arguments[2], r.pageX = arguments[3], r.pageY = arguments[4]), "closed" !== i && "close" !== i || (r.dialogResult = this.dialogResult), s.args = r, this.host.trigger(s) }, destroy: function () { this.removeHandler(e(window), "resize.window" + this.element.id), this._removeEventHandlers(), this._destroy() }, _destroy: function () { this.restricter && (this.removeHandler(e(window), "resize." + this.element.id), this.removeHandler(e(window), "orientationchanged." + this.element.id), this.removeHandler(e(window), "orientationchange." + this.element.id)), this.host.remove(), null !== this._modalBackground && this._modalBackground.remove() }, _toClose: function (e, t) { return e && t[0] === this.element || t[0] !== this.element && "object" == typeof t[0] }, propertyChangedHandler: function (t, i, s, r) { switch (this._validateProperties(), i) { case "rtl": this._performLayout(); break; case "dragArea": this._positionWindow(); break; case "collapseButtonSize": case "closeButtonSize": this._performLayout(); break; case "isModal": this._refresh(), this._fixWindowZIndex(); break; case "keyboardCloseKey": this._removeEventHandlers(), this._addEventHandlers(); break; case "disabled": r ? this.disable() : (this.disabled = !0, this.enable()); break; case "showCloseButton": case "showCollapseButton": case "height": case "width": this._performLayout(); break; case "title": this.setTitle(r), this.title = r; break; case "content": this.setContent(r); break; case "draggable": this._removeEventHandlers(), this._addEventHandlers(), this._initializeResize(); break; case "resizable": this.enableResize = r, r ? this._initializeResize() : this._removeResize(); break; case "position": this._positionWindow(); break; case "modalOpacity": this._setModalBackgroundStyles(); break; case "okButton": r ? this._addDialogButtonsHandlers() : this.removeHandler(this.okButton); break; case "cancelButton": r ? this._addDialogButtonsHandlers() : this.removeHandler(this.cancelButton); break; case "collapsed": r ? s || (this.collapsed = !1, this.collapse(0)) : s && (this.collapsed = !0, this.expand(0)); case "theme": e.jqx.utilities.setTheme(s, r, this.host); break; case "enableResize": return; case "maxWidth": case "maxHeight": case "minWidth": case "minHeight": return t._performLayout(), t._removeResize(), void t._initializeResize(); default: return } }, collapse: function (t) { if (!this.collapsed && !this.host.is(":animated")) { if ("none" == this.host.css("display")) return; var i = this, s = this._header.outerHeight(!0), r = parseInt(this._header.css("border-bottom-width"), 10), o = parseInt(this._header.css("margin-bottom"), 10), t = isNaN(parseInt(t)) ? this.collapseAnimationDuration : t; isNaN(r) || (s -= 2 * r), isNaN(o) || (s += o), this._heightBeforeCollapse = this.host.height(), this._minHeightBeforeCollapse = this.host.css("min-height"), this.host.css("min-height", s), this.host.animate({ height: s }, t, function () { i.collapsed = !0, i._collapseButton.addClass(i.toThemeProperty("jqx-window-collapse-button-collapsed")), i._collapseButton.addClass(i.toThemeProperty("jqx-icon-arrow-down")), i._content.css("display", "none"), i._raiseEvent(5), i._raiseEvent(9), e.jqx.aria(i, "aria-expanded", !1) }) } }, expand: function (t) { if (this.collapsed && !this.host.is(":animated")) { var i = this, t = isNaN(parseInt(t)) ? this.collapseAnimationDuration : t; this.host.animate({ height: this._heightBeforeCollapse }, t, function () { i.collapsed = !1, i.host.css("min-height", i._minHeightBeforeCollapse), i._collapseButton.removeClass(i.toThemeProperty("jqx-window-collapse-button-collapsed")), i._collapseButton.removeClass(i.toThemeProperty("jqx-icon-arrow-down")), i._content.css("display", "block"), i._raiseEvent(6), i._performWidgetLayout(), i._raiseEvent(9), e.jqx.aria(i, "aria-expanded", !0) }) } }, closeAll: function (t) { for (var i = e.data(document.body, "jqxwindows-list"), s = i.length, r = e.data(document.body, "jqxwindow-modal") || []; s;) s -= 1, this._toClose(!0, i[s]) && (i[s].jqxWindow("closeWindow", "close"), i.splice(s, 1)); this._toClose(!0, r) && (r.jqxWindow("closeWindow", "close"), e.data(document.body, "jqxwindow-modal", [])), e.data(document.body, "jqxwindows-list", i) }, setTitle: function (t) { e.jqx.utilities.html(this._headerContentWrapper, t), this.title = t, this._performLayout() }, setContent: function (t) { this._contentInitialized = !1; for (var i = this._content, s = !1; !s;) i.css("height", "auto"), i.css("width", "auto"), i.is(".jqx-window") ? s = !0 : i = i.parent(); e.jqx.utilities.html(this._content, t), this._performLayout() }, disable: function () { this.disabled = !0, this._removeEventHandlers(), this._header.addClass(this.toThemeProperty("jqx-window-header-disabled")), this._closeButton.addClass(this.toThemeProperty("jqx-window-close-button-disabled")), this._collapseButton.addClass(this.toThemeProperty("jqx-window-collapse-button-disabled")), this._content.addClass(this.toThemeProperty("jqx-window-content-disabled")), this.host.addClass(this.toThemeProperty("jqx-window-disabled")), this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")), this._removeResize() }, enable: function () { this.disabled && (this._addEventHandlers(), this._header.removeClass(this.toThemeProperty("jqx-window-header-disabled")), this._content.removeClass(this.toThemeProperty("jqx-window-content-disabled")), this._closeButton.removeClass(this.toThemeProperty("jqx-window-close-button-disabled")), this._collapseButton.removeClass(this.toThemeProperty("jqx-window-collapse-button-disabled")), this.host.removeClass(this.toThemeProperty("jqx-window-disabled")), this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")), this.disabled = !1, this._initializeResize()) }, isOpen: function () { return this._visible }, closeWindow: function (e) { var t = this; e = void 0 === e ? this.closeButtonAction : e, this.hide(function () { "close" === e && t._destroy() }) }, bringToFront: function () { var t = e.data(document.body, "jqxwindows-list"); if (this.isModal) return t = e.data(document.body, "jqxwindows-modallist"), this._fixWindowZIndex("modal-hide"), void this._fixWindowZIndex("modal-show"); for (var i = t[t.length - 1], s = parseInt(i.css("z-index"), 10), r = this._indexOf(this.host, t), o = t.length - 1; o > r; o -= 1) { var a = parseInt(t[o].css("z-index"), 10) - 1; t[o].css("z-index", a) } this.host.css("z-index", s), this._sortByStyle("z-index", t) }, hide: function (e, t, i) { if (!this.closing || 0 != this.closing()) { switch (t = t || this.closeAnimationDuration, this.animationType) { case "none": this.host.css("display", "none"); break; case "fade": this.host.fadeOut(t, function () { e instanceof Function && e() }); case "slide": this.host.slideUp(t, function () { e instanceof Function && e() }); case "combined": this.host.hide(t, function () { e instanceof Function && e() }) } this._visible = !1, this.isModal && (this._modalBackground.hide(), this._fixWindowZIndex("modal-hide")), !0 !== i && (this._raiseEvent(1), this._raiseEvent(8)) } }, open: function (e, t) { this.show(e, t) }, close: function (e, t, i) { this.hide(e, t, i) }, show: function (e, t) { switch (this._setDialogResult("none"), t = t || this.showAnimationDuration, this.animationType) { case "none": this.host.css("display", "block"); break; case "fade": this.host.fadeIn(t, function () { e instanceof Function && e() }); break; case "slide": this.host.slideDown(t, function () { e instanceof Function && e() }); break; case "combined": this.host.show(t, function () { e instanceof Function && e() }) } this.isModal && (this._modalBackground.show(), this._fixWindowZIndex("modal-show")); var i = this; this._visible || (t > 150 && "none" != this.animationType ? setTimeout(function () { i._contentInitialized || i.initContent && (i.initContent(), i._contentInitialized = !0), i._raiseEvent(7), i._raiseEvent(9) }, t - 150) : (i._contentInitialized || i.initContent && (i.initContent(), i._contentInitialized = !0), this._raiseEvent(7), i._raiseEvent(9))), this._visible = !0, this._performLayout(); var s = function () { i._content.focus() }; s(), setTimeout(function () { s() }, 100) }, _getTabbables: function () { var t = this._content.find("*"), i = new Array; return e.each(t, function () { s(this) && (i[i.length] = this) }), i }, move: function (t, i, s, r) { var o, a, n, l = 0, h = 0, t = parseInt(t, 10), i = parseInt(i, 10); if (e.jqx.browser.msie && (e(window).width() > e(document).width() && !this.dragArea && (h = this._SCROLL_WIDTH), e(window).height() < e(document).height() && document.documentElement.clientWidth > document.documentElement.scrollWidth && !this.dragArea && (l = this._SCROLL_WIDTH)), o = this._validateCoordinates(t, i, h, l), parseInt(this.host.css("left"), 10) !== o.x || parseInt(this.host.css("top"), 10) !== o.y) { if (s) { e.jqx.mobile.getTouches(s)[0]; var d = e.jqx.position(s); a = d.left, n = d.top } void 0 == a && (a = t), void 0 == n && (n = i), !1 !== r && this._raiseEvent(2, o.x, o.y, a, n) } this.element.style.left = o.x + "px", this.element.style.top = o.y + "px", this._moved = !0 } }) }(jQuery), function (e) { var t = function (e) { return { resizeConfig: function () { this.resizeTarget = null, this.resizeIndicatorSize = 5, this.resizeTargetChildren = null, this.isResizing = !1, this.resizeArea = !1, this.minWidth = 1, this.maxWidth = 100, this.minHeight = 1, this.maxHeight = 100, this.resizeParent = null, this.enableResize = !0, this._cursorBackup, this._resizeEvents = ["resizing", "resized", "resize"], this._resizeMouseDown = !1, this._resizeCurrentMode = null, this._mouseResizePosition = {}, this._resizeMethods = null, this._SCROLL_WIDTH = 21 }, _resizeExceptions: { invalidTarget: "Invalid target!", invalidMinHeight: "Invalid minimal height!", invalidMaxHeight: "Invalid maximum height!", invalidMinWidth: "Invalid minimum width!", invalidMaxWidth: "Invalid maximum width!", invalidIndicatorSize: "Invalid indicator size!", invalidSize: "Invalid size!" }, removeResize: function () { if (this.resizeTarget) { var t = e(this.resizeTarget.children(".jqx-resize")); t.detach(); var i = t.children(); this._removeResizeEventListeners(); for (var s = 0; s < i.length; s += 1) e(i[s]).detach(), this.resizeTarget.append(i[s]); t.remove() } }, initResize: function (t) { this.resizeConfig(), this.resizeTarget = e(t.target), this.resizeIndicatorSize = t.indicatorSize || 10, this.maxWidth = t.maxWidth || 100, this.minWidth = t.minWidth || 1, this.maxHeight = t.maxHeight || 100, this.minHeight = t.minHeight || 1, this.resizeParent = t.resizeParent, this._parseResizeParentProperties(), this._validateResizeProperties(), this._validateResizeTargetDimensions(), this._getChildren(this.resizeTarget.maxWidth, this.resizeTarget.minWidth, this.resizeTarget.maxHeight, this.resizeTarget.minHeight, t.alsoResize), this._refreshResize(), this._cursorBackup = this.resizeTarget.css("cursor"), "auto" === this._cursorBackup && (this._cursorBackup = "default") }, _validateResizeTargetDimensions: function () { this.resizeTarget.maxWidth = this.maxWidth, this.resizeTarget.minWidth = 3 * this.resizeIndicatorSize > this.minWidth ? 3 * this.resizeIndicatorSize : this.minWidth, this.resizeTarget.maxHeight = this.maxHeight, this.resizeTarget.minHeight = 3 * this.resizeIndicatorSize > this.minHeight ? 3 * this.resizeIndicatorSize : this.minHeight }, _parseResizeParentProperties: function () { this.resizeParent && (this.resizeParent.left = parseInt(this.resizeParent.left, 10), this.resizeParent.top = parseInt(this.resizeParent.top, 10), this.resizeParent.width = parseInt(this.resizeParent.width, 10), this.resizeParent.height = parseInt(this.resizeParent.height, 10)) }, _getChildren: function (t, i, s, r, o) { this.resizeTargetChildren = e(o), this.resizeTargetChildren.toArray(); for (var a = this.resizeTargetChildren.length; a;) a -= 1, this.resizeTargetChildren[a] = e(this.resizeTargetChildren[a]) }, _refreshResize: function () { this._renderResize(), this._performResizeLayout(), this._removeResizeEventListeners(), this._addResizeEventHandlers() }, _renderResize: function () { this.resizeTarget.wrapInner(e("<div></div>")), this._resizeWrapper = this.resizeTarget.children(0), this._resizeWrapper.addClass("jqx-resize"), this._resizeWrapper.addClass("jqx-rc-all"), this._resizeWrapper.css("z-index", 8e3) }, _performResizeLayout: function () { this._resizeWrapper.height(this.resizeTarget.height()), this._resizeWrapper.width(this.resizeTarget.width()) }, _removeResizeEventListeners: function () { var t = this.resizeTarget.attr("id"); this.removeHandler(this._resizeWrapper, "mousemove.resize" + t), this.removeHandler(this._resizeWrapper, "mousedown.resize" + t), this.removeHandler(e(document), "mousemove.resize" + t), this.removeHandler(e(document), "mouseup.resize" + t) }, _addResizeEventHandlers: function () { var t = this.resizeTarget.attr("id"), i = this; this.addHandler(this._resizeWrapper, "mousemove.resize." + t, function (e) { i._resizeCursorChangeHandler(i, e) }), this.addHandler(this._resizeWrapper, "mousedown.resize." + t, function (e) { i._resizeMouseDownHandler(i, e) }), this.addHandler(e(document), "mousemove.resize." + t, function (e) { return i._resizeHandler(i, e) }), this.addHandler(e(document), "mouseup.resize." + t, function (e) { i._stopResizing(i, e) }); try { if ("" != document.referrer || window.frameElement) { var s = function (e) { i._stopResizing(i, e) }; window.top.document.addEventListener ? window.top.document.addEventListener("mouseup", s, !1) : window.top.document.attachEvent && window.top.document.attachEvent("onmouseup", s) } } catch (e) { } }, _stopResizing: function (e, t) { e.enableResize && (e.isResizing && e._raiseResizeEvent(1), e._resizeMouseDown = !1, e.isResizing = !1, e._resizeDirection = null, e.resizeTarget && e.resizeTarget.removeClass("jqx-disableselect")), "undefined" == e._cursorBackup && (e._cursorBackup = "default"), e._resizeWrapper && e._resizeWrapper.css("cursor", e._cursorBackup) }, _resizeHandler: function (t, i) { if (t.enableResize && !t.collapsed) return t.isResizing && t._resizeDirection ? (0 === i.which && e.jqx.browser.msie && e.jqx.browser.version < 9 && t._stopResizing(i), t._performResize(i.pageX, i.pageY), !1) : t._resizeCaptureCursor(i.pageX, i.pageY) }, _resizeCaptureCursor: function (e, t) { if (this._resizeMouseDown && !this.isResizing && this._resizeDirection && (e + 3 < this._mouseResizePosition.x || e - 3 > this._mouseResizePosition.x || t + 3 < this._mouseResizePosition.y || t - 3 > this._mouseResizePosition.y)) return this._changeCursor(e - parseInt(this.resizeTarget.css("left")), t - parseInt(this.resizeTarget.css("top"))), this._mouseResizePosition = { x: e, y: t }, this._prepareResizeMethods(this._resizeDirection), this._resizeBackupData(), this.isResizing = !0, this.resizeTarget.addClass("jqx-disableselect"), !1 }, _resizeBackupData: function () { this.resizeTarget.lastWidth = this.resizeTarget.width(), this.resizeTarget.lastHeight = this.resizeTarget.height(), this.resizeTarget.x = parseInt(this.resizeTarget.css("left"), 10), this.resizeTarget.y = parseInt(this.resizeTarget.css("top"), 10), this._resizeBackupChildrenSize() }, _resizeBackupChildrenSize: function () { for (var e, t = this.resizeTargetChildren.length; t;) t -= 1, e = this.resizeTargetChildren[t], this.resizeTargetChildren[t].lastWidth = e.width(), this.resizeTargetChildren[t].lastHeight = e.height() }, _performResize: function (e, t) { var i = e - this._mouseResizePosition.x, s = t - this._mouseResizePosition.y; this._resizeDirection && this._resize(this.resizeTarget, i, s) }, _resizeCursorChangeHandler: function (e, t) { e.enableResize && !e.collapsed && (e.isResizing || e._changeCursor(t.pageX - parseInt(e.resizeTarget.css("left")), t.pageY - parseInt(e.resizeTarget.css("top")))) }, _resizeMouseDownHandler: function (e, t) { e.enableResize && null !== e._resizeDirection && (e._resizeMouseDown = !0, e._mouseResizePosition.x = t.pageX, e._mouseResizePosition.y = t.pageY, t.preventDefault()) }, _validateResizeProperties: function () { try { if (!this.resizeTarget || 1 !== this.resizeTarget.length) throw new Error(this._resizeExceptions.invalidTarget); if (this.minHeight < 0 || isNaN(parseInt(this.minHeight))) throw new Error(this._resizeExceptions.invalidMinHeight); if (this.maxHeight <= 0 || isNaN(parseInt(this.maxHeight))) throw new Error(this._resizeExceptions.invalidMaxHeight); if (this.minWidth < 0 || isNaN(parseInt(this.minWidth))) throw new Error(this._resizeExceptions.invalidMinWidth); if (this.maxWidth < 0 || isNaN(parseInt(this.maxWidth))) throw new Error(this._resizeExceptions.invalidMaxWidth); if (this.resizeIndicatorSize < 0 || isNaN(parseInt(this.resizeIndicatorSize))) throw new Error(this._resizeExceptions.invalidIndicatorSize); if (this.minHeight > this.maxHeight || this.minWidth > this.maxWidth) throw new Error(this._resizeExceptions.invalidSize); if (this.resizeParent && this.resizeParent.width && this.resizeParent.height && this.resizeParent.left && this.resizeParent.top && (this.resizeParent.width < this.resizeTarget.width() || this.resizeParent.width < this.maxWidth || this.resizeParent.height < this.resizeTarget.height() || this.resizeParent.height < this.maxHeight)) throw new Error(this._resizeExceptions.invalidSize) } catch (e) { alert(e) } }, _changeCursor: function (e, t) { this.isResizing || this._resizeMouseDown || (this.resizeArea = !0, e <= this.resizeIndicatorSize && e >= 0 && t <= this.resizeIndicatorSize && t > 0 ? (this._resizeWrapper.css("cursor", "nw-resize"), this._resizeDirection = "topleft") : t <= this.resizeIndicatorSize && t > 0 && e >= this.resizeTarget.width() - this.resizeIndicatorSize ? (this._resizeWrapper.css("cursor", "ne-resize"), this._resizeDirection = "topright") : t >= this.resizeTarget.height() - this.resizeIndicatorSize && t < this.resizeTarget.height() && e <= this.resizeIndicatorSize && e >= 0 ? (this._resizeWrapper.css("cursor", "sw-resize"), this._resizeDirection = "bottomleft") : t >= this.resizeTarget.height() - this.resizeIndicatorSize && t < this.resizeTarget.height() && e >= this.resizeTarget.width() - this.resizeIndicatorSize && e < this.resizeTarget.width() ? (this._resizeWrapper.css("cursor", "se-resize"), this._resizeDirection = "bottomright") : e <= this.resizeIndicatorSize && e >= 0 ? (this._resizeWrapper.css("cursor", "e-resize"), this._resizeDirection = "left") : t <= this.resizeIndicatorSize && t > 0 ? (this._resizeWrapper.css("cursor", "n-resize"), this._resizeDirection = "top") : t >= this.resizeTarget.height() - this.resizeIndicatorSize && t < this.resizeTarget.height() ? (this._resizeWrapper.css("cursor", "n-resize"), this._resizeDirection = "bottom") : e >= this.resizeTarget.width() - this.resizeIndicatorSize && e < this.resizeTarget.width() ? (this._resizeWrapper.css("cursor", "e-resize"), this._resizeDirection = "right") : (this._resizeWrapper.css("cursor", this._cursorBackup), this._resizeDirection = null, this.resizeArea = !1)) }, _prepareResizeMethods: function (e) { this._resizeMethods = [], e.indexOf("left") >= 0 && this._resizeMethods.push(this._resizeLeft), e.indexOf("top") >= 0 && this._resizeMethods.push(this._resizeTop), e.indexOf("right") >= 0 && this._resizeMethods.push(this._resizeRight), e.indexOf("bottom") >= 0 && this._resizeMethods.push(this._resizeBottom) }, _validateResize: function (e, t, i, s, r) { return "horizontal" === i || "both" === i ? this._validateWidth(e, s, r) : "vertical" === i || "both" === i ? this._validateHeight(t, s, r) : { result: !1, fix: 0 } }, _getParent: function () { return null !== this.resizeParent && "undefined" !== this.resizeParent && this.resizeParent.height && this.resizeParent.width && this.resizeParent.top && this.resizeParent.left ? this.resizeParent : { left: 0, top: 0, width: e(document).width(), height: e(document).height() } }, _validateHeight: function (t, i, s) { var r = 0, o = this._getParent(); return e(window).width() > e(document).width() && e.jqx.browser.msie && o.height === e(document).height() && (r = this._SCROLL_WIDTH), "bottom" === s && t + i.position().top + r + 2 > o.height + o.top ? { fix: o.height - i.position().top - r - 2 + o.top, result: !1 } : "top" === s && i.lastHeight - t + i.y < o.top ? { fix: t + (i.lastHeight - t + i.y) - o.top, result: !1 } : t < i.minHeight ? { fix: i.minHeight, result: !1 } : t > i.maxHeight ? { fix: i.maxHeight, result: !1 } : { result: !0, fix: t } }, _validateWidth: function (t, i, s) { var r = 0, o = this._getParent(); return e(window).height() < e(document).height() && e.jqx.browser.msie && document.documentElement.clientWidth >= document.documentElement.scrollWidth && o.width === e(document).width() && (r = this._SCROLL_WIDTH), "right" === s && t + i.position().left + r + 2 > o.width + o.left ? { fix: o.width - i.position().left - r - 2 + o.left, result: !1 } : "left" === s && i.lastWidth - t + i.x < o.left ? { fix: t + (i.lastWidth - t + i.x) - o.left, result: !1 } : t < i.minWidth ? { fix: i.minWidth, result: !1 } : t > i.maxWidth ? { fix: i.maxWidth, result: !1 } : { result: !0, fix: t } }, _resize: function (e, t, i) { this._resizeDirection; for (var s = this._resizeMethods.length, r = 0; r < s; r++) if (this._resizeMethods[r] instanceof Function) { var o = { element: e, x: t, y: i, self: this }; this._resizeMethods[r](o) } this._performResizeLayout() }, resize: function (e, t) { if (this.resizable) { var i = e - this.host.width(), s = t - this.host.height(), r = "right"; 0 != s && (r = "bottom"), this._resizeDirection = r, this._prepareResizeMethods(this._resizeDirection), this._resizeBackupData(), this.isResizing = !0, this._resize(this.resizeTarget, i, s), this.isResizing = !1 } }, _setResizeChildrenSize: function (e, t) { for (var i = this.resizeTargetChildren.length; i;) if (i--, "width" === t) { var s = this.resizeTargetChildren[i].lastWidth - (this.resizeTarget.lastWidth - e); s < this.resizeTarget.maxWidth && s > 0 && this.resizeTargetChildren[i].width(s) } else { var r = this.resizeTargetChildren[i].lastHeight - (this.resizeTarget.lastHeight - e); r < this.resizeTarget.maxHeight && r > 0 && this.resizeTargetChildren[i].height(r) } }, _resizeRight: function (e) { var t = e.element.lastWidth + e.x, i = e.self._validateResize(t, 0, "horizontal", e.element, "right"); return i.result || (t = i.fix), e.element.width() !== t && (e.self._setResizeChildrenSize(t, "width"), e.element.width(t), e.self._raiseResizeEvent(0)), t }, _resizeLeft: function (e) { var t = e.element.lastWidth - e.x, i = e.self._validateResize(t, 0, "horizontal", e.element, "left"), s = e.element.x + e.x; return i.result ? (e.element.width() !== t && (e.self._setResizeChildrenSize(t, "width"), e.element.width(t), e.element.css("left", s), e.self._raiseResizeEvent(0)), t) : (s = e.element.x + (e.element.lastWidth - i.fix), void (t = i.fix)) }, _resizeBottom: function (e) { var t = e.element.lastHeight + e.y, i = e.self._validateResize(0, t, "vertical", e.element, "bottom"); return i.result || (t = i.fix), e.element.height() !== t && (e.self._setResizeChildrenSize(t, "height"), e.element.height(t), e.self._raiseResizeEvent(0)), t }, _resizeTop: function (e) { var t = e.element.lastHeight - e.y, i = e.self._validateResize(0, t, "vertical", e.element, "top"), s = e.element.y + e.y; return i.result ? (e.element.height() !== t && (e.self._setResizeChildrenSize(t, "height"), e.element.height(t), e.element.css("top", s), e.self._raiseResizeEvent(0)), t) : (s = e.element.y + (e.element.lastHeight - i.fix), void (t = i.fix)) }, _raiseResizeEvent: function (t) { var i = this._resizeEvents[t], s = e.Event(i), r = {}; if (r.width = parseInt(this.resizeTarget[0].style.width), r.height = parseInt(this.resizeTarget[0].style.height), s.args = r, 0 == t) { var i = this._resizeEvents[2], o = e.Event(i); o.args = r, this.resizeTarget.trigger(o) } return this.resizeTarget.trigger(s) } } }(jQuery); e.extend(e.jqx._jqxWindow.prototype, t) }(jQuery), function (e) { e.jqx.jqxWidget("jqxDocking", "", {}), e.extend(e.jqx._jqxDocking.prototype, { defineInstance: function () { this.orientation = "horizontal", this.mode = "default", this.floatingWindowOpacity = .3, this.panelsRoundedCorners = !0, this.disabled = !1, this.width = "auto", this.height = "auto", this.windowsMode = null, this.cookies = !1, this.cookieOptions = {}, this.windowsOffset = 5, this.rtl = !1, this._windowOptions = {}, this._draggedFired = !1, this._dragging = !1, this._draggingItem = null, this._panels = [], this._windows = [], this._indicator = null, this._events = ["dragEnd", "dragStart"] }, createInstance: function () { if (!this.host.jqxWindow) throw new Error("jqxDocking: Missing reference to jqxwindow.js."); this._refresh(!0), this.disabled && (this.disabled = !1, this.disable()) }, refresh: function (e) { e || this._performLayout() }, _refresh: function (t) { this._render(), this._removeClasses(), this._addClasses(), this._setWindowsOptions(!0), this._performLayout(), this._cookieHandler(), this._cookieExporter(), this._removeEventListeners(), this._addEventListeners(); var i = e.Event("resize"); this.host.trigger(i) }, resize: function () { this._refresh() }, _addClasses: function () { this.host.addClass("jqx-docking"); for (e = 0; e < this._panels.length; e += 1) this._panels[e].addClass(this.toThemeProperty("jqx-docking-panel")), this.panelsRoundedCorners && this._panels[e].addClass(this.toThemeProperty("jqx-rc-all")); for (var e = 0; e < this._windows.length; e += 1) this._windows[e].addClass(this.toThemeProperty("jqx-docking-window")) }, _removeClasses: function () { this.host.removeClass("jqx-docking"); for (e = 0; e < this._panels.length; e += 1) this._panels[e].removeClass(this.toThemeProperty("jqx-docking-panel")), this._panels[e].removeClass(this.toThemeProperty("jqx-rc-all")); for (var e = 0; e < this._windows.length; e += 1) this._windows[e].removeClass(this.toThemeProperty("jqx-docking-window")) }, _render: function () { for (var t = this.host.children("div"), i = 0; i < t.length; i += 1) this._panels.push(e(t[i])), this._renderWindows(e(t[i])) }, _renderWindows: function (t) { for (var i = t.children("div"), s = 0; s < i.length; s += 1) this._windows.push(e(i[s])), e(i[s]).jqxWindow({ keyboardNavigation: !1, rtl: this.rtl, theme: this.theme, enableResize: !1, width: e(i[s]).css("width"), maxWidth: Number.MAX_VALUE }), e(i[s]).detach(), t.append(e(i[s])); t.append('<div class="spacer" style="clear: both;"></div>') }, _performLayout: function () { this.host.css("width", this.width), this.host.css("height", this.height), this._performWindowsLayout(), this._performPanelsLayout(), this._performWindowsLayout() }, _performPanelsLayout: function () { for (var e, t = this.host.width(), i = 0, s = 0; s < this._panels.length; s += 1) (e = this._panels[s]).css("height", "auto"), e.css("min-width", "auto"), "vertical" === this.orientation ? (e.css("width", "auto"), e.css("float", "none")) : (i += this._handleHorizontalSize(e, i, t), s > 0 && e.css("margin-left", -this.windowsOffset)), e.css("min-width", e.width()); "horizontal" === this.orientation && i < t && this._fillContainer(t, i) }, _handleHorizontalSize: function (e, t, i) { var s, r = i / this._panels.length, o = e.outerWidth() - e.width(); return e.css("float", "left"), "auto" !== e.css("width") && 0 !== parseInt(e.css("width"), 10) || e.width(r - o), t + e.outerWidth() >= i && (t + r < i ? (s = r - o, e.css("min-width", s), e.width(s)) : (s = e.width() - (t + e.outerWidth() - i), e.css("min-width", s), e.width(s))), e.outerWidth() }, _fillContainer: function (t, i) { var s = this._panels.length, r = this._panels[s - 1], o = t - i + r.width(); e.jqx.browser.msie && e.jqx.browser.version < 9 && (o -= this._panels.length), r.width(o) }, _performWindowsLayout: function () { for (var e, t = 0; t < this._windows.length; t += 1) e = this._getWindowOptions(this._windows[t]), this._windows[t].ischildof(this.host) && (e ? "floating" !== e.mode && (this._windows[t].css("margin", this.windowsOffset), this._windows[t].css("position", "static")) : "floating" !== this.mode && (this._windows[t].css("position", "static"), this._windows[t].css("margin", this.windowsOffset))), this._setWindowSize(this._windows[t], e) }, _setWindowSize: function (e, t) { if ("floating" !== t.mode && e.ischildof(this.host)) { var i = e.parent().width() - (e.outerWidth() - e.width()) - 2 * this.windowsOffset; this.orientation, e.jqxWindow("width", i) } this._setWindowOption(e, "size", { width: e.width(), height: e.height() }) }, _setWindowsOptions: function (e) { for (var t = 0; t < this._windows.length; t += 1) { var i, s = this._windows[t].attr("id"), r = this._getWindowOptions(s); if (!e); i = null, this.windowsMode && this.windowsMode.hasOwnProperty(s) ? (i = this.windowsMode[s], this._setWindowOption(this._windows[t], "mode", i)) : void 0 !== r && void 0 === r.mode && (i = this.mode, this._setWindowOption(this._windows[t], "mode", i)), e && (this._setWindowOption(this._windows[t], "resizable", !0), "floating" == i ? this._windows[t].jqxWindow({ enableResize: !0 }) : this._windows[t].jqxWindow({ enableResize: !1 }), this._setWindowOption(this._windows[t], "size", { height: this._windows[t].height(), width: this._windows[t].width() })) } }, _removeEventListeners: function () { for (var e = 0; e < this._windows.length; e += 1) this.removeHandler(this._windows[e], "moving", this._itemDragging), this.removeHandler(this._windows[e], "moved", this._itemDrop), this.removeHandler(this._windows[e], "resized", this._itemResized), this.removeHandler(this._windows[e], "collapse", this._collapsed), this.removeHandler(this._windows[e], "expand", this._expanded) }, _addEventListeners: function () { for (var t = 0; t < this._windows.length; t += 1) this._addEventListenersTo(this._windows[t]); var i = this; e.jqx.utilities.resize(this.host, function () { i._performLayout() }) }, _addEventListenersTo: function (e) { this.addHandler(e, "moving", this._itemDragging, { self: this }), this.addHandler(e, "moved", this._itemDrop, { self: this }), this.addHandler(e, "resized", this._itemResized, { self: this }), this.addHandler(e, "collapse", this._collapsed, { self: this }), this.addHandler(e, "expand", this._expanded, { self: this }) }, _itemDragging: function (t) { var i = t.data.self, s = e(t.target), r = i._getWindowOptions(s); if (s.removeClass(i.toThemeProperty("jqx-docking-window")), s.css("margin", "0px"), i._dragging || i._prepareForDragging(s), "floating" !== r.mode) { var o = { x: t.args.pageX, y: t.args.pageY }, a = i._getMouseOverPanel(o); return a ? i._mouseOverPanel(a, o) : i._mouseLeavePanel(), i._draggedFired || (i._raiseEvent(1, { window: e(s).attr("id") }), i._draggedFired = !0), !0 } }, _prepareForDragging: function (t) { this._dragging = !0; var i = { parent: t.parent(), next: t.next(), prev: t.prev() }; this._setWindowOption(t, "lastPosition", i), t.detach(), e(document.body).append(t), this._setDraggingStyles(t), this._draggingItem = t }, _setDraggingStyles: function (e) { e.css({ position: "absolute", left: e.offset().left, top: e.offset().top }), e.fadeTo(0, this.floatingWindowOpacity) }, _getMouseOverPanel: function (e) { for (var t = 0; t < this._panels.length; t += 1) if (this._isMouseOverItem(this._panels[t], e, !1)) return this._panels[t]; return null }, _mouseOverPanel: function (e, t) { if (this._dragging) { var i = e.children("div"), s = this._getHoverWindow(t, i); if ("indicator" === s) return; var r = this._centerOffset(s, t); this._handleIndicator(e, s, r) } }, _getHoverWindow: function (t, i) { if (this._isMouseOverItem(this._indicator, t, !0)) return "indicator"; for (var s = 0; s < i.length; s += 1) if (this._isMouseOverItem(e(i[s]), t, !0)) return e(i[s]); return null }, _centerOffset: function (e, t) { if (e) { var i, s = { x: e.offset().left, y: e.offset().top }, r = e.height(); e.width(); return i = s.y + r / 2, t.y > i ? "next" : "prev" } return "all" }, _handleIndicator: function (e, t, i) { var s = this._getIndicator(t); "all" === i ? "vertical" === this.orientation ? s.insertBefore(e.children(".spacer")) : e.append(s) : "prev" === i ? s.insertBefore(t) : s.insertAfter(t), this._resizeIndicator(s, e) }, _getIndicator: function () { var t = this._indicator; return t || (t = e('<div class="' + this.toThemeProperty("jqx-docking-drop-indicator") + '"></div>')), this._indicator = t, this._indicator.css("margin", this.windowsOffset), "vertical" === this.orientation && this._indicator.css("float", "left"), t }, _resizeIndicator: function (e, t) { "horizontal" === this.orientation ? (e.width(t.width() - (e.outerWidth(!0) - e.width())), e.height(this._draggingItem.height())) : (e.width(this._draggingItem.width()), e.height(this._draggingItem.height())) }, _mouseLeavePanel: function (e) { this._indicator && (this._indicator.remove(), this._indicator = null) }, _itemDrop: function (t) { var i = t.data.self, s = e(t.currentTarget); i._dragging = !1, i._indicator ? (s.detach(), s.insertAfter(i._indicator), i._indicator.remove(), i._dropFixer(s)) : i._dropHandler(s), s.fadeTo(0, 1), s.focus(), i._indicator = null, i._cookieExporter(), i._draggedFired = !1, i._raiseEvent(0, { window: s.attr("id") }) }, _dropFixer: function (e) { e.css("position", "static"), e.addClass(this.toThemeProperty("jqx-docking-window")), e.css("margin", this.windowsOffset), e.jqxWindow("enableResize", !1), "horizontal" === this.orientation && this._fixWindowSize(e) }, _dropHandler: function (e) { this._getWindowOptions(e); "docked" === this.mode ? this._dropDocked(e) : this._dropFloating(e) }, _dropDocked: function (e) { var t = this._getWindowOptions(e).lastPosition; e.detach(), t.next[0] ? e.insertBefore(t.next) : t.prev[0] ? e.insertAfter(t.prev) : t.parent.append(e), this._dropFixer(e) }, _fixWindowSize: function (t) { e(t).jqxWindow({ width: t.parent().width() - (t.outerWidth() - t.width()) - 2 * parseInt(this.windowsOffset, 10) }) }, _itemResized: function (t) { var i = t.data.self, s = e(t.currentTarget); i._setWindowOption(s, "size", { width: t.args.width, height: t.args.height }), i._cookieExporter() }, _dropFloating: function (t) { var i; e(t).jqxWindow("collapsed") || (i = this._getWindowOptions(t), e(t).jqxWindow("enableResize", i.resizable)), e(document.body).append(t), this._restoreWindowSize(t) }, _restoreWindowSize: function (t) { var i = this._getWindowOptions(t); e(t).jqxWindow({ width: i.size.width }) }, _isMouseOverItem: function (e, t, i) { if (!e) return !1; var s = e.outerWidth(!0), r = e.outerHeight(!0), o = e.width(), a = e.height(), n = e.offset().top, l = e.offset().left; return i && (n -= (r - a) / 2, l -= (s - o) / 2, o = s, a = r), l <= t.x && l + o >= t.x && n <= t.y && n + a + 2 * this._draggingItem.height() / 3 >= t.y }, _cookieHandler: function () { if (this.cookies) { var t = e.jqx.cookie.cookie("jqxDocking" + this.element.id); null !== t && (this.importLayout(t), layoutImported = !0) } }, _cookieExporter: function () { this.cookies && e.jqx.cookie.cookie("jqxDocking" + this.element.id, this.exportLayout(), this.cookieOptions) }, _indexOf: function (e, t) { for (var i = 0; i < t.length; i += 1) if (e[0] === t[i][0]) return i; return -1 }, _exportFixed: function () { for (var t, i, s = [], r = "", o = 0; o < this._panels.length; o += 1) { r += '"panel' + o + '": {', t = this._panels[o].children(); for (var a = 0; a < t.length; a += 1) (i = e(t[a])).attr("id") && (s.push(i), r += '"' + i.attr("id") + '":{"collapsed":' + i.jqxWindow("collapsed") + "},"); t.length > 1 && (r = r.substring(0, r.length - 1)), r += "}," } return r = r.substring(0, r.length - 1), { JSON: r, children: s } }, _exportFloating: function (t) { var i, s = ""; s += '"floating":{'; for (var r = 0; r < this._windows.length; r += 1) i = e(this._windows[r]), -1 === this._indexOf(i, t) && (s += '"' + i.attr("id") + '":{"x":"' + i.css("left") + '","y":"' + i.css("top") + '","width":"' + i.jqxWindow("width") + '","height":"' + i.jqxWindow("height") + '","collapsed":' + i.jqxWindow("collapsed") + "},"); return "," === s.substring(s.length - 1, s.length) && (s = s.substring(0, s.length - 1)), s += "}" }, _importFixed: function (t) { for (var i in t) if ("orientation" !== i && "floating" !== i && t.hasOwnProperty(i)) { order = i.substring(i.length - 1, i.length), order = parseInt(order, 10), children = t[i]; for (var i in children) e("#" + i).css("position", "static"), children[i].collapsed && function (t) { setTimeout(function () { e("#" + t).jqxWindow("collapsed", !0) }, 0) }(i), this._panels[order].append(e("#" + i)), "horizontal" === this.orientation && this._fixWindowSize(e("#" + i)) } }, _importFloating: function (t) { var i, s = t.floating; for (var r in s) s.hasOwnProperty(r) && (e("#" + r).css("position", "absolute"), e(document.body).append(e("#" + r)), i = this._dragging, e("#" + r).jqxWindow("move", s[r].x, s[r].y), this._dragging = i, e("#" + r).jqxWindow("width", s[r].width), e("#" + r).jqxWindow("height", s[r].height), e("#" + r).jqxWindow("enableResize", !0), this._setWindowsOptions(!0), function (t) { setTimeout(function () { e("#" + t).jqxWindow("collapsed", s[t].collapsed) }, 0) }(r), e("#" + r).fadeTo(0, 1)) }, _getWindowOptions: function (e) { return "object" == typeof e && null !== e && (e = e.length > 0 ? e.attr("id") : e.id), this._windowOptions[e] }, _setWindowOption: function (e, t, i) { "object" == typeof e && null !== e && (e = e.length > 0 ? e.attr("id") : e.id), void 0 === this._windowOptions[e] && (this._windowOptions[e] = {}), this._windowOptions[e][t] = i, "mode" === t && this.setWindowMode(e, i) }, _expanded: function (e) { e.data.self._cookieExporter() }, _collapsed: function (e) { e.data.self._cookieExporter() }, _raiseEvent: function (t) { var i = e.Event(this._events[t]); return i.args = arguments[1], this.host.trigger(i) }, _moveWindow: function (t, i, s) { var r = i.children(), o = null, a = 0; e.each(r, function (i) { "static" == e(this).css("position") && (a == s && this != t[0] && (o = this), a++) }), a <= s ? t.appendTo(i) : null != o && t.insertBefore(o), t.css("position", "static") }, propertyChangedHandler: function (t, i, s, r) { switch (i) { case "rtl": e.each(t._windows, function () { this.jqxWindow({ rtl: r }) }); break; case "theme": e.each(t._windows, function () { this.jqxWindow({ theme: r }) }); break; case "orientation": case "height": case "width": t._performLayout(), t._cookieExporter(); break; case "panelsRoundedCorners": t._removeClasses(), t._addClasses(); break; case "disabled": r ? (t.disabled = !1, t.disable()) : (t.disabled = !0, t.enable()); break; case "windowsMode": case "mode": t._setWindowsOptions(!1); break; case "cookies": t._cookieExporter(); break; case "windowsOffset": t._performLayout() } }, destroy: function () { this._removeEventListeners(), this.host.remove(), this.windowsMode = null, this.cookieOptions = null, this._windowOptions = null, this._panels = null, this._windows = null, this._events = null }, disable: function () { if (!this.disabled) { this.disabled = !0, this._removeEventListeners(); for (var t = 0; t < this._windows.length; t += 1) this._windows[t][0].style.opacity = "", e(this._windows[t]).jqxWindow("disable") } }, enable: function () { if (this.disabled) { this.disabled = !1, this._addEventListeners(); for (var t = 0; t < this._windows.length; t += 1) e(this._windows[t]).jqxWindow("enable") } }, move: function (t, i, s) { if (i = this._panels[i]) { var r = e(i.children(".spacer")); r.detach(), t = e("#" + t), "floating" !== this._getWindowOptions(t).mode && (this._moveWindow(t, i, s), i.append(r), this._cookieExporter(), this._dropFixer(t)) } }, exportLayout: function () { var e = "{", t = this._exportFixed(); return e += t.JSON + "," + this._exportFloating(t.children) + ',"orientation": "' + this.orientation + '"', e += "}" }, importLayout: function (t) { try { var i = e.parseJSON(t); this.orientation = i.orientation, this._performLayout(), this._importFixed(i), this._importFloating(i) } catch (e) { alert("Invalid JSON string.") } }, setWindowMode: function (t, i) { var t = e("#" + t), s = this._getWindowOptions(t); "floating" === i ? (t.css("position", "absolute"), this._windowOptions[t.attr("id")].mode = i) : "floating" === s.mode && "absolute" === t.css("position") && (s.lastPosition ? this._dropDocked(t) : (this._panels[0].append(t), this._dropFixer(t))), this._windowOptions[t.attr("id")].mode = i }, hideCloseButton: function (t) { e("#" + t).jqxWindow("showCloseButton", !1) }, showCloseButton: function (t) { e("#" + t).jqxWindow("showCloseButton", !0) }, hideCollapseButton: function (t) { e("#" + t).jqxWindow("showCollapseButton", !1) }, showCollapseButton: function (t) { e("#" + t).jqxWindow("showCollapseButton", !0) }, expandWindow: function (t, i) { e("#" + t).jqxWindow("expand", i) }, collapseWindow: function (t, i) { e("#" + t).jqxWindow("collapse", i) }, setWindowProperty: function (t, i, s) { e("#" + t).jqxWindow(i, s) }, getWindowProperty: function (t, i) { return e("#" + t).jqxWindow(i) }, setWindowPosition: function (t, i, s) { var t = e("#" + t); "floating" === this._getWindowOptions(t).mode && (t.css("position", "absolute"), e(t).jqxWindow("move", i, s, null, !1)) }, hideAllCloseButtons: function () { for (var e = 0; e < this._windows.length; e += 1) this._windows[e].jqxWindow("showCloseButton", !1) }, hideAllCollapseButtons: function () { for (var e = 0; e < this._windows.length; e += 1) this._windows[e].jqxWindow("showCollapseButton", !1) }, showAllCloseButtons: function () { for (var e = 0; e < this._windows.length; e += 1) this._windows[e].jqxWindow("showCloseButton", !0) }, showAllCollapseButtons: function () { for (var e = 0; e < this._windows.length; e += 1) this._windows[e].jqxWindow("showCollapseButton", !0) }, pinWindow: function (t) { e("#" + t).jqxWindow("draggable", !1) }, unpinWindow: function (t) { e("#" + t).jqxWindow("draggable", !0) }, setDraggingMode: function (t) { var i = e("#" + t); this._prepareForDragging(i), i.fadeTo(0, 1) }, enableWindowResize: function (t) { "absolute" === (t = e("#" + t)).css("position") && (this._setWindowOption(t, "resizable", !0), t.jqxWindow("enableResize", !0)) }, disableWindowResize: function (t) { t = e("#" + t), this._setWindowOption(t, "resizable", !1), t.jqxWindow("enableResize", !1) }, addWindow: function (t, i, s, r) { var o = "#" + t; e(o).jqxWindow({ keyboardNavigation: !1, rtl: this.rtl, theme: this.theme, enableResize: !1, width: e(o).css("width"), maxWidth: Number.MAX_VALUE }), this._panels[0].append(e(o)), this._windows.push(e(o)), i ? this._setWindowOption(e(o), "mode", i) : this._setWindowOption(e(o), "mode", this.mode), this._setWindowOption(e(o), "resizable", !0), this._setWindowOption(e(o), "size", { width: e(o).width(), height: e(o).height() }), "floating" == i ? e(o).jqxWindow({ enableResize: !0 }) : e(o).jqxWindow({ enableResize: !1 }), null != this._panels[s] && this._setWindowOption(e(o), "size", { width: this._panels[s].width(), height: this._panels[s].height() }), this._addEventListenersTo(e(o)), void 0 !== s && void 0 !== r && this.move(t, s, r), this._dropFixer(e(o)) }, closeWindow: function (t) { e("#" + t).jqxWindow("closeWindow") } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxDockPanel", "", {}), e.extend(e.jqx._jqxDockPanel.prototype, { defineInstance: function () { this.width = null, this.height = null, this.lastchildfill = !0, this.disabled = !1, this.events = ["layout"] }, createInstance: function (t) { var i = this; this.host.addClass(this.toThemeProperty("jqx-dockpanel")), this.host.addClass(this.toThemeProperty("jqx-rc-all")), this.childrenCount = e(this.host).children().length, this.host.wrapInner('<div style="overflow: hidden; width: 100%; height: 100%;" class="innerContainer"></div>'), this.$wrapper = this.host.find(".innerContainer"), this.$wrapper.css("position", "relative"), this.sizeCache = new Array, this.performLayout(), e.jqx.utilities.resize(this.host, function () { i.refresh() }) }, render: function () { null != this.width && -1 != this.width.toString().indexOf("px") ? this.host.width(this.width) : void 0 == this.width || isNaN(this.width) || this.host.width(this.width), null != this.height && -1 != this.height.toString().indexOf("px") ? this.host.height(this.height) : void 0 == this.height || isNaN(this.height) || this.host.height(this.height), this.sizeCache = new Array, this.performLayout() }, resize: function (e, t) { this.width = e, this.height = t, this.render() }, performLayout: function () { if (!this.disabled) { var t = this.childrenCount, i = 0, s = 0, r = 0, o = 0, a = this, n = { width: this.host.width(), height: this.host.height() }; this.sizeCache.length < this.$wrapper.children().length && e.each(this.$wrapper.children(), function (t) { var i = e(this); i.css("position", "absolute"); var s = { width: i.css("width"), height: i.css("height") }; a.sizeCache[t] = s }), e.each(this.$wrapper.children(), function (l) { var h = this.getAttribute("dock"); void 0 == h && (h = "left"), l == t - 1 && a.lastchildfill && (h = "fill"); var d = e(this); d.css("position", "absolute"), d.css("width", a.sizeCache[l].width), d.css("height", a.sizeCache[l].height); var c = { width: d.outerWidth(), height: d.outerHeight() }, u = { x: r, y: o, width: Math.max(0, n.width - (r + i)), height: Math.max(0, n.height - (o + s)) }; if (l < t) switch (h) { case "left": r += c.width, u.width = c.width; break; case "top": o += c.height, u.height = c.height; break; case "right": i += c.width, u.x = Math.max(0, n.width - i), u.width = c.width; break; case "bottom": s += c.height, u.y = Math.max(0, n.height - s), u.height = c.height } d.css("left", u.x), d.css("top", u.y), d.css("width", u.width), d.css("height", u.height) }), this._raiseevent(0) } }, destroy: function () { e.jqx.utilities.resize(this.host, null, !0), this.host.remove() }, _raiseevent: function (e, t, i) { if (void 0 != this.isInitialized && 1 == this.isInitialized) { var s = this.events[e], r = new jQuery.Event(s); return r.previousValue = t, r.currentValue = i, r.owner = this, this.host.trigger(r) } }, propertyChangedHandler: function (e, t, i, s) { this.isInitialized && e.render() }, refresh: function () { this.render() } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxMaskedInput", "", {}), e.extend(e.jqx._jqxMaskedInput.prototype, { defineInstance: function () { this.value = null, this.mask = "99999", this.width = null, this.height = 25, this.textAlign = "left", this.readOnly = !1, this.cookies = !1, this.promptChar = "_", this.inputMode = "advanced", this.rtl = !1, this.disabled = !1, this.events = ["valuechanged", "textchanged", "mousedown", "mouseup", "keydown", "keyup", "keypress", "change"], this.aria = { "aria-valuenow": { name: "value", type: "string" }, "aria-disabled": { name: "disabled", type: "boolean" } } }, createInstance: function (e) { this.render() }, render: function () { this.host.attr({ role: "textbox" }), this.host.attr("data-role", "input"); var t = this.host.attr("value"); void 0 != t && "" != t && (this.value = t), e.jqx.aria(this), e.jqx.aria(this, "aria-multiline", !1), e.jqx.aria(this, "aria-readonly", this.readOnly), this.host.addClass(this.toThemeProperty("jqx-input")), this.host.addClass(this.toThemeProperty("jqx-rc-all")), this.host.addClass(this.toThemeProperty("jqx-widget")), this.host.addClass(this.toThemeProperty("jqx-widget-content")), maskEditor = this, "div" == this.element.nodeName.toLowerCase() ? (this.element.innerHTML = "", this.maskbox = e("<input autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' type='textarea'/>").appendTo(this.host)) : (this.maskbox = this.host, this.maskbox.attr("autocomplete", "off"), this.maskbox.attr("autocorrect", "off"), this.maskbox.attr("autocapitalize", "off"), this.maskbox.attr("spellcheck", !1)), this.maskbox.addClass(this.toThemeProperty("jqx-reset")), this.maskbox.addClass(this.toThemeProperty("jqx-input-content")), this.maskbox.addClass(this.toThemeProperty("jqx-widget-content")); var i = this.host.attr("name"); i && this.maskbox.attr("name", i), this.rtl && this.maskbox.addClass(this.toThemeProperty("jqx-rtl")); s = this; this.propertyChangeMap.disabled = function (e, t, i, r) { r ? e.maskbox.addClass(s.toThemeProperty("jqx-input-disabled")) : e.maskbox.removeClass(s.toThemeProperty("jqx-input-disabled")) }, this.disabled && (this.maskbox.addClass(this.toThemeProperty("jqx-input-disabled")), this.maskbox.attr("disabled", !0), this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"))), this.selectedText = "", this.self = this, this.oldValue = this._value(), this.items = new Array, this._initializeLiterals(), this._render(), null != this.value && this.inputValue(this.value.toString()); var s = this; if (this.host.parents("form").length > 0 && this.host.parents("form").on("reset", function () { setTimeout(function () { s.clearValue() }, 10) }), this.addHandlers(), this.cookies) { var r = e.jqx.cookie.cookie("maskedInput." + this.element.id); r && this.val(r) } }, addHandlers: function () { var t = this; e.jqx.mobile.isTouchDevice() && (this.inputMode = "simple"); var i = "", s = function (e, t) { var i = String.fromCharCode(t), s = parseInt(i), r = !0; return isNaN(s) || (r = !0, this.maskbox.val().toString().length >= this._getEditStringLength() && 0 == this._selection().length && (r = !1)), e.ctrlKey || e.shiftKey || t >= 65 && t <= 90 && (r = !1), r }; this.addHandler(this.maskbox, "blur", function (s) { if ("simple" == t.inputMode) return t._exitSimpleInputMode(s, t, !1, i), !1; t.rtl && t.maskbox.css("direction", "ltr"), t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")), t.maskbox.val() != i && (t._raiseEvent(7, s), t.cookies && e.jqx.cookie.cookie("maskedInput." + t.element.id, t.maskbox.val())) }), this.addHandler(this.maskbox, "focus", function (s) { if (i = t.maskbox.val(), "simple" == t.inputMode) return t.maskbox[0].value = t._getEditValue(), e.data(t.maskbox, "simpleInputMode", !0), !1; t.rtl && t.maskbox.css("direction", "rtl"), t.host.addClass(t.toThemeProperty("jqx-fill-state-focus")) }), this.addHandler(this.host, "keydown", function (e) { var i = t.readOnly, r = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0; if (i || t.disabled) return !1; if ("simple" != t.inputMode) { var o = t._handleKeyDown(e, r); return o || (e.preventDefault && e.preventDefault(), e.stopPropagation && e.stopPropagation()), o } return s.call(t, e, r) }), this.addHandler(this.host, "keyup", function (e) { var i = t.readOnly, r = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0; return !(!i && !t.disabled) || ("simple" == t.inputMode ? s.call(t, e, r) : (e.preventDefault && e.preventDefault(), e.stopPropagation && e.stopPropagation(), !1)) }), this.addHandler(this.host, "keypress", function (e) { var i = t.readOnly, r = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0; if (i || t.disabled) return !0; if ("simple" == t.inputMode) return s.call(t, e, r); var o = t._handleKeyPress(e, r); return o || (e.preventDefault && e.preventDefault(), e.stopPropagation && e.stopPropagation()), o }) }, focus: function () { try { this.maskbox.focus() } catch (e) { } }, _exitSimpleInputMode: function (t, i, s, r) { if (void 0 == i && (i = t.data), null != i) { if (void 0 == s) { if (null != t.target && null != i.element && (void 0 != t.target.id && t.target.id.toString().length > 0 && i.host.find("#" + t.target.id).length > 0 || t.target == i.element)) return; var o = i.host.offset(), a = o.left, n = o.top, l = i.host.width(), h = i.host.height(), d = e(t.target).offset(); if (d.left >= a && d.left <= a + l && d.top >= n && d.top <= n + h) return } if (!i.disabled && !i.readOnly && null != e.data(i.maskbox, "simpleInputMode")) { for (var c = i.maskbox.val(), u = c.toString(), p = 0, m = 0; m < this.items.length; m++) if (this.items[m].canEdit) { if (!this._match(u.substring(p, p + 1), this.items[m].regex) && "" !== u.substring(p, p + 1)) return i.maskbox[0].value = r, e.data(i.maskbox, "simpleInputMode", null), !1; p++ } return i.inputValue(c, !0), e.data(i.maskbox, "simpleInputMode", null), !1 } } }, _getString: function () { for (var e = "", t = 0; t < this.items.length; t++) { var i = this.items[t].character; this.items[t].character == this.promptChar && this.promptChar != this.items[t].defaultCharacter ? e += this.items[t].defaultCharacter : e += i } return e }, _initializeLiterals: function () { if (void 0 != this.mask && null != this.mask) { this.mask = this.mask.toString(); for (var e = this.mask.length, t = 0; t < e; t++) { var i = this.mask.substring(t, t + 1), s = "", r = !1; if ("[" == i) { for (var o = t; o < e && "]" != this.mask.substring(o, o + 1) ; o++); s = "(" + this.mask.substring(t, o + 1) + ")", t = o, r = !0 } "#" == i ? (s = "(\\d|[+]|[-])", r = !0) : "9" == i || "0" == i ? (s = "\\d", r = !0) : "$" == i ? r = !1 : "/" == i || ":" == i ? r = !1 : "A" == i || "a" == i ? (s = "\\w", r = !0) : "c" == i || "C" == i ? (s = ".", r = !0) : "L" != i && "l" != i || (s = "\\p{L}", r = !0); var a = this, n = function (e, t, i) { n.character = e, n.regex = t, n.canEdit = i, n.defaultCharacter = a.promptChar }; r ? n(this.promptChar, s, r) : n(i, s, r), this.items.push(n) } } else this.items = new Array }, setRegex: function (e, t, i, s) { null != e && void 0 != e && null != t && void 0 != t && e < this.items.length && (this.items[e].regex = t, null != i && void 0 != i && (this.items[e].canEdit = i), null != s && void 0 != s && (this.items[e].defaultCharacter = s)) }, _match: function (e, t) { return new RegExp(t, "i").test(e) }, _raiseEvent: function (e, t) { var i = this.events[e], s = {}; s.owner = this; t.charCode ? t.charCode : t.keyCode && t.keyCode; var r = !0, o = (this.readOnly, new jQuery.Event(i)); return o.owner = this, s.value = this.inputValue(), s.text = this.maskedValue(), o.args = s, (e < 2 || e > 6) && (r = this.host.trigger(o)), r }, _handleKeyPress: function (e, t) { return this._isSpecialKey(t, e) }, _insertKey: function (t) { var i = this._selection(), s = this; if (i.start >= 0 && i.start < this.items.length) { var r = String.fromCharCode(t), o = !1; e.each(this.items, function (e, t) { if (!(e < i.start)) { var a = s.items[e]; if (a.canEdit) { if (s._match(r, a.regex)) { if (!o && i.length > 0) { for (var n = i.start; n < i.end; n++) s.items[n].canEdit && (s.items[n].character = s.promptChar); l = s._getString(); s.maskedValue(l), o = !0 } a.character = r; var l = s._getString(); return s.maskedValue(l), i.start < s.items.length && s._setSelectionStart(e + 1), !1 } return !1 } } }) } }, _deleteSelectedText: function () { var e = this._selection(), t = !1; if (e.start > 0 || e.length > 0) { for (i = e.start; i < e.end; i++) i < this.items.length && this.items[i].canEdit && this.items[i].character != this.promptChar && (this.items[i].character = this.promptChar, t = !0); var s = this._getString(); return this.maskedValue(s), t } }, _saveSelectedText: function () { var t = this._selection(), s = ""; if (t.start > 0 || t.length > 0) for (i = t.start; i < t.end; i++) this.items[i].canEdit && (s += this.items[i].character); if (window.clipboardData) window.clipboardData.setData("Text", s); else { var r = e('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>'); r.val(s), e("body").append(r), r.select(), setTimeout(function () { document.designMode = "off", r.select(), r.remove() }, 100) } return s }, _pasteSelectedText: function () { var t = this._selection(), s = 0, r = t.start, o = "", a = this, n = function (e) { if (!(e != a.selectedText && e.length > 0 && (a.selectedText = e, null == a.selectedText || void 0 == a.selectedText))) { if (t.start >= 0 || t.length > 0) for (i = t.start; i < a.items.length; i++) a.items[i].canEdit && s < a.selectedText.length && (a.items[i].character = a.selectedText[s], s++, r = 1 + i); var o = a._getString(); a.maskedValue(o), r < a.items.length ? a._setSelectionStart(r) : a._setSelectionStart(a.items.length) } }; if (window.clipboardData) o = window.clipboardData.getData("Text"), n(o); else { var l = e('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>'); e("body").append(l), l.select(); setTimeout(function () { var e = l.val(); n(e), l.remove() }, 100) } }, _handleKeyDown: function (t, i) { var s = this._selection(); if (i >= 96 && i <= 105 && (i -= 48), t.ctrlKey && 97 == i || t.ctrlKey && 65 == i) return !0; if (t.ctrlKey && 120 == i || t.ctrlKey && 88 == i) return this.selectedText = this._saveSelectedText(t), this._deleteSelectedText(t), !e.jqx.browser.msie; if (t.ctrlKey && 99 == i || t.ctrlKey && 67 == i) return this.selectedText = this._saveSelectedText(t), !e.jqx.browser.msie; if (t.ctrlKey && 122 == i || t.ctrlKey && 90 == i) return !1; if (t.ctrlKey && 118 == i || t.ctrlKey && 86 == i || t.shiftKey && 45 == i) return this._pasteSelectedText(), !e.jqx.browser.msie; if (s.start >= 0 && s.start < this.items.length) String.fromCharCode(i), this.items[s.start]; if (8 == i) { if (0 == s.length) for (a = this.items.length - 1; a >= 0; a--) if (this.items[a].canEdit && a < s.end && this.items[a].character != this.promptChar) { this._setSelection(a, a + 1); break } s = this._selection(); var r = this._deleteSelectedText(); return (s.start > 0 || s.length > 0) && s.start <= this.items.length && (r ? this._setSelectionStart(s.start) : this._setSelectionStart(s.start - 1)), !1 } if (190 == i) for (a = o = s.start; a < this.items.length; a++) if ("." == this.items[a].character) { this._setSelectionStart(a + 1); break } if (191 == i) for (a = o = s.start; a < this.items.length; a++) if ("/" == this.items[a].character) { this._setSelectionStart(a + 1); break } if (189 == i) for (var o = s.start, a = o; a < this.items.length; a++) if ("-" == this.items[a].character) { this._setSelectionStart(a + 1); break } if (46 == i) { if (0 == s.length) for (a = 0; a < this.items.length; a++) if (this.items[a].canEdit && a >= s.start && this.items[a].character != this.promptChar) { this._setSelection(a, a + 1); break } var n = s; s = this._selection(); this._deleteSelectedText(); return (s.start >= 0 || s.length >= 0) && s.start < this.items.length && (s.length <= 1 ? n.end != s.end ? this._setSelectionStart(s.end) : this._setSelectionStart(s.end + 1) : this._setSelectionStart(s.start)), !1 } return this._insertKey(i), this._isSpecialKey(i, t) }, _isSpecialKey: function (e, t) { return 189 == e || 9 == e || 13 == e || 35 == e || 36 == e || 37 == e || 39 == e || 46 == e || !!(16 === e && t.shiftKey || t.ctrlKey) }, _selection: function () { if ("selectionStart" in this.maskbox[0]) { var e = this.maskbox[0], t = e.selectionEnd - e.selectionStart; return { start: e.selectionStart, end: e.selectionEnd, length: t, text: e.value } } var i = document.selection.createRange(); if (null == i) return { start: 0, end: e.value.length, length: 0 }; var s = this.maskbox[0].createTextRange(), r = s.duplicate(); s.moveToBookmark(i.getBookmark()), r.setEndPoint("EndToStart", s); t = i.text.length; return { start: r.text.length, end: r.text.length + i.text.length, length: t, text: i.text } }, _setSelection: function (e, t) { if ("selectionStart" in this.maskbox[0]) this.maskbox[0].focus(), this.maskbox[0].setSelectionRange(e, t); else { var i = this.maskbox[0].createTextRange(); i.collapse(!0), i.moveEnd("character", t), i.moveStart("character", e), i.select() } }, _setSelectionStart: function (e) { this._setSelection(e, e) }, refresh: function (e) { e || this._render() }, resize: function (e, t) { this.width = e, this.height = t, this.refresh() }, _render: function () { var t = parseInt(this.host.css("border-left-width")), i = parseInt(this.host.css("border-left-width")), s = parseInt(this.host.css("border-left-width")), r = parseInt(this.host.css("border-left-width")), o = parseInt(this.host.css("height")) - s - r, a = parseInt(this.host.css("width")) - t - i; null != this.width && -1 != this.width.toString().indexOf("px") ? a = this.width : void 0 == this.width || isNaN(this.width) || (a = this.width), null != this.height && -1 != this.height.toString().indexOf("px") ? o = this.height : void 0 == this.height || isNaN(this.height) || (o = this.height), a = parseInt(a), o = parseInt(o), this.maskbox[0] != this.element && this.maskbox.css({ "border-left-width": 0, "border-right-width": 0, "border-bottom-width": 0, "border-top-width": 0 }), this.maskbox.css("text-align", this.textAlign); var n = this.maskbox.css("font-size"); isNaN(o) || this.maskbox.css("height", parseInt(n) + 4 + "px"), isNaN(a) || this.maskbox.css("width", a - 2); var l = parseInt(o) - 2 * parseInt(s) - 2 * parseInt(r) - parseInt(n); if (isNaN(l) && (l = 0), isNaN(o) || this.host.height(o), isNaN(a) || this.host.width(a), this.maskbox[0] != this.element) { var h = l / 2; e.jqx.browser.msie && e.jqx.browser.version < 8 && (h = l / 4), this.maskbox.css("padding-right", "0px"), this.maskbox.css("padding-left", "0px"), this.maskbox.css("padding-top", h), this.maskbox.css("padding-bottom", l / 2) } this.maskbox[0].value = this._getString(), this.width && (this.width.toString().indexOf("%") >= 0 && (this.element.style.width = this.width), this.height.toString().indexOf("%") >= 0 && (this.element.style.height = this.height)) }, destroy: function () { this.host.remove() }, maskedValue: function (e) { return void 0 === e ? this._value() : (this.value = e, this._refreshValue(), this.oldValue !== e && (this._raiseEvent(1, e), this.oldValue = e, this._raiseEvent(0, e)), this) }, _value: function () { return this.maskbox.val() }, propertyChangedHandler: function (t, s, r, o) { if (void 0 != this.isInitialized && 0 != this.isInitialized) { if ("rtl" == s && (t.rtl ? t.maskbox.addClass(t.toThemeProperty("jqx-rtl")) : t.maskbox.removeClass(t.toThemeProperty("jqx-rtl"))), "value" === s && (void 0 != o && null != o || (o = ""), "" === o ? this.clear() : (o = o.toString(), this.inputValue(o))), "theme" === s && e.jqx.utilities.setTheme(r, o, this.host), "disabled" == s && (o ? (t.maskbox.addClass(t.toThemeProperty("jqx-input-disabled")), t.host.addClass(t.toThemeProperty("jqx-fill-state-disabled")), t.maskbox.attr("disabled", !0)) : (t.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")), t.host.removeClass(this.toThemeProperty("jqx-input-disabled")), t.maskbox.attr("disabled", !1)), e.jqx.aria(t, "aria-disabled", o)), "readOnly" == s && (this.readOnly = o), "promptChar" == s) { for (i = 0; i < t.items.length; i++) t.items[i].character == t.promptChar && (t.items[i].character = o, t.items[i].defaultCharacter = o); t.promptChar = o } "textAlign" == s && (t.maskbox.css("text-align", o), t.textAlign = o), "mask" == s && (t.mask = o, t.items = new Array, t._initializeLiterals(), t.value = t._getString(), t._refreshValue()), "width" == s ? (t.width = o, t._render()) : "height" == s && (t.height = o, t._render()) } }, _value: function () { return this.value }, _getEditStringLength: function () { var e = ""; for (i = 0; i < this.items.length; i++) this.items[i].canEdit && (e += this.items[i].character); return e.length }, _getEditValue: function () { var e = ""; for (i = 0; i < this.items.length; i++) this.items[i].canEdit && this.items[i].character != this.promptChar && (e += this.items[i].character); return e }, parseValue: function (e) { if (void 0 == e || null == e) return null; var t = e.toString(), s = "", r = 0; for (m = 0; m < t.length; m++) { var o = t.substring(m, m + 1); for (i = r; i < this.items.length; i++) if (this.items[i].canEdit && this._match(o, this.items[i].regex)) { s += o, r = i; break } } return s }, clear: function () { this.clearValue() }, clearValue: function () { this.inputValue("", !0) }, val: function (e) { return void 0 != e && "object" != typeof e && this.maskedValue(e), this.maskbox[0].value }, inputValue: function (e, t) { if (void 0 == e || null == e) { for (var i = "", s = 0; s < this.items.length; s++) this.items[s].canEdit && (i += this.items[s].character); return i } var r = 0; e = e.toString(); for (s = 0; s < this.items.length; s++) this.items[s].canEdit && (this._match(e.substring(r, r + 1), this.items[s].regex) ? (this.items[s].character = e.substring(r, r + 1), r++) : t && (this.items[s].character = this.promptChar, r++)); var o = this._getString(); return this.maskedValue(o), this.inputValue() }, _refreshValue: function () { for (var t = this.maskedValue(), i = 0, s = 0; s < this.items.length; s++) t.length > i && (this.items[s].canEdit && this.items[s].character != t[i] && this._match(t[i], this.items[s].regex) && 1 == t[i].length && (this.items[s].character = t[i]), i++); this.value = this._getString(), t = this.value, this.maskbox[0].value = t, e.jqx.aria(this, "aria-valuenow", t) } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxMenu", "", {}), e.extend(e.jqx._jqxMenu.prototype, { defineInstance: function () { this.items = new Array, this.mode = "horizontal", this.width = null, this.height = null, this.minimizeWidth = "auto", this.easing = "easeInOutSine", this.animationShowDuration = 200, this.animationHideDuration = 200, this.autoCloseInterval = 0, this.animationHideDelay = 100, this.animationShowDelay = 100, this.menuElements = new Array, this.autoSizeMainItems = !1, this.autoCloseOnClick = !0, this.autoCloseOnMouseLeave = !0, this.enableRoundedCorners = !0, this.disabled = !1, this.autoOpenPopup = !0, this.enableHover = !0, this.autoOpen = !0, this.autoGenerate = !0, this.clickToOpen = !1, this.showTopLevelArrows = !1, this.touchMode = "auto", this.source = null, this.popupZIndex = 17e3, this.rtl = !1, this.title = "", this.events = ["shown", "closed", "itemclick", "initialized"] }, createInstance: function (t) { var i = this; if (this.host.attr("role", "menubar"), e.jqx.utilities.resize(this.host, function () { i.refresh() }, !1, "popup" != this.mode), this.host.css("outline", "none"), this.source && null != this.source) { var s = this.loadItems(this.source); this.element.innerHTML = s } if (this._tmpHTML = this.element.innerHTML, this.element.innerHTML.indexOf("UL")) { var r = this.host.find("ul:first"); r.length > 0 && this._createMenu(r[0]) } this.host.data("autoclose", {}), this._render(), this.setSize(), e.jqx.browser.msie && e.jqx.browser.version < 8 && this.host.attr("hideFocus", !0) }, focus: function () { try { this.host.focus() } catch (e) { } }, loadItems: function (t, i) { if (null != t) { if (0 == t.length) return ""; var s = this; this.items = new Array; var r = "<ul>"; return i && (r = '<ul style="width:' + i + ';">'), e.map(t, function (e) { if (void 0 == e) return null; r += s._parseItem(e) }), r += "</ul>" } }, _parseItem: function (e) { var t = ""; if (void 0 == e) return null; var i = e.label; !e.label && e.html && (i = e.html), i || (i = "Item"), "string" == typeof e && (i = e); void 0 != e.selected && e.selected; var s = !1; return void 0 != e.disabled && e.disabled && (s = !0), t += "<li", s && (t += ' item-disabled="true" '), e.label && !e.html && (t += ' item-label="' + i + '" '), null != e.value && (t += ' item-value="' + e.value + '" '), void 0 != e.id && (t += ' id="' + e.id + '" '), t += ">" + i, e.items && (e.subMenuWidth ? t += this.loadItems(e.items, e.subMenuWidth) : t += this.loadItems(e.items)), t += "</li>" }, setSize: function () { null != this.width && -1 != this.width.toString().indexOf("%") ? this.host.width(this.width) : null != this.width && -1 != this.width.toString().indexOf("px") ? this.host.width(this.width) : void 0 == this.width || isNaN(this.width) || this.host.width(this.width), null != this.height && -1 != this.height.toString().indexOf("%") ? this.host.height(this.height) : null != this.height && -1 != this.height.toString().indexOf("px") ? this.host.height(this.height) : void 0 == this.height || isNaN(this.height) || this.host.height(this.height), null === this.height && this.host.height("auto"); if (null != this.minimizeWidth && "popup" != this.mode) { var t = e(window).width(); if (!e.jqx.response) { var i = !1; navigator.userAgent.match(/Windows|Linux|MacOS/) && (navigator.userAgent.indexOf("Windows Phone") >= 0 || navigator.userAgent.indexOf("WPDesktop") >= 0 || navigator.userAgent.indexOf("IEMobile") >= 0 || navigator.userAgent.indexOf("ZuneWP7") >= 0 || (i = !0)); var s = this.minimizeWidth; if (i && "auto" == this.minimizeWidth) return } if ("auto" == this.minimizeWidth && e.jqx.response) { var r = new e.jqx.response; "Phone" != r.device.type && "Tablet" != r.device.type || this.minimized || this.minimize() } else t < s && !this.minimized ? this.minimize() : this.minimized && t >= s && this.restore() } }, minimize: function () { if (!this.minimized) { var t = this; this.host.addClass(this.toThemeProperty("jqx-menu-minimized")), this.minimized = !0, this._tmpMode = this.mode, this.mode = "simple"; var i = this.host.closest("div.jqx-menu-wrapper"); if (i.remove(), e("#menuWrapper" + this.element.id).remove(), e.each(this.items, function () { var t = this; e(t.element); e(t.subMenuElement).closest("div.jqx-menu-popup").remove() }), this.source) { var s = this.loadItems(this.source); this.element.innerHTML = s } else if (this.element.innerHTML = this._tmpHTML, this.element.innerHTML.indexOf("UL")) { var r = this.host.find("ul:first"); r.length > 0 && this._createMenu(r[0]) } this._render(); var o = this.host.find("ul:first"); o.wrap('<div class="jqx-menu-wrapper" style="z-index:' + this.popupZIndex + '; padding: 0px; display: none; margin: 0px; height: auto; width: auto; position: absolute; top: 0; left: 0; display: block; visibility: visible;"></div>'), (i = o.closest("div.jqx-menu-wrapper"))[0].id = "menuWrapper" + this.element.id, i.detach(), i.appendTo(e(document.body)), i.addClass(this.toThemeProperty("jqx-widget")), i.addClass(this.toThemeProperty("jqx-menu")), i.addClass(this.toThemeProperty("jqx-menu-minimized")), i.addClass(this.toThemeProperty("jqx-widget-header")), o.children().hide(), i.hide(), i.find("ul").addClass(this.toThemeProperty("jqx-menu-ul-minimized")), this.minimizedItem = e("<div></div>"), this.minimizedItem.addClass(this.toThemeProperty("jqx-item")), this.minimizedItem.addClass(this.toThemeProperty("jqx-menu-item-top")), this.minimizedItem.addClass(this.toThemeProperty("jqx-menu-minimized-button")), this.minimizedItem.prependTo(this.host), this.titleElement = e("<div>" + this.title + "</div>"), this.titleElement.addClass(this.toThemeProperty("jqx-item")), this.titleElement.addClass(this.toThemeProperty("jqx-menu-title")), this.titleElement.prependTo(this.host), e("<div style='clear:both;'></div>").insertAfter(this.minimizedItem), t.minimizedHidden = !0; var a = function (e) { t.minimizedHidden = !0, t.minimizedItem.show(); var s = !1; "right" == t.minimizedItem.css("float") && (s = !0), i.animate({ left: s ? t.host.coord().left + t.host.width() + i.width() : -i.outerWidth(), opacity: 0 }, t.animationHideDuration, function () { i.find("ul:first").children().hide(), i.hide() }) }, n = function (e) { if (t.minimizedHidden) { i.find("ul:first").children().show(), t.minimizedHidden = !1, i.show(), i.css("opacity", 0), i.css("left", -i.outerWidth()); var s = !1, r = i.width(); "right" == t.minimizedItem.css("float") && (i.css("left", t.host.coord().left + t.host.width() + r), s = !0), i.css("top", t.host.coord().top + t.host.height()), i.animate({ left: s ? t.host.coord().left + t.host.width() - r : t.host.coord().left, opacity: .95 }, t.animationShowDuration, function () { }) } else a(); t._raiseEvent("2", { item: t.minimizedItem[0], event: e }), t.setSize() }; this.addHandler(e(window), "orientationchange.jqxmenu" + this.element.id, function (e) { setTimeout(function () { if (!t.minimizedHidden) { var e = i.width(), s = !1, e = i.width(); "right" == t.minimizedItem.css("float") && (s = !0), i.css("top", t.host.coord().top + t.host.height()), i.css({ left: s ? t.host.coord().left + t.host.width() - e : t.host.coord().left }) } }, 25) }), this.addHandler(this.minimizedItem, "click", function (e) { n(e) }) } }, restore: function () { if (this.minimized) { if (this.host.find("ul").removeClass(this.toThemeProperty("jqx-menu-ul-minimized")), this.host.removeClass(this.toThemeProperty("jqx-menu-minimized")), this.minimized = !1, this.mode = this._tmpMode, this.minimizedItem && this.minimizedItem.remove(), e("#menuWrapper" + this.element.id).remove(), this.source) { var t = this.loadItems(this.source); this.element.innerHTML = t } else if (this.element.innerHTML = this._tmpHTML, this.element.innerHTML.indexOf("UL")) { var i = this.host.find("ul:first"); i.length > 0 && this._createMenu(i[0]) } this.setSize(), this._render() } }, isTouchDevice: function () { if (void 0 != this._isTouchDevice) return this._isTouchDevice; var t = e.jqx.mobile.isTouchDevice(); return 1 == this.touchMode ? t = !0 : 0 == this.touchMode && (t = !1), t && (this.host.addClass(this.toThemeProperty("jqx-touch")), e(".jqx-menu-item").addClass(this.toThemeProperty("jqx-touch"))), this._isTouchDevice = t, t }, refresh: function (e) { e || this.setSize() }, resize: function (e, t) { this.width = e, this.height = t, this.refresh() }, _closeAll: function (t) { var i = null != t ? t.data : this, s = i.items; e.each(s, function () { var e = this; 1 == e.hasItems && e.isOpen && i._closeItem(i, e) }), "popup" == i.mode && null != t && (i._isRightClick(t) || i.close()) }, closeItem: function (t) { if (null == t) return !1; var i = t, s = document.getElementById(i), r = this; return e.each(r.items, function () { var e = this; 1 == e.isOpen && e.element == s && (r._closeItem(r, e), e.parentId && r.closeItem(e.parentId)) }), !0 }, openItem: function (t) { if (null == t) return !1; var i = t, s = document.getElementById(i), r = this; return e.each(r.items, function () { var e = this; 0 == e.isOpen && e.element == s && (r._openItem(r, e), e.parentId && r.openItem(e.parentId)) }), !0 }, _getClosedSubMenuOffset: function (t) { var i = e(t.subMenuElement), s = -i.outerHeight(), r = -i.outerWidth(), o = 0 == t.level && "horizontal" == this.mode; switch (o ? r = 0 : s = 0, t.openVerticalDirection) { case "up": case "center": s = i.outerHeight() } switch (t.openHorizontalDirection) { case this._getDir("left"): case "center": r = o ? 0 : i.outerWidth() } return { left: r, top: s } }, _closeItem: function (t, i, s, r) { if (null == t || null == i) return !1; var o = e(i.subMenuElement), a = 0 == i.level && "horizontal" == this.mode, n = this._getClosedSubMenuOffset(i), l = n.top, h = n.left, d = (e(i.element), o.closest("div.jqx-menu-popup")); if (null != d) { var c = t.animationHideDelay; 1 == r && (c = 0), null != o.data("timer").show && (clearTimeout(o.data("timer").show), o.data("timer").show = null); var u = function () { i.isOpen = !1, a ? o.stop().animate({ top: l }, t.animationHideDuration, function () { e(i.element).removeClass(t.toThemeProperty("jqx-fill-state-pressed")), e(i.element).removeClass(t.toThemeProperty("jqx-menu-item-top-selected")), e(i.element).removeClass(t.toThemeProperty("jqx-rc-b-expanded")), d.removeClass(t.toThemeProperty("jqx-rc-t-expanded")); var s = e(i.arrow); s.length > 0 && t.showTopLevelArrows && (s.removeClass(), "down" == i.openVerticalDirection ? (s.addClass(t.toThemeProperty("jqx-menu-item-arrow-down")), s.addClass(t.toThemeProperty("jqx-icon-arrow-down"))) : (s.addClass(t.toThemeProperty("jqx-menu-item-arrow-up")), s.addClass(t.toThemeProperty("jqx-icon-arrow-up")))), e.jqx.aria(e(i.element), "aria-expanded", !1), d.css({ display: "none" }), 0 == t.animationHideDuration && o.css({ top: l }), t._raiseEvent("1", i) }) : (e.jqx.browser.msie, o.stop().animate({ left: h }, t.animationHideDuration, function () { if (0 == t.animationHideDuration && o.css({ left: h }), i.level > 0) e(i.element).removeClass(t.toThemeProperty("jqx-fill-state-pressed")), e(i.element).removeClass(t.toThemeProperty("jqx-menu-item-selected")), (s = e(i.arrow)).length > 0 && (s.removeClass(), "left" != i.openHorizontalDirection ? (s.addClass(t.toThemeProperty("jqx-menu-item-arrow-" + t._getDir("right"))), s.addClass(t.toThemeProperty("jqx-icon-arrow-" + t._getDir("right")))) : (s.addClass(t.toThemeProperty("jqx-menu-item-arrow-" + t._getDir("left"))), s.addClass(t.toThemeProperty("jqx-icon-arrow-" + t._getDir("left"))))); else { e(i.element).removeClass(t.toThemeProperty("jqx-fill-state-pressed")), e(i.element).removeClass(t.toThemeProperty("jqx-menu-item-top-selected")); var s = e(i.arrow); s.length > 0 && (s.removeClass(), "left" != i.openHorizontalDirection ? (s.addClass(t.toThemeProperty("jqx-menu-item-arrow-top-" + t._getDir("right"))), s.addClass(t.toThemeProperty("jqx-icon-arrow-" + t._getDir("right")))) : (s.addClass(t.toThemeProperty("jqx-menu-item-arrow-top-" + t._getDir("left"))), s.addClass(t.toThemeProperty("jqx-icon-arrow-" + t._getDir("left"))))) } e.jqx.aria(e(i.element), "aria-expanded", !1), d.css({ display: "none" }), t._raiseEvent("1", i) })) }; if (c > 0 ? o.data("timer").hide = setTimeout(function () { u() }, c) : u(), void 0 != s && s) { var p = o.children(); e.each(p, function () { if (t.menuElements[this.id] && t.menuElements[this.id].isOpen) { e(t.menuElements[this.id].subMenuElement); t._closeItem(t, t.menuElements[this.id], !0, !0) } }) } } }, getSubItems: function (t, i) { if (null == t) return !1; var s = this, r = new Array; null != i && e.extend(r, i); var o = t, a = this.menuElements[o], n = e(a.subMenuElement).find(".jqx-menu-item"); return e.each(n, function () { r[this.id] = s.menuElements[this.id]; var t = s.getSubItems(this.id, r); e.extend(r, t) }), r }, disable: function (t, i) { if (null != t) { var s = t, r = this; if (this.menuElements[s]) { var o = this.menuElements[s]; o.disabled = i; var a = e(o.element); o.element.disabled = i, e.each(a.children(), function () { this.disabled = i }), i ? (a.addClass(r.toThemeProperty("jqx-menu-item-disabled")), a.addClass(r.toThemeProperty("jqx-fill-state-disabled"))) : (a.removeClass(r.toThemeProperty("jqx-menu-item-disabled")), a.removeClass(r.toThemeProperty("jqx-fill-state-disabled"))) } } }, _setItemProperty: function (e, t, i) { if (null != e) { var s = e; if (this.menuElements[s]) { var r = this.menuElements[s]; r[t] && (r[t] = i) } } }, setItemOpenDirection: function (t, i, s) { if (null != t) { var r = t, o = this, a = e.jqx.browser.msie && e.jqx.browser.version < 8; if (this.menuElements[r]) { var n = this.menuElements[r]; if (null != i && (n.openHorizontalDirection = i, n.hasItems && n.level > 0 && void 0 != (h = e(n.element)))) { l = e(n.arrow); null == n.arrow && (l = e('<span id="arrow' + h[0].id + '"></span>'), a ? l.appendTo(h) : l.prependTo(h), n.arrow = l[0]), l.removeClass(), "left" == n.openHorizontalDirection ? (l.addClass(o.toThemeProperty("jqx-menu-item-arrow-" + o._getDir("left"))), l.addClass(o.toThemeProperty("jqx-icon-arrow-" + o._getDir("left")))) : (l.addClass(o.toThemeProperty("jqx-menu-item-arrow-" + o._getDir("right"))), l.addClass(o.toThemeProperty("jqx-icon-arrow-" + o._getDir("right")))), l.css("visibility", "visible"), a ? (l.css("display", "inline-block"), l.css("float", "none")) : (l.css("display", "block"), l.css("float", "right")) } if (null != s) { n.openVerticalDirection = s; var l = e(n.arrow), h = e(n.element); if (!o.showTopLevelArrows) return; void 0 != h && (null == n.arrow && (l = e('<span id="arrow' + h[0].id + '"></span>'), a ? l.appendTo(h) : l.prependTo(h), n.arrow = l[0]), l.removeClass(), "down" == n.openVerticalDirection ? (l.addClass(o.toThemeProperty("jqx-menu-item-arrow-down")), l.addClass(o.toThemeProperty("jqx-icon-arrow-down"))) : (l.addClass(o.toThemeProperty("jqx-menu-item-arrow-up")), l.addClass(o.toThemeProperty("jqx-icon-arrow-up"))), l.css("visibility", "visible"), a ? (l.css("display", "inline-block"), l.css("float", "none")) : (l.css("display", "block"), l.css("float", "right"))) } } } }, _getSiblings: function (e) { var t = new Array, s = 0; for (i = 0; i < this.items.length; i++) this.items[i] != e && this.items[i].parentId == e.parentId && this.items[i].hasItems && (t[s++] = this.items[i]); return t }, _openItem: function (t, i, s) { if (null == t || null == i) return !1; if (i.isOpen) return !1; if (i.disabled) return !1; if (t.disabled) return !1; var r = t.popupZIndex; void 0 != s && (r = s); var o = t.animationHideDuration; t.animationHideDuration = 0, t._closeItem(t, i, !0, !0), t.animationHideDuration = o, this.host.focus(); var a = [5, 5], n = e(i.subMenuElement); null != n && n.stop(), null != n.data("timer").hide && clearTimeout(n.data("timer").hide); var l = n.closest("div.jqx-menu-popup"), h = e(i.element), d = 0 == i.level ? this._getOffset(i.element) : h.position(); if (i.level > 0 && this.hasTransform) { var c = parseInt(h.coord().top) - parseInt(this._getOffset(i.element).top); d.top += c } 0 == i.level && "popup" == this.mode && (d = h.coord()); var u = 0 == i.level && "horizontal" == this.mode, p = u ? d.left : null != this.menuElements[i.parentId] && null != this.menuElements[i.parentId].subMenuElement ? parseInt(e(e(this.menuElements[i.parentId].subMenuElement).closest("div.jqx-menu-popup")).outerWidth()) - a[0] : parseInt(n.outerWidth()); if (l.css({ visibility: "visible", display: "block", left: p, top: u ? d.top + h.outerHeight() : d.top, zIndex: r }), n.css("display", "block"), "horizontal" != this.mode && 0 == i.level) { var m = this._getOffset(this.element); l.css("left", -1 + m.left + this.host.outerWidth()), n.css("left", -n.outerWidth()) } else { var g = this._getClosedSubMenuOffset(i); n.css("left", g.left), n.css("top", g.top) } l.css({ height: parseInt(n.outerHeight()) + parseInt(a[1]) + "px" }); var f = 0, v = 0; switch (i.openVerticalDirection) { case "up": if (u) { n.css("top", n.outerHeight()), f = a[1]; var x = parseInt(n.parent().css("padding-bottom")); isNaN(x) && (x = 0), x > 0 && l.addClass(this.toThemeProperty("jqx-menu-popup-clear")), n.css("top", n.outerHeight() - x), l.css({ display: "block", top: d.top - l.outerHeight(), zIndex: r }) } else f = a[1], n.css("top", n.outerHeight()), l.css({ display: "block", top: d.top - l.outerHeight() + a[1] + h.outerHeight(), zIndex: r }); break; case "center": u ? (n.css("top", 0), l.css({ display: "block", top: d.top - l.outerHeight() / 2 + a[1], zIndex: r })) : (n.css("top", 0), l.css({ display: "block", top: d.top + h.outerHeight() / 2 - l.outerHeight() / 2 + a[1], zIndex: r })) } switch (i.openHorizontalDirection) { case this._getDir("left"): u ? l.css({ left: d.left - (l.outerWidth() - h.outerWidth() - a[0]) }) : (v = 0, n.css("left", l.outerWidth()), l.css({ left: d.left - l.outerWidth() + 2 * i.level })); break; case "center": u ? l.css({ left: d.left - (l.outerWidth() / 2 - h.outerWidth() / 2 - a[0] / 2) }) : (l.css({ left: d.left - (l.outerWidth() / 2 - h.outerWidth() / 2 - a[0] / 2) }), n.css("left", l.outerWidth())) } if (u) { if (parseInt(n.css("top")) == f) return void (i.isOpen = !0) } else if (parseInt(n.css("left")) == v) return void i.isOpen; e.each(t._getSiblings(i), function () { t._closeItem(t, this, !0, !0) }); var w = e.data(t.element, "animationHideDelay"); t.animationHideDelay = w, this.autoCloseInterval > 0 && (null != this.host.data("autoclose") && null != this.host.data("autoclose").close && clearTimeout(this.host.data("autoclose").close), null != this.host.data("autoclose") && (this.host.data("autoclose").close = setTimeout(function () { t._closeAll() }, this.autoCloseInterval))), n.data("timer").show = setTimeout(function () { if (null != l) if (u) n.stop(), n.css("left", v), e.jqx.browser.msie, h.addClass(t.toThemeProperty("jqx-fill-state-pressed")), h.addClass(t.toThemeProperty("jqx-menu-item-top-selected")), "down" == i.openVerticalDirection ? (e(i.element).addClass(t.toThemeProperty("jqx-rc-b-expanded")), l.addClass(t.toThemeProperty("jqx-rc-t-expanded"))) : (e(i.element).addClass(t.toThemeProperty("jqx-rc-t-expanded")), l.addClass(t.toThemeProperty("jqx-rc-b-expanded"))), (s = e(i.arrow)).length > 0 && t.showTopLevelArrows && (s.removeClass(), "down" == i.openVerticalDirection ? (s.addClass(t.toThemeProperty("jqx-menu-item-arrow-down-selected")), s.addClass(t.toThemeProperty("jqx-icon-arrow-down"))) : (s.addClass(t.toThemeProperty("jqx-menu-item-arrow-up-selected")), s.addClass(t.toThemeProperty("jqx-icon-arrow-up")))), 0 == t.animationShowDuration ? (n.css({ top: f }), i.isOpen = !0, t._raiseEvent("0", i), e.jqx.aria(e(i.element), "aria-expanded", !0)) : n.animate({ top: f }, t.animationShowDuration, t.easing, function () { i.isOpen = !0, e.jqx.aria(e(i.element), "aria-expanded", !0), t._raiseEvent("0", i) }); else { if (n.stop(), n.css("top", f), e.jqx.browser.msie, i.level > 0) h.addClass(t.toThemeProperty("jqx-fill-state-pressed")), h.addClass(t.toThemeProperty("jqx-menu-item-selected")), (s = e(i.arrow)).length > 0 && (s.removeClass(), "left" != i.openHorizontalDirection ? (s.addClass(t.toThemeProperty("jqx-menu-item-arrow-" + t._getDir("right") + "-selected")), s.addClass(t.toThemeProperty("jqx-icon-arrow-" + t._getDir("right")))) : (s.addClass(t.toThemeProperty("jqx-menu-item-arrow-" + t._getDir("left") + "-selected")), s.addClass(t.toThemeProperty("jqx-icon-arrow-" + t._getDir("left"))))); else { h.addClass(t.toThemeProperty("jqx-fill-state-pressed")), h.addClass(t.toThemeProperty("jqx-menu-item-top-selected")); var s = e(i.arrow); s.length > 0 && (s.removeClass(), "left" != i.openHorizontalDirection ? (s.addClass(t.toThemeProperty("jqx-menu-item-arrow-" + t._getDir("right") + "-selected")), s.addClass(t.toThemeProperty("jqx-icon-arrow-" + t._getDir("right")))) : (s.addClass(t.toThemeProperty("jqx-menu-item-arrow-" + t._getDir("left") + "-selected")), s.addClass(t.toThemeProperty("jqx-icon-arrow-" + t._getDir("left"))))) } e.jqx.browser.msie, 0 == t.animationShowDuration ? (n.css({ left: v }), t._raiseEvent("0", i), i.isOpen = !0, e.jqx.aria(e(i.element), "aria-expanded", !0)) : n.animate({ left: v }, t.animationShowDuration, t.easing, function () { t._raiseEvent("0", i), i.isOpen = !0, e.jqx.aria(e(i.element), "aria-expanded", !0) }) } }, this.animationShowDelay) }, _getDir: function (e) { switch (e) { case "left": return this.rtl ? "right" : "left"; case "right": return this.rtl ? "left" : "right" } return "left" }, _applyOrientation: function (t, i) { var s = this, r = 0; if (this.host.removeClass(s.toThemeProperty("jqx-menu-horizontal")), this.host.removeClass(s.toThemeProperty("jqx-menu-vertical")), this.host.removeClass(s.toThemeProperty("jqx-menu")), this.host.removeClass(s.toThemeProperty("jqx-widget")), this.host.addClass(s.toThemeProperty("jqx-widget")), this.host.addClass(s.toThemeProperty("jqx-menu")), void 0 != t && void 0 != i && "popup" == i) { if (this.host.parent().length > 0 && this.host.parent().parent().length > 0 && this.host.parent().parent()[0] == document.body) { var o = e.data(document.body, "jqxMenuOldHost" + this.element.id); null != o && ((a = this.host.closest("div.jqx-menu-wrapper")).remove(), a.appendTo(o), this.host.css("display", "block"), this.host.css("visibility", "visible"), a.css("display", "block"), a.css("visibility", "visible")) } } else void 0 == t && void 0 == i && e.data(document.body, "jqxMenuOldHost" + this.element.id, this.host.parent()[0]); switch (this.autoOpenPopup && "popup" == this.mode ? (this.addHandler(e(document), "contextmenu." + this.element.id, function (e) { return !1 }), this.addHandler(e(document), "mousedown.menu" + this.element.id, function (e) { s._openContextMenu(e) })) : (this.removeHandler(e(document), "contextmenu." + this.element.id), this.removeHandler(e(document), "mousedown.menu" + this.element.id)), this.rtl && this.host.addClass(this.toThemeProperty("jqx-rtl")), this.mode) { case "horizontal": this.host.addClass(s.toThemeProperty("jqx-widget-header")), this.host.addClass(s.toThemeProperty("jqx-menu-horizontal")), e.each(this.items, function () { var t = this; if ($element = e(t.element), (i = e(t.arrow)).removeClass(), t.hasItems && t.level > 0 && ((i = e('<span style="border: none; background-color: transparent;" id="arrow' + $element[0].id + '"></span>')).prependTo($element), i.css("float", s._getDir("right")), i.addClass(s.toThemeProperty("jqx-menu-item-arrow-" + s._getDir("right"))), i.addClass(s.toThemeProperty("jqx-icon-arrow-" + s._getDir("right"))), t.arrow = i[0]), 0 == t.level) { if (e(t.element).css("float", s._getDir("left")), !t.ignoretheme && t.hasItems && s.showTopLevelArrows) { var i = e('<span style="border: none; background-color: transparent;" id="arrow' + $element[0].id + '"></span>'), o = e.jqx.browser.msie && e.jqx.browser.version < 8; null == t.arrow ? o ? i.appendTo($element) : i.prependTo($element) : i = e(t.arrow), "down" == t.openVerticalDirection ? (i.addClass(s.toThemeProperty("jqx-menu-item-arrow-down")), i.addClass(s.toThemeProperty("jqx-icon-arrow-down"))) : (i.addClass(s.toThemeProperty("jqx-menu-item-arrow-up")), i.addClass(s.toThemeProperty("jqx-icon-arrow-up"))), i.css("visibility", "visible"), o ? i.css("display", "inline-block") : (i.css("display", "block"), i.css("float", "right")), t.arrow = i[0] } else t.ignoretheme || !t.hasItems || s.showTopLevelArrows || null != t.arrow && ((i = e(t.arrow)).remove(), t.arrow = null); r = Math.max(r, $element.height()) } }); break; case "vertical": case "popup": case "simple": if (this.host.addClass(s.toThemeProperty("jqx-menu-vertical")), e.each(this.items, function () { var t = this; if ($element = e(t.element), t.hasItems && !t.ignoretheme) { if (t.arrow && e(t.arrow).remove(), "simple" == s.mode) return !0; var i = e('<span style="border: none; background-color: transparent;" id="arrow' + $element[0].id + '"></span>'); i.prependTo($element), i.css("float", "right"), 0 == t.level ? (i.addClass(s.toThemeProperty("jqx-menu-item-arrow-top-" + s._getDir("right"))), i.addClass(s.toThemeProperty("jqx-icon-arrow-" + s._getDir("right")))) : (i.addClass(s.toThemeProperty("jqx-menu-item-arrow-" + s._getDir("right"))), i.addClass(s.toThemeProperty("jqx-icon-arrow-" + s._getDir("right")))), t.arrow = i[0] } $element.css("float", "none") }), "popup" == this.mode) { this.host.addClass(s.toThemeProperty("jqx-widget-content")), this.host.wrap('<div class="jqx-menu-wrapper" style="z-index:' + this.popupZIndex + '; border: none; background-color: transparent; padding: 0px; margin: 0px; position: absolute; top: 0; left: 0; display: block; visibility: visible;"></div>'); var a = this.host.closest("div.jqx-menu-wrapper"); this.host.addClass(s.toThemeProperty("jqx-popup")), a[0].id = "menuWrapper" + this.element.id, a.appendTo(e(document.body)) } else this.host.addClass(s.toThemeProperty("jqx-widget-header")); if ("popup" == this.mode) { var n = this.host.height(); this.host.css("position", "absolute"), this.host.css("top", "0"), this.host.css("left", "0"), "simple" != this.mode && (this.host.height(n), this.host.css("display", "none")) } } var l = this.isTouchDevice(); this.autoCloseOnClick && (this.removeHandler(e(document), "mousedown.menu" + this.element.id, s._closeAfterClick), this.addHandler(e(document), "mousedown.menu" + this.element.id, s._closeAfterClick, s), l && (this.removeHandler(e(document), e.jqx.mobile.getTouchEventName("touchstart") + ".menu" + this.element.id, s._closeAfterClick, s), this.addHandler(e(document), e.jqx.mobile.getTouchEventName("touchstart") + ".menu" + this.element.id, s._closeAfterClick, s))) }, _getBodyOffset: function () { var t = 0, i = 0; return "0px" != e("body").css("border-top-width") && (t = parseInt(e("body").css("border-top-width")), isNaN(t) && (t = 0)), "0px" != e("body").css("border-left-width") && (i = parseInt(e("body").css("border-left-width")), isNaN(i) && (i = 0)), { left: i, top: t } }, _getOffset: function (t) { var i = e.jqx.mobile.isSafariMobileBrowser(), s = e(t).coord(!0), r = s.top, o = s.left; "0px" != e("body").css("border-top-width") && (r = parseInt(r) + this._getBodyOffset().top), "0px" != e("body").css("border-left-width") && (o = parseInt(o) + this._getBodyOffset().left); var a = e.jqx.mobile.isWindowsPhone(); return this.hasTransform || null != i && i || a ? { left: e.jqx.mobile.getLeftPos(t), top: e.jqx.mobile.getTopPos(t) } : { left: o, top: r } }, _isRightClick: function (e) { var t; if (!e) var e = window.event; return e.which ? t = 3 == e.which : e.button && (t = 2 == e.button), t }, _openContextMenu: function (e) { var t = this; t._isRightClick(e) && t.open(parseInt(e.clientX) + 5, parseInt(e.clientY) + 5) }, close: function () { var t = this; if (e.data(this.element, "contextMenuOpened" + this.element.id)) { this.host; e.each(t.items, function () { var e = this; e.hasItems && t._closeItem(t, e) }), e.each(t.items, function () { var t = this; 1 == t.isOpen && ($submenu = e(t.subMenuElement), $submenu.closest("div.jqx-menu-popup").hide(this.animationHideDuration)) }), this.host.hide(this.animationHideDuration), e.data(t.element, "contextMenuOpened" + this.element.id, !1), t._raiseEvent("1", t) } }, open: function (t, i) { if ("popup" == this.mode) { var s = 0; "block" == this.host.css("display") && (this.close(), s = this.animationHideDuration); var r = this; void 0 != t && null != t || (t = 0), void 0 != i && null != i || (i = 0), setTimeout(function () { r.host.show(r.animationShowDuration), r.host.css("visibility", "visible"), e.data(r.element, "contextMenuOpened" + r.element.id, !0), r._raiseEvent("0", r), r.host.css("z-index", 9999), void 0 != t && void 0 != i && r.host.css({ left: t, top: i }) }, s) } }, _renderHover: function (e, t, i) { var s = this; t.ignoretheme || (this.addHandler(e, "mouseenter", function () { t.disabled || t.separator || !s.enableHover || s.disabled || (t.level > 0 ? (e.addClass(s.toThemeProperty("jqx-fill-state-hover")), e.addClass(s.toThemeProperty("jqx-menu-item-hover"))) : (e.addClass(s.toThemeProperty("jqx-fill-state-hover")), e.addClass(s.toThemeProperty("jqx-menu-item-top-hover")))) }), this.addHandler(e, "mouseleave", function () { t.disabled || t.separator || !s.enableHover || s.disabled || (t.level > 0 ? (e.removeClass(s.toThemeProperty("jqx-fill-state-hover")), e.removeClass(s.toThemeProperty("jqx-menu-item-hover"))) : (e.removeClass(s.toThemeProperty("jqx-fill-state-hover")), e.removeClass(s.toThemeProperty("jqx-menu-item-top-hover")))) })) }, _closeAfterClick: function (t) { var i = null != t ? t.data : this, s = !1; i.autoCloseOnClick && (e.each(e(t.target).parents(), function () { if (this.className.indexOf && -1 != this.className.indexOf("jqx-menu")) return s = !0, !1 }), s || (t.data = i, i._closeAll(t))) }, _autoSizeHorizontalMenuItems: function () { var t = this; if (t.autoSizeMainItems && "horizontal" == this.mode) { var i = this.maxHeight; parseInt(i) > parseInt(this.host.height()) && (i = parseInt(this.host.height())), i = parseInt(this.host.height()), e.each(this.items, function () { var s = this; if ($element = e(s.element), 0 == s.level && i > 0) { var r = $element.children().length > 0 ? parseInt($element.children().height()) : $element.height(), o = t.host.find("ul:first"), a = parseInt(o.css("padding-top")), n = parseInt(o.css("margin-top")), l = i - 2 * (n + a), h = parseInt(l) / 2 - r / 2, d = parseInt(h), c = parseInt(h); if ($element.css("padding-top", d), $element.css("padding-bottom", c), parseInt($element.outerHeight()) > l) { $element.css("padding-top", d - 1), d -= 1 } } }) } e.each(this.items, function () { var t = this; if ($element = e(t.element), t.hasItems && t.level > 0 && t.arrow) { var i = e(t.arrow), s = e(t.element).height(); s > 15 && i.css("margin-top", (s - 15) / 2) } }) }, _render: function (t, i) { this.disabled && (this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")), this.host.addClass(this.toThemeProperty("jqx-menu-disabled"))); var s = this.popupZIndex, r = [5, 5], o = this; e.data(o.element, "animationHideDelay", o.animationHideDelay); var a = this.isTouchDevice(), n = a && (e.jqx.mobile.isWindowsPhone() || navigator.userAgent.indexOf("Touch") >= 0); -1 != navigator.platform.toLowerCase().indexOf("win") && (navigator.userAgent.indexOf("Windows Phone") >= 0 || navigator.userAgent.indexOf("WPDesktop") >= 0 || navigator.userAgent.indexOf("IEMobile") >= 0 || navigator.userAgent.indexOf("ZuneWP7") >= 0 ? this.touchDevice = !0 : navigator.userAgent.indexOf("Touch") >= 0 && ("MSPointerDown" in window || e.jqx.mobile.isWindowsPhone() || navigator.userAgent.indexOf("ARM") >= 0) && (!0, n = !0, o.clickToOpen = !0, o.autoCloseOnClick = !1, o.enableHover = !1)), e.data(document.body, "menuel", this), this.hasTransform = e.jqx.utilities.hasTransform(this.host), this._applyOrientation(t, i), o.enableRoundedCorners && this.host.addClass(o.toThemeProperty("jqx-rc-all")), e.each(this.items, function () { var t = this, i = e(t.element); if (i.attr("role", "menuitem"), o.enableRoundedCorners && i.addClass(o.toThemeProperty("jqx-rc-all")), o.removeHandler(i, "click"), o.addHandler(i, "click", function (i) { if (!t.disabled && !o.disabled && (o._raiseEvent("2", { item: t.element, event: i }), o.autoOpen ? !o.autoCloseOnClick || a || o.clickToOpen || t.closeOnClick && (i.data = o, o._closeAll(i)) : t.level > 0 && (!o.autoCloseOnClick || a || o.clickToOpen || (i.data = o, o._closeAll(i))), a && o.autoCloseOnClick && (i.data = o, t.hasItems || o._closeAll(i)), "A" != i.target.tagName && "a" != i.target.tagName)) { var s = null != t.anchor ? e(t.anchor) : null; if (null != s && s.length > 0) { var r = s.attr("href"), n = s.attr("target"); null != r && (null != n ? window.open(r, n) : window.location = r) } } }), o.removeHandler(i, "mouseenter"), o.removeHandler(i, "mouseleave"), n || "simple" == o.mode || o._renderHover(i, t, a), null != t.subMenuElement) { var l = e(t.subMenuElement); if ("simple" == o.mode) return l.show(), !0; l.wrap('<div class="jqx-menu-popup ' + o.toThemeProperty("jqx-menu-popup") + '" style="border: none; background-color: transparent; z-index:' + s + '; padding: 0px; margin: 0px; position: absolute; top: 0; left: 0; display: block; visibility: hidden;"><div style="background-color: transparent; border: none; position:absolute; overflow:hidden; left: 0; top: 0; right: 0; width: 100%; height: 100%;"></div></div>'), l.css({ overflow: "hidden", position: "absolute", left: 0, display: "inherit", top: -l.outerHeight() }), l.data("timer", {}), t.level > 0 ? l.css("left", -l.outerWidth()) : "horizontal" == o.mode && l.css("left", 0), s++; var h = e(t.subMenuElement).closest("div.jqx-menu-popup").css({ width: parseInt(e(t.subMenuElement).outerWidth()) + parseInt(r[0]) + "px", height: parseInt(e(t.subMenuElement).outerHeight()) + parseInt(r[1]) + "px" }), d = i.closest("div.jqx-menu-popup"); if (d.length > 0) { var c = l.css("margin-left"), u = l.css("margin-right"), p = l.css("padding-left"), m = l.css("padding-right"); h.appendTo(d), l.css("margin-left", c), l.css("margin-right", u), l.css("padding-left", p), l.css("padding-right", m) } else { var c = l.css("margin-left"), u = l.css("margin-right"), p = l.css("padding-left"), m = l.css("padding-right"); h.appendTo(e(document.body)), l.css("margin-left", c), l.css("margin-right", u), l.css("padding-left", p), l.css("padding-right", m) } o.clickToOpen ? (o.removeHandler(i, "mousedown"), o.addHandler(i, "mousedown", function (e) { clearTimeout(l.data("timer").hide), null != l && l.stop(), 0 != t.level || t.isOpen || (e.data = o, o._closeAll(e)), t.isOpen ? o._closeItem(o, t, !0) : o._openItem(o, t) })) : ((a || n) && (o.removeHandler(i, e.jqx.mobile.getTouchEventName("touchstart")), o.addHandler(i, e.jqx.mobile.getTouchEventName("touchstart"), function (e) { return clearTimeout(l.data("timer").hide), null != l && l.stop(), 0 != t.level || t.isOpen || "popup" == o.mode || (e.data = o, o._closeAll(e)), t.isOpen ? o._closeItem(o, t, !0) : o._openItem(o, t), !1 })), n || (o.addHandler(i, "mouseenter", function () { if ((o.autoOpen || t.level > 0 && !o.autoOpen) && clearTimeout(l.data("timer").hide), !t.parentId || 0 == t.parentId || !o.menuElements[t.parentId] || o.menuElements[t.parentId].isOpen) return (o.autoOpen || t.level > 0 && !o.autoOpen) && o._openItem(o, t), !1 }), o.addHandler(i, "mousedown", function () { o.autoOpen || 0 != t.level || (clearTimeout(l.data("timer").hide), null != l && l.stop(), t.isOpen ? o._closeItem(o, t, !0) : o._openItem(o, t)) }), o.addHandler(i, "mouseleave", function (i) { if (o.autoCloseOnMouseLeave) { clearTimeout(l.data("timer").hide); var s = e(t.subMenuElement), r = { left: parseInt(i.pageX), top: parseInt(i.pageY) }, a = { left: parseInt(s.coord().left), top: parseInt(s.coord().top), width: parseInt(s.outerWidth()), height: parseInt(s.outerHeight()) }, n = !0; a.left - 5 <= r.left && r.left <= a.left + a.width + 5 && a.top <= r.top && r.top <= a.top + a.height && (n = !1), n && o._closeItem(o, t, !0) } }), o.removeHandler(h, "mouseenter"), o.addHandler(h, "mouseenter", function () { clearTimeout(l.data("timer").hide) }), o.removeHandler(h, "mouseleave"), o.addHandler(h, "mouseleave", function (e) { o.autoCloseOnMouseLeave && (clearTimeout(l.data("timer").hide), clearTimeout(l.data("timer").show), null != l && l.stop(), o._closeItem(o, t, !0)) }))) } }), "simple" == this.mode && this._renderSimpleMode(), this._autoSizeHorizontalMenuItems(), this._raiseEvent("3", this) }, _renderSimpleMode: function () { this.host.show() }, createID: function () { var e = Math.random() + ""; for (e = "99" + (e = e.replace(".", "")), e /= 1; this.items[e];) e = (e = Math.random() + "").replace(".", ""), e /= 1; return "menuItem" + e }, _createMenu: function (t, i) { if (null != t) { void 0 == i && (i = !0), null == i && (i = !0); for (var s = e(t).find("li"), r = 0, o = 0; o < s.length; o++) { var a = s[o], n = e(a); if (-1 != a.className.indexOf("jqx-menu") || 0 != this.autoGenerate) { var l = a.id; l || (l = this.createID()), i && (a.id = l, this.items[r] = new e.jqx._jqxMenu.jqxMenuItem, this.menuElements[l] = this.items[r]), r += 1; var h = 0, d = this; n.children().each(function () { return i || (this.className = "", d.autoGenerate && (e(d.items[r - 1].subMenuElement)[0].className = "", d.minimized || e(d.items[r - 1].subMenuElement).addClass(d.toThemeProperty("jqx-widget-content")), e(d.items[r - 1].subMenuElement).addClass(d.toThemeProperty("jqx-menu-dropdown")), e(d.items[r - 1].subMenuElement).addClass(d.toThemeProperty("jqx-popup")))), -1 != this.className.indexOf("jqx-menu-dropdown") ? (i && (d.items[r - 1].subMenuElement = this), !1) : !d.autoGenerate || "ul" != this.tagName && "UL" != this.tagName ? void 0 : (i && (d.items[r - 1].subMenuElement = this), this.className = "", d.minimized || e(this).addClass(d.toThemeProperty("jqx-widget-content")), e(this).addClass(d.toThemeProperty("jqx-menu-dropdown")), e(this).addClass(d.toThemeProperty("jqx-popup")), e(this).attr("role", "menu"), d.rtl ? e(this).addClass(d.toThemeProperty("jqx-rc-l")) : e(this).addClass(d.toThemeProperty("jqx-rc-r")), e(this).addClass(d.toThemeProperty("jqx-rc-b")), !1) }), n.parents().each(function () { return -1 != this.className.indexOf("jqx-menu-item") ? (h = this.id, !1) : !d.autoGenerate || "li" != this.tagName && "LI" != this.tagName ? void 0 : (h = this.id, !1) }); var c = !1, u = a.getAttribute("type"), p = a.getAttribute("ignoretheme") || a.getAttribute("data-ignoretheme"); if (p ? "true" != p && 1 != p || (p = !0) : p = !1, u) { if ("separator" == u) c = !0 } else u = a.type; c || (u = h ? "sub" : "top"); var m = this.items[r - 1]; if (i) { m.id = l, m.parentId = h, m.type = u, m.separator = c, m.element = s[o]; var g = n.children("a"); m.disabled = "true" == a.getAttribute("item-disabled"), m.level = n.parents("li").length, m.anchor = g.length > 0 ? g : null } m.ignoretheme = p; var f = this.menuElements[h]; null != f && f.ignoretheme && (m.ignoretheme = f.ignoretheme, p = f.ignoretheme), this.autoGenerate && ("separator" == u ? (n.removeClass(), n.addClass(this.toThemeProperty("jqx-menu-item-separator")), n.attr("role", "separator")) : p || (n[0].className = "", this.rtl && n.addClass(this.toThemeProperty("jqx-rtl")), m.level > 0 && !d.minimized ? (n.addClass(this.toThemeProperty("jqx-item")), n.addClass(this.toThemeProperty("jqx-menu-item"))) : (n.addClass(this.toThemeProperty("jqx-item")), n.addClass(this.toThemeProperty("jqx-menu-item-top"))))), m.disabled && (n.addClass(d.toThemeProperty("jqx-menu-item-disabled")), n.addClass(d.toThemeProperty("jqx-fill-state-disabled"))), i && !p && (m.hasItems = n.find("li").length > 0, m.hasItems && m.element && (e.jqx.aria(e(m.element), "aria-haspopup", !0), m.subMenuElement.id || (m.subMenuElement.id = e.jqx.utilities.createId()), e.jqx.aria(e(m.element), "aria-owns", m.subMenuElement.id))) } } } }, destroy: function () { e.jqx.utilities.resize(this.host, null, !0), this.host.closest("div.jqx-menu-wrapper").remove(), e("#menuWrapper" + this.element.id).remove(); var t = this; this.removeHandler(e(document), "mousedown.menu" + this.element.id, t._closeAfterClick), this.removeHandler(e(document), "mouseup.menu" + this.element.id, t._closeAfterClick), e.data(document.body, "jqxMenuOldHost" + this.element.id, null), this.isTouchDevice() && this.removeHandler(e(document), e.jqx.mobile.getTouchEventName("touchstart") + ".menu" + this.element.id, this._closeAfterClick, this), e(window).off && e(window).off("resize.menu" + t.element.id), e.each(this.items, function () { var i = this, s = e(i.element); t.removeHandler(s, "click"), t.removeHandler(s, "selectstart"), t.removeHandler(s, "mouseenter"), t.removeHandler(s, "mouseleave"), t.removeHandler(s, "mousedown"), t.removeHandler(s, "mouseleave"), e(i.subMenuElement).closest("div.jqx-menu-popup").remove(), delete this.subMenuElement, delete this.element }), e.data(document.body, "menuel", null), delete this.menuElements, this.items = new Array, delete this.items; var i = e.data(this.element, "jqxMenu"); i && delete i.instance, this.host.removeClass(), this.host.remove(), delete this.host, delete this.element }, _raiseEvent: function (t, i) { void 0 == i && (i = { owner: null }); var s = this.events[t]; args = i, args.owner = this; var r = new jQuery.Event(s); return "2" == t && (args = i.item, args.owner = this, e.extend(r, i.event), r.type = "itemclick"), r.owner = this, r.args = args, this.host.trigger(r) }, propertyChangedHandler: function (t, i, s, r) { if (void 0 != this.isInitialized && 0 != this.isInitialized && ("disabled" == i && (t.disabled ? (t.host.addClass(t.toThemeProperty("jqx-fill-state-disabled")), t.host.addClass(t.toThemeProperty("jqx-menu-disabled"))) : (t.host.removeClass(t.toThemeProperty("jqx-fill-state-disabled")), t.host.removeClass(t.toThemeProperty("jqx-menu-disabled")))), r != s)) { if ("touchMode" == i && (this._isTouchDevice = null, t._render(r, s)), "source" == i && null != t.source) { var o = t.loadItems(t.source); t.element.innerHTML = o; var a = t.host.find("ul:first"); a.length > 0 && (t.refresh(), t._createMenu(a[0]), t._render()) } "autoCloseOnClick" == i ? 0 == r ? t.removeHandler(e(document), "mousedown.menu" + this.element.id, t._closeAll) : t.addHandler(e(document), "mousedown.menu" + this.element.id, t, t._closeAll) : "mode" == i || "width" == i || "height" == i || "showTopLevelArrows" == i ? (t.refresh(), "mode" == i ? t._render(r, s) : t._applyOrientation()) : "theme" == i && e.jqx.utilities.setTheme(s, r, t.host) } } }) }(jQuery), jQuery.jqx._jqxMenu.jqxMenuItem = function (e, t, i) { return { id: e, parentId: t, parentItem: null, anchor: null, type: i, disabled: !1, level: 0, isOpen: !1, hasItems: !1, element: null, subMenuElement: null, arrow: null, openHorizontalDirection: "right", openVerticalDirection: "down", closeOnClick: !0 } }, function (e) { e.jqx.jqxWidget("jqxExpander", "", {}), e.extend(e.jqx._jqxExpander.prototype, { defineInstance: function () { this.width = "auto", this.height = "auto", this.expanded = !0, this.expandAnimationDuration = 259, this.collapseAnimationDuration = 250, this.animationType = "slide", this.toggleMode = "click", this.showArrow = !0, this.arrowPosition = "right", this.headerPosition = "top", this.disabled = !1, this.initContent = null, this.rtl = !1, this.easing = "easeInOutSine", this.aria = { "aria-disabled": { name: "disabled", type: "boolean" } }, this.events = ["expanding", "expanded", "collapsing", "collapsed", "resize"] }, createInstance: function (t) { this._isTouchDevice = e.jqx.mobile.isTouchDevice(), e.jqx.aria(this), this._cachedHTMLStructure = this.host.html(), this.render() }, expand: function () { if (0 == this.disabled && 0 == this.expanded && 1 == this._expandChecker) { var t = this; switch (this._expandChecker = 0, this._raiseEvent("0"), this._header.removeClass(this.toThemeProperty("jqx-fill-state-normal")), this._header.addClass(this.toThemeProperty("jqx-fill-state-pressed")), this._header.addClass(this.toThemeProperty("jqx-expander-header-expanded")), "top" == this.headerPosition ? (this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down")), this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-hover")), this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up-hover")), this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected")), this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-top")), this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up")), this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up-selected")), this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-bottom")), this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-expanded"))) : "bottom" == this.headerPosition && (this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up")), this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up-selected")), this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-hover")), this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up-hover")), this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-bottom")), this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down")), this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-top")), this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-expanded-top"))), this.animationType) { case "slide": "top" == this.headerPosition ? this._content.slideDown(this.expandAnimationDuration, this.easing, function () { t.expanded = !0, e.jqx.aria(t._header, "aria-expanded", !0), e.jqx.aria(t._content, "aria-hidden", !1), t._raiseEvent("1"), t.initContent && 0 == t._initialized && (t.initContent(), t._initialized = !0) }) : "bottom" == this.headerPosition && (this._content.css({ display: "inherit", height: 0 }), e.jqx.browser.msie && e.jqx.browser.version < 8 && this._content.css("display", "block"), 1 == this._cntntEmpty ? this._content.animate({ height: 0 }, this.expandAnimationDuration, this.easing, function () { t.expanded = !0, e.jqx.aria(t._header, "aria-expanded", !0), e.jqx.aria(t._content, "aria-hidden", !1), t._raiseEvent("1"), t.initContent && 0 == t._initialized && (t.initContent(), t._initialized = !0) }) : this._content.animate({ height: this._contentHeight }, this.expandAnimationDuration, this.easing, function () { t.expanded = !0, e.jqx.aria(t._header, "aria-expanded", !0), e.jqx.aria(t._content, "aria-hidden", !1), t._raiseEvent("1"), t.initContent && 0 == t._initialized && (t.initContent(), t._initialized = !0) })); break; case "fade": this._content.fadeIn(this.expandAnimationDuration, this.easing, function () { t.expanded = !0, e.jqx.aria(t._header, "aria-expanded", !0), e.jqx.aria(t._content, "aria-hidden", !1), t._raiseEvent("1"), t.initContent && 0 == t._initialized && (t.initContent(), t._initialized = !0) }); break; case "none": this._content.css("display", "inherit"), this.expanded = !0, e.jqx.aria(t._header, "aria-expanded", !0), e.jqx.aria(t._content, "aria-hidden", !1), this._raiseEvent("1"), this.initContent && 0 == this._initialized && (this.initContent(), this._initialized = !0) } } }, collapse: function () { if (0 == this.disabled && 1 == this.expanded && 0 == this._expandChecker) { var t = this; switch (this._expandChecker = 1, this._raiseEvent("2"), this._header.removeClass(this.toThemeProperty("jqx-fill-state-pressed")), this._header.removeClass(this.toThemeProperty("jqx-expander-header-expanded")), this._header.addClass(this.toThemeProperty("jqx-fill-state-normal")), "top" == this.headerPosition ? (this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up")), this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up-selected")), this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-bottom")), this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-expanded")), this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down")), t._hovered && this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down-hover")), this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-top"))) : "bottom" == this.headerPosition && (this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down")), this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected")), this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-top")), this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-expanded-top")), this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up")), this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-bottom")), t._hovered && this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up-hover"))), this.animationType) { case "slide": "top" == this.headerPosition ? this._content.slideUp(this.collapseAnimationDuration, this.easing, function () { t.expanded = !1, e.jqx.aria(t._header, "aria-expanded", !1), e.jqx.aria(t._content, "aria-hidden", !0), t._raiseEvent("3") }) : "bottom" == this.headerPosition && this._content.animate({ height: 0 }, this.expandAnimationDuration, function () { t._content.css("display", "none"), t.expanded = !1, e.jqx.aria(t._header, "aria-expanded", !1), e.jqx.aria(t._content, "aria-hidden", !0), t._raiseEvent("3") }); break; case "fade": this._content.fadeOut(this.collapseAnimationDuration, this.easing, function () { t.expanded = !1, e.jqx.aria(t._header, "aria-expanded", !1), e.jqx.aria(t._content, "aria-hidden", !0), t._raiseEvent("3") }); break; case "none": this._content.css("display", "none"), this.expanded = !1, e.jqx.aria(t._header, "aria-expanded", !1), e.jqx.aria(t._content, "aria-hidden", !0), this._raiseEvent("3") } } }, setHeaderContent: function (e) { this._header_text.html(e), this.invalidate() }, getHeaderContent: function () { return this._header_text.html() }, setContent: function (e) { this._content.html(e), this._checkContent(), this.invalidate() }, getContent: function () { return this._content.html() }, enable: function () { this.disabled = !1, this.refresh(), e.jqx.aria(this, "aria-disabled", !1) }, disable: function () { this.disabled = !0, this.refresh(), e.jqx.aria(this, "aria-disabled", !0) }, invalidate: function () { e.jqx.isHidden(this.host) || this._setSize() }, refresh: function (e) { 1 != e && (this._removeHandlers(), 1 == this.showArrow ? this._arrow.css("display", "inherit") : this._arrow.css("display", "none"), this._setTheme(), this._setSize(), 0 == this.disabled && this._toggle(), this._keyBoard()) }, render: function () { this.widgetID = this.element.id, this._header && (this._header.removeClass(this.toThemeProperty("jqx-expander-header-content")), this._header.removeClass(this.toThemeProperty("jqx-expander-header")), this._header.removeClass(this.toThemeProperty("jqx-expander-header-expanded")), this._header.removeClass(this.toThemeProperty("jqx-widget-header")), this._header_text.removeClass(this.toThemeProperty("jqx-expander-header-content")), this._header_text.removeClass(this.toThemeProperty("jqx-expander-header")), this._header_text.removeClass(this.toThemeProperty("jqx-widget-header")), this._header_text.removeClass(this.toThemeProperty("jqx-expander-header-expanded")), this._header.attr("tabindex", null), this._content.attr("tabindex", null), this._header.css("margin-top", 0), this._header[0].innerHTML = this._header_text[0].innerHTML, "bottom" == this.headerPosition && (this._header.detach(), this.host.prepend(this._header))), this._header_temp = this.host.children("div:eq(0)"), this._header_temp.wrap("<div></div>"), this._header = this.host.children("div:eq(0)"), this._content = this.host.children("div:eq(1)"), "bottom" == this.headerPosition && (this._header.detach(), this.host.append(this._header)), this._header_text = this._header.children("div:eq(0)"); var t = this._header_text[0].className; this._header.addClass(t), this._header_text.removeClass(), this.rtl ? this._header_text.addClass(this.toThemeProperty("jqx-expander-header-content-rtl")) : this._header_text.addClass(this.toThemeProperty("jqx-expander-header-content")), this._header.append("<div></div>"), this._arrow = this._header.children("div:eq(1)"), 1 == this.showArrow ? this._arrow.css("display", "inherit") : this._arrow.css("display", "none"), this.tI = -1, void 0 == this._header.attr("tabindex") && (this.tI++, this._header.attr("tabindex", this.tI)), void 0 == this._content.attr("tabindex") && (this.tI++, this._content.attr("tabindex", this.tI)), this._setTheme(), this._checkContent(); try { if (0 == this._header.length || 0 == this._content.length || this.host.children().length < 2 || this.host.children().length > 2) throw "Invalid jqxExpander structure. Please add only two child div elements to your jqxExpander div that will represent the expander's header and content." } catch (e) { alert(e) } this._expandChecker, this._initialized, 1 == this.expanded ? ("top" == this.headerPosition ? (this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up")), this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up-selected")), this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-bottom")), this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-expanded"))) : "bottom" == this.headerPosition && (this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down")), this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down-selected")), this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-top")), this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-expanded-top"))), this.initContent && (this._setSize(), this.initContent()), this._initialized = !0, this._expandChecker = 0) : 0 == this.expanded && (this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected")), this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up-selected")), "top" == this.headerPosition ? (this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down")), this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-top"))) : "bottom" == this.headerPosition && (this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up")), this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-bottom"))), this._initialized = !1, this._expandChecker = 1, this._content.css("display", "none")), this._setSize(), 0 == this.disabled && this._toggle(), this._keyBoard(); var i = this; e.jqx.utilities.resize(this.host, function () { i.invalidate() }) }, destroy: function () { this.removeHandler(e(window), "resize.expander" + this.widgetID), this.host.remove(), e(this.element).removeData("jqxExpander") }, focus: function () { try { 0 == this.disabled && this._header.focus() } catch (e) { } }, propertyChangedHandler: function (e, t, i, s) { "expanded" == t ? 1 == s && 0 == i ? (this.expanded = !1, this.expand()) : 0 == s && 1 == i && (this.expanded = !0, this.collapse()) : this.refresh() }, _raiseEvent: function (e, t) { var i = this.events[e], s = new jQuery.Event(i); s.owner = this, s.args = t; try { var r = this.host.trigger(s) } catch (e) { } return r }, resize: function (e, t) { this.width = e, this.height = t, this._setSize() }, _setSize: function () { this.host.width(this.width), this.host.height(this.height), this._header.height("auto"), this._header.css("min-height", this._arrow.height()); var e = this.arrowPosition; if (this.rtl) switch (e) { case "left": e = "right"; break; case "right": e = "left" } if ("right" == e ? (this._header_text.css({ float: "left", "margin-left": "0px" }), this._arrow.css({ float: "right", position: "relative" })) : "left" == e && ("auto" == this.width ? (this._header_text.css({ float: "left", "margin-left": "17px" }), this._arrow.css({ float: "left", position: "absolute" })) : (this._header_text.css({ float: "right", "margin-left": "0px" }), this._arrow.css({ float: "left", position: "relative" }))), this._arrow.css("margin-top", this._header_text.height() / 2 - this._arrow.height() / 2), "auto" == this.height) this._content.height("auto"), this._contentHeight = this._content.height(); else { this._content.height("auto"); var t = Math.round(this.host.height()) - Math.round(this._header.outerHeight()) - 1; t < 0 && (t = 0), this._contentHeight || (this._contentHeight = this._content.height()), t != this._contentHeight ? (this._content.height(t), this._contentHeight = Math.round(this._content.outerHeight())) : this._content.height(this._contentHeight) } }, _toggle: function () { var t = this; if (0 == this._isTouchDevice) switch (this._header.removeClass(this.toThemeProperty("jqx-expander-header-disabled")), this.toggleMode) { case "click": this.addHandler(this._header, "click.expander" + this.widgetID, function () { t._animate() }); break; case "dblclick": this.addHandler(this._header, "dblclick.expander" + this.widgetID, function () { t._animate() }); break; case "none": this._header.addClass(this.toThemeProperty("jqx-expander-header-disabled")) } else { if ("none" == this.toggleMode) return; this.addHandler(this._header, e.jqx.mobile.getTouchEventName("touchstart") + "." + this.widgetID, function () { t._animate() }) } }, _animate: function () { 1 == this.expanded ? (this.collapse(), this._header.addClass(this.toThemeProperty("jqx-fill-state-hover")), this._header.addClass(this.toThemeProperty("jqx-expander-header-hover")), "top" == this.headerPosition ? (this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-top-hover")), this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-down-hover"))) : "bottom" == this.headerPosition && (this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-bottom-hover")), this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-up-hover")))) : (this.expand(), this._header.removeClass(this.toThemeProperty("jqx-fill-state-hover")), this._header.removeClass(this.toThemeProperty("jqx-expander-header-hover")), "top" == this.headerPosition ? (this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-top-hover")), this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-down-hover"))) : "bottom" == this.headerPosition && (this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-bottom-hover")), this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-up-hover")))) }, _removeHandlers: function () { this.removeHandler(this._header, "click.expander" + this.widgetID), this.removeHandler(this._header, "dblclick.expander" + this.widgetID), this.removeHandler(this._header, "mouseenter.expander" + this.widgetID), this.removeHandler(this._header, "mouseleave.expander" + this.widgetID) }, _setTheme: function () { var e = this; this.host.addClass(this.toThemeProperty("jqx-widget")), this._header.addClass(this.toThemeProperty("jqx-widget-header")), this._content.addClass(this.toThemeProperty("jqx-widget-content")), 1 == this.rtl && this.host.addClass(this.toThemeProperty("jqx-rtl")), 0 == this.disabled ? (this._header.removeClass(this.toThemeProperty("jqx-expander-header-disabled")), this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")), 1 == this.expanded ? (this._header.addClass(this.toThemeProperty("jqx-fill-state-pressed")), this._header.addClass(this.toThemeProperty("jqx-expander-header-expanded"))) : (this._header.addClass(this.toThemeProperty("jqx-fill-state-normal")), this._header.removeClass(this.toThemeProperty("jqx-expander-header-expanded"))), this._hovered = !1, e._isTouchDevice || (this.addHandler(this._header, "mouseenter.expander" + this.widgetID, function () { e._hovered = !0, 1 == e._expandChecker && (e._header.removeClass(e.toThemeProperty("jqx-fill-state-normal")), e._header.removeClass(e.toThemeProperty("jqx-fill-state-pressed")), e._header.addClass(e.toThemeProperty("jqx-fill-state-hover")), e._header.addClass(e.toThemeProperty("jqx-expander-header-hover")), "top" == e.headerPosition ? (e.expanded ? e._arrow.addClass(e.toThemeProperty("jqx-icon-arrow-up-hover")) : e._arrow.addClass(e.toThemeProperty("jqx-icon-arrow-down-hover")), e._arrow.addClass(e.toThemeProperty("jqx-expander-arrow-top-hover")), e._arrow.addClass(e.toThemeProperty("jqx-expander-arrow-down-hover"))) : "bottom" == e.headerPosition && (e.expanded && e._arrow.addClass(e.toThemeProperty("jqx-icon-arrow-down-hover")), e._arrow.addClass(e.toThemeProperty("jqx-expander-arrow-bottom-hover")), e._arrow.addClass(e.toThemeProperty("jqx-expander-arrow-up-hover")))) }), this.addHandler(this._header, "mouseleave.expander" + this.widgetID, function () { e._hovered = !1, e._header.removeClass(e.toThemeProperty("jqx-fill-state-hover")), e._arrow.removeClass(e.toThemeProperty("jqx-icon-arrow-up-hover")), e._arrow.removeClass(e.toThemeProperty("jqx-icon-arrow-down-hover")), e._header.removeClass(e.toThemeProperty("jqx-expander-header-hover")), "top" == e.headerPosition ? (e._arrow.removeClass(e.toThemeProperty("jqx-expander-arrow-top-hover")), e._arrow.removeClass(e.toThemeProperty("jqx-expander-arrow-down-hover"))) : "bottom" == e.headerPosition && (e._arrow.removeClass(e.toThemeProperty("jqx-expander-arrow-bottom-hover")), e._arrow.removeClass(e.toThemeProperty("jqx-expander-arrow-up-hover"))), 1 == e._expandChecker ? e._header.addClass(e.toThemeProperty("jqx-fill-state-normal")) : e._header.addClass(e.toThemeProperty("jqx-fill-state-pressed")) }))) : (this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")), this._header.addClass(this.toThemeProperty("jqx-expander-header-disabled"))), this.host.addClass(this.toThemeProperty("jqx-expander")), this._header.addClass(this.toThemeProperty("jqx-expander-header")), this._content.addClass(this.toThemeProperty("jqx-expander-content")), "top" == this.headerPosition ? this._content.addClass(this.toThemeProperty("jqx-expander-content-bottom")) : "bottom" == this.headerPosition && this._content.addClass(this.toThemeProperty("jqx-expander-content-top")), this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow")) }, _checkContent: function () { this._cntntEmpty = /^\s*$/.test(this._content.html()), 1 == this._cntntEmpty ? (this._content.height(0), this._content.addClass(this.toThemeProperty("jqx-expander-content-empty"))) : (this._content.height(this._contentHeight), this._content.removeClass(this.toThemeProperty("jqx-expander-content-empty"))) }, _keyBoard: function () { var e = this; this._focus(), this.addHandler(this.host, "keydown.expander" + this.widgetID, function (t) { var i = !1; if ((1 == e.focusedH || 1 == e.focusedC) && 0 == e.disabled) { switch (t.keyCode) { case 13: case 32: "none" != e.toggleMode && (1 == e.focusedH && e._animate(), i = !0); break; case 38: 1 == t.ctrlKey && 1 == e.focusedC && e._header.focus(), i = !0; break; case 40: 1 == t.ctrlKey && 1 == e.focusedH && e._content.focus(), i = !0 } return !0 } return i && t.preventDefault && t.preventDefault(), !i }) }, _focus: function () { var t = this; this.addHandler(this._header, "focus.expander" + this.widgetID, function () { t.focusedH = !0, e.jqx.aria(t._header, "aria-selected", !0), t._header.addClass(t.toThemeProperty("jqx-fill-state-focus")) }), this.addHandler(this._header, "blur.expander" + this.widgetID, function () { t.focusedH = !1, e.jqx.aria(t._header, "aria-selected", !1), t._header.removeClass(t.toThemeProperty("jqx-fill-state-focus")) }), this.addHandler(this._header_text, "focus.expander" + this.widgetID, function () { t._header.focus() }), this.addHandler(this._arrow, "focus.expander" + this.widgetID, function () { t._header.focus() }), this.addHandler(this._content, "focus.expander" + this.widgetID, function () { t.focusedC = !0, t._content.addClass(t.toThemeProperty("jqx-fill-state-focus")) }), this.addHandler(this._content, "blur.expander" + this.widgetID, function () { t.focusedC = !1, t._content.removeClass(t.toThemeProperty("jqx-fill-state-focus")) }) } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxNavigationBar", "", {}), e.extend(e.jqx._jqxNavigationBar.prototype, { defineInstance: function () { this.width = "auto", this.height = "auto", this.expandAnimationDuration = 250, this.collapseAnimationDuration = 250, this.animationType = "slide", this.toggleMode = "click", this.showArrow = !0, this.arrowPosition = "right", this.disabled = !1, this.initContent = null, this.rtl = !1, this.easing = "easeInOutSine", this.expandMode = "singleFitHeight", this.expandedIndexes = [], this._expandModes = ["singleFitHeight", "single", "multiple", "toggle", "none"], this.aria = { "aria-disabled": { name: "disabled", type: "boolean" } }, this.events = ["expandingItem", "expandedItem", "collapsingItem", "collapsedItem"] }, createInstance: function (t) { this._isTouchDevice = e.jqx.mobile.isTouchDevice(), e.jqx.aria(this), this.render() }, val: function (t) { return 0 == arguments.length || "object" == typeof t ? this.expandedIndexes : ("string" == typeof t ? (this.expandedIndexes.push(parseInt(t)), this._applyExpandedIndexes()) : (e.isArray(t) ? this.expandedIndexes = t : (this.expandedIndexes = new Array, this.expandedIndexes.push(t)), this._applyExpandedIndexes()), this.expandedIndexes) }, expandAt: function (t) { s = this; "single" != this.expandMode && "singleFitHeight" != this.expandMode && "toggle" != this.expandMode || e.each(this.items, function (e, i) { e != t && s.collapseAt(e) }); var i = this.items[t]; if (0 == i.disabled && 0 == i.expanded && 1 == i._expandChecker) { var s = this; switch (i._expandChecker = 0, this._raiseEvent("0", { item: t }), i._header.removeClass(this.toThemeProperty("jqx-fill-state-normal")), i._header.addClass(this.toThemeProperty("jqx-fill-state-pressed")), i._header.addClass(this.toThemeProperty("jqx-expander-header-expanded")), i._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down")), i._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-hover")), i._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up-hover")), i._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected")), i._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-top")), i._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up")), i._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up-selected")), i._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-bottom")), i._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-expanded")), 0 == this.heightFlag && this.host.css({ "overflow-x": "hidden", "overflow-y": "hidden" }), this.eCFlag = 1, this.animationType) { case "slide": var r = i._content, o = (r.height(), {}); o.height = o.paddingTop = o.paddingBottom = o.borderTopWidth = o.borderBottomWidth = "show"; var a = 0, n = r.outerHeight(); e.jqx.browser.msie && e.jqx.browser.version < 9 && ((o = {}).height = o.paddingTop = o.paddingBottom = "show"), r.animate(o, { duration: this.expandAnimationDuration, easing: this.easing, step: function (e, t) { t.now = Math.round(e), "height" !== t.prop ? a += t.now : s._collapseContent ? (t.now = Math.round(n - s._collapseContent.outerHeight() - a), a = 0) : t.now = Math.round(e) }, complete: function () { i.expanded = !0, e.jqx.aria(i._header, "aria-expanded", !0), e.jqx.aria(i._content, "aria-hidden", !1), s._updateExpandedIndexes(), s._raiseEvent("1", { item: t }), s._checkHeight(), 1 == s.heightFlag && s.host.css({ "overflow-x": "hidden", "overflow-y": "auto" }), s.initContent && 0 == i._initialized && (s.initContent(t), i._initialized = !0), s.eCFlag = 0 } }); break; case "fade": setTimeout(function () { i._content.fadeIn(this.expandAnimationDuration, function () { i.expanded = !0, e.jqx.aria(i._header, "aria-expanded", !0), e.jqx.aria(i._content, "aria-hidden", !1), s._updateExpandedIndexes(), s._raiseEvent("1", { item: t }), s._checkHeight(), 1 == s.heightFlag && s.host.css({ "overflow-x": "hidden", "overflow-y": "auto" }), s.initContent && 0 == i._initialized && (s.initContent(t), i._initialized = !0), s.eCFlag = 0 }) }, this.collapseAnimationDuration); break; case "none": i._content.css("display", "inherit"), i.expanded = !0, e.jqx.aria(i._header, "aria-expanded", !0), e.jqx.aria(i._content, "aria-hidden", !1), this._updateExpandedIndexes(), this._raiseEvent("1", { item: t }), this._checkHeight(), 1 == this.heightFlag && this.host.css({ "overflow-x": "hidden", "overflow-y": "auto" }), this.initContent && 0 == i._initialized && (this.initContent(t), i._initialized = !0), this.eCFlag = 0 } } }, collapseAt: function (t) { var i = this.items[t]; if (0 == i.disabled && 1 == i.expanded && 0 == i._expandChecker) { var s = this; switch (i._expandChecker = 1, this._raiseEvent("2", { item: t }), i._header.removeClass(this.toThemeProperty("jqx-fill-state-pressed")), i._header.removeClass(this.toThemeProperty("jqx-expander-header-expanded")), i._header.addClass(this.toThemeProperty("jqx-fill-state-normal")), i._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up")), i._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up-selected")), i._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected")), i._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-bottom")), i._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-expanded")), i._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down")), i._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-top")), 0 == this.heightFlag && this.host.css({ "overflow-x": "hidden", "overflow-y": "hidden" }), this.eCFlag = 1, this._collapseContent = i._content, this.animationType) { case "slide": var r = {}; r.height = r.paddingTop = r.paddingBottom = r.borderTopWidth = r.borderBottomWidth = "hide", e.jqx.browser.msie && e.jqx.browser.version < 9 && ((r = {}).height = r.paddingTop = r.paddingBottom = "hide"); var o = i._content; o.animate(r, { duration: this.collapseAnimationDuration, step: function (e, t) { t.now = Math.round(e) }, easing: this.easing, complete: function () { i.expanded = !1, o.hide(), e.jqx.aria(i._header, "aria-expanded", !1), e.jqx.aria(i._content, "aria-hidden", !0), s._updateExpandedIndexes(), s._raiseEvent("3", { item: t }), s._checkHeight(), 1 == s.heightFlag && s.host.css({ "overflow-x": "hidden", "overflow-y": "auto" }), s.eCFlag = 0, s._collapseContent = null } }); break; case "fade": i._content.fadeOut(this.collapseAnimationDuration, function () { i.expanded = !1, e.jqx.aria(i._header, "aria-expanded", !1), e.jqx.aria(i._content, "aria-hidden", !0), s._updateExpandedIndexes(), s._raiseEvent("3", { item: t }), s._checkHeight(), 1 == s.heightFlag && s.host.css({ "overflow-x": "hidden", "overflow-y": "auto" }), s.eCFlag = 0 }); break; case "none": i._content.css("display", "none"), i.expanded = !1, e.jqx.aria(i._header, "aria-expanded", !1), e.jqx.aria(i._content, "aria-hidden", !0), this._updateExpandedIndexes(), this._raiseEvent("3", { item: t }), this._checkHeight(), 1 == this.heightFlag && this.host.css({ "overflow-x": "hidden", "overflow-y": "auto" }), this.eCFlag = 0 } } }, setHeaderContentAt: function (e, t) { this.items[e]._header_text.html(t) }, getHeaderContentAt: function (e) { return this.items[e]._header_text.html() }, setContentAt: function (e, t) { this.items[e]._content.html(t), this._checkContent(e) }, getContentAt: function (e) { return this.items[e]._content.html() }, showArrowAt: function (e) { this.items[e]._arrow.css("display", "block") }, hideArrowAt: function (e) { this.items[e]._arrow.css("display", "none") }, enable: function () { this.disabled = !1, e.each(this.items, function (e, t) { this.disabled = !1 }), this._enabledDisabledCheck(), this.refresh(), e.jqx.aria(this, "aria-disabled", !1) }, disable: function () { this.disabled = !0, e.each(this.items, function (e, t) { this.disabled = !0 }), this._enabledDisabledCheck(), this.refresh(), e.jqx.aria(this, "aria-disabled", !0) }, enableAt: function (e) { this.items[e].disabled = !1, this.refresh() }, disableAt: function (e) { this.items[e].disabled = !0, this.refresh() }, invalidate: function () { this.refresh() }, refresh: function (t) { 1 != t && (this._removeHandlers(), 1 == this.showArrow ? e.each(this.items, function (e, t) { this._arrow.css("display", "block") }) : e.each(this.items, function (e, t) { this._arrow.css("display", "none") }), this._updateExpandedIndexes(), this._setTheme(), this._setSize(), this._toggle(), this._keyBoard()) }, render: function () { this.widgetID = this.element.id; var t = this; -1 == this._expandModes.indexOf(this.expandMode) && (this.expandMode = "singleFitHeight"), e.jqx.utilities.resize(this.host, function () { t._setSize() }), this.host.attr("role", "tablist"), this.items && (this._removeHandlers(), e.each(this.items, function () { this._header.removeClass(), this._header.attr("tabindex", null), this._content.attr("tabindex", null), this._header[0].className = "", this._header_text.removeClass(), this._header_text[0].className = "", this._header.css("margin-top", 0), this._header[0].innerHTML = this._header_text[0].innerHTML })), this.items = new Array; var i = this.host.children().length; try { if (i % 2 != 0) throw "Invalid jqxNavigationBar structure. Please add an even number of child div elements that will represent each item's header and content." } catch (e) { alert(e) } try { for (var s = this.host.children(), r = 0; r < i; r++) if ("div" != s[r].tagName.toLowerCase()) throw "Invalid jqxNavigationBar structure. Please make sure all the children elements of the navigationbar are divs." } catch (e) { alert(e) } for (var o = 0; o < i; o += 2) this.host.children("div:eq(" + o + ")").wrap("<div></div>"); for (var a, r = 0, n = 0; n < i / 2; n++) a = r + 1, this.items[n] = new Object, this.items[n]._header = this.host.children("div:eq(" + r + ")"), this.items[n]._header.attr("role", "tab"), this.items[n]._content = this.host.children("div:eq(" + a + ")"), this.items[n]._content.attr("role", "tabpanel"), r += 2; var l = this.expandedIndexes.length; e.each(this.items, function (e, t) { this.expandedFlag = !1, this.focusedH = !1, this.focusedC = !1 }), this.items && 0 == this.items.length || ("single" == this.expandMode || "singleFitHeight" == this.expandMode || "toggle" == this.expandMode || "none" == this.expandMode ? (e.each(this.items, function (e, t) { this.expanded = !1 }), 0 != l ? this.items[this.expandedIndexes[0]].expanded = !0 : 0 != l || "single" != this.expandMode && "singleFitHeight" != this.expandMode || (this.items[0].expanded = !0)) : "multiple" == this.expandMode ? 0 != l ? e.each(this.items, function (e, i) { for (var s = this, r = 0; r < l; r++) { if (t.expandedIndexes[r] == e) { s.expanded = !0; break } s.expanded = !1 } }) : e.each(this.items, function (e, t) { this.expanded = !1 }) : "none" == this.expandMode && e.each(this.items, function (e, t) { this.expanded = !1 }), this._enabledDisabledCheck(), e.each(this.items, function (e, i) { var s = this; s._header_text = s._header.children("div:eq(0)"), t.rtl ? s._header_text.addClass(t.toThemeProperty("jqx-expander-header-content-rtl")) : s._header_text.addClass(t.toThemeProperty("jqx-expander-header-content")), s._header.append("<div></div>"), s._arrow = s._header.children("div:eq(1)"), 1 == t.showArrow ? s._arrow.css("display", "block") : s._arrow.css("display", "none") }), e.each(this.items, function (i, s) { var r = this; 1 == r.expanded ? (r._arrow.addClass(t.toThemeProperty("jqx-icon-arrow-up")), r._arrow.addClass(t.toThemeProperty("jqx-icon-arrow-up-selected")), r._arrow.addClass(t.toThemeProperty("jqx-expander-arrow-bottom")), r._arrow.addClass(t.toThemeProperty("jqx-expander-arrow-expanded")), t.initContent && setTimeout(function () { t.initContent(i) }, 10), r._initialized = !0, r._expandChecker = 0, e.jqx.aria(r._header, "aria-expanded", !0), e.jqx.aria(r._content, "aria-hidden", !1)) : 0 == r.expanded && (r._arrow.addClass(t.toThemeProperty("jqx-icon-arrow-down")), r._arrow.addClass(t.toThemeProperty("jqx-expander-arrow-top")), r._initialized = !1, r._expandChecker = 1, r._content.css("display", "none"), e.jqx.aria(r._header, "aria-expanded", !1), e.jqx.aria(r._content, "aria-hidden", !0)) }), this.tI = 0, e.each(this.items, function (e, i) { var s = this; void 0 == s._header.attr("tabindex") && (t.tI++, s._header.attr("tabindex", t.tI)), void 0 == s._content.attr("tabindex") && (t.tI++, s._content.attr("tabindex", t.tI)) }), this._setTheme(), e.each(this.items, function (e, i) { t._checkContent(e) }), this._setSize(), this._toggle(), this._keyBoard()) }, insert: function (t, i, s) { var r = "<div>" + i + "</div><div>" + s + "</div>"; if (-1 != t) e(r).insertBefore(this.items[t]._header); else { var o = this.items.length - 1; e(r).insertAfter(this.items[o]._content) } this.render() }, add: function (e, t) { this.insert(-1, e, t) }, update: function (e, t, i) { this.setHeaderContentAt(e, t), this.setContentAt(e, i) }, remove: function (e) { if (isNaN(e) && (e = this.items.length - 1), this.items[e]) { this.items[e]._header.remove(), this.items[e]._content.remove(), this.items.splice(e, 1); var t = this.expandedIndexes.indexOf(e); t > -1 && this.expandedIndexes.splice(t, 1), this.render() } }, destroy: function () { this._removeHandlers(), this.host.remove() }, focus: function () { try { e.each(this.items, function (e, t) { var i = this; if (0 == i.disabled) return i._header.focus(), !1 }) } catch (e) { } }, _applyExpandedIndexes: function () { for (var t = this, i = this.expandedIndexes.length, s = 0; s < i; s++) { var r = t.expandedIndexes[s]; e.each(this.items, function (e, i) { var s = this; if (e == r && (s.expandedFlag = !0, 0 == s.expanded && t.expandAt(e), "single" == t.expandMode || "singleFitHeight" == t.expandMode || "toggle" == t.expandMode || "none" == t.expandMode)) return !1 }), e.each(this.items, function (e, i) { var s = this; e != r && 0 == s.expandedFlag && t.collapseAt(e) }) } e.each(this.items, function (e, t) { this.expandedFlag = !1 }) }, propertyChangedHandler: function (e, t, i, s) { "disabled" == t ? e._enabledDisabledCheck() : "expandedIndexes" == t ? e._applyExpandedIndexes() : e.refresh() }, _raiseEvent: function (e, t) { var i = this.events[e], s = new jQuery.Event(i); s.owner = this, s.args = t, s.item = s.args.item; try { var r = this.host.trigger(s) } catch (e) { } return r }, resize: function (e, t) { this.width = e, this.height = t, this._setSize() }, _setSize: function () { var t = this; this.headersHeight = 0; var i = (this.items && this.items.length > 0 ? parseInt(this.items[0]._header.css("padding-left")) : 0) + (this.items && this.items.length > 0 ? parseInt(this.items[0]._header.css("padding-right")) : 0) + 2; isNaN(i) && (i = 12), "auto" == this.width ? this.host.width(this.width) : null != this.width && -1 != this.width.toString().indexOf("%") ? this.host.width(this.width) : this.host.width(this.width + i), this.host.height(this.height), e.each(this.items, function (e, i) { var s = this, r = t.arrowPosition; if (t.rtl) switch (r) { case "left": r = "right"; break; case "right": r = "left" } "right" == r ? (s._header_text.css({ float: "left", "margin-left": "0px" }), s._arrow.css({ float: "right", position: "relative" })) : "left" == r && ("auto" == t.width ? (s._header_text.css({ float: "left", "margin-left": "17px" }), s._arrow.css({ float: "left", position: "absolute" })) : (s._header_text.css({ float: "right", "margin-left": "0px" }), s._arrow.css({ float: "left", position: "relative" }))), s._header.height("auto"), s._header_text.css("min-height", s._arrow.height()), t.headersHeight += s._header.outerHeight(), s._arrow.css("margin-top", s._header_text.height() / 2 - s._arrow.height() / 2) }), e.each(this.items, function (e, i) { var s = this; if ("auto" != t.height) if ("single" == t.expandMode || "toggle" == t.expandMode || "multiple" == t.expandMode) t.host.css({ "overflow-x": "hidden", "overflow-y": "auto" }); else if ("singleFitHeight" == t.expandMode) { var r = parseInt(s._content.css("padding-top")) + parseInt(s._content.css("padding-bottom")); t.height && t.height.toString().indexOf("%") >= 0 ? s._content.height(t.host.height() - t.headersHeight - r + 2) : s._content.height(t.host.height() - t.headersHeight - r) } }), t._checkHeight() }, _toggle: function () { var t = this; if (0 == this._isTouchDevice) switch (this.toggleMode) { case "click": e.each(this.items, function (e, i) { var s = this; 0 == s.disabled && t.addHandler(s._header, "click.navigationbar" + this.widgetID, function () { t.focusedH = !0, t._animate(e) }) }); break; case "dblclick": e.each(this.items, function (e, i) { var s = this; 0 == s.disabled && t.addHandler(s._header, "dblclick.navigationbar" + this.widgetID, function () { t.focusedH = !0, t._animate(e) }) }) } else { if ("none" == this.toggleMode) return; e.each(this.items, function (i, s) { var r = this; 0 == r.disabled && t.addHandler(r._header, e.jqx.mobile.getTouchEventName("touchstart") + "." + this.widgetID, function () { t._animate(i) }) }) } }, _animate: function (e, t) { var i = this; this.eCFlag; var s = this.items[e]; "none" != this.expandMode && 1 != this.eCFlag && (1 == this.items[e].expanded ? "multiple" != this.expandMode && "toggle" != this.expandMode || this.collapseAt(e) : this.expandAt(e), i._isTouchDevice || (1 != t ? (s._header.addClass(this.toThemeProperty("jqx-fill-state-hover")), s._header.addClass(this.toThemeProperty("jqx-expander-header-hover")), s._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-top-hover")), s._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-down-hover"))) : (s._header.removeClass(this.toThemeProperty("jqx-fill-state-hover")), s._header.removeClass(this.toThemeProperty("jqx-expander-header-hover")), s._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-top-hover")), s._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-down-hover"))))) }, _removeHandlers: function () { var t = this; this.removeHandler(this.host, "keydown.navigationbar" + this.widgetID), e.each(this.items, function (e, i) { var s = this; t.removeHandler(s._header, "click.navigationbar" + t.widgetID), t.removeHandler(s._header, "dblclick.navigationbar" + t.widgetID), t.removeHandler(s._header, "mouseenter.navigationbar" + t.widgetID), t.removeHandler(s._header, "mouseleave.navigationbar" + t.widgetID), t.removeHandler(s._header, "focus.navigationbar" + t.widgetID), t.removeHandler(s._header, "blur.navigationbar" + t.widgetID), t.removeHandler(s._content, "focus.navigationbar" + t.widgetID), t.removeHandler(s._content, "blur.navigationbar" + t.widgetID), t.removeHandler(s._header_text, "focus.navigationbar" + t.widgetID), t.removeHandler(s._arrow, "focus.navigationbar" + t.widgetID) }) }, _setTheme: function () { var t = this; this.host.addClass(this.toThemeProperty("jqx-reset")), this.host.addClass(this.toThemeProperty("jqx-widget")), 1 == this.rtl && this.host.addClass(this.toThemeProperty("jqx-rtl")), e.each(this.items, function (e, i) { var s = this; s._header.css("position", "relative"), s._content.css("position", "relative"), s._header.addClass(t.toThemeProperty("jqx-widget-header")), s._header.addClass(t.toThemeProperty("jqx-item")), s._content.addClass(t.toThemeProperty("jqx-widget-content")), 0 == s.disabled ? (s._header.removeClass(t.toThemeProperty("jqx-fill-state-disabled")), s._content.removeClass(t.toThemeProperty("jqx-fill-state-disabled")), 1 == s.expanded ? (s._header.addClass(t.toThemeProperty("jqx-fill-state-pressed")), s._header.addClass(t.toThemeProperty("jqx-expander-header-expanded"))) : (s._header.addClass(t.toThemeProperty("jqx-fill-state-normal")), s._header.removeClass(t.toThemeProperty("jqx-expander-header-expanded"))), t._isTouchDevice || (t.addHandler(s._header, "mouseenter.navigationbar" + t.widgetID, function () { 1 == s._expandChecker && (s.focusedH || s._header.css("z-index", 5), s._header.removeClass(t.toThemeProperty("jqx-fill-state-normal")), s._header.removeClass(t.toThemeProperty("jqx-fill-state-pressed")), s._header.addClass(t.toThemeProperty("jqx-fill-state-hover")), s._header.addClass(t.toThemeProperty("jqx-expander-header-hover")), s._arrow.addClass(t.toThemeProperty("jqx-expander-arrow-top-hover")), s._arrow.addClass(t.toThemeProperty("jqx-expander-arrow-down-hover")), s.expanded ? s._arrow.addClass(t.toThemeProperty("jqx-icon-arrow-up-hover")) : s._arrow.addClass(t.toThemeProperty("jqx-icon-arrow-down-hover"))) }), t.addHandler(s._header, "mouseleave.navigationbar" + t.widgetID, function () { s.focusedH || s._header.css("z-index", 0), s._header.removeClass(t.toThemeProperty("jqx-fill-state-hover")), s._header.removeClass(t.toThemeProperty("jqx-expander-header-hover")), s._arrow.removeClass(t.toThemeProperty("jqx-expander-arrow-top-hover")), s._arrow.removeClass(t.toThemeProperty("jqx-expander-arrow-down-hover")), 1 == s._expandChecker ? s._header.addClass(t.toThemeProperty("jqx-fill-state-normal")) : s._header.addClass(t.toThemeProperty("jqx-fill-state-pressed")), s._arrow.removeClass(t.toThemeProperty("jqx-icon-arrow-up-hover")), s._arrow.removeClass(t.toThemeProperty("jqx-icon-arrow-down-hover")) }))) : (s._header.addClass(t.toThemeProperty("jqx-fill-state-disabled")), s._content.addClass(t.toThemeProperty("jqx-fill-state-disabled"))), t.host.addClass(t.toThemeProperty("jqx-navigationbar")), s._header.addClass(t.toThemeProperty("jqx-expander-header")), s._content.addClass(t.toThemeProperty("jqx-expander-content")), s._content.addClass(t.toThemeProperty("jqx-expander-content-bottom")), 0 != e && s._header.css("margin-top", -1), s._arrow.addClass(t.toThemeProperty("jqx-expander-arrow")) }) }, _checkContent: function (e) { var t = this.items[e], i = t._content; if (this._cntntEmpty = /^\s*$/.test(this.items[e]._content.html()), 1 == this._cntntEmpty) i.css("display", "none"), i.height(0), i.addClass(this.toThemeProperty("jqx-expander-content-empty")); else { if (t.expanded && i.css("display", "block"), "singleFitHeight" == this.expandMode) { var s = 1; 0 != e && (s = 2), i.height(this.host.height() - this.headersHeight + s) } else i.height("auto"); i.removeClass(this.toThemeProperty("jqx-expander-content-empty")) } }, _checkHeight: function () { var t = this; this.totalHeight = 0, this.heightFlag; var i = (this.items && this.items.length > 0 ? parseInt(this.items[0]._header.css("padding-left")) : 0) + (this.items && this.items.length > 0 ? parseInt(this.items[0]._header.css("padding-right")) : 0) + 2; isNaN(i) && (i = 12); e.each(this.items, function (e, i) { var s = this; t.totalHeight += (s.expanded ? s._content.outerHeight() : 0) + s._header.outerHeight() }), "auto" != this.width && "auto" != this.height && "singleFitHeight" != this.expandMode && (this.totalHeight > this.host.height() ? (this.host.width(this.width + i + 17), this.heightFlag = !0) : (this.host.width(this.width + i), this.heightFlag = !1)) }, _enabledDisabledCheck: function () { 1 == this.disabled ? e.each(this.items, function (e, t) { this.disabled = !0 }) : e.each(this.items, function (e, t) { this.disabled = !1 }) }, _updateExpandedIndexes: function () { var t = this; this.expandedIndexes = [], e.each(this.items, function (e, i) { if (1 == this.expanded && (t.expandedIndexes.push(e), "single" == t.expandMode || "singleFitHeight" == t.expandMode || "toggle" == t.expandMode || "none" == t.expandMode)) return !1 }) }, _keyBoard: function () { var t = this; this._focus(), this.addHandler(this.host, "keydown.navigationbar" + this.widgetID, function (i) { var s = !1; return e.each(t.items, function (e, r) { var o = this, a = t.items.length; if ((1 == o.focusedH || 1 == o.focusedC) && 0 == o.disabled) { switch (i.keyCode) { case 13: case 32: "none" != t.toggleMode && (1 == o.focusedH && t._animate(e, !0), s = !0); break; case 37: if (0 != e) t.items[e - 1]._header.focus(); else { a = t.items.length; t.items[a - 1]._header.focus() } s = !0; break; case 38: if (0 == i.ctrlKey) if (0 != e) t.items[e - 1]._header.focus(); else { a = t.items.length; t.items[a - 1]._header.focus() } else 1 == o.focusedC && o._header.focus(); s = !0; break; case 39: e != a - 1 ? t.items[e + 1]._header.focus() : t.items[0]._header.focus(), s = !0; break; case 40: 0 == i.ctrlKey ? e != a - 1 ? t.items[e + 1]._header.focus() : t.items[0]._header.focus() : 1 == o.expanded && o._content.focus(), s = !0; break; case 35: e != a - 1 && t.items[a - 1]._header.focus(), s = !0; break; case 36: 0 != e && t.items[0]._header.focus(), s = !0 } return !1 } }), s && i.preventDefault && i.preventDefault(), !s }) }, _focus: function () { var t = this; this.disabled || e.each(this.items, function (i, s) { var r = this; t.addHandler(r._header, "focus.navigationbar" + this.widgetID, function () { r.focusedH = !0, e.jqx.aria(r._header, "aria-selected", !0), r._header.addClass(t.toThemeProperty("jqx-fill-state-focus")), r._header.css("z-index", 10) }), t.addHandler(r._header, "blur.navigationbar" + this.widgetID, function () { r.focusedH = !1, e.jqx.aria(r._header, "aria-selected", !1), r._header.hasClass("jqx-expander-header-hover") ? r._header.css("z-index", 5) : r._header.css("z-index", 0), r._header.removeClass(t.toThemeProperty("jqx-fill-state-focus")) }), t.addHandler(r._header_text, "focus.navigationbar" + this.widgetID, function () { r._header.focus() }), t.addHandler(r._arrow, "focus.navigationbar" + this.widgetID, function () { r._header.focus() }), t.addHandler(r._content, "focus.navigationbar" + this.widgetID, function () { r.focusedC = !0, r._content.addClass(t.toThemeProperty("jqx-fill-state-focus")) }), t.addHandler(r._content, "blur.navigationbar" + this.widgetID, function () { r.focusedC = !1, r._content.removeClass(t.toThemeProperty("jqx-fill-state-focus")) }) }) } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxNumberInput", "", {}), e.extend(e.jqx._jqxNumberInput.prototype, { defineInstance: function () { this.value = null, this.decimal = 0, this.min = -99999999, this.max = 99999999, this.width = null, this.validationMessage = "Invalid value", this.height = 50, this.textAlign = "right", this.readOnly = !1, this.promptChar = "_", this.decimalDigits = 2, this.decimalSeparator = ".", this.groupSeparator = ",", this.groupSize = 3, this.symbol = "", this.symbolPosition = "left", this.digits = 8, this.negative = !1, this.negativeSymbol = "-", this.disabled = !1, this.inputMode = "advanced", this.spinButtons = !1, this.spinButtonsWidth = 18, this.spinButtonsStep = 1, this.autoValidate = !0, this.spinMode = "advanced", this.enableMouseWheel = !0, this.touchMode = "auto", this.rtl = !1, this.events = ["valuechanged", "textchanged", "mousedown", "mouseup", "keydown", "keyup", "keypress", "change"], this.aria = { "aria-valuenow": { name: "decimal", type: "number" }, "aria-valuemin": { name: "min", type: "number" }, "aria-valuemax": { name: "max", type: "number" }, "aria-disabled": { name: "disabled", type: "boolean" } }, this.invalidArgumentExceptions = ["invalid argument exception"] }, createInstance: function (e) { var t = this.host.attr("value"); void 0 != t && (this.decimal = t), null != this.value && (this.decimal = this.value), this.render() }, _doTouchHandling: function () { var e = this, t = e.savedValue; if (e.parsing || (e.parsing = !0), e.parsing) { e.numberInput.val() && 0 == e.numberInput.val().indexOf("-") ? e.setvalue("negative", !0) : e.setvalue("negative", !1); for (var i = e.numberInput.val(), s = 0; s < i.length - 1; s++) { var r = i.substring(s, s + 1); if (isNaN(parseFloat(r)) && r != e.symbol && "%" != r && "$" != r && "." != r && "," != r && "-" != r) return e.numberInput[0].value = t, void (e.parsing = !1) } e.ValueString = e.GetValueString(e.numberInput.val(), e.decimalSeparator, "" != e.decimalSeparator), e.ValueString = new Number(e.ValueString).toFixed(e.decimalDigits), e._parseDecimalInSimpleMode(), e.decimal = e.ValueString, e.getvalue("negative") && (e.decimal = "-" + e.ValueString), e.parsing = !1 } }, render: function () { this.host.attr({ role: "spinbutton" }), this.host.attr("data-role", "input"), e.jqx.aria(this), e.jqx.aria(this, "aria-multiline", !1); r = this; (this.officeMode || this.theme && -1 != this.theme.indexOf("office")) && 18 == this.spinButtonsWidth && (this.spinButtonsWidth = 15), (e.jqx.mobile.isTouchDevice() || !0 === this.touchMode) && (this.inputMode = "textbox", this.spinMode = "simple"), "" == this.decimalSeparator && (this.decimalSeparator = " "), this.host.addClass(this.toThemeProperty("jqx-input")), this.host.addClass(this.toThemeProperty("jqx-rc-all")), this.host.addClass(this.toThemeProperty("jqx-widget")), this.host.addClass(this.toThemeProperty("jqx-widget-content")), this.host.addClass(this.toThemeProperty("jqx-numberinput")), this.spinButtons ? this._spinButtons() : (this.numberInput = e("<input autocomplete='off' type='textarea'/>").appendTo(this.host), this.numberInput.addClass(this.toThemeProperty("jqx-input-content")), this.numberInput.addClass(this.toThemeProperty("jqx-widget-content"))); var t = this.host.attr("name"); t && this.numberInput.attr("name", t), this.host.attr("tabindex") && (this.numberInput.attr("tabindex", this.host.attr("tabindex")), this.host.removeAttr("tabindex")), (e.jqx.mobile.isTouchDevice() || !0 === this.touchMode || "textbox" == this.inputMode) && ((r = this).savedValue = "", this.addHandler(this.numberInput, "focus", function () { r.savedValue = r.numberInput[0].value }), this.addHandler(this.numberInput, "change", function () { r._doTouchHandling() })), e.data(this.host[0], "jqxNumberInput").jqxNumberInput = this; r = this; this.host.parents("form").length > 0 && this.addHandler(this.host.parents("form"), "reset", function () { setTimeout(function () { r.setDecimal(0) }, 10) }), this.propertyChangeMap.disabled = function (e, t, s, r) { r ? (e.numberInput.addClass(i.toThemeProperty("jqx-input-disabled")), e.numberInput.attr("disabled", !0)) : (e.host.removeClass(i.toThemeProperty("jqx-input-disabled")), e.numberInput.attr("disabled", !1)), e.spinButtons && e.host.jqxRepeatButton && (e.upbutton.jqxRepeatButton({ disabled: r }), e.downbutton.jqxRepeatButton({ disabled: r })) }, this.disabled && (this.numberInput.addClass(this.toThemeProperty("jqx-input-disabled")), this.numberInput.attr("disabled", !0), this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"))), this.selectedText = "", this.decimalSeparatorPosition = -1; this.element.id, this.element; var i = this; this.oldValue = this._value(), this.items = new Array; this.value; var s = this.decimal; this._initializeLiterals(), this._render(), this.setDecimal(s); var r = this; setTimeout(function () { r._render(!1) }, 100), this._addHandlers(), e.jqx.utilities.resize(this.host, function () { r._render() }) }, refresh: function (e) { e || this._render() }, wheel: function (e, t) { if (t.enableMouseWheel) { var i = 0; if (e || (e = window.event), e.originalEvent && e.originalEvent.wheelDelta && (e.wheelDelta = e.originalEvent.wheelDelta), e.wheelDelta ? i = e.wheelDelta / 120 : e.detail && (i = -e.detail / 3), i) { var s = t._handleDelta(i); return e.preventDefault && e.preventDefault(), null != e.originalEvent && (e.originalEvent.mouseHandled = !0), void 0 != e.stopPropagation && e.stopPropagation(), !!s && (s = !1, e.returnValue = s, s) } e.preventDefault && e.preventDefault(), e.returnValue = !1 } }, _handleDelta: function (e) { return e < 0 ? this.spinDown() : this.spinUp(), !0 }, _addHandlers: function () { var t = this; this.addHandler(this.numberInput, "mousedown", function (e) { return t._raiseEvent(2, e) }), this._mousewheelfunc = this._mousewheelfunc || function (e) { if (!t.editcell) return t.wheel(e, t), !1 }, this.removeHandler(this.host, "mousewheel", this._mousewheelfunc), this.addHandler(this.host, "mousewheel", this._mousewheelfunc); var i = ""; this.addHandler(this.numberInput, "focus", function (s) { e.data(t.numberInput, "selectionstart", t._selection().start), t.host.addClass(t.toThemeProperty("jqx-fill-state-focus")), t.spincontainer && t.spincontainer.addClass(t.toThemeProperty("jqx-numberinput-focus")), i = t.numberInput.val() }), this.addHandler(this.numberInput, "blur", function (s) { if ("simple" == t.inputMode && t._exitSimpleInputMode(s, t, !1, i), t.autoValidate) { var r = parseFloat(t.decimal); t.getvalue("negative") && t.decimal > 0 && (r = -parseFloat(t.decimal)), r > t.max && (t._disableSetSelection = !0, t.setDecimal(t.max), t._disableSetSelection = !1), r < t.min && (t._disableSetSelection = !0, t.setDecimal(t.min), t._disableSetSelection = !1) } return t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")), t.spincontainer && t.spincontainer.removeClass(t.toThemeProperty("jqx-numberinput-focus")), t.numberInput.val() != i && (t._raiseEvent(7, s), e.jqx.aria(t, "aria-valuenow", t.decimal), t.element.value = t.decimal), !0 }), this.addHandler(this.numberInput, "mouseup", function (e) { return t._raiseEvent(3, e) }), this.addHandler(this.numberInput, "keydown", function (e) { return t._raiseEvent(4, e) }), this.addHandler(this.numberInput, "keyup", function (e) { return t._raiseEvent(5, e) }), this.addHandler(this.numberInput, "keypress", function (e) { return t._raiseEvent(6, e) }) }, focus: function () { try { this.numberInput.focus() } catch (e) { } }, _removeHandlers: function () { var t = this; this.removeHandler(this.numberInput, "mousedown"), e.jqx.mobile.isOperaMiniMobileBrowser() && this.removeHandler(e(document), "click." + this.element.id, t._exitSimpleInputMode, t), this.removeHandler(this.numberInput, "focus"), this.removeHandler(this.numberInput, "blur"), this.removeHandler(this.numberInput, "mouseup"), this.removeHandler(this.numberInput, "keydown"), this.removeHandler(this.numberInput, "keyup"), this.removeHandler(this.numberInput, "keypress") }, _spinButtons: function () { if (!this.host.jqxRepeatButton) throw new Error("jqxNumberInput: Missing reference to jqxbuttons.js."); this.numberInput ? this.numberInput.css("float", "left") : (this.numberInput = e("<input autocomplete='off' style='position: relative; float: left;' type='textarea'/>"), this.numberInput.appendTo(this.host), this.numberInput.addClass(this.toThemeProperty("jqx-input-content")), this.numberInput.addClass(this.toThemeProperty("jqx-widget-content"))), this.spincontainer && (this.upbutton && this.upbutton.jqxRepeatButton("destroy"), this.downbutton && this.downbutton.jqxRepeatButton("destroy"), this.spincontainer.remove()), this.spincontainer = e('<div style="float: right; height: 100%; overflow: hidden; position: relative;"></div>'), this.rtl && (this.spincontainer.css("float", "right"), this.numberInput.css("float", "right"), this.spincontainer.css("left", "-1px")), this.host.append(this.spincontainer), this.upbutton = e('<div style="overflow: hidden; padding: 0px; margin-left: -1px; position: relative;"><div></div></div>'), this.spincontainer.append(this.upbutton), this.upbutton.jqxRepeatButton({ overrideTheme: !0, disabled: this.disabled, roundedCorners: "top-right" }), this.downbutton = e('<div style="overflow: hidden; padding: 0px; margin-left: -1px; position: relative;"><div></div></div>'), this.spincontainer.append(this.downbutton), this.downbutton.jqxRepeatButton({ overrideTheme: !0, disabled: this.disabled, roundedCorners: "bottom-right" }); t = this; this.downbutton.addClass(this.toThemeProperty("jqx-fill-state-normal")), this.upbutton.addClass(this.toThemeProperty("jqx-fill-state-normal")), this.upbutton.addClass(this.toThemeProperty("jqx-rc-tr")), this.downbutton.addClass(this.toThemeProperty("jqx-rc-br")), this.addHandler(this.downbutton, "mouseup", function (e) { t.disabled || (t.downbutton.removeClass(t.toThemeProperty("jqx-fill-state-pressed")), t._downArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-down-selected"))) }), this.addHandler(this.upbutton, "mouseup", function (e) { t.disabled || (t.upbutton.removeClass(t.toThemeProperty("jqx-fill-state-pressed")), t._upArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-up-selected"))) }), this.removeHandler(e(document), "mouseup." + this.element.id), this.addHandler(e(document), "mouseup." + this.element.id, function (e) { t.upbutton.removeClass(t.toThemeProperty("jqx-fill-state-pressed")), t._upArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-up-selected")), t.downbutton.removeClass(t.toThemeProperty("jqx-fill-state-pressed")), t._downArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-down-selected")) }), this.addHandler(this.downbutton, "mousedown", function (i) { if (!t.disabled) return e.jqx.browser.msie && e.jqx.browser.version < 9 && (t._inputSelection = t._selection()), t.downbutton.addClass(t.toThemeProperty("jqx-fill-state-pressed")), t._downArrow.addClass(t.toThemeProperty("jqx-icon-arrow-down-selected")), i.preventDefault(), i.stopPropagation(), !1 }), this.addHandler(this.upbutton, "mousedown", function (i) { if (!t.disabled) return e.jqx.browser.msie && e.jqx.browser.version < 9 && (t._inputSelection = t._selection()), t.upbutton.addClass(t.toThemeProperty("jqx-fill-state-pressed")), t._upArrow.addClass(t.toThemeProperty("jqx-icon-arrow-up-selected")), i.preventDefault(), i.stopPropagation(), !1 }), this.addHandler(this.upbutton, "mouseenter", function (e) { t.upbutton.addClass(t.toThemeProperty("jqx-fill-state-hover")), t._upArrow.addClass(t.toThemeProperty("jqx-icon-arrow-up-hover")) }), this.addHandler(this.upbutton, "mouseleave", function (e) { t.upbutton.removeClass(t.toThemeProperty("jqx-fill-state-hover")), t._upArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-up-hover")) }), this.addHandler(this.downbutton, "mouseenter", function (e) { t.downbutton.addClass(t.toThemeProperty("jqx-fill-state-hover")), t._downArrow.addClass(t.toThemeProperty("jqx-icon-arrow-down-hover")) }), this.addHandler(this.downbutton, "mouseleave", function (e) { t.downbutton.removeClass(t.toThemeProperty("jqx-fill-state-hover")), t._downArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-down-hover")) }), this.upbutton.css("border-width", "0px"), this.downbutton.css("border-width", "0px"), this.disabled ? (this.upbutton[0].disabled = !0, this.downbutton[0].disabled = !0) : (this.upbutton[0].disabled = !1, this.downbutton[0].disabled = !1), this.spincontainer.addClass(this.toThemeProperty("jqx-input")), this.spincontainer.addClass(this.toThemeProperty("jqx-rc-r")), this.spincontainer.css("border-width", "0px"), this.rtl ? this.spincontainer.css("border-right-width", "1px") : this.spincontainer.css("border-left-width", "1px"), this._upArrow = this.upbutton.find("div"), this._downArrow = this.downbutton.find("div"), this._upArrow.addClass(this.toThemeProperty("jqx-icon-arrow-up")), this._downArrow.addClass(this.toThemeProperty("jqx-icon-arrow-down")), this._upArrow.addClass(this.toThemeProperty("jqx-input-icon")), this._downArrow.addClass(this.toThemeProperty("jqx-input-icon")); var t = this; this._upArrow.hover(function () { t.disabled || t._upArrow.addClass(t.toThemeProperty("jqx-icon-arrow-up-hover")) }, function () { t._upArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-up-hover")) }), this._downArrow.hover(function () { t.disabled || t._downArrow.addClass(t.toThemeProperty("jqx-icon-arrow-down-hover")) }, function () { t._downArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-down-hover")) }); var i = e.jqx.mobile.isTouchDevice(), s = "click"; i && (s = e.jqx.mobile.getTouchEventName("touchstart")), i && (this.addHandler(this.downbutton, "click", function (e) { t.spinDown() }), this.addHandler(this.upbutton, "click", function (e) { t.spinUp() })), this.addHandler(this.downbutton, s, function (s) { return i ? (s.preventDefault(), s.stopPropagation()) : (0 == t._selection().start && t._setSelectionStart(t.numberInput.val().length), e.jqx.browser.msie && e.jqx.browser.version < 9 && t._setSelectionStart(t._inputSelection.start)), t.spinDown(), !1 }), this.addHandler(this.upbutton, s, function (s) { return i ? (s.preventDefault(), s.stopPropagation()) : (0 == t._selection().start && t._setSelectionStart(t.numberInput.val().length), e.jqx.browser.msie && e.jqx.browser.version < 9 && t._setSelectionStart(t._inputSelection.start)), t.spinUp(), !1 }) }, spinDown: function () { var t = this; if ("none" != t.spinMode) { var i = (g = this.getvalue("negative")) ? -1 : 0; if ((e.jqx.mobile.isTouchDevice() || "textbox" == this.inputMode) && t._doTouchHandling(), !t.disabled) { var s = this._selection(), r = this.decimal; if ((l = this.getDecimal()) < this.min) return l = this.min, this.setDecimal(this.min), this._setSelectionStart(s.start), void this.spinDown(); if (l > this.max) return l = this.max, this.setDecimal(this.max), this._setSelectionStart(s.start), void this.spinDown(); t.spinButtonsStep < 0 && (t.spinButtonsStep = 1); var o = parseInt(t.decimal) + t.spinButtonsStep, a = i + (o = o.toString().length) <= t.digits; if ("advanced" != t.spinMode) { if (l - t.spinButtonsStep >= t.min && a) { h = 1; for (u = 0; u < t.decimalDigits; u++) h *= 10; m = h * l - h * t.spinButtonsStep; m /= h, m = this._parseDecimalValueToEditorValue(m), t.setDecimal(m) } } else { var n = this._getspindecimal(), l = (this._getSeparatorPosition(), parseFloat(n.decimal)); t.spinButtonsStep < 0 && (t.spinButtonsStep = 1); var a = i + (o = (o = parseInt(l) + t.spinButtonsStep).toString().length) <= t.digits, h = 1, d = n.decimal.indexOf("."); if (-1 != d) { for (var c = n.decimal.length - d - 1, h = 1, u = 0; u < c; u++) h *= 10; -1 == (d = (l = (l -= new Number(t.spinButtonsStep / h)).toFixed(c)).toString().indexOf(".")) && (l = l.toString() + "."); var p = l.toString() + n.afterdecimal; (p = (p = new Number(p)).toFixed(t.decimalDigits)) >= t.min && (p = this._parseDecimalValueToEditorValue(p), t.setDecimal(p)) } else if (l - t.spinButtonsStep >= t.min && a) { var m = h * l - h * t.spinButtonsStep; (p = (m /= h).toString() + n.afterdecimal) >= t.min && (p = this._parseDecimalValueToEditorValue(p), t.setDecimal(p)) } } if (void 0 == p || "simple" != this.inputMode) return this._setSelectionStart(s.start), t.savedValue = t.numberInput[0].value, e.jqx.mobile.isTouchDevice() && (this._raiseEvent(7, {}), this._raiseEvent(0, {})), void e.jqx.aria(self, "aria-valuenow", this.decimal); p = this.decimal.toString(); var g = this.getvalue("negative"); 0 == i && g ? this._setSelectionStart(s.start + 1) : void 0 == p || void 0 != r && r.toString().length != p.length ? g ? this._setSelectionStart(s.start + 1) : this._setSelectionStart(s.start - 1) : this._setSelectionStart(s.start), e.jqx.mobile.isTouchDevice() && (this._raiseEvent(7, {}), this._raiseEvent(0, {})), e.jqx.aria(self, "aria-valuenow", this.decimal) } } }, _getspindecimal: function () { var e = this._selection(), t = "", i = (this._getSeparatorPosition(), this._getVisibleItems()), s = this._getHiddenPrefixCount(), r = this.numberInput.val(); this.numberInput.val().length == e.start && 0 == e.length && (this._setSelection(e.start, e.start + 1), e = this._selection()); for (var o = "advanced" != this.inputMode, a = 0; a < e.start; a++) if (o) { l = r.substring(a, a + 1); (h = !isNaN(parseInt(l))) && (t += l), l == this.decimalSeparator && (t += l) } else i[a].canEdit && i[a].character != this.promptChar ? t += i[a].character : i[a].canEdit || -1 == this.decimalSeparatorPosition || i[a] != i[this.decimalSeparatorPosition - s] || (0 == t.length && (t = "0"), t += i[a].character); for (var n = "", a = e.start; a < i.length; a++) if (o) { var l = r.substring(a, a + 1), h = !isNaN(parseInt(l)); h && (n += l), l == this.decimalSeparator && (n += l) } else i[a].canEdit && i[a].character != this.promptChar ? n += i[a].character : i[a].canEdit || -1 == this.decimalSeparatorPosition || i[a] != i[this.decimalSeparatorPosition - s] || (n += i[a].character); return { decimal: this.getvalue("negative") ? "-" + this._parseDecimalValue(t).toString() : this._parseDecimalValue(t).toString(), afterdecimal: this._parseDecimalValue(n) } }, _parseDecimalValue: function (e) { if ("." != this.decimalSeparator) { var t = e.toString().indexOf(this.decimalSeparator); if (t >= 0) return e.toString().substring(0, t) + "." + e.toString().substring(t + 1) } return e }, _parseDecimalValueToEditorValue: function (e) { if ("." != this.decimalSeparator) { var t = e.toString().indexOf("."); if (t >= 0) return e.toString().substring(0, t) + this.decimalSeparator + e.toString().substring(t + 1) } return e }, spinUp: function () { var t = this; if ("none" != t.spinMode) { (e.jqx.mobile.isTouchDevice() || "textbox" == this.inputMode) && t._doTouchHandling(); var i = (f = this.getvalue("negative")) ? -1 : 0; if (!t.disabled) { var s = this._selection(), r = t.decimal; if ((d = t.getDecimal()) < this.min) return d = this.min, this.setDecimal(this.min), this._setSelectionStart(s.start), void this.spinUp(); if (d > this.max) return d = this.max, this.setDecimal(this.max), this._setSelectionStart(s.start), void this.spinUp(); t.spinButtonsStep < 0 && (t.spinButtonsStep = 1); var o = parseInt(t.decimal) + t.spinButtonsStep, a = i + (o = o.toString().length) <= t.digits; if ("advanced" != t.spinMode) { if (d + t.spinButtonsStep <= t.max && a) { for (var n = 1, l = 0; l < t.decimalDigits; l++) n *= 10; p = n * d + n * t.spinButtonsStep; p /= n, p = this._parseDecimalValueToEditorValue(p), t.setDecimal(p) } } else { var h = this._getspindecimal(), d = (this._getSeparatorPosition(), parseFloat(h.decimal)); t.spinButtonsStep < 0 && (t.spinButtonsStep = 1); var a = i + (o = (o = parseInt(d) + t.spinButtonsStep).toString().length) <= t.digits, n = 1, c = h.decimal.indexOf("."); if (-1 != c) { for (var u = h.decimal.length - c - 1, n = 1, l = 0; l < u; l++) n *= 10; -1 == (c = (d = (d += new Number(t.spinButtonsStep / n)).toFixed(u)).toString().indexOf(".")) && (d = d.toString() + "."); m = d.toString() + h.afterdecimal; m = (m = new Number(m)).toFixed(t.decimalDigits), (g = new Number(m).toFixed(t.decimalDigits)) <= t.max ? (m = this._parseDecimalValueToEditorValue(m), t.setDecimal(m)) : m = void 0 } else if (d + t.spinButtonsStep <= t.max && a) { var p = n * d + n * t.spinButtonsStep, m = (p /= n).toString() + h.afterdecimal, g = new Number(m).toFixed(t.decimalDigits); g <= t.max ? (m = this._parseDecimalValueToEditorValue(m), f && -1 == m.indexOf("-") && "-0" != h.decimal && (m = "-" + m), t.setDecimal(m)) : m = void 0 } } if (void 0 == m || "simple" != this.inputMode) return this._setSelectionStart(s.start), t.savedValue = t.numberInput[0].value, e.jqx.mobile.isTouchDevice() && (this._raiseEvent(7, {}), this._raiseEvent(0, {})), void e.jqx.aria(self, "aria-valuenow", this.decimal); m = this.decimal.toString(); var f = this.getvalue("negative"); -1 != i || f ? void 0 == m || void 0 != r && r.toString().length != m.length ? f ? this._setSelectionStart(s.start) : this._setSelectionStart(1 + s.start) : this._setSelectionStart(s.start) : this._setSelectionStart(-1 + s.start), e.jqx.mobile.isTouchDevice() && (this._raiseEvent(7, {}), this._raiseEvent(0, {})), e.jqx.aria(self, "aria-valuenow", this.decimal) } } }, _exitSimpleInputMode: function (t, i, s, r) { if (void 0 == i && (i = t.data), null != i) { if (void 0 == s) { if (null != t.target && null != i.element && (void 0 != t.target.id && t.target.id.toString().length > 0 && i.host.find("#" + t.target.id).length > 0 || t.target == i.element)) return; var o = i.host.offset(), a = o.left, n = o.top, l = i.host.width(), h = i.host.height(), d = e(t.target).offset(); if (d.left >= a && d.left <= a + l && d.top >= n && d.top <= n + h) return } if (e.jqx.mobile.isOperaMiniBrowser() && i.numberInput.attr("readonly", !0), !i.disabled && !i.readOnly && null != e.data(i.numberInput, "simpleInputMode")) return e.data(i.numberInput, "simpleInputMode", null), this._parseDecimalInSimpleMode(), !1 } }, _getDecimalInSimpleMode: function () { t = this.decimal; if ("." != this.decimalSeparator) { var e = t.toString().indexOf(this.decimalSeparator); if (e > 0) var t = t.toString().substring(0, e) + "." + t.toString().substring(e + 1) } return t }, _parseDecimalInSimpleMode: function (e) { var t = this, i = t.getvalue("negative"), s = this.ValueString; if (void 0 == s && (s = this.GetValueString(this.numberInput.val(), this.decimalSeparator, "" != this.decimalSeparator)), "." != this.decimalSeparator) { var r = s.toString().indexOf("."); r > 0 && (s = s.toString().substring(0, r) + this.decimalSeparator + s.toString().substring(r + 1)) } var o = i ? "-" : ""; "left" == this.symbolPosition && (o += this.symbol); var a = this.digits % this.groupSize; 0 == a && (a = this.groupSize); var n = s.toString(); n.indexOf("-") >= 0 && (n = n.substring(n.indexOf("-") + 1)), o += n, "right" == this.symbolPosition && (o += this.symbol), 0 != e && t.numberInput.val(o) }, _enterSimpleInputMode: function (t, i) { void 0 == i && (i = t.data); var s = this._selection(); if (null != i) { var r = i.getvalue("negative"), o = i.decimal; r && o > 0 && (o = -o), i.numberInput.val(o), e.data(i.numberInput, "simpleInputMode", !0), e.jqx.mobile.isOperaMiniBrowser() && i.numberInput.attr("readonly", !1), this._parseDecimalInSimpleMode(), this._setSelectionStart(s.start) } }, setvalue: function (e, t) { void 0 != this[e] && ("decimal" == e ? this._setDecimal(t) : (this[e] = t, this.propertyChangedHandler(this, e, t, t))) }, getvalue: function (e) { return "decimal" == e && void 0 != this.negative && 1 == this.negative ? -Math.abs(this[e]) : e in this ? this[e] : null }, _getString: function () { for (var e = "", t = 0; t < this.items.length; t++) e += this.items[t].character; return e }, _literal: function (e, t, i, s) { return { character: e, regex: t, canEdit: i, isSeparator: s } }, _initializeLiterals: function () { if ("textbox" != this.inputMode) { for (var e = 0, t = this.negativeSymbol.length, i = 0; i < t; i++) { var s = this.negativeSymbol.substring(i, i + 1), r = "", o = !1, a = null; a = this.negative ? this._literal(s, r, o, !1) : this._literal("", r, o, !1), this.items[e] = a, e++ } var n = this.symbol.length; if ("left" == this.symbolPosition) for (i = 0; i < n; i++) { var s = this.symbol.substring(i, i + 1), r = "", o = !1, a = this._literal(s, r, o, !1); this.items[e] = a, e++ } var l = this.digits % this.groupSize; 0 == l && (l = this.groupSize); for (i = 0; i < this.digits; i++) { var s = this.promptChar, r = "\\d", o = !0, a = this._literal(s, r, o, !1); if (this.items[e] = a, e++, i < this.digits - 1 && void 0 != this.groupSeparator && this.groupSeparator.length > 0) { if (0 == --l) { l = this.groupSize; var h = this._literal(this.groupSeparator, "", !1, !1); this.items[e] = h, e++ } } else i == this.digits - 1 && (a.character = 0) } if (this.decimalSeparatorPosition = -1, void 0 != this.decimalDigits && this.decimalDigits > 0) { 0 == (s = this.decimalSeparator).length && (s = "."); a = this._literal(s, "", !1, !0); this.items[e] = a, this.decimalSeparatorPosition = e, e++; for (i = 0; i < this.decimalDigits; i++) { var r = "\\d", d = this._literal(0, r, !0, !1); this.items[e] = d, e++ } } if ("right" == this.symbolPosition) for (i = 0; i < n; i++) { var s = this.symbol.substring(i, i + 1), r = "", o = !1, a = this._literal(s, r, o); this.items[e] = a, e++ } } }, _match: function (e, t) { return new RegExp(t, "i").test(e) }, _raiseEvent: function (t, i) { var s = this.events[t], r = {}; if (r.owner = this, "none" == this.host.css("display")) return !0; var o = i.charCode ? i.charCode : i.keyCode ? i.keyCode : 0, a = !0, n = this.readOnly, l = this; if ((3 == t || 2 == t) && !this.disabled) { if ("simple" == this.inputMode || "textbox" == this.inputMode) return !0; this._handleMouse(i) } if (0 == t) { var h = this.getvalue("decimal"); this.max < h || this.min > h ? this.host.addClass(this.toThemeProperty("jqx-input-invalid")) : (this.host.removeClass(this.toThemeProperty("jqx-input-invalid")), this.host.addClass(this.toThemeProperty("jqx-input")), this.host.addClass(this.toThemeProperty("jqx-rc-all"))) } var d = new jQuery.Event(s); d.owner = this, r.value = this.getvalue("decimal"), r.text = this.numberInput.val(), d.args = r, a = this.host.trigger(d); l = this; if ("textbox" == this.inputMode) return a; if ("simple" != this.inputMode) { if (4 == t) { if (n || this.disabled) return !1; a = l._handleKeyDown(i, o) } else if (5 == t) (n || this.disabled) && (a = !1); else if (6 == t) { if (n || this.disabled) return !1; a = l._handleKeyPress(i, o) } } else if (4 == t || 5 == t || 6 == t) { if (e.jqx.mobile.isTouchDevice() || !0 === this.touchMode) return !0; if (n || this.disabled) return !1; var c = String.fromCharCode(o), u = (parseInt(c), !0); if (i.ctrlKey || i.shiftKey || o >= 65 && o <= 90 && (u = !1), 6 == t && void 0 != e.jqx.browser.opera && 8 == o) return !1; if (u) { if (4 == t && (u = l._handleSimpleKeyDown(i, o)), 189 == o || 45 == o || 109 == o || 173 == o) { var p = l._selection(); 4 == t && (0 == l.getvalue("negative") ? l.setvalue("negative", !0) : l.setvalue("negative", !1), l.decimal = l.ValueString, l._parseDecimalInSimpleMode(), l._setSelectionStart(p.start), u = !1, l._raiseEvent(0, l.value), l._raiseEvent(1, l.numberInput.val())) } if (!e.jqx.browser.msie) { var m = i; if (m.ctrlKey && 99 == o || m.ctrlKey && 67 == o || m.ctrlKey && 122 == o || m.ctrlKey && 90 == o || m.ctrlKey && 118 == o || m.ctrlKey && 86 == o || m.shiftKey && 45 == o) return (e.jqx.browser.webkit || e.jqx.browser.chrome) && l._handleSimpleKeyDown(i, o), 67 == o } if (i.ctrlKey && 97 == o || i.ctrlKey && 65 == o) return !0; if (6 == t && u) return this._isSpecialKey(o) } return u } return a }, GetSelectionInValue: function (e, t, s, r) { var o = 0; for (i = 0; i < t.length && !(i >= e) ; i++) { var a = t.substring(i, i + 1); (!isNaN(parseInt(a)) || r && t.substring(i, i + 1) == s) && o++ } return o }, GetSelectionLengthInValue: function (e, t, s, r) { var o = 0; for (i = 0; i < s.length && !(i >= e + t) ; i++) { var a = s.substring(i, i + 1), n = !isNaN(parseInt(a)); (t > 0 && i >= e && n || i >= e && s[i].toString() == r) && o++ } return o }, GetInsertTypeByPositionInValue: function (e, t, i, s) { var r = "before", o = this.GetValueString(i, t, s); return e > this.GetDigitsToSeparator(0, o, t) && (r = "after"), r }, RemoveRange: function (e, t, i, s, r, o) { var a = this.digits, n = e, l = t, h = 0, i = (this.decimal, this._selection(), this.numberInput.val()), d = "" != (s = this.decimalSeparator); if (0 == l && this.ValueString.length < this.decimalPossibleChars - 1) return h; var c = this.GetSeparatorPositionInText(s, i); r || (c = this.GetSeparatorPositionInText(s, i)), c < 0 && !d && i.length > 1 && (c = i.length), -1 == c && (c = i.length); var u = d ? 1 : 0; t < 2 && 1 == o && this.ValueString.length - this.decimalDigits - u == a && e + t < c && l++; for (var p = "", m = 0; m < i.length; m++) if (m < n || m >= n + l) p += i.substring(m, m + 1); else if ((g = i.substring(m, m + 1)) != s) { g = i.substring(m, m + 1); if (m > c) p += "0"; else { var g = i.substring(m, m + 1); !isNaN(parseInt(g)) && h++ } } else p += s; 0 == p.length && (p = "0"), r ? this.numberInput.val(p) : this.ValueString = p; var f = p.substring(0, 1); return f == s && isNaN(parseInt(f)) && (p = "0" + p), this.ValueString = this.GetValueString(p, s, d), this.decimal = this.ValueString, this._parseDecimalInSimpleMode(), this._setSelectionStart(n), h }, InsertDigit: function (e, t) { "number" != typeof this.digits && (this.digits = parseInt(this.digits)), "number" != typeof this.decimalDigits && (this.decimalDigits = parseInt(this.decimalDigits)); var i = 1 + this.digits, s = this._selection(), r = this.getvalue("negative"), o = !1; 0 == s.start && "" != this.symbol && "left" == this.symbolPosition && (this._setSelectionStart(s.start + 1), s = this._selection(), o = !0), (r && o || r && !o && 0 == s.start) && (this._setSelectionStart(s.start + 1), s = this._selection()); var a = this.numberInput.val().substring(s.start, s.start + 1), n = this.numberInput.val(), l = this.decimalSeparator, h = "" != l && this.decimalDigits > 0; if (a == this.symbol && "right" == this.symbolPosition) { if (0 != this.decimalDigits) return; if (this.ValueString = this.GetValueString(n, l, h), this.ValueString.length >= i) return } this.ValueString = this.GetValueString(n, l, h); var d = this.ValueString; this.decimalDigits > 0 && t >= d.length && (t = d.length - 1); var c = ""; t < d.length && (c = d.substring(t, t + 1)); var u = !1; "after" == this.GetInsertTypeByPositionInValue(t, l, n, h) && (u = !0); var p = h ? 1 : 0; c != l && this.ValueString.length - this.decimalDigits - p >= i - 1 && (u = !0); var m = h ? 1 : 0; if (!(!u && this.ValueString && this.ValueString.length >= this.digits + this.decimalDigits + m)) { if (u && c != l) { if ((v = d.substring(0, t)).length == d.length && this.ValueString.length >= this.digits + this.decimalDigits + m) return; var g = e, f = ""; t + 1 < d.length && (f = d.substring(t + 1)); x = v + g + f; this.ValueString = x } else { var v = d.substring(0, t), x = v + (g = e) + (f = d.substring(t)); "0" == d.substring(0, 1) && (x = g + d.substring(1), c == l && (this._setSelectionStart(s.start - 1), s = this._selection())), this.ValueString = x } this.decimal = r ? -this.ValueString : this.ValueString, this._parseDecimalInSimpleMode(); var w = s.start; w += 1, this._setSelectionStart(w), this.value = this.decimal, this._raiseEvent(0, this.value), this._raiseEvent(1, this.numberInput.val()) } }, GetStringToSeparator: function (e, t, i) { var s = this.GetSeparatorPositionInText(t, e), r = e.subString(0, s); return this.GetValueString(r, t, i) }, GetSeparatorPositionInText: function (e, t) { var s = -1; for (i = 0; i < t.length; i++) if (t.substring(i, i + 1) == e) { s = i; break } return s }, GetValueString: function (e, t, i) { for (var s = "", r = 0; r < e.length; r++) { var o = e.substring(r, r + 1); !isNaN(parseInt(o)) && (s += o), o == t && (s += t) } return s }, Backspace: function () { var e = this._selection(), t = this._selection(), i = this.numberInput.val(); if (0 != e.start || 0 != e.length) { this.isBackSpace = !0; var s = i.substring[(e.start, e.start + 1)]; isNaN(parseInt(s)); if (e.start > 0 && 0 == e.length) { this._setSelectionStart(e.start - 1); e = this._selection() } this.Delete(), this._setSelectionStart(t.start - 1), this.isBackSpace = !1 } }, Delete: function (e) { var t = this._selection(), i = this.numberInput.val(), s = t.start, r = t.length; r = Math.max(r, 1), this.ValueString = this.GetValueString(i, this.decimalSeparator, "" != this.decimalSeparator), this.RemoveRange(t.start, r, this.ValueString, ".", !1); var o = this.ValueString.substring(0, 1); !isNaN(parseInt(o)) || (this.ValueString = "0" + this.ValueString), this.decimal = this.ValueString, this._parseDecimalInSimpleMode(), this._setSelectionStart(s), this.value = this.decimal, this._raiseEvent(0, this.value), this._raiseEvent(1, this.numberInput.val()) }, insertsimple: function (e) { var t = this._selection(), i = this.numberInput.val(); if (!(t.start == i.length && this.decimalDigits > 0)) { this.decimal; var s = this.decimalSeparator; this.ValueString = this.GetValueString(i, s, "" != s); var r = this.GetSelectionInValue(t.start, i, s, "" != s), o = this.GetSelectionLengthInValue(t.start, t.length, i, s); this.GetDigitsToSeparator(0, this.ValueString, s); this.decimalDigits > 0 && r >= this.ValueString.length && r--, this.RemoveRange(t.start, o, this.ValueString, s, !1, !0), this.InsertDigit(e, r, t) } }, GetDigitsToSeparator: function (e, t, s) { if (void 0 == s && (s = "."), t.indexOf(s) < 0) return t.length; for (i = 0; i < t.length; i++) if (t.substring(i, i + 1) == s) { e = i; break } return e }, _handleSimpleKeyDown: function (t, i) { if ((n = this._selection()).start >= 0 && n.start < this.items.length) c = String.fromCharCode(i); if (this.rtl && 37 == i) { r = (s = t.shiftKey) ? 1 : 0; return s ? this._setSelection(n.start + 1 - r, n.start + n.length + 1) : this._setSelection(n.start + 1 - r, n.start + 1), !1 } if (this.rtl && 39 == i) { var s = t.shiftKey, r = s ? 1 : 0; return s ? this._setSelection(n.start - 1, n.length + r + n.start - 1) : this._setSelection(n.start - 1, n.start - 1), !1 } if (8 == i) return this.Backspace(), !1; if (190 == i || 110 == i) { var o = this.GetSeparatorPositionInText(this.decimalSeparator, this.numberInput.val()); return -1 != o && this._setSelectionStart(o + 1), !1 } if (188 == i) { var a = this.numberInput.val(); for (d = n.start; d < a.length; d++) if (a[d] == this.groupSeparator) { this._setSelectionStart(1 + d); break } return !1 } if (t.ctrlKey && 99 == i || t.ctrlKey && 67 == i) { var n = this._selection(), l = "", h = this.numberInput.val(); if (n.start > 0 || n.length > 0) for (var d = n.start; d < n.end; d++) l += h.substring(d, d + 1); return e.jqx.browser.msie && window.clipboardData.setData("Text", l), this.savedText = l, !1 } if (t.ctrlKey && 122 == i || t.ctrlKey && 90 == i) return !1; if (t.ctrlKey && 118 == i || t.ctrlKey && 86 == i || t.shiftKey && 45 == i) return null != this.savedText && this.savedText.length > 0 && this.val(this.savedText), !1; var c = String.fromCharCode(i), u = parseInt(c); if (i >= 96 && i <= 105 && (u = i - 96, i -= 48), !isNaN(u)) { return this.insertsimple(u), !1 } if (46 == i) return this.Delete(), !1; if (38 == i) return this.spinUp(), !1; if (40 == i) return this.spinDown(), !1; var p = this._isSpecialKey(i); return !e.jqx.browser.mozilla || p }, _getEditRange: function () { var e = 0, t = 0; for (i = 0; i < this.items.length; i++) if (this.items[i].canEdit) { e = i; break } for (i = this.items.length - 1; i >= 0; i--) if (this.items[i].canEdit) { t = i; break } return { start: e, end: t } }, _getVisibleItems: function () { var e = new Array, t = 0; for (i = 0; i < this.items.length; i++) this.items[i].character.toString().length > 0 && (e[t] = this.items[i], t++); return e }, _hasEmptyVisibleItems: function () { var e = this._getVisibleItems(); for (i = 0; i < e.length; i++) if (e[i].canEdit && e[i].character == this.promptChar) return !0; return !1 }, _getFirstVisibleNonEmptyIndex: function () { var e = this._getVisibleItems(); for (i = 0; i < e.length; i++) if (e[i].canEdit && e[i].character != this.promptChar) return i }, _handleMouse: function (e, t) { var i = this._selection(); if (i.length <= 1) { var s = this._getFirstVisibleNonEmptyIndex(); i.start < s && this._setSelectionStart(s) } }, _insertKey: function (t) { this.numberInput[0].focus(); var s = String.fromCharCode(t), r = parseInt(s); if (!isNaN(r)) { var o = 0; for (i = 0; i < this.items.length; i++) 0 == this.items[i].character.length && o++; var a = this._selection(), n = this; if (a.start >= 0 && a.start <= this.items.length) { var l = !1, h = this._getFirstVisibleNonEmptyIndex(); a.start < h && 0 == a.length && (isNaN(s) && " " != s || (this._setSelectionStart(h), a = this._selection())); this._getFirstEditableItemIndex(); var d = this._getLastEditableItemIndex(), c = this._getVisibleItems(); e.each(c, function (e, t) { if (!(a.start > e && e != c.length - 1)) { var i = c[e]; if (e > d && (i = c[d]), !isNaN(s) && " " != s && i.canEdit) { r = n._getSeparatorPosition(); if (n._match(s, i.regex)) { if (!l && a.length > 0) { for (j = a.start + o; j < a.end + o; j++) n.items[j].canEdit && (j > r ? n.items[j].character = "0" : n.items[j].character = n.promptChar); w = n._getString(); l = !0 } var r = n._getSeparatorPosition(), h = n._hasEmptyVisibleItems(); if (a.start <= r && h) { var u = e; -1 == n.decimalSeparatorPosition && a.start == r && (u = e + 1); f = ""; for (p = 0; p < u; p++) c[p].canEdit && c[p].character != n.promptChar && (f += c[p].character); f += s; x = n.decimal < 1 ? 1 : 0; for (a.start == r && -1 != n.decimalSeparatorPosition && (f += n.decimalSeparator, x = 0), p = u + x; p < c.length; p++) c[p].character == n.decimalSeparator && c[p].isSeparator ? f += c[p].character : c[p].canEdit && c[p].character != n.promptChar && (f += c[p].character); "." != n.decimalSeparator && (f = n._parseDecimalValue(f)), f = parseFloat(f).toString(), f = (f = new Number(f)).toFixed(n.decimalDigits), "." != n.decimalSeparator && (f = n._parseDecimalValueToEditorValue(f)), n.setvalue("decimal", f); w = n._getString(); if (a.end < r ? n._setSelectionStart(a.end + x) : n._setSelectionStart(a.end), a.length >= 1 && n._setSelectionStart(a.end), a.length == n.numberInput.val().length) { var m = n._moveCaretToDecimalSeparator(), g = n.decimalSeparatorPosition >= 0 ? 1 : 0; n._setSelectionStart(m - g) } } else if (a.start < r || a.start > r) { if (n.numberInput.val().length == a.start && -1 != n.decimalSeparatorPosition) return !1; if (n.numberInput.val().length == a.start && -1 == n.decimalSeparatorPosition && !h) return !1; var f = "", v = !1; for (p = 0; p < e; p++) c[p].canEdit && c[p].character != n.promptChar && (f += c[p].character), c[p].character == n.decimalSeparator && c[p].isSeparator && (f += c[p].character, v = !0); f += s; var x = n.decimal < 1 ? 1 : 0; for (v || a.start != r - 1 || (f += n.decimalSeparator, v = !0), p = e + 1; p < c.length; p++) !v && c[p].character == n.decimalSeparator && c[p].isSeparator ? f += c[p].character : c[p].canEdit && c[p].character != n.promptChar && (f += c[p].character); n.setvalue("decimal", f); var w = n._getString(); if (n.decimalSeparatorPosition < 0 && i == c[d]) return n._setSelectionStart(e), !1; var b = w.indexOf(n.symbol); if (b <= (n.getvalue("negative") ? 1 : 0) && (b = w.length), a.start < b ? n._setSelectionStart(e + 1) : n._setSelectionStart(e), a.length, a.length == n.numberInput.val().length) { m = n._moveCaretToDecimalSeparator(); n._setSelectionStart(m - 1) } } return !1 } } } }) } } }, _handleKeyPress: function (t, i) { var s = this._selection(), r = this; return !!(t.ctrlKey && 97 == i || t.ctrlKey && 65 == i) || (8 == i ? (s.start > 0 && r._setSelectionStart(s.start), !1) : 46 == i ? (s.start < this.items.length && r._setSelectionStart(s.start), !1) : (e.jqx.browser.mozilla || 45 != i && 173 != i && 109 != i && 189 != i || (0 == this.getvalue("negative") ? this.setvalue("negative", !0) : this.setvalue("negative", !1)), e.jqx.browser.msie && this._insertKey(i), this._isSpecialKey(i))) }, _deleteSelectedText: function () { var e = this._selection(), t = "", s = this._getSeparatorPosition(), r = this._getVisibleItems(), o = this._getHiddenPrefixCount(); for (this.numberInput.val().length == e.start && 0 == e.length && (this._setSelection(e.start, e.start + 1), e = this._selection()), i = 0; i < e.start; i++) r[i].canEdit && r[i].character != this.promptChar ? t += r[i].character : r[i].canEdit || -1 == this.decimalSeparatorPosition || r[i] != r[this.decimalSeparatorPosition - o] || (0 == t.length && (t = "0"), t += r[i].character); for (i = e.start; i < e.end; i++) i > s && -1 != this.decimalSeparatorPosition ? r[i].canEdit && r[i].character != this.promptChar && (t += "0") : r[i].canEdit || -1 == this.decimalSeparatorPosition || r[i] != r[this.decimalSeparatorPosition - o] || (0 == t.length && (t = "0"), t += r[i].character); for (i = e.end; i < r.length; i++) r[i].canEdit && r[i].character != this.promptChar ? t += r[i].character : r[i].canEdit || -1 == this.decimalSeparatorPosition || r[i] != r[this.decimalSeparatorPosition - o] || (0 == t.length && (t = "0"), t += r[i].character); return this.setvalue("decimal", t), e.length > 0 }, _restoreInitialState: function () { var e = parseInt(this.decimalDigits); for (e > 0 && (e += 2), k = this.items.length - 1; k > this.items.length - 1 - e; k--) this.items[k].canEdit && this.items[k].character == this.promptChar && (this.items[k].character = 0) }, clear: function () { this.setDecimal(0) }, clearDecimal: function () { if ("textbox" != this.inputMode) { for (var e = 0; e < this.items.length; e++) this.items[e].canEdit && (this.items[e].character = this.promptChar); this._restoreInitialState() } else this.numberInput.val() }, _saveSelectedText: function () { var t = this._selection(), s = "", r = this._getVisibleItems(); if (t.start > 0 || t.length > 0) for (i = t.start; i < t.end; i++) r[i].canEdit && r[i].character != this.promptChar ? s += r[i].character : r[i].isSeparator && (s += r[i].character); return e.jqx.browser.msie && window.clipboardData.setData("Text", s), s }, _pasteSelectedText: function () { var t = this._selection(); if (this.selectedText = e.data(document.body, "jqxSelection"), window.clipboardData) { var i = window.clipboardData.getData("Text"); if (i != this.selectedText && i.length > 0 && (this.selectedText = window.clipboardData.getData("Text"), null == this.selectedText || void 0 == this.selectedText)) return } t.start, this._getVisibleItems(); if (null != this.selectedText) for (var s = 0; s < this.selectedText.length; s++) { var r = parseInt(this.selectedText[s]); if (!isNaN(r)) { var o = 48 + r; this._insertKey(o) } } }, _getHiddenPrefixCount: function () { var e = 0; if (this.negative || e++, "left" == this.symbolPosition) for (i = 0; i < this.symbol.length; i++) "" == this.symbol.substring(i, i + 1) && e++; return e }, _getEditableItem: function () { var e = this._selection(); for (i = 0; i < this.items.length; i++) if (i < e.start && this.items[i].canEdit && this.items[i].character != this.promptChar) return this.items[i]; return null }, _getEditableItems: function () { var e = new Array, t = 0; for (i = 0; i < this.items.length; i++) this.items[i].canEdit && (e[t] = this.items[i], t++); return e }, _getValidSelectionStart: function (e) { for (i = this.items.length - 1; i >= 0; i--) if (this.items[i].canEdit && this.items[i].character != this.promptChar) return i; return -1 }, _getEditableItemIndex: function (e) { var t = this._selection(), s = this._getHiddenPrefixCount(), r = this._getVisibleItems(), o = t.start, a = -1; for (i = 0; i < o; i++) i < r.length && r[i].canEdit && (a = i + s); if (-1 == a && t.length > 0) for (o = t.end, i = 0; i < o; i++) if (i < r.length && r[i].canEdit) { a = i + s; break } return a }, _getEditableItemByIndex: function (e) { for (k = 0; k < this.items.length; k++) if (k > e && this.items[k].canEdit && this.items[k].character != this.promptChar) return k; return -1 }, _getFirstEditableItemIndex: function () { var e = this._getVisibleItems(); for (m = 0; m < e.length; m++) if (e[m].character != this.promptChar && e[m].canEdit && "0" != e[m].character) return m; return -1 }, _getLastEditableItemIndex: function () { var e = this._getVisibleItems(); for (m = e.length - 1; m >= 0; m--) if (e[m].character != this.promptChar && e[m].canEdit) return m; return -1 }, _moveCaretToDecimalSeparator: function () { for (i = this.items.length - 1; i >= 0; i--) if (this.items[i].character == this.decimalSeparator && this.items[i].isSeparator) return this.negative ? (this._setSelectionStart(i + 1), i) : (this._setSelectionStart(i), i); return this.numberInput.val().length }, _handleBackspace: function () { var e = this._selection(), t = this._getHiddenPrefixCount(), i = this._getEditableItemIndex() - t; if (i >= 0) { 0 == e.length && -1 != i && this._setSelection(i, i + 1); var s = e.start > this._getSeparatorPosition() + 1 && this.decimalSeparatorPosition > 0; s && (e = this._selection()); this._deleteSelectedText(); if (e.length < 1 || s ? this._setSelectionStart(e.start) : e.length >= 1 && this._setSelectionStart(e.end), e.length == this.numberInput.val().length) { var r = this._moveCaretToDecimalSeparator(); this._setSelectionStart(r - 1) } } else this._setSelectionStart(e.start) }, _handleKeyDown: function (t, s) { var r = this._selection(); if (this.rtl && 37 == s) { a = (o = t.shiftKey) ? 1 : 0; return o ? this._setSelection(r.start + 1 - a, r.start + r.length + 1) : this._setSelection(r.start + 1 - a, r.start + 1), !1 } if (this.rtl && 39 == s) { var o = t.shiftKey, a = o ? 1 : 0; return o ? this._setSelection(r.start - 1, r.length + a + r.start - 1) : this._setSelection(r.start - 1, r.start - 1), !1 } if (t.ctrlKey && 97 == s || t.ctrlKey && 65 == s) return !0; if (t.ctrlKey && 120 == s || t.ctrlKey && 88 == s) return this.selectedText = this._saveSelectedText(t), e.data(document.body, "jqxSelection", this.selectedText), this._handleBackspace(), !1; if (t.ctrlKey && 99 == s || t.ctrlKey && 67 == s) return this.selectedText = this._saveSelectedText(t), e.data(document.body, "jqxSelection", this.selectedText), !1; if (t.ctrlKey && 122 == s || t.ctrlKey && 90 == s) return !1; if (t.ctrlKey && 118 == s || t.ctrlKey && 86 == s || t.shiftKey && 45 == s) return this._pasteSelectedText(), !1; if (r.start >= 0 && r.start < this.items.length) l = String.fromCharCode(s), this.items[r.start]; if (8 == s) return this._handleBackspace(), !1; if (190 == s || 110 == s) return this._moveCaretToDecimalSeparator(), !1; if (188 == s) { var n = this.numberInput.val(); for (i = r.start; i < n.length; i++) if (n[i] == this.groupSeparator) { this._setSelectionStart(1 + i); break } return !1 } if (null == e.jqx.browser.msie) { var l = String.fromCharCode(s), h = parseInt(l); if (s >= 96 && s <= 105 && (h = s - 96, s -= 48), !isNaN(h)) return this._insertKey(s), !1 } if (46 == s) { var d = this._getVisibleItems(); if (r.start < d.length) { a = 0 == d[r.start].canEdit ? 2 : 1; 0 == r.length && this._setSelection(r.start + a, r.start + a + r.length), this._handleBackspace(), new Number(this.decimal) < 1 || r.start > this._getSeparatorPosition() ? this._setSelectionStart(r.end + a) : r.start + 1 < this.decimalSeparatorPosition && this._setSelectionStart(r.end + a) } return !1 } if (38 == s) return this.spinUp(), !1; if (40 == s) return this.spinDown(), !1; var c = this._isSpecialKey(s); return e.jqx.browser.mozilla && (45 != s && 173 != s && 109 != s && 189 != s || (0 == this.getvalue("negative") ? this.setvalue("negative", !0) : this.setvalue("negative", !1))), !e.jqx.browser.mozilla || c }, _isSpecialKey: function (e) { return 8 == e || 9 == e || 13 == e || 35 == e || 36 == e || 37 == e || 39 == e || 27 == e || 46 == e }, _selection: function () { try { if ("selectionStart" in this.numberInput[0]) { var e = this.numberInput[0], t = e.selectionEnd - e.selectionStart; return { start: e.selectionStart, end: e.selectionEnd, length: t, text: e.value } } var i = document.selection.createRange(); if (null == i) return { start: 0, end: e.value.length, length: 0 }; var s = this.numberInput[0].createTextRange(), r = s.duplicate(); s.moveToBookmark(i.getBookmark()), r.setEndPoint("EndToStart", s); t = i.text.length; return { start: r.text.length, end: r.text.length + i.text.length, length: t, text: i.text } } catch (e) { return { start: 0, end: 0, length: 0 } } }, _setSelection: function (t, i) { if (1 != this._disableSetSelection && !e.jqx.mobile.isTouchDevice() && 1 != this.touchMode) try { if ("selectionStart" in this.numberInput[0]) this.numberInput[0].focus(), this.numberInput[0].setSelectionRange(t, i); else { var s = this.numberInput[0].createTextRange(); s.collapse(!0), s.moveEnd("character", i), s.moveStart("character", t), s.select() } } catch (e) { } }, _setSelectionStart: function (t) { this._setSelection(t, t), e.data(this.numberInput, "selectionstart", t) }, resize: function (e, t) { this.width = e, this.height = t, this._render(!1) }, _render: function (t) { parseInt(this.host.css("border-left-width")), parseInt(this.host.css("border-left-width")); var i = parseInt(this.host.css("border-left-width")); parseInt(this.host.css("border-left-width")); this.numberInput.css("padding-top", "0px"), this.numberInput.css("padding-bottom", "0px"), this.host.height(this.height), this.host.width(this.width); var s = this.host.width(), r = this.host.height(); this.numberInput.css({ "border-left-width": 0, "border-right-width": 0, "border-bottom-width": 0, "border-top-width": 0 }), this.numberInput.css("text-align", this.textAlign); var o = this.numberInput.css("font-size"); this.numberInput.css("height", parseInt(o) + 4 + "px"), this.numberInput.css("width", s - 2); var a = r - 2 * i - parseInt(o) - 2; isNaN(a) && (a = 0), a < 0 && (a = 0), this.spinButtons && this.spincontainer && (s -= parseInt(this.spinButtonsWidth - 2), e.jqx.mobile.isTouchDevice() || !0 === this.touchMode ? (this.spincontainer.width(2 * this.spinButtonsWidth), s -= this.spinButtonsWidth, this.upbutton.height("100%"), this.downbutton.height("100%"), this.downbutton.css("float", "left"), this.upbutton.css("float", "right"), this.upbutton.width(this.spinButtonsWidth), this.downbutton.width(1 + this.spinButtonsWidth)) : (this.spincontainer.width(this.spinButtonsWidth), this.upbutton.width(this.spinButtonsWidth + 2), this.downbutton.width(this.spinButtonsWidth + 2), this.upbutton.height("50%"), this.downbutton.height("50%"), this.spincontainer.width(this.spinButtonsWidth)), this._upArrow.height("100%"), this._downArrow.height("100%"), this.numberInput.css("width", s - 6), this.numberInput.css("margin-right", "2px")); var n = a / 2; e.jqx.browser.msie && e.jqx.browser.version < 8 && (n = a / 4), this.numberInput.css("padding-left", "0px"), this.numberInput.css("padding-right", "0px"), this.numberInput.css("padding-top", Math.round(n) + "px"), this.numberInput.css("padding-bottom", Math.round(n) + "px"), void 0 != t && 1 != t || (this.numberInput.val(this._getString()), "advanced" != this.inputMode && this._parseDecimalInSimpleMode()) }, destroy: function () { this._removeHandlers(), this.host.remove() }, inputValue: function (e) { return void 0 === e ? this._value() : (this.propertyChangedHandler(this, "value", this._value, e), this._refreshValue(), this) }, _value: function () { return this.numberInput.val() }, val: function (e) { if (void 0 == e || "object" == typeof e) return this.getDecimal(); if (null === e) this.element.value = ""; else { var t = e; (t = t.toString()).indexOf(this.symbol) > -1 && (t = t.replace(this.symbol, "")); t = (t = function (e, t, i) { var s = e; if (t == i) return e; for (var r = s.indexOf(t) ; -1 != r;) r = (s = s.replace(t, i)).indexOf(t); return s }(t, this.groupSeparator, "")).replace(this.decimalSeparator, "."); for (var i = "", s = 0; s < t.length; s++) { var r = t.substring(s, s + 1); "-" === r && (i += "-"), "." === r && (i += "."), null != r.match(/^[0-9]+$/) && (i += r) } t = (t = i).replace(/ /g, ""), t = new Number(t), this.setDecimal(t) } }, getDecimal: function () { return "simple" == this.inputMode && (this._parseDecimalInSimpleMode(!1), this.decimal = this._getDecimalInSimpleMode(this.decimal)), "" == this.decimal ? 0 : this.getvalue("negative") && this.decimal > 0 ? -parseFloat(this.decimal) : parseFloat(this.decimal) }, setDecimal: function (e) { var t = e; if ("." != this.decimalSeparator) { if ("number" != typeof e) { var i = (e = e.toString()).indexOf("."); if (-1 != i) { var s = e.substring(0, i), r = e.substring(i + 1); e = s + this.decimalSeparator + r } else if (-1 != (i = e.indexOf(this.decimalSeparator))) { var s = e.substring(0, i), r = e.substring(i + 1); e = "advanced" != this.inputMode ? s + "." + r : s + this.decimalSeparator + r } } e < 0 ? this.setvalue("negative", !0) : this.setvalue("negative", !1), this._setDecimal(e) } else e < 0 ? this.setvalue("negative", !0) : this.setvalue("negative", !1), this._setDecimal(Math.abs(e)); null == t && this.numberInput.val("") }, _setDecimal: function (e) { null != e && void 0 != e || (e = 0), -1 != e.toString().indexOf("e") && (e = 0), this.clearDecimal(); var t = e.toString(), i = "", s = "", r = !0; 0 == t.length && (t = "0"); for (l = 0; l < t.length; l++) t.substring(l, l + 1) != this.decimalSeparator ? r ? i += t.substring(l, l + 1) : s += t.substring(l, l + 1) : r = !1; i.length > 0 && (i = parseFloat(i).toString()); var o = this.digits; o < i.length && (i = i.substr(0, o)); for (var a = 0, n = this._getSeparatorPosition(), l = n += this._getHiddenPrefixCount() ; l >= 0; l--) l < this.items.length && this.items[l].canEdit && a < i.length && (this.items[l].character = i.substring(i.length - a - 1, i.length - a), a++); a = 0; for (l = n; l < this.items.length; l++) this.items[l].canEdit && a < s.length && (this.items[l].character = s.substring(a, a + 1), a++); if (this._refreshValue(), "." == this.decimalSeparator) this.ValueString = new Number(e).toFixed(this.decimalDigits); else { var h = e.toString().indexOf(this.decimalSeparator); if (h > 0) { var d = e.toString().substring(0, h) + "." + e.toString().substring(h + 1); this.ValueString = new Number(d).toFixed(this.decimalDigits) } else this.ValueString = new Number(e).toFixed(this.decimalDigits) } "advanced" != this.inputMode && (this._parseDecimalInSimpleMode(), this._raiseEvent(1, this.ValueString)), "textbox" == this.inputMode && (this.decimal = this.ValueString, this.getvalue("negative") && (this.decimal = "-" + this.ValueString)), (e = this.val()) < this.min || e > this.max ? this.host.addClass("jqx-input-invalid") : this.host.removeClass("jqx-input-invalid") }, _getSeparatorPosition: function () { var e = this._getHiddenPrefixCount(); return this.decimalSeparatorPosition > 0 ? this.decimalSeparatorPosition - e : this.items.length - e }, _setTheme: function () { this.host.removeClass(), this.host.addClass(this.toThemeProperty("jqx-input")), this.host.addClass(this.toThemeProperty("jqx-rc-all")), this.host.addClass(this.toThemeProperty("jqx-widget")), this.host.addClass(this.toThemeProperty("jqx-widget-content")), this.host.addClass(this.toThemeProperty("jqx-numberinput")), this.spinButtons && (this.downbutton.removeClass(), this.upbutton.removeClass(), this.downbutton.addClass(this.toThemeProperty("jqx-scrollbar-button-state-normal")), this.upbutton.addClass(this.toThemeProperty("jqx-scrollbar-button-state-normal")), this._upArrow.removeClass(), this._downArrow.removeClass(), this._upArrow.addClass(this.toThemeProperty("jqx-icon-arrow-up")), this._downArrow.addClass(this.toThemeProperty("jqx-icon-arrow-down"))), this.numberInput.removeClass(), this.numberInput.addClass(this.toThemeProperty("jqx-input-content")) }, propertyChangedHandler: function (t, s, r, o) { if (("digits" == s || "groupSize" == s || "decimalDigits" == s) && o < 0) throw new Exception(this.invalidArgumentExceptions[0]); if ("theme" === s && e.jqx.utilities.setTheme(r, o, t.host), "digits" == s && o != r && (t.digits = parseInt(o)), "min" != s && "max" != s || (e.jqx.aria(t, "aria-value" + s, o.toString()), t._refreshValue()), "decimalDigits" == s && o != r && (t.decimalDigits = parseInt(o)), "decimalSeparator" == s || "digits" == s || "symbol" == s || "symbolPosition" == s || "groupSize" == s || "groupSeparator" == s || "decimalDigits" == s || "negativeSymbol" == s) { var a = t.decimal; if ("decimalSeparator" == s && "" == o && (o = " "), r != o) { n = t._selection(); t.items = new Array, t._initializeLiterals(), t.value = t._getString(), t._refreshValue(), t._setDecimal(a) } } if ("rtl" == s && (t.rtl ? (t.spincontainer && (t.spincontainer.css("float", "right"), t.spincontainer.css("border-right-width", "1px")), t.numberInput.css("float", "right")) : (t.spincontainer && (t.spincontainer.css("float", "right"), t.spincontainer.css("border-right-width", "1px")), t.numberInput.css("float", "left"))), "spinButtons" == s && (t.spincontainer ? (o ? t.spincontainer.css("display", "block") : t.spincontainer.css("display", "none"), t._render()) : t._spinButtons()), "touchMode" === s && (t.inputMode = "textbox", t.spinMode = "simple", t.render()), "negative" == s && "advanced" == t.inputMode) { var n = t._selection(), l = 0; o ? (t.items[0].character = t.negativeSymbol[0], l = 1) : (t.items[0].character = "", l = -1), t._refreshValue(), t.isInitialized && t._setSelection(n.start + l, n.end + l) } if ("decimal" == s && (t.value = o, t.setDecimal(o)), "value" === s && (t.value = o, t.setDecimal(o), t._raiseEvent(1, o)), "textAlign" == s && (t.textAlign = o, t._render()), "disabled" == s && (t.numberInput.attr("disabled", o), t.disabled ? t.host.addClass(t.toThemeProperty("jqx-fill-state-disabled")) : t.host.removeClass(t.toThemeProperty("jqx-fill-state-disabled")), e.jqx.aria(t, "aria-disabled", o.toString())), "readOnly" == s && (t.readOnly = o), "promptChar" == s) { for (i = 0; i < t.items.length; i++) t.items[i].character == t.promptChar && (t.items[i].character = o); t.promptChar = o } "width" == s ? (t.width = o, t._render()) : "height" == s && (t.height = o, t._render()) }, _value: function () { return this.value }, _refreshValue: function () { var e = this.value; if ("textbox" !== this.inputMode) { this.value = this._getString(), e = this.value; for (var t = "", i = 0; i < this.items.length; i++) { var s = this.items[i]; s.canEdit && s.character != this.promptChar && (t += s.character), i == this.decimalSeparatorPosition && (t += ".") } this.decimal = t; var r = !1; this.oldValue !== e && (this.oldValue = e, this._raiseEvent(0, e), r = !0), "simple" != this.inputMode && (this.numberInput.val(e), r && this._raiseEvent(1, e)), null == e && this.numberInput.val("") } } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxProgressBar", "", {}), e.extend(e.jqx._jqxProgressBar.prototype, { defineInstance: function () { this.value = 0, this.oldValue = null, this.max = 100, this.min = 0, this.orientation = "horizontal", this.layout = "normal", this.width = null, this.height = null, this.showText = !1, this.animationDuration = 300, this.disabled = !1, this.rtl = !1, this.renderText = null, this.aria = { "aria-valuenow": { name: "value", type: "number" }, "aria-disabled": { name: "disabled", type: "boolean" } }, this.events = ["valuechanged", "invalidvalue", "complete"] }, createInstance: function (t) { var i = this; this.host.addClass(this.toThemeProperty("jqx-progressbar")), this.host.addClass(this.toThemeProperty("jqx-widget")), this.host.addClass(this.toThemeProperty("jqx-widget-content")), this.host.addClass(this.toThemeProperty("jqx-rc-all")), e.jqx.aria(this), null != this.width && -1 != this.width.toString().indexOf("px") ? this.host.width(this.width) : (void 0 == this.width || isNaN(this.width), this.host.width(this.width)), null != this.height && -1 != this.height.toString().indexOf("px") ? this.host.height(this.height) : (void 0 == this.height || isNaN(this.height), this.host.height(this.height)), this.valueDiv = e("<div></div>").appendTo(this.element), "horizontal" == this.orientation ? (this.valueDiv.width(0), this.valueDiv.addClass(this.toThemeProperty("jqx-progressbar-value"))) : (this.valueDiv.height(0), this.valueDiv.addClass(this.toThemeProperty("jqx-progressbar-value-vertical"))), this.valueDiv.addClass(this.toThemeProperty("jqx-fill-state-pressed")), this.feedbackElementHost = e("<div style='width: 100%; height: 100%; position: relative;'></div>").appendTo(this.host), this.feedbackElement = e("<span class='text'></span>").appendTo(this.feedbackElementHost), this.feedbackElement.addClass(this.toThemeProperty("jqx-progressbar-text")), this.oldValue = this._value(), this.refresh(), e.jqx.utilities.resize(this.host, function () { i.refresh() }) }, resize: function (e, t) { this.width = e, this.height = t, this.refresh() }, destroy: function () { this.host.removeClass(), this.valueDiv.removeClass(), this.valueDiv.remove(), this.feedbackElement.remove() }, _raiseevent: function (e, t, i) { if (void 0 != this.isInitialized && 1 == this.isInitialized) { var s = this.events[e], r = new jQuery.Event(s); return r.previousValue = t, r.currentValue = i, r.owner = this, this.host.trigger(r) } }, actualValue: function (t) { return void 0 === t ? this._value() : (e.jqx.aria(this, "aria-valuenow", t), e.jqx.setvalueraiseevent(this, "value", t), this._value()) }, val: function (e) { return 0 == arguments.length || "object" == typeof e ? this.actualValue() : this.actualValue(e) }, propertyChangedHandler: function (t, i, s, r) { if (this.isInitialized) { var o = this; "min" == i && t.value < r ? t.value = r : "max" == i && t.value > r && (t.value = r), "value" === i && void 0 != o.value && (o.value = r, o.oldValue = s, e.jqx.aria(t, "aria-valuenow", r), (r < o.min || r > o.max) && o._raiseevent(1, s, r), o.refresh()), "theme" == i && e.jqx.utilities.setTheme(s, r, t.host), "renderText" == i || "orientation" == i || "layout" == i || "showText" == i || "min" == i || "max" == i ? o.refresh() : "width" == i && void 0 != o.width ? void 0 == o.width || isNaN(o.width) || (o.host.width(o.width), o.refresh()) : "height" == i && void 0 != o.height && (void 0 == o.height || isNaN(o.height) || (o.host.height(o.height), o.refresh())), "disabled" == i && o.refresh() } }, _value: function () { var e = this.value; if ("number" != typeof e) { var t = parseInt(e); e = isNaN(t) ? 0 : t } return Math.min(this.max, Math.max(this.min, e)) }, _percentage: function () { return 100 * this._value() / this.max }, _textwidth: function (t) { var i = e("<span>" + t + "</span>"); e(this.host).append(i); var s = i.width(); return i.remove(), s }, _textheight: function (t) { var i = e("<span>" + t + "</span>"); e(this.host).append(i); var s = i.height(); return i.remove(), s }, _initialRender: !0, refresh: function () { var t = this.actualValue(), i = this._percentage(); if (this.disabled) return this.host.addClass(this.toThemeProperty("jqx-progressbar-disabled")), void this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")); if (this.host.removeClass(this.toThemeProperty("jqx-progressbar-disabled")), this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")), e(this.element.children[0]).show(), !isNaN(t) && !isNaN(i)) { this.oldValue !== t && (this._raiseevent(0, this.oldValue, t), this.oldValue = t); var s = this.oldValue, r = this.host.outerHeight(), o = this.host.outerWidth(); null != this.width && (o = parseInt(this.width)), null != this.height && (r = parseInt(this.height)); var a = parseInt(this.host.outerWidth()) / 2; parseInt(this.host.outerHeight()); isNaN(i) && (i = 0); var n = this; try { var l = this.element.children[0]; if (e(l)[0].style.position = "relative", "horizontal" == this.orientation) { e(l).toggle(t >= this.min); var o = this.host.outerWidth() * i / 100, h = 0; ("reverse" == this.layout || this.rtl) && (this._initialRender && (e(l)[0].style.left = this.host.width() + "px", e(l)[0].style.width = 0), h = this.host.outerWidth() - o), e(l).animate({ width: o, left: h + "px" }, this.animationDuration, function () { n._value() === n.max && n._raiseevent(2, s, n.max) }), this.feedbackElementHost.css("margin-top", -this.host.height()) } else { e(l).toggle(t >= this.min); var r = this.host.height() * i / 100, d = 0; "reverse" == this.layout && (this._initialRender && (e(l)[0].style.top = this.host.height() + "px", e(l)[0].style.height = 0), d = this.host.height() - r), this.feedbackElementHost.animate({ "margin-top": -i.toFixed(0) * n.host.height() / 100 }, this.animationDuration, function () { }), e(l).animate({ height: r, top: d + "px" }, this.animationDuration, function () { var t = n._percentage(); isNaN(t) && (t = 0), t.toFixed(0) == n.min && (e(l).hide(), n._value() === n.max && n._raiseevent(2, s, n.max)) }) } } catch (e) { } this._initialRender = !1, this.feedbackElement.html(i.toFixed(0) + "%").toggle(1 == this.showText), this.renderText && this.feedbackElement.html(this.renderText(i.toFixed(0) + "%")), this.feedbackElement.css("position", "absolute"), this.feedbackElement.css("top", "50%"), this.feedbackElement.css("left", "0"); var c = this.feedbackElement.height(), u = this.feedbackElement.width(), p = Math.floor(a - parseInt(u) / 2); this.feedbackElement.css({ left: p, "margin-top": -parseInt(c) / 2 + "px" }) } } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxRadioButton", "", {}), e.extend(e.jqx._jqxRadioButton.prototype, { defineInstance: function () { this.animationShowDelay = 300, this.animationHideDelay = 300, this.width = null, this.height = null, this.boxSize = "13px", this.checked = !1, this.hasThreeStates = !1, this.disabled = !1, this.enableContainerClick = !0, this.locked = !1, this.groupName = "", this.rtl = !1, this.aria = { "aria-checked": { name: "checked", type: "boolean" }, "aria-disabled": { name: "disabled", type: "boolean" } }, this.events = ["checked", "unchecked", "indeterminate", "change"] }, createInstance: function (e) { this.render() }, render: function () { this.setSize(); var t = this; this.propertyChangeMap.width = function (e, i, s, r) { t.setSize() }, this.propertyChangeMap.height = function (e, i, s, r) { t.setSize() }, this.radiobutton && this.radiobutton.remove(), this.radiobutton = e("<div><div><span></span></div></div>"), this.host.attr("role", "radio"), this.host.attr("tabIndex") || this.host.attr("tabIndex", 0), this.host.prepend(this.radiobutton), this.host.append(e('<div style="clear: both;"></div>')), this.checkMark = e(this.radiobutton).find("span"), this.box = e(this.radiobutton).find("div"), this._supportsRC = !0, e.jqx.browser.msie && e.jqx.browser.version < 9 && (this._supportsRC = !1), this.box.addClass(this.toThemeProperty("jqx-fill-state-normal")), this.box.addClass(this.toThemeProperty("jqx-radiobutton-default")), this.host.addClass(this.toThemeProperty("jqx-widget")), this.disabled && this.disable(), this.host.addClass(this.toThemeProperty("jqx-radiobutton")), this.locked && this.host.css("cursor", "auto"); var i = this.element.getAttribute("checked"); "checked" != i && "true" != i && 1 != i || (this.checked = !0), this._addInput(), this._render(), this._addHandlers(), e.jqx.aria(this) }, _addInput: function () { var t = this.host.attr("name"); this.input = e("<input type='hidden'/>"), this.host.append(this.input), t && this.input.attr("name", t) }, refresh: function (e) { e || (this.setSize(), this._render()) }, resize: function (e, t) { this.width = e, this.height = t, this.setSize() }, setSize: function () { null != this.width && -1 != this.width.toString().indexOf("px") ? this.host.width(this.width) : void 0 == this.width || isNaN(this.width) || this.host.width(this.width), null != this.height && -1 != this.height.toString().indexOf("px") ? this.host.height(this.height) : void 0 == this.height || isNaN(this.height) || this.host.height(this.height) }, _addHandlers: function () { var e = this; this.addHandler(this.box, "click", function (t) { if (!e.disabled && !e.enableContainerClick) return e.toggle(), t.preventDefault(), !1 }), this.addHandler(this.host, "keydown", function (t) { if (!e.disabled && !e.locked && 32 == t.keyCode) return e.toggle(), t.preventDefault(), !1 }), this.addHandler(this.host, "click", function (t) { if (!e.disabled && e.enableContainerClick) return e.toggle(), t.preventDefault(), !1 }), this.addHandler(this.host, "selectstart", function (t) { !e.disabled && e.enableContainerClick && t.preventDefault() }), this.addHandler(this.host, "mouseup", function (t) { !e.disabled && e.enableContainerClick && t.preventDefault() }), this.addHandler(this.host, "focus", function (t) { if (!e.disabled && e.enableContainerClick && !e.locked) return e.box.addClass(e.toThemeProperty("jqx-radiobutton-hover")), e.box.addClass(e.toThemeProperty("jqx-fill-state-focus")), t.preventDefault(), !1 }), this.addHandler(this.host, "blur", function (t) { if (!e.disabled && e.enableContainerClick && !e.locked) return e.box.removeClass(e.toThemeProperty("jqx-radiobutton-hover")), e.box.removeClass(e.toThemeProperty("jqx-fill-state-focus")), t.preventDefault(), !1 }), this.addHandler(this.host, "mouseenter", function (t) { if (!e.disabled && e.enableContainerClick && !e.locked) return e.box.addClass(e.toThemeProperty("jqx-radiobutton-hover")), e.box.addClass(e.toThemeProperty("jqx-fill-state-hover")), t.preventDefault(), !1 }), this.addHandler(this.host, "mouseleave", function (t) { if (!e.disabled && e.enableContainerClick && !e.locked) return e.box.removeClass(e.toThemeProperty("jqx-radiobutton-hover")), e.box.removeClass(e.toThemeProperty("jqx-fill-state-hover")), t.preventDefault(), !1 }), this.addHandler(this.box, "mouseenter", function () { e.disabled || e.enableContainerClick || (e.box.addClass(e.toThemeProperty("jqx-radiobutton-hover")), e.box.addClass(e.toThemeProperty("jqx-fill-state-hover"))) }), this.addHandler(this.box, "mouseleave", function () { e.disabled || e.enableContainerClick || (e.box.removeClass(e.toThemeProperty("jqx-radiobutton-hover")), e.box.removeClass(e.toThemeProperty("jqx-fill-state-hover"))) }) }, focus: function () { try { this.host.focus() } catch (e) { } }, _removeHandlers: function () { this.removeHandler(this.box, "click"), this.removeHandler(this.box, "mouseenter"), this.removeHandler(this.box, "mouseleave"), this.removeHandler(this.host, "click"), this.removeHandler(this.host, "mouseup"), this.removeHandler(this.host, "mousedown"), this.removeHandler(this.host, "selectstart"), this.removeHandler(this.host, "mouseenter"), this.removeHandler(this.host, "mouseleave"), this.removeHandler(this.host, "keydown"), this.removeHandler(this.host, "focus"), this.removeHandler(this.host, "blur") }, _render: function () { null == this.boxSize && (this.boxSize = 13), this.box.width(this.boxSize), this.box.height(this.boxSize), this.disabled ? this.disable() : this.enableContainerClick ? this.host.css("cursor", "pointer") : this.host.css("cursor", "auto"), this.rtl && (this.box.addClass(this.toThemeProperty("jqx-radiobutton-rtl")), this.host.addClass(this.toThemeProperty("jqx-rtl"))), this.updateStates() }, val: function (e) { return 0 == arguments.length || "object" == typeof e ? this.checked : ("string" == typeof e ? ("true" == e && this.check(), "false" == e && this.uncheck(), "" == e && this.indeterminate()) : (1 == e && this.check(), 0 == e && this.uncheck(), null == e && this.indeterminate()), this.checked) }, check: function () { this.checked = !0; var t = this; this.checkMark.removeClass(), this.checkMark.addClass(this.toThemeProperty("jqx-fill-state-pressed")), e.jqx.browser.msie ? this.disabled ? (this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-disabled")), this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-checked"))) : this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-checked")) : (this.disabled ? (this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-disabled")), this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-checked"))) : this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-checked")), this.checkMark.css("opacity", 0), this.checkMark.stop().animate({ opacity: 1 }, this.animationShowDelay, function () { })); var i = e.find(".jqx-radiobutton"); if (null == this.groupName && (this.groupName = ""), e.each(i, function () { e(this).jqxRadioButton("groupName") == t.groupName && this != t.element && e(this).jqxRadioButton("uncheck") }), this._raiseEvent("0"), this._raiseEvent("3", { checked: !0 }), 0 == this.checkMark.height()) this.checkMark.height(this.boxSize), this.checkMark.width(this.boxSize); else if ("13px" != this.boxSize) { var s = parseInt(this.boxSize) / 2; this.checkMark.height(s), this.checkMark.width(s), this.checkMark.css("margin-left", 1 + s / 4), this.checkMark.css("margin-top", 1 + s / 4) } this.input.val(this.checked), e.jqx.aria(this, "aria-checked", this.checked) }, uncheck: function () { var t = this.checked; this.checked = !1; var i = this; e.jqx.browser.msie ? i.checkMark.removeClass() : (this.checkMark.css("opacity", 1), this.checkMark.stop().animate({ opacity: 0 }, this.animationHideDelay, function () { i.checkMark.removeClass() })), t && (this._raiseEvent("1"), this._raiseEvent("3", { checked: !1 })), this.input.val(this.checked), e.jqx.aria(this, "aria-checked", this.checked) }, indeterminate: function () { var t = this.checked; this.checked = null, this.checkMark.removeClass(), e.jqx.browser.msie ? this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-indeterminate")) : (this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-indeterminate")), this.checkMark.css("opacity", 0), this.checkMark.stop().animate({ opacity: 1 }, this.animationShowDelay, function () { })), null != t && (this._raiseEvent("2"), this._raiseEvent("3", { checked: null })), this.input.val(this.checked), e.jqx.aria(this, "aria-checked", "undefined") }, toggle: function () { if (!this.disabled && !this.locked) { var e = this.checked; 1 == this.checked ? this.checked = !this.hasTreeStates || null : this.checked = !0, e != this.checked && this.updateStates(), this.input.val(this.checked) } }, updateStates: function () { this.checked ? this.check() : 0 == this.checked ? this.uncheck() : null == this.checked && this.indeterminate() }, disable: function () { this.disabled = !0, 1 == this.checked ? this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-disabled")) : null == this.checked && this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-indeterminate-disabled")), this.box.addClass(this.toThemeProperty("jqx-radiobutton-disabled")), this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")), e.jqx.aria(this, "aria-disabled", this.disabled) }, enable: function () { this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")), 1 == this.checked ? this.checkMark.removeClass(this.toThemeProperty("jqx-radiobutton-check-disabled")) : null == this.checked && this.checkMark.removeClass(this.toThemeProperty("jqx-radiobutton-check-indeterminate-disabled")), this.box.removeClass(this.toThemeProperty("jqx-radiobutton-disabled")), this.disabled = !1, e.jqx.aria(this, "aria-disabled", this.disabled) }, destroy: function () { this._removeHandlers(), this.host.remove() }, _raiseEvent: function (e, t) { var i = this.events[e], s = new jQuery.Event(i); s.owner = this, s.args = t; try { var r = this.host.trigger(s) } catch (e) { } return r }, propertyChangedHandler: function (t, i, s, r) { if (void 0 != this.isInitialized && 0 != this.isInitialized) { if (i != this.enableContainerClick || this.disabled || this.locked || (r ? this.host.css("cursor", "pointer") : this.host.css("cursor", "auto")), "rtl" == i && (r ? (t.box.addClass(t.toThemeProperty("jqx-radiobutton-rtl")), t.host.addClass(t.toThemeProperty("jqx-rtl"))) : (t.box.removeClass(t.toThemeProperty("jqx-radiobutton-rtl")), t.host.removeClass(t.toThemeProperty("jqx-rtl")))), "checked" == i) switch (r) { case !0: this.check(); break; case !1: this.uncheck(); break; case null: this.indeterminate() } "theme" == i && e.jqx.utilities.setTheme(s, r, this.host), "disabled" == i && (r ? this.disable() : this.enable()) } } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxRating", "", {}), e.extend(e.jqx._jqxRating.prototype, { defineInstance: function () { this.count = 5, this.disabled = !1, this.value = 0, this.height = "auto", this.width = "auto", this.precision = 1, this.singleVote = !1, this.itemHeight = "20", this.itemWidth = "20", this._itemHeight, this._itemWidth, this._images = [], this.aria = { "aria-valuenow": { name: "value", type: "number" }, "aria-disabled": { name: "disabled", type: "boolean" } }, this._events = ["change"], this._invalidArgumentExceptions = { invalidPrecision: "The value of the precision property is invalid!", invalidWidth: "Width you've entered is invalid!", invalidHeight: "Height you've entered is invalid!", invalidCount: "You've entered invalid value for the count property!", invalidValue: "You've entered invalid value property!" } }, createInstance: function (t) { e.jqx.aria(this), this._createRating() }, destroy: function () { this.host.remove() }, val: function (e) { return 0 == arguments.length || "object" == typeof e ? this.value : (this.value = "string" == typeof e ? parseInt(e) : e, this.setValue(this.value), this.value) }, _createRating: function () { this.host.css("display", "none"), this.host.empty(), this._addInput(), this._validateProperties(), this._render(), this._performLayout(), this._removeEventHandlers(), this._addEventHandlers(), this.host.css("display", "block"), this.host.addClass(this.toThemeProperty("jqx-widget")) }, _addInput: function () { var t = this.host.attr("name"); this.input = e("<input type='hidden'/>"), this.host.append(this.input), t && this.input.attr("name", t), this.input.val(this.value.toString()) }, _render: function () { for (var t = 1; t <= this.count; t++) this._images[t - 1] = e('<div style="float:left;width:auto;height:auto;"><div style="position:absolute;width:auto;height:auto;visibility:hidden;" class="jqx-rating-hoverWrapper"><div style="width:auto;height:auto;float:left;" class="' + this.toThemeProperty("jqx-rating-image-hover") + '"></div><div style="visibility:hidden;width:auto;height:auto;" class="' + this.toThemeProperty("jqx-rating-image-backward") + '"></div></div><div style="position:absolute;width:auto;height:auto;" class="jqx-rating-voteWrapper"><div style="width:auto;height:auto;float:left;" class="' + this.toThemeProperty("jqx-rating-image-default") + '"></div><div style="width:0;height:auto;float:left;" class="' + this.toThemeProperty("jqx-rating-image-backward") + '"></div></div></div>'), this.host.append(this._images[t - 1]) }, _performLayout: function () { for (var e = 1; e <= this.count; e++) { var t = this._images[e - 1].find(this.toThemeProperty(".jqx-rating-image-backward", !0)), i = this._images[e - 1].find(this.toThemeProperty(".jqx-rating-image-default", !0)), s = this._images[e - 1].find(this.toThemeProperty(".jqx-rating-image-hover", !0)), r = this._getImageName(i), o = this._getImageName(s), a = this._getImageName(t); i.css("background-image", "none"), s.css("background-image", "none"), t.css("background-image", "none"), this._appendImage(s, o, e - 1), this._appendImage(t, a, e - 1), this._appendImage(i, r, e - 1) } }, resize: function (e, t) { this.width = e, this.height = t, this._setControlSize(this.width, this.height) }, _setControlSize: function (e, t) { this.host.css("height", this.height), this.host.css("width", this.width), this.itemHeight && "auto" !== this.itemHeight ? this._itemHeight = parseInt(this.itemHeight) : this._itemHeight = t, this.itemWidth && "auto" !== this.itemWidth ? this._itemWidth = parseInt(this.itemWidth) : this._itemWidth = e }, _appendImage: function (t, i, s) { var r = this, o = e('<img style="-moz-user-select:-moz-none;-khtml-user-select: none;-webkit-user-select:none;user-select:none;" class="' + this.toThemeProperty("jqx-rating-image") + '" src="' + i + '" />'); return t.append(o), o.load(function () { r._initialized || (r._setControlSize(e(this).width(), e(this).height()), r._setValue(r.value, ".jqx-rating-voteWrapper", ".jqx-rating-image-default", ".jqx-rating-image-backward"), r._initialized = !0), r._images[s].height(r._itemHeight), e(this).height(r._itemHeight), r._images[s].width(r._itemWidth), e(this).width(r._itemWidth) }), o }, _validateProperties: function () { try { if (this.precision < .001 || this.precision > 1) throw this._invalidArgumentExceptions.invalidPrecision; if ("auto" !== this.height && parseInt(this.height) < 0) throw this._invalidArgumentExceptions.invalidHeight; if ("auto" !== this.width && parseInt(this.width) < 0) throw this._invalidArgumentExceptions.invalidWidth; if (this.count <= 0) throw this._invalidArgumentExceptions.invalidCount; if (this.value > this.count || this.value < 0) throw this._invalidArgumentExceptions.invalidValue } catch (e) { alert(e) } }, _getImageIndex: function (e) { for (var t = 0; e !== this._images[t][0];) t++; return ++t }, _getRating: function (t, i) { var s = this._getImageIndex(t); if (this.precision < 1) { for (var r = parseInt(i) - parseInt(e(t).position().left), o = this._itemWidth * this.precision, a = 0; a < r;) a += o; a > parseInt(this._itemWidth) - o && (a = parseInt(this._itemWidth)), s -= 1 - a / e(t).width() } return s }, _addEventHandlers: function () { for (var t = this, i = 0; i < this.count; i++) e.jqx.mobile.isTouchDevice() || (this.addHandler(this._images[i], "mousemove", function (e) { var i = t._getRating(this, e.pageX); t._setValue(i, ".jqx-rating-hoverWrapper", ".jqx-rating-image-hover", ".jqx-rating-image-backward") }), this.addHandler(this._images[i], "mouseenter", function (e) { for (var i = t._getImageIndex(this), s = 0; s < i; s++) t._images[s].children(".jqx-rating-hoverWrapper").css("z-index", "10"), t._images[s].children(".jqx-rating-voteWrapper").css("z-index", "1"), t._images[s].children(".jqx-rating-hoverWrapper").css("visibility", "visible") }), this.addHandler(this._images[i], "mouseleave", function (e) { for (var i = t._getImageIndex(this), s = 0; s < i; s++) t._images[s].children(".jqx-rating-voteWrapper").css("z-index", "10"), t._images[s].children(".jqx-rating-hoverWrapper").css("z-index", "1"), t._images[s].children(".jqx-rating-hoverWrapper").css("visibility", "hidden") })), this.addHandler(this._images[i], "click", function (e) { var i = t._getRating(this, e.pageX); t._setValue(i, ".jqx-rating-voteWrapper", ".jqx-rating-image-default", ".jqx-rating-image-backward"), t.singleVote && t.disable(), e.stopPropagation(), t._raiseEvent(0, i) }), this.addHandler(this._images[i], "dragstart", function (e) { return !1 }) }, _removeEventHandlers: function () { for (var e = 0; e < this.count; e++) this.removeHandler(this._images[e], "mousemove"), this.removeHandler(this._images[e], "mouseenter"), this.removeHandler(this._images[e], "mouseleave"), this.removeHandler(this._images[e], "click"), this.removeHandler(this._images[e], "dragstart") }, _getImageName: function (e) { var t = e.css("background-image"); return t = t.replace('url("', ""), t = t.replace('")', ""), t = t.replace("url(", ""), t = t.replace(")", "") }, _setValue: function (t, i, s, r) { for (var o = 1; o <= this.count; o++) { var a = 1, n = this._images[o - 1].children(i), l = n.children(s), h = n.children(r); o > t && (a = Math.abs(o - t) < 1 ? 1 - Math.abs(o - t) : 0), l.width(this._itemWidth * a), h.width(this._itemWidth - parseInt(l.width())), n.children(this.toThemeProperty(r)).children(0).css("margin-left", -this._itemWidth * a + "px") } e.jqx.aria(this, "aria-valuenow", t) }, _raiseEvent: function (t, i) { var s = new e.Event(this._events[t]); return s.owner = this, s.value = i, s.oldvalue = this.value, this.value = i, this.input && this.input.val(this.value.toString()), this.host.trigger(s) }, setValue: function (e) { this._setValue(e, ".jqx-rating-voteWrapper", ".jqx-rating-image-default", ".jqx-rating-image-backward"), this.value = e, this._raiseEvent(0, this.value) }, getValue: function () { return this.value }, disable: function () { this._removeEventHandlers(), this.disabled = !0, e.jqx.aria(this, "aria-disabled", !0) }, enable: function () { this._removeEventHandlers(), this._addEventHandlers(), this.disabled = !1, e.jqx.aria(this, "aria-disabled", !1) }, propertyChangedHandler: function (e, t, i, s) { "disabled" !== t ? "value" === t ? e.setValue(s) : e._createRating() : s ? this.disable() : this.enable() } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxSlider", "", {}), e.extend(e.jqx._jqxSlider.prototype, { defineInstance: function () { this.disabled = !1, this.width = 300, this.height = 30, this.step = 1, this.max = 10, this.min = 0, this.orientation = "horizontal", this.showTicks = !0, this.ticksPosition = "both", this.ticksFrequency = 2, this.showButtons = !0, this.buttonsPosition = "both", this.mode = "default", this.showRange = !0, this.rangeSlider = !1, this.value = 0, this.values = [0, 10], this.tooltip = !0, this.sliderButtonSize = 14, this.tickSize = 7, this.layout = "normal", this.rtl = !1, this._settings = { vertical: { size: "height", oSize: "width", outerOSize: "outerWidth", outerSize: "outerHeight", left: "top", top: "left", start: "_startY", mouse: "_mouseStartY", page: "pageY", opposite: "horizontal" }, horizontal: { size: "width", oSize: "height", outerOSize: "outerHeight", outerSize: "outerWidth", left: "left", top: "top", start: "_startX", mouse: "_mouseStartX", page: "pageX", opposite: "vertical" } }, this._touchEvents = { mousedown: e.jqx.mobile.getTouchEventName("touchstart"), click: e.jqx.mobile.getTouchEventName("touchstart"), mouseup: e.jqx.mobile.getTouchEventName("touchend"), mousemove: e.jqx.mobile.getTouchEventName("touchmove"), mouseenter: "mouseenter", mouseleave: "mouseleave" }, this._events = ["change", "slide", "slideEnd", "slideStart", "created"], this._invalidArgumentExceptions = { invalidWidth: "Invalid width.", invalidHeight: "Invalid height.", invalidStep: "Invalid step.", invalidMaxValue: "Invalid maximum value.", invalidMinValue: "Invalid minimum value.", invalidTickFrequency: "Invalid tick frequency.", invalidValue: "Invalid value.", invalidValues: "Invalid values.", invalidTicksPosition: "Invalid ticksPosition", invalidButtonsPosition: "Invalid buttonsPosition" }, this._lastValue = [], this._track = null, this._leftButton = null, this._rightButton = null, this._slider = null, this._rangeBar = null, this._slideEvent = null, this._capturedElement = null, this._slideStarted = !1, this.aria = { "aria-valuenow": { name: "value", type: "number" }, "aria-valuemin": { name: "min", type: "number" }, "aria-valuemax": { name: "max", type: "number" }, "aria-disabled": { name: "disabled", type: "boolean" } } }, createInstance: function (e) { this.render() }, render: function () { this.element.innerHTML = "", this.host.attr("role", "slider"), this.host.addClass(this.toThemeProperty("jqx-slider")), this.host.addClass(this.toThemeProperty("jqx-widget")), e.jqx.aria(this), this._isTouchDevice = e.jqx.mobile.isTouchDevice(), this.host.width(this.width), this.host.height(this.height), this._refresh(), this._raiseEvent(4, { value: this.getValue() }), this._addInput(); var t = this; null == t.host.attr("tabindex") && t.host.attr("tabindex", 0), e.jqx.utilities.resize(this.host, function () { t.host.width(t.width), t.host.height(t.height), t._performLayout(), t._initialSettings() }) }, resize: function (e, t) { this.width = e, this.height = t, this.refresh(), this.host.width(me.width), this.host.height(me.height), this._performLayout(), this._initialSettings() }, focus: function () { try { this.host.focus() } catch (e) { } }, destroy: function () { this.host.remove() }, _addInput: function () { var t = this.host.attr("name"); this.input = e("<input type='hidden'/>"), this.host.append(this.input), t && this.input.attr("name", t), this.rangeSlider ? this.values && this.input.val(this.value.rangeStart.toString() + "-" + this.value.rangeEnd.toString()) : this.input.val(this.value.toString()) }, _getSetting: function (e) { return this._settings[this.orientation][e] }, _getEvent: function (e) { return this._isTouchDevice ? this._touchEvents[e] : e }, refresh: function (e) { e || this._refresh() }, _refresh: function () { this._render(), this._performLayout(), this._removeEventHandlers(), this._addEventHandlers(), this._initialSettings() }, _render: function () { this._addTrack(), this._addSliders(), this._addTickContainers(), this._addContentWrapper(), this._addButtons(), this._addRangeBar() }, _addTrack: function () { (null === this._track || this._track.length < 1) && (this._track = e('<div class="' + this.toThemeProperty("jqx-slider-track") + '"></div>'), this.host.append(this._track)), this._track.attr("style", ""), this._track.removeClass(this.toThemeProperty("jqx-slider-track-" + this._getSetting("opposite"))), this._track.addClass(this.toThemeProperty("jqx-slider-track-" + this.orientation)), this._track.addClass(this.toThemeProperty("jqx-fill-state-normal")), this._track.addClass(this.toThemeProperty("jqx-rc-all")) }, _addSliders: function () { (null === this._slider || this._slider.length < 1) && (this._slider = {}, this._slider.left = e('<div class="' + this.toThemeProperty("jqx-slider-slider") + '"></div>'), this._track.append(this._slider.left), this._slider.right = e('<div class="' + this.toThemeProperty("jqx-slider-slider") + '"></div>'), this._track.append(this._slider.right)), this._slider.left.removeClass(this.toThemeProperty("jqx-slider-slider-" + this._getSetting("opposite"))), this._slider.left.addClass(this.toThemeProperty("jqx-slider-slider-" + this.orientation)), this._slider.right.removeClass(this.toThemeProperty("jqx-slider-slider-" + this._getSetting("opposite"))), this._slider.right.addClass(this.toThemeProperty("jqx-slider-slider-" + this.orientation)), this._slider.right.addClass(this.toThemeProperty("jqx-fill-state-normal")), this._slider.left.addClass(this.toThemeProperty("jqx-fill-state-normal")) }, _addTickContainers: function () { (null !== this._bottomTicks || this._bottomTicks.length < 1 || null !== this._topTicks || this._topTicks.length < 1) && this._addTickContainers(); var e = "visible"; this.showTicks || (e = "hidden"), this._bottomTicks.css("visibility", e), this._topTicks.css("visibility", e) }, _addTickContainers: function () { (void 0 === this._bottomTicks || this._bottomTicks.length < 1) && (this._bottomTicks = e('<div class="' + this.toThemeProperty("jqx-slider-tickscontainer") + '" style=""></div>'), this.host.prepend(this._bottomTicks)), (void 0 === this._topTicks || this._topTicks.length < 1) && (this._topTicks = e('<div class="' + this.toThemeProperty("jqx-slider-tickscontainer") + '" style=""></div>'), this.host.append(this._topTicks)) }, _addButtons: function () { (null === this._leftButton || this._leftButton.length < 1 || null === this._rightButton || this._rightButton.length < 1) && this._createButtons(); var e = "block"; this.showButtons && !this.rangeSlider || (e = "none"), this._rightButton.css("display", e), this._leftButton.css("display", e) }, _createButtons: function () { if (this._leftButton = e('<div class="jqx-slider-left"><div style="width: 100%; height: 100%;"></div></div>'), this._rightButton = e('<div class="jqx-slider-right"><div style="width: 100%; height: 100%;"></div></div>'), this.host.prepend(this._rightButton), this.host.prepend(this._leftButton), !this.host.jqxRepeatButton) throw new Error("jqxSlider: Missing reference to jqxbuttons.js."); this._leftButton.jqxRepeatButton({ theme: this.theme, delay: 50, width: this.sliderButtonSize, height: this.sliderButtonSize }), this._rightButton.jqxRepeatButton({ theme: this.theme, delay: 50, width: this.sliderButtonSize, height: this.sliderButtonSize }) }, _addContentWrapper: function () { void 0 !== this._contentWrapper && 0 !== this._contentWrapper.length || (this.host.wrapInner("<div></div>"), this._contentWrapper = this.host.children(0)), "horizontal" === this.orientation ? this._contentWrapper.css("float", "left") : this._contentWrapper.css("float", "none") }, _addTicks: function (t) { if (this.showTicks) { var i = this.max - this.min, s = t[this._getSetting("size")](), r = Math.round(i / this.ticksFrequency), o = s / r; t.empty(); var a = "", n = t[this._getSetting("oSize")](); a += this._addTick(t, 0, this.min, n); for (var l = 1; l < r; l++) { var h = l * o; h = Math.floor(h), a += this._addTick(t, h, l, n) } a += this._addTick(t, r * o, this.max, n), t.append(e(a)) } }, _addTick: function (e, t, i, s) { var r = ""; r = this.toThemeProperty("jqx-slider-tick"), r += " " + this.toThemeProperty("jqx-fill-state-pressed"); var o = this._getSetting("top"), a = "2px"; return e[0] !== this._topTicks[0] && (a = s - this.tickSize - 2 + "px"), "horizontal" === this.orientation ? '<div style="' + o + ": " + a + "; " + this._getSetting("oSize") + ":  " + this.tickSize + "px; float: left; position:absolute; left:" + t + 'px;" class="' + this.toThemeProperty("jqx-slider-tick-horizontal") + " " + r + '"></div>' : '<div style="' + o + ": " + a + "; " + this._getSetting("oSize") + ":  " + this.tickSize + "px; float: none; position:absolute; top:" + t + 'px;" class="' + this.toThemeProperty("jqx-slider-tick-vertical") + " " + r + '"></div>' }, _addRangeBar: function () { (null === this._rangeBar || this._rangeBar.length < 1) && (this._rangeBar = e('<div class="' + this.toThemeProperty("jqx-slider-rangebar") + '"></div>'), this._rangeBar.addClass(this.toThemeProperty("jqx-fill-state-pressed")), this._rangeBar.addClass(this.toThemeProperty("jqx-rc-all")), this._track.append(this._rangeBar)), this.showRange ? this._rangeBar.css("display", "block") : this._rangeBar.css("display", "none") }, _getLeftDisplacement: function () { if (!this.showButtons) return 0; if (this.rangeSlider) return 0; switch (this.buttonsPosition) { case "left": return this._leftButton[this._getSetting("outerSize")](!0) + this._rightButton[this._getSetting("outerSize")](!0); case "right": return 0; default: return this._leftButton[this._getSetting("outerSize")](!0) } return 0 }, _performLayout: function () { this.host.width(this.width), this.host.height(this.height); var e = this.host.height(); if ("width" == this._getSetting("size") && (e = this.host.width()), this._performButtonsLayout(), this._performTrackLayout(e - 1), this._contentWrapper[this._getSetting("size")](this._track[this._getSetting("size")]()), this._contentWrapper[this._getSetting("oSize")](this[this._getSetting("oSize")]), this._performTicksLayout(), this._performRangeBarLayout(), this.rangeSlider ? this._slider.left.css("visibility", "visible") : this._slider.left.css("visibility", "hidden"), this._refreshRangeBar(), "vertical" == this.orientation && this.showButtons) { var t = parseInt((this._leftButton.width() - this._track.width()) / 2); this._track.css("margin-left", -3 + t + "px") } }, _performTrackLayout: function (e) { this._track[this._getSetting("size")](e - (this.showButtons && !this.rangeSlider ? this._leftButton[this._getSetting("outerSize")](!0) + this._rightButton[this._getSetting("outerSize")](!0) : 0)), this._slider.left.css("left", 0), this._slider.left.css("top", 0), this._slider.right.css("left", 0), this._slider.right.css("top", 0) }, _performTicksLayout: function () { this._performTicksContainerLayout(), this._addTicks(this._topTicks), this._addTicks(this._bottomTicks), this._topTicks.css("visibility", "hidden"), this._bottomTicks.css("visibility", "hidden"), "top" !== this.ticksPosition && "both" !== this.ticksPosition || !this.showTicks || this._bottomTicks.css("visibility", "visible"), "bottom" !== this.ticksPosition && "both" !== this.ticksPosition || !this.showTicks || this._topTicks.css("visibility", "visible") }, _performTicksContainerLayout: function () { var e = this._getSetting("size"), t = this._getSetting("oSize"), i = this._getSetting("outerOSize"); this._topTicks[e](this._track[e]()), this._bottomTicks[e](this._track[e]()); var s = (this[t] - this._track[i](!0)) / 2 - 2; this._topTicks[t](parseInt(s)); var r = (this[t] - this._track[i](!0)) / 2 - 2; this._bottomTicks[t](parseInt(r)), "vertical" === this.orientation ? (this._topTicks.css("float", "left"), this._track.css("float", "left"), this._bottomTicks.css("float", "left")) : (this._topTicks.css("float", "none"), this._track.css("float", "none"), this._bottomTicks.css("float", "none")) }, _performButtonsLayout: function () { this._addButtonsStyles(), this._addButtonsClasses(), this._addButtonsHover(), this._orderButtons(), this._centerElement(this._rightButton), this._centerElement(this._leftButton), this._layoutButtons() }, _addButtonsStyles: function () { this._leftButton.css("background-position", "center"), this._rightButton.css("background-position", "center"), "vertical" === this.orientation ? (this._leftButton.css("float", "none"), this._rightButton.css("float", "none")) : (this._leftButton.css("float", "left"), this._rightButton.css("float", "left")) }, _addButtonsClasses: function () { var e = { prev: "left", next: "right" }; "vertical" === this.orientation && (e = { prev: "up", next: "down" }), this._leftButton.addClass(this.toThemeProperty("jqx-rc-all")), this._rightButton.addClass(this.toThemeProperty("jqx-rc-all")), this._leftButton.addClass(this.toThemeProperty("jqx-slider-button")), this._rightButton.addClass(this.toThemeProperty("jqx-slider-button")), this._leftArrow = this._leftButton.find("div"), this._rightArrow = this._rightButton.find("div"), this._leftArrow.removeClass(this.toThemeProperty("jqx-icon-arrow-left")), this._rightArrow.removeClass(this.toThemeProperty("jqx-icon-arrow-right")), this._leftArrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up")), this._rightArrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down")), this._leftArrow.addClass(this.toThemeProperty("jqx-icon-arrow-" + e.prev)), this._rightArrow.addClass(this.toThemeProperty("jqx-icon-arrow-" + e.next)) }, _addButtonsHover: function () { var t = this, i = { prev: "left", next: "right" }; "vertical" === this.orientation && (i = { prev: "up", next: "down" }), this.addHandler(e(document), "mouseup.arrow" + this.element.id, function () { t._leftArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-" + i.prev + "-selected")), t._rightArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-" + i.next + "-selected")) }), this.addHandler(this._leftButton, "mousedown", function () { t.disabled || t._leftArrow.addClass(t.toThemeProperty("jqx-icon-arrow-" + i.prev + "-selected")) }), this.addHandler(this._leftButton, "mouseup", function () { t.disabled || t._leftArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-" + i.prev + "-selected")) }), this.addHandler(this._rightButton, "mousedown", function () { t.disabled || t._rightArrow.addClass(t.toThemeProperty("jqx-icon-arrow-" + i.next + "-selected")) }), this.addHandler(this._rightButton, "mouseup", function () { t.disabled || t._rightArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-" + i.next + "-selected")) }), this._leftButton.hover(function () { t.disabled || t._leftArrow.addClass(t.toThemeProperty("jqx-icon-arrow-" + i.prev + "-hover")) }, function () { t.disabled || t._leftArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-" + i.prev + "-hover")) }), this._rightButton.hover(function () { t.disabled || t._rightArrow.addClass(t.toThemeProperty("jqx-icon-arrow-" + i.next + "-hover")) }, function () { t.disabled || t._rightArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-" + i.next + "-hover")) }) }, _layoutButtons: function () { "horizontal" === this.orientation ? this._horizontalButtonsLayout() : this._verticalButtonsLayout() }, _horizontalButtonsLayout: function () { var e = 2 + Math.ceil(this.sliderButtonSize / 2); "left" == this.buttonsPosition ? (this._leftButton.css("margin-right", "0px"), this._rightButton.css("margin-right", e)) : "right" == this.buttonsPosition ? (this._leftButton.css("margin-left", 2 + e), this._rightButton.css("margin-right", "0px")) : (this._leftButton.css("margin-right", e), this._rightButton.css("margin-left", 2 + e)) }, _verticalButtonsLayout: function () { var e = 2 + Math.ceil(this.sliderButtonSize / 2); "left" == this.buttonsPosition ? (this._leftButton.css("margin-bottom", "0px"), this._rightButton.css("margin-bottom", e)) : "right" == this.buttonsPosition ? (this._leftButton.css("margin-top", 2 + e), this._rightButton.css("margin-bottom", "0px")) : (this._leftButton.css("margin-bottom", e), this._rightButton.css("margin-top", 2 + e)); var t = this._leftButton.css("margin-left"); this._leftButton.css("margin-left", parseInt(t) - 1), this._rightButton.css("margin-left", parseInt(t) - 1) }, _orderButtons: function () { switch (this._rightButton.detach(), this._leftButton.detach(), this.buttonsPosition) { case "left": this.host.prepend(this._rightButton), this.host.prepend(this._leftButton); break; case "right": this.host.append(this._leftButton), this.host.append(this._rightButton); break; case "both": this.host.prepend(this._leftButton), this.host.append(this._rightButton) } }, _performRangeBarLayout: function () { this._rangeBar[this._getSetting("oSize")](this._track[this._getSetting("oSize")]()), this._rangeBar[this._getSetting("size")](this._track[this._getSetting("size")]()), this._rangeBar.css("position", "absolute"), this._rangeBar.css("left", 0), this._rangeBar.css("top", 0) }, _centerElement: function (t) { var i = (e(t.parent())[this._getSetting("oSize")]() - t[this._getSetting("outerOSize")]()) / 2 - 1; return t.css("margin-" + [this._getSetting("left")], 0), t.css("margin-" + [this._getSetting("top")], i), t }, _raiseEvent: function (e, t) { var i = this._events[e], s = new jQuery.Event(i); return !1 === this._triggerEvents || (s.args = t, 1 === e && (s.args.cancel = !1, this._slideEvent = s), this._lastValue[e] = t.value, s.owner = this, this.host.trigger(s)) }, _initialSettings: function () { this.rangeSlider ? "number" != typeof this.value ? this.setValue(this.value) : this.setValue(this.values) : (void 0 == this.value && (this.value = 0), this.setValue(this.value)), this.disabled && this.disable() }, _addEventHandlers: function () { var t = this; this.addHandler(this._slider.right, this._getEvent("mousedown"), this._startDrag, { self: this }), this.addHandler(this._slider.left, this._getEvent("mousedown"), this._startDrag, { self: this }), this.addHandler(e(document), this._getEvent("mouseup") + "." + this.element.id, function () { t._stopDrag() }); try { if (("" != document.referrer || window.frameElement) && null != window.top && window.top != window.self) { var i = function (e) { t._stopDrag() }, s = null; window.parent && document.referrer && (s = document.referrer), s && -1 != s.indexOf(document.location.host) && window.top.document && (window.top.document.addEventListener ? window.top.document.addEventListener("mouseup", i, !1) : window.top.document.attachEvent && window.top.document.attachEvent("onmouseup", i)) } } catch (e) { } this.addHandler(e(document), this._getEvent("mousemove") + "." + this.element.id, this._performDrag, { self: this }); var r = this; this.addHandler(this._slider.left, "mouseenter", function () { r.disabled || t._slider.left.addClass(t.toThemeProperty("jqx-fill-state-hover")) }), this.addHandler(this._slider.right, "mouseenter", function () { r.disabled || t._slider.right.addClass(t.toThemeProperty("jqx-fill-state-hover")) }), this.addHandler(this._slider.left, "mouseleave", function () { r.disabled || t._slider.left.removeClass(t.toThemeProperty("jqx-fill-state-hover")) }), this.addHandler(this._slider.right, "mouseleave", function () { r.disabled || t._slider.right.removeClass(t.toThemeProperty("jqx-fill-state-hover")) }), this.addHandler(this._slider.left, "mousedown", function () { r.disabled || t._slider.left.addClass(t.toThemeProperty("jqx-fill-state-pressed")) }), this.addHandler(this._slider.right, "mousedown", function () { r.disabled || t._slider.right.addClass(t.toThemeProperty("jqx-fill-state-pressed")) }), this.addHandler(this._slider.left, "mouseup", function () { r.disabled || t._slider.left.removeClass(t.toThemeProperty("jqx-fill-state-pressed")) }), this.addHandler(this._slider.right, "mouseup", function () { r.disabled || t._slider.right.removeClass(t.toThemeProperty("jqx-fill-state-pressed")) }), this.addHandler(this._leftButton, this._getEvent("click"), this._leftButtonHandler, { self: this }), this.addHandler(this._rightButton, this._getEvent("click"), this._rightButtonHandler, { self: this }), this.addHandler(this._track, this._getEvent("mousedown"), this._trackMouseDownHandler, { self: this }), this.addHandler(this.host, "focus", function () { t._track.addClass(t.toThemeProperty("jqx-fill-state-focus")), t._leftButton.addClass(t.toThemeProperty("jqx-fill-state-focus")), t._rightButton.addClass(t.toThemeProperty("jqx-fill-state-focus")), t._slider.right.addClass(t.toThemeProperty("jqx-fill-state-focus")), t._slider.left.addClass(t.toThemeProperty("jqx-fill-state-focus")) }), this.addHandler(this.host, "blur", function () { t._leftButton.removeClass(t.toThemeProperty("jqx-fill-state-focus")), t._rightButton.removeClass(t.toThemeProperty("jqx-fill-state-focus")), t._track.removeClass(t.toThemeProperty("jqx-fill-state-focus")), t._slider.right.removeClass(t.toThemeProperty("jqx-fill-state-focus")), t._slider.left.removeClass(t.toThemeProperty("jqx-fill-state-focus")) }), this.element.onselectstart = function () { return !1 }, this._addMouseWheelListeners(), this._addKeyboardListeners() }, _addMouseWheelListeners: function () { var e = this; this.addHandler(this.host, "mousewheel", function (t) { if (e.disabled) return !0; var i = t.wheelDelta; t.originalEvent && t.originalEvent.wheelDelta && (t.wheelDelta = t.originalEvent.wheelDelta), "wheelDelta" in t || (i = -40 * t.detail), i > 0 ? e.incrementValue() : e.decrementValue(), t.preventDefault() }) }, _addKeyboardListeners: function () { var e = this; this.addHandler(this.host, "keydown", function (t) { switch (t.keyCode) { case 40: case 37: return "normal" != e.layout || e.rtl ? e.incrementValue() : e.decrementValue(), !1; case 38: case 39: return "normal" != e.layout || e.rtl ? e.decrementValue() : e.incrementValue(), !1; case 36: return e.rangeSlider ? e.setValue([e.values[0], e.max]) : e.setValue(e.min), !1; case 35: return e.rangeSlider ? e.setValue([e.min, e.values[1]]) : e.setValue(e.max), !1 } }) }, _trackMouseDownHandler: function (t) { var i = e.jqx.mobile.getTouches(t)[0], s = t.data.self, t = s._isTouchDevice ? i : t, r = (s._track.coord()[s._getSetting("left")], t[s._getSetting("page")] - s._slider.left[s._getSetting("size")]() / 2), o = s._getClosest(r), a = (parseInt(s._track[s._getSetting("size")]()), s._getValueByPosition(r)); s._setValue(a, o), s.input && e.jqx.aria(s, "aria-valuenow", s.input.val()) }, _getClosest: function (e) { return this.rangeSlider ? (e = e - this._track.coord()[this._getSetting("left")] - this._slider.left[this._getSetting("size")]() / 2, Math.abs(parseInt(this._slider.left.css(this._getSetting("left")), 10) - e) < Math.abs(parseInt(this._slider.right.css(this._getSetting("left")), 10) - e) ? this._slider.left : this._slider.right) : this._slider.right }, _removeEventHandlers: function () { this.removeHandler(this._slider.right, this._getEvent("mousedown"), this._startDrag), this.removeHandler(this._slider.left, this._getEvent("mousedown"), this._startDrag), this.removeHandler(e(document), this._getEvent("mouseup") + "." + this.host.attr("id"), this._stopDrag), this.removeHandler(e(document), this._getEvent("mousemove") + "." + this.host.attr("id"), this._performDrag), this.removeHandler(this._leftButton, this._getEvent("click"), this._leftButtonHandler), this.removeHandler(this._rightButton, this._getEvent("click"), this._rightButtonHandler), this.removeHandler(this._track, this._getEvent("mousedown"), this._trackMouseDownHandler), this.element.onselectstart = null, this.removeHandler(this.host, this._getEvent("mousewheel")), this.removeHandler(this.host, this._getEvent("keydown")) }, _rightButtonClick: function () { "horizontal" != this.orientation || this.rtl ? this.decrementValue() : this.incrementValue() }, _leftButtonClick: function () { "horizontal" != this.orientation || this.rtl ? this.incrementValue() : this.decrementValue() }, _rightButtonHandler: function (e) { var t = e.data.self; return "normal" == t.layout ? t._rightButtonClick() : t._leftButtonClick(), !1 }, _leftButtonHandler: function (e) { var t = e.data.self; return "normal" == t.layout ? t._leftButtonClick() : t._rightButtonClick(), !1 }, _startDrag: function (t) { e.jqx.mobile.getTouches(t)[0]; var i = t.data.self; i._capturedElement = e(t.target), i._startX = e(t.target).coord().left, i._startY = e(t.target).coord().top; var s = e.jqx.position(t); return i._mouseStartX = s.left, i._mouseStartY = s.top, !1 }, _stopDrag: function () { var t = this; t._slideStarted && t._raiseEvent(2, { value: t.getValue() }), t._slideStarted && null != t._capturedElement ? (this.input && e.jqx.aria(this, "aria-valuenow", this.input.val()), t._slider.left.removeClass(t.toThemeProperty("jqx-fill-state-pressed")), t._slider.right.removeClass(t.toThemeProperty("jqx-fill-state-pressed")), t._slideStarted = !1, t._capturedElement = null) : t._capturedElement = null }, _performDrag: function (t) { var i = t.data.self; if (null !== i._capturedElement) { e.jqx.mobile.getTouches(t)[0]; if (0 === t.which && e.jqx.browser.msie && e.jqx.browser.version < 9) return i._stopDrag(), !1; var s = e.jqx.position(t), r = "horizontal" == i.orientation ? s.left : s.top; if (i._isDragged(r), i._slideStarted || i._isTouchDevice) return i._dragHandler(r) } }, _isDragged: function (e) { Math.abs(e - this[this._getSetting("mouse")]) > 2 && !this._slideStarted ? (this._slideStarted = !0, this._valueChanged(3) && this._raiseEvent(3, { value: this.getValue() })) : null === this._capturedElement && (this._slideStarted = !1) }, _dragHandler: function (e) { e = e - this[this._getSetting("mouse")] + this[this._getSetting("start")]; var t = this._getValueByPosition(e); if (this.rangeSlider) { var i = this._slider.right, s = this._slider.left, r = this._getSetting("left"); this._capturedElement[0] === s[0] ? parseFloat(e) > i.coord()[r] && (e = i.coord()[r]) : parseFloat(e) < s.coord()[r] && (e = s.coord()[r]) } return this._setValue(t, this._capturedElement, e), !1 }, _getValueByPosition: function (e) { return "default" === this.mode ? this._getFloatingValueByPosition(e) : this._getFixedValueByPosition(e) }, _getFloatingValueByPosition: function (e) { var t = (e - this._track.coord()[this._getSetting("left")] + this._slider.left.width() / 2) / this._track[this._getSetting("size")](), i = (this.max - this.min) * t + this.min; return "normal" == this.layout ? "horizontal" !== this.orientation || this.rtl ? this.max + this.min - i : i : "horizontal" !== this.orientation || this.rtl ? i : this.max + this.min - i }, _getFixedValueByPosition: function (e) { for (var t = this.step, i = (this.max - this.min) / t, s = this._track[this._getSetting("size")]() / i, r = this._track.coord()[this._getSetting("left")] - this._slider.left[this._getSetting("size")]() / 2, o = { number: -1, distance: Number.MAX_VALUE }, a = this.min; a <= this.max + this.step; a += this.step) Math.abs(o.distance - e) > Math.abs(r - e) && (o.distance = r, o.number = a), r += s; return "normal" == this.layout ? "horizontal" !== this.orientation || this.rtl ? this.max + this.min - o.number : o.number : "horizontal" !== this.orientation || this.rtl ? o.number : this.max + this.min - o.number }, _setValue: function (e, t, i) { if (!this._slideEvent || !this._slideEvent.args.cancel) { if (e = this._handleValue(e, t), this._setSliderPosition(e, t, i), this._fixZIndexes(), this._valueChanged(1)) this._raiseEvent(1, { value: this.getValue() }); this._valueChanged(0) && this._raiseEvent(0, { value: this.getValue() }), this.tooltip && t.attr("title", e), this.input && (this.rangeSlider ? this.values && void 0 != this.value.rangeEnd && void 0 != this.value.rangeStart && this.input.val(this.value.rangeStart.toString() + "-" + this.value.rangeEnd.toString()) : this.input.val(this.value.toString())) } }, _valueChanged: function (e) { var t = this.getValue(); return !this.rangeSlider && this._lastValue[e] !== t || this.rangeSlider && ("object" != typeof this._lastValue[e] || parseFloat(this._lastValue[e].rangeEnd) !== parseFloat(t.rangeEnd) || parseFloat(this._lastValue[e].rangeStart) !== parseFloat(t.rangeStart)) }, _handleValue: function (e, t) { return e = this._validateValue(e, t), t[0] === this._slider.left[0] && (this.values[0] = e), t[0] === this._slider.right[0] && (this.values[1] = e), this.rangeSlider ? this.value = { rangeStart: this.values[0], rangeEnd: this.values[1] } : this.value = e, e }, _fixZIndexes: function () { this.values[1] - this.values[0] < .5 && this.max - this.values[0] < .5 ? (this._slider.left.css("z-index", 20), this._slider.right.css("z-index", 15)) : (this._slider.left.css("z-index", 15), this._slider.right.css("z-index", 20)) }, _refreshRangeBar: function () { var e = this._getSetting("left"), t = this._getSetting("size"), i = this.rtl && "horizontal" == this.orientation; if ("normal" == this.layout) { s = this._slider.left.position()[e]; ("vertical" === this.orientation || i) && (s = this._slider.right.position()[e]) } else { s = this._slider.right.position()[e]; if ("vertical" === this.orientation || i) var s = this._slider.left.position()[e] } this._rangeBar.css(e, s + this._slider.left[t]() / 2), this._rangeBar[t](Math.abs(this._slider.right.position()[e] - this._slider.left.position()[e])) }, _validateValue: function (e, t) { return e > this.max && (e = this.max), e < this.min && (e = this.min), this.rangeSlider && (t[0] === this._slider.left[0] ? e >= this.values[1] && (e = this.values[1]) : e <= this.values[0] && (e = this.values[0])), e }, _setSliderPosition: function (e, t, i) { var s, r = this._track[this._getSetting("size")](); if (i && (i -= this._track.coord()[this._getSetting("left")]), "normal" == this.layout) { o = (e - this.min) / (this.max - this.min); ("horizontal" != this.orientation || "horizontal" == this.orientation && this.rtl) && (o = 1 - (e - this.min) / (this.max - this.min)) } else { var o = 1 - (e - this.min) / (this.max - this.min); ("horizontal" != this.orientation || "horizontal" == this.orientation && this.rtl) && (o = (e - this.min) / (this.max - this.min)) } s = r * o - this._slider.left[this._getSetting("size")]() / 2, t.css(this._getSetting("left"), s), this._refreshRangeBar() }, _validateDropPosition: function (e, t) { var i = this._track[this._getSetting("size")](), s = t[this._getSetting("size")](); return e < -s / 2 && (e = -s / 2), e > i - s / 2 && (e = i - s / 2), Math.floor(e) }, propertyChangedHandler: function (t, i, s, r) { switch (i) { case "theme": e.jqx.utilities.setTheme(s, r, t.host), t._leftButton.jqxRepeatButton({ theme: r }), t._rightButton.jqxRepeatButton({ theme: r }); break; case "disabled": r ? (t.disabled = !0, t.disable()) : (t.disabled = !1, t.enable()); break; case "width": case "height": t._performLayout(), t._initialSettings(); break; case "min": case "max": t.rangeSlider || t._setValue(r, t._slider.left), t._initialSettings(); break; case "showTicks": case "ticksPosition": case "ticksFrequency": case "tickSize": t._performLayout(), t._initialSettings(); break; case "showRange": case "showButtons": case "orientation": case "rtl": t._render(), t._performLayout(), t._initialSettings(); break; case "buttonsPosition": t._refresh(); break; case "rangeSlider": t.value = r ? { rangeEnd: t.value, rangeStart: t.value } : t.value.rangeEnd, t._render(), t._performLayout(), t._initialSettings(); break; case "value": t.rangeSlider || (t.value = parseFloat(r)), t.setValue(r); break; case "values": t.setValue(r); break; case "tooltip": r || (t._slider.left.removeAttr("title"), t._slider.right.removeAttr("title")); break; default: t._refresh() } }, incrementValue: function (t) { (void 0 == t || isNaN(parseFloat(t))) && (t = this.step), this.rangeSlider ? this.values[1] < this.max && this._setValue(this.values[1] + t, this._slider.right) : this.values[1] >= this.min && this.values[1] < this.max && this._setValue(this.values[1] + t, this._slider.right), this.input && e.jqx.aria(this, "aria-valuenow", this.input.val()) }, decrementValue: function (t) { (void 0 == t || isNaN(parseFloat(t))) && (t = this.step), this.rangeSlider ? this.values[0] > this.min && this._setValue(this.values[0] - t, this._slider.left) : this.values[1] <= this.max && this.values[1] > this.min && this._setValue(this.values[1] - t, this._slider.right), this.input && e.jqx.aria(this, "aria-valuenow", this.input.val()) }, val: function (t) { if (0 == arguments.length || !e.isArray(t) && "object" == typeof t) return this.getValue(); e.isArray(t), this.setValue(t) }, setValue: function (t) { if (this.rangeSlider) { var i, s; arguments.length < 2 ? t instanceof Array ? (i = t[0], s = t[1]) : "object" == typeof t && void 0 !== t.rangeStart && void 0 !== t.rangeEnd && (i = t.rangeStart, s = t.rangeEnd) : (i = arguments[0], s = arguments[1]), this._triggerEvents = !1, this._setValue(s, this._slider.right), this._triggerEvents = !0, this._setValue(i, this._slider.left) } else this._triggerEvents = !1, this._setValue(this.min, this._slider.left), this._triggerEvents = !0, this._setValue(t, this._slider.right); this.input && e.jqx.aria(this, "aria-valuenow", this.input.val()) }, getValue: function () { return this.value }, _enable: function (e) { e ? (this._addEventHandlers(), this.disabled = !1, this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))) : (this._removeEventHandlers(), this.disabled = !0, this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"))), this._leftButton.jqxRepeatButton({ disabled: this.disabled }), this._rightButton.jqxRepeatButton({ disabled: this.disabled }) }, disable: function () { this._enable(!1), e.jqx.aria(this, "aria-disabled", !0) }, enable: function () { this._enable(!0), e.jqx.aria(this, "aria-disabled", !1) } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxSplitter", "", {}), e.extend(e.jqx._jqxSplitter.prototype, { defineInstance: function () { this.width = 300, this.height = 300, this.panels = [], this.orientation = "vertical", this.disabled = !1, this.splitBarSize = 5, this.touchSplitBarSize = 15, this.panel1 = null, this.panel2 = null, this._eventsMap = { mousedown: e.jqx.mobile.getTouchEventName("touchstart"), mouseup: e.jqx.mobile.getTouchEventName("touchend"), mousemove: e.jqx.mobile.getTouchEventName("touchmove"), mouseenter: "mouseenter", mouseleave: "mouseleave" }, this._isTouchDevice = !1, this._isNested = !1, this.resizable = !0, this.touchMode = "auto", this.showSplitBar = !0, this.initContent = null, this._events = ["resize", "expanded", "collapsed", "resizeStart", "layout"] }, createInstance: function () { this.render() }, _initOverlay: function (t) { if (this.overlay || "undefined" == t) this.overlay.remove(), this.overlay = null; else if (1 == t) { this.overlay = e("<div style='z-index: 100; background: #fff;'></div>"), this.overlay.css("opacity", .01), this.overlay.css("position", "absolute"), this.overlay.appendTo(e(document.body)); this.host.coord(); this.overlay.css("left", "0px"), this.overlay.css("top", "0px"), this.overlay.width(e(window).width()), this.overlay.height(e(window).height()), this.overlay.addClass("jqx-disableselect"), "horizontal" == this.orientation ? this.overlay.css("cursor", "row-resize") : this.overlay.css("cursor", "col-resize") } }, _startDrag: function (t) { return !(t.target != this.splitBarButton[0] && !this.disabled) || (!(!this.panels[0].collapsed && !this.panels[1].collapsed && this.resizable) || (null != this.overlay || (this._dragging = !0, this._initOverlay(!0), this._dragStart = e.jqx.position(t), !1))) }, _drag: function (t) { if (this.panels[0].collapsed || this.panels[1].collapsed || this.disabled) return !0; if (!this._dragging) return !0; var i = "horizontal" == this.orientation ? "top" : "left", s = "vertical" == this.orientation ? "width" : "height"; if (this._position = e.jqx.position(t), this.overlay && !this._splitBarClone && Math.abs(this._position[i] - this._dragStart[i]) >= 3) { var r = this.splitBar.coord(); return this._cloneStart = { left: r.left, top: r.top }, this._splitBarClone = this._createSplitBarClone(), void this._raiseEvent(3, { panels: this.panels }) } if (this._splitBarClone) { var o, a, n = this.host[s](), l = n / 100, h = this._splitBarClone[s]() + 2, d = parseInt(this.host.coord()[i]), c = this._position[i] - this._dragStart[i] + this._cloneStart[i] - d; return 0 > c && (c = 0), c > n + 0 - h && (c = n + 0 - h), o = this.panels[0].min, -1 != (a = this.panels[1].min).toString().indexOf("%") && (a = parseFloat(a) * l), -1 != o.toString().indexOf("%") && (o = parseFloat(o) * l), this._splitBarClone.removeClass(this.toThemeProperty("jqx-splitter-splitbar-invalid")), c < o && (this._splitBarClone.addClass(this.toThemeProperty("jqx-splitter-splitbar-invalid")), c = o), c > n + 0 - h - a && (this._splitBarClone.addClass(this.toThemeProperty("jqx-splitter-splitbar-invalid")), c = n + 0 - h - a), this._splitBarClone.css(i, c), t.preventDefault && t.preventDefault(), t.stopPropagation && t.stopPropagation(), !1 } return !0 }, resize: function (e, t) { this.width = e, this.height = t, this._arrange() }, _resize: function () { var e = "horizontal" == this.orientation ? "height" : "width", t = "horizontal" == this.orientation ? "top" : "left", i = this._splitBarClone.css(t), s = 1 / (this.host[e]() / 100); -1 != this.panels[0].size.toString().indexOf("%") ? this.panels[0].size = parseFloat(i) * s + "%" : this.panels[0].size = parseFloat(i), this._layoutPanels(), this._raiseEvent(0, { panels: this.panels }) }, _stopDrag: function () { if (this._dragging && this._initOverlay(), this._dragging = !1, this._splitBarClone) { if (this.panels[0].collapsed || this.panels[1].collapsed || this.disabled) return !0; this._resize(), this._splitBarClone.remove(), this._splitBarClone = null } }, _createSplitBarClone: function () { var e = this.splitBar.clone(); return e.fadeTo(0, .7), e.css("z-index", 99999), "vertical" == this.orientation ? e.css("cursor", "col-resize") : e.css("cursor", "row-resize"), this.host.append(e), e }, _eventName: function (e) { return this._isTouchDevice ? this._eventsMap[e] : e }, _addHandlers: function () { var t = this; if (e.jqx.utilities.resize(this.host, function () { t._layoutPanels() }), this.addHandler(this.splitBar, "dragstart." + this.element.id, function (e) { return !1 }), this.splitBarButton && (this.addHandler(this.splitBarButton, "click." + this.element.id, function () { var e = function (e) { e.collapsed ? t.expand() : t.collapse() }; t.panels[0].collapsible ? e(t.panels[0]) : t.panels[1].collapsible && e(t.panels[1]) }), this.addHandler(this.splitBarButton, this._eventName("mouseenter"), function () { t.splitBarButton.addClass(t.toThemeProperty("jqx-splitter-collapse-button-hover")), t.splitBarButton.addClass(t.toThemeProperty("jqx-fill-state-hover")) }), this.addHandler(this.splitBarButton, this._eventName("mouseleave"), function () { t.splitBarButton.removeClass(t.toThemeProperty("jqx-splitter-collapse-button-hover")), t.splitBarButton.removeClass(t.toThemeProperty("jqx-fill-state-hover")) })), this.addHandler(e(document), this._eventName("mousemove") + "." + this.element.id, function (e) { return t._drag(e) }), this.addHandler(e(document), this._eventName("mouseup") + "." + this.element.id, function () { return t._stopDrag() }), this.addHandler(this.splitBar, this._eventName("mousedown"), function (e) { return t._startDrag(e) }), this.addHandler(this.splitBar, this._eventName("mouseenter"), function () { t.resizable && !t.disabled && (t.splitBar.addClass(t.toThemeProperty("jqx-splitter-splitbar-hover")), t.splitBar.addClass(t.toThemeProperty("jqx-fill-state-hover"))) }), this.addHandler(this.splitBar, this._eventName("mouseleave"), function () { t.resizable && !t.disabled && (t.splitBar.removeClass(t.toThemeProperty("jqx-splitter-splitbar-hover")), t.splitBar.removeClass(t.toThemeProperty("jqx-fill-state-hover"))) }), ("" != document.referrer || window.frameElement) && null != window.top && window.top != window.self) { var i = null; if (window.parent && document.referrer && (i = document.referrer), i && -1 != i.indexOf(document.location.host)) { var s = function (e) { t._stopDrag() }; window.top.document.addEventListener ? window.top.document.addEventListener("mouseup", s, !1) : window.top.document.attachEvent && window.top.document.attachEvent("onmouseup", s) } } }, _removeHandlers: function () { this.removeHandler(e(window), "resize." + this.element.id), this.splitBarButton && (this.removeHandler(this.splitBarButton, "click." + this.element.id), this.removeHandler(this.splitBarButton, this._eventName("mouseenter")), this.removeHandler(this.splitBarButton, this._eventName("mouseleave"))), this.removeHandler(e(document), this._eventName("mousemove") + "." + this.element.id), this.removeHandler(e(document), this._eventName("mouseup") + "." + this.element.id), this.splitBar && (this.removeHandler(this.splitBar, "dragstart." + this.element.id), this.removeHandler(this.splitBar, this._eventName("mousedown")), this.removeHandler(this.splitBar, this._eventName("mouseenter")), this.removeHandler(this.splitBar, this._eventName("mouseleave"))) }, render: function () { this.splitBar && this.splitBar.remove(); var t = this.host.children(); if (2 != t.length) throw "Invalid HTML Structure! jqxSplitter requires 1 container DIV tag and 2 nested DIV tags."; if (2 == t.length) { var i = t[0].className.split(" "), s = t[1].className.split(" "); if (-1 != i.indexOf("jqx-reset") && -1 != i.indexOf("jqx-splitter") && -1 != i.indexOf("jqx-widget")) throw "Invalid HTML Structure! Nested jqxSplitter cannot be initialized from a Splitter Panel. You need to add a new DIV tag inside the Splitter Panel and initialize the nested jqxSplitter from it!"; if (-1 != s.indexOf("jqx-reset") && -1 != s.indexOf("jqx-splitter") && -1 != s.indexOf("jqx-widget")) throw "Invalid HTML Structure! Nested jqxSplitter cannot be initialized from a Splitter Panel. You need to add a new DIV tag inside the Splitter Panel and initialize the nested jqxSplitter from it!" } if (this.host.parent().length > 0 && -1 != this.host.parent()[0].className.indexOf("jqx-splitter")) { if (-1 != this.element.className.indexOf("jqx-splitter-panel")) throw "Invalid HTML Structure! Nested jqxSplitter cannot be initialized from a Splitter Panel. You need to add a new DIV tag inside the Splitter Panel and initialize the nested jqxSplitter from it!"; this._isNested = !0, 300 == this.width && (this.width = "100%"), 300 == this.height && (this.height = "100%"), "100%" == this.width && "100%" == this.height && (this.host.addClass("jqx-splitter-nested"), -1 != this.host.parent()[0].className.indexOf("jqx-splitter-panel") && this.host.parent().addClass("jqx-splitter-panel-nested")) } this._hasBorder = 0 == this.host.hasClass("jqx-hideborder") || "" != this.element.style.borderTopWidth, this._removeHandlers(), this._isTouchDevice = e.jqx.mobile.isTouchDevice(), this._validate(), this.panel1.css("left", "0px"), this.panel1.css("top", "0px"), this.panel2.css("left", "0px"), this.panel2.css("top", "0px"), this.splitBar = e("<div><div></div></div>"), this.resizable || this.splitBar.css("cursor", "default"), this.splitBarButton = this.splitBar.find("div:last"), this._setTheme(), this.splitBar.insertAfter(this.panel1), this._arrange(), 0 == this.panels[0].collapsible && 0 == this.panels[1].collapsible && this.splitBarButton.hide(); this._addHandlers(), this.initContent && this.initContent(), this.disabled && this.disable() }, _hiddenParent: function () { return e.jqx.isHidden(this.host) }, _setTheme: function () { this.panel1.addClass(this.toThemeProperty("jqx-widget-content")), this.panel2.addClass(this.toThemeProperty("jqx-widget-content")), this.panel1.addClass(this.toThemeProperty("jqx-splitter-panel")), this.panel2.addClass(this.toThemeProperty("jqx-splitter-panel")), this.panel1.addClass(this.toThemeProperty("jqx-reset")), this.panel2.addClass(this.toThemeProperty("jqx-reset")), this.host.addClass(this.toThemeProperty("jqx-reset")), this.host.addClass(this.toThemeProperty("jqx-splitter")), this.host.addClass(this.toThemeProperty("jqx-widget")), this.host.addClass(this.toThemeProperty("jqx-widget-content")), this.splitBar.addClass(this.toThemeProperty("jqx-splitter-splitbar-" + this.orientation)), this.splitBar.addClass(this.toThemeProperty("jqx-fill-state-normal")), this.splitBarButton.addClass(this.toThemeProperty("jqx-splitter-collapse-button-" + this.orientation)), this.splitBarButton.addClass(this.toThemeProperty("jqx-fill-state-pressed")) }, _validate: function () { if (2 != (t = this.host.children()).length) throw "Invalid HTML Structure! jqxSplitter requires two nested DIV tags!"; this.panels && !this.panels[1] ? this.panels[0] ? this.panels[1] = {} : this.panels = [{ size: "50%" }, { size: "50%" }] : void 0 == this.panels && (this.panels = [{ size: "50%" }, { size: "50%" }]); var t = this.host.children(); this.panel1 = this.panels[0].element = e(t[0]), this.panel2 = this.panels[1].element = e(t[1]), this.panel1[0].style.minWidth = "", this.panel1[0].style.maxWidth = "", this.panel2[0].style.minWidth = "", this.panel2[0].style.maxWidth = "", e.each(this.panels, function () { void 0 == this.min && (this.min = 0), void 0 == this.size && (this.size = 0), this.size < 0 && (this.size = 0), this.min < 0 && (this.min = 0), void 0 == this.collapsible && (this.collapsible = !0), void 0 == this.collapsed && (this.collapsed = !1), 0 != this.size && (-1 != this.size.toString().indexOf("px") && (this.size = parseInt(this.size)), -1 == this.size.toString().indexOf("%") ? parseInt(this.min) > parseInt(this.size) && (this.min = this.size) : -1 != this.min.toString().indexOf("%") && parseInt(this.min) > parseInt(this.size) && (this.min = this.size)) }) }, _arrange: function () { if (null != this.width) { var e = this.width; "string" != typeof e && (e = parseInt(this.width) + "px"), this.host.css("width", e) } if (null != this.height) { var t = this.height; "string" != typeof t && (t = parseInt(this.height) + "px"), this.host.css("height", t) } this._splitBarSize = this._isTouchDevice ? this.touchSplitBarSize : this.splitBarSize, this.showSplitBar || (this._splitBarSize = 0, this.splitBar.hide()); var i = "horizontal" == this.orientation ? "width" : "height"; this.splitBar.css(i, "100%"), this.panel1.css(i, "100%"), this.panel2.css(i, "100%"), "horizontal" == this.orientation ? this.splitBar.height(this._splitBarSize) : this.splitBar.width(this._splitBarSize), "vertical" === this.orientation ? (this.splitBarButton.width(this._splitBarSize), this.splitBarButton.height(45)) : (this.splitBarButton.height(this._splitBarSize), this.splitBarButton.width(45)), this.splitBarButton.css("position", "relative"), "vertical" === this.orientation ? (this.splitBarButton.css("top", "50%"), this.splitBarButton.css("left", "0"), this.splitBarButton.css("margin-top", "-23px"), this.splitBarButton.css("margin-left", "-0px")) : (this.splitBarButton.css("left", "50%"), this.splitBarButton.css("top", "0"), this.splitBarButton.css("margin-left", "-23px"), this.splitBarButton.css("margin-top", "-0px")), this._layoutPanels() }, collapse: function () { if (!this.disabled) { var e = -1; this.panels[0].collapsed = this.panels[1].collapsed = !1, this.panels[0].element[0].style.visibility = "inherit", this.panels[1].element[0].style.visibility = "inherit", this.panels[0].collapsible ? e = 0 : this.panels[1].collapsible && (e = 1), -1 != e && (this.panels[e].collapsed = !0, this.panels[e].element[0].style.visibility = "hidden", this.splitBar.addClass(this.toThemeProperty("jqx-splitter-splitbar-collapsed")), this._layoutPanels(), this._raiseEvent(2, { index: e, panels: this.panels }), this._raiseEvent(0, { panels: this.panels })) } }, expand: function () { if (!this.disabled) { var e = -1; this.panels[0].collapsed = this.panels[1].collapsed = !1, this.panels[0].element[0].style.visibility = "inherit", this.panels[1].element[0].style.visibility = "inherit", this.panels[0].collapsible ? e = 0 : this.panels[1].collapsible && (e = 1), -1 != e && (this.panels[e].collapsed = !1, this.panels[e].element[0].style.visibility = "inherit", this.splitBar.removeClass(this.toThemeProperty("jqx-splitter-splitbar-collapsed")), this._layoutPanels(), this._raiseEvent(1, { index: e, panels: this.panels }), this._raiseEvent(0, { panels: this.panels })) } }, disable: function () { this.disabled = !0, this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")), this.splitBar.addClass(this.toThemeProperty("jqx-splitter-splitbar-collapsed")), this.splitBarButton.addClass(this.toThemeProperty("jqx-splitter-splitbar-collapsed")) }, enable: function () { this.disabled = !1, this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")), this.splitBar.removeClass(this.toThemeProperty("jqx-splitter-splitbar-collapsed")), this.splitBarButton.removeClass(this.toThemeProperty("jqx-splitter-splitbar-collapsed")) }, refresh: function (e) { 1 != e && this._arrange() }, propertyChangedHandler: function (t, i, s, r) { "panels" !== i && "orientation" !== i && "showSplitBar" !== i ? ("touchMode" === i && (t._isTouchDevice = r), "disabled" === i ? r ? t.disable() : t.enable() : "theme" === i ? e.jqx.utilities.setTheme(s, r, t.host) : t.refresh()) : t.render() }, _layoutPanels: function () { var e, t, i, s, r = this, o = "horizontal" == this.orientation ? "height" : "width", a = "horizontal" == this.orientation ? "top" : "left", n = parseInt(this._splitBarSize) + 2; this.showSplitBar || (n = 0); var l = this.host[o](), h = l / 100, d = 1 / h, c = d * n, u = this.panel1, p = this.panel2, m = this.panels[0].size; this.panels[0].collapsed && (i = !0), this.panels[1].collapsed && (s = !0), e = this.panels[0].min, -1 != (t = this.panels[1].min).toString().indexOf("%") && (t = parseFloat(t) * h), -1 != e.toString().indexOf("%") && (e = parseFloat(e) * h), this._isNested && this._isTouchDevice && ("horizontal" == this.orientation ? (u.width(this.host.width()), p.width(this.host.width())) : (u.height(this.host.height()), p.height(this.host.height()))); if (i) { g = Math.max(t, l - n); u[o](0), p[o](g) } else if (s) { var g = Math.max(e, l - n); p[o](0), u[o](g) } else if (-1 != m.toString().indexOf("%")) { f = 100 - parseFloat(m); if (u.css(o, parseFloat(m) + "%"), f -= c, p.css(o, f + "%"), (x = p[o]()) < t) { v = (g = x - t) * d; m = parseFloat(m) + parseFloat(v); var f = 100 - parseFloat(m); u.css(o, parseFloat(m) + "%"), f -= c, p.css(o, f + "%") } if (u[o]() < e) { var v = e * d; u.css(o, parseFloat(v) + "%") } } else { var x = l - m - n; u[0].style[o] != m + "px" && u[o](m), p[0].style[o] != x + "px" && p[o](x), x < t && (m += x - t, p[o](t), u[o](m)), m < e && u[o](e) } !function () { var e = r.panel1[o](); if (r.splitBar[0].style[a] != e + "px") { var t = e; "vertical" == r.orientation ? (r.splitBar[0].style.borderLeftColor = "", r.splitBar[0].style.borderRightColor = "", r.splitBarButton[0].style.width = parseInt(r._splitBarSize) + "px", r.splitBarButton[0].style.left = "0px") : (r.splitBar[0].style.borderTopColor = "", r.splitBar[0].style.borderBottomColor = "", r.splitBarButton[0].style.height = parseInt(r._splitBarSize) + "px", r.splitBarButton[0].style.top = "0px"), r._hasBorder && (l - n == e ? "vertical" == r.orientation ? (r.splitBar[0].style.borderRightColor = "transparent", r.splitBarButton[0].style.width = parseInt(r._splitBarSize + 1) + "px") : (r.splitBar[0].style.borderBottomColor = "transparent", r.splitBarButton[0].style.height = parseInt(r._splitBarSize + 1) + "px") : 0 == e && ("vertical" == r.orientation ? (r.splitBar[0].style.borderLeftColor = "transparent", r.splitBarButton[0].style.width = parseInt(r._splitBarSize + 1) + "px", r.splitBarButton[0].style.left = "-1px") : (r.splitBar[0].style.borderTopColor = "transparent", r.splitBarButton[0].style.height = parseInt(r._splitBarSize + 1) + "px", r.splitBarButton[0].style.top = "-1px"))), r.splitBar[0].style[a] = t + "px" } r.panel2[0].style[a] != e + n + "px" && (r.panel2[0].style[a] = e + n + "px") }(), this._raiseEvent(4, { panels: this.panels }) }, destroy: function () { this._removeHandlers(), e.jqx.utilities.resize(this.host, null, !0), this.host.remove() }, _raiseEvent: function (t, i) { var s = new e.Event(this._events[t]); s.owner = this, s.args = i; this.orientation; var r = new Array; return r[0] = {}, r[1] = {}, r[0].size = "vertical" == this.orientation ? this.panel1[0].offsetWidth : this.panel1[0].offsetHeight, r[1].size = "vertical" == this.orientation ? this.panel2[0].offsetWidth : this.panel2[0].offsetHeight, r[0].min = this.panels[0].min, r[1].min = this.panels[1].min, r[0].collapsible = this.panels[0].collapsible, r[1].collapsible = this.panels[1].collapsible, r[0].collapsed = this.panels[0].collapsed, r[1].collapsed = this.panels[1].collapsed, s.args.panels = r, this.host.trigger(s) } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxTabs", "", {}), e.extend(e.jqx._jqxTabs.prototype, { defineInstance: function () { this.scrollAnimationDuration = 200, this.enabledHover = !0, this.disabled = !1, this.collapsible = !1, this.animationType = "none", this.enableScrollAnimation = !0, this.contentTransitionDuration = 450, this.toggleMode = "click", this.selectedItem = 0, this.height = "auto", this.width = "auto", this.position = "top", this.selectionTracker = !1, this.scrollable = !0, this.scrollPosition = "right", this.scrollStep = 70, this.autoHeight = !0, this.headerHeight = null, this.showCloseButtons = !1, this.canCloseAllTabs = !0, this.closeButtonSize = 16, this.arrowButtonSize = 16, this.keyboardNavigation = !0, this.reorder = !1, this.selectionTrackerAnimationDuration = 300, this._isTouchDevice = !1, this.roundedCorners = !0, this._headerExpandingBalance = 0, this._dragStarted = !1, this._tabCaptured = !1, this._lastUnorderedListPosition = 0, this._selectedItem = 0, this._titleList = [], this._contentList = [], this._contentWrapper = null, this._unorderedList = null, this._scrollTimeout = null, this.isCollapsed = !1, this.touchMode = !1, this.initTabContent = null, this.enableDropAnimation = !1, this._currentEvent = null, this._needScroll = !0, this._isAnimated = {}, this._events = ["created", "selected", "add", "removed", "enabled", "disabled", "selecting", "unselecting", "unselected", "dragStart", "dragEnd", "locked", "unlocked", "collapsed", "expanded", "tabclick"], this._initTabContentList = [], this._invalidArgumentExceptions = { invalidScrollAnimationDuration: "The scroll animation duration is not valid!", invalidWidth: "Width you've entered is invalid!", invalidHeight: "Height you've entered is invalid!", invalidAnimationType: "You've entered invalid animation type!", invalidcontentTransitionDuration: "You've entered invalid value for contentTransitionDuration!", invalidToggleMode: "You've entered invalid value for toggleMode!", invalidPosition: "You've entered invalid position!", invalidScrollPosition: "You've entered invalid scroll position!", invalidScrollStep: "You've entered invalid scroll step!", invalidStructure: "Invalid structure!", invalidArrowSize: "Invalid scroll button size!", invalidCloseSize: "Invalid close button size!" }, this.aria = { "aria-disabled": { name: "disabled", type: "boolean" } }, this.rtl = !1 }, createInstance: function () { e.jqx.aria(this), this.host.addClass(this.toThemeProperty("jqx-tabs")), this.host.addClass(this.toThemeProperty("jqx-widget")), this.host.addClass(this.toThemeProperty("jqx-widget-content")), this.host.attr("role", "tablist"), this._unorderedList = this.host.children("ul"), this._titleList = this.host.children("ul").children("li"), this._contentList = this.host.children("div"), this._selectedItem = this.selectedItem, this._isTouchDevice = e.jqx.mobile.isTouchDevice(), this._needScroll = this.scrollable, this.selectionTracker && (this.selectionTracker = this._seletionTrackerBrowserCheck()), this._isTouchDevice && (this.reorder = !1, this.keyboardNavigation = !1); for (var t = this.length() ; t;) t--, this._titleList[t] = e(this._titleList[t]), this._titleList[t].attr("role", "tab"), this._contentList[t] = e(this._contentList[t]), this._contentList[t].attr("role", "tabpanel"); this._validateProperties(), this._refresh(), this._moveSelectionTrack(this._selectedItem, 0), this.disabled && this.disable(), this.element.tabIndex = 0, this._raiseEvent(0), this._enableWindowResize() }, _hiddenParent: function () { var t = this; if ("none" == t.host.css("display")) return !0; var i = !1; return e.each(t.host.parents(), function () { if ("none" == e(this).css("display")) return i = !0, !1 }), i }, _enableWindowResize: function () { var t = this, i = e.jqx.isHidden(t.host); e.jqx.utilities.resize(this.host, function () { i ? (t._uiRefresh(!0), i = !1) : t.refresh() }) }, resize: function (t, i) { this.width = t, this.height = i; var s = e.jqx.isHidden(this.host); s ? (this._uiRefresh(!0), s = !1) : this.refresh() }, refresh: function (e) { 1 == e && void 0 != e || this._performResize() }, _seletionTrackerBrowserCheck: function () { var t = "Browser CodeName: " + navigator.appCodeName; return t += "Browser Name: " + navigator.appName, t += "Browser Version: " + navigator.appVersion, t += "Platform: " + navigator.platform, -1 == (t += "User-agent header: " + navigator.userAgent).indexOf("IEMobile") && (-1 == t.indexOf("Windows Phone OS") && !(e.jqx.browser.msie && e.jqx.browser.version <= 7)) }, render: function () { this._refresh() }, _uiRefresh: function (e) { if (this._unorderedListLeftBackup = this._unorderedList.css("left"), e && this._render(), this._addStyles(), this._performLayout(), this._prepareTabs(), this._removeEventHandlers(), this._addEventHandlers(), "auto" === this._unorderedListLeftBackup && (this._unorderedListLeftBackup = this._getArrowsDisplacement()), this._unorderedList.css("left", this._unorderedListLeftBackup), this.rtl && this.scrollable && this._rightArrow && "hidden" != this._rightArrow.css("visibility")) { var t = 2 * this.arrowButtonSize, i = this.host.width() - parseInt(this._unorderedList.width() + t + +parseInt(this._unorderedList.css("margin-left")), 10); this._unorderedList.css("left", i + "px") } }, _refresh: function () { e.jqx.isHidden(this.host) || this._uiRefresh(!0) }, _addStyles: function () { this._unorderedList.addClass(this.toThemeProperty("jqx-tabs-title-container")), this._unorderedList.css({ outline: "none", "white-space": "nowrap", "margin-top": "0px", "margin-bottom": "0px", padding: "0px", background: "transparent", border: "none", "border-style": "none", "text-indent": "0px" }); for (var e = this.length() ; e;) switch (e--, this._titleList[e].removeClass(), this._titleList[e].css("padding", ""), this._titleList[e].addClass("jqx-reset"), this._titleList[e].addClass("jqx-disableselect"), this._titleList[e].addClass(this.toThemeProperty("jqx-tabs-title")), this._titleList[e].addClass(this.toThemeProperty("jqx-item")), "bottom" == this.position && this._titleList[e].addClass(this.toThemeProperty("jqx-tabs-title-bottom")), this._titleList[e].disabled && (this._titleList[e].addClass(this.toThemeProperty("jqx-tabs-title-disable")), this._titleList[e].addClass(this.toThemeProperty("jqx-fill-state-disabled"))), this._titleList[e].removeClass(this.toThemeProperty("jqx-rc-b")), this._titleList[e].removeClass(this.toThemeProperty("jqx-rc-t")), this._contentList[e].removeClass(this.toThemeProperty("jqx-rc-b")), this._contentList[e].removeClass(this.toThemeProperty("jqx-rc-t")), this.position) { case "top": this._titleList[e].addClass(this.toThemeProperty("jqx-rc-t")), this._contentList[e].addClass(this.toThemeProperty("jqx-rc-b")); break; case "bottom": this._titleList[e].addClass(this.toThemeProperty("jqx-rc-b")), this._contentList[e].addClass(this.toThemeProperty("jqx-rc-t")) } if (this.selectionTracker) switch (this._selectionTracker.removeClass(this.toThemeProperty("jqx-rc-b")), this._selectionTracker.removeClass(this.toThemeProperty("jqx-rc-t")), this.position) { case "top": this._selectionTracker.addClass(this.toThemeProperty("jqx-rc-t")); break; case "bottom": this._selectionTracker.addClass(this.toThemeProperty("jqx-rc-b")) } }, _raiseEvent: function (t, i) { (o = new e.Event(this._events[t])).owner = this, o.args = i, 6 !== t && 7 !== t || (o.cancel = !1, this._currentEvent = o); var s = ""; try { if (s = this.host.trigger(o), 1 == t) { var r = this; if (this.selectionTracker || "none" != this.animationType) setTimeout(function () { r._initTabContentList[r.selectedItem] || r.initTabContent && (r.initTabContent(r.selectedItem), r._initTabContentList[r.selectedItem] = !0); var t = new e.Event("loadContent"); t.owner = this, r._contentList.length > 0 && r._contentList[r.selectedItem] && r._contentList[r.selectedItem].find("div").trigger(t) }, 50 + r.selectionTrackerAnimationDuration); else { o = new e.Event("loadContent"); r._initTabContentList[r.selectedItem] || r.initTabContent && (r.initTabContent(r.selectedItem), r._initTabContentList[r.selectedItem] = !0), o.owner = this; var o = new e.Event("resize"); this.host.trigger(o) } } } catch (e) { } return s }, _getArrowsDisplacement: function () { if (!this._needScroll) return 0; var e = this.arrowButtonSize, t = this.arrowButtonSize; return "left" === this.scrollPosition ? e + t : "both" === this.scrollPosition ? e : 0 }, _scrollRight: function (e, t) { this._unorderedList.stop(), this._unlockAnimation("unorderedList"); var i, s, r = parseInt(this._unorderedList.width() + parseInt(this._unorderedList.css("margin-left")), 10), o = parseInt(this.host.width(), 10), a = parseInt(this._unorderedList.css("left"), 10), n = this._getArrowsDisplacement(), l = 0, h = void 0; this.scrollable ? (i = parseInt(this._leftArrow.outerWidth(), 10), s = parseInt(this._rightArrow.outerWidth(), 10)) : (i = 0, s = 0), e = this.enableScrollAnimation ? e : 0, parseInt(this._headerWrapper.width(), 10) > parseInt(this._unorderedList.css("margin-left")) + parseInt(this._unorderedList.width(), 10) ? l = n : Math.abs(a) + this.scrollStep < Math.abs(o - r) + i + s + n ? (l = a - this.scrollStep, h = a - this.scrollStep + parseInt(this._titleList[this._selectedItem].position().left)) : (l = o - r - (2 * this.arrowButtonSize - n)) < parseInt(this._unorderedList.css("left"), 10) - 4 && l > parseInt(this._unorderedList.css("left"), 10) + 4 && (h = o - r - i - s + parseInt(this._titleList[this._selectedItem].position().left)), this._performScrollAnimation(l, h, e) }, _scrollLeft: function (e, t) { this._unorderedList.stop(), this._unlockAnimation("unorderedList"); var i = parseInt(this._unorderedList.css("left")), s = this._getArrowsDisplacement(), r = 0, o = void 0; e = this.enableScrollAnimation ? e : 0, parseInt(this._headerWrapper.width()) >= parseInt(this._unorderedList.width()) ? r = s : i + this.scrollStep < s ? (r = i + this.scrollStep, o = i + this.scrollStep + parseInt(this._titleList[this._selectedItem].position().left)) : (r = s) < parseInt(this._unorderedList.css("left")) - 4 && r > parseInt(this._unorderedList.css("left")) + 4 && (o = parseInt(this._titleList[this._selectedItem].position().left)), this._performScrollAnimation(r, o, e) }, _performScrollAnimation: function (e, t, i) { var s = this; void 0 !== t && this._moveSelectionTrack(this._selectedItem, 0, t), this._lockAnimation("unorderedList"), this._unorderedList.animate({ left: e }, i, function () { s._moveSelectionTrack(s.selectedItem, 0), s._unlockAnimation("unorderedList") }) }, _addKeyboardHandlers: function () { var t = this; this.keyboardNavigation && this.addHandler(this.host, "keydown", function (i) { if (!t._activeAnimation()) { var s = t._selectedItem, r = t.selectionTracker, o = t.getContentAt(s); if (e(i.target).ischildof(o)) return !0; switch (i.keyCode) { case 37: return t.rtl ? t.next() : t.previous(), !1; case 39: return t.rtl ? t.previous() : t.next(), !1; case 36: return t.first(), !1; case 35: return t.last(), !1; case 27: t._tabCaptured && (t._cancelClick = !0, t._uncapture(null, t.selectedItem), t._tabCaptured = !1) } t.selectionTracker = r } return !0 }) }, _addScrollHandlers: function () { var t = this; this.addHandler(this._leftArrow, "mousedown", function () { t._startScrollRepeat(!0, t.scrollAnimationDuration) }), this.addHandler(this._rightArrow, "mousedown", function () { t._startScrollRepeat(!1, t.scrollAnimationDuration) }), this.addHandler(this._rightArrow, "mouseleave", function () { clearTimeout(t._scrollTimeout) }), this.addHandler(this._leftArrow, "mouseleave", function () { clearTimeout(t._scrollTimeout) }), this.addHandler(e(document), "mouseup.tab" + this.element.id, this._mouseUpScrollDocumentHandler, this), this.addHandler(e(document), "mouseleave.tab" + this.element.id, this._mouseLeaveScrollDocumentHandler, this) }, _mouseLeaveScrollDocumentHandler: function (e) { var t = e.data; t._scrollTimeout && clearTimeout(t._scrollTimeout) }, _mouseUpScrollDocumentHandler: function (e) { var t = e.data; clearTimeout(t._scrollTimeout) }, _mouseUpDragDocumentHandler: function (e) { var t = e.data; t._tabCaptured && t._dragStarted && t._uncapture(e), t._tabCaptured = !1 }, _addReorderHandlers: function () { this.addHandler(e(document), "mousemove.tab" + this.element.id, this._moveElement, this), this.addHandler(e(document), "mouseup.tab" + this.element.id, this._mouseUpDragDocumentHandler, this) }, _addEventHandlers: function () { for (var t = this.length() ; t;) t--, this._addEventListenerAt(t); this.keyboardNavigation && this._addKeyboardHandlers(), this.scrollable && this._addScrollHandlers(), this.reorder && !this._isTouchDevice && this._addReorderHandlers(); var i = this; try { if (("" != document.referrer || window.frameElement) && null != window.top && window.top != window.self) { var s = null; window.parent && document.referrer && (s = document.referrer), s && -1 != s.indexOf(document.location.host) && window.top.document && this.addHandler(e(window.top.document), "mouseup", function (e) { i._tabCaptured && (i._cancelClick = !0, i._uncapture(null, i.selectedItem), i._tabCaptured = !1) }) } } catch (e) { } }, focus: function () { try { this.host.focus() } catch (e) { } }, _getFocusedItem: function (e, t) { for (var i = this.length() ; i;) { i--; var s = this._titleList[i], r = parseInt(s.outerWidth(!0)), o = parseInt(s.offset().left), a = (parseInt(this._unorderedList.offset().left), parseInt(this.host.offset().left), o); if (a <= e && a + r >= e && s !== this._capturedElement && !this._titleList[i].locked && !0 !== this._titleList[i].disabled) return i } return -1 }, _uncapture: function (t) { var i = this.selectionTracker; this._unorderedListLeftBackup = this._unorderedList.css("left"), this._dragStarted = !1, this._tabCaptured = !1; var s = this._indexOf(this._capturedElement); if (this._capturedElement) { switch (this.position) { case "top": this._capturedElement.css("bottom", 0); break; case "bottom": this._capturedElement.css("top", 0) } if (t) var r = this._getFocusedItem(t.clientX, t.clientY); -1 !== r && t ? (this._raiseEvent(10, { item: s, dropIndex: r }), this._reorderItems(r, s)) : this._capturedElement.css("left", 0), e.each(this._titleList, function () { this.css("position", "static") }), this._reorderHeaderElements(), this._unorderedList.css({ position: "relative", top: "0px" }), this._prepareTabs(), -1 !== r && t ? (this._moveSelectionTrack(this._selectedItem, 0), this._addSelectStyle(this._selectedItem, !0)) : (this._selectedItem = s, this._moveSelectionTrack(s, 0), this._addSelectStyle(this._selectedItem, !0)), document.selection && document.selection.clear(), this._unorderedList.css("left", this._unorderedListLeftBackup), this.selectionTracker = i } }, _reorderItems: function (e, t) { var i = this._titleList[this.selectedItem]; this._contentList[t]; void 0 === this._capturedElement && (this._capturedElement = this._titleList[t]), this._titleList[t].remove(), t < e ? this._titleList[t].insertAfter(this._titleList[e]) : this._titleList[t].insertBefore(this._titleList[e]), this._reorderElementArrays(e, t), this._getSelectedItem(i), this._removeEventHandlers(), this._addEventHandlers() }, _reorderElementArrays: function (e, t) { this._titleList[this.selectedItem]; var i = this._contentList[t]; if (t < e) { for (s = t; s <= e; s++) this._titleList[s] = this._titleList[s + 1], this._contentList[s] = this._contentList[s + 1]; this._contentList[e] = i, this._titleList[e] = this._capturedElement } else { for (var s = t; s >= e; s--) this._titleList[s] = this._titleList[s - 1], this._contentList[s] = this._contentList[s - 1]; this._contentList[e] = i, this._titleList[e] = this._capturedElement } }, getSelectedItem: function () { return this.selectedItem }, _getSelectedItem: function (e) { for (var t = this.length() ; t;) if (t--, this._titleList[t] === e) { this._selectedItem = this.selectedItem = t; break } }, _moveElement: function (e, t) { (t = e.data)._tabCaptured && (document.selection && document.selection.clear(), t._dragStarted ? (t._performDrag(e), clearTimeout(t._scrollTimeout)) : (unorderedListLeft = -parseInt(t._unorderedList.css("left"), 10), (e.clientX + unorderedListLeft > t._startX + 3 || e.clientX + unorderedListLeft < t._startX - 3) && (t._prepareTabForDragging(), t._dragStarted = !0))) }, _performDrag: function (e) { var t = this.getZoomFactor(); unorderedListLeft = -parseInt(this._unorderedList.css("left"), 10), this._capturedElement.css("left", unorderedListLeft + e.clientX / t - this._startX / t), this._lastX = e.clientX / t, this._moveSelectionTrack(this.selectedItem, 0) }, getZoomFactor: function () { var e = 1; if (document.body.getBoundingClientRect) { var t = document.body.getBoundingClientRect(), i = t.right - t.left, s = document.body.offsetWidth; e = Math.round(i / s * 100) / 100 } return e }, _prepareTabForDragging: function () { switch (this._capturedElement.css({ position: "relative", left: "0px", top: "0px", "z-index": "300" }), this.selectedItem = this._indexOf(this._capturedElement), this.position) { case "top": this._capturedElement.css("bottom", parseInt(this._capturedElement.css("top"))); break; case "bottom": this._capturedElement.css("top", parseInt(this._capturedElement.css("top"))) } this._raiseEvent(9, { item: this._indexOf(this._capturedElement) }) }, _dragScroll: function (e) { var t = parseInt(this._unorderedList.css("left")), i = this; parseInt(this._capturedElement.css("left")); e.clientX <= this._headerWrapper.offset().left ? (this._scrollLeft(this.scrollAnimationDuration), this._capturedElement.css("left", parseInt(this._capturedElement.css("left")) + this._lastUnorderedListPosition - t)) : e.clientX > this._headerWrapper.offset().left + parseInt(this._headerWrapper.width(), 10) ? (this._scrollRight(this.scrollAnimationDuration), this._capturedElement.css("left", parseInt(this._capturedElement.css("left")) + this._lastUnorderedListPosition - t)) : (this._unorderedList.stop(), this._unlockAnimation("unorderedList"), clearTimeout(this._scrollTimeout)); i = this; this._scrollTimeout = setTimeout(function () { i._dragScroll(e) }, this.scrollAnimationDuration), this._lastUnorderedListPosition = t }, _captureElement: function (e, t) { this._tabCaptured || this._titleList[t].locked || !0 === this._titleList[t].disabled || this._activeAnimation() || (unorderedListLeft = -parseInt(this._unorderedList.css("left"), 10), this._startX = unorderedListLeft + e.clientX, this._startY = e.clientY, this._lastX = e.clientX, this._lastY = e.clientY, this._tabCaptured = !0, this._capturedElement = this._titleList[t]) }, _titleInteractionTrigger: function (e) { this._headerExpandingBalance > 0 && this._removeOppositeBorder(), this._selectedItem !== e ? (this.select(this._titleList[e], "toggle"), this._titleList[e].collapsed = !1, this.collapsible || ("auto" !== this.height ? this._contentWrapper.css("visibility", "visible") : this._contentWrapper.css("display", "block"))) : this.collapsible && (this.isCollapsed ? this.expand() : this.collapse()) }, collapse: function () { var e = this._selectedItem, t = this; this.isCollapsed = !0, "auto" !== t.height ? t._contentWrapper.css("visibility", "hidden") : t._contentWrapper.hide(), t._raiseEvent(13, { item: e }), "top" == this.position ? (t._headerWrapper.addClass(this.toThemeProperty("jqx-tabs-header-collapsed")), t.host.addClass(this.toThemeProperty("jqx-tabs-collapsed"))) : (t._headerWrapper.addClass(this.toThemeProperty("jqx-tabs-header-collapsed-bottom")), t.host.addClass(this.toThemeProperty("jqx-tabs-collapsed-bottom"))) }, expand: function () { var e = this._selectedItem, t = this; this.isCollapsed = !1, this._select(e, t.contentTransitionDuration, null, !1, !0), "auto" !== t.height ? t._contentWrapper.css("visibility", "visible") : t._contentWrapper.show(), t._raiseEvent(14, { item: e }), "top" == this.position ? (t._headerWrapper.removeClass(this.toThemeProperty("jqx-tabs-header-collapsed")), t.host.removeClass(this.toThemeProperty("jqx-tabs-collapsed"))) : (t._headerWrapper.removeClass(this.toThemeProperty("jqx-tabs-header-collapsed-bottom")), t.host.removeClass(this.toThemeProperty("jqx-tabs-collapsed-bottom"))) }, _addSelectHandler: function (e) { var t = this; this.addHandler(this._titleList[e], "selectstart", function (e) { return !1 }), this.addHandler(this._titleList[e], this.toggleMode, function (e) { return function () { return t._raiseEvent("15", { item: e }), t._tabCaptured || t._cancelClick || t._titleInteractionTrigger(e), !0 } }(e)) }, _addDragDropHandlers: function (e) { var t = this; this.addHandler(this._titleList[e], "mousedown", function (i) { return t._captureElement(i, e), !1 }), this.addHandler(this._titleList[e], "mouseup", function (i) { return t._tabCaptured && t._dragStarted ? (t._cancelClick = !0, t._uncapture(i, e)) : t._cancelClick = !1, t._tabCaptured = !1, !1 }) }, _removeHoverStates: function () { var t = this; e.each(this._titleList, function () { this.removeClass(t.toThemeProperty("jqx-tabs-title-hover-top")), this.removeClass(t.toThemeProperty("jqx-tabs-title-hover-bottom")) }) }, _addHoverHandlers: function (e) { var t = this, i = this._titleList[e]; this.addHandler(i, "mouseenter", function (s) { e != t._selectedItem && ("top" == t.position ? i.addClass(t.toThemeProperty("jqx-tabs-title-hover-top")) : i.addClass(t.toThemeProperty("jqx-tabs-title-hover-bottom")), i.addClass(t.toThemeProperty("jqx-fill-state-hover")), t.showCloseButtons && i.children(0).children(t.toThemeProperty(".jqx-tabs-close-button", !0)).addClass(t.toThemeProperty("jqx-tabs-close-button-hover", !0))) }), this.addHandler(i, "mouseleave", function (s) { e != t._selectedItem && ("top" == t.position ? i.removeClass(t.toThemeProperty("jqx-tabs-title-hover-top")) : i.removeClass(t.toThemeProperty("jqx-tabs-title-hover-bottom")), i.removeClass(t.toThemeProperty("jqx-fill-state-hover")), t.showCloseButtons && i.children(0).children(t.toThemeProperty(".jqx-tabs-close-button", !0)).removeClass(t.toThemeProperty("jqx-tabs-close-button-hover", !0))) }) }, _addEventListenerAt: function (e) { var t = this; if (!this._titleList[e].disabled) { this.reorder && !this._isTouchDevice && this._addDragDropHandlers(e), this._addSelectHandler(e), this.enabledHover && this._addHoverHandlers(e); var i = this._titleList[e].find(this.toThemeProperty(".jqx-tabs-close-button", !0)); this.removeHandler(i, "click"), this.addHandler(i, "click", function (i) { return t.removeAt(e), !1 }) } }, _removeEventHandlers: function () { for (var t = this.length() ; t;) t--, this._removeEventListenerAt(t); this.scrollable && (this.removeHandler(this._leftArrow, "mousedown"), this.removeHandler(this._rightArrow, "mousedown")), this.removeHandler(e(document), "mousemove.tab" + this.element.id, this._moveElement), this.removeHandler(e(document), "mouseup.tab" + this.element.id, this._mouseUpScrollDocumentHandler), this.removeHandler(e(document), "mouseup.tab" + this.element.id, this._mouseUpDragDocumentHandler), this.removeHandler(this.host, "keydown") }, _removeEventListenerAt: function (e) { this.removeHandler(this._titleList[e], this.toggleMode), this.removeHandler(this._titleList[e], "mouseenter"), this.removeHandler(this._titleList[e], "mouseleave"), this.removeHandler(this._titleList[e], "mousedown"), this.removeHandler(this._titleList[e], "mouseup"); var t = this._titleList[e].children(0).children(this.toThemeProperty(".jqx-tabs-close-button", !0)); this.removeHandler(t, "click") }, _moveSelectionTrack: function (e, t, i) { var s = this; if (-1 != e && 0 != this._titleList.length && !(e >= this._titleList.length) && this.selectionTracker && this._selectionTracker) { if (this._selectionTracker.stop(), this._unlockAnimation("selectionTracker"), void 0 === i) { r = parseInt(this._titleList[e].position().left); isNaN(parseInt(this._unorderedList.css("left"))) || (r += parseInt(this._unorderedList.css("left"))), isNaN(parseInt(this._unorderedList.css("margin-left"))) || (r += parseInt(this._unorderedList.css("margin-left"))), isNaN(parseInt(this._titleList[e].css("margin-left"))) || (r += parseInt(this._titleList[e].css("margin-left"))), isNaN(parseInt(this._titleList[e].css("margin-right"))) } else var r = i; var o = 0; "top" === this.position && (parseInt(this._headerWrapper.height()) - parseInt(this._titleList[e].outerHeight()), this.autoHeight || (o += parseInt(this._titleList[e].css("margin-top")))), this._lockAnimation("selectionTracker"); var a = parseInt(this._titleList[e].css("padding-left")) + parseInt(this._titleList[e].css("padding-right")), n = "top" == this.position ? 0 : 1, l = parseInt(this._headerWrapper.css("padding-top")), h = parseInt(this._titleList[e].css("padding-top")) + parseInt(this._titleList[e].css("padding-bottom")); this._selectionTracker.css("visibility", "visible"), this._moveSelectionTrackerContainer.css("visibility", "visible"); var d = parseInt(this._titleList[e].css("margin-top")); isNaN(d) && (d = 0), this._selectionTracker.animate({ top: l + d - n, left: r + "px", height: parseInt(this._titleList[e].height() + h), width: this._titleList[e].width() + a }, t, function () { s._unlockAnimation("selectionTracker"), s._selectionTracker.css("visibility", "hidden"), s._addSelectStyle(e, !0), s._moveSelectionTrackerContainer.css("visibility", "hidden") }) } }, destroy: function () { e.jqx.utilities.resize(this.host, null, !0), this.host.remove() }, _switchTabs: function (e, t) { if (e !== t && !this._activeAnimation() && !this._tabCaptured) { var i = this; return this._raiseEvent(7, { item: t }), this._raiseEvent(6, { item: e }), this._currentEvent && this._currentEvent.cancel ? void (this._currentEvent = null) : (this._unselect(t, null, !0), this._select(e, i.contentTransitionDuration, null, !0), !0) } return !1 }, _activeAnimation: function () { for (child in this._isAnimated) if (this._isAnimated.hasOwnProperty(child) && this._isAnimated[child]) return !0; return !1 }, _indexOf: function (e) { for (var t = this.length() ; t;) if (t--, this._titleList[t][0] === e[0] || this._contentList[t][0] === e[0]) return t; return -1 }, _validateProperties: function () { try { if (this.scrollAnimationDuration < 0 || isNaN(this.scrollAnimationDuration)) throw new Error(this._invalidArgumentExceptions.invalidScrollAnimationDuration); if (parseInt(this.width) < 0 && "auto" !== this.width) throw new Error(this._invalidArgumentExceptions.invalidWidth); if (parseInt(this.height) < 0 && "auto" !== this.height) throw new Error(this._invalidArgumentExceptions.invalidHeight); if ("none" !== this.animationType && "fade" !== this.animationType) throw new Error(this._invalidArgumentExceptions.invalidAnimationType); if (this.contentTransitionDuration < 0 || isNaN(this.contentTransitionDuration)) throw new Error(this._invalidArgumentExceptions.invalidcontentTransitionDuration); if ("click" !== this.toggleMode && "dblclick" !== this.toggleMode && "mouseenter" !== this.toggleMode && "none" !== this.toggleMode) throw new Error(this._invalidArgumentExceptions.invalidToggleMode); if ("top" !== this.position && "bottom" !== this.position) throw new Error(this._invalidArgumentExceptions.invalidPosition); if ("left" !== this.scrollPosition && "right" !== this.scrollPosition && "both" !== this.scrollPosition) throw new Error(this._invalidArgumentExceptions.invalidScrollPosition); if (this.scrollStep < 0 || isNaN(this.scrollStep)) throw new Error(this._invalidArgumentExceptions.invalidScrollStep); if (this._titleList.length !== this._contentList.length || 0 == this._titleList.length) throw new Error(this._invalidArgumentExceptions.invalidStructure); if (this.arrowButtonSize < 0 || isNaN(this.arrowButtonSize)) throw new Error(this._invalidArgumentExceptions.invalidArrowSize); if (this.closeButtonSize < 0 || isNaN(this.closeButtonSize)) throw new Error(this._invalidArgumentExceptions.invalidCloseSize) } catch (e) { alert(e) } }, _startScrollRepeat: function (e, t) { var i = this; e ? this._scrollLeft(t) : this._scrollRight(t), this._scrollTimeout && clearTimeout(this._scrollTimeout), this._scrollTimeout = setTimeout(function () { i._startScrollRepeat(e, i.scrollAnimationDuration) }, t) }, _performLayout: function () { for (var e = this.length() ; e;) e--, "top" !== this.position && "bottom" !== this.position || (this.rtl ? this._titleList[e].css("float", "right") : this._titleList[e].css("float", "left")); this._fitToSize(), this._performHeaderLayout(), this._fitToSize() }, updatetabsheader: function () { this._performHeaderLayout() }, _performResize: function () { this._fitToSize(), this._positionArrows(this._totalItemsWidth), this._totalItemsWidth > this.element.offsetWidth ? this._unorderedList.width(this._totalItemsWidth) : this._unorderedList[0].style.width = this.element.offsetWidth - 2 + "px", this._fitToSize() }, _addArrows: function () { this._leftArrow && this._rightArrow && (this._leftArrow.remove(), this._rightArrow.remove()), this._leftArrow = e('<div><span style="display: block; width: 16px; height: 16px;" class="' + this.toThemeProperty("jqx-tabs-arrow-left") + '"></span></div>'), this._rightArrow = e('<div><span style="display: block; width: 16px; height: 16px;" class="' + this.toThemeProperty("jqx-tabs-arrow-right") + '"></span></div>'), this._leftArrow.addClass(this.toThemeProperty("jqx-tabs-arrow-background")), this._rightArrow.addClass(this.toThemeProperty("jqx-tabs-arrow-background")), this._leftArrow.addClass(this.toThemeProperty("jqx-widget-header")), this._rightArrow.addClass(this.toThemeProperty("jqx-widget-header")), this._headerWrapper.append(this._leftArrow), this._headerWrapper.append(this._rightArrow), this._leftArrow.width(this.arrowButtonSize), this._leftArrow.height("100%"), this._rightArrow.width(this.arrowButtonSize), this._rightArrow.height("100%"), this._leftArrow.css({ "z-index": "30" }), this._rightArrow.css({ "z-index": "30" }), this._leftArrow.css("display", "none"), this._rightArrow.css("display", "none") }, _tabsWithVisibleCloseButtons: function () { if (!this.showCloseButtons) return 0; var t = this.length(); return e.each(this._titleList, function () { var e = this.attr("hasclosebutton"); void 0 != e && null != e && ("false" != e && 0 != e || t--) }), t }, _calculateTitlesSize: function () { var t = 0, i = 0, s = this.length(); for (this.rtl && e.jqx.browser.msie && e.jqx.browser.version < 8 && (this._measureItem = e("<span style='position: relative; visibility: hidden;'></span>"), e(document.body).append(this._measureItem)) ; s;) { if (s--, this._measureItem && (this._measureItem.html(this._titleList[s].html()), this._titleList[s].width(this._measureItem.width())), this._titleList[s].css("position", "static"), this._titleList[s].find(this.toThemeProperty(".jqx-tabs-close-button", !0)).css("display", "none"), i += parseInt(this._titleList[s].outerWidth(!0)), t < this._titleList[s].outerHeight(!0) && (t = Math.round(parseInt(this._titleList[s].outerHeight(!0)))), 0 == this._titleList[s].height()) { var r = this._titleList[s].clone(); e(document.body).append(r), t = Math.round(parseInt(r.outerHeight(!0))), r.remove() } var o = this._titleList[s].attr("hasCloseButton"); if (void 0 != o && null != o) { a = !1; this.hiddenCloseButtons && 1 == this.hiddenCloseButtons[s] && (this._titleList[s].find(this.toThemeProperty(".jqx-tabs-close-button", !0)).css("display", "none"), a = !0), a || ("true" == o || 1 == o ? (i += this.closeButtonSize, this._titleList[s].find(this.toThemeProperty(".jqx-tabs-close-button", !0)).css("display", "block")) : "false" != o && 0 != o || this._titleList[s].find(this.toThemeProperty(".jqx-tabs-close-button", !0)).css("display", "none")) } else if (this.showCloseButtons && (this.canCloseAllTabs || this._tabsWithVisibleCloseButtons() > 1)) { var a = !1; this.hiddenCloseButtons && 1 == this.hiddenCloseButtons[s] && (this._titleList[s].find(this.toThemeProperty(".jqx-tabs-close-button", !0)).css("display", "none"), a = !0), a || (i += this.closeButtonSize, this._titleList[s].find(this.toThemeProperty(".jqx-tabs-close-button", !0)).css("display", "block")) } this._titleList[s].height(this._titleList[s].height()) } return this._measureItem && this._measureItem.remove(), { height: t, width: 10 + i } }, _reorderHeaderElements: function () { if (this.selectionTracker && this._moveSelectionTrackerContainer.css({ position: "absolute", height: "100%", top: "0px", left: "0px", width: "100%" }), this._headerWrapper.css({ position: "relative", left: "0px", top: "0px" }), this.scrollable) { this._rightArrow.css({ width: this.arrowButtonSize, position: "absolute", top: "0px" }), this._leftArrow.css({ width: this.arrowButtonSize, position: "absolute", top: "0px" }); var e = this.theme && -1 != this.theme.indexOf("ui-") ? 3 : 0; e > 0 && (this._rightArrow.addClass(this.toThemeProperty("jqx-rc-r")), this._leftArrow.addClass(this.toThemeProperty("jqx-rc-l"))); var t = this.scrollPosition; switch (this.rtl && ("left" == t && (t = "right"), "right" == t && (t = "left")), t) { case "both": this._rightArrow.css("right", "0px"), this._leftArrow.css("left", "0px"); break; case "left": this._rightArrow.css("left", this.arrowButtonSize + "px"), this._leftArrow.css("left", "0px"); break; case "right": this._rightArrow.css("right", -e + "px"), this._leftArrow.css("right", this.arrowButtonSize - e + "px") } } }, _positionArrows: function (e) { e >= parseInt(this._headerWrapper[0].offsetWidth) && this.scrollable ? (this._needScroll = !0, 0 === this._unorderedList.position().left && (this._unorderedListLeftBackup = this._getArrowsDisplacement() + "px"), this._leftArrow.css("display", "block"), this._rightArrow.css("display", "block")) : (this._needScroll = !1, this._leftArrow[0].style.display = "none", this._rightArrow[0].style.display = "none", this._unorderedList[0].style.left = "0px") }, _performHeaderLayout: function () { this._removeSelectStyle(); var t = this._calculateTitlesSize(), i = t.height, s = t.width; this._headerWrapper.height(i), this._unorderedList.height(i), null != this.headerHeight && "auto" != this.headerHeight && (this._headerWrapper.height(this.headerHeight), this._unorderedList.height(this.headerHeight)), s > this.host.width() ? this._unorderedList.width(s) : this._unorderedList.width(this.host.width()), e.jqx.browser.msie && e.jqx.browser.version < 8 && (this._unorderedList.css("position", "relative"), this._headerWrapper.css("overflow", "hidden")), this._reorderHeaderElements(), s += parseInt(this._unorderedList.css("margin-left")), this._totalItemsWidth = s, this._positionArrows(s), this._unorderedList.css({ position: "relative", top: "0px" }), this._verticalAlignElements(), this._moveSelectionTrack(this._selectedItem, 0), this._addSelectStyle(this.selectedItem) }, _verticalAlignElements: function () { var e = this.length(); for (this._maxHeightTab() ; e;) { e--; var t = this._titleList[e].find(".jqx-tabs-titleContentWrapper"), i = (t.height(), this._titleList[e].find(this.toThemeProperty(".jqx-tabs-close-button", !0))), s = parseInt(this._titleList[e].css("padding-top")); if (s || (s = 0), this.autoHeight) { this._titleList[e].outerHeight(!0), this._titleList[e].height(); var r = parseInt(this._titleList[e].css("padding-top")), o = parseInt(this._titleList[e].css("padding-bottom")), a = parseInt(this._titleList[e].css("border-top-width")), n = parseInt(this._titleList[e].css("border-bottom-width")); this._titleList[e].height(this._unorderedList.outerHeight() - r - o - a - n) } else if ("top" === this.position) { var l = parseInt(this._unorderedList.height()) - parseInt(this._titleList[e].outerHeight(!0)); parseInt(this._titleList[e].css("margin-top")) !== l && 0 !== l && this._titleList[e].css("margin-top", l) } else this._titleList[e].height(this._titleList[e].height()); this._titleList[e].children(0).height("100%"); var h = parseInt(this._titleList[e].height()), d = parseInt(h) / 2 - parseInt(i.height()) / 2; i.css("margin-top", 1 + d); var c = parseInt(h) / 2 - parseInt(t.height()) / 2; t.css("margin-top", c) } if (this.scrollable) { var u = (parseInt(this._headerWrapper.outerHeight()) - this.arrowButtonSize) / 2; this._rightArrow.children(0).css("margin-top", u), this._rightArrow.height("100%"), this._leftArrow.height("100%"), this._leftArrow.children(0).css("margin-top", u) } }, _getImageUrl: function (e) { var t = e.css("background-image"); return t = t.replace('url("', ""), t = t.replace('")', ""), t = t.replace("url(", ""), t = t.replace(")", "") }, _fitToSize: function () { var e = !1, t = !1, i = this; if (null != i.width && -1 != i.width.toString().indexOf("%") && (e = !0), null != i.height && -1 != i.height.toString().indexOf("%") && (t = !0), e && (this.host[0].style.width = this.width, this._contentWrapper[0].style.width = "100%"), t) { this.host[0].style.height = this.height, this._contentWrapper[0].style.width = "100%", this._contentWrapper[0].style.height = "auto"; s = this.element.offsetHeight - this._headerWrapper[0].offsetHeight; this._contentWrapper[0].style.height = s + "px" } if (e || (this.host.width(this.width), "auto" != this.width && this._contentWrapper.css("width", "100%")), !t) if ("auto" !== this.height) { this.host.height(this.height); var s = this.host.height() - this._headerWrapper.outerHeight(); this._contentWrapper.height(s) } else this._contentWrapper.css("height", "auto") }, _maxHeightTab: function () { for (var e = this.length(), t = -1; e;) e--, -1 < parseInt(this._titleList[e].outerHeight(!0)) && (t = e); return t }, _addSelectionTracker: function () { this._moveSelectionTrackerContainer && this._moveSelectionTrackerContainer.remove(), this._moveSelectionTrackerContainer = e('<div class="' + this.toThemeProperty("jqx-tabs-selection-tracker-container") + '">'); var t = this.toThemeProperty("jqx-tabs-selection-tracker-" + this.position); this._selectionTracker = e('<div class="' + t + '">'), this._selectionTracker.css("color", "inherit"), this._moveSelectionTrackerContainer.append(this._selectionTracker), this._headerWrapper.append(this._moveSelectionTrackerContainer), this._selectionTracker.css({ position: "absolute", "z-index": "10", left: "0px", top: "0px", display: "inline-block" }) }, _addContentWrapper: function () { var t = void 0 == this._contentWrapper; this._contentWrapper = this._contentWrapper || e('<div class="' + this.toThemeProperty("jqx-tabs-content") + '" style="float:none;">'), this._contentWrapper.addClass(this.toThemeProperty("jqx-widget-content")); for (var i = this.length() ; i;) i--, this._contentList[i].addClass(this.toThemeProperty("jqx-tabs-content-element")); t && (this.host.find(".jqx-tabs-content-element").wrapAll(this._contentWrapper), this._contentWrapper = this.host.find(".jqx-tabs-content")), this.roundedCorners && ("top" == this.position ? this._contentWrapper.addClass(this.toThemeProperty("jqx-rc-b")) : this._contentWrapper.addClass(this.toThemeProperty("jqx-rc-t")), this.host.addClass(this.toThemeProperty("jqx-rc-all"))) }, _addHeaderWrappers: function () { var t = this.length(); for (this._unorderedList.remove(), this._headerWrapper = this._headerWrapper || e('<div class="jqx-tabs-headerWrapper" style="outline: none;">'), this._headerWrapper.remove(), "top" == this.position ? this._headerWrapper.prependTo(this.host) : this._headerWrapper.appendTo(this.host), this._unorderedList.appendTo(this._headerWrapper), this._headerWrapper.addClass(this.toThemeProperty("jqx-tabs-header")), this._headerWrapper.addClass(this.toThemeProperty("jqx-widget-header")), "bottom" == this.position ? this._headerWrapper.addClass(this.toThemeProperty("jqx-tabs-header-bottom")) : this._headerWrapper.removeClass(this.toThemeProperty("jqx-tabs-header-bottom")), this.roundedCorners && ("top" == this.position ? (this._headerWrapper.addClass(this.toThemeProperty("jqx-rc-t")), this._headerWrapper.removeClass(this.toThemeProperty("jqx-rc-b"))) : (this._headerWrapper.removeClass(this.toThemeProperty("jqx-rc-t")), this._headerWrapper.addClass(this.toThemeProperty("jqx-rc-b")))) ; t;) { if (t--, this._titleList[t].children(".jqx-tabs-titleWrapper").length <= 0) { var i = e('<div class="jqx-tabs-titleWrapper" style="outline: none; position: relative;">'); i.append(this._titleList[t].html()), this._titleList[t].empty(), i.appendTo(this._titleList[t]) } this._titleList[t].children(".jqx-tabs-titleWrapper").css("z-index", "15") } }, _render: function () { this._addCloseButtons(), this._addHeaderWrappers(), this._addContentWrapper(), this.selectionTracker && this._addSelectionTracker(), this._addArrows() }, _addCloseButton: function (t) { var i = t; if (this._titleList[i].find(this.toThemeProperty(".jqx-tabs-close-button", !0)).length <= 0 && this._titleList[i].find(".jqx-tabs-titleContentWrapper").length <= 0) { var s = e('<div class="jqx-tabs-titleContentWrapper"></div>'), r = "left"; this.rtl && (r = "right"), s.css("float", r), s.addClass("jqx-disableselect"), s.append(this._titleList[i].html()), this._titleList[i].html(""); var o = e('<div class="' + this.toThemeProperty("jqx-tabs-close-button") + '"></div>'); o.css({ height: this.closeButtonSize, width: this.closeButtonSize, float: r, "font-size": "1px" }); this._titleList[i].append(s), this._titleList[i].append(o), this.showCloseButtons ? this.hiddenCloseButtons && 1 == this.hiddenCloseButtons[t] && o.css("display", "none") : o.css("display", "none") } }, _addCloseButtons: function () { for (var e = this.length() ; e;) e--, this._addCloseButton(e) }, _prepareTabs: function () { var e = this.length(), t = this.selectionTracker; for (this.selectionTracker = !1; e;) e--, this._selectedItem !== e && this._unselect(e, null, !1); this._select(this._selectedItem, 0, null, !1), this.selectionTracker = t, this.initTabContent && (this._initTabContentList[this.selectedItem] || this._hiddenParent() || (this.initTabContent(this.selectedItem), this._initTabContentList[this.selectedItem] = !0)) }, _isValidIndex: function (e) { return e >= 0 && e < this.length() }, _removeSelectStyle: function () { for (var e = this.length() ; e;) { e--; this.showCloseButtons && this._titleList[e].children(0).children(this.toThemeProperty(".jqx-tabs-close-button", !0)).removeClass(this.toThemeProperty("jqx-tabs-close-button-selected")), "top" == this.position ? this._titleList[e].removeClass(this.toThemeProperty("jqx-tabs-title-selected-top")) : this._titleList[e].removeClass(this.toThemeProperty("jqx-tabs-title-selected-bottom")), this._titleList[e].removeClass(this.toThemeProperty("jqx-fill-state-pressed")) } }, _addSelectStyle: function (e, t) { this.length(); if (this._removeSelectStyle(), (!this.selectionTracker || void 0 != t && t) && e >= 0 && void 0 != this._titleList[e]) { i = null; if (this.showCloseButtons) { var i = this._titleList[e].children(0).children(this.toThemeProperty(".jqx-tabs-close-button", !0)); this.hiddenCloseButtons && 1 == this.hiddenCloseButtons[e] && (i = null) } this._titleList[e].removeClass(this.toThemeProperty("jqx-fill-state-hover")), "top" == this.position ? (this._titleList[e].removeClass(this.toThemeProperty("jqx-tabs-title-hover-top")), this._titleList[e].addClass(this.toThemeProperty("jqx-tabs-title-selected-top"))) : (this._titleList[e].removeClass(this.toThemeProperty("jqx-tabs-title-hover-bottom")), this._titleList[e].addClass(this.toThemeProperty("jqx-tabs-title-selected-bottom"))), this._titleList[e].addClass(this.toThemeProperty("jqx-fill-state-pressed")), null != i && i.addClass(this.toThemeProperty("jqx-tabs-close-button-selected")) } }, _addItemTo: function (e, t, i) { if (t < e.length) { for (var s = void 0, r = void 0, o = t; o + 1 < e.length; o++) void 0 === s ? (s = e[o + 1], e[o + 1] = e[o]) : (r = e[o + 1], e[o + 1] = s, s = r); void 0 === s && (s = e[t]), e[t] = i, e.push(s) } else e.push(i) }, _select: function (t, i, s, r, o) { if (!this._tabCaptured) { this.host.attr("hideFocus", "true"); var a = this; if (void 0 == o ? this._addSelectStyle(t) : this._addSelectStyle(t, o), this.isCollapsed && this.collapsible) return this._contentList[t].css("display", "none"), void this._selectCallback(t, s, r); switch (this.animationType) { case "none": if (a.selectionTracker) setTimeout(function () { a._contentList[t].css("display", "block"), e.jqx.aria(a._titleList[t], "aria-selected", !0), e.jqx.aria(a._contentList[t], "aria-hidden", !1), e.jqx.aria(a, "aria-activedescendant", a._titleList[t][0].id) }, this.selectionTrackerAnimationDuration); else { for (var n = 0; n < this._contentList.length; n++) t != n && "block" == this._contentList[n].css("display") && (this._contentList[n].css("display", "none"), e.jqx.aria(this._titleList[n], "aria-selected", !1), e.jqx.aria(this._contentList[n], "aria-hidden", !0)); this._contentList[t].css("display", "block"), e.jqx.aria(this._titleList[t], "aria-selected", !0), e.jqx.aria(this._contentList[t], "aria-hidden", !1), e.jqx.aria(this, "aria-activedescendant", this._titleList[t][0].id) } this._selectCallback(t, s, r); break; case "fade": this._lockAnimation("contentListSelect"), a._selectCallback(t, s, r), this._contentList[t].fadeIn(i, function () { a._unlockAnimation("contentListSelect"), e.jqx.aria(a._titleList[t], "aria-selected", !0), e.jqx.aria(a._contentList[t], "aria-hidden", !1), e.jqx.aria(a, "aria-activedescendant", a._titleList[t][0].id) }) } } }, _selectCallback: function (e, t, i) { this._selectedItem = e, this.selectedItem = this._selectedItem, t && t(), i && this._raiseEvent(1, { item: e }) }, _unselect: function (t, i, s) { if (t >= 0 && !this._tabCaptured) { var r = this; this._contentList[t].stop(), "fade" == this.animationType ? (this._contentList[t].css("display", "none"), e.jqx.aria(r._titleList[t], "aria-selected", !1), e.jqx.aria(r._contentList[t], "aria-hidden", !0)) : this.selectionTracker ? setTimeout(function () { r._contentList[t].css("display", "none"), e.jqx.aria(r._titleList[t], "aria-selected", !1), e.jqx.aria(r._contentList[t], "aria-hidden", !0) }, this.selectionTrackerAnimationDuration) : (this._contentList[t].css("display", "none"), e.jqx.aria(r._titleList[t], "aria-selected", !1), e.jqx.aria(r._contentList[t], "aria-hidden", !0)), this._unselectCallback(t, i, s), this.selectionTracker || (this._titleList[t].removeClass(this.toThemeProperty("jqx-tabs-title-selected")), this._titleList[t].removeClass(this.toThemeProperty("jqx-fill-state-pressed"))) } }, _unselectCallback: function (e, t, i) { i && this._raiseEvent(8, { item: e }), t && t() }, disable: function () { for (var e = this.length() ; e;) e--, this.disableAt(e) }, enable: function () { for (var e = this.length() ; e;) e--, this.enableAt(e) }, getEnabledTabsCount: function () { var t = 0; return e.each(this._titleList, function () { this.disabled || t++ }), t }, getDisabledTabsCount: function () { var t = 0; return e.each(this._titleList, function () { this.disabled && t++ }), t }, removeAt: function (e) { if (this._isValidIndex(e) && (this.canCloseAllTabs || this.length() > 1)) { this._removeHoverStates(); var t = this, i = (this._titleList[this._selectedItem], parseInt(this._titleList[e].outerWidth(!0))), s = this.getTitleAt(e); this._unorderedList.width(parseInt(this._unorderedList.width()) - i), this._titleList[e].remove(), this._contentList[e].remove(); if (this._titleList.splice(e, 1), this._contentList.splice(e, 1), this._addStyles(), this._performHeaderLayout(), this._removeEventHandlers(), this._addEventHandlers(), this._raiseEvent(3, { item: e, title: s }), this._isAnimated = {}, this.selectedItem > 0) { this._selectedItem = -1; r = this._getPreviousIndex(this.selectedItem); this.select(r) } else { this._selectedItem = -1; var r = this._getNextIndex(this.selectedItem); this.select(r) } if (parseInt(this._unorderedList.css("left")) > this._getArrowsDisplacement() && this._unorderedList.css("left", this._getArrowsDisplacement()), parseInt(this._unorderedList.width()) <= parseInt(this._headerWrapper.width())) { var o = this.enableScrollAnimation ? this.scrollAnimationDuration : 0; this._lockAnimation("unorderedList"), this._unorderedList.animate({ left: 0 }, o, function () { t._unlockAnimation("unorderedList") }) } } }, removeFirst: function () { this.removeAt(0) }, removeLast: function () { this.removeAt(this.length() - 1) }, disableAt: function (e) { if (!this._titleList[e].disabled || void 0 === this._titleList[e].disabled) { if (this.selectedItem == e) { var t = this.next(); t || (t = this.previous()) } this._titleList[e].disabled = !0, this.removeHandler(this._titleList[e], this.toggleMode), this.enabledHover && this._titleList[e].off("mouseenter").off("mouseleave"), this._removeEventListenerAt(e), this._titleList[e].addClass(this.toThemeProperty("jqx-tabs-title-disable")), this._titleList[e].addClass(this.toThemeProperty("jqx-fill-state-disabled")), this._raiseEvent(5, { item: e }) } }, enableAt: function (e) { this._titleList[e].disabled && (this._titleList[e].disabled = !1, this._addEventListenerAt(e), this._titleList[e].removeClass(this.toThemeProperty("jqx-tabs-title-disable")), this._titleList[e].removeClass(this.toThemeProperty("jqx-fill-state-disabled")), this._raiseEvent(4, { item: e })) }, addAt: function (t, i, s) { if (t >= 0 || t <= this.length()) { this._removeHoverStates(); var r = e("<li>" + i + "</li>"), o = e("<div>" + s + "</div>"); r.addClass(this.toThemeProperty("jqx-tabs-title")), r.addClass(this.toThemeProperty("jqx-item")), o.addClass(this.toThemeProperty("jqx-tabs-content-element")), "bottom" == this.position && r.addClass(this.toThemeProperty("jqx-tabs-title-bottom")); 0 == this._titleList.length ? this._unorderedList.append(r) : t < this.length() && t >= 0 ? this._titleList[t].before(r) : this._titleList[this.length() - 1].after(r), o.appendTo(this._contentWrapper), this._addItemTo(this._titleList, t, r), this._addItemTo(this._contentList, t, o), this._selectedItem > t && this._selectedItem++, this._switchTabs(t, this._selectedItem), this._selectedItem = t, this.showCloseButtons && this._titleList.length > 0 && this._addCloseButton(t), this._uiRefresh(!1), this._raiseEvent(2, { item: t }), this._moveSelectionTrack(this._selectedItem, 0) } }, addFirst: function (e, t) { this.addAt(0, e, t) }, addLast: function (e, t) { this.addAt(this.length(), e, t) }, val: function (e) { return 0 == arguments.length || "object" == typeof e ? this._selectedItem : (this.select(e), this._selectedItem) }, select: function (e, t) { "object" == typeof e && (e = this._indexOf(e)); var i = !(e >= 0 && e < this._titleList.length) || this._titleList[e].attr("canselect"); void 0 != i && "true" != i && 1 != i || e !== this._selectedItem && this._isValidIndex(e) && (this._activeAnimation() || this._titleList[e].disabled || this._switchTabs(e, this._selectedItem) && this.ensureVisible(e)) }, previous: function (e) { var t = this._selectedItem; for (void 0 == e || isNaN(e) || (t = e) ; t > 0 && t < this._titleList.length;) if (t--, !this._titleList[t].disabled) return this.select(t), !0; return !1 }, _getPreviousIndex: function (e) { if (void 0 == e || isNaN(e)) return 0; for (var t = e; e > 0 && e <= this._titleList.length;) if (e--, !this._titleList[e].disabled) return e; return t }, _getNextIndex: function (e) { if (void 0 == e || isNaN(e)) return 0; for (var t = e; e >= 0 && e < this._titleList.length;) { if (!this._titleList[e].disabled) return e; e++ } return t }, next: function (e) { var t = this._selectedItem; for (void 0 == e || isNaN(e) || (t = e) ; t >= 0 && t < this._titleList.length - 1;) if (t++, !this._titleList[t].disabled) return this.select(t), !0; return !1 }, first: function () { this._titleList[0].disabled ? this.next(0) : this.select(0) }, last: function () { var e = this._titleList.length - 1; this._titleList[e].disabled ? this.previous(e) : this.select(e) }, length: function () { return this._titleList.length }, lockAt: function (e) { !this._isValidIndex(e) || this._titleList[e].locked && void 0 !== this._titleList[e].locked || (this._titleList[e].locked = !0, this._raiseEvent(11, { item: e })) }, unlockAt: function (e) { this._isValidIndex(e) && this._titleList[e].locked && (this._titleList[e].locked = !1, this._raiseEvent(12, { item: e })) }, lockAll: function () { for (var e = this.length() ; e;) e--, this.lockAt(e) }, unlockAll: function () { for (var e = this.length() ; e;) e--, this.unlockAt(e) }, showCloseButtonAt: function (e) { this._isValidIndex(e) && (this.showCloseButtons || (this.showCloseButtons = !0, this.updatetabsheader()), this._titleList[e].find(this.toThemeProperty(".jqx-tabs-close-button", !0)).css("display", "block"), this.hiddenCloseButtons || (this.hiddenCloseButtons = new Array), this.hiddenCloseButtons[e] = 0) }, hideCloseButtonAt: function (e) { this._isValidIndex(e) && (this._titleList[e].find(this.toThemeProperty(".jqx-tabs-close-button", !0)).css("display", "none"), this.hiddenCloseButtons || (this.hiddenCloseButtons = new Array), this.hiddenCloseButtons[e] = 1) }, hideAllCloseButtons: function () { for (var e = this.length() ; e;) e--, this.hideCloseButtonAt(e) }, showAllCloseButtons: function () { for (var e = this.length() ; e;) e--, this.showCloseButtonAt(e) }, getTitleAt: function (e) { return this._titleList[e] ? this._titleList[e].text() : null }, getContentAt: function (e) { return this._contentList[e] ? this._contentList[e] : null }, setTitleAt: function (e, t) { this._titleList[e] && (this._titleList[e].text(t), this.showCloseButtons && (this._addCloseButton(e), this._removeEventHandlers(), this._addEventHandlers()), this.render(), this.refresh()) }, setContentAt: function (e, t) { this._contentList[e] && this._contentList[e].html(t) }, ensureVisible: function (e) { var t = this; if (void 0 != e && -1 != e && null != e || (e = this.selectedItem), !this._isValidIndex(e)) return !1; var i, s, r = parseInt(this._titleList[e].position().left) + parseInt(this._unorderedList.css("margin-left")), o = parseInt(this._unorderedList.css("left")), a = parseInt(this._headerWrapper.outerWidth(!0)), n = parseInt(this._titleList[e].outerWidth(!0)), l = o - this._getArrowsDisplacement(), h = a - this._getArrowsDisplacement() - l; if (r < -l) i = -r + this._getArrowsDisplacement(), s = this._getArrowsDisplacement(); else { if (!(r + n > h - this._getArrowsDisplacement())) return this._moveSelectionTrack(e, this.selectionTrackerAnimationDuration), !0; i = -r + a - n - (this.scrollable ? 2 * this.arrowButtonSize - this._getArrowsDisplacement() : 0), s = a - n - this._getArrowsDisplacement() } return this._lockAnimation("unorderedList"), this._unorderedList.animate({ left: i }, this.scrollAnimationDuration, function () { return t._unlockAnimation("unorderedList"), t._moveSelectionTrack(t._selectedItem, 0), !0 }), this._moveSelectionTrack(e, this.selectionTrackerAnimationDuration, s), !0 }, isVisibleAt: function (e) { if (void 0 != e && -1 != e && null != e || (e = this.selectedItem), !this._isValidIndex(e)) return !1; var t = parseInt(this._titleList[e].position().left) + parseInt(this._unorderedList.css("margin-left")), i = parseInt(this._unorderedList.css("left")), s = parseInt(this._headerWrapper.outerWidth(!0)), r = parseInt(this._titleList[e].outerWidth(!0)), o = i - this._getArrowsDisplacement(), a = s - this._getArrowsDisplacement() - o; return !(t < -o) && !(t + r > a) }, isDisabled: function (e) { return this._titleList[e].disabled }, _lockAnimation: function (e) { this._isAnimated && (this._isAnimated[e] = !0) }, _unlockAnimation: function (e) { this._isAnimated && (this._isAnimated[e] = !1) }, propertyChangedHandler: function (t, i, s, r) { switch (this._validateProperties(), i) { case "touchMode": r && (t.enabledHover = !1, t.keyboardNavigation = !1); break; case "width": case "height": return void t._performResize(); case "disabled": return void (r ? this.disable() : this.enable()); case "showCloseButtons": return r ? this.showAllCloseButtons() : this.hideAllCloseButtons(), void this._moveSelectionTrack(this._selectedItem, this.selectionTrackerAnimationDuration); case "selectedItem": return void (this._isValidIndex(r) && this.select(r)); case "scrollStep": case "contentTransitionDuration": case "scrollAnimationDuration": case "enableScrollAnimation": return; case "selectionTracker": return void (r ? (this._refresh(), this.select(this._selectedItem)) : null != this._selectionTracker && this._selectionTracker.remove()); case "scrollable": return void (r ? (this._refresh(), this.select(this._selectedItem)) : (this._leftArrow.remove(), this._rightArrow.remove(), this._performHeaderLayout())); case "autoHeight": return void this._performHeaderLayout(); case "theme": return void e.jqx.utilities.setTheme(s, r, this.host) } this._unorderedList.css("left", "0px"), this._refresh(), this.select(this._selectedItem), this._addSelectStyle(this._selectedItem, !0) } }) }(jQuery), function (e) { function t(t, i) { return this.owner = t, this.datafield = null, this.displayfield = null, this.text = "", this.sortable = !0, this.hideable = !0, this.editable = !0, this.hidden = !1, this.groupable = !0, this.renderer = null, this.cellsrenderer = null, this.checkchange = null, this.threestatecheckbox = !1, this.buttonclick = null, this.columntype = null, this.cellsformat = "", this.align = "left", this.cellsalign = "left", this.width = "auto", this.minwidth = 25, this.maxwidth = "auto", this.pinned = !1, this.visibleindex = -1, this.filterable = !0, this.filter = null, this.filteritems = [], this.resizable = !0, this.initeditor = null, this.createeditor = null, this.destroyeditor = null, this.geteditorvalue = null, this.validation = null, this.classname = "", this.cellclassname = "", this.cellendedit = null, this.cellbeginedit = null, this.cellvaluechanging = null, this.aggregates = null, this.aggregatesrenderer = null, this.menu = !0, this.createfilterwidget = null, this.filtertype = "default", this.filtercondition = null, this.rendered = null, this.exportable = !0, this.exporting = !1, this.draggable = !0, this.nullable = !0, this.enabletooltips = !0, this.columngroup = null, this.getcolumnproperties = function () { return { nullable: this.nullable, sortable: this.sortable, hideable: this.hideable, hidden: this.hidden, groupable: this.groupable, width: this.width, align: this.align, editable: this.editable, minwidth: this.minwidth, maxwidth: this.maxwidth, resizable: this.resizable, datafield: this.datafield, text: this.text, exportable: this.exportable, cellsalign: this.cellsalign, pinned: this.pinned, cellsformat: this.cellsformat, columntype: this.columntype, classname: this.classname, cellclassname: this.cellclassname, menu: this.menu } }, this.setproperty = function (e, t) { if (this[e]) { i = this[e]; this[e] = t, this.owner._columnPropertyChanged(this, e, t, i) } else if (this[e.toLowerCase()]) { var i = this[e.toLowerCase()]; this[e.toLowerCase()] = t, this.owner._columnPropertyChanged(this, e.toLowerCase(), t, i) } }, this._initfields = function (i) { if (null != i) { var s = this.that; if (e.jqx.hasProperty(i, "dataField") && (this.datafield = e.jqx.get(i, "dataField")), e.jqx.hasProperty(i, "displayField") ? this.displayfield = e.jqx.get(i, "displayField") : this.displayfield = this.datafield, e.jqx.hasProperty(i, "enableTooltips") && (this.enabletooltips = e.jqx.get(i, "enableTooltips")), e.jqx.hasProperty(i, "text") && (this.text = e.jqx.get(i, "text")), e.jqx.hasProperty(i, "sortable") && (this.sortable = e.jqx.get(i, "sortable")), e.jqx.hasProperty(i, "hideable") && (this.hideable = e.jqx.get(i, "hideable")), e.jqx.hasProperty(i, "hidden") && (this.hidden = e.jqx.get(i, "hidden")), e.jqx.hasProperty(i, "groupable") && (this.groupable = e.jqx.get(i, "groupable")), e.jqx.hasProperty(i, "renderer") && (this.renderer = e.jqx.get(i, "renderer")), e.jqx.hasProperty(i, "align") && (this.align = e.jqx.get(i, "align")), e.jqx.hasProperty(i, "cellsAlign") && (this.cellsalign = e.jqx.get(i, "cellsAlign")), e.jqx.hasProperty(i, "cellsFormat") && (this.cellsformat = e.jqx.get(i, "cellsFormat")), e.jqx.hasProperty(i, "width") && (this.width = e.jqx.get(i, "width")), e.jqx.hasProperty(i, "minWidth") && (this.minwidth = e.jqx.get(i, "minWidth")), e.jqx.hasProperty(i, "maxWidth") && (this.maxwidth = e.jqx.get(i, "maxWidth")), e.jqx.hasProperty(i, "cellsRenderer") && (this.cellsrenderer = e.jqx.get(i, "cellsRenderer")), e.jqx.hasProperty(i, "columnType") && (this.columntype = e.jqx.get(i, "columnType")), e.jqx.hasProperty(i, "checkChange") && (this.checkchange = e.jqx.get(i, "checkChange")), e.jqx.hasProperty(i, "buttonClick") && (this.buttonclick = e.jqx.get(i, "buttonClick")), e.jqx.hasProperty(i, "pinned") && (this.pinned = e.jqx.get(i, "pinned")), e.jqx.hasProperty(i, "visibleIndex") && (this.visibleindex = e.jqx.get(i, "visibleIndex")), e.jqx.hasProperty(i, "filterable") && (this.filterable = e.jqx.get(i, "filterable")), e.jqx.hasProperty(i, "filter") && (this.filter = e.jqx.get(i, "filter")), e.jqx.hasProperty(i, "resizable") && (this.resizable = e.jqx.get(i, "resizable")), e.jqx.hasProperty(i, "editable") && (this.editable = e.jqx.get(i, "editable")), e.jqx.hasProperty(i, "initEditor") && (this.initeditor = e.jqx.get(i, "initEditor")), e.jqx.hasProperty(i, "createEditor") && (this.createeditor = e.jqx.get(i, "createEditor")), e.jqx.hasProperty(i, "destroyEditor") && (this.destroyeditor = e.jqx.get(i, "destroyEditor")), e.jqx.hasProperty(i, "getEditorValue") && (this.geteditorvalue = e.jqx.get(i, "getEditorValue")), e.jqx.hasProperty(i, "validation") && (this.validation = e.jqx.get(i, "validation")), e.jqx.hasProperty(i, "cellBeginEdit") && (this.cellbeginedit = e.jqx.get(i, "cellBeginEdit")), e.jqx.hasProperty(i, "cellEndEdit") && (this.cellendedit = e.jqx.get(i, "cellEndEdit")), e.jqx.hasProperty(i, "className") && (this.classname = e.jqx.get(i, "className")), e.jqx.hasProperty(i, "cellClassName") && (this.cellclassname = e.jqx.get(i, "cellClassName")), e.jqx.hasProperty(i, "menu") && (this.menu = e.jqx.get(i, "menu")), e.jqx.hasProperty(i, "aggregates") && (this.aggregates = e.jqx.get(i, "aggregates")), e.jqx.hasProperty(i, "aggregatesRenderer") && (this.aggregatesrenderer = e.jqx.get(i, "aggregatesRenderer")), e.jqx.hasProperty(i, "createFilterWidget") && (this.createfilterwidget = e.jqx.get(i, "createFilterWidget")), e.jqx.hasProperty(i, "filterType") && (this.filtertype = e.jqx.get(i, "filterType")), e.jqx.hasProperty(i, "rendered") && (this.rendered = e.jqx.get(i, "rendered")), e.jqx.hasProperty(i, "exportable") && (this.exportable = e.jqx.get(i, "exportable")), e.jqx.hasProperty(i, "filterItems") && (this.filteritems = e.jqx.get(i, "filterItems")), e.jqx.hasProperty(i, "cellValueChanging") && (this.cellvaluechanging = e.jqx.get(i, "cellValueChanging")), e.jqx.hasProperty(i, "draggable") && (this.draggable = e.jqx.get(i, "draggable")), e.jqx.hasProperty(i, "filterCondition") && (this.filtercondition = e.jqx.get(i, "filterCondition")), e.jqx.hasProperty(i, "threeStateCheckbox") && (this.threestatecheckbox = e.jqx.get(i, "threeStateCheckbox")), e.jqx.hasProperty(i, "nullable") && (this.nullable = e.jqx.get(i, "nullable")), e.jqx.hasProperty(i, "columnGroup") && (this.columngroup = e.jqx.get(i, "columnGroup")), !i instanceof String && "string" != typeof i) for (var r in i) if (!s.hasOwnProperty(r) && !s.hasOwnProperty(r.toLowerCase())) throw t.host.remove(), new Error("jqxGrid: Invalid property name - " + r + ".") } }, this._initfields(i), this } function i(e, t) { return this.setdata = function (e) { null != e && (this.bounddata = e, this.boundindex = e.boundindex, this.visibleindex = e.visibleindex, this.group = e.group, this.parentbounddata = e.parentItem, this.uniqueid = e.uniqueid, this.level = e.level) }, this.setdata(t), this.parentrow = null, this.subrows = new Array, this.owner = e, this.height = 25, this.hidden = !1, this.rowdetails = null, this.rowdetailsheight = 100, this.rowdetailshidden = !0, this.top = -1, this.setrowinfo = function (e) { this.hidden = e.hidden, this.rowdetails = e.rowdetails, this.rowdetailsheight = e.rowdetailsheight, this.rowdetailshidden = !e.showdetails, this.height = e.height }, this } e.jqx.jqxWidget("jqxGrid", "", {}), e.extend(e.jqx._jqxGrid.prototype, { defineInstance: function () { this.disabled = !1, this.width = 600, this.height = 400, this.pagerheight = 28, this.groupsheaderheight = 34, this.pagesize = 10, this.pagesizeoptions = ["5", "10", "20"], this.rowsheight = 25, this.columnsheight = 25, this.filterrowheight = 31, this.groupindentwidth = 30, this.rowdetails = !1, this.enablerowdetailsindent = !0, this.enablemousewheel = !0, this.initrowdetails = null, this.layoutrowdetails = null, this.editable = !1, this.editmode = "selectedcell", this.pageable = !1, this.pagermode = "default", this.pagerbuttonscount = 5, this.groupable = !1, this.sortable = !1, this.filterable = !1, this.filtermode = "default", this.autoshowfiltericon = !0, this.showfiltercolumnbackground = !0, this.showpinnedcolumnbackground = !0, this.showsortcolumnbackground = !0, this.altrows = !1, this.altstart = 1, this.altstep = 1, this.showrowdetailscolumn = !0, this.showtoolbar = !1, this.toolbarheight = 34, this.showstatusbar = !1, this.statusbarheight = 34, this.enableellipsis = !0, this.groups = [], this.groupsrenderer = null, this.groupcolumnrenderer = null, this.groupsexpandedbydefault = !1, this.pagerrenderer = null, this.touchmode = "auto", this.columns = [], this.selectedrowindex = -1, this.selectedrowindexes = new Array, this.selectedcells = new Array, this.autobind = !0, this.selectedcell = null, this.tableZIndex = 799, this.headerZIndex = 199, this.updatefilterconditions = null, this.showaggregates = !1, this.showfilterrow = !1, this.autorowheight = !1, this.autokoupdates = !0, this.handlekeyboardnavigation = null, this.showsortmenuitems = !0, this.showfiltermenuitems = !0, this.showgroupmenuitems = !0, this.enablebrowserselection = !1, this.enablekeyboarddelete = !0, this.clipboard = !0, this.ready = null, this.updatefilterpanel = null, this.autogeneratecolumns = !1, this.rowdetailstemplate = null, this.scrollfeedback = null, this.rendertoolbar = null, this.renderstatusbar = null, this.rendered = null, this.multipleselectionbegins = null, this.columngroups = null, this.cellhover = null, this.source = { beforeprocessing: null, beforesend: null, loaderror: null, localdata: null, data: null, datatype: "array", datafields: [], url: "", root: "", record: "", id: "", totalrecords: 0, recordstartindex: 0, recordendindex: 0, loadallrecords: !0, sortcolumn: null, sortdirection: null, sort: null, filter: null, sortcomparer: null }, this.dataview = null, this.updatedelay = null, this.autoheight = !1, this.autowidth = !1, this.showheader = !0, this.showgroupsheader = !0, this.closeablegroups = !0, this.scrollbarsize = e.jqx.utilities.scrollBarSize, this.touchscrollbarsize = e.jqx.utilities.touchScrollBarSize, this.virtualmode = !1, this.sort = null, this.columnsmenu = !0, this.columnsresize = !1, this.columnsreorder = !1, this.columnsmenuwidth = 15, this.autoshowcolumnsmenubutton = !0, this.popupwidth = "auto", this.sorttogglestates = 2, this.rendergridrows = null, this.enableanimations = !0, this.enabletooltips = !1, this.selectionmode = "singlerow", this.enablehover = !0, this.loadingerrormessage = "The data is still loading. When the data binding is completed, the Grid raises the 'bindingcomplete' event. Call this function in the 'bindingcomplete' event handler.", this.verticalscrollbarstep = 25, this.verticalscrollbarlargestep = 400, this.horizontalscrollbarstep = 10, this.horizontalscrollbarlargestep = 50, this.keyboardnavigation = !0, this.touchModeStyle = "auto", this.autoshowloadelement = !0, this.showdefaultloadelement = !0, this.showemptyrow = !0, this.autosavestate = !1, this.autoloadstate = !1, this._updating = !1, this._pagescache = new Array, this._pageviews = new Array, this._cellscache = new Array, this._rowdetailscache = new Array, this._rowdetailselementscache = new Array, this._requiresupdate = !1, this._hasOpenedMenu = !1, this.scrollmode = "physical", this.deferreddatafields = null, this.localization = null, this.rtl = !1, this.menuitemsarray = [], this.events = ["initialized", "rowClick", "rowSelect", "rowUnselect", "groupExpand", "groupCollapse", "sort", "columnClick", "cellClick", "pageChanged", "pageSizeChanged", "bindingComplete", "groupsChanged", "filter", "columnResized", "cellSelect", "cellUnselect", "cellBeginEdit", "cellEndEdit", "cellValueChanged", "rowExpand", "rowCollapse", "rowDoubleClick", "cellDoubleClick", "columnReordered", "pageChanging"] }, createInstance: function (t) { this.that = this; var i = "<div class='jqx-clear jqx-border-reset jqx-overflow-hidden jqx-max-size jqx-position-relative'><div tabindex='1' class='jqx-clear jqx-max-size jqx-position-relative jqx-overflow-hidden jqx-background-reset' id='wrapper" + this.element.id + "'><div class='jqx-clear jqx-position-absolute' id='toolbar' style='visibility: hidden;'></div><div class='jqx-clear jqx-position-absolute' id='groupsheader' style='visibility: hidden;'></div><div class='jqx-clear jqx-overflow-hidden jqx-position-absolute jqx-border-reset jqx-background-reset' id='content" + this.element.id + "'></div><div class='jqx-clear jqx-position-absolute' id='verticalScrollBar" + this.element.id + "'></div><div class='jqx-clear jqx-position-absolute' id='horizontalScrollBar" + this.element.id + "'></div><div class='jqx-clear jqx-position-absolute jqx-border-reset' id='bottomRight'></div><div class='jqx-clear jqx-position-absolute' id='statusbar'></div><div class='jqx-clear jqx-position-absolute' id='pager' style='z-index: 20;'></div></div></div>"; this.element.innerText = "", this.element.innerHTML = "", 15 != e.jqx.utilities.scrollBarSize && (this.scrollbarsize = e.jqx.utilities.scrollBarSize), this.source && (this.source.dataBind || (this.source = new e.jqx.dataAdapter(this.source)), (o = this.source._source.datafields) && o.length > 0 && (this._camelCase = void 0 !== this.source._source.dataFields, this.editmode = this.editmode.toLowerCase(), this.selectionmode = this.selectionmode.toLowerCase())), this.host.attr("role", "grid"), this.host.attr("align", "left"), this.element.innerHTML = i, this.host.addClass(this.toTP("jqx-grid")), this.host.addClass(this.toTP("jqx-reset")), this.host.addClass(this.toTP("jqx-rc-all")), this.host.addClass(this.toTP("jqx-widget")), this.host.addClass(this.toTP("jqx-widget-content")), this.wrapper = this.host.find("#wrapper" + this.element.id), this.content = this.host.find("#content" + this.element.id), this.content.addClass(this.toTP("jqx-reset")); var s = this.host.find("#verticalScrollBar" + this.element.id), r = this.host.find("#horizontalScrollBar" + this.element.id); if (this.bottomRight = this.host.find("#bottomRight").addClass(this.toTP("jqx-grid-bottomright")).addClass(this.toTP("jqx-scrollbar-state-normal")), !s.jqxScrollBar) throw new Error("jqxGrid: Missing reference to jqxscrollbar.js"); if (this.editors = new Array, this.vScrollBar = s.jqxScrollBar({ vertical: !0, rtl: this.rtl, touchMode: this.touchmode, step: this.verticalscrollbarstep, largestep: this.verticalscrollbarlargestep, theme: this.theme, _triggervaluechanged: !1 }), this.hScrollBar = r.jqxScrollBar({ vertical: !1, rtl: this.rtl, touchMode: this.touchmode, step: this.horizontalscrollbarstep, largestep: this.horizontalscrollbarlargestep, theme: this.theme, _triggervaluechanged: !1 }), this.pager = this.host.find("#pager"), this.pager[0].id = "pager" + this.element.id, this.toolbar = this.host.find("#toolbar"), this.toolbar[0].id = "toolbar" + this.element.id, this.toolbar.addClass(this.toTP("jqx-grid-toolbar")), this.toolbar.addClass(this.toTP("jqx-widget-header")), this.statusbar = this.host.find("#statusbar"), this.statusbar[0].id = "statusbar" + this.element.id, this.statusbar.addClass(this.toTP("jqx-grid-statusbar")), this.statusbar.addClass(this.toTP("jqx-widget-header")), this.pager.addClass(this.toTP("jqx-grid-pager")), this.pager.addClass(this.toTP("jqx-widget-header")), this.groupsheader = this.host.find("#groupsheader"), this.groupsheader.addClass(this.toTP("jqx-grid-groups-header")), this.groupsheader.addClass(this.toTP("jqx-widget-header")), this.vScrollBar.css("visibility", "hidden"), this.hScrollBar.css("visibility", "hidden"), this.vScrollInstance = e.data(this.vScrollBar[0], "jqxScrollBar").instance, this.hScrollInstance = e.data(this.hScrollBar[0], "jqxScrollBar").instance, this.gridtable = null, this.isNestedGrid = !!this.host.parent() && 2e3 == this.host.parent().css("z-index"), this.touchdevice = this.isTouchDevice(), this.localizestrings && (this.localizestrings(), null != this.localization && this.localizestrings(this.localization, !1)), this.rowdetailstemplate && (void 0 == this.rowdetailstemplate.rowdetails && (this.rowdetailstemplate.rowdetails = "<div></div>"), void 0 == this.rowdetailstemplate.rowdetailsheight && (this.rowdetailstemplate.rowdetailsheight = 200), void 0 == this.rowdetailstemplate.rowdetailshidden && (this.rowdetailstemplate.rowdetailshidden = !0)), this.showfilterrow && !this.filterable) throw new Error('jqxGrid: "showfilterrow" requires setting the "filterable" property to true!'); if (this.autorowheight && !this.autoheight && !this.pageable) throw new Error('jqxGrid: "autorowheight" requires setting the "autoheight" or "pageable" property to true!'); if (this.virtualmode && null == this.rendergridrows) throw new Error('jqxGrid: "virtualmode" requires setting the "rendergridrows"!'); if (this.virtualmode && !this.pageable && this.groupable) throw new Error('jqxGrid: "grouping" in "virtualmode" without paging is not supported!'); if (!this._testmodules()) { if (this._builddataloadelement(), this._cachedcolumns = this.columns, 25 != this.rowsheight && this._measureElement("cell"), (25 != this.columnsheight || this.columngroups) && this._measureElement("column"), this.source) { var o = this.source.datafields; if (null == o && this.source._source && (o = this.source._source.datafields), o) for (var a = 0; a < this.columns.length; a++) { var n = this.columns[a]; if (n && n.cellsformat && n.cellsformat.length > 2) for (var l = 0; l < o.length; l++) if (o[l].name == n.datafield && !o[l].format) { o[l].format = n.cellsformat; break } } } this.databind(this.source), this.showtoolbar && this.toolbar.css("visibility", "visible"), this.showstatusbar && this.statusbar.css("visibility", "visible"), this._arrange(), this.pageable && this._initpager && this._initpager(), this.tableheight = null; var h = this.that, d = function () { h.content && (h.content[0].scrollTop = 0, h.content[0].scrollLeft = 0), h.gridcontent && (h.gridcontent[0].scrollLeft = 0, h.gridcontent[0].scrollTop = 0) }; this.addHandler(this.content, "mousedown", function () { d() }), this.addHandler(this.content, "scroll", function (e) { return d(), !1 }), this.showfilterrow || (this.showstatusbar || this.showtoolbar || this.host.addClass("jqx-disableselect"), this.content.addClass("jqx-disableselect")), this.enablebrowserselection && (this.content.removeClass("jqx-disableselect"), this.host.removeClass("jqx-disableselect")), this._resizeWindow(), this.disabled && this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")), this.hasTransform = e.jqx.utilities.hasTransform(this.host), "logical" == this.scrollmode && (this.vScrollInstance.thumbStep = this.rowsheight, this.vScrollInstance.step = this.rowsheight), e.jqx.isHidden(this.host) || (this.filterable || this.groupable || this.sortable) && this._initmenu() } }, _resizeWindow: function () { var t = this.that; (null != this.width && -1 != this.width.toString().indexOf("%") || null != this.height && -1 != this.height.toString().indexOf("%")) && (this._updatesizeonwindowresize = !0, e.jqx.utilities.resize(this.host, function (i) { var s = e(window).width(), r = e(window).height(), o = t.host.width(), a = t.host.height(); if (t.autoheight && (t._lastHostWidth = r), t._lastHostWidth != o || t._lastHostHeight != a) { if (t.touchdevice && t.editcell && "orientationchange" !== i) return; t._updatesize(t._lastHostWidth != o, t._lastHostHeight != a) } t._lastWidth = s, t._lastHeight = r, t._lastHostWidth = o, t._lastHostHeight = a })) }, _builddataloadelement: function () { if (this.dataloadelement && this.dataloadelement.remove(), this.dataloadelement = e('<div style="overflow: hidden; position: absolute;"></div>'), this.showdefaultloadelement) { var t = e('<div style="z-index: 99999; margin-left: -66px; left: 50%; top: 50%; margin-top: -24px; position: relative; width: 100px; height: 33px; padding: 5px; font-family: verdana; font-size: 12px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #f6f6f6; border-collapse: collapse;"><div style="float: left;"><div style="float: left; overflow: hidden; width: 32px; height: 32px;" class="jqx-grid-load"/><span style="margin-top: 10px; float: left; display: block; margin-left: 5px;" >' + this.gridlocalization.loadtext + "</span></div></div>"); t.addClass(this.toTP("jqx-rc-all")), this.dataloadelement.addClass(this.toTP("jqx-rc-all")), t.addClass(this.toTP("jqx-fill-state-normal")), this.dataloadelement.append(t) } else this.dataloadelement.addClass(this.toTP("jqx-grid-load")); this.dataloadelement.width(this.width), this.dataloadelement.height(this.height), this.host.prepend(this.dataloadelement) }, _measureElement: function (t) { var i = e("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>"); i.addClass(this.toTP("jqx-widget")), e(document.body).append(i), "cell" == t ? this._cellheight = i.height() : this._columnheight = i.height(), i.remove() }, _measureMenuElement: function () { var t = e("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>"); t.addClass(this.toTP("jqx-widget")), t.addClass(this.toTP("jqx-menu")), t.addClass(this.toTP("jqx-menu-item-top")), t.addClass(this.toTP("jqx-fill-state-normal")), e(document.body).append(t); var i = t.outerHeight(); return t.remove(), i }, _measureElementWidth: function (t) { var i = e("<span style='visibility: hidden; white-space: nowrap;'>" + t + "</span>"); i.addClass(this.toTP("jqx-widget")), i.addClass(this.toTP("jqx-grid")), i.addClass(this.toTP("jqx-grid-column-header")), i.addClass(this.toTP("jqx-widget-header")), e(document.body).append(i); var s = i.outerWidth() + 20; return i.remove(), s }, _getBodyOffset: function () { var t = 0, i = 0; return "0px" != e("body").css("border-top-width") && (t = parseInt(e("body").css("border-top-width")), isNaN(t) && (t = 0)), "0px" != e("body").css("border-left-width") && (i = parseInt(e("body").css("border-left-width")), isNaN(i) && (i = 0)), { left: i, top: t } }, _testmodules: function () { var t = "", i = this.that, s = function () { "" != t.length && (t += ",") }; if (this.columnsmenu && !this.host.jqxMenu && (this.sortable || this.groupable || this.filterable) && (s(), t += " jqxmenu.js"), this.host.jqxScrollBar || (s(), t += " jqxscrollbar.js"), this.host.jqxButton || (s(), t += " jqxbuttons.js"), e.jqx.dataAdapter || (s(), t += " jqxdata.js"), this.pageable && !this.gotopage && (s(), t += "jqxgrid.pager.js"), this.filterable && !this.applyfilters && (s(), t += " jqxgrid.filter.js"), this.groupable && !this._initgroupsheader && (s(), t += " jqxgrid.grouping.js"), this.columnsresize && !this.autoresizecolumns && (s(), t += " jqxgrid.columnsresize.js"), this.columnsreorder && !this.setcolumnindex && (s(), t += " jqxgrid.columnsreorder.js"), this.sortable && !this.sortby && (s(), t += " jqxgrid.sort.js"), this.editable && !this.begincelledit && (s(), t += " jqxgrid.edit.js"), this.showaggregates && !this.getcolumnaggregateddata && (s(), t += " jqxgrid.aggregates.js"), this.keyboardnavigation && !this.selectrow && (s(), t += " jqxgrid.selection.js"), "" != t || this.editable || this.filterable || this.pageable) { var r = [], o = function (e) { switch (e) { case "checkbox": i.host.jqxCheckBox || r.checkbox || (r.checkbox = !0, s(), t += " jqxcheckbox.js"); break; case "numberinput": i.host.jqxNumberInput || r.numberinput || (r.numberinput = !0, s(), t += " jqxnumberinput.js"); break; case "datetimeinput": i.host.jqxDateTimeInput || r.datetimeinput ? i.host.jqxCalendar || r.calendar || (s(), t += " jqxcalendar.js") : (s(), r.datetimeinput = !0, t += " jqxdatetimeinput.js(requires: jqxcalendar.js)"); break; case "combobox": i.host.jqxComboBox || r.combobox ? i.host.jqxListBox || r.listbox || (s(), r.listbox = !0, t += " jqxlistbox.js") : (s(), r.combobox = !0, t += " jqxcombobox.js(requires: jqxlistbox.js)"); break; case "dropdownlist": i.host.jqxDropDownList || r.dropdownlist ? i.host.jqxListBox || r.listbox || (s(), r.listbox = !0, t += " jqxlistbox.js") : (s(), r.dropdownlist = !0, t += " jqxdropdownlist.js(requires: jqxlistbox.js)") } }; (this.filterable || this.pageable) && o("dropdownlist"); for (var a = 0; a < this.columns.length; a++) if (void 0 != this.columns[a]) { var n = this.columns[a].columntype; o(n), this.filterable && this.showfilterrow && ("checkedlist" != (n = this.columns[a].filtertype) && "bool" != n || o("checkbox"), "date" == n && o("datetimeinput")) } if ("" != t) throw new Error("jqxGrid: Missing references to the following module(s): " + t) } return !1 }, focus: function () { try { this.wrapper.focus(); var e = this.that; setTimeout(function () { e.wrapper.focus() }, 25), this.focused = !0 } catch (e) { } }, hiddenParent: function () { return e.jqx.isHidden(this.host) }, resize: function (e, t) { this.width = e, this.height = t, this._updatesize(!0, !0) }, _updatesize: function (t, i) { if (!this._loading) { var s = this.that; s._newmax = null; var r = s.host.width(), o = s.host.height(); s._oldWidth || (s._oldWidth = r), s._oldHeight || (s._oldHeight = o), s._resizeTimer && clearTimeout(s._resizeTimer); s._resizeTimer = setTimeout(function () { if (s.resizingGrid = !0, !e.jqx.isHidden(s.host)) { if (s.editcell && (s.endcelledit(s.editcell.row, s.editcell.column, !0, !0), s._oldselectedcell = null), h != s._oldHeight || 1 == i) { var o = s.groupable && s.groups.length > 0, a = s.vScrollBar.css("visibility"); if (!s.autoheight) { if (s.virtualmode && (s._pageviews = new Array), o || s.rowdetails || s.pageable) { s._arrange(), s.prerenderrequired = !0; h = Math.round(s.host.height()) + 2 * s.rowsheight; realheight = s._gettableheight(); var n = Math.round(h / s.rowsheight), l = Math.max(s.dataview.totalrows, s.dataview.totalrecords); s.pageable && (l = s.pagesize, s.pagesize > Math.max(s.dataview.totalrows, s.dataview.totalrecords) && s.autoheight ? l = Math.max(s.dataview.totalrows, s.dataview.totalrecords) : s.autoheight || s.dataview.totalrows < s.pagesize && (l = Math.max(s.dataview.totalrows, s.dataview.totalrecords))); s.rowsheight, s._getpagesize(); !s.pageable && s.autoheight && (n = l), s.virtualsizeinfo && (s.virtualsizeinfo.visiblerecords = n), s.rendergridcontent(!0, !1), s._renderrows(s.virtualsizeinfo) } else { s._arrange(), s.virtualsizeinfo = s._calculatevirtualheight(); var h = Math.round(s.host.height()) + 2 * s.rowsheight; parseInt(h) >= parseInt(s._oldHeight) && (s.prerenderrequired = !0), s._renderrows(s.virtualsizeinfo) } a != s.vScrollBar.css("visibility") && (s.vScrollInstance.setPosition(0), s._arrange(), s._updatecolumnwidths(), s.table && s.table.width(s.columnsheader.width()), s._updatecellwidths()) } } if (r != s._oldWidth || 1 == t) { var d = !1; if (s.editcell && s.editcell.editor) switch (s.editcell.columntype) { case "dropdownlist": if (d = s.editcell.editor.jqxDropDownList("isOpened") || s.editcell.editor.jqxDropDownList("isanimating") && !s.editcell.editor.jqxDropDownList("ishiding")) return s.editcell.editor.jqxDropDownList({ openDelay: 0 }), s.editcell.editor.jqxDropDownList("open"), void s.editcell.editor.jqxDropDownList({ openDelay: 250 }); break; case "combobox": if (d = s.editcell.editor.jqxComboBox("isOpened") || s.editcell.editor.jqxComboBox("isanimating") && !s.editcell.editor.jqxComboBox("ishiding")) return s.editcell.editor.jqxComboBox({ openDelay: 0 }), s.editcell.editor.jqxComboBox("open"), void s.editcell.editor.jqxComboBox({ openDelay: 250 }); break; case "datetimeinput": if (d) return d = s.editcell.editor.jqxDateTimeInput("isOpened") || s.editcell.editor.jqxDateTimeInput("isanimating") && !s.editcell.editor.jqxDateTimeInput("ishiding"), s.editcell.editor.jqxDateTimeInput({ openDelay: 0 }), s.editcell.editor.jqxDateTimeInput("open"), void s.editcell.editor.jqxDateTimeInput({ openDelay: 250 }) } var c = s.hScrollBar.css("visibility"); s._arrange(), s._updatecolumnwidths(), s.table && s.table.width(s.columnsheader.width()), s._updatecellwidths(), 0 == t && s._oldWidth > r || i && 0 != s.dataview.rows.length || s._renderrows(s.virtualsizeinfo), c != s.hScrollBar.css("visibility") && s.hScrollInstance.setPosition(0) } s._oldWidth = r, s._oldHeight = h, s.resizingGrid = !1 } }, 5) } }, getTouches: function (t) { return e.jqx.mobile.getTouches(t) }, _updateTouchScrolling: function () { var t = this.that; if (t.isTouchDevice()) { t.scrollmode = "logical", t.vScrollInstance.thumbStep = t.rowsheight; var i = e.jqx.mobile.getTouchEventName("touchstart"), s = e.jqx.mobile.getTouchEventName("touchend"), r = e.jqx.mobile.getTouchEventName("touchmove"); t.enablehover = !1, t.gridcontent && (t.removeHandler(t.gridcontent, i + ".touchScroll"), t.removeHandler(t.gridcontent, r + ".touchScroll"), t.removeHandler(t.gridcontent, s + ".touchScroll"), t.removeHandler(t.gridcontent, "touchcancel.touchScroll"), e.jqx.mobile.touchScroll(t.gridcontent[0], t.vScrollInstance.max, function (e, i) { if ("visible" == t.vScrollBar.css("visibility")) { s = t.vScrollInstance.value; t.vScrollInstance.setPosition(s + i) } if ("visible" == t.hScrollBar.css("visibility")) { var s = t.hScrollInstance.value; t.hScrollInstance.setPosition(s + e) } t.vScrollInstance.thumbCapture = !0, t._lastScroll = new Date }, this.element.id, this.hScrollBar, this.vScrollBar), t._overlayElement && (t.removeHandler(t._overlayElement, i + ".touchScroll"), t.removeHandler(t._overlayElement, r + ".touchScroll"), t.removeHandler(t._overlayElement, s + ".touchScroll"), t.removeHandler(t._overlayElement, "touchcancel.touchScroll"), e.jqx.mobile.touchScroll(t._overlayElement[0], t.vScrollInstance.max, function (e, i) { if ("visible" == t.vScrollBar.css("visibility")) { s = t.vScrollInstance.value; t.vScrollInstance.setPosition(s + i) } if ("visible" == t.hScrollBar.css("visibility")) { var s = t.hScrollInstance.value; t.hScrollInstance.setPosition(s + e) } t.vScrollInstance.thumbCapture = !0, t._lastScroll = new Date }, this.element.id, this.hScrollBar, this.vScrollBar), this.addHandler(this.host, i, function () { t.editcell ? t._overlayElement.css("visibility", "hidden") : t._overlayElement.css("visibility", "visible") }), this.addHandler(this.host, s, function () { t.editcell ? t._overlayElement.css("visibility", "hidden") : t._overlayElement.css("visibility", "visible") }))) } }, isTouchDevice: function () { if (void 0 != this.touchDevice) return this.touchDevice; var t = e.jqx.mobile.isTouchDevice(); if (this.touchDevice = t, 1 == this.touchmode) { if (e.jqx.browser.msie && e.jqx.browser.version < 9) return this.enablehover = !1, !1; t = !0, e.jqx.mobile.setMobileSimulator(this.element), this.touchDevice = t } else 0 == this.touchmode && (t = !1); return t && 0 != this.touchModeStyle && (this.touchDevice = !0, this.host.addClass(this.toThemeProperty("jqx-touch")), this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch")), this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch")), this.scrollbarsize = this.touchscrollbarsize), t }, toTP: function (e) { return this.toThemeProperty(e) }, localizestrings: function (t, i) { if (this._cellscache = new Array, e.jqx.dataFormat && e.jqx.dataFormat.cleardatescache(), this._loading) throw new Error("jqxGrid: " + this.loadingerrormessage); if (null != t) { for (var s in t) s.toLowerCase() !== s && (t[s.toLowerCase()] = t[s]); if (t.pagergotopagestring && (this.gridlocalization.pagergotopagestring = t.pagergotopagestring), t.pagershowrowsstring && (this.gridlocalization.pagershowrowsstring = t.pagershowrowsstring), t.pagerrangestring && (this.gridlocalization.pagerrangestring = t.pagerrangestring), t.pagernextbuttonstring && (this.gridlocalization.pagernextbuttonstring = t.pagernextbuttonstring), t.pagerpreviousbuttonstring && (this.gridlocalization.pagerpreviousbuttonstring = t.pagerpreviousbuttonstring), t.pagerfirstbuttonstring && (this.gridlocalization.pagerfirstbuttonstring = t.pagerfirstbuttonstring), t.pagerlastbuttonstring && (this.gridlocalization.pagerlastbuttonstring = t.pagerlastbuttonstring), t.groupsheaderstring && (this.gridlocalization.groupsheaderstring = t.groupsheaderstring), t.sortascendingstring && (this.gridlocalization.sortascendingstring = t.sortascendingstring), t.sortdescendingstring && (this.gridlocalization.sortdescendingstring = t.sortdescendingstring), t.sortremovestring && (this.gridlocalization.sortremovestring = t.sortremovestring), t.groupbystring && (this.gridlocalization.groupbystring = t.groupbystring), t.groupremovestring && (this.gridlocalization.groupremovestring = t.groupremovestring), t.firstDay && (this.gridlocalization.firstDay = t.firstDay), t.days && (this.gridlocalization.days = t.days), t.months && (this.gridlocalization.months = t.months), t.AM && (this.gridlocalization.AM = t.AM), t.PM && (this.gridlocalization.PM = t.PM), t.patterns && (this.gridlocalization.patterns = t.patterns), t.percentsymbol && (this.gridlocalization.percentsymbol = t.percentsymbol), t.currencysymbol && (this.gridlocalization.currencysymbol = t.currencysymbol), t.currencysymbolposition && (this.gridlocalization.currencysymbolposition = t.currencysymbolposition), void 0 != t.decimalseparator && (this.gridlocalization.decimalseparator = t.decimalseparator), void 0 != t.thousandsseparator && (this.gridlocalization.thousandsseparator = t.thousandsseparator), t.filterclearstring && (this.gridlocalization.filterclearstring = t.filterclearstring), t.filterstring && (this.gridlocalization.filterstring = t.filterstring), t.filtershowrowstring && (this.gridlocalization.filtershowrowstring = t.filtershowrowstring), t.filterselectallstring && (this.gridlocalization.filterselectallstring = t.filterselectallstring), t.filterchoosestring && (this.gridlocalization.filterchoosestring = t.filterchoosestring), t.filterorconditionstring && (this.gridlocalization.filterorconditionstring = t.filterorconditionstring), t.filterandconditionstring && (this.gridlocalization.filterandconditionstring = t.filterandconditionstring), t.filterstringcomparisonoperators && (this.gridlocalization.filterstringcomparisonoperators = t.filterstringcomparisonoperators), t.filternumericcomparisonoperators && (this.gridlocalization.filternumericcomparisonoperators = t.filternumericcomparisonoperators), t.filterdatecomparisonoperators && (this.gridlocalization.filterdatecomparisonoperators = t.filterdatecomparisonoperators), t.filterbooleancomparisonoperators && (this.gridlocalization.filterbooleancomparisonoperators = t.filterbooleancomparisonoperators), t.emptydatastring && (this.gridlocalization.emptydatastring = t.emptydatastring), t.filterselectstring && (this.gridlocalization.filterselectstring = t.filterselectstring), t.todaystring && (this.gridlocalization.todaystring = t.todaystring), t.clearstring && (this.gridlocalization.clearstring = t.clearstring), t.validationstring && (this.gridlocalization.validationstring = t.validationstring), t.loadtext && (this.gridlocalization.loadtext = t.loadtext), !1 !== i) { if (this._initpager && this._initpager(), this._initgroupsheader && this._initgroupsheader(), this._initmenu && this._initmenu(), this._builddataloadelement(), e(this.dataloadelement).css("visibility", "hidden"), e(this.dataloadelement).css("display", "none"), this.filterable && this.showfilterrow && this._updatefilterrow) { for (var s in this._filterrowcache) e(this._filterrowcache[s]).remove(); this._filterrowcache = [], this._updatefilterrow() } this.showaggregates && this.refresheaggregates && this.refresheaggregates(), this._renderrows(this.virtualsizeinfo) } } else this.gridlocalization = { "/": "/", ":": ":", firstDay: 0, days: { names: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], namesAbbr: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], namesShort: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"] }, months: { names: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", ""], namesAbbr: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", ""] }, AM: ["AM", "am", "AM"], PM: ["PM", "pm", "PM"], eras: [{ name: "A.D.", start: null, offset: 0 }], twoDigitYearMax: 2029, patterns: { d: "M/d/yyyy", D: "dddd, MMMM dd, yyyy", t: "h:mm tt", T: "h:mm:ss tt", f: "dddd, MMMM dd, yyyy h:mm tt", F: "dddd, MMMM dd, yyyy h:mm:ss tt", M: "MMMM dd", Y: "yyyy MMMM", S: "yyyy'-'MM'-'dd'T'HH':'mm':'ss", ISO: "yyyy-MM-dd hh:mm:ss", ISO2: "yyyy-MM-dd HH:mm:ss", d1: "dd.MM.yyyy", d2: "dd-MM-yyyy", d3: "dd-MMMM-yyyy", d4: "dd-MM-yy", d5: "H:mm", d6: "HH:mm", d7: "HH:mm tt", d8: "dd/MMMM/yyyy", d9: "MMMM-dd", d10: "MM-dd", d11: "MM-dd-yyyy" }, percentsymbol: "%", currencysymbol: "$", currencysymbolposition: "before", decimalseparator: ".", thousandsseparator: ",", pagergotopagestring: "Go to page:", pagershowrowsstring: "Show rows:", pagerrangestring: " of ", pagerpreviousbuttonstring: "previous", pagernextbuttonstring: "next", pagerfirstbuttonstring: "first", pagerlastbuttonstring: "last", groupsheaderstring: "Drag a column and drop it here to group by that column", sortascendingstring: "Sort Ascending", sortdescendingstring: "Sort Descending", sortremovestring: "Remove Sort", groupbystring: "Group By this column", groupremovestring: "Remove from groups", filterclearstring: "Clear", filterstring: "Filter", filtershowrowstring: "Show rows where:", filtershowrowdatestring: "Show rows where date:", filterorconditionstring: "Or", filterandconditionstring: "And", filterselectallstring: "(Select All)", filterchoosestring: "Airline Filteration", filterstringcomparisonoperators: ["empty", "not empty", "contains", "contains(match case)", "does not contain", "does not contain(match case)", "starts with", "starts with(match case)", "ends with", "ends with(match case)", "equal", "equal(match case)", "null", "not null"], filternumericcomparisonoperators: ["equal", "not equal", "less than", "less than or equal", "greater than", "greater than or equal", "null", "not null"], filterdatecomparisonoperators: ["equal", "not equal", "less than", "less than or equal", "greater than", "greater than or equal", "null", "not null"], filterbooleancomparisonoperators: ["equal", "not equal"], validationstring: "Entered value is not valid", emptydatastring: "No data to display", filterselectstring: "Select Filter", loadtext: "Loading...", clearstring: "Clear", todaystring: "Today" } }, _initmenu: function () { var t = this.that; if (this.host.jqxMenu) { if (this.gridmenu) { if (this._hasOpenedMenu) return; this.filterable && this._destroyfilterpanel && this._destroyfilterpanel(), this.removeHandler(this.gridmenu, "keydown"), this.removeHandler(this.gridmenu, "closed"), this.removeHandler(this.gridmenu, "itemclick"), this.gridmenu.jqxMenu("destroy"), this.gridmenu.removeData(), this.gridmenu.remove() } this.menuitemsarray = new Array, this.gridmenu = e('<div id="gridmenu' + this.element.id + '" style="z-index: 9999999999999;"></div>'), this.host.append(this.gridmenu); var i = e("<ul></ul>"), s = e('<li><div class="jqx-grid-sortasc-icon"></div>' + this.gridlocalization.sortascendingstring + "</li>"), r = e('<li><div class="jqx-grid-sortdesc-icon"></div>' + this.gridlocalization.sortdescendingstring + "</li>"), o = e('<li><div class="jqx-grid-sortremove-icon"></div>' + this.gridlocalization.sortremovestring + "</li>"), a = '<div class="jqx-grid-groupby-icon"></div>', n = e("<li>" + a + this.gridlocalization.groupbystring + "</li>"), l = e("<li>" + a + this.gridlocalization.groupremovestring + "</li>"), h = e('<li type="separator"></li>'), d = e('<li class="filter" style="height: 175px;" ignoretheme="true"><div class="filter"></div></li>'), c = this.gridlocalization.sortascendingstring.length, u = this.gridlocalization.sortascendingstring; this.gridlocalization.sortdescendingstring.length > c && (c = this.gridlocalization.sortdescendingstring.length, u = this.gridlocalization.sortdescendingstring), this.gridlocalization.sortremovestring.length > c && (c = this.gridlocalization.sortremovestring.length, u = this.gridlocalization.sortremovestring), this.groupable && this._initgroupsheader && this.showgroupmenuitems && (this.gridlocalization.groupbystring.length > c && (c = this.gridlocalization.groupbystring.length, u = this.gridlocalization.groupbystring), this.gridlocalization.groupremovestring.length > c && (c = this.gridlocalization.groupremovestring.length, u = this.gridlocalization.groupremovestring)); var p = 200; u = e.trim(u).replace(/\&nbsp\;/gi, "").replace(/\&#160\;/gi, ""); var m = e("<span>" + u + "</span>"); m.addClass(this.toThemeProperty("jqx-menu-item")), this.host.append(m), p = m.outerWidth() + 60, m.remove(); var g = 0; this.sortable && this._togglesort && this.showsortmenuitems && (i.append(s), this.menuitemsarray[0] = s[0], i.append(r), this.menuitemsarray[1] = r[0], i.append(o), this.menuitemsarray[2] = o[0], g = 3), this.groupable && this._initgroupsheader && this.showgroupmenuitems && (i.append(n), this.menuitemsarray[3] = n[0], i.append(l), this.menuitemsarray[4] = l[0], g += 2); var f = g * this._measureMenuElement() + 9, v = !0; if (this.filterable && !this.showfilterrow && this.showfiltermenuitems) { if (!this._initfilterpanel) throw new Error("jqxGrid: Missing reference to jqxgrid.filter.js."); this.menuitemsarray[5] = d[0], this.menuitemsarray[6] = d[0], i.append(h), i.append(d), f += 180, e.jqx.browser.msie && e.jqx.browser.version < 8 && (f += 20); var x = e(d).find("div:first"); p += 20, this._initfilterpanel(this, x, "", p), v = !1, this.removeHandler(e(document), "click.menu" + t.element.id, t._closemenuafterclick, t), this.addHandler(e(document), "click.menu" + t.element.id, t._closemenuafterclick, t) } if (this.gridmenu.append(i), e.jqx.browser.msie && e.jqx.browser.version < 8 && this.filterable && (e("#listBoxfilter1" + this.element.id).css("z-index", 4990), e("#listBoxfilter2" + this.element.id).css("z-index", 4990), e("#listBoxfilter3" + this.element.id).css("z-index", 4990), e("#gridmenu" + this.element.id).css("z-index", 5e3), this.addHandler(e("#gridmenu" + this.element.id), "initialized", function () { e("#menuWrappergridmenu" + t.element.id).css("z-index", 4980) })), void 0 == this.menuitemsarray[0] && (f = 65), this.removeHandler(this.gridmenu, "keydown"), this.addHandler(this.gridmenu, "keydown", function (i) { if (27 == i.keyCode) t.gridmenu.jqxMenu("close"); else if (13 == i.keyCode && t.filterable && t._buildfilter) { var s = "block" == e(e.find("#filter1" + t.element.id)).jqxDropDownList("container").css("display"), r = "block" == e(e.find("#filter2" + t.element.id)).jqxDropDownList("container").css("display"), o = "block" == e(e.find("#filter3" + t.element.id)).jqxDropDownList("container").css("display"); if (e(e.find("#filterclearbutton" + t.element.id)).hasClass("jqx-fill-state-focus")) { a = e.data(document.body, "contextmenu" + t.element.id).column; t._clearfilter(t, t.element, a), t.gridmenu.jqxMenu("close") } else if (!s && !r && !o) { var a = e.data(document.body, "contextmenu" + t.element.id).column; t.gridmenu.jqxMenu("close"), t._buildfilter(t, d, a) } } }), "auto" != this.popupwidth && (p = this.popupwidth), this.gridmenu.jqxMenu({ popupZIndex: 999999, width: p, height: f, autoCloseOnClick: v, autoOpenPopup: !1, mode: "popup", theme: this.theme, animationShowDuration: 0, animationHideDuration: 0, animationShowDelay: 0 }), this.filterable && this.gridmenu.jqxMenu("_setItemProperty", d[0].id, "closeOnClick", !1), this.rtl) { var w = this.that; e.each(i.find("li"), function () { e(this).addClass(w.toTP("jqx-rtl")) }); var b = function (e) { var t = e.find("div"); t.css("float", "right"), t.css("margin-left", "4px"), t.css("margin-right", "-4px") }; b(o), b(r), b(s), b(n), b(l) } this._handlemenueevents() } else this.columnsmenu = !1 }, _arrangemenu: function () { this.gridmenu || this._initmenu(); var t = this.gridlocalization.sortascendingstring.length, i = this.gridlocalization.sortascendingstring; this.gridlocalization.sortdescendingstring.length > t && (t = this.gridlocalization.sortdescendingstring.length, i = this.gridlocalization.sortdescendingstring), this.gridlocalization.sortremovestring.length > t && (t = this.gridlocalization.sortremovestring.length, i = this.gridlocalization.sortremovestring), this.groupable && this._initgroupsheader && (this.gridlocalization.groupbystring.length > t && (t = this.gridlocalization.groupbystring.length, i = this.gridlocalization.groupbystring), this.gridlocalization.groupremovestring.length > t && (t = this.gridlocalization.groupremovestring.length, i = this.gridlocalization.groupremovestring)); var s = 200; i = e.trim(i).replace(/\&nbsp\;/gi, "").replace(/\&#160\;/gi, ""); var r = e("<span>" + i + "</span>"); r.addClass(this.toThemeProperty("jqx-menu-item")), this.host.append(r), s = r.outerWidth() + 60, r.remove(); var o = 0; this.sortable && this._togglesort && this.showsortmenuitems && (o = 3), this.groupable && this._initgroupsheader && this.showgroupmenuitems && (o += 2); var a = 27 * o + 3; this.filterable && this.showfiltermenuitems && this._initfilterpanel && (a += 180, s += 20, e.jqx.browser.msie && e.jqx.browser.version < 8 && (a += 20)), void 0 == this.menuitemsarray[0] && (a = 65), "auto" != this.popupwidth && (s = this.popupwidth), this.gridmenu.jqxMenu({ width: s, height: a }) }, _closemenuafterclick: function (t) { var i = null != t ? t.data : this, s = !1; if (void 0 == t.target || void 0 != t.target && void 0 == t.target.className.indexOf) i.gridmenu.jqxMenu("close"); else if (-1 == t.target.className.indexOf("filter") || -1 != t.target.className.indexOf("jqx-grid-cell-filter")) if (-1 == t.target.className.indexOf("jqx-grid-cell")) { if (!i._hasOpenedMenu || !e(t.target).ischildof(i.gridmenu)) { i.host.coord(); var r = i.gridmenu.coord(), o = t.pageX, a = t.pageY; if (e.each(e(t.target).parents(), function () { return null != this.id && this.id.indexOf && -1 != this.id.indexOf("filter") ? (s = !0, !1) : this.className.indexOf && -1 != this.className.indexOf("filter") && -1 == this.className.indexOf("jqx-grid-cell-filter") ? (s = !0, !1) : this.className.indexOf && -1 != this.className.indexOf("jqx-grid-cell") ? (i.gridmenu.jqxMenu("close"), !1) : this.className.indexOf && -1 != this.className.indexOf("jqx-grid-column") ? (i.gridmenu.jqxMenu("close"), !1) : void 0 }), !s) { try { if ("default" === i.filtermode) { n = e(e.find("#filter1" + i.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup; if ((l = new Date) - n < 100) return; if (l - (h = e(e.find("#filter3" + i.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup) < 100) return; if ("block" == e(e.find("#filter3" + i.element.id)).jqxDropDownList("container").css("display")) return; if ("block" == e(e.find("#filter1" + i.element.id)).jqxDropDownList("container").css("display")) return; if ("block" == e(e.find("#filter2" + i.element.id)).jqxDropDownList("container").css("display")) return; if (i._hasdatefilter && "div" == e(".filtertext1" + i.element.id)[0].nodeName.toLowerCase()) { if ("block" == e(".filtertext1" + i.element.id).jqxDateTimeInput("container").css("display")) return; if ("block" == e(".filtertext2" + i.element.id).jqxDateTimeInput("container").css("display")) return } } else { var n = e(e.find("#filter1" + i.element.id)).data().jqxListBox.instance.vScrollInstance._mouseup, l = new Date; if (l - n < 100) return; var h = e(e.find("#filter1" + i.element.id)).data().jqxListBox.instance.hScrollInstance._mouseup; if (l - h < 100) return } } catch (e) { } o >= r.left && o <= r.left + i.gridmenu.width() && a >= r.top && a <= r.top + i.gridmenu.height() || i.gridmenu.jqxMenu("close") } } } else i.gridmenu.jqxMenu("close") }, _handlemenueevents: function () { var t = this.that; this.removeHandler(this.gridmenu, "closed"), this.addHandler(this.gridmenu, "closed", function (e) { t._closemenu() }), this.removeHandler(this.gridmenu, "itemclick"), this.addHandler(this.gridmenu, "itemclick", function (i) { for (var s = i.args, r = 0; r < t.menuitemsarray.length; r++) if (s == t.menuitemsarray[r]) { if (void 0 != e(s).attr("ignoretheme")) return; var o = e.data(document.body, "contextmenu" + t.element.id), a = o.column; t.filterable && t.gridmenu.jqxMenu("close"); var n = a.displayfield; if (null == n && (n = a.datafield), null != o) switch (r) { case 0: t.sortby(n, "ascending", null); break; case 1: t.sortby(n, "descending", null); break; case 2: t.sortby(n, null, null); break; case 3: t.addgroup(a.datafield); break; case 4: t.removegroup(a.datafield); break; case 5: var l = e(t.menuitemsarray[6]); e(l).css("display", "block") } break } }) }, getdatainformation: function () { var e = this.dataview.totalrecords; return this.summaryrows && (e += this.summaryrows.length), { rowscount: e, sortinformation: this.getsortinformation(), paginginformation: this.getpaginginformation() } }, getsortinformation: function () { return { sortcolumn: this.sortcolumn, sortdirection: this.sortdirection } }, getpaginginformation: function () { return { pagenum: this.dataview.pagenum, pagesize: this.pagesize, pagescount: Math.ceil(this.dataview.totalrecords / this.pagesize) } }, _updaterowsproperties: function () { this._updatehiddenrows(), this._updaterowheights(), this._updaterowdetails() }, _updatehiddenrows: function () { var t = this.that; this.hiddens = new Array; var i = this.hiddenboundrows; e.each(i, function (e) { if (void 0 != this.index) { this.index; var i = t.getrowvisibleindex(e); t.hiddens[i] = this.hidden } }) }, _updaterowheights: function () { var t = this.that; this.heights = new Array; var i = this.heightboundrows; e.each(i, function (e) { if (void 0 != this.index) { this.index; var i = t.getrowvisibleindex(e); t.heights[i] = this.height } }) }, _updaterowdetails: function () { var t = this.that; this.details = new Array; var i = this.detailboundrows; e.each(i, function (e) { if (void 0 != this.index) { this.index; var i = t.getrowvisibleindex(e); t.details[i] = this.details } }) }, _getmenuitembyindex: function (e) { return void 0 == e ? null : this.menuitemsarray[e] }, openmenu: function (t) { if (!this._openingmenu) { this._openingmenu = !0, this.closemenu(); var i = this.getcolumn(t); if (!i.menu) return !1; this.gridmenu || this._initmenu(); var s = i.columnsmenu; e(i.element).trigger("mouseenter"); for (var r = this, o = 0; o < r.columns.records.length; o++) r.columns.records[o].datafield != t && e(r.columns.records[o].element).trigger("mouseleave"); setTimeout(function () { "block" == e(s)[0].style.display && e(s).trigger("click"), r._openingmenu = !1 }, 200) } }, closemenu: function () { this._closemenu() }, _closemenu: function () { if (this._hasOpenedMenu) { null != this.gridmenu && this.gridmenu.jqxMenu("close"); var t = e.data(document.body, "contextmenu" + this.element.id); if (null != t && this.autoshowcolumnsmenubutton) { if (this.enableanimations) { e(t.columnsmenu).animate({ "margin-left": 0 }, "fast", function () { e(t.columnsmenu).css("display", "none") }); i = this.rtl ? 0 : -32; t.column.iconscontainer.animate({ "margin-left": i }, "fast") } else { e(t.columnsmenu).css("display", "none"); var i = this.rtl ? 0 : -32; t.column.iconscontainer.css("margin-left", i) } e.data(document.body, "contextmenu" + this.element.id, null) } this._hasOpenedMenu = !1; var s = this._getmenuitembyindex(5); if (s) { var r = e(s).find("#filter1" + this.element.id), o = e(s).find("#filter2" + this.element.id), a = e(s).find("#filter3" + this.element.id); r.length > 0 && "default" === this.filtermode && (r.jqxDropDownList("hideListBox"), o.jqxDropDownList("hideListBox"), a.jqxDropDownList("hideListBox")) } } }, scrolloffset: function (e, t) { null != e && null != t && void 0 != e && void 0 != t && (this.vScrollBar.jqxScrollBar("setPosition", e), this.hScrollBar.jqxScrollBar("setPosition", t)) }, scrollleft: function (e) { null != e && void 0 != e && "hidden" != this.hScrollBar.css("visibility") && this.hScrollBar.jqxScrollBar("setPosition", e) }, scrolltop: function (e) { null != e && void 0 != e && "hidden" != this.vScrollBar.css("visibility") && this.vScrollBar.jqxScrollBar("setPosition", e) }, beginupdate: function () { this._updating = !0, this._datachanged = !1 }, endupdate: function () { this.resumeupdate() }, resumeupdate: function () { if (this._updating = !1, 1 == this._datachanged) { var e = this.vScrollInstance.value; this.render(!0, !0, !1), this._datachanged = !1, 0 != e && e < this.vScrollInstance.max && this.scrolltop(e) } else this.rendergridcontent(!0), this._renderrows(this.virtualsizeinfo); this.showaggregates && this.renderaggregates && this.renderaggregates(), this._updatecolumnwidths(), this._updatecellwidths(), this._renderrows(this.virtualsizeinfo) }, updating: function () { return this._updating }, showloadelement: function () { this.renderloadelement && this.dataloadelement.html(this.renderloadelement()), e(this.dataloadelement).css("visibility", "visible"), e(this.dataloadelement).css("display", "block") }, hideloadelement: function () { e(this.dataloadelement).css("visibility", "hidden"), e(this.dataloadelement).css("display", "none") }, _updatefocusedfilter: function () { var e = this.that; e.focusedfilter && (e.focusedfilter.focus(), setTimeout(function () { if (e.focusedfilter.focus(), "input" == e.focusedfilter[0].nodeName.toLowerCase()) { var t = e.focusedfilter.val().length; try { if ("selectionStart" in e.focusedfilter[0]) e.focusedfilter[0].setSelectionRange(t, t); else { var i = e.focusedfilter[0].createTextRange(); i.collapse(!0), i.moveEnd("character", t), i.moveStart("character", t), i.select() } } catch (e) { } } }, 10)) }, databind: function (t, i) { if (!0 !== this.loadingstate) { "block" == this.host.css("display") && (this.autoshowloadelement ? (e(this.dataloadelement).css("visibility", "visible"), e(this.dataloadelement).css("display", "block"), this.dataloadelement.width(this.host.width()), this.dataloadelement.height(this.host.height()), this._hideemptyrow()) : (e(this.dataloadelement).css("visibility", "hidden"), e(this.dataloadelement).css("display", "none"))), !this._initgroupsheader && this.groups.length > 0 && (this.groups = new Array); var s = this.that; null == t && (t = {}), t.recordstartindex || (t.recordstartindex = 0), t.recordendindex || (t.recordendindex = 0), void 0 != t.loadallrecords && null != t.loadallrecords || (t.loadallrecords = !0), void 0 != t.sortcomparer && null != t.sortcomparer || (t.sortcomparer = null), void 0 != t.filter && null != t.filter || (t.filter = null), void 0 != t.sort && null != t.sort || (t.sort = null), void 0 != t.data && null != t.data || (t.data = null); var r = null; if (null != t && (r = void 0 != t._source ? t._source.url : t.url), this.dataview = this.dataview || new e.jqx.dataview, e.jqx.dataview.sort && e.extend(this.dataview, new e.jqx.dataview.sort), e.jqx.dataview.grouping && e.extend(this.dataview, new e.jqx.dataview.grouping), this.dataview.suspendupdate(), this.dataview.pageable = this.pageable, this.dataview.groupable = this.groupable, this.dataview.groups = this.groups, this.dataview.virtualmode = this.virtualmode, this.dataview.grid = this, this.dataview._clearcaches(), !this.pageable && this.virtualmode && (this.loadondemand = !0), !s.initializedcall) { if (t._source && this.sortable && (void 0 != t._source.sortcolumn && (this.sortcolumn = t._source.sortcolumn, this.source.sortcolumn = this.sortcolumn, this.dataview.sortfield = t._source.sortcolumn, t._source.sortcolumn = null), void 0 != t._source.sortdirection)) { this.dataview.sortfielddirection = t._source.sortdirection; var o = t._source.sortdirection; if ("a" == o || "asc" == o || "ascending" == o || 1 == o) a = !0; else var a = !1; this.sortdirection = null != o ? { ascending: a, descending: !a } : { ascending: !1, descending: !1 } } this.pageable && t._source && (void 0 != t._source.pagenum && (this.dataview.pagenum = t._source.pagenum), void 0 != t._source.pagesize ? (this.pagesize = t._source.pagesize, this.dataview.pagesize = t._source.pagesize) : (this.dataview.pagesize = t._source.pagesize, void 0 == this.dataview.pagesize && (this.dataview.pagesize = this.pagesize))), this.sortable && (t.sortcolumn && (this.dataview.sortfield = t.sortcolumn), t.sortdirection && (this.dataview.sortfielddirection = t.sortdirection)) } this._loading = !0, this.dataview.update = function (t) { if (!s.pageable && s.virtualmode && (s.loadondemand = !0), s._loading = !1, s.dataview.isupdating() && s.dataview.resumeupdate(!1), s.pageable && s.pagerrenderer) { if (!s._initpager) throw new Error("jqxGrid: Missing reference to jqxgrid.pager.js."); s._initpager() } if (s.source && s.source.sortcolumn && s.sortby && !s.virtualmode) s.render(), s.source._source.sort || s.sortby(s.source.sortcolumn, s.source.sortdirection, s.source.sortcomparer), s.source.sortcolumn = null; else { var r = s.vScrollInstance.value, o = s.hScrollInstance.value, a = s.source ? s.source.datatype : "array"; if ("local" != a || "array" != a) { var n = null == s.virtualsizeinfo || null != s.virtualsizeinfo && 0 == s.virtualsizeinfo.virtualheight; if ("cells" == i) { var l = !1; if (s.filterable && s._initfilterpanel && s.dataview.filters.length && (l = !0), 0 == t) return s.vScrollInstance.isScrolling() || s.hScrollInstance.isScrolling() || (s._cellscache = new Array, s._pagescache = new Array, s._renderrows(s.virtualsizeinfo), s.showfilterrow && s.filterable && s.filterrow && s._updatelistfilters(!0), s.showaggregates && s._updateaggregates && s._updateaggregates()), s.sortcolumn && s.sortby(s.sortcolumn, s.dataview.sortfielddirection, s.source.sortcomparer), s.autoshowloadelement && (e(s.dataloadelement).css("visibility", "hidden"), e(s.dataloadelement).css("display", "none")), void (s.virtualmode && !s._loading && (s.loadondemand = !0, s._renderrows(s.virtualsizeinfo))); l ? i = "filter" : void 0 != s.sortcolumn && (i = "sort") } !s.virtualmode || n || s.virtualmode && s.pageable ? 1 == s.initializedcall && "pagechanged" == i ? (r = 0, s.groupable && s.groups.length > 0 ? (s._render(!0, !0, !1, !1, !1), s._updatecolumnwidths(), s._updatecellwidths(), s._renderrows(s.virtualsizeinfo)) : (s.rendergridcontent(!0), s.pageable && s.updatepagerdetails && (s.updatepagerdetails(), s.autoheight ? (s._updatepageviews(), s.autorowheight && s._renderrows(this.virtualsizeinfo)) : s.autorowheight && (s._updatepageviews(), s._renderrows(this.virtualsizeinfo)))), s.showaggregates && s._updateaggregates && s._updateaggregates()) : "filter" == i ? s.virtualmode ? (s._render(!0, !0, !1, !1, !1), s._updatefocusedfilter(), s._updatecolumnwidths(), s._updatecellwidths(), s._renderrows(s.virtualsizeinfo)) : s._render(!0, !0, !1, !1, !1) : "sort" == i ? (s.virtualmode ? (s.rendergridcontent(!0), s.showaggregates && s._updateaggregates && s._updateaggregates()) : (s._render(!0, !0, !1, !1, !1), s.sortcolumn && !s.source.sort && s.sortby(s.sortcolumn, s.dataview.sortfielddirection, s.source.sortcomparer)), s.source.sort && s._updatefocusedfilter()) : "data" == i ? s._render(!0, !0, !1, !1, !1) : "state" == i ? s._render(!0, !0, !1, s.menuitemsarray && s.menuitemsarray.length > 0 && !s.virtualmode) : s._render(!0, !0, !0, s.menuitemsarray && s.menuitemsarray.length > 0 && !s.virtualmode) : s.virtualmode && 1 == t && !s.pageable ? (s._render(!0, !0, !1, !1, !1), s._updatefocusedfilter(), s._updatecolumnwidths(), s._updatecellwidths(), s._renderrows(s.virtualsizeinfo)) : s.virtualmode && !s.pageable && 0 == t && void 0 != i ? (s.rendergridcontent(!0), s.showaggregates && s._updateaggregates && s._updateaggregates()) : s.virtualmode && 0 == s.dataview.totalrecords && s.dataview.filters.length > 0 ? s._render(!0, !0, !0, s.menuitemsarray && !s.virtualmode) : (s._pagescache = new Array, s._renderrows(s.virtualsizeinfo)), s.vScrollInstance.value != r && r <= s.vScrollInstance.max && s.vScrollInstance.setPosition(r), s.hScrollInstance.value != o && o <= s.hScrollInstance.max && s.hScrollInstance.setPosition(o) } } if (s.autoshowloadelement && (e(s.dataloadelement).css("visibility", "hidden"), e(s.dataloadelement).css("display", "none")), s.pageable && (s.pagerrightbutton && (s.pagerrightbutton.jqxButton({ disabled: !1 }), s.pagerleftbutton.jqxButton({ disabled: !1 }), s.pagershowrowscombo.jqxDropDownList({ disabled: !1 })), s.pagerfirstbutton && (s.pagerfirstbutton.jqxButton({ disabled: !1 }), s.pagerlastbutton.jqxButton({ disabled: !1 }))), s._raiseEvent(11), s.initializedcall) s._updateTouchScrolling(); else { var h = function () { s._raiseEvent(0), s.initializedcall = !0, s.isInitialized = !0, s.ready && s.ready(), s.renderstatusbar && s.renderstatusbar(s.statusbar), s.rendertoolbar && s.rendertoolbar(s.toolbar), s.autoloadstate && s.loadstate && s.loadstate(null, !0) }; if (e.jqx.isHidden(s.host) ? (s.readyInterval && clearInterval(s.readyInterval), s.readyInterval = setInterval(function () { e.jqx.isHidden(s.host) || s.__isRendered && (clearInterval(s.readyInterval), s.readyInterval = null, h(), s._initmenu()) }, 200)) : h(), null != s.width && -1 != s.width.toString().indexOf("%") || null != s.height && s.height.toString().indexOf("%"), "hidden" == s.host.css("visibility")) { e.jqx.browser.msie && e.jqx.browser.version; "visible" == s.vScrollBar.css("visibility") && s.vScrollBar.css("visibility", "inherit"), s.autowidth || "visible" == s.hScrollBar.css("visibility") && s.hScrollBar.css("visibility", "inherit"), s._intervalTimer = setInterval(function () { "visible" == s.host.css("visibility") && (s._updatesize(!0), clearInterval(s._intervalTimer)) }, 100) } } }, this.dataview.databind(t), this.dataview.isupdating() && (void 0 != r ? this.dataview.suspend = !1 : this.dataview.resumeupdate(!1)), this._initializeRows() } }, scrollto: function (e, t) { void 0 != e && this.hScrollInstance.setPosition(e), void 0 != t && this.vScrollInstance.setPosition(t) }, scrollposition: function () { return { top: this.vScrollInstance.value, left: this.hScrollInstance.value } }, ensurerowvisible: function (e) { if (this.autoheight && !this.pageable) return !0; var t = this._getpagesize(), i = Math.floor(e / t); if (this._pageviews[i] || this.pageable || this._updatepageviews(), this.groupable && this.groups.length > 0) return !0; var s = !1; if (this.pageable && this.gotopage && !this.virtualmode) { i = Math.floor(e / t); if (this.dataview.pagenum != i) { if (this.groupable && this.groups.length > 0) return !0; this.gotopage(i), s = !0 } } var r = this.vScrollInstance.value, o = this._gettableheight() - this.rowsheight, a = t * (e / t - i); if (a = Math.round(a), this._pageviews[i]) { n = this._pageviews[i].top + a * this.rowsheight; if (this.rowdetails) for (l = t * i; l < e; l++) this.details[l] && 0 == this.details[l].rowdetailshidden && (n += this.details[l].rowdetailsheight); "deferred" == this.scrollmode && this.vScrollInstance.max <= n + this.rowsheight && (n = this.vScrollInstance.max), n < r ? (this.scrolltop(n), s = !0) : n > r + o + 2 && (this.scrolltop(n - o), s = !0) } else if (this.pageable) { var n = a * this.rowsheight; if (this.rowdetails) for (var l = t * i; l < t * i + a; l++) this.details[l] && 0 == this.details[l].rowdetailshidden && (n += this.details[l].rowdetailsheight); (n < r || n > r + o) && (this.scrollto(0, n), s = !0) } return s }, ensurecellvisible: function (t, i) { var s = this.that, r = this.hScrollBar.jqxScrollBar("value"), o = s.hScrollInstance.max; s.rtl && "visible" != this.hScrollBar.css("visibility") && (o = 0); var a = this.ensurerowvisible(t), n = 0; if (this.columns.records) { var l = r; if ("hidden" == this.hScrollBar.css("visibility")) return; var h = this.host.width(), d = 0, c = "visible" == this.vScrollBar.css("visibility") ? 20 : 0, u = !1; e.each(this.columns.records, function () { if (this.hidden) return !0; if (this.datafield == i) { var e = 0, t = s.rtl ? o - r : l; return n + this.width > t + h - c ? (e = n + this.width - h + c, s.rtl && (e = o - e), s.scrollleft(e), u = !0) : n <= t && (e = n - this.width, s.rtl && (e = o - e), s.scrollleft(e), u = !0), 0 == d ? (s.rtl ? s.scrollleft(o) : s.scrollleft(0), u = !0) : d == s.columns.records.length - 1 && "visible" == s.hScrollBar.css("visibility") && (s.rtl ? s.scrollleft(s.hScrollBar.jqxScrollBar("min")) : s.scrollleft(s.hScrollBar.jqxScrollBar("max")), u = !0), !1 } d++, n += this.width }), u || s.scrollleft(l) } return a }, setrowheight: function (e, t) { if (this._loading) throw new Error("jqxGrid: " + this.loadingerrormessage); return null != e && null != t && (this.heightboundrows[e] = { index: e, height: t }, !((e = this.getrowvisibleindex(e)) < 0) && (this.rows.records[e] ? this.rows.records[e].height = t : (row = new i(this, null), row.height = t, this.rows.replace(e, row)), this.heights[e] = t, this.rendergridcontent(!0), !0)) }, getrowheight: function (e) { return null == e ? null : !((e = this.getrowvisibleindex(e)) < 0) && (this.rows.records[e] ? this.rows.records[e].height : void 0) }, setrowdetails: function (t, i, s, r) { if (!(void 0 == t || null == t || t < 0)) { var o = t + "_"; if (this._rowdetailscache[o]) { var a = this._rowdetailscache[o].element; e(a).remove(), this._rowdetailscache[o] = null } var n = this.dataview.generatekey(); return this.detailboundrows[t] = { index: t, details: { rowdetails: i, rowdetailsheight: s, rowdetailshidden: r, key: n } }, !((t = this.getrowvisibleindex(t)) < 0) && this._setrowdetails(t, i, s, r, n) } }, getcolumn: function (t) { var i = null; return this.columns.records && e.each(this.columns.records, function () { if (this.datafield == t || this.displayfield == t) return i = this, !1 }), i }, _getcolumnindex: function (t) { var i = -1; return this.columns.records && e.each(this.columns.records, function () { if (i++, this.datafield == t) return !1 }), i }, _getcolumnat: function (e) { return this.columns.records[e] }, _getprevvisiblecolumn: function (e) { for (var t = this.that; e > 0;) { e--; var i = t.getcolumnat(e); if (!i) return null; if (!i.hidden) return i } return null }, _getnextvisiblecolumn: function (e) { for (var t = this.that; e < this.columns.records.length;) { e++; var i = t.getcolumnat(e); if (!i) return null; if (!i.hidden) return i } return null }, getcolumnat: function (e) { return isNaN(e) ? null : this.columns.records[e] }, _getcolumn: function (t) { var i = null; return e.each(this._columns, function () { if (this.datafield == t || this.displayfield == t) return i = this, !1 }), i }, _setcolumnproperty: function (e, t, i) { if (null == e || null == t || null == i) return null; t = t.toLowerCase(); var s = this.getcolumn(e); if (null != s) { var r = s[t]; s[t] = i; var o = this._getcolumn(e); switch (null != o && (o[t] = i), this._cellscache = new Array, t) { case "filteritems": this.filterable && this.showfilterrow && this._updatelistfilters(!0, !0); break; case "text": this.prerenderrequired = !0, this._rendercolumnheaders(), this._updatecellwidths(), this._groupsheader() && this._initgroupsheader && this._initgroupsheader(), this._renderrows(this.virtualsizeinfo); break; case "editable": case "resizable": case "draggable": if ("editable" == t && i != r) { if (null != this.editcell && this.endcelledit && this.endcelledit(this.editcell.row, this.editcell.column, !0, !0), "checkbox" == s.columntype && (this.prerenderrequired = !0, this.rendergridcontent(!0, !1), this.updating())) return !1; if (this.updating()) return !1; this._renderrows(this.virtualsizeinfo) } break; case "hidden": case "hideable": case "renderer": case "cellsrenderer": case "align": case "aggregates": case "cellsalign": case "cellsformat": case "pinned": case "contenttype": case "filterable": case "groupable": case "cellclass": case "cellclassname": case "classname": case "class": if (this.prerenderrequired = !0, "pinned" == t && this._initializeColumns(), this.rendergridcontent(!0), this.updating()) return !1; "hidden" == t && (this._updatecolumnwidths(), this._updatecellwidths()), this._renderrows(this.virtualsizeinfo), this.showaggregates && this._updateaggregates && this._updateaggregates(); break; case "width": case "minwidth": case "maxwidth": if (this.updating()) return !1; s._width = null, s._percentagewidth = null, this._updatecolumnwidths(), this._updatecellwidths(), this._renderrows(this.virtualsizeinfo) } } }, _getcolumnproperty: function (e, t) { return null == e || null == t ? null : (t = t.toLowerCase(), this.getcolumn(e)[t]) }, setcolumnproperty: function (e, t, i) { this._setcolumnproperty(e, t, i) }, getcolumnproperty: function (e, t) { return this._getcolumnproperty(e, t) }, hidecolumn: function (e) { this._setcolumnproperty(e, "hidden", !0) }, showcolumn: function (e) { this._setcolumnproperty(e, "hidden", !1) }, iscolumnvisible: function (e) { return !this._getcolumnproperty(e, "hidden") }, pincolumn: function (e) { this._setcolumnproperty(e, "pinned", !0) }, unpincolumn: function (e) { this._setcolumnproperty(e, "pinned", !1) }, iscolumnpinned: function (e) { return this._getcolumnproperty(e, "pinned") }, _setrowdetails: function (e, t, i, s, r) { if (0 == i && (i = 100), null == e || null == i) return !1; if (null != r) this.details[e] = { rowdetails: t, rowdetailsheight: i, rowdetailshidden: s, detailskey: r }; else { for (var o = null != this.details[e] ? this.details[e].detailskey : null, a = { rowdetails: t, rowdetailsheight: i, rowdetailshidden: s, detailskey: o }, n = (this.that, 0) ; n < this.detailboundrows.length; n++) if (void 0 != this.detailboundrows[n]) { var l = this.detailboundrows[n]; if (l.details.detailskey == o) { l.details.rowdetailsheight = a.rowdetailsheight, l.details.rowdetailshidden = a.rowdetailshidden, l.details.rowdetails = a.rowdetails; break } } this.details[e] = a } return this.rendergridcontent(!0), this._updatecolumnwidths(), this._updatecellwidths(), this._renderrows(this.virtualsizeinfo), !0 }, getrowdetails: function (e) { return null != e && (e = this.getrowvisibleindex(e), this._getrowdetails(e)) }, _getrowdetails: function (e) { return null != e && (!(e < 0) && (this.details[e] ? this.details[e] : this.rowdetailstemplate ? this.rowdetailstemplate : void 0)) }, getrecordscount: function () { return this.dataview.totalrecords }, showrowdetails: function (e) { if (this._loading) throw new Error("jqxGrid: " + this.loadingerrormessage); if (null == e) return !1; if ((e = this.getrowvisibleindex(e)) < 0) return !1; var t = this._getrowdetails(e); return this._setrowdetailsvisibility(e, t, !1) }, hiderowdetails: function (e) { if (this._loading) throw new Error("jqxGrid: " + this.loadingerrormessage); if ((e = this.getrowvisibleindex(e)) < 0) return !1; var t = this._getrowdetails(e); return this._setrowdetailsvisibility(e, t, !0) }, _togglerowdetails: function (e) { var t = e.visibleindex, i = this._getrowdetails(t); if (null != i) { var s = this.vScrollInstance.value, r = !i.rowdetailshidden, o = this._setrowdetailsvisibility(t, i, r); return 0 !== s && "hidden" !== this.vScrollBar.css("visibility") && (s <= this.vScrollInstance.max ? this.vScrollInstance.setPosition(s) : this.vScrollInstance.setPosition(this.vScrollInstance.max)), o } return !1 }, _setrowdetailsvisibility: function (e, t, i) { if (this.rowdetailstemplate && (this.details || (this.details = new Array), !this.details[e])) { this.details[e] = { rowdetailshidden: this.rowdetailstemplate.rowdetailshidden, rowdetailsheight: this.rowdetailstemplate.rowdetailsheight, rowdetails: this.rowdetailstemplate.rowdetails }; var s = this.dataview.generatekey(); this.details[e].detailskey = s, this.detailboundrows[e] = { index: e, details: this.details[e] } } if (null == t) return !1; this.details[e].rowdetailshidden = i; var r = this.details[e]; return i ? this._raiseEvent(21, { rowindex: e, details: r.rowdetails, height: r.rowdetailsheight }) : this._raiseEvent(20, { rowindex: e, details: r.rowdetails, height: r.rowdetailsheight }), this._setrowdetails(e, r.rowdetails, r.rowdetailsheight, r.rowdetailshidden) }, getrowvisibleindex: function (e) { if (void 0 == e || null == e || e < 0) return !1; if (this.virtualmode) { var t = this.dataview.loadedrecords[e]; return void 0 == t ? -1 : t.visibleindex } return this.getrowdisplayindex(e) }, hiderow: function (e) { if (this._loading) throw new Error("jqxGrid: " + this.loadingerrormessage); return !(void 0 == e || null == e || e < 0) && (null != e && (this.hiddenboundrows[e] = { index: e, hidden: !0 }, e = this.getrowvisibleindex(e), this._setrowvisibility(e, !0))) }, showrow: function (e) { if (this._loading) throw new Error("jqxGrid: " + this.loadingerrormessage); return !(void 0 == e || null == e || e < 0) && (null != e && (this.hiddenboundrows[e] = { index: e, hidden: !1 }, e = this.getrowvisibleindex(e), this._setrowvisibility(e, !1))) }, isrowhiddenat: function (e) { return null == e ? null : (e = this.getrowvisibleindex(e), this.rows.records[e] ? this.rows.records[e].hidden : void 0) }, _setrowvisibility: function (e, t, i) { return null != e && (this.hiddens[e] = t, !(void 0 != i && !i) && (this.rendergridcontent(!0), !0)) }, _loadrows: function () { if (this._pageviews[this.dataview.pagenum] || this.pageable) { var e = this.pageable ? 0 : this._pageviews[this.dataview.pagenum].top; if (!this.pageable && void 0 != this._pagescache[this.dataview.pagenum]) return null; if (this.virtualsizeinfo) { var t = this.that, s = new Array, r = new Array, o = t.groupable && t.groups.length > 0, a = (this.dataview.totalrecords, this.virtualsizeinfo.virtualheight, 0); this.rows.beginupdate(); var n = this.dataview.pagesize; this.pageable && o && (n = this.dataview.rows.length); for (var l = 0; l < n && !(l >= this.dataview.rows.length) ; l++) { var h = this.dataview.rows[l], d = null; t.rows.records[h.visibleindex] ? (d = t.rows.records[h.visibleindex]).setdata(h) : d = new i(t, h), d.hidden = this.hiddens[d.visibleindex], this.rowdetailstemplate && (d.rowdetails = this.rowdetailstemplate.rowdetails, d.rowdetailsheight = this.rowdetailstemplate.rowdetailsheight, d.rowdetailshidden = this.rowdetailstemplate.rowdetailshidden); var c = this.details[d.visibleindex]; if (c ? (d.rowdetails = c.rowdetails, d.rowdetailsheight = c.rowdetailsheight, d.rowdetailshidden = c.rowdetailshidden) : this.rowdetailstemplate || (d.rowdetails = null), o && this.pageable && null != d.parentbounddata) { var u = s[d.parentbounddata.uniqueid]; if (null != u) { var p = this._findgroupstate(u.uniqueid); this._setsubgroupsvisibility && this._setsubgroupsvisibility(this, d.parentbounddata, !p, !1), d.hidden = this.hiddens[d.visibleindex] } null != u && void 0 != u && (d.parentrow = u, u.subrows[u.subrows.length++] = d) } if (!d.hidden) { var m = h.visibleindex; this.heights[m] || (this.heights[m] = this.rowsheight), d.height = this.heights[m], this.rowdetails && d.rowdetails && !d.rowdetailshidden && (d.height += d.rowdetailsheight), s[d.uniqueid] = d, r[a++] = d, d.top = e, e += d.height; var g = m; t.rows.replace(g, d) } } (this.autoheight || this.pageable) && this.autorowheight && this._pageviews && this._pageviews.length > 0 && (this._pageviews[0].height = e), this.rows.resumeupdate(), r.length > 0 && (this._pagescache[this.dataview.pagenum] = r) } } }, _gettableheight: function () { if (void 0 != this.tableheight) return this.tableheight; var e = this.host.height(); if (this.columnsheader) { var t = this.columnsheader.outerHeight(); this.showheader || (t = 0) } return e -= t, "visible" == this.hScrollBar[0].style.visibility && (e -= this.hScrollBar.outerHeight()), this.pageable && (e -= this.pager.outerHeight()), this._groupsheader() && (e -= this.groupsheader.outerHeight()), this.showtoolbar && (e -= this.toolbarheight), this.showstatusbar && (e -= this.statusbarheight), e > 0 ? (this.tableheight = e, e) : this.host.height() }, _getpagesize: function () { if (this.pageable) return this.pagesize; if (this.virtualmode) { var e = Math.round(this.host.height()) + 2 * this.rowsheight; return Math.round(e / this.rowsheight) } return this.autoheight || this.autorowheight ? 0 == this.dataview.totalrows ? 1 : this.dataview.totalrows : this.dataview.totalrows < 100 && this.dataview.totalrecords < 100 && this.dataview.totalrows > 0 ? this.dataview.totalrows : 100 }, _calculatevirtualheight: function () { this.that; var e = Math.round(this.host.height()) + 2 * this.rowsheight; realheight = this._gettableheight(); var t = Math.round(e / this.rowsheight); this.heights = new Array, this.hiddens = new Array, this.details = new Array, this.expandedgroups = new Array, this.hiddenboundrows = new Array, this.heightboundrows = new Array, this.detailboundrows = new Array; var i = Math.max(this.dataview.totalrows, this.dataview.totalrecords); this.pageable && (i = this.pagesize, this.pagesize > Math.max(this.dataview.totalrows, this.dataview.totalrecords) && this.autoheight ? i = Math.max(this.dataview.totalrows, this.dataview.totalrecords) : this.autoheight || this.dataview.totalrows < this.pagesize && (i = Math.max(this.dataview.totalrows, this.dataview.totalrecords))); var s = i * this.rowsheight, r = 0, o = 0, a = 0, n = this._getpagesize(), l = n * this.rowsheight, h = 0; if (!this.pageable && this.autoheight && (t = i), i + n > 0) for (; h <= i + n;) { if (r += l, h - n < i && h >= i) { var d = h - i; d > 0 && (a -= l, this._pageviews[o - 1] = { top: a, height: l - d * this.rowsheight }); break } this._pageviews[o++] = { top: a, height: l }, a = r, h += n } return 1 != this.resizingGrid && this.vScrollBar.jqxScrollBar({ value: 0 }), s > realheight && !this.autoheight ? (this.vScrollBar.css("visibility", "visible"), "deferred" == this.scrollmode ? this.vScrollBar.jqxScrollBar({ max: s }) : this.vScrollBar.jqxScrollBar({ max: s - realheight })) : this.vScrollBar.css("visibility", "hidden"), this.dataview.pagesize = n, this.dataview.updateview(), { visiblerecords: t, virtualheight: s } }, _updatepageviews: function () { if (!this.updating()) { this._pagescache = new Array, this._pageviews = new Array, this.tableheight = null; var e = this.that, t = Math.round(this.host.height()) + 2 * this.rowsheight, i = Math.round(t / this.rowsheight), s = Math.max(this.dataview.totalrows, this.dataview.totalrecords), r = s * this.rowsheight, o = 0, a = 0, n = 0, l = 0, h = 0, d = this._getpagesize(); if (this.pageable) this._updatepagedview && (r = this._updatepagedview(s, r, 0)), this.autoheight && this._arrange(); else for (var c = 0; c < s; c++) { var u = { index: c, height: this.heights[c], hidden: this.hiddens[c], details: this.details[c] }; if (void 0 == this.heights[c] && (this.heights[c] = this.rowsheight, u.height = this.rowsheight), void 0 == this.hiddens[c] && (this.hiddens[c] = !1, u.hidden = !1), void 0 == this.details[c] && (this.details[c] = null), u.height != e.rowsheight && (r -= e.rowsheight, r += u.height), u.hidden) r -= u.height; else { a += u.height; var p = 0; this.rowdetails && (this.rowdetailstemplate && (u.details || (u.details = this.rowdetailstemplate)), u.details && u.details.rowdetails && !u.details.rowdetailshidden && (a += p = u.details.rowdetailsheight, r += p)), o += u.height + p } (++h >= d || c == s - 1) && (this._pageviews[n++] = { top: l, height: a }, a = 0, l = o, h = 0) } var m = this._gettableheight(); if (r > m) if (this.pageable && this.gotopage && (r = this._pageviews[0].height) < 0 && (r = this._pageviews[0].height), "visible" != this.vScrollBar.css("visibility") && this.vScrollBar.css("visibility", "visible"), (r <= m || this.autoheight) && this.vScrollBar.css("visibility", "hidden"), r - m > 0) { if ("deferred" != this.scrollmode) { var g = r - m, f = this.vScrollInstance.max; this.vScrollBar.jqxScrollBar({ max: g }), g != f && this.vScrollBar.jqxScrollBar({ value: 0 }) } } else this.vScrollBar.jqxScrollBar({ value: 0, max: r }); else this._loading || this.vScrollBar.css("visibility", "hidden"), this.vScrollBar.jqxScrollBar({ value: 0 }); this._arrange(), this.autoheight && (i = Math.round(this.host.height() / this.rowsheight)), this.virtualsizeinfo = { visiblerecords: i, virtualheight: r } } }, updatebounddata: function (e) { "data" == e || "sort" == e || "filter" == e || "cells" == e || "pagechanged" == e || "pagesizechanged" == e || this.virtualmode || (this.virtualsizeinfo = null, this.showfilterrow && this.filterable && this.filterrow ? (this.clearfilters && this.clearfilters(!1), this.filterrow.remove(), this._filterrowcache = new Array, this.filterrow = null) : this.filterable && this.clearfilters && this.clearfilters(!1), this.groupable && (this.dataview.groups = [], this.groups = []), this.pageable && (this.pagenum = 0, this.dataview.pagenum = 0), this.sortable && (this.sortcolumn = null, this.sortdirection = "", this.dataview.sortfielddirection = "", this.dataview.clearsortdata())), this.databind(this.source, e) }, refreshdata: function () { this._refreshdataview(), this.render() }, _updatevscrollbarmax: function () { if (this._pageviews && this._pageviews.length > 0) { var e = this._pageviews[0].height; !this.virtualmode && this.pageable || (e = this.virtualsizeinfo.virtualheight); var t = this._gettableheight(); if (e > t) if (this.pageable && this.gotopage && (e = this._pageviews[0].height) < 0 && (e = this._pageviews[0].height), "visible" != this.vScrollBar.css("visibility") && this.vScrollBar.css("visibility", "visible"), (e <= t || this.autoheight) && this.vScrollBar.css("visibility", "hidden"), e - t > 0) { var i = e - t; this.vScrollBar.jqxScrollBar({ max: i }) } else this.vScrollBar.jqxScrollBar({ value: 0, max: e }); else this.vScrollBar.css("visibility", "hidden"), this.vScrollBar.jqxScrollBar({ value: 0 }) } }, _refreshdataview: function () { this.dataview.refresh() }, refresh: function (t) { if (1 != t) { if (e.jqx.isHidden(this.host)) return; null != this.virtualsizeinfo && (this._cellscache = new Array, this._renderrows(this.virtualsizeinfo), this._updatesize()) } }, render: function () { this._render(!0, !0, !0, !0) }, invalidate: function () { this.virtualsizeinfo && (this._updatecolumnwidths(), this._updatecellwidths(), this._renderrows(this.virtualsizeinfo)) }, clear: function () { this.databind(null), this.render() }, _preparecolumngroups: function () { var e = this.columnsheight; if (this.columngroups) { if (this.columnshierarchy = new Array, this.columngroups.length) { for (var t = this, i = 0; i < this.columngroups.length; i++) this.columngroups[i].parent = null, this.columngroups[i].groups = null; for (i = 0; i < this.columns.records.length; i++) this.columns.records[i].parent = null, this.columns.records[i].groups = null; for (var s = function (e) { for (var i = 0; i < t.columngroups.length; i++) { var s = t.columngroups[i]; if (s.name === e) return s } return null }, i = 0; i < this.columngroups.length; i++) (h = this.columngroups[i]).groups || (h.groups = null), h.parentgroup && (r = s(h.parentgroup)) && (h.parent = r, r.groups || (r.groups = new Array), -1 === r.groups.indexOf(h) && r.groups.push(h)); for (i = 0; i < this.columns.records.length; i++) if ((h = this.columns.records[i]).columngroup) { var r = s(h.columngroup); r && (r.groups || (r.groups = new Array), h.parent = r, -1 === r.groups.indexOf(h) && r.groups.push(h)) } for (var o = 0, i = 0; i < this.columns.records.length; i++) { a = h = this.columns.records[i]; for (h.level = 0; a.parent;) a = a.parent, h.level++; var a = h, n = h.level; for (o = Math.max(o, h.level) ; a.parent;) (a = a.parent) && (a.level = --n) } for (var l = function (e) { var t = new Array; if (e.columngroup && t.push(e), e.groups) for (var i = 0; i < e.groups.length; i++) if (e.groups[i].columngroup) t.push(e.groups[i]); else if (e.groups[i].groups) for (var s = l(e.groups[i]), r = 0; r < s.length; r++) t.push(s[r]); return t }, i = 0; i < this.columngroups.length; i++) { var h = this.columngroups[i], d = l(h); h.columns = d; for (var c = new Array, u = 0, p = 0; p < d.length; p++) c.push(this.columns.records.indexOf(d[p])), d[p].pinned && u++; if (0 != u) throw new Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group cannot be pinned."); c.sort(function (e, t) { return e = parseInt(e), t = parseInt(t), e < t ? -1 : e > t ? 1 : 0 }); for (var m = 1; m < c.length; m++) if (c[m] != c[m - 1] + 1) throw new Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group are expected to be siblings in the columns array.") } } this.columngroupslevel = 1 + o, e = this.columngroupslevel * this.columnsheight } return e }, _render: function (t, i, s, r, o) { if (null != this.dataview && !this._loading) { if (e.jqx.isHidden(this.host)) { var a = this; return a.___hiddenTimer && (clearInterval(a.___hiddenTimer), a.___hiddenTimer = null), void (this.___hiddenTimer = setInterval(function () { e.jqx.isHidden(a.host) || (clearInterval(a.___hiddenTimer), a.render()) }, 300)) } null != this.editcell && this.endcelledit && this.endcelledit(this.editcell.row, this.editcell.column, !0, !1), this.validationpopup = null, this._removeHandlers(), this._addHandlers(), this._initializeRows(), this._requiresupdate = void 0 == i || i, this._newmax = null, s && (this._requiresupdate || 0 != r && this._initmenu(), null == this.columns ? this.columns = new e.jqx.collection(this.element) : this._initializeColumns()), this.tableheight = null, this._pagescache = new Array, this._pageviews = new Array, this.visiblerows = new Array, this.hittestinfo = new Array, this._requiresupdate && (this._clearcaches(), 1 == r && this._initmenu()), this.virtualsizeinfo = null, this.prerenderrequired = !0, (this.groupable && this.groups.length > 0 && this.rowdetails || this.rowdetails) && this.gridcontent && (this._rowdetailscache = new Array, this._rowdetailselementscache = new Array, this.detailboundrows = new Array, this.details = new Array, e.jqx.utilities.html(this.gridcontent, ""), this.gridcontent = null), this.gridcontent && this.editable && this._destroyeditors && this._destroyeditors(), s ? (this.filterrow && this.filterrow.detach(), e.jqx.utilities.html(this.content, ""), this.columnsheader = this.columnsheader || e('<div style="overflow: hidden;"></div>'), this.columnsheader.remove(), this.columnsheader.addClass(this.toTP("jqx-widget-header")), this.columnsheader.addClass(this.toTP("jqx-grid-header"))) : this.gridcontent && e.jqx.utilities.html(this.gridcontent, ""), this.showheader ? this.columnsheader && this.columnsheader.css("display", "block") : this.columnsheader.css("display", "none"), this.gridcontent = this.gridcontent || e('<div style="width: 100%; overflow: hidden; position: absolute;"></div>'), this.gridcontent.remove(); var n = this.columnsheight; if (n = this._preparecolumngroups(), this.showfilterrow && this.filterable ? this.columnsheader.height(n + this.filterrowheight) : this.columnsheader.height(n), this.content.append(this.columnsheader), this.content.append(this.gridcontent), this._arrange(), this._initgroupsheader && this._initgroupsheader(), this.selectionarea = this.selectionarea || e("<div style='z-index: 99999; visibility: hidden; position: absolute;'></div>"), this.selectionarea.addClass(this.toThemeProperty("jqx-grid-selectionarea")), this.selectionarea.addClass(this.toThemeProperty("jqx-fill-state-pressed")), this.content.append(this.selectionarea), this.tableheight = null, this.rendergridcontent(!1, s), this.groups.length > 0 && this.groupable) { var l = this.vScrollBar[0].style.visibility; this.suspendgroupevents = !0, this.collapseallgroups && (this.groupsexpandedbydefault ? this.expandallgroups(!1) : (this.collapseallgroups(!1), this._updatescrollbarsafterrowsprerender())), this.vScrollBar[0].style.visibility != l && (this._updatecolumnwidths(), this._updatecellwidths()), this.suspendgroupevents = !1 } this.pageable && this.updatepagerdetails && (this.updatepagerdetails(), this.autoheight && this._updatepageviews(), this.autorowheight && (this.autoheight || this._updatepageviews(), this._renderrows(this.virtualsizeinfo))), this.showaggregates && this._updateaggregates && this._updateaggregates(), this._addoverlayelement(), "deferred" == this.scrollmode && this._addscrollelement(), this.showfilterrow && this.filterable && this.filterrow && (void 0 == o || 1 == o) && this._updatelistfilters(!s), this.rendered && this.rendered("full"), this.__isRendered = !0 } }, _addoverlayelement: function () { if (this.autoheight) return this._overlayElement && this._overlayElement.remove(), void this._updateTouchScrolling(); var t = e.jqx.utilities.getBrowser(); if ("msie" == t.browser && parseInt(t.version) < 9 || this.isTouchDevice()) if (this._overlayElement && this._overlayElement.remove(), this._overlayElement = e("<div style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>"), this._overlayElement.css("background", "white"), this._overlayElement.css("z-index", 18e3), this._overlayElement.css("opacity", .001), this.isTouchDevice()) if ("hidden" !== this.vScrollBar.css("visibility") || "hidden" !== this.hScrollBar.css("visibility")) { var i = 0; "checkbox" == this.selectionmode && (i += 30), (this.groupable || this.rowdetails) && this._overlayElement.css("left", 30 * (this.groups.length + (this.rowdetails ? 1 : 0))); var s = this._overlayElement.css("left"); this._overlayElement.css("left", s + i) } else this._overlayElement && this._overlayElement.remove(); else this.content.prepend(this._overlayElement); this._updateTouchScrolling() }, _addscrollelement: function () { this._scrollelement && this._scrollelement.remove(), this._scrollelementoverlay && this._scrollelementoverlay.remove(), this._scrollelementoverlay = e("<div style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>"), this._scrollelementoverlay.css("background", "black"), this._scrollelementoverlay.css("z-index", 18e3), this._scrollelementoverlay.css("opacity", .1), this._scrollelement = e("<span style='visibility: hidden; top: 50%; right: 10px; position: absolute;'></span>"), this._scrollelement.css("z-index", 18005), this._scrollelement.addClass(this.toThemeProperty("jqx-button")), this._scrollelement.addClass(this.toThemeProperty("jqx-fill-state-normal")), this._scrollelement.addClass(this.toThemeProperty("jqx-rc-all")), this._scrollelement.addClass(this.toThemeProperty("jqx-shadow")), this.content.prepend(this._scrollelement), this.content.prepend(this._scrollelementoverlay) }, rendergridcontent: function (e, t) { if (this.updating()) return !1; void 0 != e && null != e || (e = !1), this._requiresupdate = e; var i = this.prerenderrequired; this.prerenderrequired && this._arrange(); var s = this.that; if (null != (t = t) && void 0 != t || (t = !0), this.tableheight = null, s.virtualsizeinfo = s.virtualsizeinfo || s._calculatevirtualheight(), s.pageable && !s.autoheight && s.dataview.totalrows < s.pagesize && (s._requiresupdate = !0), t ? s._rendercolumnheaders() : (this._rendersortcolumn && this._rendersortcolumn(), this._renderfiltercolumn && this._renderfiltercolumn()), s._renderrows(s.virtualsizeinfo), this.gridcontent && (0 != this.gridcontent[0].scrollTop && (this.gridcontent[0].scrollTop = 0), 0 != this.gridcontent[0].scrollLeft && (this.gridcontent[0].scrollLeft = 0)), i) { var r = this.tableheight; this._arrange(), r != this.tableheight && this.autoheight && s._renderrows(s.virtualsizeinfo) } return this.rtl && this._renderhorizontalscroll(), this.autosavestate && null != this.initializedcall && this.savestate && this.savestate(), !0 }, _updatecolumnwidths: function () { var t = this.host.width(), i = t, s = ""; if (void 0 != this.columns && void 0 != this.columns.records) { var r = this.that, o = this.rowdetails && this.showrowdetailscolumn ? (1 + this.groups.length) * this.groupindentwidth : this.groups.length * this.groupindentwidth; e.each(this.columns.records, function (e, a) { if (!this.hidden || !this.hideable) if (-1 != this.width.toString().indexOf("%") || void 0 != this._percentagewidth) { var a = 0, n = "hidden" == r.vScrollBar[0].style.visibility ? 0 : r.scrollbarsize + 5, l = i; a = parseFloat(this.width) * l / 100, n += o, void 0 != this._percentagewidth && (a = parseFloat(this._percentagewidth) * (l - n) / 100), a < this.minwidth && "auto" != this.minwidth && (a = this.minwidth), a > this.maxwidth && "auto" != this.maxwidth && (a = this.maxwidth), t -= a } else "auto" == this.width || this._width ? s += this.text : t -= this.width }); var a = this._gettableheight(); if (!this.autoheight && this.virtualsizeinfo && this.virtualsizeinfo.virtualheight > a) if (this.groupable && this.groups.length > 0) if (this.dataview && this.dataview.loadedrootgroups && !this.groupsexpandedbydefault) { var n = this.dataview.loadedrootgroups.length * this.rowsheight; if (this.pageable) for (var l = 0; l < this.dataview.rows.length; l++) this.dataview.rows[l].group && 0 === this.dataview.rows[l].level && (n += this.rowsheight); n > a ? (t -= this.scrollbarsize + 5, i -= this.scrollbarsize + 5) : "visible" == this.vScrollBar.css("visibility") && (t -= this.scrollbarsize + 5, i -= this.scrollbarsize + 5) } else t -= this.scrollbarsize + 5, i -= this.scrollbarsize + 5; else t -= this.scrollbarsize + 5, i -= this.scrollbarsize + 5; o = this.rowdetails && this.showrowdetailscolumn ? (1 + this.groups.length) * this.groupindentwidth : this.groups.length * this.groupindentwidth; if (i -= o, this.columnsheader) { var h = this.columnsheader.find("#columntable" + this.element.id); if (0 != h.length) { var d = h.find(".jqx-grid-column-header"), c = 0; e.each(this.columns.records, function (r, o) { var a = e(d[r]), n = !1, l = this.width; if (-1 == this.width.toString().indexOf("%") && void 0 == this._percentagewidth || (l = void 0 != this._percentagewidth ? parseFloat(this._percentagewidth) * i / 100 : parseFloat(this.width) * i / 100, n = !0), "auto" == this.width || this._width || n) if (n) l < this.minwidth && "auto" != this.minwidth && (l = this.minwidth, this.width = l), l > this.maxwidth && "auto" != this.maxwidth && (l = this.maxwidth, this.width = l), parseInt(a[0].style.width) != l && (a.width(l), this.width = l); else { var h = Math.floor(t * (this.text.length / s.length)); isNaN(h) && (h = this.minwidth), h < 0 && ($element = e("<span>" + this.text + "</span>"), e(document.body).append($element), h = 10 + $element.width(), $element.remove()), h < this.minwidth && (h = this.minwidth), h > this.maxwidth && (h = this.maxwidth), this._width = "auto", this.width = h, a.width(this.width) } else parseInt(a[0].style.width) != this.width && a.width(this.width); parseInt(a[0].style.left) != c && a.css("left", c), this.hidden && this.hideable || (c += this.width), this._requirewidthupdate = !0 }), this.columnsheader.width(2 + c), h.width(this.columnsheader.width()), this.columnsheader[0].style.visibility = 0 == c ? "hidden" : "inherit", this._resizecolumngroups(), this.showfilterrow && this.filterrow && (this.filterrow.width(this.columnsheader.width()), this._updatefilterrowui()), this.autowidth && this._arrange() } } } }, _rendercolumnheaders: function () { var t = this.that; if (!this.prerenderrequired) return this._rendersortcolumn && this._rendersortcolumn(), this._renderfiltercolumn && this._renderfiltercolumn(), void (this.showfilterrow && this.filterrow && (this.filterrow.width(this.columnsheader.width()), this._updatefilterrowui())); this._columnsbydatafield = new Array, this.columnsheader.find("#columntable" + this.element.id).remove(); var i = e('<div id="columntable' + this.element.id + '" style="height: 100%; position: relative;"></div>'); i[0].cells = new Array; var s = 0, r = 0, o = "", a = this.host.width(), n = a, l = new Array, h = new Array, d = this.rowdetails && this.showrowdetailscolumn ? (1 + this.groups.length) * this.groupindentwidth : this.groups.length * this.groupindentwidth; if (e.each(this.columns.records, function (e, i) { if (!this.hidden || !this.hideable) if ("auto" == this.width || this._width) o += this.text; else if (this.width < this.minwidth && "auto" != this.minwidth) a -= this.minwidth; else if (this.width > this.maxwidth && "auto" != this.maxwidth) a -= this.maxwidth; else if (-1 != this.width.toString().indexOf("%")) { var i = 0, s = "hidden" == t.vScrollBar[0].style.visibility ? 0 : t.scrollbarsize + 5; s += d, (i = parseFloat(this.width) * (n - s) / 100) < this.minwidth && "auto" != this.minwidth && (i = this.minwidth), i > this.maxwidth && "auto" != this.maxwidth && (i = this.maxwidth), a -= i } else "string" == typeof this.width && (this.width = parseInt(this.width)), a -= this.width; this.pinned || this.grouped || this.checkboxcolumn ? (t._haspinned && (this.pinned = !0), l[l.length] = this) : h[h.length] = this }), this.rtl) { var c = 0; l.reverse(); for (u = this.columns.records.length - 1; u >= this.columns.records.length - l.length; u--) this.columns.replace(u, l[c++]); for (p = 0; p < h.length; p++) this.columns.replace(p, h[p]) } else { for (var u = 0; u < l.length; u++) this.columns.replace(u, l[u]); for (var p = 0; p < h.length; p++) this.columns.replace(l.length + p, h[p]) } var m = this.headerZIndex, g = t.groupable ? t.groups.length : 0; this.rowdetails && this.showrowdetailscolumn && g++; var f = t.columnsheader.height(); this.showfilterrow && (this.columngroups ? f -= this.filterrowheight : f = this.columnsheight); var v = this._gettableheight(); if (this.virtualsizeinfo && this.virtualsizeinfo.virtualheight > v) if (this.groupable && this.groups.length > 0) if (this.dataview && this.dataview.loadedrootgroups && !this.groupsexpandedbydefault) { w = 0; if (this.pageable) { if (this.pageable) for (var x = 0; x < this.dataview.rows.length; x++) this.dataview.rows[x].group && 0 === this.dataview.rows[x].level && (w += this.rowsheight) } else var w = this.dataview.loadedrootgroups.length * this.rowsheight; w > v && (a -= this.scrollbarsize + 5, n -= this.scrollbarsize + 5) } else a -= this.scrollbarsize + 5, n -= this.scrollbarsize + 5; else this.autoheight || (a -= this.scrollbarsize + 5, n -= this.scrollbarsize + 5); n -= d; var b = function (e, i) { var s = t.columngroupslevel * t.columnsheight; return s -= i.level * t.columnsheight }; if (e.each(this.columns.records, function (l, h) { this.height = t.columnsheight, t.columngroups && t.columngroups.length && (this.height = b(this.datafield, this), f = this.height); var d = t.toTP("jqx-grid-column-header") + " " + t.toTP("jqx-widget-header"); t.rtl && (d += " " + t.toTP("jqx-grid-column-header-rtl")); var c = t.rtl ? 150 + m + 1 : 150 + m - 1, u = t.rtl ? m++ : m--, p = e('<div role="columnheader" style="z-index: ' + u + ';position: absolute; height: 100%;" class="' + d + '"><div style="height: 100%; width: 100%;"></div></div>'); t.columngroups && (p[0].style.height = f + "px", p[0].style.bottom = "0px", this.pinned && (p[0].style.zIndex = c)), this.uielement = p, "" != this.classname && this.classname && p.addClass(this.classname); var v = this.width, x = !1; if (null === this.width && (this.width = "auto"), -1 == this.width.toString().indexOf("%") && void 0 == this._percentagewidth || (v = void 0 != this._percentagewidth ? parseFloat(this._percentagewidth) * n / 100 : parseFloat(this.width) * n / 100, x = !0), "auto" == this.width || this._width || x) { if (x) v < this.minwidth && "auto" != this.minwidth && (v = this.minwidth), v > this.maxwidth && "auto" != this.maxwidth && (v = this.maxwidth), void 0 != this._percentagewidth && -1 == this.width.toString().indexOf("%") || (this._percentagewidth = this.width), p.width(v), this.width = v; else if (!this.hidden) { var w = Math.floor(a * (this.text.length / o.length)); isNaN(w) && (w = this.minwidth), w < 0 && ($element = e("<span>" + this.text + "</span>"), e(document.body).append($element), w = 10 + $element.width(), $element.remove()), w < this.minwidth && (w = this.minwidth), w > this.maxwidth && (w = this.maxwidth), this._width = "auto", this.width = w, v = this.width, p.width(this.width) } } else v < this.minwidth && "auto" != this.minwidth && (v = this.minwidth, this.width = v), v > this.maxwidth && "auto" != this.maxwidth && (v = this.maxwidth, this.width = v), p[0].style.width = parseInt(v) + "px"; this.hidden && this.hideable && p.css("display", "none"); var _ = e(p.children()[0]), y = t.rtl ? t.toTP("jqx-grid-column-menubutton") + " " + t.toTP("jqx-grid-column-menubutton-rtl") : t.toTP("jqx-grid-column-menubutton"); y += " " + t.toTP("jqx-icon-arrow-down"); var j = e('<div style="height: ' + f + 'px; display: none; left: 100%; top: 0%; position: absolute;"><div class="' + y + '" style="width: 100%; height:100%;"></div></div>'); t.enableanimations || j.css("margin-left", -16), t.rtl && j.css("left", "0px"), this.columnsmenu = j[0], i[0].cells[l] = p[0], j[0].style.width = parseInt(t.columnsmenuwidth) + "px"; var q = t.columnsmenu, T = !1, C = !1, S = t.groupable && g > 0 && s < g || t.rowdetails && s < g; if (t.rtl && (S = t.groupable && g > 0 && s < g || t.rowdetails && s < g, S &= l > t.columns.records.length - 1 - g), S) s++, q &= !1, this.sortable = !1, this.editable = !1, C = !0; else { var k = null != this.renderer ? this.renderer(this.text, this.align, f) : t._rendercolumnheader(this.text, this.align, f, t); null == k && (k = t._rendercolumnheader(this.text, this.align, f, t)), null != this.renderer && (k = e(k)), q &= !0, T = !0 } if (t.WinJS ? MSApp.execUnsafeLocalFunction(function () { _.append(e(k)) }) : this.renderer ? _.append(e(k)) : k && (_[0].innerHTML = k), null != k) { var I = e('<div class="iconscontainer" style="height: ' + f + 'px; margin-left: -32px; display: block; position: absolute; left: 100%; top: 0%; width: 32px;"><div class="filtericon ' + t.toTP("jqx-widget-header") + '" style="height: ' + f + 'px; float: right; display: none; width: 16px;"><div class="' + t.toTP("jqx-grid-column-filterbutton") + '" style="width: 100%; height:100%;"></div></div><div class="sortasc ' + t.toTP("jqx-widget-header") + '" style="height: ' + f + 'px; float: right; display: none; width: 16px;"><div class="' + t.toTP("jqx-grid-column-sortascbutton") + " " + t.toTP("jqx-icon-arrow-up") + '" style="width: 100%; height:100%;"></div></div><div class="sortdesc ' + t.toTP("jqx-widget-header") + '" style="height: ' + f + 'px; float: right; display: none; width: 16px;"><div class="' + t.toTP("jqx-grid-column-sortdescbutton") + " " + t.toTP("jqx-icon-arrow-down") + '" style="width: 100%; height:100%;"></div></div></div>'); j.addClass(t.toTP("jqx-widget-header")), _.append(I); var D = I.children(); this.sortasc = D[1], this.sortdesc = D[2], this.filtericon = D[0], this.iconscontainer = I, t.rtl && (I.css("margin-left", "0px"), I.css("left", "0px"), e(this.sortasc).css("float", "left"), e(this.filtericon).css("float", "left"), e(this.sortdesc).css("float", "left")), !t.autoshowfiltericon && this.filterable && e(this.filtericon).css("display", "block") } if (q && (t._handlecolumnsmenu(t, _, p, j, this), this.menu || j.hide()), i.append(p), t.groupable && T) { if (p[0].id = t.dataview.generatekey(), !t._handlecolumnstogroupsdragdrop) throw new Error("jqxGrid: Missing reference to jqxgrid.grouping.js."); t._handlecolumnstogroupsdragdrop(this, p) } t.columnsreorder && this.draggable && t._handlecolumnsdragreorder && t._handlecolumnsdragreorder(this, p); var P = this; if (t.addHandler(p, "click", function (e) { if (P.checkboxcolumn) return !0; t.sorttogglestates > 0 && t._togglesort && (t._loading || t._togglesort(P)), e.preventDefault(), t._raiseEvent(7, { column: P.getcolumnproperties(), datafield: P.datafield, originalEvent: e }) }), P.resizable && t.columnsresize && !C) { var B = !1, z = "mousemove"; t.isTouchDevice() && !0 !== t.touchmode && (B = !0, z = e.jqx.mobile.getTouchEventName("touchstart")), t.addHandler(p, z, function (i) { var s = parseInt(i.pageX), r = 5, o = parseInt(p.coord().left); if (t.hasTransform && (o = e.jqx.utilities.getOffset(p).left), t.resizing) return !0; if (t._handlecolumnsresize) { if (B) return s = t.getTouches(i)[0].pageX, r = 40, s >= o + P.width - r ? (t.resizablecolumn = { columnelement: p, column: P }, p.css("cursor", "col-resize")) : (p.css("cursor", ""), t.resizablecolumn = null), !0; var a = P.width; if (t.rtl && (a = 0), s >= o + a - r) { if (s <= o + a + r) return t.resizablecolumn = { columnelement: p, column: P }, p.css("cursor", "col-resize"), !1; p.css("cursor", ""), t.resizablecolumn = null } else p.css("cursor", ""), s < o + a - r && (P._animating || P._menuvisible || p.mouseenter()), t.resizablecolumn = null } }) } if (p.css("left", r), this.hidden && this.hideable || (r += v), P.rendered && P.rendered(e(_[0].firstChild), P.align, f) && null != I && I.hide(), P.checkboxcolumn) { if (I && I.hide(), !t.host.jqxCheckBox) throw new Error("jqxGrid: Missing reference to jqxcheckbox.js"); _.html('<div style="cursor: pointer; margin-left: 5px; top: 50%; margin-top: -8px; position: relative;"></div>'); var H = _.find("div:first"); H.jqxCheckBox({ _canFocus: !1, disabled: t.disabled, disabledContainer: !0, theme: t.theme, enableContainerClick: !1, width: 16, height: 16, animationShowDelay: 0, animationHideDelay: 0 }), P.checkboxelement = H; var M = H.data().jqxCheckBox.instance; t._checkboxcolumn = P, M.updated = function (e, i, s) { t._checkboxcolumnupdating = !0, t.disabled && (H.jqxCheckBox({ disabled: t.disabled }), i = s), i ? t.selectallrows() : t.unselectallrows(), t._checkboxcolumnupdating = !1 } } }), r > 0 ? this.columnsheader.width(2 + r) : this.columnsheader.width(r), this.columnsrow = i, t.columnsheader.append(i), this.showfilterrow && this._updatefilterrow) { if (this.columngroups ? i.height(this.columngroupslevel * this.columnsheight) : i.height(this.columnsheight), !this.filterrow) { var _ = e("<div></div>"); _[0].id = "filterrow." + this.element.id, _.height(this.filterrowheight), this.filterrow = _ } this.filterrow.width(2 + r), this.columnsheader.append(this.filterrow), this._updatefilterrow() } i[0].style.visibility = 0 == r ? "hidden" : "inherit", i.width(r), this._handlecolumnsdragdrop && this._handlecolumnsdragdrop(), this._handlecolumnsreorder && this._handlecolumnsreorder(), this._rendersortcolumn && this._rendersortcolumn(), this._renderfiltercolumn && this._renderfiltercolumn(), this._handlecolumnsresize && this._handlecolumnsresize(), this.columngroups && this._rendercolumngroups(), this._updatecheckboxselection && this._updatecheckboxselection() }, _rendercolumngroups: function () { if (this.columngroups) { for (var t = 0, i = 0; i < this.columns.records.length; i++) this.columns.records[i].pinned && t++; var s = this.headerZIndex - t + this.columns.records.length, r = this.that, o = r.toTP("jqx-grid-column-header") + " " + r.toTP("jqx-grid-columngroup-header") + " " + r.toTP("jqx-widget-header"); r.rtl && (o += " " + r.toTP("jqx-grid-columngroup-header-rtl")); var a = this.columnsheader.find("#columntable" + this.element.id); a.find("jqx-grid-columngroup-header").remove(); for (var n = 0; n < this.columngroupslevel - 1; n++) for (i = 0; i < this.columngroups.length; i++) { var l = this.columngroups[i], h = l.level; if (h === n) { var d = h * this.columnsheight, c = 99999; if (l.groups) { var u = function (e) { for (var t = 0, i = 0; i < e.groups.length; i++) { var s = e.groups[i]; s.groups ? t += u(s) : s.hidden || (t += s.width, c = Math.min(parseFloat(s.element.style.left), c)) } return t }; l.width = u(l), l.left = c; var p = this.columnsheight, m = s--, g = e('<div role="columnheader" style="z-index: ' + m + ';position: absolute;" class="' + o + '"></div>'), f = e(this._rendercolumnheader(l.text, l.align, this.columnsheight, this)); if (l.renderer) { var f = e("<div style='height: 100%; width: 100%;'></div>"), v = l.renderer(l.text, l.align, p); f.html(v) } g.append(f), g[0].style.left = c + "px", 0 === c && (g[0].style.borderLeftColor = "transparent"), g[0].style.top = d + "px", g[0].style.height = p + "px", g[0].style.width = -1 + l.width + "px", a.append(g), l.element = g, l.rendered && l.rendered(f, l.align, p) } } } } }, _resizecolumngroups: function () { if (this.columngroups) for (var e = 0; e < this.columngroups.length; e++) { var t = this.columngroups[e], i = t.level * this.columnsheight, s = 99999; if (t.groups) { var r = function (e) { for (var t = 0, i = 0; i < e.groups.length; i++) { var o = e.groups[i]; o.groups ? t += r(o) : o.hidden || (t += o.width, s = Math.min(parseFloat(o.element.style.left), s)) } return t }; t.width = r(t), t.left = s; var o = this.columnsheight, a = t.element; a[0].style.left = s + "px", a[0].style.top = i + "px", a[0].style.height = o + "px", a[0].style.width = -1 + t.width + "px" } } }, _handlecolumnsmenu: function (t, i, s, r, o) { t.dragmousedown = null, r[0].id = t.dataview.generatekey(), i.append(r), s[0].columnsmenu = r[0], o.element = s[0]; var a = this.columnsmenuwidth + 1, n = function () { if (!o.menu) return !1; if (!t.resizing) { if (o._menuvisible && t._hasOpenedMenu) return !1; if (o._animating = !0, t.menuitemsarray && t.menuitemsarray.length > 0) if (t.enableanimations) { r.css("display", "block"), r.stop(), o.iconscontainer.stop(), t.rtl ? (r.css("margin-left", -a), r.animate({ "margin-left": "0px" }, "fast", function () { r.css("display", "block"), o._animating = !1, o._menuvisible = !0 })) : (r.css("margin-left", "0px"), r.animate({ "margin-left": -a }, "fast", function () { r.css("display", "block"), o._animating = !1, o._menuvisible = !0 })); e = t.rtl ? a : -(32 + a); o.iconscontainer.animate({ "margin-left": e }, "fast") } else { r.css("display", "block"); var e = t.rtl ? 16 : -48; o.iconscontainer.css("margin-left", e + "px"), o._animating = !1, o._menuvisible = !0 } } }, l = "mouseenter"; if (t.isTouchDevice() && (l = "touchstart"), t.addHandler(s, l, function (i) { var r = parseInt(i.pageX), a = t.columnsresize && o.resizable ? 3 : 0, l = parseInt(s.coord().left); t.hasTransform && (l = e.jqx.utilities.getOffset(s).left); var h = o.width; if (t.rtl && (h = 0), 0 != a && r >= l + h - a && r <= l + h + a) return !1; var d = t.vScrollInstance.isScrolling(); o.menu && t.autoshowcolumnsmenubutton && !d && !t.disabled && n() }), !t.autoshowcolumnsmenubutton) { r.css("display", "block"); var h = t.rtl ? 16 : -48; o.iconscontainer.css("margin-left", h + "px"), t.rtl ? r.css({ "margin-left": "0px" }) : r.css({ "margin-left": -a }) } t.addHandler(s, "mouseleave", function (i) { if (t.menuitemsarray && t.menuitemsarray.length > 0 && o.menu) { var s = e.data(document.body, "contextmenu" + t.element.id); if (void 0 != s && r[0].id == s.columnsmenu.id) return; if (t.autoshowcolumnsmenubutton) if (t.enableanimations) { t.rtl ? r.css("margin-left", "0px") : r.css("margin-left", -a), r.stop(), o.iconscontainer.stop(), t.rtl ? r.animate({ "margin-left": -a }, "fast", function () { r.css("display", "none"), o._menuvisible = !1 }) : r.animate({ "margin-left": 0 }, "fast", function () { r.css("display", "none"), o._menuvisible = !1 }); n = t.rtl ? 0 : -32; o.iconscontainer.animate({ "margin-left": n }, "fast") } else { r.css("display", "none"); var n = t.rtl ? 0 : -32; o.iconscontainer.css("margin-left", n + "px"), o._menuvisible = !1 } } }); var d = !0, c = "", u = e(o.filtericon); t.addHandler(r, "mousedown", function (i) { t.gridmenu || t._initmenu(), d = !e.data(t.gridmenu[0], "contextMenuOpened" + t.gridmenu[0].id), null != (c = e.data(document.body, "contextmenu" + t.element.id)) && (c = c.column.datafield) }), t.addHandler(u, "mousedown", function (i) { t.gridmenu || t._initmenu(), d = !e.data(t.gridmenu[0], "contextMenuOpened" + t.gridmenu[0].id), null != (c = e.data(document.body, "contextmenu" + t.element.id)) && (c = c.column.datafield) }); var p = function () { if (!o.menu) return !1; if (t.gridmenu || t._initmenu(), t.disabled) return !1; for (var i = 0; i < t.columns.records.length; i++) t.columns.records[i].datafield != o.datafield && (t.columns.records[i]._menuvisible = !1); var s = r.coord(!0), a = r.height(); if (!d && (d = !0, c == o.datafield)) return t._closemenu(), !1; var n = t.host.coord(!0); t.hasTransform && (n = e.jqx.utilities.getOffset(t.host), s = e.jqx.utilities.getOffset(r)), n.left + t.host.width() > parseInt(s.left) + t.gridmenu.width() ? t.gridmenu.jqxMenu("open", s.left, s.top + a) : t.gridmenu.jqxMenu("open", r.width() + s.left - t.gridmenu.width(), s.top + a), t.gridmenu.width() < 100 && t._arrangemenu(), t._hasOpenedMenu = !0; var l = t._getmenuitembyindex(0), h = t._getmenuitembyindex(1), u = t._getmenuitembyindex(2), p = t._getmenuitembyindex(3), m = t._getmenuitembyindex(4), g = t._getmenuitembyindex(5); if (null != l && null != h && null != u) { var f = o.sortable && t.sortable; if (t.gridmenu.jqxMenu("disable", l.id, !f), t.gridmenu.jqxMenu("disable", h.id, !f), t.gridmenu.jqxMenu("disable", u.id, !f), o.datafield) if (t.sortcolumn == o.datafield) { var v = t.getsortinformation(); f && (v.sortdirection.ascending ? t.gridmenu.jqxMenu("disable", l.id, !0) : t.gridmenu.jqxMenu("disable", h.id, !0)) } else t.gridmenu.jqxMenu("disable", u.id, !0) } if (null != p && null != m && (t.groupable && o.groupable ? t.groups && -1 != t.groups.indexOf(o.datafield) ? (t.gridmenu.jqxMenu("disable", p.id, !0), t.gridmenu.jqxMenu("disable", m.id, !1)) : (t.gridmenu.jqxMenu("disable", p.id, !1), t.gridmenu.jqxMenu("disable", m.id, !0)) : (t.gridmenu.jqxMenu("disable", m.id, !0), t.gridmenu.jqxMenu("disable", p.id, !0))), null != g) { t._updatefilterpanel(t, g, o); var x = 0; t.sortable && t._togglesort && t.showsortmenuitems && (x += 3), t.groupable && t.addgroup && t.showgroupmenuitems && (x += 2); var w = 27 * x + 3; e.jqx.browser.msie && e.jqx.browser.version < 8 && (w += 20, e(g).height(190)), t.filterable && t.showfiltermenuitems && (o.filterable ? (t.gridmenu.height(w + 180), e(g).css("display", "block")) : (t.gridmenu.height(w), e(g).css("display", "none"))) } e.data(document.body, "contextmenu" + t.element.id, { column: o, columnsmenu: r[0] }) }; t.addHandler(u, "click", function (e) { return !!o.menu && (t.showfilterrow || ("block" != r[0].style.display && s.trigger("mouseenter"), setTimeout(function () { "block" != r[0].style.display && s.trigger("mouseenter"), p() }, 200)), !1) }), t.addHandler(r, "click", function (e) { return !!o.menu && (p(), !1) }), t.isTouchDevice() && t.addHandler(r, e.jqx.mobile.getTouchEventName("touchstart"), function (e) { return !!o.menu && (t._hasOpenedMenu ? t._closemenu() : p(), !1) }) }, _removecolumnhandlers: function (t) { var i = this.that, s = e(t.element); if (s.length > 0) { i.removeHandler(s, "mouseenter"), i.removeHandler(s, "mouseleave"); var r = e(t.filtericon); if (i.removeHandler(r, "mousedown"), i.removeHandler(r, "click"), i.removeHandler(s, "click"), i.removeHandler(s, "mousemove"), i.columnsreorder && (i.removeHandler(s, "mousedown.drag"), i.removeHandler(s, "mousemove.drag")), i.removeHandler(s, "dragstart"), s[0].columnsmenu) { var o = e(s[0].columnsmenu); i.removeHandler(o, "click"), i.removeHandler(o, "mousedown"), i.removeHandler(o, e.jqx.mobile.getTouchEventName("touchstart")) } } }, _rendercolumnheader: function (e, t, i, s) { var r = "4px"; return s.columngroups ? ((r = i / 2 - this._columnheight / 2) < 0 && (r = 4), r += "px") : 25 != this.columnsheight && ((r = this.columnsheight / 2 - this._columnheight / 2) < 0 && (r = 4), r += "px"), this.enableellipsis ? '<div style="padding-bottom: 2px; overflow: hidden; text-overflow: ellipsis; text-align: ' + t + "; margin-left: 4px; margin-right: 2px; margin-bottom: " + r + "; margin-top: " + r + ';"><span style="text-overflow: ellipsis; cursor: default;">' + e + "</span></div>" : "center" == t || "middle" == t ? '<div style="padding-bottom: 2px; text-align: center; margin-top: ' + r + ';"><a href="#">' + e + "</a></div>" : '<a style="margin-top: ' + r + "; float: " + t + ';" href="#">' + e + "</a>" }, _renderrows: function (t, i, s) { var r = this.that; if ((this.pageable || this.groupable) && (this.autoheight || this.autorowheight) && null != this.table && null != this.table[0].rows && this.table[0].rows.length < this.dataview.rows.length && (r.prerenderrequired = !0), !this.pageable && (this.autoheight || this.autorowheight) && (this.virtualmode || this.unboundmode)) { var o = this.source.totalrecords; isNaN(o) || null != this.table && null != this.table[0].rows && this.table[0].rows.length != o && (r.prerenderrequired = !0) } !this.autoheight && !this.autorowheight || r.prerenderrequired || this.table && this.table[0].rows && (this.table[0].rows.length < this.dataview.records.length && (this.pageable && this.table[0].rows.length < this.dataview.pagesize ? r.prerenderrequired = !0 : this.pageable || (r.prerenderrequired = !0)), this.table[0].rows.length < this.dataview.cachedrecords.length && (this.pageable && this.table[0].rows.length < this.dataview.pagesize ? r.prerenderrequired = !0 : this.pageable || (r.prerenderrequired = !0))), r._prerenderrows(t), r._requiresupdate && (r._requiresupdate = !1, r._updatepageviews()); var a = function () { r._loading || (r.WinJS ? MSApp.execUnsafeLocalFunction(function () { r._rendervisualrows() }) : r._rendervisualrows(), r.virtualmode && r.showaggregates && r._updateaggregates && r.refreshaggregates()) }, n = e.jqx.browser.msie && e.jqx.browser.version < 10; if (this.virtualmode) { this.loadondemand && (a(), function () { if (r.rendergridrows) { var e = r._startboundindex; void 0 == e && (e = 0); var t = e + 1 + r.dataview.pagesize; if (null != e && null != t) { var s = !!r.source._source; if ((s ? r.source._source.recordstartindex : r.source.recordstartindex) != e || 1 == i) { if (s) { if (t >= r.source._source.totalrecords && (t = r.source._source.totalrecords, (e = t - r.dataview.pagesize - 1) < 0 && (e = 0), r.source._source.recordendindex == t && r.source._source.recordstartindex == e)) return; r.source._source.recordstartindex = e, r.source._source.recordendindex = t } else r.source.recordstartindex = e, r.source.recordendindex = t; r.updatebounddata("cells") } } } }(), this.loadondemand = !1); var l = void 0 == this._browser ? this._isIE10() : this._browser; this.editable && this.editcell && !this.vScrollInstance.isScrolling() && !this.hScrollInstance.isScrolling() ? a() : this.autoheight ? a() : l || n || navigator && -1 != navigator.userAgent.indexOf("Safari") ? (null != this._scrolltimer && clearTimeout(this._scrolltimer), this._scrolltimer = setTimeout(function () { a() }, 5)) : a() } else { if ("deferred" == this.scrollmode && (this.hScrollInstance.isScrolling() || this.vScrollInstance.isScrolling())) { null != this._scrolltimer && clearInterval(this._scrolltimer); var h = this._getfirstvisualrow(); if (null != h) { var d = this.scrollfeedback ? this.scrollfeedback(h.bounddata) : function (t) { if (null == h) return ""; var i = "<table>", s = r.deferreddatafields; null == s && r.columns.records.length > 0 && (s = new Array).push(r.columns.records[0].displayfield); for (var o = 0; o < s.length; o++) { var a = s[o], n = r._getcolumnbydatafield(a); if (n) { var l = r._getcellvalue(n, h); "" != n.cellsformat && e.jqx.dataFormat && (e.jqx.dataFormat.isDate(l) ? l = e.jqx.dataFormat.formatdate(l, n.cellsformat, r.gridlocalization) : e.jqx.dataFormat.isNumber(l) && (l = e.jqx.dataFormat.formatnumber(l, n.cellsformat, r.gridlocalization))), i += "<tr><td>" + l + "</td></tr>" } } return i += "</table>" }(h.bounddata); d != this._scrollelementcontent && (this._scrollelement[0].innerHTML = d, this._scrollelementcontent = d) } return this._scrollelement.css("visibility", "visible"), this._scrollelementoverlay.css("visibility", "visible"), this._scrollelement.css("margin-top", -this._scrollelement.height() / 2), void (this._scrolltimer = setInterval(function () { r.hScrollInstance.isScrolling() || r.vScrollInstance.isScrolling() || (a(), r._scrollelement.css("visibility", "hidden"), r._scrollelementoverlay.css("visibility", "hidden"), clearInterval(r._scrolltimer), h && r.ensurerowvisible(h.visibleindex)) }, 100)) } if (navigator && -1 == navigator.userAgent.indexOf("Chrome") && -1 != navigator.userAgent.indexOf("Safari") && (this._updatedelay = 1), void 0 != this.touchDevice && 1 == this.touchDevice && (this._updatedelay = 5), ((l = void 0 == this._browser ? this._isIE10() : this._browser) || n) && (this._updatedelay = 5), l && this.hScrollInstance.isScrolling()) return void a(); if (e.jqx.browser.mozilla && 0 == this._updatedelay && (this.vScrollInstance.isScrolling() || this.hScrollInstance.isScrolling()) && (this._updatedelay = 0), null != this.updatedelay && (this._updatedelay = this.updatedelay), 0 == this._updatedelay) a(); else { var c = this._jqxgridrendertimer; null != c && clearTimeout(c), this.vScrollInstance.isScrolling() || this.hScrollInstance.isScrolling() ? (c = setTimeout(function () { a() }, this._updatedelay), this._jqxgridrendertimer = c) : (this._jqxgridrendertimer = c, a()) } } if (r.autorowheight && !r.autoheight && this._pageviews.length > 0) { var u = this._gettableheight(), p = this._pageviews[0].height; if (p > u) if (this.pageable && this.gotopage && (p = this._pageviews[0].height) < 0 && (p = this._pageviews[0].height), "visible" != this.vScrollBar.css("visibility") && this.vScrollBar.css("visibility", "visible"), (p <= u || this.autoheight) && this.vScrollBar.css("visibility", "hidden"), p - u > 0) { if ("deferred" != this.scrollmode) { var m = p - u, g = this.vScrollInstance.max; this.vScrollBar.jqxScrollBar({ max: m }), Math.round(m) != Math.round(g) && this.vScrollBar.jqxScrollBar({ value: 0 }) } } else this.vScrollBar.jqxScrollBar({ value: 0, max: p }); else this._loading || this.vScrollBar.css("visibility", "hidden"), this.vScrollBar.jqxScrollBar({ value: 0 }); this._arrange(), this.virtualsizeinfo && (this.virtualsizeinfo.virtualheight = p) } }, scrolling: function () { return { vertical: this.vScrollInstance.isScrolling(), horizontal: this.hScrollInstance.isScrolling() } }, _renderhorizontalscroll: function () { var e = this.hScrollInstance, t = e.value; "hidden" === this.hScrollBar.css("visibility") && (e.value = 0, t = 0); var i = parseInt(t); if (null != this.table) { var s = this.table[0].rows.length, r = this.columnsrow, o = this.groupable && this.groups.length > 0 ? this.groups.length : 0, a = this.columns.records.length - o, n = this.columns.records, l = 0 == this.dataview.rows.length; if (this.rtl && "hidden" != this.hScrollBar.css("visibility") && (i = e.max - i), l && !this._haspinned) { for (c = 0; c < s; c++) for (var h = this.table[0].rows[c], d = 0; d < o + a; d++) void 0 != (u = h.cells[d]) && (p = n[d]).pinned && (u.style.marginLeft = i + "px", 0 == c && ((f = r[0].cells[d]).style.marginLeft = i + "px")); this.table[0].style.marginLeft = -i + "px", r[0].style.marginLeft = -i + "px" } else if (this._haspinned || void 0 == this._haspinned) { for (var c = 0; c < s; c++) for (var h = this.table[0].rows[c], d = 0; d < o + a; d++) { var u = h.cells[d]; if (void 0 != u) { var p = n[d]; if (p.pinned) { if (0 == i && "" == u.style.marginLeft) continue; var m = null, g = null; if (this.showfilterrow && this.filterrow && this.filterrow[0].cells && (g = this.filterrow[0].cells[d]), this.showaggregates && this.statusbar[0].cells && (m = this.statusbar[0].cells[d]), this.rtl) { if (u.style.marginLeft = -parseInt(t) + "px", 0 == c) { var f = r[0].cells[d]; f.style.marginLeft = -parseInt(t) + "px", m && (m.style.marginLeft = -parseInt(t) + "px"), g && (g.style.marginLeft = -parseInt(t) + "px") } } else u.style.marginLeft = i + "px", 0 == c && ((f = r[0].cells[d]).style.marginLeft = i + "px", m && (m.style.marginLeft = i + "px"), g && (g.style.marginLeft = i + "px")) } } } this.table[0].style.marginLeft = -i + "px", r[0].style.marginLeft = -i + "px" } else 0 == this._haspinned && (this.table[0].style.marginLeft = -i + "px", r[0].style.marginLeft = -i + "px"); if (this.showaggregates && this.statusbar[0].cells) { var v = 0; this.rtl && "hidden" != this.vScrollBar.css("visibility") && "hidden" != this.hScrollBar.css("visibility") && (v = 2 + parseInt(this.hScrollBar.css("left"))), this.statusbar[0].style.marginLeft = -i + v + "px" } this.showfilterrow && this.filterrow && this.filterrow[0].cells && (this.filterrow[0].style.marginLeft = -i + "px") } }, _updaterowdetailsvisibility: function () { if (this.rowdetails) for (var t = 0; t < this._rowdetailselementscache.length; t++) e(this._rowdetailselementscache[t]).css("display", "none") }, _getvisualcolumnsindexes: function (e, t, i, s, r) { if (this.rowdetails || this.rtl || this.editcell || this.width && this.width.toString().indexOf("%") >= 0 || this.exporting) return { start: 0, end: i + s }; var o = 0, a = -1, n = i + s, l = !1; if (this.autorowheight) return { start: 0, end: i + s }; if (!r) for (var h = 0; h < i + s; h++) { if (l || this.columns.records[h].pinned && (l = !0), this.columns.records[h].hidden || (o += this.columns.records[h].width), o >= e && -1 == a && (a = h), o > t + e) { n = h; break } } return ++n > i + s && (n = i + s), (-1 == a || l) && (a = 0), { start: a, end: n } }, _getfirstvisualrow: function () { var e = this.vScrollInstance.value, t = parseInt(e); if (0 == this._pagescache.length && (this.dataview.updateview(), this._loadrows()), "visible" != this.vScrollBar[0].style.visibility && (t = 0), !this.pageable) { var i = this._findvisiblerow(t, this._pageviews); if (-1 == i) return null; i != this.dataview.pagenum ? (this.dataview.pagenum = i, this.dataview.updateview(), this._loadrows()) : this._pagescache[this.dataview.pagenum] || this._loadrows() } var s = this._findvisiblerow(t, this._pagescache[this.dataview.pagenum]), r = this._pagescache[this.dataview.pagenum]; if (r && r[0]) return r[s] }, _rendervisualrows: function () { if (this.virtualsizeinfo) { var t = this.vScrollInstance, i = this.hScrollInstance, s = t.value, r = i.value, o = parseInt(s), a = parseInt(r), n = this._gettableheight(), l = void 0 != this._hostwidth ? this._hostwidth : this.host.width(); "visible" == this.hScrollBar[0].style.visibility && (n += 29), "deferred" == this.scrollmode && 0 != this._newmax && o > this._newmax && null != this._newmax && (o = this._newmax); var h = t.isScrolling() || i.isScrolling() || this._keydown, d = this.groupable && this.groups.length > 0; if (this.visiblerows = new Array, this.hittestinfo = new Array, this.editcell && void 0 == this.editrow && this._hidecelleditor(!1), void 0 != this.editrow && this._hideeditors(), this.virtualmode && !this.pageable && (this._pagescache = new Array), 0 == this._pagescache.length && (this.dataview.updateview(), this._loadrows()), "hidden" == this.vScrollBar[0].style.visibility && (o = 0), !this.pageable) { var c = this._findvisiblerow(o, this._pageviews); if (-1 == c) return this._clearvisualrows(), this._renderemptyrow(), void this._updaterowdetailsvisibility(); c != this.dataview.pagenum ? (this.dataview.pagenum = c, this.dataview.updateview(), this._loadrows()) : this._pagescache[this.dataview.pagenum] || this._loadrows() } var u = this.groupable && this.groups.length > 0 ? this.groups.length : 0; if (this.columns.records) { var p = this.columns.records.length - u, m = this._findvisiblerow(o, this._pagescache[this.dataview.pagenum]), g = this._pagescache[this.dataview.pagenum], f = m; f < 0 && (f = 0); var v = 0, x = 0, w = 0, b = 0, _ = this.virtualsizeinfo.visiblerecords, y = this.groupable ? this.groups.length : 0, j = this.toTP("jqx-grid-cell") + " " + this.toTP("jqx-item"); this.rtl && (j += " " + this.toTP("jqx-grid-cell-rtl")), (this.autoheight || this.autorowheight) && this.pageable && (!this.groupable || this.groupable && 0 === this.groups.length) && (_ = this.dataview.pagesize), d && (j = " " + this.toTP("jqx-grid-group-cell")), this.isTouchDevice() && (j += " " + this.toTP("jqx-touch")), this.autorowheight && (j += " jqx-grid-cell-wrap"); var q = this.rowsheight, T = this._rendercell, C = this._getvisualcolumnsindexes(a, l, u, p, d), S = C.start, k = C.end; if ((this.autoheight || this.pageable) && this.autorowheight && this._pageviews[0] && (this._oldpageviewheight = this._pageviews[0].height), this.autorowheight && (f = 0), f >= 0) { this._updaterowdetailsvisibility(), this._startboundindex = null != g ? g[f].bounddata.boundindex : 0, this._startvisibleindex = null != g ? g[f].bounddata.visibleindex : 0; for (var I = 0; I < _ && x < _; I++) { var D = void 0 != g ? g[f + I] : null; if (null == D) { if (f = -I, this._pagescache[this.dataview.pagenum + 1]) g = this._pagescache[this.dataview.pagenum + 1], this.dataview.pagenum++; else { var P = this._pageviews.length; do { if (!(this.dataview.pagenum < this._pageviews.length - 1)) { g = void 0; break } this.dataview.pagenum++, g = void 0, this._pageviews[this.dataview.pagenum].height > 0 && (this.dataview.updateview(), this._loadrows(), g = this._pagescache[this.dataview.pagenum]) } while (void 0 == g && this.dataview.pagenum < P) } void 0 != g && (D = g[f + I]) } if (null != D) { if (D.hidden) continue; if (this._endboundindex = this._startboundindex + I, this._endvisibleindex = this._startvisibleindex + I, 0 == I) { var B = Math.abs(o - D.top); this.table[0].style.top = -B + "px", b = -B } if (!(G = this.table[0].rows[x])) continue; parseInt(G.style.height) != D.height && (G.style.height = parseInt(D.height) + "px"), w += D.height; var z = this.rowdetails && D.rowdetails, H = !D.rowdetailshidden; z && H && (G.style.height = parseInt(D.height - D.rowdetailsheight) + "px", _++); for (var M = this._isrowselected(!0, D), E = S; E < k; E++) { var A = E; this._rendervisualcell(T, j, M, z, H, d, y, G, D, A, x, h) } if (void 0 != D.group && this._rendergroup && this._rendergroup(y, G, D, u, p, x, l), this.autorowheight && (this.autoheight || this.pageable)) { for (var q = this.rowsheight, E = S; E < k; E++) this.editable && this.editcell && this.editcell.column == this.columns.records[E].datafield && this.editcell.row == this.getboundindex(D) ? q = Math.max(q, this.editcell.editor.height()) : G.cells[E].firstChild && (q = Math.max(q, 8 + parseInt(G.cells[E].firstChild.offsetHeight))); G.style.height = parseInt(q) + "px", this.heights[this._startboundindex + I] = q, z && H && (q += D.rowdetailsheight), D.height = q } if (this.visiblerows[this.visiblerows.length] = D, this.hittestinfo[this.hittestinfo.length] = { row: D, visualrow: G, details: !1 }, z && H) { x++; G = this.table[0].rows[x]; this._renderrowdetails(j, G, D, u, p, x), this.visiblerows[this.visiblerows.length] = D, this.hittestinfo[this.hittestinfo.length] = { row: D, visualrow: G, details: !0 } } if (!this.autorowheight && w + b >= n) break } else cansetheight = !0, this._clearvisualrow(a, d, x, u, p), w + v + b <= n && (v += q); x++ } if (this._horizontalvalue = a, v > 0 && "visible" == this.vScrollBar[0].style.visibility) { parseInt(this.table.css("top")); var L = this._pageviews[this._pageviews.length - 1], O = t.max, N = L.top + L.height - n; "visible" == this.hScrollBar.css("visibility") && (N += this.scrollbarsize + 20), O == N || this.autorowheight || N >= 0 && ("deferred" != this.scrollmode ? (t.max = N, t.setPosition(t.max)) : this._newmax != N && (this._newmax = N, this._rendervisualrows())) } } if ((this.autoheight || this.pageable) && this.autorowheight) { this._pagescache = new Array; for (var F = 0, R = 0, W = 0; W < this.visiblerows.length; W++) { var V = this.visiblerows[W]; V.top = F, F += V.height, R += V.height; var z = this.rowdetails && V.rowdetails, H = !V.rowdetailshidden, G = this.table[0].rows[W]; z && H && W++; for (E = S; E < k; E++) { var U = this.columns.records[E]; if (!U.hidden && !U.cellsrenderer) { var Y = G.cells[E], K = 0; if (Y.firstChild) { K = (V.height - parseInt(Y.firstChild.offsetHeight) - 8) / 2; if (z && H) K = (V.height - V.rowdetailsheight - e(Y.firstChild).height() - 8) / 2 } else K = (V.height - parseInt(e(Y).height()) - 8) / 2; if (K >= 0 && (K = parseInt(K) + 4, Y.firstChild && -1 == Y.firstChild.className.indexOf("jqx-grid-groups-row") && "checkbox" != U.columntype && "button" != U.columntype)) { if (this.editable && this.editcell && this.editcell.column == U.datafield && this.editcell.row == this.getboundindex(V)) continue; Y.firstChild.style.marginTop = K + "px" } } } } this._pageviews[0] && (this._pageviews[0].height = R), this._arrange() } this._renderemptyrow() } } }, _hideemptyrow: function () { if (this.showemptyrow && this.table && this.table[0].rows) { var t = this.table[0].rows[0]; if (t) for (var i = !1, s = 0; s < t.cells.length; s++) { var r = e(t.cells[s]); "none" == r.css("display") || i || r.width() != this.host.width() && r.text() != this.gridlocalization.emptydatastring || (r[0].checkbox = null, r[0].button = null, i = !0, r[0].innerHTML = "") } } }, _renderemptyrow: function () { if (!this._loading && 0 == this.dataview.records.length && this.showemptyrow) { var t = !1, i = this.toTP("jqx-grid-cell"); if (this.table && this.table.length > 0 && this.table[0].rows && this.table[0].rows.length > 0) { var s = this.table[0].rows[0]; this.table[0].style.top = "0px"; for (var r = 0; r < s.cells.length; r++) { var o = e(s.cells[r]); if ("none" != o.css("display") && !t) { o[0].checkbox = null, o[0].button = null, o[0].className = i, t = !0, o[0].innerHTML = ""; var a = e("<span style='white-space: nowrap; float: left; margin-left: 50%; position: relative;'></span>"); a.text(this.gridlocalization.emptydatastring), o.append(a); var n = 0; this.oldhscroll || (n = parseInt(this.table[0].style.marginLeft), this.rtl && (o.css("z-index", 999), o.css("overflow", "visible"))), a.css("left", -n - a.width() / 2), a.css("top", this._gettableheight() / 2 - a.height() / 2), e.jqx.browser.msie && e.jqx.browser.version < 8 && (a.css("margin-left", "0px"), a.css("left", this.host.width() / 2 - a.width() / 2)); var l = Math.abs(parseInt(this.table[0].style.top)); isNaN(l) && (l = 0), e(s).height(this._gettableheight() + l), o.css("margin-left", "0px"), o.width(this.host.width()), this.table.width() < this.host.width() && this.table.width(this.host.width()) } o.addClass(this.toThemeProperty("jqx-grid-empty-cell")) } } } }, _clearvisualrows: function () { var e = this.virtualsizeinfo.visiblerecords, t = this.hScrollInstance.value, i = parseInt(t), s = this.groupable && this.groups.length > 0; if (this.columns.records) for (var r = 0; r < e; r++) this._clearvisualrow(i, s, r, 0, this.columns.records.length) }, _iscellselected: function (e, t, i) { var s = !1, r = 0; if (this.virtualmode && this.pageable && this.groupable && this.groups.length > 0 && (r = this.dataview.pagesize * this.dataview.pagenum), this.groups.length > 0 && this.pageable && this.groupable) { var o = this.getrowboundindexbyid(t.bounddata.uid); for (var a in this.selectedcells) a == o + "_" + i && (s = !0); return s } if (e && null != t.bounddata) if ("singlerow" != this.selectionmode) { if (this.dataview.filters.length > 0) if (this.virtualmode || void 0 == t.bounddata.dataindex) for (var a in this.selectedcells) a == r + t.bounddata.boundindex + "_" + i && (s = !0); else for (var a in this.selectedcells) a == r + t.bounddata.dataindex + "_" + i && (s = !0); else for (var a in this.selectedcells) if (a == r + t.bounddata.boundindex + "_" + i) { s = !0; break } } else if (this.dataview.filters.length > 0) { if (this.virtualmode || void 0 == t.bounddata.dataindex) { for (var a in this.selectedcells) if (a == r + t.bounddata.boundindex + "_" + i) { s = !0; break } } else for (var a in this.selectedcells) if (a == r + t.bounddata.dataindex + "_" + i) { s = !0; break } } else for (var a in this.selectedcells) if (a == r + t.bounddata.boundindex == this.selectedrowindex) { s = !0; break } return s }, _isrowselected: function (e, t) { var i = !1, s = 0; if (this.virtualmode && this.pageable && this.groupable && this.groups.length > 0 && (s = this.dataview.pagesize * this.dataview.pagenum), this.groupable && this.groups.length > 0 && this.pageable) { var r = this.getrowboundindexbyid(t.bounddata.uid); return -1 != this.selectedrowindexes.indexOf(r) && (i = !0), i || (i = r == this.selectedrowindex && -1 != this.selectedrowindex), i } return e && null != t.bounddata && ("singlerow" != this.selectionmode ? this.dataview.filters.length > 0 ? this.virtualmode || void 0 == t.bounddata.dataindex ? -1 != this.selectedrowindexes.indexOf(s + t.bounddata.boundindex) && (i = !0) : -1 != this.selectedrowindexes.indexOf(s + t.bounddata.dataindex) && (i = !0) : -1 != this.selectedrowindexes.indexOf(s + t.bounddata.boundindex) && (i = !0) : this.dataview.filters.length > 0 ? this.virtualmode || void 0 == t.bounddata.dataindex ? -1 != this.selectedrowindexes.indexOf(s + t.bounddata.boundindex) && (i = !0) : -1 != this.selectedrowindexes.indexOf(s + t.bounddata.dataindex) && (i = !0) : s + t.bounddata.boundindex == this.selectedrowindex && (i = !0)), i }, _rendervisualcell: function (t, i, s, r, o, a, n, l, h, d, c, u) { var p = this.columns.records[d]; if (p.hidden) (m = l.cells[d]).innerHTML = ""; else { cellvalue = this._getcellvalue(p, h); var m = l.cells[d], g = i; if (-1 != this.selectionmode.indexOf("cell") && (s = this.dataview.filters.length > 0 ? !!this.selectedcells[h.bounddata.dataindex + "_" + p.datafield] : !!this.selectedcells[h.boundindex + "_" + p.datafield], this.editcell && this.editcell.row === h.boundindex && this.editcell.column === p.datafield && "checkbox" !== p.columntype && (s = !1), (this.virtualmode || this.groupable && this.groups.length > 0 && this.pageable) && (s = this._iscellselected(!0, h, p.datafield))), "" != p.cellclassname && p.cellclassname) if ("string" == typeof p.cellclassname) g += " " + p.cellclassname; else { var f = p.cellclassname(this.getboundindex(h), p.datafield, cellvalue, h.bounddata); f && (g += " " + f) } var v = this.showsortcolumnbackground && this.sortcolumn && p.displayfield == this.sortcolumn; if (v && (g += " " + this.toTP("jqx-grid-cell-sort")), p.filter && this.showfiltercolumnbackground && (g += " " + this.toTP("jqx-grid-cell-filter")), (p.pinned && this.showpinnedcolumnbackground || p.grouped) && (g += " " + this.toTP("jqx-grid-cell-pinned")), this.altrows && void 0 == h.group) { var x = h.visibleindex; x >= this.altstart && (this.altstart + x) % (1 + this.altstep) == 0 && (g += v ? " " + this.toTP("jqx-grid-cell-sort-alt") : " " + this.toTP("jqx-grid-cell-alt"), p.filter && this.showfiltercolumnbackground && (g += " " + this.toTP("jqx-grid-cell-filter-alt")), p.pinned && this.showpinnedcolumnbackground && (g += " " + this.toTP("jqx-grid-cell-pinned-alt"))) } if (d <= n) { if (a || this.rowdetails) { var w = e(m), b = this.columns.records[d].width; m.style.width != parseInt(b) + "px" && w.width(b) } } else if ((a || this.rowdetails) && this._hiddencolumns) { var w = e(m), b = this.columns.records[d].width; parseInt(m.style.width) != b && w.width(b) } var _ = !0; if (this.rowdetails && r && (o && !a ? g += " " + this.toTP("jqx-grid-details-cell") : a && (g += " " + this.toTP("jqx-grid-group-details-cell")), this.showrowdetailscolumn)) if (this.rtl) { if (void 0 == h.group && d == l.cells.length - n - 1) { y = this.toThemeProperty("jqx-icon-arrow-down"); return o ? (g += " " + this.toTP("jqx-grid-group-expand-rtl"), g += " " + y) : (g += " " + this.toTP("jqx-grid-group-collapse-rtl"), g += " " + (y = this.toThemeProperty("jqx-icon-arrow-left"))), _ = !1, m.title = "", m.innerHTML = "", void (m.className != g && (m.className = g)) } } else if (void 0 == h.group && d == n) { var y = this.toThemeProperty("jqx-icon-arrow-down"); return o ? (g += " " + this.toTP("jqx-grid-group-expand"), g += " " + y) : (g += " " + this.toTP("jqx-grid-group-collapse"), g += " " + (y = this.toThemeProperty("jqx-icon-arrow-right"))), _ = !1, m.title = "", m.innerHTML = "", void (m.className != g && (m.className = g)) } if (s && _ && d >= n && (g += " " + this.toTP("jqx-grid-cell-selected"), g += " " + this.toTP("jqx-fill-state-pressed")), m.className != g && (m.className = g), void 0 != h.group) return cellvalue = "", m.title = "", void (m.innerHTML = ""); t(this, p, h, cellvalue, m, u) } }, _rendercell: function (t, i, s, r, o, a) { n = r + "_" + i.visibleindex; if ("number" == i.columntype || null != i.cellsrenderer) var n = s.uniqueid + "_" + i.visibleindex; if (t.editcell && void 0 == t.editrow) if ("selectedrow" == t.editmode && i.editable && t.editable) { if (t.editcell.row == t.getboundindex(s) && t._showcelleditor) return void (t.hScrollInstance.isScrolling() || t.vScrollInstance.isScrolling() ? t._showcelleditor(t.editcell.row, i, o, !1, !1) : t._showcelleditor(t.editcell.row, i, o, t.editcell.init)) } else if (t.editcell.row == t.getboundindex(s) && t.editcell.column == i.datafield && (t.editcell.element = o, t.editcell.editing && t._showcelleditor)) return void (t.hScrollInstance.isScrolling() || t.vScrollInstance.isScrolling() ? t._showcelleditor(t.editcell.row, i, t.editcell.element, t.editcell.init, !1) : t._showcelleditor(t.editcell.row, i, t.editcell.element, t.editcell.init)); var l = t._defaultcellsrenderer(r, i), h = t._cellscache[n]; if (!h) { if ("checkbox" == i.columntype) return t._rendercheckboxcell(t, o, i, s, r), t._cellscache[n] = { element: "", title: r }, void (t.enabletooltips && i.enabletooltips && (o.title = r)); if ("button" == i.columntype) return null != i.cellsrenderer && (r = i.cellsrenderer(t.getboundindex(s), i.datafield, r, l, i.getcolumnproperties(), s.bounddata)), t._renderbuttoncell(t, o, i, s, r), t._cellscache[n] = { element: "", title: r }, void (t.enabletooltips && i.enabletooltips && (o.title = r)); if ("number" == i.columntype) r = s.visibleindex; else if ("inline" == i.columntype) return t._renderinlinecell(t, o, i, s, r), t._cellscache[n] = { element: "", title: r }, void (t.enabletooltips && i.enabletooltips && (o.title = r)); p = null; null == (p = null != i.cellsrenderer ? i.cellsrenderer(t.getboundindex(s), i.datafield, r, l, i.getcolumnproperties(), s.bounddata) : l) && (p = l); var d = r; return t.enabletooltips && i.enabletooltips && ("" != i.cellsformat && e.jqx.dataFormat && (e.jqx.dataFormat.isDate(r) ? d = e.jqx.dataFormat.formatdate(d, i.cellsformat, this.gridlocalization) : e.jqx.dataFormat.isNumber(r) && (d = e.jqx.dataFormat.formatnumber(d, i.cellsformat, this.gridlocalization))), o.title = d), t.WinJS ? e(o).html(p) : o.innerHTML = p, t._cellscache[n] = { element: o.innerHTML, title: d }, !0 } if ("inline" == i.columntype) return t._renderinlinecell(t, o, i, s, r), void (null != i.cellsrenderer && void 0 != (u = i.cellsrenderer(t.getboundindex(s), i.datafield, r, l, i.getcolumnproperties(), s.bounddata)) && (o.innerHTML = u)); if ("checkbox" == i.columntype) { if (t.host.jqxCheckBox) { "" === r && (r = null); var c = 0 == o.innerHTML.toString().length; if (!o.checkbox || t.groupable || c ? t._rendercheckboxcell(t, o, i, s, r) : (o.checkboxrow = t.getboundindex(s), "" == r && (r = !1), "1" == r && (r = !0), "0" == r && (r = !1), 1 == r && (r = !0), 0 == r && (r = !1), "true" == r && (r = !0), "false" == r && (r = !1), null != r || i.threestatecheckbox || (r = !1), i.checkboxcolumn && (r = !1, t.dataview.filters.length > 0 && !t.virtualmode && void 0 != s.bounddata.dataindex ? -1 != t.selectedrowindexes.indexOf(s.bounddata.dataindex) && (r = !0) : -1 != t.selectedrowindexes.indexOf(s.bounddata.boundindex) && (r = !0)), t.disabled || (o.checkboxinstance ? o.checkboxinstance._setState(r) : o.checkbox.jqxCheckBox("_setState", r))), null != i.cellsrenderer) { var u = i.cellsrenderer(t.getboundindex(s), i.datafield, r, l, i.getcolumnproperties(), s.bounddata); void 0 != u && (o.innerHTML = u) } return } } else if ("button" == i.columntype && t.host.jqxButton) return "" == r && (r = !1), null != i.cellsrenderer && (r = i.cellsrenderer(t.getboundindex(s), i.datafield, r, l, i.getcolumnproperties(), s.bounddata)), "" == o.innerHTML && (o.buttonrow = t.getboundindex(s), o.button = null, t._renderbuttoncell(t, o, i, s, r)), void (o.button && !t.groupable ? (o.buttonrow = t.getboundindex(s), o.button.val(r)) : t._renderbuttoncell(t, o, i, s, r)); var p = h.element; if (null != i.cellsrenderer || o.childNodes && 0 == o.childNodes.length || t.groupable || t.rowdetails) o.innerHTML != p && (o.innerHTML = p); else if (o.innerHTML.indexOf("editor") >= 0) o.innerHTML = p; else if (a) { var m = p.indexOf(">"), g = p.indexOf("</"), f = p.substring(m + 1, g), v = o.childNodes[0]; if (f.indexOf(">") >= 0) o.innerHTML = p; else if (v.childNodes[0]) f != v.childNodes[0].nodeValue && (f.indexOf("&") >= 0 ? o.innerHTML = p : v.childNodes[0].nodeValue = f); else { var x = document.createTextNode(f); v.appendChild(x) } } else o.innerHTML != p && (o.innerHTML = p); t.enabletooltips && i.enabletooltips && (o.title = h.title) }, _isIE10: function () { if (void 0 == this._browser) { var t = e.jqx.utilities.getBrowser(); if ("msie" == t.browser && parseInt(t.version) > 9) this._browser = !0; else if (this._browser = !1, "msie" == t.browser) { var i = "Browser CodeName: " + navigator.appCodeName; i += "Browser Name: " + navigator.appName, i += "Browser Version: " + navigator.appVersion, i += "Platform: " + navigator.platform, -1 != (i += "User-agent header: " + navigator.userAgent).indexOf("Zune 4.7") && (this._browser = !0) } } return this._browser }, _renderinlinecell: function (t, i, s, r, o) { e(i); i.innerHTML = '<div style="position: absolute;"></div>' }, _rendercheckboxcell: function (t, i, s, r, o) { if (t.host.jqxCheckBox) { var a = e(i); if ("" === o && (o = !!s.threestatecheckbox && null), "1" == o && (o = !0), "0" == o && (o = !1), 1 == o && (o = !0), 0 == o && (o = !1), "true" == o && (o = !0), "false" == o && (o = !1), s.checkboxcolumn && (o = !1, this.dataview.filters.length > 0 && void 0 != r.bounddata.dataindex ? -1 != this.selectedrowindexes.indexOf(r.bounddata.dataindex) && (o = !0) : -1 != this.selectedrowindexes.indexOf(r.bounddata.boundindex) && (o = !0)), 0 == a.find(".jqx-checkbox").length) { if (i.innerHTML = '<div style="position: absolute; top: 50%; left: 50%; margin-top: -7px; margin-left: -10px;"></div>', e(i.firstChild).jqxCheckBox({ disabled: t.disabled, _canFocus: !1, hasInput: !1, hasThreeStates: s.threestatecheckbox, enableContainerClick: !1, animationShowDelay: 0, animationHideDelay: 0, locked: !0, theme: t.theme, checked: o }), this.editable && s.editable && e(i.firstChild).jqxCheckBox({ locked: !1 }), s.checkboxcolumn && e(i.firstChild).jqxCheckBox({ locked: !1 }), i.checkbox = e(i.firstChild), i.checkboxinstance = i.checkbox.data().jqxCheckBox.instance, i.checkboxrow = r.boundindex, this.dataview.filters.length > 0) { var n = r.bounddata.dataindex; void 0 == n && (n = r.boundindex), i.checkboxrow = n } e.data(i.firstChild, "jqxCheckBox").instance.updated = function (r, o, a) { if (t.disabled) { o = a; for (var n = t.table[0].rows.length, l = t._getcolumnindex(s.datafield), h = 0; h < n; h++) (d = t.table[0].rows[h].cells[l].firstChild) && e(d).jqxCheckBox({ disabled: t.disabled }) } if (s.editable && !t.disabled) { var n = t.table[0].rows.length, l = t._getcolumnindex(s.datafield); if (void 0 == t.editrow) { if (s.cellbeginedit && 0 == s.cellbeginedit(i.checkboxrow, s.datafield, s.columntype, !o)) return void t.setcellvalue(i.checkboxrow, s.datafield, !o, !0); if ("selectedrow" !== t.editmode) for (h = 0; h < n; h++) { var d = t.table[0].rows[h].cells[l].firstChild; d && e(d).jqxCheckBox("destroy") } t.editcell && 0 == t.editcell.validated ? t.setcellvalue(i.checkboxrow, s.datafield, !o, !0) : "selectedrow" !== t.editmode || null == t.editcell ? (t._raiseEvent(17, { rowindex: i.checkboxrow, datafield: s.datafield, value: a, columntype: s.columntype }), t.setcellvalue(i.checkboxrow, s.datafield, o, !0), t._raiseEvent(18, { rowindex: i.checkboxrow, datafield: s.datafield, oldvalue: a, value: o, columntype: s.columntype })) : t.setcellvalue(i.checkboxrow, s.datafield, o, !1, !1) } } else s.checkboxcolumn && (t.editcell && t.endcelledit(t.editcell.row, t.editcell.column, !1, !0), t.disabled || (o ? t.selectrow(i.checkboxrow) : t.unselectrow(i.checkboxrow), t.autosavestate && t.savestate && t.savestate())) } } else i.checkboxrow = r.boundindex, this.dataview.filters.length > 0 && (n = r.bounddata.dataindex, i.checkboxrow = n), e(i.firstChild).jqxCheckBox("_setState", o) } }, _renderbuttoncell: function (t, i, s, r, o) { if (t.host.jqxButton) { var a = e(i); if ("" == o && (o = !1), 0 == a.find(".jqx-button").length) if (i.innerHTML = '<input type="button" style="opacity: 0.99; position: absolute; top: 0%; left: 0%; padding: 0px; margin-top: 2px; margin-left: 2px;"/>', e(i.firstChild).val(o), e(i.firstChild).attr("hideFocus", "true"), e(i.firstChild).jqxButton({ disabled: t.disabled, theme: t.theme, height: t.rowsheight - 4, width: s.width - 4 }), i.button = e(i.firstChild), i.buttonrow = t.getboundindex(r), this.isTouchDevice()) { var n = e.jqx.mobile.getTouchEventName("touchend"); t.addHandler(e(i.firstChild), n, function (e) { s.buttonclick && s.buttonclick(i.buttonrow, e) }) } else t.addHandler(e(i.firstChild), "click", function (e) { s.buttonclick && s.buttonclick(i.buttonrow, e) }); else i.buttonrow = t.getboundindex(r), e(i.firstChild).val(o) } }, _clearvisualrow: function (t, i, s, r, o) { var a = this.toTP("jqx-grid-cell"); i && (a = " " + this.toTP("jqx-grid-group-cell")), a += " " + this.toTP("jqx-grid-cleared-cell"); for (var n = this.table[0].rows, l = 0; l < r + o; l++) if (n[s]) { var h = n[s].cells[l]; h.className != a && (h.className = a); var d = this.columns.records[l]; if (this._horizontalvalue != t && !d.pinned && 1 == this.oldhscroll) { h.style.marginLeft = -t + "px" } var c = d.width; c < d.minwidth && (c = d.minwidth), c > d.maxwidth && (c = d.maxwidth), parseInt(h.style.width) != c && (e(h)[0].style.width = "auto" != c ? c + "px" : c), "" != h.title && (h.title = ""), "" != h.innerHTML && (h.innerHTML = "") } n[s] && parseInt(n[s].style.height) != this.rowsheight && (n[s].style.height = parseInt(this.rowsheight) + "px") }, _findgroupstate: function (e) { var t = this._findgroup(e); return null != t && t.expanded }, _findgroup: function (e) { return this.expandedgroups[e] ? this.expandedgroups[e] : null }, _clearcaches: function () { this._columnsbydatafield = new Array, this._pagescache = new Array, this._pageviews = new Array, this._cellscache = new Array, this.heights = new Array, this.hiddens = new Array, this.hiddenboundrows = new Array, this.heightboundrows = new Array, this.detailboundrows = new Array, this.details = new Array, this.expandedgroups = new Array, this._rowdetailscache = new Array, this._rowdetailselementscache = new Array, e.jqx.dataFormat && e.jqx.dataFormat.cleardatescache(), this.tableheight = null }, _getColumnText: function (t) { if (void 0 == this._columnsbydatafield && (this._columnsbydatafield = new Array), this._columnsbydatafield[t]) return this._columnsbydatafield[t]; var i = t, s = null; return e.each(this.columns.records, function () { if (this.datafield == t) return i = this.text, s = this, !1 }), this._columnsbydatafield[t] = { label: i, column: s }, this._columnsbydatafield[t] }, _getcolumnbydatafield: function (t) { if (void 0 == this.__columnsbydatafield && (this.__columnsbydatafield = new Array), this.__columnsbydatafield[t]) return this.__columnsbydatafield[t]; var i = t, s = null; return e.each(this.columns.records, function () { if (this.datafield == t || this.displayfield == t) return i = this.text, s = this, !1 }), this.__columnsbydatafield[t] = s, this.__columnsbydatafield[t] }, isscrollingvertically: function () { return this.vScrollBar.jqxScrollBar("isScrolling") }, _renderrowdetails: function (t, i, s, r, o, a) { if (void 0 != i) { var n = e(i), l = this.rowdetails && this.showrowdetailscolumn ? (1 + this.groups.length) * this.groupindentwidth : this.groups.length * this.groupindentwidth; if (this.groupable && this.groups.length > 0) for (var h = 0; h <= o; h++) (d = e(i.cells[h]))[0].innerHTML = "", d[0].className = "jqx-grid-details-cell"; var d = e(i.cells[0]); if ("none" == d[0].style.display) { for (var c = i.cells[0], u = 2; void 0 != c && "none" == c.style.display && u < 10;) c = i.cells[0 + u - 1], u++; d = e(c) } if (this.rtl) for (var p = r; p < o; p++) i.cells[p].innerHTML = "", i.cells[p].className = "jqx-grid-details-cell"; d.css("width", "100%"), n.height(s.rowdetailsheight), d[0].className = t; var m = this.getboundindex(s), g = m + "_"; if (this._rowdetailscache[g]) { var f = this._rowdetailscache[g].html; if (this.initrowdetails) { if (this._rowdetailscache[g].element) { var v = this._rowdetailscache[g].element, x = d.coord(), w = this.gridcontent.coord(), b = parseInt(x.top) - parseInt(w.top), _ = parseInt(x.left) - parseInt(w.left); this.rtl && (_ = 0), e(v).css("top", b), e(v).css("left", _), e(v).css("display", "block"), e(v).width(this.host.width() - l), this.layoutrowdetails && this.layoutrowdetails(m, v, this.element, this.getrowdata(m)) } } else d[0].innerHTML = f } else { d[0].innerHTML = "", this.enablerowdetailsindent || (l = 0); y = '<div class="jqx-enableselect" role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: ' + l + 'px;">' + s.rowdetails + "</div>"; if (this.rtl) var y = '<div class="jqx-enableselect" role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: 0px; margin-right: ' + l + 'px;">' + s.rowdetails + "</div>"; if (this._rowdetailscache[g] = { id: i.id, html: y }, this.initrowdetails) { v = e(y)[0]; e(this.gridcontent).prepend(e(v)), e(v).css("position", "absolute"), e(v).width(this.host.width() - l), e(v).height(d.height()); x = d.coord(); e(v).css("z-index", 2e3), this.isTouchDevice() && e(v).css("z-index", 99999), e(v).addClass(this.toThemeProperty("jqx-widget-content")); var x = d.coord(), w = this.gridcontent.coord(), b = parseInt(x.top) - parseInt(w.top), _ = parseInt(x.left) - parseInt(w.left); e(v).css("top", b), e(v).css("left", _), this.content[0].scrollTop = 0, this.content[0].scrollLeft = 0; var j = e(e(v).children()[0]); "" != j[0].id && (j[0].id = j[0].id + m), this.initrowdetails(m, v, this.element, this.getrowdata(m)), this._rowdetailscache[g].element = v, this._rowdetailselementscache[m] = v } else d[0].innerHTML = y } } }, _defaultcellsrenderer: function (t, i) { "" != i.cellsformat && e.jqx.dataFormat && (e.jqx.dataFormat.isDate(t) ? t = e.jqx.dataFormat.formatdate(t, i.cellsformat, this.gridlocalization) : e.jqx.dataFormat.isNumber(t) && (t = e.jqx.dataFormat.formatnumber(t, i.cellsformat, this.gridlocalization))); var s = "4px"; if (25 != this.rowsheight && ((s = this.rowsheight / 2 - this._cellheight / 2) < 0 && (s = 4), s += "px"), this.enableellipsis) { if ("center" == i.cellsalign || "middle" == i.cellsalign) return '<div style="text-overflow: ellipsis; overflow: hidden; padding-bottom: 2px; text-align: center; margin-top: ' + s + ';">' + t + "</div>"; if ("left" == i.cellsalign) return '<div style="overflow: hidden; text-overflow: ellipsis; padding-bottom: 2px; text-align: left; margin-right: 2px; margin-left: 4px; margin-top: ' + s + ';">' + t + "</div>"; if ("right" == i.cellsalign) return '<div style="overflow: hidden;  text-overflow: ellipsis; padding-bottom: 2px; text-align: right; margin-right: 2px; margin-left: 4px; margin-top: ' + s + ';">' + t + "</div>" } return "center" == i.cellsalign || "middle" == i.cellsalign ? '<div style="text-align: center; margin-top: ' + s + ';">' + t + "</div>" : '<span style="margin-left: 4px; margin-right: 2px; margin-top: ' + s + "; float: " + i.cellsalign + ';">' + t + "</span>" }, getcelltext: function (t, i) { if (null == t || null == i) return null; var s = this.getcellvalue(t, i), r = this.getcolumn(i); return r && "" != r.cellsformat && e.jqx.dataFormat && (e.jqx.dataFormat.isDate(s) ? s = e.jqx.dataFormat.formatdate(s, r.cellsformat, this.gridlocalization) : e.jqx.dataFormat.isNumber(s) && (s = e.jqx.dataFormat.formatnumber(s, r.cellsformat, this.gridlocalization))), s }, getcelltextbyid: function (t, i) { if (null == t || null == i) return null; var s = this.getcellvaluebyid(t, i), r = this.getcolumn(i); return r && "" != r.cellsformat && e.jqx.dataFormat && (e.jqx.dataFormat.isDate(s) ? s = e.jqx.dataFormat.formatdate(s, r.cellsformat, this.gridlocalization) : e.jqx.dataFormat.isNumber(s) && (s = e.jqx.dataFormat.formatnumber(s, r.cellsformat, this.gridlocalization))), s }, _getcellvalue: function (e, t) { var i = null; return i = t.bounddata[e.datafield], null != e.displayfield && (i = t.bounddata[e.displayfield]), null == i && (i = ""), i }, getcell: function (e, t) { if (null == e || null == t) return null; var i = parseInt(e), s = e, r = ""; return isNaN(i) || (s = this.getrowdata(i)), null != s && (r = s[t]), this._getcellresult(r, e, t) }, getrenderedcell: function (e, t) { if (null == e || null == t) return null; var i = parseInt(e), s = e, r = ""; return isNaN(i) || (s = this.getrenderedrowdata(i)), null != s && (r = s[t]), this._getcellresult(r, e, t) }, _getcellresult: function (e, t, i) { var s = this.getcolumn(i); if (null == s || void 0 == s) return null; var r = s.getcolumnproperties(), o = r.hidden, a = r.width, n = r.pinned, l = r.cellsalign, h = r.cellsformat, d = this.getrowheight(t); return 0 == d ? null : { value: e, row: t, column: i, datafield: i, width: a, height: d, hidden: o, pinned: n, align: l, format: h } }, setcellvaluebyid: function (e, t, i, s, r) { var o = this.getrowboundindexbyid(e); return this.setcellvalue(o, t, i, s, r) }, getcellvaluebyid: function (e, t) { var i = this.getrowboundindexbyid(e); return this.getcellvalue(i, t) }, setcellvalue: function (t, i, s, r, o) { if (null == t || null == i) return !1; var a = parseInt(t), n = t; isNaN(a) || (n = this.getrowdata(a)); var l = !1; this.filterable && this._initfilterpanel && this.dataview.filters.length && (l = !0), this.virtualmode && (this._pagescache = new Array), this.sortcache && (this.sortcache = {}); var h = "", d = ""; if (null == n || n[i] === s) return this._updating || 0 == r || this._renderrows(this.virtualsizeinfo), !1; if (null !== n[i] || "" !== s) { var c = this._getcolumnbydatafield(i), u = "string"; if (w = this.source.datafields || (this.source._source ? this.source._source.datafields : null)) { var p = ""; e.each(w, function () { if (this.name == c.displayfield) return this.type && (p = this.type), !1 }), p && (u = p), d = n[c.displayfield] } if (h = n[i], !c.nullable || null != s && "" !== s && c.nullable && void 0 === s.label) { if (e.jqx.dataFormat.isNumber(h) || "number" == u || "float" == u || "int" == u || "decimal" == u && "date" != u) s = new Number(s), s = parseFloat(s), isNaN(s) && (s = 0); else if ((e.jqx.dataFormat.isDate(h) || "date" == u) && "" != s) { var m = s; "Invalid Date" != (m = new Date(m)) && null != m ? s = m : "Invalid Date" == m && (s = m = new Date) } if (n[i] === s) return void (this._updating || 0 == r || this._renderrows(this.virtualsizeinfo)) } n[i] = s; var g = this.getrenderedrowdata(a, !0); if (g) { if (g[i] = s, null != s && null != s.label && (n[(c = this._getcolumnbydatafield(i)).displayfield] = s.label, g[c.displayfield] = s.label, n[i] = s.value, g[i] = s.value), l && void 0 != n.dataindex && (n.dataindex, this.dataview.cachedrecords[n.dataindex][i] = s, null != s && void 0 != s.label && (this.dataview.cachedrecords[n.dataindex][i] = s.value, this.dataview.cachedrecords[n.dataindex][c.displayfield] = s.label)), this.source && this.source._knockoutdatasource && !this._updateFromAdapter && this.autokoupdates && this.source._source._localdata) { var f = a; l && void 0 != n.dataindex && (f = n.dataindex); var v = this.source._source._localdata()[f]; this.source.suspendKO = !0; var x = v; if (x[i] && x[i].subscribe) null != s && null != s.label ? (x[c.displayfield](s.label), x[i](s.value)) : x[i](s); else { var w = this.source._source.datafields, b = null; if (w && e.each(w, function () { if (this.name == i) return b = this.map, !1 }), null == b) null != s && null != s.label ? (x[i] = s.value, x[c.displayfield] = s.label) : x[i] = s; else { var _ = b.split(this.source.mapChar); if (_.length > 0) { for (var y = x, j = 0; j < _.length - 1; j++) y = y[_[j]]; y[_[_.length - 1]] = s } } this.source._source._localdata.replace(v, e.extend({}, x)) } this.source.suspendKO = !1 } if (this.sortcolumn && this.dataview.sortby && !this._updating) { var q = this.getsortinformation(); this.sortcolumn == i && (this.dataview.clearsortdata(), this.dataview.sortby(q.sortcolumn, q.sortdirection.ascending)) } else this._updating || this.dataview.sortby && this.dataview.sortcache[i] && (this.dataview.sortcache[i] = null); if (this._cellscache = new Array, this.source.updaterow && (void 0 == o || 1 == o)) { S = this.that; try { var T = this.getrowid(a); void 0 == this.source.updaterow(T, n, function (e) { 0 == e && (S.setcellvalue(t, i, h, !0, !1), h != d && S.setcellvalue(t, S.getcolumn(i).displayfield, d, !0, !1)) }) && !0 } catch (e) { return !1, S.setcellvalue(t, i, h, !0, !1), void (h != d && S.setcellvalue(t, S.getcolumn(i).displayfield, d, !0, !1)) } } var C = this.vScrollInstance.value; if (this._updating && 1 != r && (r = !1), 1 == r || void 0 == r) { var S = this.that, k = function () { S.pageable && S.updatepagerdetails && (S.updatepagerdetails(), (S.autoheight || S.autorowheight) && S._updatepageviews()) }, I = this.groupable && this.groups.length > 0; l && !I ? ((this.autoheight || this.autorowheight) && (this.prerenderrequired = !0), this.dataview.refresh(), this.rendergridcontent(!0, !1), k(), this._renderrows(this.virtualsizeinfo)) : this.sortcolumn && !I ? ((this.autoheight || this.autorowheight) && (this.prerenderrequired = !0), this.dataview.reloaddata(), this.rendergridcontent(!0, !1), k(), this._renderrows(this.virtualsizeinfo)) : this.groupable && this.groups.length > 0 ? ((this.autoheight || this.autorowheight) && (this.prerenderrequired = !0), this.pageable && -1 != this.groups.indexOf(i) ? (this._pagescache = new Array, this._cellscache = new Array, this.dataview.refresh(), this._render(!0, !0, !1, !1)) : (this._pagescache = new Array, this._cellscache = new Array, this.dataview.updateview(), this._renderrows(this.virtualsizeinfo))) : (this.dataview.updateview(), this._renderrows(this.virtualsizeinfo)) } if (this.vScrollInstance.setPosition(C), this.showaggregates && this._updatecolumnsaggregates && this._updatecolumnsaggregates(), this.showfilterrow && this.filterable && this.filterrow) { var D = this.getcolumn(i).filtertype; "list" != D && "checkedlist" != D || this._updatelistfilters(!0) } return this._raiseEvent(19, { rowindex: t, datafield: i, newvalue: s, value: s, oldvalue: h }), !0 } } }, getcellvalue: function (e, t) { if (null == e || null == t) return null; var i = parseInt(e), s = e; return isNaN(i) || (s = this.getrowdata(i)), null != s ? s[t] : null }, getrows: function () { var t = this.dataview.records.length; if (this.virtualmode) { for (var i = new Array, s = 0; s < this.dataview.records.length; s++) { var r = this.dataview.records[s]; r && i.push(r) } void 0 === this.dataview.records.length && e.each(this.dataview.records, function () { var e = this; e && i.push(e) }); var o = 0; return this.pageable && (o = this.dataview.pagenum * this.dataview.pagesize), i.length > this.source._source.totalrecords - o ? i.slice(0, this.source._source.totalrecords - o) : i } if (this.dataview.sortdata) { for (var i = new Array, s = 0; s < t; s++) { var a = {}; a = e.extend({}, this.dataview.sortdata[s].value), i[s] = a } return i } return this.dataview.records }, getrowboundindexbyid: function (e) { var t = this.dataview.recordsbyid["id" + e]; if (t && t.boundindex) return this.getboundindex(t); for (var i = this.getboundrows(), s = 0; s < i.length; s++) if (i[s] && i[s].uid == e) return s; return -1 }, getrowdatabyid: function (e) { var t = this.dataview.recordsbyid["id" + e]; if (t) return t; var i = this.getrowboundindexbyid(e); return this.getboundrows()[i] }, getrowdata: function (e) { if (void 0 == e && (e = 0), this.virtualmode) return t = this.dataview.records[e]; var t = this.getboundrows()[e]; return t }, getrenderedrowdata: function (e, t) { if (void 0 == e && (e = 0), this.virtualmode) { var i = this.getrowvisibleindex(e); return s = this.dataview.loadedrecords[i] } if ((i = this.getrowvisibleindex(e)) >= 0) { if (this.groupable && this.groups.length > 0) s = this.dataview.loadedrecords[i]; else { s = this.dataview.loadedrecords[i]; if (this.pageable && (void 0 == t || 0 == t)) var s = this.dataview.loadedrecords[this.dataview.pagesize * this.dataview.pagenum + e] } return s } return null }, getboundrows: function () { return this.dataview.cachedrecords }, getrowdisplayindex: function (e) { for (var t = this.getdisplayrows(), i = 0; i < t.length; i++) if (void 0 !== t[i].dataindex) { if (t[i].dataindex === e) return t[i].visibleindex } else if (t[i].boundindex === e) return t[i].visibleindex; return -1 }, getboundindex: function (e) { var t = e.boundindex; return this.groupable && this.groups.length > 0 && this.pageable && (t = this.getrowboundindexbyid(e.bounddata.uid)), this.dataview.filters.length > 0 && (e.bounddata ? void 0 !== e.bounddata.dataindex && (t = e.bounddata.dataindex) : void 0 !== e.dataindex && (t = e.dataindex)), t }, getrowboundindex: function (e) { var t = this.getdisplayrows()[e]; return t ? void 0 !== t.dataindex ? t.dataindex : t.boundindex : -1 }, getdisplayrows: function () { return this.dataview.loadedrecords }, getloadedrows: function () { return this.getdisplayrows() }, getvisiblerowdata: function (e) { var t = this.getvisiblerows(); return t ? t[e] : null }, getloadedrowdata: function (e) { var t = this.getloadedrows(); return t ? t[e] : null }, getvisiblerows: function () { if (this.virtualmode) return this.dataview.loadedrecords; if (this.pageable) { for (var e = [], t = 0; t < this.dataview.pagesize && void 0 != (i = this.dataview.loadedrecords[t + this.dataview.pagesize * this.dataview.pagenum]) ; t++) e.push(i); return e } if (void 0 != this._startboundindex && void 0 != this._endboundindex) { for (var e = [], t = this._startvisibleindex; t <= this._endvisibleindex; t++) { var i = this.dataview.loadedrecords[t]; if (void 0 == i) break; e.push(i) } return e } return this.dataview.loadedrecords }, getrowid: function (e) { if (void 0 == e && (e = 0), this.virtualmode) { s = this.getrowvisibleindex(e); if (t = this.dataview.loadedrecords[s]) return t.uid } else { var t = null, i = this.dataview.filters.length > 0; if (e >= 0 && e < this.dataview.bounditems.length && !i) { if (this.groupable && this.groups.length > 0) var s = this.getrowvisibleindex(e), t = this.dataview.loadedrecords[s]; else var s = this.getrowvisibleindex(e), t = this.dataview.loadedrecords[s]; if (t) return t.uid } if (this.dataview.filters.length > 0) return (t = this.getboundrows()[e]) && null != t.uid ? t.uid : null } return null }, _updateGridData: function (e) { var t = !1; this.filterable && this._initfilterpanel && this.dataview.filters.length && (t = !0), t ? (this.dataview.refresh(), "updaterow" == e ? (this._render(!0, !0, !1, !1, !1), this.invalidate()) : this.render()) : this.sortcolumn || this.groupable && this.groups.length > 0 ? (this.dataview.reloaddata(), this.render()) : (this._cellscache = new Array, this._pagescache = new Array, this._renderrows(this.virtualsizeinfo)), this.showfilterrow && this.filterable && this.filterrow && this._updatelistfilters(!0) }, updaterow: function (t, i, s) { if (void 0 != t && void 0 != i) { var r = this.that, o = !1; r._datachanged = !0; var a = function (t, i, r) { if (t._loading) throw new Error("jqxGrid: " + t.loadingerrormessage); var o = !1; e.isArray(i) ? (e.each(i, function (e, i) { o = t.dataview.updaterow(this, r[e], !1) }), t.dataview.refresh()) : o = t.dataview.updaterow(i, r); var a = t.vScrollInstance.value; if (void 0 != s && 1 != s || void 0 != t._updating && 0 != t._updating || t._updateGridData("updaterow"), t.showaggregates && t._updatecolumnsaggregates && t._updatecolumnsaggregates(), t.source && t.source._knockoutdatasource && !t._updateFromAdapter && t.autokoupdates && t.source._source._localdata) { var n = t.dataview.recordsbyid["id" + i], l = t.dataview.records.indexOf(n), h = t.source._source._localdata()[l]; t.source.suspendKO = !0, t.source._source._localdata.replace(h, e.extend({}, n)), t.source.suspendKO = !1 } return t.vScrollInstance.setPosition(a), o }; if (this.source.updaterow) { try { void 0 == (o = this.source.updaterow(t, i, function (e) { 1 == e || void 0 == e ? a(r, t, i) : o = !1 })) && (o = !0) } catch (e) { o = !1 } } else o = a(r, t, i); return o } return !1 }, deleterow: function (t, i) { if (void 0 != t) { this._datachanged = !0; var s = !1, r = this.that, o = this.getrowboundindexbyid(t); void 0 != o && (this.selectedrowindexes.indexOf(o) >= 0 && this.selectedrowindexes.splice(this.selectedrowindexes.indexOf(o), 1), this.selectedrowindex == o && (this.selectedrowindex = -1)); var a = function (t, s) { if (t._loading) throw new Error("jqxGrid: " + t.loadingerrormessage); var r = !1, o = t.vScrollInstance.value; if (e.isArray(s)) e.each(s, function () { r = t.dataview.deleterow(this, !1) }), t.dataview.refresh(); else r = t.dataview.deleterow(s); return void 0 != t._updating && 0 != t._updating || void 0 != i && 1 != i || (t._render(!0, !0, !1, !1), "visible" != t.vScrollBar.css("visibility") && (t._arrange(), t._updatecolumnwidths(), t._updatecellwidths(), t._renderrows(t.virtualsizeinfo))), t.source && t.source._knockoutdatasource && !t._updateFromAdapter && t.autokoupdates && t.source._source._localdata && (t.source.suspendKO = !0, t.source._source._localdata.pop(rowdata), t.source.suspendKO = !1), t.dataview.sortby && t.dataview.clearsortdata(), t.vScrollInstance.setPosition(o), r }; if (this.source.deleterow) { try { this.source.deleterow(t, function (e) { 1 != e && void 0 != e || a(r, t) }), void 0 == s && (s = !0) } catch (e) { s = !1 } } else s = a(r, t); return s } return !1 }, addrow: function (t, i, s) { if (void 0 != i) { this._datachanged = !0, void 0 == s && (s = "last"); var r = !1, o = this.that; if (null == t) { var a = this.dataview.filters && this.dataview.filters.length > 0 ? this.dataview.cachedrecords.length : this.dataview.totalrecords; if (e.isArray(i)) { var n = new Array; e.each(i, function (e, t) { var s = o.dataview.getid(o.dataview.source.id, i[e], a + e); n.push(s) }), t = n } else for (t = this.dataview.getid(this.dataview.source.id, i, a) ; null != this.dataview.recordsbyid["id" + t];) t++ } var l = function (t, i, s, r) { if (t._loading) throw new Error("jqxGrid: " + t.loadingerrormessage); var o = t.vScrollInstance.value, a = !1; return e.isArray(s) ? (e.each(s, function (e, s) { void 0 != this.dataindex && delete this.dataindex; var o = null; null != i && null != i[e] && (o = i[e]), a = t.dataview.addrow(o, this, r, !1) }), t.dataview.refresh()) : (void 0 != s && void 0 != s.dataindex && delete s.dataindex, a = t.dataview.addrow(i, s, r)), void 0 != t._updating && 0 != t._updating || (t._render(!0, !0, !1, !1), t.invalidate()), t.source && t.source._knockoutdatasource && !t._updateFromAdapter && t.autokoupdates && t.source._source._localdata && (t.source.suspendKO = !0, t.source._source._localdata.push(s), t.source.suspendKO = !1), "deferred" != t.scrollmode ? t.vScrollInstance.setPosition(o) : t.vScrollInstance.setPosition(0), a }; if (this.source.addrow) { try { void 0 == (r = this.source.addrow(t, i, s, function (e, r) { 1 != e && void 0 != e || (void 0 != r && (t = r), l(o, t, i, s)) })) && (r = !0) } catch (e) { r = !1 } if (0 == r) return !1 } else l(this, t, i, s); return r } return !1 }, _findvisiblerow: function (e, t) { void 0 == e && (e = parseInt(this.vScrollInstance.value)); var i = 0; void 0 != t && null != t || (t = this.rows.records); for (var s = t.length; i <= s;) { mid = parseInt((i + s) / 2); var r = t[mid]; if (void 0 == r) break; if (r.top > e && r.top + r.height > e) s = mid - 1; else { if (!(r.top < e && r.top + r.height < e)) return mid; i = mid + 1 } } return -1 }, _updatecellwidths: function () { var e = this.virtualsizeinfo; if (e) { this.that; if (void 0 != this.gridcontent) { void 0 == this.table && (this.table = this.gridcontent.find("#contenttable" + this.element.id)); var t = this.groupable && this.groups.length > 0, i = 0, s = e.visiblerecords; if (this.pageable && (this.autoheight || this.autorowheight) && (s = this.dataview.pagesize, this.groupable && (this.dataview.updateview(), s = this.dataview.rows.length)), this.groupable || this.pageable || !this.autoheight && !this.autorowheight || (s = this.dataview.totalrecords), this.rowdetails && (s += this.dataview.pagesize), this.columns.records) { for (var r = this.columns.records.length, o = this.table[0].rows, a = 0; a < s; a++) { var n = o[a]; if (!n) break; for (var l = n.cells, h = 0, d = 0; d < r; d++) { var c = this.columns.records[d], u = c.width, p = l[d]; parseInt(p.style.left) != h && (p.style.left = h + "px"), parseInt(p.style.width) != u && (p.style.width = u + "px"), c.hidden && c.hideable ? p.style.display = "none" : h += parseFloat(u) } 0 == i && (this.table.width(parseFloat(h) + 2), i = h) } this.showaggregates && this._updateaggregates && this._updateaggregates(), this.showfilterrow && this.filterable && this._updatefilterrowui && this._updatefilterrowui(), this._updatescrollbarsafterrowsprerender(), t && this._renderrows(this.virtualsizeinfo) } } } }, _updatescrollbarsafterrowsprerender: function () { var e = this.hScrollBar[0].style.visibility, t = 0, i = this.vScrollBar[0].style.visibility; "visible" == i && (t = this.scrollbarsize + 3); var s = this.element.style.width; if (s = s.toString().indexOf("%") >= 0 ? this.host.width() : parseInt(s), parseInt(this.table[0].style.width) - 2 > s - t) { if ("visible" != e && (this.autowidth || (this.hScrollBar[0].style.visibility = "visible"), this._arrange()), "visible" == i) { if ("deferred" == this.scrollmode || this.virtualmode) this._updatevscrollbarmax(); else if (this.virtualsizeinfo) { var r = this.virtualsizeinfo.virtualheight - this._gettableheight(); !isNaN(r) && r > 0 && ("hidden" != e ? this.vScrollBar.jqxScrollBar("max", r + this.scrollbarsize + 4) : this.vScrollBar.jqxScrollBar("max", r)) } } else t = -2; this.hScrollBar.jqxScrollBar("max", t + this.table.width() - this.host.width()) } else "hidden" != e && (this.hScrollBar.css("visibility", "hidden"), this._arrange()); this._renderhorizontalscroll() }, _prerenderrows: function (t) { var i = this.that; if (1 == this.prerenderrequired) { if (this.prerenderrequired = !1, this.editable && this._destroyeditors && this._destroyeditors(), void 0 == this.gridcontent) return; this.gridcontent.find("#contenttable" + this.element.id).remove(), null != this.table && (this.table.remove(), this.table = null), this.table = e('<div id="contenttable' + this.element.id + '" style="overflow: hidden; position: relative;" height="100%"></div>'), this.gridcontent.addClass(this.toTP("jqx-grid-content")), this.gridcontent.addClass(this.toTP("jqx-widget-content")), this.gridcontent.append(this.table); var s = this.groupable && this.groups.length > 0, r = 0; this.table[0].rows = new Array; var o = this.toTP("jqx-grid-cell"); s && (o = " " + this.toTP("jqx-grid-group-cell")); var a = t.visiblerecords; if (this.pageable && (this.autoheight || this.autorowheight) && (a = this.dataview.pagesize, this.groupable && (this.dataview.updateview(), (a = this.dataview.rows.length) < this.dataview.pagesize && (a = this.dataview.pagesize))), this.pageable || !this.autoheight && !this.autorowheight || (a = this.dataview.totalrecords), this.groupable && (this.autoheight || this.autorowheight) && !this.pageable && (a = this.dataview.rows.length), this.rowdetails && (this.autoheight || this.autorowheight ? a += this.dataview.pagesize : a += a), !this.columns.records) return; var n = this.columns.records.length; e.jqx.browser.msie && e.jqx.browser.version > 8 && this.table.css("opacity", "0.99"), e.jqx.browser.mozilla, -1 != navigator.userAgent.indexOf("Safari") && this.table.css("opacity", "0.99"); var l = e.jqx.browser.msie && e.jqx.browser.version < 8; l && this.host.attr("hideFocus", "true"); var h = this.tableZIndex; a * n > h && (h = a * n); this.dataview.records.length, this.isTouchDevice(); var d = ""; this._hiddencolumns = !1; for (g = 0; g < a; g++) { x = '<div role="row" style="position: relative; height=' + this.rowsheight + 'px;" id="row' + g + this.element.id + '">'; if (l) { x = '<div role="row" style="position: relative; z-index: ' + h + "; height:" + this.rowsheight + 'px;" id="row' + g + this.element.id + '">'; h-- } for (var c = 0, u = 0; u < n; u++) { if ((b = (w = this.columns.records[u]).width) < w.minwidth && (b = w.minwidth), b > w.maxwidth && (b = w.maxwidth), this.rtl) { p = '<div role="gridcell" style="left: ' + c + "px; z-index: " + (h - n + 2 * u) + "; width:" + b + "px;"; h-- } else var p = '<div role="gridcell" style="left: ' + c + "px; z-index: " + h-- + "; width:" + b + "px;"; w.hidden && w.hideable ? (p += "display: none;", this._hiddencolumns = !0, h++) : c += b, x += p += '" class="' + o + '"></div>' } 0 == r && (this.table.width(parseInt(c) + 2), r = c), d += x += "</div>" } i.WinJS ? MSApp.execUnsafeLocalFunction(function () { i.table.html(d) }) : i.table[0].innerHTML = d, this.table[0].rows = new Array; for (var m = this.table.children(), g = 0; g < a; g++) { var f = m[g]; this.table[0].rows.push(f), f.cells = new Array; for (var v = e(f).children(), u = 0; u < n; u++) f.cells.push(v[u]) } if (0 == a) { c = 0; if (this.showemptyrow) { var x = e('<div style="position: relative;" id="row0' + this.element.id + '"></div>'); this.table.append(x), x.height(this.rowsheight), this.table[0].rows[0] = x[0], this.table[0].rows[0].cells = new Array } for (u = 0; u < n; u++) { var w = this.columns.records[u], b = w.width; this.showemptyrow && ((p = e('<div style="position: absolute; height: 100%; left: ' + c + "px; z-index: " + h-- + "; width:" + b + 'px;" class="' + o + '"></div>')).height(this.rowsheight), x.append(p), this.table[0].rows[0].cells[u] = p[0]), b < w.minwidth && (b = w.minwidth), b > w.maxwidth && (b = w.maxwidth), w.hidden && w.hideable || (c += b) } this.table.width(parseInt(c) + 2), r = c } this._updatescrollbarsafterrowsprerender(), this.rendered && this.rendered("rows"), this._addoverlayelement() } }, _groupsheader: function () { return this.groupable && this.showgroupsheader }, _arrange: function () { var e = null, t = null; this.tableheight = null; var i = this.that, s = !1, r = !1; if (null != this.width && -1 != this.width.toString().indexOf("px") ? e = this.width : void 0 == this.width || isNaN(this.width) || (e = this.width), null != this.width && -1 != this.width.toString().indexOf("%") && (e = this.width, s = !0), this.autowidth) { for (var o = 0, a = 0; a < this.columns.records.length; a++) { var n = this.columns.records[a].width; o += "auto" == n ? n = this._measureElementWidth(this.columns.records[a].text) : n } "hidden" != this.vScrollBar.css("visibility") && (o += this.scrollbarsize + 4), e = o, this.width = e } null != this.height && -1 != this.height.toString().indexOf("px") ? t = this.height : void 0 == this.height || isNaN(this.height) || (t = this.height), null != this.height && -1 != this.height.toString().indexOf("%") && (t = this.height, r = !0); var l = function () { var e = 0; return e += i.showheader && null != i.columnsheader ? i.columnsheader.height() + 2 : 0, i.pageable && (e += i.pagerheight), i._groupsheader() && (e += i.groupsheaderheight), i.showtoolbar && (e += i.toolbarheight), i.showstatusbar && (e += i.statusbarheight), "visible" == i.hScrollBar[0].style.visibility && (e += 20), e }; if (this.autoheight && this.virtualsizeinfo) if (this.pageable && this.gotopage) t = (h = 0) + (this._pageviews[0] ? this._pageviews[0].height : 0), t += l(), this.showemptyrow && 0 == this.dataview.totalrecords && (t += this.rowsheight); else { var h = this.host.height() - this._gettableheight(); this._pageviews.length > 0 ? (t = h + this._pageviews[this._pageviews.length - 1].height + this._pageviews[this._pageviews.length - 1].top, this.vScrollBar[0].style.visibility = "hidden") : (t = l(), this.showemptyrow && (t += this.rowsheight)) } else this.autoheight && (t = this.dataview.totalrecords * this.rowsheight, this._loading && (t = 250, this.dataloadelement.height(t)), (t += l()) > 1e4 && (t = 1e4)); null != e ? (e = parseInt(e), s ? this.element.style.width = this.width : this.element.style.width != parseInt(this.width) + "px" && (this.element.style.width = parseInt(this.width) + "px"), s && ((e = this.host.width()) <= 2 && (e = 600, this.host.width(e)), this._oldWidth || (this._oldWidth = e))) : this.host.width(250), null != t ? (r || (t = parseInt(t)), r ? this.element.style.height = this.height : this.element.style.height != parseInt(t) + "px" && (this.element.style.height = parseInt(t) + "px"), r && !this.autoheight && (0 == (t = this.host.height()) && (t = 400, this.host.height(t)), this._oldHeight || (this._oldHeight = t))) : this.host.height(250), this.autoheight && (this.tableheight = null, this._gettableheight()); var d = 0; if (this.showtoolbar ? (this.toolbar.width(e), this.toolbar.height(this.toolbarheight - 1), this.toolbar.css("top", 0), d += this.toolbarheight, t -= parseInt(this.toolbarheight)) : this.toolbar[0].style.height = "0px", this.showstatusbar ? (this.showaggregates ? this.statusbar.width(this.table ? Math.max(e, this.table.width()) : e) : this.statusbar.width(e), this.statusbar.height(this.statusbarheight)) : this.statusbar[0].style.height = "0px", this._groupsheader()) this.groupsheader.width(e), this.groupsheader.height(this.groupsheaderheight), this.groupsheader.css("top", d), d += c = this.groupsheader.height() + 1, t > c && (t -= parseInt(c)); else { this.groupsheader[0].style.width != e + "px" && (this.groupsheader[0].style.width = parseInt(e) + "px"), this.groupsheader[0].style.height = "0px", this.groupsheader[0].style.top != d + "px" && this.groupsheader.css("top", d); var c = this.showgroupsheader && this.groupable ? this.groupsheaderheight : 0, u = d + c + "px"; this.content[0].style.top != u && this.content.css("top", d + this.groupsheaderheight) } var p = this.scrollbarsize; isNaN(p) && (p = parseInt(p), isNaN(p) ? p = "17px" : p += "px"), p = parseInt(p); var m = 2, g = 0; "visible" == this.vScrollBar[0].style.visibility && (g = p + 4), "visible" == this.hScrollBar[0].style.visibility && (m = p + 4 + 2); var f = 0; this.pageable && (f = this.pagerheight, m += this.pagerheight), this.showstatusbar && (m += this.statusbarheight, f += this.statusbarheight), this.hScrollBar[0].style.height != p + "px" && (this.hScrollBar[0].style.height = parseInt(p) + "px"), this.hScrollBar[0].style.top == d + t - 4 - p - f + "px" && "0px" == this.hScrollBar[0].style.left || this.hScrollBar.css({ top: d + t - 4 - p - f + "px", left: "0px" }); var v = this.hScrollBar[0].style.width, x = !1, w = !1; 0 == g ? v != e - 2 + "px" && (this.hScrollBar.width(e - 2), x = !0) : v != e - p - 4 + "px" && (this.hScrollBar.width(e - p - 4 + "px"), x = !0), this.autoheight || (this.vScrollBar[0].style.width != p + "px" && (this.vScrollBar.width(p), w = !0), this.vScrollBar[0].style.height != parseInt(t) - m + "px" && (this.vScrollBar.height(parseInt(t) - m + "px"), w = !0), this.vScrollBar[0].style.left == parseInt(e) - parseInt(p) - 4 + "px" && this.vScrollBar[0].style.top == d + "px" || this.vScrollBar.css({ left: parseInt(e) - parseInt(p) - 4 + "px", top: d })), this.rtl && (this.vScrollBar.css({ left: "0px", top: d }), "hidden" != this.vScrollBar.css("visibility") && this.hScrollBar.css({ left: p + 2 })); var b = this.vScrollInstance; b.disabled = this.disabled, this.autoheight || w && b.refresh(); var _ = this.hScrollInstance; _.disabled = this.disabled, x && _.refresh(), this.autowidth && (this.hScrollBar[0].style.visibility = "hidden"), this.statusbarheight = parseInt(this.statusbarheight), this.toolbarheight = parseInt(this.toolbarheight); var y = function (e) { "visible" == e.vScrollBar[0].style.visibility && "visible" == e.hScrollBar[0].style.visibility ? (e.bottomRight[0].style.visibility = "visible", e.bottomRight.css({ left: 1 + parseInt(e.vScrollBar.css("left")), top: parseInt(e.hScrollBar.css("top")) }), e.rtl && e.bottomRight.css("left", "0px"), e.bottomRight.width(parseInt(p) + 3), e.bottomRight.height(parseInt(p) + 4), e.showaggregates && (e.bottomRight.css("z-index", 99), e.bottomRight.height(parseInt(p) + 4 + e.statusbarheight), e.bottomRight.css({ top: parseInt(e.hScrollBar.css("top")) - e.statusbarheight }))) : e.bottomRight[0].style.visibility = "hidden" }; if (y(this), this.content[0].style.width != e - g + "px" && this.content.width(e - g), this.content[0].style.height != t - m + 3 + "px" && this.content.height(t - m + 3), this.content[0].style.top != d + "px" && this.content.css("top", d), this.rtl && (this.content.css("left", g), this.table)) { var j = this.table.width(); j < e - g && this.content.css("left", e - j) } if (this.showstatusbar && (this.statusbar.css("top", d + t - this.statusbarheight - (this.pageable ? this.pagerheight : 0)), this.showaggregates && ("visible" == this.hScrollBar.css("visibility") && (this.hScrollBar.css({ top: d + t - 4 - p - f + this.statusbarheight + "px" }), this.statusbar.css("top", 1 + d + t - p - 5 - this.statusbarheight - (this.pageable ? this.pagerheight : 0))), y(this)), this.rtl && ("visible" != this.hScrollBar.css("visibility") ? this.statusbar.css("left", this.content.css("left")) : this.statusbar.css("left", "0px"))), this.pageable ? (this.pager.width(e), this.pager.height(this.pagerheight), this.pager.css("top", d + t - this.pagerheight - 1)) : this.pager[0].style.height = "0px", null != this.table) { var q = -2; if ("visible" == this.vScrollBar[0].style.visibility && (q = this.scrollbarsize + 3), "visible" == this.hScrollBar[0].style.visibility) { var T = q + this.table.width() - this.host.width(); T >= 0 && this.hScrollBar.jqxScrollBar("max", T), "visible" == this.hScrollBar[0].style.visibility && 0 == T && (this.hScrollBar[0].style.visibility = "hidden", this._arrange()) } } e != parseInt(this.dataloadelement[0].style.width) && (this.dataloadelement[0].style.width = this.element.style.width), t != parseInt(this.dataloadelement[0].style.height) && (this.dataloadelement[0].style.height = this.element.style.height), this._hostwidth = e }, destroy: function () { if (delete e.jqx.dataFormat.datescache, delete this.gridlocalization, e.jqx.utilities.resize(this.host, null, !0), this.table && this.table[0]) { for (var t = this.table[0].rows.length, i = 0; i < t; i++) { for (var s = this.table[0].rows[i], r = s.cells.length, o = 0; o < r; o++) e(s.cells[o]).remove(), s.cells[o] = null, delete s.cells[o]; s.cells = null, s.cells && delete s.cells, e(this.table[0].rows[i]).remove(), this.table[0].rows[i] = null } try { delete this.table[0].rows } catch (e) { } this.table.remove(), delete this.table } if (this.columns && this.columns.records) { for (i = 0; i < this.columns.records.length; i++) { var a = this.columns.records[i]; this._removecolumnhandlers(this.columns.records[i]), a.element && (e(a.element).remove(), e(a.sortasc).remove(), e(a.sortdesc).remove(), e(a.filtericon).remove(), e(a.menu).remove(), a.element = null, a.uielement = null, a.sortasc = null, a.sortdesc = null, a.filtericon = null, a.menu = null, delete a.element, delete a.uielement, delete a.sortasc, delete a.sortdesc, delete a.filtericon, delete a.menu, delete this.columnsrow[0].cells[i]) } try { delete this.columnsrow[0].cells } catch (e) { } delete this.columnsrow } if (jQuery.removeData(document.body, "contextmenu" + this.element.id), this.host.jqxDropDownList && this._destroyfilterpanel && this._destroyfilterpanel(), this.editable && this._destroyeditors && this._destroyeditors(), this.filterable && this._destroyedfilters && this.showfilterrow && this._destroyedfilters(), this.host.jqxMenu && this.gridmenu && (this.removeHandler(e(document), "click.menu" + this.element.id), this.removeHandler(this.gridmenu, "keydown"), this.removeHandler(this.gridmenu, "closed"), this.removeHandler(this.gridmenu, "itemclick"), this.gridmenu.jqxMenu("destroy"), this.gridmenu = null), this.pagershowrowscombo && (this.pagershowrowscombo.jqxDropDownList("destroy"), this.pagershowrowscombo = null), this.pagerrightbutton && (this.removeHandler(this.pagerrightbutton, "mousedown"), this.removeHandler(this.pagerrightbutton, "mouseup"), this.removeHandler(this.pagerrightbutton, "click"), this.pagerrightbutton.jqxButton("destroy"), this.pagerrightbutton = null), this.pagerleftbutton && (this.removeHandler(this.pagerleftbutton, "mousedown"), this.removeHandler(this.pagerleftbutton, "mouseup"), this.removeHandler(this.pagerleftbutton, "click"), this.pagerleftbutton.jqxButton("destroy"), this.removeHandler(e(document), "mouseup.pagerbuttons" + this.element.id), this.pagerleftbutton = null), this.removeHandler(e(document), "selectstart." + this.element.id), this.removeHandler(e(document), "mousedown.resize" + this.element.id), this.removeHandler(e(document), "mouseup.resize" + this.element.id), this.removeHandler(e(document), "mousemove.resize" + this.element.id), this.isTouchDevice()) { var n = e.jqx.mobile.getTouchEventName("touchmove") + ".resize" + this.element.id, l = e.jqx.mobile.getTouchEventName("touchstart") + ".resize" + this.element.id, h = e.jqx.mobile.getTouchEventName("touchend") + ".resize" + this.element.id; this.removeHandler(e(document), n), this.removeHandler(e(document), l), this.removeHandler(e(document), h) } if (this.removeHandler(e(document), "mousedown.reorder" + this.element.id), this.removeHandler(e(document), "mouseup.reorder" + this.element.id), this.removeHandler(e(document), "mousemove.reorder" + this.element.id), this.isTouchDevice()) { var n = e.jqx.mobile.getTouchEventName("touchmove") + ".reorder" + this.element.id, l = e.jqx.mobile.getTouchEventName("touchstart") + ".reorder" + this.element.id, h = e.jqx.mobile.getTouchEventName("touchend") + ".reorder" + this.element.id; this.removeHandler(e(document), n), this.removeHandler(e(document), l), this.removeHandler(e(document), h) } if (this.removeHandler(e(window), "resize." + this.element.id), this.groupable) { var n = "mousemove.grouping" + this.element.id, l = "mousedown.grouping" + this.element.id, h = "mouseup.grouping" + this.element.id; this.removeHandler(e(document), n), this.removeHandler(e(document), l), this.removeHandler(e(document), h) } if (this.columnsreorder) { var n = "mousemove.reorder" + this.element.id, l = "mousedown.reorder" + this.element.id, h = "mouseup.reorder" + this.element.id; this.removeHandler(e(document), n), this.removeHandler(e(document), l), this.removeHandler(e(document), h), delete this.columnsbounds } if (this.content && (this.removeHandler(this.content, "mousedown"), this.removeHandler(this.content, "scroll")), this._removeHandlers(), this.hScrollInstance.destroy(), this.vScrollInstance.destroy(), this.hScrollBar.remove(), this.vScrollBar.remove(), this._clearcaches(), delete this.hScrollInstance, delete this.vScrollInstance, delete this.visiblerows, delete this.hittestinfo, delete this.rows, delete this.columns, delete this.columnsbydatafield, delete this.pagescache, delete this.pageviews, delete this.cellscache, delete this.heights, delete this.hiddens, delete this.hiddenboundrows, delete this.heightboundrows, delete this.detailboundrows, delete this.details, delete this.expandedgroups, delete this._rowdetailscache, delete this._rowdetailselementscache, delete this.columnsmenu, this.columnsheader.remove(), delete this.columnsheader, this.selectionarea.remove(), delete this.selectionarea, this.menuitemsarray && this.menuitemsarray.length) for (var d = this.menuitemsarray.length, i = 0; i < d; i++) e(this.menuitemsarray[i]).remove(); delete this.menuitemsarray, this.dataview._clearcaches(), this.content.removeClass(), this.content.remove(), this.content = null, delete this.content, this.vScrollBar = null, this.hScrollBar = null, delete this.hScrollBar, delete this.hScrollBar, this.gridcontent.remove(), delete this.gridcontent, this.gridmenu && (this.gridmenu = null, delete this.gridmenu), delete this._mousemovefunc, delete this._mousewheelfunc, this.dataview.destroy(), delete this.dataview, this.bottomRight.remove(), delete this.bottomRight, this.wrapper.remove(), delete this.wrapper, this.pagerdiv && (this.pagerdiv.remove(), delete this.pagerdiv), this.pagerpageinput && (this.pagerpageinput.remove(), delete this.pagerpageinput), this.pagergoto && (this.pagergoto.remove(), delete this.pagergoto), this.pagershowrows && (this.pagershowrows.remove(), delete this.pagershowrows), this.pagerfirstbutton && (this.pagerfirstbutton.remove(), delete this.pagerfirstbutton), this.pagerlastbutton && (this.pagerlastbutton.remove(), delete this.pagerlastbutton), this.pagerbuttons && (this.pagerbuttons.remove(), delete this.pagerbuttons), this.pagerdetails && (this.pagerdetails.remove(), delete this.pagerdetails), this.pagergotoinput && (this.pagergotoinput.remove(), delete this.pagergotoinput), this.pager.remove(), delete this.pager, this.groupsheader.remove(), delete this.groupsheader, this.dataloadelement.remove(), delete this.dataloadelement, this.toolbar.remove(), delete this.toolbar, this.statusbar.remove(), delete this.statusbar, this.host.removeData(), this.host.removeClass(), this.host.remove(), this.host = null, delete this.host, delete this.element, delete this.set, delete this.get, delete this.that, delete this.call }, _initializeColumns: function () { var i = this.source ? this.source.datafields : null; null == i && this.source && this.source._source && (i = this.source._source.datafields); var s = !!i && i.length > 0; if (this.autogeneratecolumns) { var r = new Array; if (i) e.each(i, function () { var e = { datafield: this.name, text: this.text || this.name, cellsformat: this.format || "" }; r.push(e) }); else if (this.source.records.length > 0) { var o = this.source.records[0]; for (obj in o) if ("uid" != obj) { var a = { width: 100, datafield: obj, text: obj }; r.push(a) } } this.columns = r } if (this.columns && this.columns.records) for (var n = 0; n < this.columns.records.length; n++) this._removecolumnhandlers(this.columns.records[n]); var l = this.that, h = new e.jqx.collection(this.element), d = 0; this._haspinned = !1, this._columns ? this.columns = this._columns : this._columns = this.columns, this.groupable && e.each(this.groups, function (e) { var i = new t(l, this); i.visibleindex = d++, i.width = l.groupindentwidth, h.add(i), i.grouped = !0, i.filterable = !1, i.sortable = !1, i.editable = !1, i.resizable = !1, i.draggable = !1 }), this.rowdetails && this.showrowdetailscolumn && ((a = new t(l, this)).visibleindex = d++, a.width = l.groupindentwidth, a.pinned = !0, a.editable = !1, a.filterable = !1, a.draggable = !1, a.groupable = !1, a.resizable = !1, h.add(a), l._haspinned = !0), "checkbox" == this.selectionmode && ((a = new t(l, null)).visibleindex = d++, a.width = l.groupindentwidth, a.checkboxcolumn = !0, a.editable = !1, a.columntype = "checkbox", a.groupable = !1, a.draggable = !1, a.filterable = !1, a.resizable = !1, a.datafield = "_checkboxcolumn", h.add(a)); var c = new Array; e.each(this.columns, function (e) { if (void 0 != l.columns[e]) { var i = new t(l, this); if (i.visibleindex = d++, void 0 != this.dataField && (this.datafield = this.dataField), this.pinned && (l._haspinned = !0), null == this.datafield) l.source && l.source._source && "array" == l.source._source.datatype && (s || (l.source._source.datafields ? l.source._source.datafields.push({ name: e.toString() }) : (l.source._source.datafields = new Array, l.source._source.datafields.push({ name: e.toString() }))), this.datafield = e.toString(), this.displayfield = e.toString(), i.datafield = this.datafield, i.displayfield = this.displayfield); else { if (c[this.datafield]) throw new Error("jqxGrid: Invalid column 'datafield' setting. jqxGrid's columns should be initialized with unique data fields."); c[this.datafield] = !0 } h.add(i) } }), this.rtl && h.records.reverse(), this.columns = h }, _initializeRows: function () { var t = new e.jqx.collection(this.element); this.rows && this.rows.clear(), this.rows = t }, _raiseEvent: function (e, t) { if (void 0 == t && (t = { owner: null }), !1 !== this._trigger) { var i = this.events[e]; this._camelCase || (i = i.toLowerCase()), args = t, args.owner = this; var s = new jQuery.Event(i); s.owner = this, s.args = args; var r = this.host.trigger(s); return t = s.args, r } }, wheel: function (e, t) { if (t.autoheight && "visible" != t.hScrollBar.css("visibility")) return e.returnValue = !0, !0; var i = 0; if (e || (e = window.event), e.originalEvent && e.originalEvent.wheelDelta && (e.wheelDelta = e.originalEvent.wheelDelta), e.wheelDelta ? i = e.wheelDelta / 120 : e.detail && (i = -e.detail / 3), i) { var s = t._handleDelta(i); return s && (e.preventDefault && e.preventDefault(), null != e.originalEvent && (e.originalEvent.mouseHandled = !0), void 0 != e.stopPropagation && e.stopPropagation()), !!s && (s = !1, e.returnValue = s, s) } e.preventDefault && e.preventDefault(), e.returnValue = !1 }, _handleDelta: function (e) { if ("hidden" != this.vScrollBar.css("visibility")) { t = this.vScrollInstance.value; if (e < 0 ? this.scrollDown() : this.scrollUp(), t != (i = this.vScrollInstance.value)) return !0 } else if ("hidden" != this.hScrollBar.css("visibility")) { var t = this.hScrollInstance.value; e > 0 ? this.hScrollInstance.value > 2 * this.horizontalscrollbarstep ? this.hScrollInstance.setPosition(this.hScrollInstance.value - 2 * this.horizontalscrollbarstep) : this.hScrollInstance.setPosition(0) : this.hScrollInstance.value < this.hScrollInstance.max ? this.hScrollInstance.setPosition(this.hScrollInstance.value + 2 * this.horizontalscrollbarstep) : this.hScrollInstance.setPosition(this.hScrollInstance.max); var i = this.hScrollInstance.value; if (t != i) return !0 } return !1 }, scrollDown: function () { if ("hidden" != this.vScrollBar.css("visibility")) { var e = this.vScrollInstance; e.value + this.rowsheight <= e.max ? e.setPosition(parseInt(e.value) + this.rowsheight) : e.setPosition(e.max) } }, scrollUp: function () { if ("hidden" != this.vScrollBar.css("visibility")) { var e = this.vScrollInstance; e.value - this.rowsheight >= e.min ? e.setPosition(parseInt(e.value) - this.rowsheight) : e.setPosition(e.min) } }, _removeHandlers: function () { this.that; this.removeHandler(this.vScrollBar, "valuechanged"), this.removeHandler(this.hScrollBar, "valuechanged"), this.vScrollInstance.valuechanged = null, this.hScrollInstance.valuechanged = null; var t = "mousedown.jqxgrid"; this.isTouchDevice() && (t = e.jqx.mobile.getTouchEventName("touchend")), this.removeHandler(this.host, "dblclick.jqxgrid"), this.removeHandler(this.host, t), this.removeHandler(this.content, "mousemove", this._mousemovefunc), this.removeHandler(this.host, "mouseleave.jqxgrid"), this.removeHandler(this.content, "mouseenter"), this.removeHandler(this.content, "mouseleave"), this.removeHandler(this.content, "mousedown"), this.removeHandler(this.content, "scroll"), this.removeHandler(this.content, "selectstart." + this.element.id), this.removeHandler(this.host, "dragstart." + this.element.id), this.removeHandler(this.host, "keydown.edit" + this.element.id), this.removeHandler(e(document), "keydown.edit" + this.element.id), this.removeHandler(e(document), "keyup.edit" + this.element.id), this._mousemovedocumentfunc && this.removeHandler(e(document), "mousemove.selection" + this.element.id, this._mousemovedocumentfunc), this.removeHandler(e(document), "mouseup.selection" + this.element.id), this._mousewheelfunc && this.removeHandler(this.host, "mousewheel", this._mousewheelfunc), this.editable && this.removeHandler(e(document), "mousedown.gridedit" + this.element.id), this.host.off && (this.content.off("mousemove"), this.host.off("mousewheel")) }, _addHandlers: function () { var t = this.that, i = t.isTouchDevice(); i || this.addHandler(this.host, "dragstart." + this.element.id, function (e) { return !1 }), this.editable && this.addHandler(e(document), "mousedown.gridedit" + this.element.id, function (e) { if (t.editable && t.begincelledit && t.editcell && !t.vScrollInstance.isScrolling() && !t.vScrollInstance.isScrolling()) { var i = t.host.coord(), s = t.host.width(), r = t.host.height(), o = !1, a = !1; if ((e.pageY < i.top || e.pageY > i.top + r) && (o = !0, a = !0), (e.pageX < i.left || e.pageX > i.left + s) && (o = !0, !0), o) { if (t.editcell && t.editcell.editor) switch (t.editcell.columntype) { case "datetimeinput": if (t.editcell.editor.jqxDateTimeInput && t.editcell.editor.jqxDateTimeInput("container") && "block" == t.editcell.editor.jqxDateTimeInput("container")[0].style.display) { var n = t.editcell.editor.jqxDateTimeInput("container").coord().top, l = t.editcell.editor.jqxDateTimeInput("container").coord().top + t.editcell.editor.jqxDateTimeInput("container").height(); if (!a || !(e.pageY < n || e.pageY > l)) return; o = !0, t.editcell.editor.jqxDateTimeInput("close") } break; case "combobox": if (t.editcell.editor.jqxComboBox && t.editcell.editor.jqxComboBox("container") && "block" == t.editcell.editor.jqxComboBox("container")[0].style.display) { var n = t.editcell.editor.jqxComboBox("container").coord().top, l = t.editcell.editor.jqxComboBox("container").coord().top + t.editcell.editor.jqxComboBox("container").height(); if (!a || !(e.pageY < n || e.pageY > l)) return; o = !0, t.editcell.editor.jqxComboBox("close") } break; case "dropdownlist": if (t.editcell.editor.jqxDropDownList && t.editcell.editor.jqxDropDownList("container") && "block" == t.editcell.editor.jqxDropDownList("container")[0].style.display) { var n = t.editcell.editor.jqxDropDownList("container").coord().top, l = t.editcell.editor.jqxDropDownList("container").coord().top + t.editcell.editor.jqxDropDownList("container").height(); if (!a || !(e.pageY < n || e.pageY > l)) return; o = !0, t.editcell.editor.jqxDropDownList("close") } break; case "template": case "custom": for (var h = ["jqxDropDownList", "jqxComboBox", "jqxDropDownButton", "jqxDateTimeInput"], d = 0; d < h.length; d++) if (0 == function (i) { var s = t.editcell.editor.data(); if (s[i] && s[i].instance.container && "block" == s[i].instance.container[0].style.display) { var r = s[i].instance, n = r.container.coord().top, l = r.container.coord().top + r.container.height(); return !(!a || !(e.pageY < n || e.pageY > l)) && (o = !0, r.close(), !0) } }(h[d])) return } t.endcelledit(t.editcell.row, t.editcell.column, !1, !0), t._oldselectedcell = null } } }), this.vScrollInstance.valuechanged = function (e) { t.virtualsizeinfo && (t._closemenu(), "physical" != t.scrollmode ? (t._renderrows(t.virtualsizeinfo), t.currentScrollValue = e.currentValue) : (void 0 != t.currentScrollValue && Math.abs(t.currentScrollValue - e.currentValue), t._renderrows(t.virtualsizeinfo), t.currentScrollValue = e.currentValue), t.pageable || t.groupable || !t.dataview.virtualmode || (t.loadondemandupdate && clearTimeout(t.loadondemandupdate), t.loadondemandupdate = setTimeout(function () { t.loadondemand = !0, t._renderrows(t.virtualsizeinfo) }, 100)), i && (t._lastScroll = new Date)) }, this.hScrollInstance.valuechanged = function (s) { if (t.virtualsizeinfo) { t._closemenu(); var r = function () { t._renderhorizontalscroll(), t._renderrows(t.virtualsizeinfo), t.editcell && !t.editrow && t._showcelleditor && t.editcell.editing && (t.hScrollInstance.isScrolling() || t._showcelleditor(t.editcell.row, t.getcolumn(t.editcell.column), t.editcell.element, t.editcell.init)) }; void 0 == t._browser ? t._isIE10() : t._browser; navigator && -1 != navigator.userAgent.indexOf("Safari") ? (t._hScrollTimer && clearTimeout(t._hScrollTimer), t._hScrollTimer = setTimeout(function () { r() }, 1)) : e.jqx.browser.msie ? (t._hScrollTimer && clearTimeout(t._hScrollTimer), t._hScrollTimer = setTimeout(function () { r() }, .01)) : r(), i && (t._lastScroll = new Date) } }, this._mousewheelfunc = this._mousewheelfunc || function (e) { if (!t.editcell && t.enablemousewheel) return t.wheel(e, t), !1 }, this.removeHandler(this.host, "mousewheel", this._mousewheelfunc), this.addHandler(this.host, "mousewheel", this._mousewheelfunc); var s = "mousedown.jqxgrid"; i && (s = e.jqx.mobile.getTouchEventName("touchend")), this.addHandler(this.host, s, function (i) { if (t.isTouchDevice()) { if (t._newScroll = new Date, t._newScroll - t._lastScroll < 500) return !1; if (e(i.target).ischildof(t.vScrollBar)) return !1; if (e(i.target).ischildof(t.hScrollBar)) return !1 } t._mousedown = new Date; var s = t._handlemousedown(i, t); return t.isNestedGrid && (t.resizablecolumn || t.columnsreorder || i.stopPropagation()), t._lastmousedown = new Date, s }), i || (this.addHandler(this.host, "dblclick.jqxgrid", function (i) { if (t.editable && t.begincelledit && "dblclick" == t.editmode) t._handledblclick(i, t); else if (e.jqx.browser.msie && e.jqx.browser.version < 9) t._handlemousedown(i, t); return t.mousecaptured = !1, t._lastmousedown = new Date, !0 }), this._mousemovefunc = function (e) { if (t._handlemousemove) return t._handlemousemove(e, t) }, this.addHandler(this.content, "mousemove", this._mousemovefunc), t._handlemousemoveselection && (this._mousemovedocumentfunc = function (e) { if (t._handlemousemoveselection) return t._handlemousemoveselection(e, t) }, this.addHandler(e(document), "mousemove.selection" + this.element.id, this._mousemovedocumentfunc)), this.addHandler(e(document), "mouseup.selection" + this.element.id, function (e) { t._handlemouseupselection && t._handlemouseupselection(e, t) })); try { if (("" != document.referrer || window.frameElement) && null != window.top && window.top != window.self) { var r = null; if (window.parent && document.referrer && (r = document.referrer), r && -1 != r.indexOf(document.location.host)) { var o = function (e) { t._handlemouseupselection && t._handlemouseupselection(e, t) }; window.top.document.addEventListener ? window.top.document.addEventListener("mouseup", o, !1) : window.top.document.attachEvent && window.top.document.attachEvent("onmouseup", o) } } } catch (e) { } this.focused = !1, i || (this.addHandler(this.content, "mouseenter", function (e) { t.focused = !0, t.wrapper && (t.wrapper.attr("tabindex", 1), t.content.attr("tabindex", 2)), t._overlayElement && (t.vScrollInstance.isScrolling() || t.hScrollInstance.isScrolling() ? t._overlayElement[0].style.visibility = "visible" : t._overlayElement[0].style.visibility = "hidden") }), this.addHandler(this.content, "mouseleave", function (e) { t._handlemousemove && t.enablehover && t._clearhoverstyle(), t._overlayElement && (t._overlayElement[0].style.visibility = "hidden"), t.focused = !1 }), (this.groupable || this.columnsreorder) && this.addHandler(e(document), "selectstart." + this.element.id, function (e) { if (!0 === t.__drag) return !1 }), this.addHandler(this.content, "selectstart." + this.element.id, function (i) { return !!t.enablebrowserselection || (!(!t.showfilterrow || !e(i.target).ischildof(t.filterrow)) || !!t.editcell && void (i.stopPropagation && i.stopPropagation())) }), this.addHandler(e(document), "keyup.edit" + this.element.id, function (e) { t._keydown = !1 }), this.addHandler(e(document), "keydown.edit" + this.element.id, function (i) { t._keydown = !t.editcell; r = i.charCode ? i.charCode : i.keyCode ? i.keyCode : 0; if (t.handlekeyboardnavigation && 1 == t.handlekeyboardnavigation(i)) return !1; if (t.editable && t.editcell && (13 != r && 27 != r || t._handleeditkeydown && (s = t._handleeditkeydown(i, t))), 27 == r && (t.mousecaptured = !1, "visible" == t.selectionarea.css("visibility") && t.selectionarea.css("visibility", "hidden")), e.jqx.browser.msie && e.jqx.browser.version < 8 && t.focused && !t.isNestedGrid) { if (13 == r && 0 == s) return s; var s = !0, r = i.charCode ? i.charCode : i.keyCode ? i.keyCode : 0; if (!t.editcell && t.editable && "programmatic" != t.editmode && t._handleeditkeydown && (s = t._handleeditkeydown(i, t)), s && t.keyboardnavigation && t._handlekeydown) return (s = t._handlekeydown(i, t)) || (i.preventDefault && i.preventDefault(), void 0 != i.stopPropagation && i.stopPropagation()), s } return !0 }), this.addHandler(this.host, "keydown.edit" + this.element.id, function (i) { var s = !0; return (!t.handlekeyboardnavigation || 1 != t.handlekeyboardnavigation(i)) && (t.editable && "programmatic" != t.editmode && t._handleeditkeydown && (s = t._handleeditkeydown(i, t), t.isNestedGrid && i.stopPropagation()), e.jqx.browser.msie && e.jqx.browser.version < 8 ? t.isNestedGrid && s && t.keyboardnavigation && t._handlekeydown && (s = t._handlekeydown(i, t), i.stopPropagation()) : s && t.keyboardnavigation && t._handlekeydown && (s = t._handlekeydown(i, t), t.isNestedGrid && i.stopPropagation()), s || (i.preventDefault && i.preventDefault(), void 0 != i.stopPropagation && i.stopPropagation()), s) })) }, _hittestrow: function (t, i) { if (null != this.vScrollInstance && null != this.hScrollInstance) { void 0 == t && (t = 0); var s = this.vScrollInstance, r = this.hScrollInstance, o = s.value; "visible" != this.vScrollBar.css("visibility") && (o = 0); var a = r.value; "visible" != this.hScrollBar.css("visibility") && (a = 0), "deferred" == this.scrollmode && null != this._newmax && o > this._newmax && (o = this._newmax); var n = parseInt(o) + i; parseInt(a); if (null != this.visiblerows && 0 != this.visiblerows.length) { var l = !1, h = this._findvisiblerow(n, this.visiblerows); if (h >= 0) { var d = this.visiblerows[h], c = this.rowdetails && d.rowdetails, u = !d.rowdetailshidden; if (c) { var p = this.visiblerows[h - 1]; if (p == d && (d = p, h--), u) { var m = e(this.hittestinfo[h].visualrow).position().top + parseInt(this.table.css("top")), g = e(this.hittestinfo[h].visualrow).height(); i >= m && i <= m + g || (h++, d = this.visiblerows[h], l = !0) } } } return { index: h, row: d, details: l } } } }, getcellatposition: function (t, i) { var s = this.that, r = this.showheader ? this.columnsheader.height() + 2 : 0, o = this._groupsheader() ? this.groupsheader.height() : 0; o += this.showtoolbar ? this.toolbarheight : 0; var a = this.host.coord(); this.hasTransform && (a = e.jqx.utilities.getOffset(this.host)); var n = t - a.left, l = i - r - a.top - o, h = this._hittestrow(n, l), d = h.row, c = h.index, u = this.table[0].rows[c]; if (this.dataview && 0 == this.dataview.records.length) { for (var p = this.table[0].rows, m = 0, g = 0; g < p.length; g++) { if (l >= m && l < m + this.rowsheight) { u = p[g]; break } m += this.rowsheight } d = { boundindex: g } } if (null == u) return !0; for (var f = this.hScrollInstance.value, v = 0, g = (this.groupable && this.groups.length, 0) ; g < u.cells.length; g++) { var x = parseInt(e(this.columnsrow[0].cells[g]).css("left")), t = x - f; if (s.columns.records[g].pinned && (t = x), t + e(this.columnsrow[0].cells[g]).width() >= n && n >= t) { v = g; break } } if (null != d) { var w = this._getcolumnat(v); return { row: this.getboundindex(d), column: w.datafield, value: this.getcellvalue(this.getboundindex(d), w.datafield) } } return null }, _handlemousedown: function (t, i) { if (null == t.target) return !0; if (i.disabled) return !0; if (e(t.target).ischildof(this.columnsheader)) return !0; var s; t.which ? s = 3 == t.which : t.button && (s = 2 == t.button); var r; if (t.which ? r = 2 == t.which : t.button && (r = 1 == t.button), r) return !0; if (this.showstatusbar) { if (e(t.target).ischildof(this.statusbar)) return !0; if (t.target == this.statusbar[0]) return !0 } if (this.showtoolbar) { if (e(t.target).ischildof(this.toolbar)) return !0; if (t.target == this.toolbar[0]) return !0 } if (this.pageable) { if (e(t.target).ischildof(this.pager)) return !0; if (t.target == this.pager[0]) return !0 } if (!this.columnsheader) return !0; if (!this.editcell && this.pageable && e(t.target).ischildof(this.pager)) return !0; var o = this.showheader ? this.columnsheader.height() + 2 : 0, a = this._groupsheader() ? this.groupsheader.height() : 0; a += this.showtoolbar ? this.toolbarheight : 0; var n = this.host.coord(); if (this.hasTransform) { n = e.jqx.utilities.getOffset(this.host); var l = this._getBodyOffset(); n.left -= l.left, n.top -= l.top } var h = parseInt(t.pageX), d = parseInt(t.pageY); if (this.isTouchDevice()) { var c = i.getTouches(t)[0]; h = parseInt(c.pageX), d = parseInt(c.pageY), 1 == i.touchmode && (h = parseInt(c._pageX), d = parseInt(c._pageY)) } var u = h - n.left, p = d - o - n.top - a; if (!(this.pageable && !this.autoheight && this.gotopage && p > this.pager.coord().top - n.top - a - o)) { var m = this._hittestrow(u, p); if (m && !m.details) { var g = m.row, f = m.index, v = t.target.className, x = this.table[0].rows[f]; if (null == x) return i.editable && i.begincelledit && i.editcell && i.endcelledit(i.editcell.row, i.editcell.column, !1, !0), !0; i.mousecaptured = !0, i.mousecaptureposition = { left: t.pageX, top: t.pageY - a, clickedrow: x }; var w = this.hScrollInstance, b = w.value; this.rtl && "hidden" != this.hScrollBar.css("visibility") && (b = w.max - w.value); var _ = -1, y = this.groupable ? this.groups.length : 0; this.rtl && ("hidden" != this.vScrollBar[0].style.visibility && (b -= this.scrollbarsize + 4), "hidden" == this.hScrollBar[0].style.visibility && (b = -parseInt(this.content.css("left")))); for (j = 0; j < x.cells.length; j++) { h = (q = parseInt(e(this.columnsrow[0].cells[j]).css("left"))) - b; if (i.columns.records[j].pinned && !i.rtl && (h = q), (null == (C = this._getcolumnat(j)) || !C.hidden) && (T = h + e(this.columnsrow[0].cells[j]).width()) >= u && u >= h) { _ = j, i.mousecaptureposition.clickedcell = j; break } } if (this.rtl && this._haspinned) for (var j = x.cells.length - 1; j >= 0 && i.columns.records[j].pinned; j--) { var q = e(this.columnsrow[0].cells[j]).coord().left - this.host.coord().left, h = q; if (null == (C = this._getcolumnat(j)) || !C.hidden) { var T = h + e(this.columnsrow[0].cells[j]).width(); if (T >= u && u >= h) { _ = j, i.mousecaptureposition.clickedcell = j; break } } } if (null != g && _ >= 0) { this._raiseEvent(1, { rowindex: this.getboundindex(g), visibleindex: g.visibleindex, group: g.group, rightclick: s, originalEvent: t }); var C = this._getcolumnat(_), S = this.getcellvalue(this.getboundindex(g), C.datafield); if (this.editable && this.editcell && C.datafield == this.editcell.column && this.getboundindex(g) == this.editcell.row && (this.mousecaptured = !1), this._raiseEvent(8, { rowindex: this.getboundindex(g), column: C ? C.getcolumnproperties() : null, datafield: C ? C.datafield : null, columnindex: _, value: S, rightclick: s, originalEvent: t }), this.isTouchDevice()) if ("checkbox" == C.columntype && this.editable && this._overlayElement) { if (!this.editcell) return this._overlayElement.css("visibility", "hidden"), this.editcell = this.getcell(f, C.datafield), !0 } else if ("button" == C.columntype && this._overlayElement) return C.buttonclick && C.buttonclick(x.cells[_].buttonrow, t), !0; var k = !1; if (null != this._lastmousedown && this._mousedown - this._lastmousedown < 300 && this._clickedrowindex == this.getboundindex(g) && (this._raiseEvent(22, { rowindex: this.getboundindex(g), visibleindex: g.visibleindex, group: g.group, rightclick: s, originalEvent: t }), this._clickedcolumn == C.datafield && this._raiseEvent(23, { rowindex: this.getboundindex(g), column: C ? C.getcolumnproperties() : null, datafield: C ? C.datafield : null, columnindex: _, value: S, rightclick: s, originalEvent: t }), k = !0, this._clickedrowindex = -1, this._clickedcolumn = null, t.isPropagationStopped && t.isPropagationStopped())) return !1; if (s) return !0; k || (this._clickedrowindex = this.getboundindex(g), this._clickedcolumn = C.datafield); var I = e.jqx.utilities.getBrowser(); if ("msie" == I.browser && parseInt(I.version) <= 7 && (0 == _ && this.rowdetails && (v = "jqx-grid-group-collapse"), y > 0 && _ <= y && (v = "jqx-grid-group-collapse")), -1 != v.indexOf("jqx-grid-group-expand") || -1 != v.indexOf("jqx-grid-group-collapse")) this.rtl ? y > 0 && _ > x.cells.length - y - 1 && this._togglegroupstate ? this._togglegroupstate(g.bounddata, !0) : _ == x.cells.length - 1 - y && this.rowdetails && this.showrowdetailscolumn && (this._togglerowdetails(g.bounddata, !0), this.gridcontent[0].scrollTop = 0, this.gridcontent[0].scrollLeft = 0) : y > 0 && _ < y && this._togglegroupstate ? this._togglegroupstate(g.bounddata, !0) : _ == y && this.rowdetails && this.showrowdetailscolumn && (this._togglerowdetails(g.bounddata, !0), this.gridcontent[0].scrollTop = 0, this.gridcontent[0].scrollLeft = 0); else if (-1 != g.boundindex) { var D = this.selectedrowindexes.slice(0), P = !1; if ("none" != i.selectionmode && "checkbox" != i.selectionmode && this._selectrowwithmouse) { "multiplecellsadvanced" != i.selectionmode && "multiplecellsextended" != i.selectionmode && "multiplerowsextended" != i.selectionmode && "multiplerowsadvanced" != i.selectionmode || t.ctrlKey || t.shiftKey || (i.selectedrowindexes = new Array, i.selectedcells = new Array); var B = !1, z = this.getboundindex(g); i._oldselectedrow !== z && "none" !== i.selectionmode || (B = !0), -1 == i.selectionmode.indexOf("cell") ? ("singlerow" != i.selectionmode || i.selectedrowindex != z && "singlerow" == i.selectionmode) && (this._applyrowselection(z, !0, !1, null, C.datafield), this._selectrowwithmouse(i, m, D, C.datafield, t.ctrlKey, t.shiftKey)) : null != C.datafield && (this._selectrowwithmouse(i, m, D, C.datafield, t.ctrlKey, t.shiftKey), t.shiftKey || this._applycellselection(z, C.datafield, !0, !1)), i._oldselectedcell && i._oldselectedcell.datafield == i.selectedcell.datafield && i._oldselectedcell.rowindex == i.selectedcell.rowindex && (P = !0), i._oldselectedcell = i.selectedcell, i._oldselectedrow = z } if (i.autosavestate && i.savestate && i.savestate(), i.editable && i.begincelledit && "programmatic" != i.editmode) { if (t.isPropagationStopped && t.isPropagationStopped()) return !1; if ("selectedrow" == i.editmode) { if (B && !i.editcell) { if ("checkbox" !== C.columntype) i.beginrowedit(this.getboundindex(g)) } else if (i.editcell && !B && "none" != i.selectionmode) i.endrowedit(i.editcell.row) } else { var H = "click" == i.editmode || P && "selectedcell" == i.editmode; if (-1 == i.selectionmode.indexOf("cell") && "dblclick" != i.editmode && (H = !0), H && void 0 != g.boundindex && C.editable) { i.begincelledit(this.getboundindex(g), C.datafield, C.defaulteditorvalue); -1 != i.selectionmode.indexOf("cell") && i._applycellselection(z, C.datafield, !1, !1) } -1 != i.selectionmode.indexOf("cell") && "selectedcell" == i.editmode && !P && i.editcell && i.endcelledit(i.editcell.row, i.editcell.column, !1, !0) } return !0 } } } return !0 } } }, _columnPropertyChanged: function (e, t, i, s) { }, _rowPropertyChanged: function (e, t, i, s) { }, _serializeObject: function (t) { if (null == t) return ""; var i = ""; return e.each(t, function (e) { var t = this; e > 0 && (i += ", "), i += "["; var s = 0; for (obj in t) s > 0 && (i += ", "), i += "{" + obj + ":" + t[obj] + "}", s++; i += "]" }), i }, propertyChangedHandler: function (t, i, s, r) { if (void 0 != this.isInitialized && 0 != this.isInitialized) switch (i = i.toLowerCase()) { case "enablebrowserselection": t.showfilterrow || (t.showstatusbar || t.showtoolbar || t.host.addClass("jqx-disableselect"), t.content.addClass("jqx-disableselect")), t.enablebrowserselection && (t.content.removeClass("jqx-disableselect"), t.host.removeClass("jqx-disableselect")); break; case "columnsheight": (25 != t.columnsheight || t.columngroups) && t._measureElement("column"), t._render(!0, !0, !0, !1, !1); break; case "rowsheight": r != s && (25 != t.rowsheight && t._measureElement("cell"), t.virtualsizeinfo = null, t.rendergridcontent(!0, !1), t.refresh()); break; case "scrollMode": t.vScrollInstance.thumbStep = t.rowsheight; break; case "showdefaultloadelement": t._builddataloadelement(); break; case "showfiltermenuitems": case "showsortmenuitems": case "showgroupmenuitems": case "filtermode": t._initmenu(); break; case "touchmode": s != r && (t._removeHandlers(), t.touchDevice = null, t.vScrollBar.jqxScrollBar({ touchMode: r }), t.hScrollBar.jqxScrollBar({ touchMode: r }), t._updateTouchScrolling(), t._arrange(), t._updatecolumnwidths(), t._updatecellwidths(), t._addHandlers()); break; case "autoshowcolumnsmenubutton": s != r && t._rendercolumnheaders(); break; case "rendergridrows": s != r && t.updatebounddata(); break; case "editmode": s != r && (t._removeHandlers(), t._addHandlers()); break; case "source": t.updatebounddata(), t.virtualmode && !t._loading && (t.loadondemand = !0, t._renderrows(t.virtualsizeinfo)); break; case "horizontalscrollbarstep": case "verticalscrollbarstep": case "horizontalscrollbarlargestep": case "verticalscrollbarlargestep": this.vScrollBar.jqxScrollBar({ step: this.verticalscrollbarstep, largestep: this.verticalscrollbarlargestep }), this.hScrollBar.jqxScrollBar({ step: this.horizontalscrollbarstep, largestep: this.horizontalscrollbarlargestep }); break; case "closeablegroups": t._initgroupsheader && t._initgroupsheader(); break; case "showgroupsheader": s != r && (t._arrange(), t._initgroupsheader && t._initgroupsheader(), t._renderrows(t.virtualsizeinfo)); break; case "theme": r != s && (t.pager && (t.pager.removeClass(), t.pager.addClass(t.toTP("jqx-grid-pager")), t.pager.addClass(t.toTP("jqx-widget-header")), t.pageable && t._updatepagertheme && t._updatepagertheme()), t.groupsheader && (t.groupsheader.removeClass(), t.groupsheader.addClass(t.toTP("jqx-grid-groups-header")), t.groupsheader.addClass(t.toTP("jqx-widget-header"))), t.toolbar.removeClass(), t.toolbar.addClass(t.toTP("jqx-grid-toolbar")), t.toolbar.addClass(t.toTP("jqx-widget-header")), t.statusbar.removeClass(), t.statusbar.addClass(t.toTP("jqx-grid-statusbar")), t.statusbar.addClass(t.toTP("jqx-widget-content")), t.vScrollBar.jqxScrollBar({ theme: t.theme }), t.hScrollBar.jqxScrollBar({ theme: t.theme }), t.host.removeClass(), t.host.addClass(t.toTP("jqx-grid")), t.host.addClass(t.toTP("jqx-reset")), t.host.addClass(t.toTP("jqx-rc-all")), t.host.addClass(t.toTP("jqx-widget")), t.host.addClass(t.toTP("jqx-widget-content")), t.bottomRight.removeClass(), t.bottomRight.addClass(t.toTP("jqx-grid-bottomright")), t.bottomRight.addClass(t.toTP("jqx-scrollbar-state-normal")), t.toolbar.addClass(t.toTP("jqx-grid-toolbar")), t.toolbar.addClass(t.toTP("jqx-widget-header")), t.statusbar.addClass(t.toTP("jqx-grid-statusbar")), t.statusbar.addClass(t.toTP("jqx-widget-header")), t.render()); break; case "showtoolbar": case "toolbarheight": s != r && (t._arrange(), t.refresh()); break; case "showstatusbar": s != r && (t.statusbar && (r ? t.statusbar.show() : t.statusbar.hide()), t._arrange(), t.refresh()); break; case "statusbarheight": s != r && (t._arrange(), t.refresh()); break; case "filterable": case "showfilterrow": s != r && t.render(); break; case "autoshowfiltericon": case "showfiltercolumnbackground": case "showpinnedcolumnbackground": case "showsortcolumnbackground": s != r && t.rendergridcontent(); break; case "showrowdetailscolumn": s != r && t.render(); break; case "scrollbarsize": s != r && t._arrange(); break; case "width": case "height": s != r && (t._updatesize(!0, !0), t._resizeWindow(), t.virtualmode && !t._loading && t.vScrollInstance.setPosition(0)); break; case "altrows": case "altstart": case "altstep": s != r && t._renderrows(t.virtualsizeinfo); break; case "groupsheaderheight": s != r && (t._arrange(), t._initgroupsheader && t._initgroupsheader()); break; case "pagerheight": s != r && t._initpager(); break; case "selectedrowindex": t.selectrow(r); break; case "selectionmode": s != r && ("none" == r && (t.selectedrowindexes = new Array, t.selectedcells = new Array, t.selectedrowindex = -1), t._renderrows(t.virtualsizeinfo), "checkbox" == r && t._render(!1, !1, !0, !1, !1)); break; case "showheader": r ? t.columnsheader.css("display", "block") : t.columnsheader.css("display", "none"); break; case "virtualmode": s != r && (t.dataview.virtualmode = t.virtualmode, t.dataview.refresh(!1), t._render(!1, !1, !1)); break; case "columnsmenu": s != r && t.render(); break; case "columngroups": t._render(!0, !0, !0, !1, !1); break; case "columns": if (t._serializeObject(t._cachedcolumns) !== t._serializeObject(r)) { var o = !1; t.filterable && s && s.records && e.each(s.records, function () { this.filter && (o = !0), t.dataview.removefilter(this.displayfield, this.filter) }), t._columns = null, t._filterrowcache = [], t.render(), o && t.applyfilters(), t._cachedcolumns = t.columns, t.removesort && t.removesort() } else t._initializeColumns(); break; case "autoheight": s != r && t._render(!1, !1, !0); break; case "pagermode": case "pagerbuttonscount": s != r && t._initpager && (t.pagershowrowscombo && (t.pagershowrowscombo.jqxDropDownList("destroy"), t.pagershowrowscombo = null), t.pagerrightbutton && (t.removeHandler(t.pagerrightbutton, "mousedown"), t.removeHandler(t.pagerrightbutton, "mouseup"), t.removeHandler(t.pagerrightbutton, "click"), t.pagerrightbutton.jqxButton("destroy"), t.pagerrightbutton = null), t.pagerleftbutton && (t.removeHandler(t.pagerleftbutton, "mousedown"), t.removeHandler(t.pagerleftbutton, "mouseup"), t.removeHandler(t.pagerleftbutton, "click"), t.pagerleftbutton.jqxButton("destroy"), t.removeHandler(e(document), "mouseup.pagerbuttons" + t.element.id), t.pagerleftbutton = null), t.pagerdiv.remove(), t._initpager()); break; case "pagesizeoptions": case "pageable": case "pagesize": if (s != r) { if (t._loading) throw new Error("jqxGrid: " + t.loadingerrormessage); if (!t.host.jqxDropDownList || !t.host.jqxListBox) return void t._testmodules(); if (t._initpager) { if ("pageable" != i && "pagermode" != i && "string" == typeof r) { a = "The expected value type is: Int."; if ("pagesize" != i) var a = "The expected value type is: Array of Int values."; throw new Error("Invalid Value for: " + i + ". " + a) } t.dataview.pageable = t.pageable, t.dataview.pagenum = 0, t.dataview.pagesize = t._getpagesize(), t.virtualmode && t.updatebounddata(), t.dataview.refresh(!0), t._initpager(), "pagesizeoptions" == i && null != r && r.length > 0 && (t.pagesize = parseInt(r[0]), t.dataview.pagesize = parseInt(r[0]), t.prerenderrequired = !0, t._requiresupdate = !0, t.dataview.pagenum = -1, t.gotopage(0)) } t._render(!1, !1, !1) } break; case "groups": t._serializeObject(s) !== t._serializeObject(r) && (t.dataview.groups = r, t._refreshdataview(), t._render(!0, !0, !0, !1)); break; case "groupable": s != r && (t.dataview.groupable = t.groupable, t.dataview.pagenum = 0, t.dataview.refresh(!1), t._render(!1, !1, !0)); break; case "renderstatusbar": null != r && t.renderstatusbar(t.statusbar); break; case "rendertoolbar": null != r && t.rendertoolbar(t.toolbar); break; case "disabled": r ? t.host.addClass(t.toThemeProperty("jqx-fill-state-disabled")) : t.host.removeClass(t.toThemeProperty("jqx-fill-state-disabled")), e.jqx.aria(t, "aria-disabled", t.disabled), t.pageable && (t.pagerrightbutton && (t.pagerrightbutton.jqxButton({ disabled: r }), t.pagerleftbutton.jqxButton({ disabled: r }), t.pagershowrowscombo.jqxDropDownList({ disabled: r }), t.pagergotoinput.attr("disabled", r)), t.pagerfirstbutton && (t.pagerfirstbutton.jqxButton({ disabled: r }), t.pagerlastbutton.jqxButton({ disabled: r }))), t.vScrollBar.jqxScrollBar({ disabled: r }), t.hScrollBar.jqxScrollBar({ disabled: r }), t.filterable && t.showfilterrow && t._updatefilterrowui(!0) } } }), e.jqx.collection = function (e) { return this.records = new Array, this.owner = e, this.updating = !1, this.beginupdate = function () { this.updating = !0 }, this.resumeupdate = function () { this.updating = !1 }, this._raiseEvent = function (e) { }, this.clear = function () { this.records = new Array }, this.replace = function (e, t) { this.records[e] = t, this.updating || this._raiseEvent({ type: "replace", element: t }) }, this.isempty = function (e) { return void 0 == this.records[e] }, this.initialize = function (e) { e < 1 && (e = 1), this.records[e - 1] = -1 }, this.length = function () { return this.records.length }, this.indexOf = function (e) { return this.records.indexOf(e) }, this.add = function (e) { return null != e && (this.records[this.records.length] = e, this.updating || this._raiseEvent({ type: "add", element: e }), !0) }, this.insertAt = function (e, t) { return null != e && void 0 != e && (null != t && (e >= 0 && (e < this.records.length ? (this.records.splice(e, 0, t), this.updating || this._raiseEvent({ type: "insert", index: e, element: t }), !0) : this.add(t)))) }, this.remove = function (e) { if (null == e || void 0 == e) return !1; var t = this.records.indexOf(e); return -1 != t && (this.records.splice(t, 1), this.updating || this._raiseEvent({ type: "remove", element: e }), !0) }, this.removeAt = function (e) { if (null == e || void 0 == e) return !1; if (e < 0) return !1; if (e < this.records.length) { var t = this.records[e]; return this.records.splice(e, 1), this.updating || this._raiseEvent({ type: "removeAt", index: e, element: t }), !0 } return !1 }, this }, e.jqx.dataview = function () { return this.self = this, this.grid = null, this.uniqueId = "id", this.records = [], this.rows = [], this.columns = [], this.groups = [], this.filters = new Array, this.updated = null, this.update = null, this.suspend = !1, this.pagesize = 0, this.pagenum = 0, this.totalrows = 0, this.totalrecords = 0, this.groupable = !0, this.loadedrecords = [], this.loadedrootgroups = [], this.loadedgroups = [], this.loadedgroupsByKey = [], this.virtualmode = !0, this._cachegrouppages = new Array, this.source = null, this.changedrecords = new Array, this.rowschangecallback = null, this.that = this, this.destroy = function () { delete this.self, delete this.grid, delete this.uniqueId, delete this.records, delete this.rows, delete this.columns, delete this.groups, delete this.filters, delete this.updated, delete this.update, delete this.suspend, delete this.pagesize, delete this.pagenum, delete this.totalrows, delete this.totalrecords, delete this.groupable, delete this.loadedrecords, delete this.loadedrootgroups, delete this.loadedgroups, delete this.loadedgroupsByKey, delete this.virtualmode, delete this._cachegrouppages, delete this.source, delete this.changedrecords, delete this.rowschangecallback, delete this.that }, this.suspendupdate = function () { this.suspend = !0 }, this.isupdating = function () { return this.suspend }, this.resumeupdate = function (e) { this.suspend = !1, void 0 == e && (e = !0), this.refresh(e) }, this.getrecords = function () { return this.records }, this.clearrecords = function () { this.recordids = new Array }, this.databind = function (t, i) { var s = null; !!t._source ? (s = t, t = t._source) : s = new e.jqx.dataAdapter(t, { autoBind: !1 }); var r = function (i) { if (i.totalrecords = s.totalrecords, i.virtualmode) { var r = { startindex: i.pagenum * i.pagesize, endindex: i.pagenum * i.pagesize + i.pagesize }; if (void 0 != t.recordstartindex && (r.startindex = parseInt(t.recordstartindex)), void 0 != t.recordendindex ? r.endindex = parseInt(t.recordendindex) : i.grid.pageable || (r.endindex = r.startindex + 100, i.grid.autoheight && (r.endindex = r.startindex + i.totalrecords)), t.recordendindex || (i.grid.pageable ? r = { startindex: i.pagenum * i.pagesize, endindex: i.pagenum * i.pagesize + i.pagesize } : (r.endindex = r.startindex + 100, i.grid.autoheight && (r.endindex = r.startindex + i.totalrecords))), r.data = s.records, i.grid.rendergridrows && i.totalrecords > 0) { var o = 0; if (t.records = i.grid.rendergridrows(r), t.records.length && (o = t.records.length), t.records && !t.records[r.startindex]) { var a = new Array, n = r.startindex; e.each(t.records, function () { a[n] = this, n++, o++ }), t.records = a } if (0 == o && t.records && e.each(t.records, function () { o++ }), o > 0 && o < r.endindex - r.startindex && !i.grid.groupable) for (var l = t.records[0], h = 0; h < r.endindex - r.startindex - o; h++) { var d = {}; for (obj in l) d[obj] = ""; t.records.push && t.records.push(d) } } t.records && 0 != i.totalrecords || (t.records = new Array), i.originaldata = t.records, i.records = t.records, i.cachedrecords = t.records } else i.originaldata = s.originaldata, i.records = s.records, i.recordids = s.recordids, i.cachedrecords = s.cachedrecords }; !function (e) { s.recordids = [], s.records = new Array, s.cachedrecords = new Array, s.originaldata = new Array, s._options.virtualmode = e.virtualmode, s._options.totalrecords = e.totalrecords, s._options.originaldata = e.originaldata, s._options.recordids = e.recordids, s._options.cachedrecords = new Array, s._options.pagenum = e.pagenum, s._options.pageable = e.pageable, void 0 != t.type && (s._options.type = t.type), void 0 != t.formatdata && (s._options.formatData = t.formatdata), void 0 != t.contenttype && (s._options.contentType = t.contenttype), void 0 != t.async && (s._options.async = t.async), void 0 != t.updaterow && (s._options.updaterow = t.updaterow), void 0 != t.addrow && (s._options.addrow = t.addrow), void 0 != t.deleterow && (s._options.deleterow = t.deleterow), 0 == e.pagesize && (e.pagesize = 10), s._options.pagesize = e.pagesize }(this), this.source = t, void 0 !== i && (uniqueId = i); var o = this.that; switch (t.datatype) { case "local": case "array": default: null == t.localdata && (t.localdata = []), null != t.localdata && (s.unbindBindingUpdate(o.grid.element.id), (!o.grid.autobind && o.grid.isInitialized || o.grid.autobind) && s.dataBind(), (v = function (i) { if (void 0 != i && "" != i) { if (s._changedrecords[0]) { var a = new Array; e.each(s._changedrecords, function (e) { var t = this.index, r = this.record; switch (o.grid._updateFromAdapter = !0, i) { case "update": n = o.grid.getrowid(t); return e == s._changedrecords.length - 1 ? o.grid.updaterow(n, r) : o.grid.updaterow(n, r, !1), void (o.grid._updateFromAdapter = !1); case "add": return o.grid.addrow(null, r), void (o.grid._updateFromAdapter = !1); case "remove": var n = o.grid.getrowid(t); return void a.push(n) } }), a.length > 0 && (o.grid.deleterow(a, !1), o.grid._updateFromAdapter = !1) } if ("update" == i) return } var n = o.totalrecords; r(o), "updateData" == i ? (o.refresh(), o.grid._updateGridData()) : (t.recordstartindex && this.virtualmode ? o.updateview(t.recordstartindex, t.recordstartindex + o.pagesize) : o.refresh(), o.update(n != o.totalrecords)) })(), s.bindBindingUpdate(o.grid.element.id, v)); break; case "json": case "jsonp": case "xml": case "xhtml": case "script": case "text": case "csv": case "tab": if (null != t.localdata) return s.unbindBindingUpdate(o.grid.element.id), (!o.grid.autobind && o.grid.isInitialized || o.grid.autobind) && s.dataBind(), (v = function (e) { var i = o.totalrecords; r(o), "updateData" == e ? (o.refresh(), o.grid._updateGridData()) : (t.recordstartindex ? o.updateview(t.recordstartindex, t.recordstartindex + o.pagesize) : o.refresh(), o.update(i != o.totalrecords)) })(), void s.bindBindingUpdate(o.grid.element.id, v); for (var a = 0, n = {}, l = 0; l < this.filters.length; l++) { var h = this.filters[l].datafield, d = this.filters[l].filter, c = d.getfilters(); n[h + "operator"] = d.operator; for (var u = 0; u < c.length; u++) { c[u].datafield = h; var p = c[u].value; if ("datefilter" == c[u].type) if (c[u].value && c[u].value.toLocaleString) { var m = this.grid.getcolumn(c[u].datafield); if (m.cellsformat) { var g = this.grid.source.formatDate(c[u].value, m.cellsformat, this.grid.gridlocalization); n["filtervalue" + a] = g || c[u].value.toLocaleString() } else n["filtervalue" + a] = p.toString() } else n["filtervalue" + a] = p.toString(); else n["filtervalue" + a] = p.toString(); n["filtercondition" + a] = c[u].condition, n["filteroperator" + a] = c[u].operator, n["filterdatafield" + a] = h, a++ } } n.filterscount = a, n.groupscount = o.groups.length; for (l = 0; l < o.groups.length; l++) n["group" + l] = o.groups[l]; void 0 == t.recordstartindex && (t.recordstartindex = 0), void 0 != t.recordendindex && 0 != t.recordendindex || (o.grid.height && -1 == o.grid.height.toString().indexOf("%") ? (t.recordendindex = parseInt(o.grid.height) / o.grid.rowsheight, t.recordendindex += 2) : t.recordendindex = e(window).height() / o.grid.rowsheight, this.pageable && (t.recordendindex = this.pagesize)), e.extend(n, { sortdatafield: o.sortfield, sortorder: o.sortfielddirection, pagenum: o.pagenum, pagesize: o.grid.pagesize, recordstartindex: t.recordstartindex, recordendindex: t.recordendindex }); var f = s._options.data; s._options.data ? e.extend(s._options.data, n) : (t.data && e.extend(n, t.data), s._options.data = n); var v = function () { var i = function () { var e = o.totalrecords; r(o), t.recordstartindex ? o.updateview(t.recordstartindex, t.recordstartindex + o.pagesize) : o.refresh(), o.update(e != o.totalrecords) }; if (e.jqx.browser.msie && e.jqx.browser.version < 9) try { i() } catch (e) { } else i() }; s.unbindDownloadComplete(o.grid.element.id), s.bindDownloadComplete(o.grid.element.id, v), !o.grid.autobind && o.grid.isInitialized || o.grid.autobind ? s.dataBind() : o.grid.isInitialized || o.grid.autobind || v(), s._options.data = f } }, this.getid = function (t, i, s) { if (e(t, i).length > 0) return e(t, i).text(); if (t && t.toString().length > 0) { var r = e(i).attr(t); if (null != r && r.toString().length > 0) return r } return s }, this.getvaluebytype = function (t, i) { var s = t; if ("date" == i.type) { var r = new Date(t); null == (t = ("NaN" == r.toString() || "Invalid Date" == r.toString()) && e.jqx.dataFormat ? e.jqx.dataFormat.tryparsedate(t) : r) && (t = s) } else if ("float" == i.type) { t = parseFloat(t); isNaN(t) && (t = s) } else if ("int" == i.type) { var t = parseInt(t); isNaN(t) && (t = s) } else "bool" == i.type && (null != t && ("false" == t.toLowerCase() ? t = !1 : "true" == t.toLowerCase() && (t = !0)), t = 1 == t || 0 != t && ""); return t }, this.setpaging = function (e) { void 0 != e.pageSize && (this.pagesize = e.pageSize), void 0 != e.pageNum && (this.pagenum = Math.min(e.pageNum, Math.ceil(this.totalrows / this.pagesize))), this.refresh() }, this.getpagingdetails = function () { return { pageSize: this.pagesize, pageNum: this.pagenum, totalrows: this.totalrows } }, this._clearcaches = function () { this.sortcache = {}, this.sortdata = null, this.changedrecords = new Array, this.records = new Array, this.rows = new Array, this.cacheddata = new Array, this.originaldata = new Array, this.bounditems = new Array, this.loadedrecords = new Array, this.loadedrootgroups = new Array, this.loadedgroups = new Array, this.loadedgroupsByKey = new Array, this._cachegrouppages = new Array, this.recordsbyid = new Array, this.cachedrecords = new Array, this.recordids = new Array }, this.addfilter = function (e, t) { for (var i = -1, s = 0; s < this.filters.length; s++) if (this.filters[s].datafield == e) { i = s; break } -1 == i ? this.filters[this.filters.length] = { filter: t, datafield: e } : this.filters[i] = { filter: t, datafield: e } }, this.removefilter = function (e) { for (var t = 0; t < this.filters.length; t++) if (this.filters[t].datafield == e) { this.filters.splice(t, 1); break } }, this.getItemFromIndex = function (e) { return this.records[e] }, this.updaterow = function (e, t, i) { if (!(this.filters && this.filters.length > 0 && !this.virtualmode) && void 0 != t && void 0 != e) { t.uid = e, t[this.source.id] || (t[this.source.id] = t.uid); r = this.recordsbyid["id" + e]; return -1 != (o = this.records.indexOf(r)) && (this.records[o] = t, this.cachedrecords && (this.cachedrecords[o] = t), 1 != i && void 0 != i || this.refresh(), this.changedrecords[t.uid] = { Type: "Update", OldData: r, Data: t }, !0) } if (this.filters && this.filters.length > 0) { for (var s = this.cachedrecords, r = null, o = -1, a = 0; a < s.length; a++) if (s[a].uid == e) { r = s[a], o = a; break } if (r) { var n = this.that; for (var l in t) n.cachedrecords[o][l] = t[l]; return 1 != i && void 0 != i || this.refresh(), !0 } } return !1 }, this.addrow = function (e, t, i, s) { if (void 0 != t) { if (e) t.uid = e; else { t.uid = this.getid(this.source.id, t, this.totalrecords); for (var r = this.recordsbyid["id" + t.uid]; null != r;) { var o = Math.floor(1e4 * Math.random()).toString(); t.uid = o, r = this.recordsbyid["id" + o] } } return t[this.source.id] || void 0 != this.source.id && (t[this.source.id] = t.uid), "last" == i ? this.records.push(t) : "number" == typeof i && isFinite(i) ? this.records.splice(i, 0, t) : this.records.splice(0, 0, t), this.filters && this.filters.length > 0 && ("last" == i ? this.cachedrecords.push(t) : "number" == typeof i && isFinite(i) ? this.cachedrecords.splice(i, 0, t) : this.cachedrecords.splice(0, 0, t)), this.totalrecords++, this.virtualmode && (this.source.totalrecords = this.totalrecords), 1 != s && void 0 != s || this.refresh(), this.changedrecords[t.uid] = { Type: "New", Data: t }, !0 } return !1 }, this.deleterow = function (e, t) { if (void 0 != e) { var i = this.filters && this.filters.length > 0; if (this.recordsbyid["id" + e] && !i) { var s = this.recordsbyid["id" + e], r = this.records.indexOf(s); return this.changedrecords[e] = { Type: "Delete", Data: this.records[r] }, this.records.splice(r, 1), this.totalrecords--, this.virtualmode && (this.source.totalrecords = this.totalrecords), 1 != t && void 0 != t || this.refresh(), !0 } if (this.filters && this.filters.length > 0) { for (var o = this.cachedrecords, s = null, r = -1, a = 0; a < o.length; a++) if (o[a].uid == e) { s = o[a], r = a; break } if (s) return this.cachedrecords.splice(r, 1), 1 != t && void 0 != t || (this.totalrecords = 0, this.records = this.cachedrecords, this.refresh()), !0 } return !1 } return !1 }, this.reload = function (t, i, s, r, o, a, n) { var l = this.that, h = new Array, d = t, c = i, u = s, p = r, m = c.length, g = 0; if (this.columns = [], this.bounditems = new Array, this.loadedrecords = new Array, this.loadedrootgroups = new Array, this.loadedgroups = new Array, this.loadedgroupsByKey = new Array, this._cachegrouppages = new Array, this.recordsbyid = {}, 0 == this.totalrecords) { Object.size = function (e) { var t, i = 0; for (t in e) e.hasOwnProperty(t) && i++; return i }; var f = Object.size(d); this.totalrecords = f, e.each(this.records, function (t) { var i = this, s = 0; return e.each(i, function (e, t) { l.columns[s++] = e }), !1 }) } if (this.virtualmode) { if (this.pageable) return void this.updateview(); a = 0; if (!this.groupable) return void this.updateview(); n = this.totalrecords } else var a = 0, n = this.totalrecords; if (this.groupable && this.groups.length > 0 && this.loadgrouprecords) { var v = a; v = this.loadgrouprecords(0, a, n, u, 0, p, c, m, h) } else g = this.loadflatrecords(a, n, u, 0, p, c, m, h); return m > 0 && c.splice(0, m - 0), this.groups.length > 0 && this.groupable ? this.totalrows = v : this.totalrows = g, h }, this.loadflatrecords = function (t, i, s, r, o, a, n, l) { var h = this.that, d = t, c = t; i = Math.min(i, this.totalrecords); for (var u = null != this.sortdata, p = (this.source.id && ("local" == this.source.datatype || "array" == this.source.datatype || this.source.datatype), u ? this.sortdata : this.records), m = t; m < i; m++) { var g = {}; u ? (g = e.extend({}, p[m].value), id = g[h.uniqueId], g.boundindex = p[m].index, void 0 == g.uid && (g.uid = h.getid(h.source.id, g, g.boundindex)), h.recordsbyid["id" + g.uid] = p[m].value, h.loadedrecords[d] = g, g.uniqueid = h.generatekey(), h.bounditems[g.boundindex] = g) : (g = e.extend({}, p[m]), id = g[h.uniqueId], g.boundindex = d, h.loadedrecords[d] = g, void 0 == g.uid && (g.uid = h.getid(h.source.id, g, d)), h.recordsbyid["id" + g.uid] = p[m], g.uniqueid = h.generatekey(), h.bounditems[this.bounditems.length] = g), (r >= n || id != a[r][h.uniqueId] || o && o[id]) && (l[l.length] = r), a[r] = g, r++, g.visibleindex = c, c++, d++ } if (h.grid.summaryrows) { var f = d; e.each(h.grid.summaryrows, function () { var t = e.extend({}, this); t.boundindex = i++, h.loadedrecords[f] = t, t.uniqueid = h.generatekey(), h.bounditems[h.bounditems.length] = t, a[r] = t, r++, t.visibleindex = c, c++, f++ }) } return c }, this.updateview = function (e, t) { var i = this.that, s = this.pagesize * this.pagenum, r = 0, o = new Array, a = this.filters, n = this.updated, l = o.length; if (this.pageable) { if (this.virtualmode) if (this.groupable && 0 != this.groups.length) { if (this.groupable && this.groups.length > 0 && this.loadgrouprecords) { if (void 0 != this._cachegrouppages[this.pagenum + "_" + this.pagesize]) return this.rows = this._cachegrouppages[this.pagenum + "_" + this.pagesize], void (this.totalrows = this.rows.length); var h = this.pagesize * (1 + this.pagenum); return h > this.totalrecords && (h = this.totalrecords), this.loadgrouprecords(0, this.pagesize * this.pagenum, h, a, r, n, o, l, []), this._cachegrouppages[this.pagenum + "_" + this.pagesize] = this.rows, void (this.totalrows = this.rows.length) } } else this.loadflatrecords(this.pagesize * this.pagenum, this.pagesize * (1 + this.pagenum), a, r, n, o, l, []), this.totalrows = o.length } else if (this.virtualmode && (!this.groupable || 0 == this.groups.length)) { var d = this.pagesize; 0 == d && (d = Math.min(100, this.totalrecords)); this.pagenum; if (0 == this.loadedrecords.length && 0, null != e && null != t ? this.loadflatrecords(e, t, a, r, n, o, l, []) : this.loadflatrecords(this.pagesize * this.pagenum, this.pagesize * (1 + this.pagenum), a, r, n, o, l, []), this.totalrows = this.loadedrecords.length, this.rows = o, o.length >= d) return } if (this.groupable && this.pageable && this.groups.length > 0 && this._updategroupsinpage) o = this._updategroupsinpage(i, a, s, r, l, this.pagesize * this.pagenum, this.pagesize * (1 + this.pagenum)); else for (u = this.pagesize * this.pagenum; u < this.pagesize * (1 + this.pagenum) ; u++) null != (p = u < this.loadedrecords.length ? this.loadedrecords[u] : null) && ((!this.pagesize || s >= this.pagesize * this.pagenum && s <= this.pagesize * (this.pagenum + 1)) && (o[r] = p, r++), s++); if ((0 == o.length || o.length < this.pagesize) && !this.pageable && this.virtualmode) { r = o.length; for (var c = o.length, u = this.pagesize * this.pagenum; u < this.pagesize * (1 + this.pagenum) - c; u++) { var p = {}; p.boundindex = u + c, p.visibleindex = u + c, p.uniqueid = i.generatekey(), p.empty = !0, i.bounditems[u + c] = p, o[r] = p, r++ } } this.rows = o }, this.generatekey = function () { var e = function () { return 16 * (1 + Math.random()) | 0 }; return "" + e() + e() + "-" + e() + "-" + e() + "-" + e() + "-" + e() + e() + e() }, this.reloaddata = function () { this.reload(this.records, this.rows, this.filter, this.updated, !0) }, this.refresh = function (t) { if (!this.suspend) { void 0 == t && (t = !0); var i = this.rows.length, s = this.totalrows; if (this.filters.length > 0 && !this.virtualmode) { var r = "", o = this.cachedrecords.length, a = new Array; this.totalrecords = 0; m = this.cachedrecords; this._dataIndexToBoundIndex = new Array; var n = this.filters.length; if (null != this.source && void 0 != this.source.filter && void 0 != this.source.localdata) void 0 == (a = this.source.filter(this.filters, m, o)) && (a = new Array), this.records = a; else if (null == this.source.filter || void 0 == this.source.filter) { for (var l = 0; l < o; l++) { for (var h = m[l], d = void 0, c = 0; c < n; c++) { var r = this.filters[c].filter, u = h[this.filters[c].datafield], p = r.evaluate(u); d = void 0 == d ? p : "or" == r.operator ? d || p : d && p } d ? (a[a.length] = e.extend({ dataindex: l }, h), this._dataIndexToBoundIndex[l] = { boundindex: a.length - 1 }) : this._dataIndexToBoundIndex[l] = null } this.records = a } if (this.sortdata) { g = this.sortfield; if (this.sortcache[g]) { this.sortdata = null; f = this.sortcache[g].direction; return this.sortcache[g] = null, void this.sortby(this.sortfield, f) } } } else if (0 == this.filters.length && !this.virtualmode && this.cachedrecords) { this.totalrecords = 0; var m = this.cachedrecords; if (this.records = m, this.sortdata) { var g = this.sortfield; if (this.sortcache[g]) { this.sortdata = null; var f = this.sortcache[g].direction; return this.sortcache[g] = null, void this.sortby(this.sortfield, f) } } } var v = this.reload(this.records, this.rows, this.filter, this.updated, t); this.updated = null, null != this.rowschangecallback && (s != totalrows && this.rowschangecallback({ type: "PagingChanged", data: getpagingdetails() }), i != rows.length && this.rowschangecallback({ type: "RowsCountChanged", data: { previous: i, current: rows.length } }), (v.length > 0 || i != rows.length) && this.rowschangecallback({ type: "RowsChanged", data: { previous: i, current: rows.length, diff: v } })) } }, this } }(jQuery), function (e) { e.extend(e.jqx._jqxGrid.prototype, { selectallrows: function () { this._trigger = !1; var e = this.virtualmode ? this.dataview.totalrecords : this.dataview.loadedrecords.length; this.selectedrowindexes = new Array; for (var t = this.dataview.loadedrecords, i = 0; i < e; i++) { var s = t[i]; if (s) { var r = this.getboundindex(s); this.selectedrowindexes[i] = r } else this.selectedrowindexes[i] = i } "checkbox" != this.selectionmode || this._checkboxcolumnupdating || this._checkboxcolumn && this._checkboxcolumn.checkboxelement.jqxCheckBox({ checked: !0 }), this._renderrows(this.virtualsizeinfo), this._trigger = !0, "checkbox" == this.selectionmode && this._raiseEvent(2, { rowindex: this.selectedrowindexes }) }, unselectallrows: function () { this._trigger = !1; var e = this.virtualmode ? this.dataview.totalrecords : this.dataview.loadedrecords.length; this.selectedrowindexes = new Array; for (var t = this.dataview.loadedrecords, i = 0; i < e; i++) { var s = t[i]; if (s) { this.getboundindex(s); this.selectedrowindexes[i] = -1 } else this.selectedrowindexes[i] = i } "checkbox" != this.selectionmode || this._checkboxcolumnupdating || this._checkboxcolumn && this._checkboxcolumn.checkboxelement.jqxCheckBox({ checked: !0 }), this._renderrows(this.virtualsizeinfo), this._trigger = !0, "checkbox" == this.selectionmode && this._raiseEvent(2, { rowindex: this.selectedrowindexes }) }, selectrow: function (e, t) { this._applyrowselection(e, !0, t), !1 !== t && this._updatecheckboxselection() }, _updatecheckboxselection: function () { if ("checkbox" == this.selectionmode) { var e = this.getrows(); if (e && this._checkboxcolumn) { if (0 === e.length) return void this._checkboxcolumn.checkboxelement.jqxCheckBox({ checked: !1 }); var t = e.length; this.virtualmode && (t = this.source._source.totalrecords); var i = this.selectedrowindexes.length; i === t ? this._checkboxcolumn.checkboxelement.jqxCheckBox({ checked: !0 }) : 0 === i ? this._checkboxcolumn.checkboxelement.jqxCheckBox({ checked: !1 }) : this._checkboxcolumn.checkboxelement.jqxCheckBox({ checked: null }) } } }, unselectrow: function (e, t) { this._applyrowselection(e, !1, t), !1 !== t && this._updatecheckboxselection() }, selectcell: function (e, t) { this._applycellselection(e, t, !0) }, unselectcell: function (e, t) { this._applycellselection(e, t, !1) }, clearselection: function (e, t) { if (this._trigger = !1, this.selectedrowindex = -1, this._oldselectedcell = null, !1 !== t) for (var i = 0; i < this.selectedrowindexes.length; i++) this._raiseEvent(3, { rowindex: this.selectedrowindexes[i] }); this.selectedrowindexes = new Array, this.selectedcells = new Array, "checkbox" != this.selectionmode || this._checkboxcolumnupdating || this._checkboxcolumn.checkboxelement.jqxCheckBox({ checked: !1 }), !1 !== e ? (this._renderrows(this.virtualsizeinfo), this._trigger = !0, "checkbox" == this.selectionmode && this._raiseEvent(3, { rowindex: this.selectedrowindexes })) : this._trigger = !0 }, getselectedrowindex: function () { if (-1 == this.selectedrowindex) for (var e = 0; e < this.selectedrowindexes.length; e++) return this.selectedrowindexes[e]; return this.selectedrowindex }, getselectedrowindexes: function () { return this.selectedrowindexes }, getselectedcell: function () { if (!this.selectedcell) return null; var e = this.selectedcell; return e.row = this.selectedcell.rowindex, e.column = this.selectedcell.datafield, e.value = this.getcellvalue(e.row, e.column), e }, getselectedcells: function () { var e = new Array; for (obj in this.selectedcells) e[e.length] = this.selectedcells[obj]; return e }, _getcellsforcopypaste: function () { var e = new Array; if (-1 == this.selectionmode.indexOf("cell")) for (var t = this.selectedrowindexes, i = 0; i < t.length; i++) for (var s = t[i], r = 0; r < this.columns.records.length; r++) { this.columns.records[r].datafield; var o = { rowindex: s, datafield: this.columns.records[r].datafield }; e.push(o) } return e }, deleteselection: function () { var e = this, t = e.getselectedcells(); if (-1 == this.selectionmode.indexOf("cell") && (t = this._getcellsforcopypaste()), null != t && t.length > 0) { for (var i = 0; i < t.length; i++) { var s = t[i], r = e.getcolumn(s.datafield), o = e.getcellvalue(s.rowindex, s.datafield); if (r && "" !== o) { var a = null; "checkbox" == r.columntype && (r.threestatecheckbox || (a = !1)), e._raiseEvent(17, { rowindex: s.rowindex, datafield: s.datafield, value: o }), i == t.length - 1 ? (e.setcellvalue(s.rowindex, s.datafield, a, !0), r.displayfield != r.datafield && e.setcellvalue(s.rowindex, r.displayfield, a, !0)) : (e.setcellvalue(s.rowindex, s.datafield, a, !1), r.displayfield != r.datafield && e.setcellvalue(s.rowindex, r.displayfield, a, !0)), e._raiseEvent(18, { rowindex: s.rowindex, datafield: s.datafield, oldvalue: o, value: a }) } } this.dataview.updateview(), this._renderrows(this.virtualsizeinfo) } }, copyselection: function () { var t = "", i = this; this.clipboardselection = {}, this._clipboardselection = []; var s = i.getselectedcells(); if (-1 == this.selectionmode.indexOf("cell") && (s = this._getcellsforcopypaste()), null != s && s.length > 0) { for (var r = 999999999999999, o = -1, a = 0; a < s.length; a++) { var n = s[a]; if (null != i.getcolumn(n.datafield)) { var l = i.getcelltext(n.rowindex, n.datafield); this.clipboardselection[n.rowindex] || (this.clipboardselection[n.rowindex] = {}), this.clipboardselection[n.rowindex][n.datafield] = l, r = Math.min(r, n.rowindex), o = Math.max(o, n.rowindex) } } for (var h = r; h <= o; h++) { var d = 0; this._clipboardselection[this._clipboardselection.length] = new Array, void 0 != this.clipboardselection[h] && e.each(this.clipboardselection[h], function (e, s) { d > 0 && (t += "\t"); var r = s; null == s && (r = ""), i._clipboardselection[i._clipboardselection.length - 1][d] = r, d++, t += r }), h < o && (t += "\n") } } return this.clipboardselectedtext = t, t }, pasteselection: function () { var e = this.getselectedcells(); if (-1 == this.selectionmode.indexOf("cell") && (e = this._getcellsforcopypaste()), null != e && e.length > 0) { var t = e[0].rowindex, i = e[0].datafield, s = this._getcolumnindex(i); if (this.selectedrowindexes = new Array, this.selectedcells = new Array, !this._clipboardselection) return; for (var r = 0; r < this._clipboardselection.length; r++) for (var o = 0; o < this._clipboardselection[r].length; o++) { var a = this.getcolumnat(s + o); if (a) { var n = this.getcell(t + r, a.datafield), l = null; if (null != (l = this._clipboardselection[r][o])) { if (a.cellsformat && (-1 != a.cellsformat.indexOf("p") || -1 != a.cellsformat.indexOf("c") || -1 != a.cellsformat.indexOf("n") || -1 != a.cellsformat.indexOf("f"))) { l.indexOf(this.gridlocalization.currencysymbol) > -1 && (l = l.replace(this.gridlocalization.currencysymbol, "")); (l = (l = function (e, t, i) { var s = e; if (t == i) return e; for (var r = s.indexOf(t) ; -1 != r;) r = (s = s.replace(t, i)).indexOf(t); return s }(l, this.gridlocalization.thousandsseparator, "")).replace(this.gridlocalization.decimalseparator, ".")).indexOf(this.gridlocalization.percentsymbol) > -1 && (l = l.replace(this.gridlocalization.percentsymbol, "")); for (var h = "", d = 0; d < l.length; d++) { var c = l.substring(d, d + 1); "-" === c && (h += "-"), "." === c && (h += "."), null != c.match(/^[0-9]+$/) && (h += c) } l = (l = h).replace(/ /g, ""), l = new Number(l), isNaN(l) && (l = "") } this._raiseEvent(17, { rowindex: t + r, datafield: n.datafield, value: l }), this.setcellvalue(n.row, n.column, l, !1), this._raiseEvent(18, { rowindex: t + r, datafield: n.datafield, oldvalue: this.getcellvalue(n.rowindex, n.datafield), value: l }), this._applycellselection(t + r, n.datafield, !0, !1) } } } this.dataview.updateview(), this._renderrows(this.virtualsizeinfo) } }, _applyrowselection: function (e, t, i, s, r) { if (null == e) return !1; var o = this.selectedrowindex; if ("singlerow" == this.selectionmode && (t ? this._raiseEvent(2, { rowindex: e, row: this.getrowdata(e) }) : this._raiseEvent(3, { rowindex: e, row: this.getrowdata(e) }), this._raiseEvent(3, { rowindex: o }), this.selectedrowindexes = new Array, this.selectedcells = new Array), 1 == s && (this.selectedrowindexes = new Array), this.dataview.filters.length > 0) { var a = this.getrowdata(e); a && void 0 !== a.dataindex ? e = a.dataindex : a && void 0 === a.dataindex && void 0 != a.uid && (e = this.getrowboundindexbyid(a.uid)) } var n = this.selectedrowindexes.indexOf(e); if (t) this.selectedrowindex = e, -1 == n ? (this.selectedrowindexes.push(e), "singlerow" != this.selectionmode && this._raiseEvent(2, { rowindex: e, row: this.getrowdata(e) })) : "multiplerows" == this.selectionmode && (this.selectedrowindexes.splice(n, 1), this._raiseEvent(3, { rowindex: this.selectedrowindex, row: this.getrowdata(e) }), this.selectedrowindex = this.selectedrowindexes.length > 0 ? this.selectedrowindexes[this.selectedrowindexes.length - 1] : -1); else if (n >= 0 || "singlerow" == this.selectionmode || "multiplerowsextended" == this.selectionmode || "multiplerowsadvanced" == this.selectionmode) { var l = this.selectedrowindexes[n]; this.selectedrowindexes.splice(n, 1), this._raiseEvent(3, { rowindex: l, row: this.getrowdata(e) }), this.selectedrowindex = -1 } return (void 0 == i || i) && this._rendervisualrows(), !0 }, _applycellselection: function (e, t, i, s) { if (null == e) return !1; if (null == t) return !1; this.selectedrowindex; if ("singlecell" == this.selectionmode && (null != (r = this.selectedcell) && this._raiseEvent(16, { rowindex: r.rowindex, datafield: r.datafield }), this.selectedcells = new Array), "multiplecellsextended" == this.selectionmode || "multiplecellsadvanced" == this.selectionmode) { var r = this.selectedcell; null != r && this._raiseEvent(16, { rowindex: r.rowindex, datafield: r.datafield }) } a = e + "_" + t; if (this.dataview.filters.length > 0) { var o = this.getrowdata(e); if (o && void 0 !== o.dataindex) a = (e = o.dataindex) + "_" + t; else if (o && void 0 === o.dataindex && o.uid) var a = (e = this.getrowboundindexbyid(o.uid)) + "_" + t } var n = { rowindex: e, datafield: t }; return i ? (this.selectedcell = n, this.selectedcells[a] ? "multiplecells" != this.selectionmode && "multiplecellsextended" != this.selectionmode && "multiplecellsadvanced" != this.selectionmode || (delete this.selectedcells[a], this.selectedcells.length > 0 && this.selectedcells.length--, this._raiseEvent(16, n)) : (this.selectedcells[a] = n, this.selectedcells.length++, this._raiseEvent(15, n))) : (delete this.selectedcells[a], this.selectedcells.length > 0 && this.selectedcells.length--, this._raiseEvent(16, n)), (void 0 == s || s) && this._rendervisualrows(), !0 }, _getcellindex: function (t) { var i = -1; return e.each(this.selectedcells, function () { if (i++, this[t]) return !1 }), i }, _clearhoverstyle: function () { if (void 0 != this.hoveredrow && -1 != this.hoveredrow && !this.vScrollInstance.isScrolling() && !this.hScrollInstance.isScrolling()) { var e = this.table.find(".jqx-grid-cell-hover"); e.length > 0 && (e.removeClass(this.toTP("jqx-grid-cell-hover")), e.removeClass(this.toTP("jqx-fill-state-hover"))), this.hoveredrow = -1 } }, _clearselectstyle: function () { for (var t = this.table[0].rows.length, i = this.table[0].rows, s = this.toTP("jqx-grid-cell-selected"), r = this.toTP("jqx-fill-state-pressed"), o = this.toTP("jqx-grid-cell-hover"), a = this.toTP("jqx-fill-state-hover"), n = 0; n < t; n++) for (var l = i[n], h = l.cells.length, d = l.cells, c = 0; c < h; c++) { var u = d[c], p = e(u); -1 != u.className.indexOf("jqx-grid-cell-selected") && (p.removeClass(s), p.removeClass(r)), -1 != u.className.indexOf("jqx-grid-cell-hover") && (p.removeClass(o), p.removeClass(a)) } }, _selectpath: function (e, t) { var i = this, s = this._lastClickedCell ? Math.min(this._lastClickedCell.row, e) : 0, r = this._lastClickedCell ? Math.max(this._lastClickedCell.row, e) : 0; if (s <= r) { var o = this._getcolumnindex(this._lastClickedCell.column), a = this._getcolumnindex(t), n = Math.min(o, a), l = Math.max(o, a); this.selectedcells = new Array; for (var h = this.dataview.loadedrecords, d = s; d <= r; d++) for (var c = n; c <= l; c++) { var e = h[d]; this._applycellselection(i.getboundindex(e), i._getcolumnat(c).datafield, !0, !1) } this._rendervisualrows() } }, _selectrowpath: function (e) { if ("multiplerowsextended" == this.selectionmode) { var t = this._lastClickedCell ? Math.min(this._lastClickedCell.row, e) : 0, i = this._lastClickedCell ? Math.max(this._lastClickedCell.row, e) : 0, s = this.dataview.loadedrecords; if (t <= i) { this.selectedrowindexes = new Array; for (var r = t; r <= i; r++) { var e = s[r], o = this.getrowboundindex(r); this._applyrowselection(o, !0, !1) } this._rendervisualrows() } } }, _selectrowwithmouse: function (e, t, i, s, r, o) { var a = t.row; if (void 0 != a) { var n = t.index; if (void 0 != this.hittestinfo[n]) { var l = this.hittestinfo[n].visualrow; if (!this.hittestinfo[n].details) { l.cells[0].className; if (!a.group) { if ("multiplerows" == this.selectionmode || "multiplecells" == this.selectionmode || "checkbox" == this.selectionmode || -1 != this.selectionmode.indexOf("multiple") && (1 == o || 1 == r)) { d = this.getboundindex(a); if (this.dataview.filters.length > 0) { var h = this.getrowdata(d); if (h && void 0 == (d = h.dataindex)) var d = this.getboundindex(a) } var c = -1 != i.indexOf(d), u = this.getboundindex(a) + "_" + s; if (-1 != this.selectionmode.indexOf("cell")) { var p = void 0 != this.selectedcells[u]; if (void 0 != this.selectedcells[u] && p ? this._selectcellwithstyle(e, !1, n, s, l) : this._selectcellwithstyle(e, !0, n, s, l), o && void 0 == this._lastClickedCell) { var m = this.getselectedcells(); m && m.length > 0 && (this._lastClickedCell = { row: m[0].rowindex, column: m[0].datafield }) } o && this._lastClickedCell && (this._selectpath(a.visibleindex, s), this.mousecaptured = !1, "visible" == this.selectionarea.css("visibility") && this.selectionarea.css("visibility", "hidden")) } else { if (c ? r ? this._applyrowselection(this.getboundindex(a), !1) : this._selectrowwithstyle(e, l, !1, s) : this._selectrowwithstyle(e, l, !0, s), o && void 0 == this._lastClickedCell) { var g = this.getselectedrowindexes(); g && g.length > 0 && (this._lastClickedCell = { row: g[0], column: s }) } if (o && this._lastClickedCell) { this.selectedrowindexes = new Array; for (var f = this._lastClickedCell ? Math.min(this._lastClickedCell.row, a.visibleindex) : 0, v = this._lastClickedCell ? Math.max(this._lastClickedCell.row, a.visibleindex) : 0, x = this.dataview.loadedrecords, w = f; w <= v; w++) (a = x[w]) && this._applyrowselection(this.getboundindex(a), !0, !1, !1); this._rendervisualrows() } } } else this._clearselectstyle(), this._selectrowwithstyle(e, l, !0, s), -1 != this.selectionmode.indexOf("cell") && this._selectcellwithstyle(e, !0, n, s, l); o || (this._lastClickedCell = { row: a.visibleindex, column: s }) } } } } }, _selectcellwithstyle: function (t, i, s, r, o) { var a = e(o.cells[t._getcolumnindex(r)]); a.removeClass(this.toTP("jqx-grid-cell-hover")), a.removeClass(this.toTP("jqx-fill-state-hover")), i ? (a.addClass(this.toTP("jqx-grid-cell-selected")), a.addClass(this.toTP("jqx-fill-state-pressed"))) : (a.removeClass(this.toTP("jqx-grid-cell-selected")), a.removeClass(this.toTP("jqx-fill-state-pressed"))) }, _selectrowwithstyle: function (t, i, s, r) { var o = i.cells.length, a = 0; t.rowdetails && t.showrowdetailscolumn ? this.rtl ? (o -= 1, o -= this.groups.length) : a = 1 + this.groups.length : this.groupable && (this.rtl ? o -= this.groups.length : a = this.groups.length); for (var n = a; n < o; n++) { var l = i.cells[n]; s ? (e(l).removeClass(this.toTP("jqx-grid-cell-hover")), e(l).removeClass(this.toTP("jqx-fill-state-hover")), -1 == t.selectionmode.indexOf("cell") && (e(l).addClass(this.toTP("jqx-grid-cell-selected")), e(l).addClass(this.toTP("jqx-fill-state-pressed")))) : (e(l).removeClass(this.toTP("jqx-grid-cell-hover")), e(l).removeClass(this.toTP("jqx-grid-cell-selected")), e(l).removeClass(this.toTP("jqx-fill-state-hover")), e(l).removeClass(this.toTP("jqx-fill-state-pressed"))) } }, _handlemousemoveselection: function (t, i) { if (("multiplerowsextended" == i.selectionmode || "multiplecellsextended" == i.selectionmode || "multiplecellsadvanced" == i.selectionmode) && i.mousecaptured) { if (i.multipleselectionbegins && !1 === i.multipleselectionbegins(t)) return !0; var s = this.showheader ? this.columnsheader.height() + 2 : 0, r = this._groupsheader() ? this.groupsheader.height() : 0; r += this.showtoolbar ? this.toolbarheight : 0; var o = this.host.coord(); if (this.hasTransform) { o = e.jqx.utilities.getOffset(this.host); var a = this._getBodyOffset(); o.left -= a.left, o.top -= a.top } var n = t.pageX, l = t.pageY - r; if (Math.abs(this.mousecaptureposition.left - n) > 3 || Math.abs(this.mousecaptureposition.top - l) > 3) { parseInt(this.columnsheader.coord().top); this.hasTransform && e.jqx.utilities.getOffset(this.columnsheader).top, n < o.left && (n = o.left), n > o.left + this.host.width() && (n = o.left + this.host.width()); var h = o.top + s; l < h && (l = h + 5); var d = parseInt(Math.min(i.mousecaptureposition.left, n)), c = -5 + parseInt(Math.min(i.mousecaptureposition.top, l)), u = parseInt(Math.abs(i.mousecaptureposition.left - n)), p = parseInt(Math.abs(i.mousecaptureposition.top - l)); if (d -= o.left, c -= o.top, this.selectionarea.css("visibility", "visible"), "multiplecellsadvanced" == i.selectionmode) { var m = (n = d) + u, g = i.hScrollInstance, f = g.value; this.rtl && ("hidden" != this.hScrollBar.css("visibility") && (f = g.max - g.value), this.vScrollBar[0].style.visibility); var v = i.table[0].rows[0], x = 0, w = i.mousecaptureposition.clickedcell, b = w, _ = !1, y = 0, j = v.cells.length; i.mousecaptureposition.left <= t.pageX && (y = w); for (z = y; z < j; z++) { var q = parseInt(e(this.columnsrow[0].cells[z]).css("left")), T = q - f; if (i.columns.records[z].pinned) T = q; else { var C = this._getcolumnat(z); if (!(null != C && C.hidden || i.groupable && i.groups.length > 0 && z < i.groups.length)) { var S = T + e(this.columnsrow[0].cells[z]).width(); if (i.mousecaptureposition.left > t.pageX) { if (S >= n && n >= T) { b = z, _ = !0; break } } else if (S >= m && m >= T) { b = z, _ = !0; break } } } } _ || (i.mousecaptureposition.left > t.pageX ? e.each(this.columns.records, function (e, t) { return !!(i.groupable && i.groups.length > 0 && e < i.groups.length) || (this.pinned || this.hidden ? void 0 : (b = e, !1)) }) : (!i.groupable || i.groupable && !i.groups.length > 0) && (b = v.cells.length - 1)); var k = w; w = Math.min(w, b), b = Math.max(k, b), c += 5, c += r; i.table[0].rows.indexOf(i.mousecaptureposition.clickedrow); for (var I = 0, D = -1, P = -1, B = 0, z = 0; z < i.table[0].rows.length; z++) { var H = e(i.table[0].rows[z]); 0 == z && (B = H.coord().top); var M = H.height(), E = B - o.top; if (-1 == D && E + M >= c) { for (var A = !1, L = 0; L < i.groups.length; L++) if (-1 != (O = H[0].cells[L].className).indexOf("jqx-grid-group-collapse") || -1 != O.indexOf("jqx-grid-group-expand")) { A = !0; break } if (A) continue; D = z } if (B += M, i.groupable && i.groups.length > 0) { for (var A = !1, L = 0; L < i.groups.length; L++) { var O = H[0].cells[L].className; if (-1 != O.indexOf("jqx-grid-group-collapse") || -1 != O.indexOf("jqx-grid-group-expand")) { A = !0; break } } if (A) continue; for (var x = 0, N = i.groups.length; N < H[0].cells.length; N++) { var F = H[0].cells[N]; "" == e(F).html() && x++ } if (x == H[0].cells.length - i.groups.length) continue } if (-1 != D && (I += M), E + M > c + p) { P = z; break } } if (-1 != D) { c = e(i.table[0].rows[D]).coord().top - o.top - r - 2; var R = 0; this.filterable && this.showfilterrow && (R = this.filterrowheight), parseInt(i.table[0].style.top) < 0 && c < this.rowsheight + R && (c -= parseInt(i.table[0].style.top), I += parseInt(i.table[0].style.top)), p = I; var W = e(this.columnsrow[0].cells[w]), V = e(this.columnsrow[0].cells[b]); if (d = parseInt(W.css("left")), u = parseInt(V.css("left")) - parseInt(d) + V.width() - 2, d -= f, i.editcell && i.editable && i.endcelledit && (w != b || D != P)) { if (0 == i.editcell.validated) return; i.endcelledit(i.editcell.row, i.editcell.column, !0, !0) } } } this.selectionarea.width(u), this.selectionarea.height(p), this.selectionarea.css("left", d), this.selectionarea.css("top", c) } } }, _handlemouseupselection: function (t, i) { if (this.selectionarea) { if ("visible" != this.selectionarea.css("visibility")) return i.mousecaptured = !1, !0; if (i.mousecaptured && ("multiplerowsextended" == i.selectionmode || "multiplerowsadvanced" == i.selectionmode || "multiplecellsextended" == i.selectionmode || "multiplecellsadvanced" == i.selectionmode) && (i.mousecaptured = !1, "visible" == this.selectionarea.css("visibility"))) { this.selectionarea.css("visibility", "hidden"); var s = this.showheader ? this.columnsheader.height() + 2 : 0, r = this._groupsheader() ? this.groupsheader.height() : 0; r += this.showtoolbar ? this.toolbarheight : 0; var o = this.selectionarea.coord(), a = this.host.coord(); this.hasTransform && (a = e.jqx.utilities.getOffset(this.host), o = e.jqx.utilities.getOffset(this.selectionarea)); var n = o.left - a.left, l = o.top - s - a.top - r, h = l, d = n + this.selectionarea.width(), c = n, u = new Array, p = new Array; if ("multiplerowsextended" == i.selectionmode) { for (; l < h + this.selectionarea.height() ;) { b = (w = this._hittestrow(n, l)).row; -1 != (_ = w.index) && (p[_] || (p[_] = !0, u[u.length] = w)), l += 20 } h = 0; e.each(u, function () { var e = this.row; "none" != i.selectionmode && i._selectrowwithmouse && (t.ctrlKey ? i._applyrowselection(i.getboundindex(e), !0, !1, !1) : 0 == h ? i._applyrowselection(i.getboundindex(e), !0, !1, !0) : i._applyrowselection(i.getboundindex(e), !0, !1, !1), h++) }) } else { "multiplecellsadvanced" == i.selectionmode && (l += 2); var m = i.hScrollInstance, g = m.value; this.rtl && ("hidden" != this.hScrollBar.css("visibility") && (g = m.max - m.value), "hidden" != this.vScrollBar[0].style.visibility && (g -= this.scrollbarsize + 4)); var f = i.table[0].rows[0], v = i.selectionarea.height(); !t.ctrlKey && v > 0 && (i.selectedcells = new Array); for (var x = v; l < h + x;) { var w = i._hittestrow(n, l); if (w) { var b = w.row, _ = w.index; if (-1 != _ && !p[_]) { p[_] = !0; for (var y = 0; y < f.cells.length; y++) { var j = parseInt(e(i.columnsrow[0].cells[y]).css("left")) - g, q = j + e(i.columnsrow[0].cells[y]).width(); (c >= j && c <= q || d >= j && d <= q || j >= c && j <= d) && i._applycellselection(i.getboundindex(b), i._getcolumnat(y).datafield, !0, !1) } } l += 5 } else l += 5 } } i.autosavestate && i.savestate && i.savestate(), i._renderrows(i.virtualsizeinfo) } } }, selectprevcell: function (e, t) { var i = this._getcolumnindex(t), s = (this.columns.records.length, this._getprevvisiblecolumn(i)); null != s && (this.clearselection(), this.selectcell(e, s.datafield)) }, selectnextcell: function (e, t) { var i = this._getcolumnindex(t), s = (this.columns.records.length, this._getnextvisiblecolumn(i)); null != s && (this.clearselection(), this.selectcell(e, s.datafield)) }, _getfirstvisiblecolumn: function () { for (var e = this.columns.records.length, t = 0; t < e; t++) { var i = this.columns.records[t]; if (!i.hidden && null != i.datafield) return i } return null }, _getlastvisiblecolumn: function () { for (var e = this.columns.records.length - 1; e >= 0; e--) { var t = this.columns.records[e]; if (!t.hidden && null != t.datafield) return t } return null }, _handlekeydown: function (t, i) { if (i.groupable && i.groups.length > 0) return !0; if (i.disabled) return !1; var s = t.charCode ? t.charCode : t.keyCode ? t.keyCode : 0; if (i.editcell && "multiplecellsadvanced" != i.selectionmode) return !0; if (i.editcell && "multiplecellsadvanced" == i.selectionmode) { if (!(s >= 33 && s <= 40)) return !0; if (t.altKey) return i._cancelkeydown = !1, !0; if (void 0 != i._cancelkeydown && 0 != i._cancelkeydown) return i._cancelkeydown = !1, !0; if ("selectedrow" === i.editmode) return !0; if (i.endcelledit(i.editcell.row, i.editcell.column, !1, !0), i._cancelkeydown = !1, i.editcell && !i.editcell.validated) return i._rendervisualrows(), i.endcelledit(i.editcell.row, i.editcell.column, !1, !0), !1 } if ("none" == i.selectionmode) return !0; if (i.showfilterrow && i.filterable && this.filterrow && e(t.target).ischildof(this.filterrow)) return !0; if (i.pageable && e(t.target).ischildof(this.pager)) return !0; if (this.showtoolbar && e(t.target).ischildof(this.toolbar)) return !0; if (this.showstatusbar && e(t.target).ischildof(this.statusbar)) return !0; var r = !1; if (t.altKey) return !0; if (t.ctrlKey && this.clipboard) { var o = String.fromCharCode(s).toLowerCase(); if ("c" == o || "x" == o) { var a = this.copyselection(); if (window.clipboardData) window.clipboardData.setData("Text", a); else { var n = e('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>'); n.val(a), e("body").append(n), n.select(), setTimeout(function () { document.designMode = "off", n.select(), n.remove(), i.focus() }, 100) } } else if ("v" == o) { var l = e('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>'); e("body").append(l), l.select(); var h = this; setTimeout(function () { h._clipboardselection = new Array; for (var e = l.val().split("\n"), t = 0; t < e.length; t++) if (e[t].split("\t").length > 0) { var i = e[t].split("\t"); if (1 == i.length && t == e.length - 1 && "" == i[0]) continue; i.length > 0 && h._clipboardselection.push(i) } h.pasteselection(), l.remove(), h.focus() }, 100) } "x" == o && (this.deleteselection(), this.host.focus()) } var d = Math.round(i._gettableheight()), c = Math.round(d / i.rowsheight), u = i.getdatainformation(); switch (i.selectionmode) { case "singlecell": case "multiplecells": case "multiplecellsextended": case "multiplecellsadvanced": var p = i.getselectedcell(); if (null != p) { var m = this.getrowvisibleindex(p.rowindex), g = p.datafield, f = i._getcolumnindex(g), v = (i.columns.records.length, function (e, o, a) { var n = function (e, t) { var s = i.dataview.loadedrecords[e]; if (void 0 != s && null != t) { (a || void 0 == a) && i.clearselection(); var o = i.getboundindex(s); return i.selectcell(o, t), i._oldselectedcell = i.selectedcell, r = !0, i.ensurecellvisible(e, t), !0 } return !1 }; if (n(e, o) || (i.ensurecellvisible(e, o), n(e, o), i.virtualmode && i.host.focus()), t.shiftKey && 9 != s) { if (("multiplecellsextended" == i.selectionmode || "multiplecellsadvanced" == i.selectionmode) && i._lastClickedCell) { i._selectpath(e, o); var l = i.dataview.loadedrecords[e], h = i.getboundindex(l); return void (i.selectedcell = { rowindex: h, datafield: o }) } } else t.shiftKey || (i._lastClickedCell = { row: e, column: o }) }), x = t.shiftKey && "singlecell" != i.selectionmode && "multiplecells" != i.selectionmode, w = function () { v(0, g, !x) }, b = function () { var e = u.rowscount - 1; v(e, g, !x) }, _ = 9 == s && !t.shiftKey, y = 9 == s && t.shiftKey; if ((_ || y) && (x = !1), (S = t.ctrlKey) && 37 == s) null != (T = i._getfirstvisiblecolumn(f)) && v(m, T.datafield); else if (S && 39 == s) { var j = i._getlastvisiblecolumn(f); null != j && v(m, j.datafield) } else if (39 == s || _) { var q = i._getnextvisiblecolumn(f); null != q ? v(m, q.datafield, !x) : _ || (r = !0) } else if (37 == s || y) { var T = i._getprevvisiblecolumn(f); null != T ? v(m, T.datafield, !x) : y || (r = !0) } else 36 == s ? w() : 35 == s ? b() : 33 == s ? m - c >= 0 ? v(k = m - c, g, !x) : w() : 34 == s ? u.rowscount > m + c ? v(k = m + c, g, !x) : b() : 38 == s ? S ? w() : m > 0 ? v(m - 1, g, !x) : r = !0 : 40 == s && (S ? b() : u.rowscount > m + 1 ? v(m + 1, g, !x) : r = !0) } break; case "singlerow": case "multiplerows": case "multiplerowsextended": case "multiplerowsadvanced": if (null == (m = i.getselectedrowindex()) || -1 == m) return !0; m = this.getrowvisibleindex(m); var C = function (e, o) { var a = function (e) { var t = i.dataview.loadedrecords[e]; if (void 0 != t) { var s = i.getboundindex(t), a = i.selectedrowindex; return (o || void 0 == o) && i.clearselection(), i.selectedrowindex = a, i.selectrow(s, !1), (!i.ensurerowvisible(e) || i.autoheight || i.groupable) && i._rendervisualrows(), r = !0, !0 } return !1 }; if (a(e) || (i.ensurerowvisible(e), a(e), i.virtualmode && setTimeout(function () { a(e) }, 25), i.virtualmode && i.host.focus()), t.shiftKey && 9 != s) { if ("multiplerowsextended" == i.selectionmode && i._lastClickedCell) return i._selectrowpath(e), void (i.selectedrowindex = i.getrowboundindex(e)) } else t.shiftKey || (i._lastClickedCell = { row: e }, i.selectedrowindex = i.getrowboundindex(e)) }, x = t.shiftKey && "singlerow" != i.selectionmode && "multiplerows" != i.selectionmode, w = function () { C(0, !x) }, b = function () { var e = u.rowscount - 1; C(e, !x) }, S = t.ctrlKey; if (36 == s || S && 38 == s) w(); else if (35 == s || S && 40 == s) b(); else if (33 == s) m - c >= 0 ? C(k = m - c, !x) : w(); else if (34 == s) if (u.rowscount > m + c) { var k = m + c; C(k, !x) } else b(); else 38 == s ? m > 0 ? C(m - 1, !x) : r = !0 : 40 == s && (u.rowscount > m + 1 ? C(m + 1, !x) : r = !0) } return !r || (i.autosavestate && i.savestate && i.savestate(), !1) }, _handlemousemove: function (t, i) { if (!i.vScrollInstance.isScrolling() && !i.hScrollInstance.isScrolling()) { var s, r, o, a, n; if (i.enablehover || "multiplerows" == i.selectionmode) { if (s = this.showheader ? this.columnsheader.height() + 2 : 0, r = this._groupsheader() ? this.groupsheader.height() : 0, r += this.showtoolbar ? this.toolbarheight : 0, o = this.host.coord(), this.hasTransform) { o = e.jqx.utilities.getOffset(this.host); var l = this._getBodyOffset(); o.left -= l.left, o.top -= l.top } a = t.pageX - o.left, n = t.pageY - s - o.top - r } if ("multiplerowsextended" != i.selectionmode && "multiplecellsextended" != i.selectionmode && "multiplecellsadvanced" != i.selectionmode || 1 != i.mousecaptured) { if (!i.enablehover) return !0; if (!i.disabled && !this.vScrollInstance.isScrolling() && !this.hScrollInstance.isScrolling()) { var h = this._hittestrow(a, n); if (h) { var d = h.row, c = h.index; if ((-1 == this.hoveredrow || -1 == c || this.hoveredrow != c || -1 != this.selectionmode.indexOf("cell") || "checkbox" == this.selectionmode) && (this._clearhoverstyle(), -1 != c && void 0 != d)) { var u = this.hittestinfo[c].visualrow; if (null != u && !(this.hittestinfo[c].details || t.clientX > e(u).width() + e(u).coord().left)) { var p = 0, m = u.cells.length; if (i.rowdetails && i.showrowdetailscolumn ? this.rtl ? (m -= 1, m -= this.groups.length) : p = 1 + this.groups.length : this.groupable && (this.rtl ? m -= this.groups.length : p = this.groups.length), 0 != u.cells.length) { var g = u.cells[p].className; if (!(d.group || this.selectionmode.indexOf("row") >= 0 && -1 != g.indexOf("jqx-grid-cell-selected"))) if (this.hoveredrow = c, -1 == this.selectionmode.indexOf("cell") && "checkbox" != this.selectionmode) for (b = p; b < m; b++) { var f = u.cells[b]; e(f).addClass(this.toTP("jqx-grid-cell-hover")), e(f).addClass(this.toTP("jqx-fill-state-hover")), this.cellhover && this.cellhover(f, t.pageX, t.pageY) } else { var v = -1, x = this.hScrollInstance, w = x.value; this.rtl && "hidden" != this.hScrollBar.css("visibility") && (w = x.max - x.value); for (var b = p; b < m; b++) { var _ = parseInt(e(this.columnsrow[0].cells[b]).css("left")) - w; if (_ + e(this.columnsrow[0].cells[b]).width() >= a && a >= _) { v = b; break } } if (-1 != v && -1 == (f = u.cells[v]).className.indexOf("jqx-grid-cell-selected")) { if (this.editcell) { var y = this._getcolumnat(v); if (y && this.editcell.row == c && this.editcell.column == y.datafield) return } e(f).addClass(this.toTP("jqx-grid-cell-hover")), e(f).addClass(this.toTP("jqx-fill-state-hover")), this.cellhover && this.cellhover(f, t.pageX, t.pageY) } } } } } } } } } } }) }(jQuery), function (e) { e.extend(e.jqx._jqxGrid.prototype, { autoresizecolumns: function (t, i) { "cells" != t && "all" != t && "column" != t && (t = "all"); var s = this.that, r = this.getrows(); this.pageable && (r = this.dataview.rows, this.groupable && (r = this.dataview.records)), i = void 0 == i ? 0 : parseInt(i); var o = r.length; if (void 0 == o && void 0 != r) { var a = new Array; e.each(r, function (e) { a.push(this) }), o = (r = a).length } var n = e("<span></span>"); n.addClass(this.toThemeProperty("jqx-widget")), n.addClass(this.toThemeProperty("jqx-grid-cell")), e(document.body).append(n); var l = [], h = [], d = [], c = [], u = s.host.width(); "hidden" != s.vScrollBar[0].style.visibility && (u -= this.scrollbarsize + 5), u < 0 && (u = 0); for (var p = 0; p < o; p++) for (var m = r[p], g = 0; g < this.columns.records.length; g++) if (!(T = this.columns.records[g]).hidden) { void 0 == h[T.displayfield] && (h[T.displayfield] = 0), void 0 == d[T.displayfield] && (d[T.displayfield] = ""); var f = m[T.displayfield]; if ("" != T.cellsformat) e.jqx.dataFormat && (e.jqx.dataFormat.isDate(f) ? f = e.jqx.dataFormat.formatdate(f, T.cellsformat, this.gridlocalization) : e.jqx.dataFormat.isNumber(f) && (f = e.jqx.dataFormat.formatnumber(f, T.cellsformat, this.gridlocalization))); else if (T.cellsrenderer) { var v = s._defaultcellsrenderer(f, T), x = T.cellsrenderer(p, T.datafield, f, v, T.getcolumnproperties(), m); void 0 != x && (f = e(x).text()) } if ((void 0 == t || "cells" == t || "all" == t) && null != f) { var l = f.toString().length, w = (b = f.toString()).replace(/[^A-Z]/g, "").length; l > h[T.displayfield] && (h[T.displayfield] = l, d[T.displayfield] = f, c[T.displayfield] = w), l > 0 && l >= w && (_ = 20 * w + 15 * (l - w)) > (y = 20 * c[T.displayfield] + 15 * (h[T.displayfield] - c[T.displayfield])) && _ > 0 && y > 0 && (h[T.displayfield] = l, d[T.displayfield] = f, c[T.displayfield] = w) } if ("column" == t || "all" == t) { if (T.text.toString().length > h[T.displayfield]) { d[T.displayfield] = T.text, h[T.displayfield] = T.text.length; w = (b = T.text.toString()).replace(/[^A-Z]/g, "").length; c[T.displayfield] = w } var l = (f = T.text).toString().length, b = f.toString(), w = b.replace(/[^A-Z]/g, "").length; if (l > 0 && l >= w) { var _ = 20 * w + 15 * (l - w), y = 20 * c[T.displayfield] + 15 * (h[T.displayfield] - c[T.displayfield]); _ > y && _ > 0 && y > 0 && (h[T.displayfield] = l, d[T.displayfield] = f, c[T.displayfield] = w) } } } if (this.columns.records) { for (g = 0; g < this.columns.records.length; g++) { void 0 == d[(T = this.columns.records[g]).displayfield] && (d[T.displayfield] = T.text), n[0].innerHTML = d[T.displayfield].toString(); var j = n.outerWidth() + 10; if (n.children().length > 0 && (j = n.children().outerWidth() + 10), e.jqx.browser.msie && e.jqx.browser.version < 8 && (j += 10), this.filterable && this.showfilterrow && (j += 5), (j += i) > T.maxwidth && (j = T.maxwidth), void 0 != T._width && (T.__width = T._width), T._width = null, "auto" == T.maxwidth || j <= T.maxwidth) { var q = T.width; j < T.minwidth && (j = T.minwidth), T.width = j, void 0 != T._percentagewidth && (T._percentagewidth = null), this._raiseEvent(14, { columntext: T.text, column: T.getcolumnproperties(), datafield: T.datafield, displayfield: T.displayfield, oldwidth: q, newwidth: j }) } } n.remove(), this._updatecolumnwidths(), this._updatecellwidths(), this._renderrows(this.virtualsizeinfo); for (g = 0; g < this.columns.records.length; g++) { var T = this.columns.records[g]; void 0 != T.__width && (T._width = T.__width) } } }, autoresizecolumn: function (t, i, s) { if ("cells" != i && "all" != i && "column" != i && (i = "all"), void 0 == t) return !1; var r = this.getrows(); this.pageable && (r = this.dataview.rows, this.groupable && (r = this.dataview.records)); var o = this.getcolumn(t); if (void 0 == o) return !1; s = void 0 == s ? 0 : parseInt(s); var a = r.length, n = e("<span></span>"); n.addClass(this.toThemeProperty("jqx-widget")), n.addClass(this.toThemeProperty("jqx-grid-cell")), e(document.body).append(n); var l = 0, h = "", d = 0, c = this.that, u = c.host.width(); if ("hidden" != c.vScrollBar[0].style.visibility && (u -= this.scrollbarsize + 5), u < 0 && (u = 0), void 0 == i || "cells" == i || "all" == i) for (var p = 0; p < a; p++) { var m = r[p][o.displayfield]; if ("" != o.cellsformat) e.jqx.dataFormat && (e.jqx.dataFormat.isDate(m) ? m = e.jqx.dataFormat.formatdate(m, o.cellsformat, this.gridlocalization) : e.jqx.dataFormat.isNumber(m) && (m = e.jqx.dataFormat.formatnumber(m, o.cellsformat, this.gridlocalization))); else if (o.cellsrenderer) { var g = o.cellsrenderer(p, o, m); void 0 != g && (m = e(g).text()) } if (null != m) { var f = m.toString().length, v = (x = m.toString()).replace(/[^A-Z]/g, "").length; f > l && (l = f, h = m, d = v), f > 0 && f >= v && (w = 20 * v + 15 * (f - v)) > (b = 20 * d + 15 * (l - d)) && w > 0 && b > 0 && (l = f, h = m, d = v) } } if ("column" == i || "all" == i) { o.text.toString().length > l && (h = o.text); var f = (m = o.text.toString()).toString().length, x = m.toString(), v = x.replace(/[^A-Z]/g, "").length; if (f > 0 && f >= v) { var w = 20 * v + 15 * (f - v), b = 20 * d + 15 * (l - d); w > b && w > 0 && b > 0 && (l = f, h = m, d = v) } } void 0 == h && (h = o.text), n[0].innerHTML = h; var _ = n.outerWidth() + 10; if (e.jqx.browser.msie && e.jqx.browser.version < 8 && (_ += 5), this.filterable && this.showfilterrow && (_ += 5), _ += s, n.remove(), _ > o.maxwidth && (_ = o.maxwidth), "auto" == o.maxwidth || _ <= o.maxwidth) { var y = o.width; _ < o.minwidth && (_ = o.minwidth), o.width = _, void 0 != o._width && (o.__width = o._width), o._width = null, void 0 != o._percentagewidth && (o._percentagewidth = null), this._updatecolumnwidths(), this._updatecellwidths(), this._raiseEvent(14, { columntext: o.text, column: o.getcolumnproperties(), datafield: t, displayfield: o.displayfield, oldwidth: y, newwidth: _ }), this._renderrows(this.virtualsizeinfo), void 0 != o._width && (o._width = o.__width) } }, _handlecolumnsresize: function () { var t = this.that; if (this.columnsresize) { var i = !1; t.isTouchDevice() && !0 !== t.touchmode && (i = !0); var s = "mousemove.resize" + this.element.id, r = "mousedown.resize" + this.element.id, o = "mouseup.resize" + this.element.id; if (i) var s = e.jqx.mobile.getTouchEventName("touchmove") + ".resize" + this.element.id, r = e.jqx.mobile.getTouchEventName("touchstart") + ".resize" + this.element.id, o = e.jqx.mobile.getTouchEventName("touchend") + ".resize" + this.element.id; this.removeHandler(e(document), s), this.addHandler(e(document), s, function (s) { if (null != e.data(document.body, "contextmenu" + t.element.id) && t.autoshowcolumnsmenubutton) return !0; if (null != t.resizablecolumn && !t.disabled && t.resizing && null != t.resizeline) { t.resizablecolumn.columnelement; var r = t.host.coord(), o = parseInt(t.resizestartline.coord().left), a = o - t._startcolumnwidth, n = t.resizablecolumn.column.minwidth; n = "auto" == n ? 0 : parseInt(n); var l = t.resizablecolumn.column.maxwidth; l = "auto" == l ? 0 : parseInt(l); var h = s.pageX; i && (h = t.getTouches(s)[0].pageX), a += n; var d = l > 0 ? o + l : 0, c = 0 == l || t._startcolumnwidth + h - o < l; if (t.rtl) c = !0; if (c) if (t.rtl) { if (h >= r.left && h <= r.left + t.host.width() && (t.resizeline.css("left", h), i)) return !1 } else if (h >= r.left && h >= a && (0 != d && s.pageX < d ? t.resizeline.css("left", h) : 0 == d && t.resizeline.css("left", h), i)) return !1 } return !(!i && null != t.resizablecolumn) && void 0 }), this.removeHandler(e(document), r), this.addHandler(e(document), r, function (i) { if (null != e.data(document.body, "contextmenu" + t.element.id) && t.autoshowcolumnsmenubutton) return !0; if (null != t.resizablecolumn && !t.disabled) { var s = t.resizablecolumn.columnelement; if (s.coord().top + s.height() + 5 < i.pageY) return void (t.resizablecolumn = null); if (s.coord().top - 5 > i.pageY) return void (t.resizablecolumn = null); t._startcolumnwidth = t.resizablecolumn.column.width, t.resizablecolumn.column._width = null, e(document.body).addClass("jqx-disableselect"), e(document.body).addClass("jqx-position-reset"), t.host.addClass("jqx-disableselect"), t.content.addClass("jqx-disableselect"), t._mouseDownResize = new Date, t.resizing = !0, t._resizecolumn = t.resizablecolumn.column, t.resizeline = t.resizeline || e('<div style="position: absolute;"></div>'), t.resizestartline = t.resizestartline || e('<div style="position: absolute;"></div>'), t.resizebackground = t.resizebackground || e('<div style="position: absolute; left: 0; top: 0; background: #000;"></div>'), t.resizebackground.css("opacity", .01), t.resizebackground.css("cursor", "col-resize"), t.resizeline.css("cursor", "col-resize"), t.resizestartline.css("cursor", "col-resize"), t.resizeline.addClass(t.toThemeProperty("jqx-grid-column-resizeline")), t.resizestartline.addClass(t.toThemeProperty("jqx-grid-column-resizestartline")), e(document.body).append(t.resizeline), e(document.body).append(t.resizestartline), e(document.body).append(t.resizebackground); var r = t.resizablecolumn.columnelement.coord(); t.resizebackground.css("left", t.host.coord().left), t.resizebackground.css("top", t.host.coord().top), t.resizebackground.width(t.host.width()), t.resizebackground.height(t.host.height()), t.resizebackground.css("z-index", 9999); var o = function (e) { t.rtl ? e.css("left", parseInt(r.left)) : e.css("left", parseInt(r.left) + t._startcolumnwidth); var i = t._groupsheader() ? t.groupsheader.height() : 0; i += t.showtoolbar ? t.toolbarheight : 0, i += t.showstatusbar ? t.statusbarheight : 0; var s = 0; t.pageable && (s = t.pagerheight); var o = "visible" == t.hScrollBar.css("visibility") ? 17 : 0; e.css("top", parseInt(r.top)), e.css("z-index", 99999), t.columngroups ? e.height(t.host.height() + t.resizablecolumn.columnelement.height() - s - i - o - t.columngroupslevel * t.columnsheight) : e.height(t.host.height() - s - i - o), t.enableanimations ? e.show("fast") : e.show() }; o(t.resizeline), o(t.resizestartline), t.dragmousedown = null } }); var a = function () { if (e(document.body).removeClass("jqx-disableselect"), e(document.body).removeClass("jqx-position-reset"), (t.showfilterrow || t.showstatusbar || t.showtoolbar || t.enablebrowserselection) && (t.host.removeClass("jqx-disableselect"), t.content.removeClass("jqx-disableselect")), t.resizing) { if (t._mouseUpResize = new Date, t._mouseUpResize - t._mouseDownResize < 200) return t.resizing = !1, void (null != t._resizecolumn && null != t.resizeline && "block" == t.resizeline.css("display") && (t._resizecolumn = null, t.resizeline.hide(), t.resizestartline.hide(), t.resizebackground.remove())); if (t.resizing = !1, !t.disabled) { var i = t.host.width(); if ("hidden" != t.vScrollBar[0].style.visibility && (i -= 20), i < 0 && (i = 0), null != t._resizecolumn && null != t.resizeline && "block" == t.resizeline.css("display")) { var s = parseInt(t.resizeline.css("left")), r = parseInt(t.resizestartline.css("left")), o = t._startcolumnwidth + s - r; if (t.rtl) o = t._startcolumnwidth - s + r; var a = t._resizecolumn.width; t._closemenu(), o < t._resizecolumn.minwidth && (o = t._resizecolumn.minwidth), t._resizecolumn.width = o, void 0 != t._resizecolumn._percentagewidth && (t._resizecolumn._percentagewidth = o / i * 100); for (var n = 0; n < t._columns.length; n++) if (t._columns[n].datafield === t._resizecolumn.datafield) { t._columns[n].width = t._resizecolumn.width, t._columns[n].width < t._resizecolumn.minwidth && (t._columns[n].width = t._resizecolumn.minwidth); break } var l = t.hScrollBar[0].style.visibility; t._updatecolumnwidths(), t._updatecellwidths(), t._raiseEvent(14, { columntext: t._resizecolumn.text, column: t._resizecolumn.getcolumnproperties(), datafield: t._resizecolumn.datafield, oldwidth: a, newwidth: o }), t._renderrows(t.virtualsizeinfo), t.autosavestate && t.savestate && t.savestate(), l != t.hScrollBar[0].style.visibility && t.hScrollInstance.setPosition(0), t.rtl && t._arrange(), t._resizecolumn = null, t.resizeline.hide(), t.resizestartline.hide(), t.resizebackground.remove(), t.resizablecolumn = null } else t.resizablecolumn = null } } }; try { if ("" != document.referrer || window.frameElement) { var n = null; if (null != window.top && window.top != window.self && window.parent && document.referrer && (n = document.referrer), n && -1 != n.indexOf(document.location.host)) { var l = function (e) { a() }; window.top.document.addEventListener ? window.top.document.addEventListener("mouseup", l, !1) : window.top.document.attachEvent && window.top.document.attachEvent("onmouseup", l) } } } catch (e) { } this.removeHandler(e(document), o), this.addHandler(e(document), o, function (i) { if (null != e.data(document.body, "contextmenu" + t.element.id) && t.autoshowcolumnsmenubutton) return !0; a() }) } } }) }(jQuery), function (e) { e.jqx.dataview.sort = function () { this.sortby = function (t, i, s) { var r = Object.prototype.toString; if (null == i) return this.sortdata = null, void this.refresh(); void 0 == i && (i = !0), i = "a" == i || "asc" == i || "ascending" == i || 1 == i; var o = t; this.sortfield = t, this.sortfielddirection = i ? "asc" : "desc", void 0 == this.sortcache && (this.sortcache = {}), this.sortdata = []; var a = [], n = !1; if ("constructor" == o && (o = ""), !this.virtualmode && null != this.sortcache[o]) { var l = this.sortcache[o]; a = l._sortdata, l.direction == i ? a.reverse() : (!l.direction && i && a.reverse(), n = !0), a.length < this.totalrecords && (this.sortcache = {}, n = !1, a = []) } Object.prototype.toString = "function" == typeof t ? t : function () { return this[t] }; var h = this.records, d = (this.that, ""); if (this.source.datafields && e.each(this.source.datafields, function () { if (this.name == t) return this.type && (d = this.type), !1 }), 0 == a.length) if (h.length) { for (var c = h.length, u = 0; u < c; u++) if (null != (g = h[u])) { var p = (f = g).toString(); a.push({ sortkey: p, value: f, index: u }) } } else { var m = !1; for (obj in h) { var g = h[obj]; if (void 0 == g) { m = !0; break } var f = g; a.push({ sortkey: f.toString(), value: f, index: obj }) } m && e.each(h, function (e, t) { a.push({ sortkey: t.toString(), value: t, index: e }) }) } if (!n) if (null == s) { this._sortcolumntype = d; var v = this; a.sort(function (e, t) { return v._compare(e, t, d) }) } else a.sort(s); i || a.reverse(), Object.prototype.toString = r, this.sortdata = a, this.sortcache[o] = { _sortdata: a, direction: i }, this.reload(this.records, this.rows, this.filters, this.updated, !0) }, this.clearsortdata = function () { this.sortcache = {}, this.sortdata = null }, this._compare = function (t, i, s) { var t = t.sortkey, i = i.sortkey; if (void 0 === t && (t = null), void 0 === i && (i = null), null === t && null === i) return 0; if (null === t && null !== i) return -1; if (null !== t && null === i) return 1; if (e.jqx.dataFormat) if (s && "" != s) switch (s) { case "number": case "int": case "float": return t < i ? -1 : t > i ? 1 : 0; case "date": case "time": return t < i ? -1 : t > i ? 1 : 0; case "string": case "text": t = String(t).toLowerCase(), i = String(i).toLowerCase() } else { if (e.jqx.dataFormat.isNumber(t) && e.jqx.dataFormat.isNumber(i)) return t < i ? -1 : t > i ? 1 : 0; if (e.jqx.dataFormat.isDate(t) && e.jqx.dataFormat.isDate(i)) return t < i ? -1 : t > i ? 1 : 0; e.jqx.dataFormat.isNumber(t) || e.jqx.dataFormat.isNumber(i) || (t = String(t).toLowerCase(), i = String(i).toLowerCase()) } try { if (t < i) return -1; if (t > i) return 1 } catch (e) { } return 0 }, this._equals = function (e, t) { return 0 === this._compare(e, t) } }, e.extend(e.jqx._jqxGrid.prototype, { _rendersortcolumn: function () { var t = this.that, i = this.getsortcolumn(); if (this.sortdirection) { var s = function (i, s) { var r = t.getcolumn(i); r && (s.ascending ? e.jqx.aria(r.element, "aria-sort", "ascending") : s.descending ? e.jqx.aria(r.element, "aria-sort", "descending") : e.jqx.aria(r.element, "aria-sort", "none")) }; this._oldsortinfo && this._oldsortinfo.column && s(this._oldsortinfo.column, { ascending: !1, descending: !1 }), s(i, this.sortdirection) } this._oldsortinfo = { column: i, direction: this.sortdirection }, this.sortdirection && e.each(this.columns.records, function (s, r) { var o = e.data(document.body, "groupsortelements" + this.displayfield); null == i || this.displayfield != i ? (e(this.sortasc).hide(), e(this.sortdesc).hide(), null != o && (o.sortasc.hide(), o.sortdesc.hide())) : t.sortdirection.ascending ? (e(this.sortasc).show(), e(this.sortdesc).hide(), null != o && (o.sortasc.show(), o.sortdesc.hide())) : (e(this.sortasc).hide(), e(this.sortdesc).show(), null != o && (o.sortasc.hide(), o.sortdesc.show())) }) }, getsortcolumn: function () { return void 0 != this.sortcolumn ? this.sortcolumn : null }, removesort: function () { this.sortby(null) }, sortby: function (e, t, i, s, r) { if (this._loading && !1 !== r) throw new Error("jqxGrid: " + this.loadingerrormessage); if (null == e && (t = null, e = this.sortcolumn), void 0 != e) { var o = this.that; if (void 0 == i && null != o.source.sortcomparer && (i = o.source.sortcomparer), ascending = "a" == t || "asc" == t || "ascending" == t || 1 == t, o.sortdirection = null != t ? { ascending: ascending, descending: !ascending } : { ascending: !1, descending: !1 }, o.sortcolumn = null != t ? e : null, o.source.sort || o.virtualmode) { if (o.dataview.sortfield = e, o.dataview.sortfielddirection = null == t ? "" : ascending ? "asc" : "desc", o.source.sort && !this._loading) return o.source.sort(e, t), void o._raiseEvent(6, { sortinformation: o.getsortinformation() }) } else o.dataview.sortby(e, t, i); if (!1 === s) return; o.groupable && o.groups.length > 0 ? (o._render(!0, !1, !1), o._updategroupheadersbounds && o.showgroupsheader && o._updategroupheadersbounds()) : (o.pageable && o.dataview.updateview(), o._updaterowsproperties(), o.rendergridcontent(!0)), o._raiseEvent(6, { sortinformation: o.getsortinformation() }) } }, _togglesort: function (e) { var t = this.that; if (!this.disabled && e.sortable && t.sortable) { var i = t.getsortinformation(), s = null; null != i.sortcolumn && i.sortcolumn == e.displayfield ? (s = i.sortdirection.ascending, s = t.sorttogglestates > 1 ? 1 != s && null : !s) : s = !0, t.sortby(e.displayfield, s, null) } } }) }(jQuery), function (e) { e.extend(e.jqx._jqxGrid.prototype, { _updatefilterrowui: function (t) { for (var i = this.columns.records.length, s = 0, r = this, o = 0; o < i; o++) { var a = this.columns.records[o], n = a.width; n < a.minwidth && (n = a.minwidth), n > a.maxwidth && (n = a.maxwidth); var l = e(this.filterrow[0].cells[o]); l.css("left", s); var h = !0; if (l.width() == n && (h = !1), t && (h = !0), l.width(n), l[0].left = s, a.hidden && a.hideable ? l.css("display", "none") : s += n, h) if (a.createfilterwidget && "custom" == a.filtertype) a.createfilterwidget(a, l); else if (a.filterable) { var d = function (t, i) { var s = e(i.children()[0]); s.width(n - 10), s.attr("disabled", t.disabled) }; switch (a.filtertype) { case "number": e(l.children()[0]).width(n), l.find("input").width(n - 30), l.find("input").attr("disabled", r.disabled), e(l.find(".jqx-dropdownlist-state-normal")).jqxDropDownList({ disabled: r.disabled }); break; case "date": this.host.jqxDateTimeInput ? e(l.children()[0]).jqxDateTimeInput({ disabled: r.disabled, width: n - 10 }) : d(this, l); break; case "textbox": case "default": d(this, l); break; case "list": case "checkedlist": this.host.jqxDropDownList ? e(l.children()[0]).jqxDropDownList({ disabled: r.disabled, width: n - 10 }) : d(this, l); break; case "bool": case "boolean": this.host.jqxCheckBox ? e(l.children()[0]).jqxCheckBox({ disabled: r.disabled }) : d(this, l) } } } var c = e(this.filterrow.children()[0]); c.width(parseInt(s) + 2), c.height(this.filterrowheight) }, clearfilterrow: function (t) { if (this._disablefilterrow = !0, this.columns.records) { for (var i = this.columns.records.length, s = 0; s < i; s++) { var r = this.columns.records[s], o = e(this.filterrow[0].cells[s]); if (("string" != typeof t || r.displayfield == t) && r.filterable) { var a = function (t, i) { var s = e(i.children()[0]); s.val(""), s[0] && (t["_oldWriteText" + s[0].id] = "") }; switch (r.filtertype) { case "number": o.find("input").val(""); break; case "date": this.host.jqxDateTimeInput ? e(o.children()[0]).jqxDateTimeInput("setDate", null) : a(this, o); break; case "textbox": case "default": a(this, o); break; case "list": this.host.jqxDropDownList ? e(o.children()[0]).jqxDropDownList("clearSelection") : a(this, o); break; case "checkedlist": this.host.jqxDropDownList ? e(o.children()[0]).jqxDropDownList("checkAll", !1) : a(this, o); break; case "bool": case "boolean": this.host.jqxCheckBox ? e(o.children()[0]).jqxCheckBox({ checked: null }) : a(this, o) } } } this._disablefilterrow = !1 } }, _applyfilterfromfilterrow: function () { if (1 != this._disablefilterrow && !this.disabled) { for (var t = this.columns.records.length, i = this.that, s = 0; s < t; s++) { var r = new e.jqx.filter, o = this.columns.records[s]; if (o.filterable && null !== o.datafield) { var a = i._getcolumntypebydatafield(o), n = i._getfiltertype(a), l = !0, h = (o.filtertype, function (e, t, s) { var r = !0; if (e._filterwidget) { var o = e._filterwidget.val(); if ("" != o) { a = "equal"; if ("stringfilter" == t) var a = "contains"; if ("numericfilter" == t && "," == i.gridlocalization.decimalseparator && o.indexOf(i.gridlocalization.decimalseparator) >= 0 && (o = o.replace(i.gridlocalization.decimalseparator, ".")), "stringfilter" != t) { var n = 0; if (-1 != o.indexOf(">") && (a = "greater_than", n = 1), -1 != o.indexOf("<") && (a = "less_than", n = 1), -1 != o.indexOf("=") && ("greater_than" == a ? (a = "greater_than_or_equal", n = 2) : "less_than" == a ? (a = "less_than_or_equal", n = 2) : (a = "equal", n = 1)), 0 != n && (o = o.substring(n)).length < 1) return !1 } if (void 0 != e.filtercondition && (a = e.filtercondition), "datefilter" == t) l = s.createfilter(t, o, a, null, e.cellsformat, i.gridlocalization); else var l = s.createfilter(t, o, a); s.addfilter(1, l) } else r = !1 } return r }); switch (o.filtertype) { case "date": if (o._filterwidget.jqxDateTimeInput) if (null != (g = o._filterwidget.jqxDateTimeInput("getRange")) && null != g.from && null != g.to) { var d = "GREATER_THAN_OR_EQUAL", c = new Date(0); c.setHours(0), c.setFullYear(g.from.getFullYear(), g.from.getMonth(), g.from.getDate()); var u = new Date(0); u.setHours(0), u.setFullYear(g.to.getFullYear(), g.to.getMonth(), g.to.getDate()), u.setHours(g.to.getHours()), u.setMinutes(g.to.getMinutes()), u.setSeconds(g.to.getSeconds()); var p = r.createfilter(n, c, d); r.addfilter(0, p); var m = r.createfilter(n, u, "LESS_THAN_OR_EQUAL"); r.addfilter(0, m) } else l = !1; else l = h(o, n, r); break; case "number": if (o._filterwidget) { var g = o._filterwidget.find("input").val(); "," == i.gridlocalization.decimalseparator && g.indexOf(i.gridlocalization.decimalseparator) >= 0 && (g = g.replace(i.gridlocalization.decimalseparator, ".")); var f = o._filterwidget.find(".filter").jqxDropDownList("selectedIndex"), v = r.getoperatorsbyfiltertype(n)[f]; if (i.updatefilterconditions) { var x = i.updatefilterconditions(n, r.getoperatorsbyfiltertype(n)); void 0 != x && r.setoperatorsbyfiltertype(n, x); v = r.getoperatorsbyfiltertype(n)[f] } var w = "NULL" == v || "NOT_NULL" == v, b = "EMPTY" == v || "NOT_EMPTY" == v; void 0 != g && g.length > 0 || w || b ? (p = r.createfilter(n, new Number(g), v, null, o.cellsformat, i.gridlocalization), r.addfilter(0, p)) : l = !1 } else l = !1; break; case "textbox": case "default": l = h(o, n, r); break; case "bool": case "boolean": if (o._filterwidget.jqxCheckBox) if (null != (g = o._filterwidget.jqxCheckBox("checked"))) { var d = "equal", _ = r.createfilter(n, g, d); r.addfilter(1, _) } else l = !1; else l = h(o, n, r); break; case "list": if ((y = o._filterwidget.jqxDropDownList("listBox")).selectedIndex > 0) { d = "equal"; "" === (g = y.getItem(y.selectedIndex).label) && (d = "NULL"); _ = r.createfilter(n, g, d); r.addfilter(1, _) } else l = !1; break; case "checkedlist": if (o._filterwidget.jqxDropDownList) { var y = o._filterwidget.jqxDropDownList("listBox"), j = y.getCheckedItems(); if (0 == j.length) { for (q = 1; q < y.items.length; q++) { d = "not_equal"; "" === (g = y.items[q].label) && (d = "NULL"); _ = r.createfilter(n, g, d); r.addfilter(0, _) } l = !0 } else if (j.length != y.items.length) for (var q = 0; q < j.length; q++) { d = "equal"; "" === (g = j[q].label) && (d = "NULL"); _ = r.createfilter(n, g, d); r.addfilter(1, _) } else l = !1 } else l = h(o, n, r) } this._loading || (l ? this.addfilter(o.displayfield, r, !1) : this.removefilter(o.displayfield, !1)) } } this._loading || this.applyfilters("filterrow") } }, _updatefilterrow: function () { var t = e('<div style="position: relative;" id="row00' + this.element.id + '"></div>'), i = 0, s = this.columns.records.length, r = this.toThemeProperty("jqx-grid-cell"); r += " " + this.toThemeProperty("jqx-grid-cell-pinned"), r += " " + this.toThemeProperty("jqx-grid-cell-filter-row"); var o = s + 10, a = new Array, n = this.that; this.filterrow[0].cells = a, t.height(this.filterrowheight), this.filterrow.children().detach(), this.filterrow.append(t), this._filterrowcache || (this._filterrowcache = new Array), this._initcolumntypes(); for (var l = !1, h = new Array, d = 0; d < s; d++) { var c = this.columns.records[d], u = c.width; u < c.minwidth && (u = c.minwidth), u > c.maxwidth && (u = c.maxwidth); var p = e('<div style="overflow: hidden; position: absolute; height: 100%;" class="' + r + '"></div>'); t.append(p), p.css("left", i), this.rtl ? (p.css("z-index", o++), p.css("border-left-width", "1px")) : p.css("z-index", o--), p[0].style.width = parseFloat(u) + "px", p[0].left = i, c.hidden && c.hideable ? p.css("display", "none") : i += u, a[a.length] = p[0]; var m = !0; if (this.rtl) { if (this.groupable) { g = this.showrowdetailscolumn && this.rowdetails ? 1 : 0; this.groups.length + g + d > s - 1 && (m = !1) } this.showrowdetailscolumn && this.rowdetails && d == s - 1 && (m = !1) } else { if (this.groupable) { var g = this.showrowdetailscolumn && this.rowdetails ? 1 : 0; this.groups.length + g > d && (m = !1) } this.showrowdetailscolumn && this.rowdetails && 0 == d && (m = !1) } if (m) if ("custom" == c.filtertype && c.createfilterwidget) { c.createfilterwidget(c, p, function () { n._applyfilterfromfilterrow() }) } else c.filterable && (this._filterrowcache[c.datafield] ? (l = !0, p.append(this._filterrowcache[c.datafield]), c._filterwidget = this._filterrowcache[c.datafield]) : (this._addfilterwidget(c, p, u), h[c.datafield] = c._filterwidget)) } this._filterrowcache = h, e.jqx.browser.msie && e.jqx.browser.version < 8 && t.css("z-index", o--), t.width(parseFloat(i) + 2), this.filterrow.addClass(r), this.filterrow.css("border-top-width", "1px"), this.filterrow.css("border-right-width", "0px"), l && this._updatefilterrowui(!0) }, _addfilterwidget: function (t, i, s) { for (var r = this.that, o = "", a = 0; a < r.dataview.filters.length; a++) { var n = r.dataview.filters[a]; if (n.datafield && n.datafield == t.datafield) { o = n.filter.getfilters()[0].value; break } } var l = function (i, r) { var a = e('<input autocomplete="off" type="textarea"/>'); a[0].id = e.jqx.utilities.createId(), a.addClass(i.toThemeProperty("jqx-widget")), a.addClass(i.toThemeProperty("jqx-input")), a.addClass(i.toThemeProperty("jqx-rc-all")), a.addClass(i.toThemeProperty("jqx-widget-content")), i.rtl && a.css("direction", "rtl"), i.disabled && a.attr("disabled", !0), a.attr("disabled", !1), a.appendTo(r), a.width(s - 10), a.height(i.filterrowheight - 10), a.css("margin", "4px"), t.createfilterwidget && t.createfilterwidget(t, r, a), t._filterwidget = a, a.focus(function () { return i.content[0].scrollLeft = 0, setTimeout(function () { i.content[0].scrollLeft = 0 }, 10), i.focusedfilter = a, a.addClass(i.toThemeProperty("jqx-fill-state-focus")), !1 }), a.blur(function () { a.removeClass(i.toThemeProperty("jqx-fill-state-focus")) }), a.keydown(function (e) { "13" == e.keyCode && i._applyfilterfromfilterrow(), a[0]._writeTimer && clearTimeout(a[0]._writeTimer), a[0]._writeTimer = setTimeout(function () { i._loading || i["_oldWriteText" + a[0].id] != a.val() && (i._applyfilterfromfilterrow(), i["_oldWriteText" + a[0].id] = a.val()) }, 800), i.focusedfilter = a }), i.host.removeClass("jqx-disableselect"), i.content.removeClass("jqx-disableselect"), a.val(o) }; switch (null != t.datatype && ("number" == t.filtertype && ("string" != t.datatype && "date" != t.datatype && "bool" != t.datatype || (t.filtertype = "textbox")), "date" == t.filtertype && ("string" != t.datatype && "number" != t.datatype && "bool" != t.datatype || (t.filtertype = "textbox")), "bool" == t.filtertype && ("string" != t.datatype && "number" != t.datatype && "date" != t.datatype || (t.filtertype = "textbox"))), t.filtertype) { case "number": var h = e("<div></div>"); h.width(i.width()), h.height(this.filterrowheight), i.append(h); !function (t, i, s) { var a = e('<input style="float: left;" autocomplete="off" type="textarea"/>'); r.rtl && (a.css("float", "right"), a.css("direction", "rtl")), a[0].id = e.jqx.utilities.createId(), a.addClass(r.toThemeProperty("jqx-widget")), a.addClass(r.toThemeProperty("jqx-input")), a.addClass(r.toThemeProperty("jqx-rc-all")), a.addClass(r.toThemeProperty("jqx-widget-content")), a.appendTo(t), a.width(i - 10), r.disabled && a.attr("disabled", !0), a.attr("disabled", !1), a.height(r.filterrowheight - 10), a.css("margin", "4px"), a.css("margin-right", "2px"), a.focus(function () { r.focusedfilter = a, a.addClass(r.toThemeProperty("jqx-fill-state-focus")) }), a.blur(function () { a.removeClass(r.toThemeProperty("jqx-fill-state-focus")) }), a.keydown(function (e) { "13" == e.keyCode && r._applyfilterfromfilterrow(), a[0]._writeTimer && clearTimeout(a[0]._writeTimer), a[0]._writeTimer = setTimeout(function () { r._loading || r["_oldWriteText" + a[0].id] != a.val() && (r._applyfilterfromfilterrow(), r["_oldWriteText" + a[0].id] = a.val()) }, 800), r.focusedfilter = a }), a.val(o) }(h, s = i.width() - 20); var d = r._getfiltersbytype("number"); (x = e("<div class='filter' style='float: left;'></div>")).css("margin-top", "4px"), x.appendTo(h), r.rtl && x.css("float", "right"); var c = 0; if (null != t.filtercondition) { var u = d.indexOf(t.filtercondition); -1 != u && (c = u) } x.jqxDropDownList({ disabled: r.disabled, touchMode: r.touchmode, rtl: r.rtl, dropDownHorizontalAlignment: "right", enableBrowserBoundsDetection: !0, selectedIndex: c, width: 18, height: 21, dropDownHeight: 150, dropDownWidth: 170, source: d, theme: r.theme }), x.jqxDropDownList({ selectionRenderer: function (e) { return "" } }), x.jqxDropDownList("setContent", ""), x.find(".jqx-dropdownlist-content").hide(), t.createfilterwidget && t.createfilterwidget(t, i, h), t._filterwidget = h; var p = null; this.addHandler(x, "select", function () { var e = x.jqxDropDownList("getSelectedItem").label; t._filterwidget.find("input").val().length > 0 && !r.refreshingfilter ? r._applyfilterfromfilterrow() : 0 != t._filterwidget.find("input").val().length || r.refreshingfilter || "null" != p && "not null" != p && "null" != e && "not null" != e || r._applyfilterfromfilterrow(), p = e }); break; case "textbox": case "default": default: l(this, i); break; case "none": break; case "date": if (this.host.jqxDateTimeInput) { var m = e("<div></div>"); m.css("margin", "4px"), m.appendTo(i); var g = { calendar: this.gridlocalization, todayString: this.gridlocalization.todaystring, clearString: this.gridlocalization.clearstring }; m.jqxDateTimeInput({ disabled: r.disabled, localization: g, rtl: r.rtl, showFooter: !0, formatString: t.cellsformat, selectionMode: "range", value: null, theme: this.theme, width: s - 10, height: this.filterrowheight - 10 }), t.createfilterwidget && t.createfilterwidget(t, i, m), t._filterwidget = m, this.addHandler(m, "valuechanged", function (e) { r.refreshingfilter || (r._applyfilterfromfilterrow(), r.focusedfilter = null) }) } else l(this, i); break; case "list": case "checkedlist": if (this.host.jqxDropDownList) { var f = this._getfilterdataadapter(t), v = !1, x = e("<div></div>"); x.css("margin", "4px"); var w = t.datafield, b = "checkedlist" == t.filtertype, _ = s < 150 ? 220 : "auto"; f.dataBind(); var y = f.records.length < 8; v = y, x.appendTo(i), x.jqxDropDownList({ disabled: r.disabled, touchMode: r.touchmode, rtl: r.rtl, checkboxes: b, dropDownWidth: _, source: f.records, autoDropDownHeight: y, theme: this.theme, width: s - 10, height: this.filterrowheight - 10, displayMember: t.displayfield, valueMember: w }); var j = x.jqxDropDownList("listBox"); if (b) { x.jqxDropDownList({ selectionRenderer: function () { return '<span class="' + r.toThemeProperty("jqx-item") + '" style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">' + r.gridlocalization.filterselectstring + "</span>" } }); var q = e('<span style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">' + r.gridlocalization.filterselectstring + "</span>"); if (q.addClass(this.toThemeProperty("jqx-item")), void 0 != j) { v || j.host.height(200), j.insertAt(r.gridlocalization.filterselectallstring, 0), x.jqxDropDownList("setContent", q); var T = !0; new Array; j.checkAll(!1), r.addHandler(j.host, "checkChange", function (e) { if (x[0]._selectionChanged = !0, T) if (e.args.label != r.gridlocalization.filterselectallstring) { T = !1, j.host.jqxListBox("checkIndex", 0, !0, !1); var t = j.host.jqxListBox("getCheckedItems"), i = j.host.jqxListBox("getItems"); 1 == t.length ? j.host.jqxListBox("uncheckIndex", 0, !0, !1) : i.length != t.length && j.host.jqxListBox("indeterminateIndex", 0, !0, !1), T = !0 } else T = !1, e.args.checked ? j.host.jqxListBox("checkAll", !1) : j.host.jqxListBox("uncheckAll", !1), T = !0 }) } } else j.insertAt({ label: this.gridlocalization.filterchoosestring, value: "" }, 0), x.jqxDropDownList({ selectedIndex: 0 }); t.createfilterwidget && t.createfilterwidget(t, i, x), t._filterwidget = x; x.jqxDropDownList("dropdownlistWrapper"); "list" == t.filtertype ? this.addHandler(x, "select", function (e) { r.refreshingfilter || e.args && "none" != e.args.type && (r._applyfilterfromfilterrow(), r.focusedfilter = null) }) : this.addHandler(x, "close", function (e) { x[0]._selectionChanged && (r._applyfilterfromfilterrow(), r.focusedfilter = null, x[0]._selectionChanged = !1) }) } else l(this, i); break; case "bool": case "boolean": if (this.host.jqxCheckBox) { var C = e('<div tabIndex=0 style="opacity: 0.99; position: absolute; top: 50%; left: 50%; margin-top: -7px; margin-left: -10px;"></div>'); C.appendTo(i), C.jqxCheckBox({ disabled: r.disabled, enableContainerClick: !1, animationShowDelay: 0, animationHideDelay: 0, hasThreeStates: !0, theme: this.theme, checked: null }), t.createfilterwidget && t.createfilterwidget(t, i, C), !0 === o || "true" == o ? C.jqxCheckBox({ checked: !0 }) : !1 !== o && "false" != o || C.jqxCheckBox({ checked: !1 }), t._filterwidget = C, this.addHandler(C, "change", function (e) { r.refreshingfilter || e.args && (r.focusedfilter = null, r._applyfilterfromfilterrow()) }) } else l(this, i) } }, _getfilterdataadapter: function (t) { if (!!this.source._source) { var i = { localdata: this.source.records, datatype: this.source.datatype, async: !1 }, s = this; dataadapter = new e.jqx.dataAdapter(i, { autoBind: !1, autoSort: !0, autoSortField: t.displayfield, async: !1, uniqueDataFields: [t.displayfield], beforeLoadComplete: function (e) { var i = new Array; if (t.cellsformat) { for (var r = s._getcolumntypebydatafield(t), o = 0; o < e.length; o++) { i.push(e[o]); var a = e[o][t.displayfield]; e[o][t.displayfield + "JQValue"] = a, "date" === r ? e[o][t.displayfield] = dataadapter.formatDate(a, t.cellsformat, s.gridlocalization) : "number" !== r && "float" !== r && "int" !== r || (e[o][t.displayfield] = dataadapter.formatNumber(a, t.cellsformat, s.gridlocalization)) } return i } return e } }) } else dataadapter = new e.jqx.dataAdapter(this.source, { autoBind: !1, uniqueDataFields: [t.displayfield], autoSort: !0, autoSortField: t.displayfield, async: !1 }); if (t.filteritems && t.filteritems.length > 0) { i = { localdata: t.filteritems, datatype: this.source.datatype, async: !1 }; dataadapter = new e.jqx.dataAdapter(i, { autoBind: !1, async: !1 }) } else if (t.filteritems) { if (t.filteritems._source) return t.filteritems._options.autoBind = !1, t.filteritems._options.async = !1, t.filteritems; if (e.isFunction(t.filteritems)) return t.filteritems() } return dataadapter }, refreshfilterrow: function () { if (this.showfilterrow) { this.refreshingfilter = !0, this._updatefilterrowui(), this._updatelistfilters(!0, !0); for (var t = this.that, i = this.columns.records.length, s = 0; s < i; s++) { var r = this.columns.records[s]; if (r.filterable && r.filter) { var o = r.filter.getfilters(); if (o.length > 0) { var a = o[0].value, n = r._filterwidget, l = r._filterwidget.parent(); if (null != n) switch (r.filtertype) { case "number": if (l.find("input").val(a), this.host.jqxDropDownList) { var h = r.filter.getoperatorsbyfiltertype("numericfilter"); n.find(".filter").jqxDropDownList("selectIndex", h.indexOf(o[0].condition)) } break; case "date": if (this.host.jqxDateTimeInput) { if (void 0 != (a = r.filter.getfilterat(0).filtervalue)) { if (r.filter.getfilterat(1)) var d = r.filter.getfilterat(1).filtervalue; else d = a; e(l.children()[0]).jqxDateTimeInput("setRange", new Date(a), new Date(d)) } } else n.val(a); break; case "textbox": case "default": n.val(a), t["_oldWriteText" + n[0].id] = a; break; case "bool": case "boolean": this.host.jqxCheckBox ? e(l.children()[0]).jqxCheckBox({ checked: a }) : n.val(a) } } } } this.refreshingfilter = !1 } }, _destroyedfilters: function () { this.that; for (var t = this.columns.records.length, i = 0; i < t; i++) { var s = this.columns.records[i]; if (s.filterable) { var r = s._filterwidget; if ("list" == s.filtertype || "checkedlist" == s.filtertype) this.removeHandler(r, "select"), this.removeHandler(r, "close"), r.jqxDropDownList("destroy"); else if ("date" == s.filtertype) this.removeHandler(r, "valuechanged"), r.jqxDateTimeInput("destroy"); else if ("bool" == s.filtertype) this.removeHandler(r, "change"), r.jqxCheckBox("destroy"); else if ("number" == s.filtertype) { var o = r.find(".jqx-input"); this.removeHandler(o, "keydown"), e(r.children()[1]).jqxDropDownList("destroy") } else this.removeHandler(r, "keydown"); r.remove() } } }, _updatelistfilters: function (t, i) { for (var s = this.that, r = this.columns.records.length, o = 0; o < r; o++) { var a = this.columns.records[o]; if (a.filterable && ("list" == a.filtertype || "checkedlist" == a.filtertype)) { var n = a._filterwidget; if (t) { var l = this._getfilterdataadapter(a); n.jqxDropDownList({ source: l }); var h = !0; if ((c = n.jqxDropDownList("getItems")).length != l.records.length + 1 && (h = !1), h) for (m = 1; m < c.length; m++) if (c[m].label != l.records[m - 1][a.displayfield]) { h = !1; break } if (h && !i) continue } else if (void 0 == a.filter) { n.jqxDropDownList("renderSelection"); continue } var d = "checkedlist" == a.filtertype, c = n.jqxDropDownList("getItems"), u = n.jqxDropDownList("listBox"); if (n.jqxDropDownList("dataBind"), d) { if (n.jqxDropDownList({ selectionRenderer: function () { return s.gridlocalization.filterselectstring } }), u.insertAt(this.gridlocalization.filterselectallstring, 0), n.jqxDropDownList("setContent", this.gridlocalization.filterselectstring), u.checkAll(!1), a.filter) { for (var p = a.filter.getfilters(), m = 0; m < u.items.length; m++) { var g = u.items[m].label, f = void 0; e.each(p, function () { var e; "NOT_EQUAL" == this.condition ? e = g != this.value : "EQUAL" == this.condition && (e = g == this.value), f = void 0 == f && void 0 !== e ? e : "EQUAL" == this.condition ? f || e : f && e }), f ? u.checkIndex(m, !1, !1) : u.uncheckIndex(m, !1, !1) } u._updateCheckedItems(); var v = u.getCheckedItems().length; u.items.length != v && v > 0 && u.host.jqxListBox("indeterminateIndex", 0, !0, !1) } } else if (u.insertAt({ label: this.gridlocalization.filterchoosestring, value: "" }, 0), n.jqxDropDownList({ selectedIndex: 0 }), a.filter) { for (var p = a.filter.getfilters(), x = -1, m = 0; m < u.items.length; m++) { g = u.items[m].label; e.each(p, function () { return "NOT_EQUAL" == this.condition || (g == this.value ? (x = m, !1) : void 0) }) } -1 != x && u.selectIndex(x) } c.length < 8 ? n.jqxDropDownList("autoDropDownHeight", !0) : n.jqxDropDownList("autoDropDownHeight", !1) } } }, _renderfiltercolumn: function () { var t = this.that; if (this.filterable) { if (!this.columns.records) return; e.each(this.columns.records, function (i, s) { var r = !1; t.autoshowfiltericon ? this.filter ? (e(this.filtericon).show(), r = !0) : e(this.filtericon).hide() : this.filterable && (e(this.filtericon).show(), r = !0), "right" != this.align || this.renderer || this.element && (this.element.firstChild.firstChild.style.marginRight = r ? "18px" : "2px") }) } }, _initcolumntypes: function () { if (this.columns && this.columns.records) { var t = this.source._source.datafields; if (t) for (var i = 0; i < this.columns.records.length; i++) { var s = this.columns.records[i]; if (!s.datatype) { var r = ""; e.each(t, function () { if (this.name == s.displayfield) return this.type && (r = this.type), !1 }), s.datatype = "" != r ? r : "" } } } }, _getcolumntypebydatafield: function (t) { var i = this.that, s = "string", r = i.source.datafields || (i.source._source ? i.source._source.datafields : null); if (r) { var o = ""; if (e.each(r, function () { if (this.name == t.displayfield) return this.type && (o = this.type), !1 }), o) return o } if (null != t) { if (void 0 == this.dataview.cachedrecords) return s; var a = null; if (this.virtualmode) e.each(this.dataview.cachedrecords, function () { return a = this[t.displayfield], !1 }); else { if (0 == this.dataview.cachedrecords.length) return s; if (null != (a = this.dataview.cachedrecords[0][t.displayfield]) && "" == a.toString()) return "string" } if (null != a) if ("boolean" == typeof a) s = "boolean"; else if (e.jqx.dataFormat.isNumber(a)) s = "number"; else { var n = new Date(a); if ("NaN" == n.toString() || "Invalid Date" == n.toString()) if (e.jqx.dataFormat) { if (null != (n = e.jqx.dataFormat.tryparsedate(a))) { if (n && n.getFullYear() && 1970 == n.getFullYear() && 0 == n.getMonth() && 1 == n.getDate()) { var l = new Number(a); return isNaN(l) ? "string" : "number" } return "date" } s = "string" } else s = "string"; else s = "date" } } return s }, _getfiltersbytype: function (e) { var t = this.that, i = ""; switch (e) { case "number": case "float": case "int": i = t.gridlocalization.filternumericcomparisonoperators; break; case "date": i = t.gridlocalization.filterdatecomparisonoperators; break; case "boolean": case "bool": i = t.gridlocalization.filterbooleancomparisonoperators; break; case "string": default: i = t.gridlocalization.filterstringcomparisonoperators } return i }, _getfiltertype: function (e) { var t = "stringfilter"; switch (e) { case "number": case "int": case "float": case "decimal": t = "numericfilter"; break; case "boolean": case "bool": t = "booleanfilter"; break; case "date": case "time": t = "datefilter"; break; case "string": t = "stringfilter" } return t }, _buildfilter: function (t, i, s) { var r = e(i).find("#filter1" + t.element.id), o = e(i).find("#filter2" + t.element.id), a = e(i).find("#filter3" + t.element.id), n = e(i).find(".filtertext1" + t.element.id), l = e(i).find(".filtertext2" + t.element.id), h = n.val(), d = l.val(), c = t._getcolumntypebydatafield(s), u = (t._getfiltersbytype(c), new e.jqx.filter), p = t._getfiltertype(c); if ("default" === t.filtermode) { var m = r.jqxDropDownList("selectedIndex"), g = o.jqxDropDownList("selectedIndex"), f = a.jqxDropDownList("selectedIndex"), v = null, x = null; if (t.updatefilterconditions) { var w = t.updatefilterconditions(p, u.getoperatorsbyfiltertype(p)); void 0 != w && u.setoperatorsbyfiltertype(p, w) } var b = !1, _ = u.getoperatorsbyfiltertype(p)[m], a = u.getoperatorsbyfiltertype(p)[f], y = "NULL" == _ || "NOT_NULL" == _, j = "EMPTY" == _ || "NOT_EMPTY" == _; void 0 == _ && (_ = u.getoperatorsbyfiltertype(p)[0]), void 0 == a && (a = u.getoperatorsbyfiltertype(p)[0]), (h.length > 0 || y || j) && (v = u.createfilter(p, h, _, null, s.cellsformat, t.gridlocalization), u.addfilter(g, v), b = !0); var q = "NULL" == a || "NOT_NULL" == a, T = "EMPTY" == a || "NOT_EMPTY" == a; if ((d.length > 0 || q || T) && (x = u.createfilter(p, d, a, null, s.cellsformat, t.gridlocalization), u.addfilter(g, x), b = !0), b) { z = s.displayfield; this.addfilter(z, u, !0) } else this._clearfilter(t, i, s) } else { var C = !1, S = r.data().jqxListBox.instance, k = S.getCheckedItems(); if (0 == k.length) { for (B = 1; B < S.items.length; B++) { var I = S.items[B].value, D = "not_equal", P = u.createfilter(p, I, D, null); u.addfilter(0, P) } C = !0 } else if (k.length != S.items.length) { C = !0; for (var B = 0; B < k.length; B++) if (t.gridlocalization.filterselectallstring !== k[B].value) { var I = k[B].value, D = "equal", P = u.createfilter(p, I, D, null); u.addfilter(1, P) } } else C = !1; if (C) { z = s.displayfield; this.addfilter(z, u, !0) } else { var z = s.displayfield; this.removefilter(z, !0) } } }, _clearfilter: function (e, t, i) { var s = i.displayfield; this.removefilter(s, !0) }, addfilter: function (e, t, i) { if (this._loading) throw new Error("jqxGrid: " + this.loadingerrormessage); var s = this.getcolumn(e), r = this._getcolumn(e); void 0 != s && null != s && (s.filter = t, r.filter = t, this.dataview.addfilter(e, t), 1 == i && void 0 != i && this.applyfilters("add")) }, removefilter: function (e, t) { if (this._loading) throw new Error("jqxGrid: " + this.loadingerrormessage); var i = this.getcolumn(e), s = this._getcolumn(e); void 0 != i && null != i && null != i.filter && (this.dataview.removefilter(e, i.filter), i.filter = null, s.filter = null, this.showfilterrow && this.clearfilterrow(e), 1 != t && !1 === t || this.applyfilters("remove")) }, applyfilters: function (t) { if (this.dataview.filters.length >= 0 && (this.virtualmode || !this.source.localdata) && null != this.source && this.source.filter) { var i = -1; this.pageable ? (i = this.dataview.pagenum, this.dataview.pagenum = 0) : (this.vScrollInstance.setPosition(0), this.loadondemand = !0, this._renderrows(this.virtualsizeinfo)), this.pageable && this.virtualmode && (this.dataview.pagenum = 0), this.source.filter(this.dataview.filters, this.dataview.records, this.dataview.records.length), this.pageable && !this.virtualmode && (this.dataview.pagenum = i) } if (this.dataview.clearsortdata && this.dataview.clearsortdata(), this.virtualmode) return this.pageable && (this.dataview.updateview(), this.gotopage && this.gotopage(0)), this.rendergridcontent(!1, !1), this.showfilterrow && "string" != typeof t && e.isEmptyObject(t) && this.refreshfilterrow(), void this._raiseEvent(13, { filters: this.dataview.filters }); this.selectedrowindexes, this.that; if (this.dataview.refresh(), this.dataview.clearsortdata && this.sortcolumn && this.sortdirection) { var s = this.sortdirection.ascending ? "asc" : "desc"; this._loading ? this.sortby(this.sortcolumn, s, null, !1, !1) : this.sortby(this.sortcolumn, s, null, !1) } this.pageable && (this.dataview.updateview(), this.gotopage && (this.gotopage(0), this.updatepagerdetails())), this._updaterowsproperties(), !this.groupable || this.groupable && 0 == this.groups.length ? (this._rowdetailscache = new Array, this.virtualsizeinfo = null, this._pagescache = new Array, this.columns && this.columns.records && this.columns.records.length > 0 && !this.columns.records[0].filtericon && (this.prerenderrequired = !0), this.rendergridcontent(!0, !1), this._updatecolumnwidths(), this._updatecellwidths(), this._renderrows(this.virtualsizeinfo), this.showaggregates && this._updatecolumnsaggregates && this._updatecolumnsaggregates()) : (this._rowdetailscache = new Array, this._render(!0, !0, !1, !1, !1), this.showfilterrow && this._updatefocusedfilter(), this._updatecolumnwidths(), this._updatecellwidths(), this._renderrows(this.virtualsizeinfo)), this.showfilterrow && "string" != typeof t && e.isEmptyObject(t) && this.refreshfilterrow(), this._raiseEvent(13, { filters: this.dataview.filters }) }, getfilterinformation: function () { for (var e = new Array, t = 0; t < this.dataview.filters.length; t++) { var i = this.getcolumn(this.dataview.filters[t].datafield); e[t] = { filter: this.dataview.filters[t].filter, filtercolumn: i.datafield, filtercolumntext: i.text } } return e }, clearfilters: function (t) { var i = this.that; if (this.showfilterrow && this.clearfilterrow(), this.columns.records) { var s = 1 == t || !1 !== t; e.each(this.columns.records, function () { i.removefilter(this.displayfield, !s) }) } !1 !== t && (1 != t && !1 === t || this.applyfilters("clear")) }, _destroyfilterpanel: function () { var t = e(e.find("#filterclearbutton" + this.element.id)), i = e(e.find("#filterbutton" + this.element.id)), s = e(e.find("#filter1" + this.element.id)), r = e(e.find("#filter2" + this.element.id)), o = e(e.find("#filter3" + this.element.id)), a = e(e.find(".filtertext1" + this.element.id)), n = e(e.find(".filtertext2" + this.element.id)); a.length > 0 && n.length > 0 && (a.removeClass(), n.removeClass(), a.remove(), n.remove()), t.length > 0 && (t.jqxButton("destroy"), i.jqxButton("destroy"), this.removeHandler(t, "click"), this.removeHandler(i, "click")), s.length > 0 && s.jqxDropDownList("destroy"), r.length > 0 && r.jqxDropDownList("destroy"), o.length > 0 && o.jqxDropDownList("destroy") }, _updatefilterpanel: function (t, i, s) { null != t && void 0 != t || (t = this); var r = t._getcolumntypebydatafield(s), o = t._getfiltersbytype(r); if (!t.host.jqxDropDownList) throw new Error("jqxGrid: Missing reference to jqxdropdownlist.js."); var a = e(i), n = a.find("#filterclearbutton" + t.element.id), l = a.find("#filterbutton" + t.element.id), h = a.find("#filter1" + t.element.id), d = a.find("#filter2" + t.element.id), c = a.find("#filter3" + t.element.id), u = a.find(".filtertext1" + t.element.id), p = a.find(".filtertext2" + t.element.id); if (this._hasdatefilter) { var m = u.parent(), g = p.parent(); if (m.children().remove(), g.children().remove(), "date" == s.filtertype) { t._showwhere.text(t.gridlocalization.filtershowrowdatestring); v = e("<div class='filtertext1" + t.element.id + "' style='margin-top: 3px; margin-bottom: 3px;'></div>"); m.append(v), (f = function (e) { var i = { calendar: t.gridlocalization, todayString: t.gridlocalization.todaystring, clearString: t.gridlocalization.clearstring }; e.jqxDateTimeInput({ disabled: t.disabled, localization: i, rtl: t.rtl, width: t._filterpanelwidth - 15, height: 20, value: null, formatString: s.cellsformat, theme: t.theme }) })(v); v = e("<div class='filtertext2" + t.element.id + "' style='margin-top: 3px; margin-bottom: 3px;'></div>"); g.append(v), f(v) } else { t._showwhere.text(t.gridlocalization.filtershowrowstring); v = e("<input class='filtertext1" + t.element.id + "' style='height: 20px; margin-top: 3px; margin-bottom: 3px;' type='text'></input>"); m.append(v); var f = function (e) { e.addClass(t.toThemeProperty("jqx-input")), e.addClass(t.toThemeProperty("jqx-widget-content")), e.addClass(t.toThemeProperty("jqx-rc-all")), e.width(t._filterpanelwidth - 15) }; f(v); var v = e("<input class='filtertext2" + t.element.id + "' style='height: 20px; margin-top: 3px; margin-bottom: 3px;' type='text'></input>"); g.append(v), f(v) } var u = a.find(".filtertext1" + t.element.id), p = a.find(".filtertext2" + t.element.id) } if (u.val(""), p.val(""), this.removeHandler(l, "click"), this.addHandler(l, "click", function () { t._buildfilter(t, i, s), t._closemenu() }), this.removeHandler(n, "click"), this.addHandler(n, "click", function () { t._clearfilter(t, i, s), t._closemenu() }), "default" === this.filtermode) { if (h.jqxDropDownList("source") != o && (h.jqxDropDownList({ enableBrowserBoundsDetection: !1, source: o }), c.jqxDropDownList({ enableBrowserBoundsDetection: !1, source: o })), "boolean" == r || "bool" == r) h.jqxDropDownList({ autoDropDownHeight: !0, selectedIndex: 0 }), c.jqxDropDownList({ autoDropDownHeight: !0, selectedIndex: 0 }); else { var x = !1; o && o.length && o.length < 5 && (x = !0), h.jqxDropDownList({ autoDropDownHeight: x, selectedIndex: 2 }), c.jqxDropDownList({ autoDropDownHeight: x, selectedIndex: 2 }) } d.jqxDropDownList({ selectedIndex: 0 }); var w = s.filter, b = new e.jqx.filter, _ = ""; switch (r) { case "number": case "int": case "float": case "decimal": _ = "numericfilter", y = b.getoperatorsbyfiltertype("numericfilter"); break; case "boolean": case "bool": _ = "booleanfilter", y = b.getoperatorsbyfiltertype("booleanfilter"); break; case "date": case "time": _ = "datefilter", y = b.getoperatorsbyfiltertype("datefilter"); break; case "string": _ = "stringfilter", y = b.getoperatorsbyfiltertype("stringfilter") } if (null != w) { var m = w.getfilterat(0), g = w.getfilterat(1); w.getoperatorat(0); if (t.updatefilterconditions) { var y = [], j = t.updatefilterconditions(_, y); if (void 0 != j) { for (var q = 0; q < j.length; q++) j[q] = j[q].toUpperCase(); w.setoperatorsbyfiltertype(_, j), y = j } } var T = "default"; if (null != m) { var C = y.indexOf(m.comparisonoperator), S = m.filtervalue; u.val(S), h.jqxDropDownList({ selectedIndex: C, animationType: T }) } if (null != g) { var k = y.indexOf(g.comparisonoperator), I = g.filtervalue; p.val(I), c.jqxDropDownList({ selectedIndex: k, animationType: T }) } void 0 == w.getoperatorat(0) ? d.jqxDropDownList({ selectedIndex: 0, animationType: T }) : "and" == w.getoperatorat(0) || 0 == w.getoperatorat(0) ? d.jqxDropDownList({ selectedIndex: 0 }) : d.jqxDropDownList({ selectedIndex: 1 }) } t.updatefilterpanel && t.updatefilterpanel(h, c, d, u, p, l, n, w, _, y), (!this._hasdatefilter || this._hasdatefilter && "date" != s.filtertype) && (u.focus(), setTimeout(function () { u.focus() }, 10)) } else { var D = t._getfilterdataadapter(s), _ = t._getfiltertype(r); s.cellsformat ? h.jqxListBox({ displayMember: s.displayfield, valueMember: s.displayfield + "JQValue", source: D }) : h.jqxListBox({ displayMember: s.displayfield, valueMember: s.displayfield, source: D }), h.jqxListBox("insertAt", t.gridlocalization.filterselectallstring, 0); var P = h.data().jqxListBox.instance; P.checkAll(!1); if (s.filter) { P.uncheckAll(!1); for (var B = s.filter.getfilters(), z = 0; z < P.items.length; z++) { var H = P.items[z].value; e.each(B, function () { if ("NOT_EQUAL" == this.condition) { if (H != this.value) return P.uncheckIndex(z, !1, !1), !1 } else if ("EQUAL" == this.condition && H == this.value) return P.checkIndex(z, !1, !1), !1 }) } P._updateCheckedItems(); var M = P.getCheckedItems().length; P.items.length != M && M > 0 && P.host.jqxListBox("indeterminateIndex", 0, !0, !1), M === P.items.length - 1 && P.host.jqxListBox("checkIndex", 0, !0, !1) } } }, _initfilterpanel: function (t, i, s, r) { null != t && void 0 != t || (t = this), i[0].innerHTML = ""; var o = e("<div class='filter' style='margin-left: 7px;'></div>"); i.append(o); var a = e("<div class='filter' style='margin-top: 3px; margin-bottom: 3px;'></div>"); a.text(t.gridlocalization.filtershowrowstring), this._showwhere = a; var n = e("<div class='filter' id='filter1" + t.element.id + "'></div>"), l = e("<div class='filter' id='filter2" + t.element.id + "' style='margin-bottom: 3px;'></div>"), h = e("<div class='filter' id='filter3" + t.element.id + "'></div>"), d = t._getcolumntypebydatafield(s); if (!n.jqxDropDownList) throw new Error("jqxGrid: jqxdropdownlist.js is not loaded."); var c = t._getfiltersbytype(d); if (this._hasdatefilter = !1, this._filterpanelwidth = r, this.columns && this.columns.records) for (var u = 0; u < this.columns.records.length; u++) if ("date" == this.columns.records[u].filtertype) { this._hasdatefilter = !0; break } var p = e("<div class='filter'><input class='filtertext1" + t.element.id + "' style='height: 20px; margin-top: 3px; margin-bottom: 3px;' type='text'></input></div>"), m = p.find("input"); m.addClass(this.toThemeProperty("jqx-input")), m.addClass(this.toThemeProperty("jqx-widget-content")), m.addClass(this.toThemeProperty("jqx-rc-all")), m.width(r - 15); var g = e("<div class='filter'><input class='filtertext2" + t.element.id + "' style='height: 20px; margin-top: 3px;' type='text'></input></div>"), f = g.find("input"); f.addClass(this.toThemeProperty("jqx-input")), f.addClass(this.toThemeProperty("jqx-widget-content")), f.addClass(this.toThemeProperty("jqx-rc-all")), f.width(r - 15), t.rtl && (m.css("direction", "rtl"), f.css("direction", "rtl")); var v = e("<div class='filter' style='height: 25px; margin-left: 20px; margin-top: 7px;'></div>"), x = e('<span tabIndex=0 id="filterbutton' + t.element.id + '" class="filterbutton" style="padding: 4px 12px; margin-left: 2px;">' + t.gridlocalization.filterstring + "</span>"); v.append(x); var w = e('<span tabIndex=0 id="filterclearbutton' + t.element.id + '" class="filterclearbutton" style="padding: 4px 12px; margin-left: 5px;">' + t.gridlocalization.filterclearstring + "</span>"); v.append(w), x.jqxButton({ height: 20, theme: t.theme }), w.jqxButton({ height: 20, theme: t.theme }); var b = function (e) { if (e) { if (-1 != e.text().indexOf("case sensitive")) { var i = e.text(); i = i.replace("case sensitive", "match case"), e.text(i) } return e.css("font-family", t.host.css("font-family")), e.css("font-size", t.host.css("font-size")), e.css("top", "1px"), e.css("position", "relative"), e } return "" }; if ("default" === this.filtermode) { o.append(a), o.append(n), n.jqxDropDownList({ _checkForHiddenParent: !1, rtl: t.rtl, enableBrowserBoundsDetection: !1, selectedIndex: 2, width: r - 15, height: 20, dropDownHeight: 150, dropDownWidth: r - 15, selectionRenderer: b, source: c, theme: t.theme }), o.append(p); var _ = new Array; _[0] = t.gridlocalization.filterandconditionstring, _[1] = t.gridlocalization.filterorconditionstring, l.jqxDropDownList({ _checkForHiddenParent: !1, rtl: t.rtl, enableBrowserBoundsDetection: !1, autoDropDownHeight: !0, selectedIndex: 0, width: 60, height: 20, source: _, selectionRenderer: b, theme: t.theme }), o.append(l), h.jqxDropDownList({ _checkForHiddenParent: !1, rtl: t.rtl, enableBrowserBoundsDetection: !1, selectedIndex: 2, width: r - 15, height: 20, dropDownHeight: 150, dropDownWidth: r - 15, selectionRenderer: b, source: c, theme: t.theme }), o.append(h), o.append(g) } else { o.append(a), o.append(n), n.jqxListBox({ rtl: t.rtl, _checkForHiddenParent: !1, checkboxes: !0, selectedIndex: 2, width: r - 15, height: 120, theme: t.theme }); var y = !0; t.addHandler(n, "checkChange", function (e) { if (y) if (e.args.label != t.gridlocalization.filterselectallstring) { y = !1, n.jqxListBox("checkIndex", 0, !0, !1); var i = n.jqxListBox("getCheckedItems"), s = n.jqxListBox("getItems"); 1 == i.length ? n.jqxListBox("uncheckIndex", 0, !0, !1) : s.length != i.length && n.jqxListBox("indeterminateIndex", 0, !0, !1), y = !0 } else y = !1, e.args.checked ? n.jqxListBox("checkAll", !1) : n.jqxListBox("uncheckAll", !1), y = !0 }) } o.append(v), t.updatefilterpanel && t.updatefilterpanel(n, h, l, p, g, x, w, null, null, c) } }) }(jQuery), function (e) { e.jqx.dataview.grouping = function () { this.loadgrouprecords = function (t, i, s, r, o, a, n, l, h) { for (var d = t, c = this, u = new Array, p = 0; p < c.groups.length; p++) u[p] = c.generatekey(); var m = new Array, g = 0, u = u, f = new Array, v = i, x = i, w = c.groups.length; this.loadedrecords = new Array, this.bounditems = new Array, this.loadedrecords = new Array, this.loadedrootgroups = new Array, this.loadedgroups = new Array, this.loadedgroupsByKey = new Array, this.sortedgroups = new Array; var b = null != this.sortdata, _ = b ? this.sortdata : this.records; if (this.pageable) { var y = Object.prototype.toString, j = this.groups[0]; if (Object.prototype.toString = "function" == typeof j ? j : function () { return this[j] }, b) { var q = this.sortfield; Object.prototype.toString = "function" == typeof j ? j : function () { return this[j] + " " + this[q] } } var T = new Array, C = 0; e.each(_, function () { T[i + C++] = this }), _ = T, b ? _.sort(function (t, i) { var t = t.value, i = i.value; if (void 0 === t && (t = null), void 0 === i && (i = null), null === t && null === i) return 0; if (null === t && null !== i) return 1; if (null !== t && null === i) return -1; if (e.jqx.dataFormat.isNumber(t) && e.jqx.dataFormat.isNumber(i)) return t < i ? -1 : t > i ? 1 : 0; if (e.jqx.dataFormat.isDate(t) && e.jqx.dataFormat.isDate(i)) return t < i ? -1 : t > i ? 1 : 0; e.jqx.dataFormat.isNumber(t) || e.jqx.dataFormat.isNumber(i) || (t = String(t).toLowerCase(), i = String(i).toLowerCase()); try { if (t < i) return -1; if (t > i) return 1 } catch (e) { } return 0 }) : _.sort(function (t, i) { if (void 0 === t && (t = null), void 0 === i && (i = null), null === t && null === i) return 0; if (null === t && null !== i) return 1; if (null !== t && null === i) return -1; if (t = t.toString(), i = i.toString(), e.jqx.dataFormat.isNumber(t) && e.jqx.dataFormat.isNumber(i)) return t < i ? -1 : t > i ? 1 : 0; if (e.jqx.dataFormat.isDate(t) && e.jqx.dataFormat.isDate(i)) return t < i ? -1 : t > i ? 1 : 0; e.jqx.dataFormat.isNumber(t) || e.jqx.dataFormat.isNumber(i) || (t = String(t).toLowerCase(), i = String(i).toLowerCase()); try { if (t < i) return -1; if (t > i) return 1 } catch (e) { } return 0 }), Object.prototype.toString = y } if (this.virtualmode) { for (var T = new Array, C = 0, v = 0; v < s - i; v++) T[i + C++] = _[v]; v = 0, _ = T } for (var S = i; S < s; S++) { var k = {}; k = b ? e.extend({}, _[S].value) : e.extend({}, _[S]), id = k[c.uniqueId], (o >= l || id != n[o][c.uniqueId] || a && a[id]) && (h[h.length] = o); for (var I = new Array, D = 0, p = 0; p < w; p++) { var P = k[F = c.groups[p]]; null == P && (P = ""), I[D++] = { value: P, hash: u[p] } } if (I.length != w) break; for (var B = null, z = "", H = -1, M = 0; M < I.length; M++) { H++; var E = I[M].value; if (z = z + "_" + I[M].hash + "_" + E, void 0 == f[z] || null == f[z]) { if (null == B) B = { group: E, subItems: new Array, subGroups: new Array, level: 0 }, m[g++] = B, B.uniqueid = c.generatekey(), c.loadedgroupsByKey[E] = B; else { var A = { group: E, subItems: new Array, subGroups: new Array, parentItem: B, level: B.level + 1 }; c.loadedgroupsByKey[B.uniqueid + "_" + E] = A, A.uniqueid = c.generatekey(), B.subGroups[B.subGroups.length++] = A, B = A } f[z] = B } else B = f[z] } null != B ? (k.uid || (k.uid = this.getid(this.source.id, k, v)), b ? (k.boundindex = _[S].index, this.recordsbyid["id" + k.uid] = _[S].value) : (k.boundindex = v, this.recordsbyid["id" + k.uid] = _[S]), this.bounditems[k.boundindex] = k, this.sortedgroups[v] = k, k.uniqueid = c.generatekey(), k.parentItem = B, k.level = B.level + 1, B.subItems[B.subItems.length++] = k) : (k.uid || (k.uid = this.getid(this.source.id, k, v)), b ? (k.boundindex = _[S].index, this.recordsbyid["id" + k.uid] = _[S].value) : (k.boundindex = v, this.recordsbyid["id" + k.uid] = _[S]), this.sortedgroups[v] = k, this.bounditems[k.boundindex] = k, k.uniqueid = c.generatekey()), o++, v++, x++ } var L = function (e, i, s) { for (var r = 0; r < i.subItems.length; r++) i.subItems[r].visibleindex = t + s, e.rows[s] = i.subItems[r], e.loadedrecords[s] = i.subItems[r], s++; return s }, O = function (e, i, s) { var r = function (i) { if (1 == e.aggregates) { var r = i, o = {}; null != r && (o.level = r.level, o.visibleindex = t + s, o.uniqueid = e.generatekey(), e.rows[s] = o, e.loadedrecords[s++] = o, o.totalsrow = !0, i.subItems.length > 0 ? (r = i.subItems[i.subItems.length - 1], o.parentItem = r.parentItem, o.parentItem.subItems && (o.parentItem.subItems[o.parentItem.subItems.length] = o)) : i.subGroups.length > 0 && (r = i.subGroups[i.subGroups.length - 1], o.level = r.level, o.parentItem = i, i.subGroups[i.subGroups.length] = o)) } }; for (subGroup in i.subGroups) { var o = i.subGroups[subGroup]; o.subGroups && (e.loadedgroups[e.loadedgroups.length] = o, o.visibleindex = t + s, e.rows[s] = o, e.loadedrecords[s] = o, s++, o.subGroups.length > 0 ? s = O(e, o, s) : o.subItems.length > 0 && (s = L(e, o, s)), r(o)) } return i.subItems.length > 0 && (s = L(e, i, s)), r(i), s }, N = m.length; this.loadedgroups = new Array, this.rows = new Array; for (var d = 0, v = 0; v < N; v++) { var F = m[v]; this.loadedrootgroups[v] = F, this.loadedgroups[this.loadedgroups.length] = F, F.visibleindex = t + d, this.rows[d] = F, this.loadedrecords[d] = F, d = O(this, F, ++d) } return d }, this._updategroupsinpage = function (t, i, s, r, o, a, n) { var l = new Array, h = []; if (this.groupable && this.groups.length > 0) { for (var d = 0, c = new Array, u = new Array, p = 0; p < t.groups.length; p++) u[p] = t.generatekey(); var m = 0, g = new Array, f = 0; n > this.totalrecords && (n = this.totalrecords); for (var v = a; v < n; v++) { var x = e.extend({}, t.sortedgroups[v]); if (id = x[t.uniqueId], !t.pagesize || s >= t.pagesize * t.pagenum && s < t.pagesize * (t.pagenum + 1)) { (r >= o || id != l[r][t.uniqueId] || updated && updated[id]) && (h[h.length] = r); for (var w = new Array, b = 0, p = 0; p < t.groups.length; p++) { var _ = x[B = t.groups[p]]; null == _ && (_ = ""), w[b++] = { value: _, hash: u[p] } } if (w.length != t.groups.length) break; for (var y = null, j = "", q = -1, T = 0; T < w.length; T++) { q++; var C = w[T].value; if (j = j + "_" + w[T].hash + "_" + C, void 0 == c[j] || null == c[j]) { if (null == y) y = { group: C, subItems: new Array, subGroups: new Array, level: 0 }, g[f++] = y, void 0 != (k = t.loadedgroupsByKey[C]) && (y.visibleindex = k.visibleindex, y.uniqueid = k.uniqueid); else { var S = { group: C, subItems: new Array, subGroups: new Array, parentItem: y, level: y.level + 1 }, k = t.loadedgroupsByKey[y.uniqueid + "_" + C]; S.visibleindex = k.visibleindex, S.uniqueid = k.uniqueid, y.subGroups[y.subGroups.length++] = S, y = S } c[j] = y } else y = c[j] } null != y && (x.parentItem = y, x.level = y.level + 1, y.subItems[y.subItems.length++] = x), r++ } m++, s++ } for (var I = function (t, i, s) { for (var r = 0; r < i.subItems.length; r++) l[s] = e.extend({}, i.subItems[r]), s++; return s }, D = function (e) { var t = !1; for (subGroup in e.subGroups) { var i = e.subGroups[subGroup]; if (i.subGroups) { if (i.subGroups.length > 0 && D(i)) return t = !0, !0; if (i.subItems.length > 0) return t = !0, !0 } } return e.subItems.length > 0 ? (t = !0, !0) : t }, P = function (e, t, i) { for (subGroup in t.subGroups) { var s = t.subGroups[subGroup]; s.subGroups && D(s) && (l[i] = s, i++, s.subGroups.length > 0 ? i = P(e, s, i) : s.subItems.length > 0 && (i = I(0, s, i))) } return t.subItems.length > 0 && (i = I(0, t, i)), i }, m = 0; m < g.length; m++) { var B = g[m]; D(B) && (l[d] = B, d = P(this, B, ++d)) } } return l } }, e.extend(e.jqx._jqxGrid.prototype, { _initgroupsheader: function () { if (this.groupsheader.css("visibility", "hidden"), this._groupsheader()) { this.groupsheader.css("visibility", "inherit"); var t = this, i = this.gridlocalization.groupsheaderstring; this.groupsheaderdiv = this.groupsheaderdiv || e('<div style="width: 100%; position: relative;"></div>'), this.groupsheaderdiv.height(this.groupsheaderheight), this.groupsheaderdiv.css("top", 0), this.groupsheader.append(this.groupsheaderdiv), this.groupheadersbounds = new Array; var s = this.groups.length; this.groupsheaderdiv.children().remove(), this.groupsheaderdiv[0].innerHTML = ""; var r = new Array; if (s > 0) e.each(this.groups, function (i) { var o = this, a = t._getColumnText(this).label, n = t._rendergroupcolumn(a, o); if (n.addClass(t.toThemeProperty("jqx-grid-group-column")), t.groupsheaderdiv.append(n), t.closeablegroups) { var l = e(n.find(".jqx-icon-close")); t.isTouchDevice() && !0 !== t.touchmode ? t.addHandler(l, "touchstart", function () { return t.removegroupat(i), !1 }) : t.addHandler(l, "click", function () { return t.removegroupat(i), !1 }) } if (t.sortable && t.addHandler(n, "click", function () { var e = t.getcolumn(o); return null != e && t._togglesort(e), !1 }), r[r.length] = n, t._handlegroupstocolumnsdragdrop(this, n), i < s - 1) { var h = n.height(), d = e('<div style="float: left; position: relative;"></div>'); t.rtl && d.css("float", "right"), d.width(t.groupindentwidth / 3), d.height(1), d.css("top", h / 2), d.addClass(t.toThemeProperty("jqx-grid-group-column-line")), t.groupsheaderdiv.append(d) } }); else { var o = e('<div style="position: relative;">' + i + "</div>"); this.groupsheaderdiv.append(o), this.rtl && o.addClass(this.toThemeProperty("jqx-rtl")) } this._groupheaders = r, this._updategroupheadersbounds() } }, _updategroupheadersbounds: function () { var t = this, i = this.groupsheaderdiv.children().outerHeight(), s = (this.groupsheader.height() - i) / 2; this.groupsheaderdiv.css("top", s), this.rtl ? this.groupsheaderdiv.css("right", s) : this.groupsheaderdiv.css("left", s), this.rtl && this._groupheaders.reverse(), e.each(this._groupheaders, function (e) { var i = this.coord(); t.groupheadersbounds[e] = { left: i.left, top: i.top, width: this.outerWidth(), height: this.outerHeight(), index: e } }) }, addgroup: function (e) { if (e) { var t = this; t.groups !== t.dataview.groups && (t.dataview.groups = t.groups), t.groups[t.groups.length] = e, t.refreshgroups(), this._raiseEvent(12, { type: "Add", index: t.groups[t.groups.length], groups: t.groups }) } }, insertgroup: function (e, t) { if (void 0 != e && null != e && e >= 0 && e <= this.groups.length && t) { var i = this; i.groups !== i.dataview.groups && (i.dataview.groups = i.groups), i.groups.splice(e, 0, t.toString()), i.refreshgroups(), this._raiseEvent(12, { type: "Insert", index: e, groups: i.groups }) } }, refreshgroups: function () { this._refreshdataview(), this._render(!0, !0, !0, !1) }, _insertaftergroup: function (e, t) { var i = this._getGroupIndexByDataField(e); this.insertgroup(i + 1, t) }, _insertbeforegroup: function (e, t) { var i = this._getGroupIndexByDataField(e); this.insertgroup(i, t) }, removegroupat: function (e) { if (e >= 0 && null != e && void 0 != e) { var t = this; return t.groups !== t.dataview.groups && (t.dataview.groups = t.groups), t.groups.splice(e, 1), t.refreshgroups(), t.virtualmode && t.updatebounddata(), this._raiseEvent(12, { type: "Remove", index: e, groups: t.groups }), !0 } return !1 }, cleargroups: function () { var e = this; return e.groups = [], e.dataview.groups = e.groups, e.refreshgroups(), this._raiseEvent(12, { type: "Clear", groups: e.groups }), !0 }, removegroup: function (e) { if (null == e) return !1; var t = this.groups.indexOf(e.toString()); return this.removegroupat(t) }, getrootgroupscount: function () { return this.dataview.loadedrootgroups.length }, collapsegroup: function (e) { return this._setrootgroupstate(e, !1) }, expandgroup: function (e) { return this._setrootgroupstate(e, !0) }, collapseallgroups: function (e) { this._setbatchgroupstate(!1, e) }, expandallgroups: function (e) { this._setbatchgroupstate(!0, e) }, getgroup: function (t) { var i = this.dataview.loadedrootgroups[t]; if (null == i) return null; var s = this.expandedgroups[i.uniqueid].expanded, r = i.group, o = i.level, a = new Array; this._getsubgroups(a, i); var n = this, l = { group: r, level: o, expanded: s, subgroups: a }; if (i.subItems) { var h = new Array; e.each(i.subItems, function () { var e = this.boundindex; h[h.length] = n.getrowdata(e) }), h.length > 0 && (l.subrows = h) } return l }, getrootgroups: function () { for (var e = this.dataview.loadedrootgroups.length, t = new Array, i = 0; i < e; i++) t[i] = this.getgroup(i); return t }, _getsubgroups: function (t, i) { var s = this; for (obj in i.subGroups) { var r = i.subGroups[obj], o = s.expandedgroups[r.uniqueid].expanded, a = r.group, n = r.level; if (t[t.length] = { group: a, level: n, expanded: o }, r.subItems) { var l = new Array; e.each(r.subItems, function () { var e = this.boundindex; l[l.length] = s.getrowdata(e) }), t[t.length - 1].subrows = l } if (r.subGroups) { var h = new Array; s._getsubgroups(h, r) } } return t }, _setbatchgroupstate: function (e, t) { var i = this; for (obj in this.dataview.loadedrootgroups) i._setrootgroupstate(obj, e, !1, !0); if (0 == t) return i._requiresupdate = !0, i._renderrows(i.virtualsizeinfo), !0; var s = this.vScrollBar[0].style.visibility; return this.rendergridcontent(!0, !1), (s != this.vScrollBar[0].style.visibility || this._hiddencolumns) && (this._updatecolumnwidths(), this._updatecellwidths(), this._renderrows(this.virtualsizeinfo)), !0 }, _setrootgroupstate: function (e, t, i, s) { if (void 0 == e || null == e || e < 0) return !1; if (!this.groupable || 0 == this.groups.length) return !1; var r = void 0 == i || i; if (e >= 0 && e < this.dataview.loadedrootgroups.length) { var o = this.dataview.loadedrootgroups[e]; if (this.pageable) { for (var a = new Array, n = 0; n < this.dataview.rows.length; n++) null != this.dataview.rows[n].group && 0 === this.dataview.rows[n].level && a.push(this.dataview.rows[n]); if (!(o = a[e])) return } return this._setgroupstate(o, t, r, s) } return !1 }, _togglegroupstate: function (e, t) { if (null == e || void 0 == e) return !1; var i = this.vScrollInstance.value, s = this.expandedgroups[e.uniqueid]; s = !(s = void 0 != s && s.expanded); var r = this._setgroupstate(e, s, t); return 0 !== i && "hidden" !== this.vScrollBar.css("visibility") && (i <= this.vScrollInstance.max ? this.vScrollInstance.setPosition(i) : this.vScrollInstance.setPosition(this.vScrollInstance.max)), r }, _setgroupstate: function (e, t, i, s) { if (null == e || void 0 == e) return !1; var r = !1; this.editable && this.editcell && this.endcelledit(this.editcell.row, this.editcell.column, !1, !1); var o = this.expandedgroups[e.uniqueid]; if (void 0 == o && (o = { expanded: !1 }, r = !0), o.expanded != t && (r = !0), r) { if (this.expandedgroups[e.uniqueid] = { expanded: t, group: e }, this._setsubgroupsvisibility(this, e, !t, s), i) { var a = this.vScrollBar[0].style.visibility; this.rendergridcontent(!0, !1), (a != this.vScrollBar[0].style.visibility || this._hiddencolumns) && (this._updatecolumnwidths(), this._updatecellwidths(), this._renderrows(this.virtualsizeinfo)) } return void 0 != this.suspendgroupevents && 0 != this.suspendgroupevents || (t ? this._raiseEvent(4, { group: e.group, parentgroup: e.parentItem ? e.parentItem.group : null, level: e.level, visibleindex: e.visibleindex }) : this._raiseEvent(5, { group: e.group, parentgroup: e.parentItem ? e.parentItem.group : null, level: e.level, visibleindex: e.visibleindex })), !0 } return !1 }, _setgroupitemsvisibility: function (e, t, i) { for (var s = 0; s < t.subItems.length; s++) e._setrowvisibility(t.subItems[s].visibleindex, i, !1) }, _setsubgroupsvisibility: function (e, t, i, s) { if (null != t.parentItem) { if (this.hiddens[t.parentItem.visibleindex]) return } else if (null == t.parentItem && this.hiddens[t.visibleindex]) return; for (subGroup in t.subGroups) { var r = t.subGroups[subGroup]; i || e._setrowvisibility(r.visibleindex, i, !1); var o = !i; s ? this.expandedgroups[r.uniqueid] = { expanded: o, group: r } : o = void 0 != e.expandedgroups[r.uniqueid] && e.expandedgroups[r.uniqueid].expanded, r.subGroups && (r.subGroups.length > 0 ? e._setsubgroupsvisibility(e, r, !o || i, s) : r.subItems.length > 0 && e._setgroupitemsvisibility(e, r, !o || i)), i && e._setrowvisibility(r.visibleindex, i, !1) } t.subItems && t.subItems.length > 0 && e._setgroupitemsvisibility(e, t, i) }, _handlecolumnsdragdrop: function () { var t = this, i = -1, s = !1; if (t.groupable) { var r = "mousemove.grouping" + this.element.id, o = (this.element.id, "mouseup.grouping" + this.element.id), a = !1; this.isTouchDevice() && !0 !== this.touchmode && (a = !0, r = e.jqx.mobile.getTouchEventName("touchmove") + ".grouping" + this.element.id, e.jqx.mobile.getTouchEventName("touchstart") + ".grouping" + this.element.id, o = e.jqx.mobile.getTouchEventName("touchend") + ".grouping" + this.element.id), this.removeHandler(e(document), r), this.addHandler(e(document), r, function (r) { if (!t.showgroupsheader) return !0; if (null != t.dragcolumn) { var o = parseInt(r.pageX), n = parseInt(r.pageY); if (a) { var l = t.getTouches(r)[0]; o = parseInt(l.pageX), n = parseInt(l.pageY) } var h = t.host.coord(), d = parseInt(h.left), c = parseInt(h.top); void 0 != t.dragmousedownoffset && null != t.dragmousedownoffset || (t.dragmousedownoffset = { left: 0, top: 0 }); var u = parseInt(o) - parseInt(t.dragmousedownoffset.left), p = parseInt(n) - parseInt(t.dragmousedownoffset.top); if (t.dragcolumn.css({ left: u + "px", top: p + "px" }), s = !1, o >= d && o <= d + t.host.width() && n >= c && n <= c + t.host.height() && (s = !0), i = -1, s) { t.dragcolumnicon.removeClass(t.toThemeProperty("jqx-grid-dragcancel-icon")), t.dragcolumnicon.addClass(t.toThemeProperty("jqx-grid-drag-icon")); var m = t.groupsheader.coord(), g = m.top + t.groupsheader.height(), f = e.data(t.dragcolumn[0], "datarecord"); if (f) v = t.groups.indexOf(f.toString()); else var v = -1; var x = -1 == v || t.groups.length > 1 && v > -1; null != t.dropline && (n >= m.top && n <= g ? x && (i = t._handlegroupdroplines(o)) : t.dropline.fadeOut("slow")) } else null != t.dropline && t.dropline.fadeOut("slow"), t.dragcolumnicon.removeClass(t.toThemeProperty("jqx-grid-drag-icon")), t.dragcolumnicon.addClass(t.toThemeProperty("jqx-grid-dragcancel-icon")); if (a) return r.preventDefault(), r.stopPropagation(), !1 } }), this.removeHandler(e(document), o), this.addHandler(e(document), o, function (r) { if (!t.showgroupsheader) return !0; t.__drag = !1, e(document.body).removeClass("jqx-disableselect"); parseInt(r.pageX); var o = parseInt(r.pageY); if (a) { var n = t.getTouches(r)[0]; parseInt(n.pageX), o = parseInt(n.pageY) } var l = t.host.coord(), h = (parseInt(l.left), parseInt(l.top)), d = t.groupsheader.height(); if (t.showtoolbar && (h += t.toolbarheight), t.dragstarted = !1, t.dragmousedown = null, null != t.dragcolumn) { var c = e.data(t.dragcolumn[0], "datarecord"); if (t.dragcolumn.remove(), t.dragcolumn = null, null != c) { if (!t.getcolumn(c).groupable) return void (null != t.dropline && (t.dropline.remove(), t.dropline = null)); if (s) if (-1 != i) { var u = i.index, p = t.groups[u]; (m = t._getGroupIndexByDataField(c)) != u && (void 0 != m && m >= 0 && t.groups.splice(m, 1), "before" == i.position ? t.rtl ? t._insertaftergroup(p, c) : t._insertbeforegroup(p, c) : t.rtl ? t._insertbeforegroup(p, c) : t._insertaftergroup(p, c)) } else if (0 == t.groups.length) o > h && o <= h + d && t.addgroup(c); else if (o > h + d) { var m = t._getGroupIndexByDataField(c); t.removegroupat(m) } null != t.dropline && (t.dropline.remove(), t.dropline = null) } } }) } }, _getGroupIndexByDataField: function (e) { for (var t = 0; t < this.groups.length; t++) if (this.groups[t] == e) return t; return -1 }, _isColumnInGroups: function (e) { for (var t = 0; t < this.groups.length; t++) if (this.groups[t] == e) return !0; return !1 }, _handlegroupdroplines: function (t) { var i = this, s = -1; return e.each(i.groupheadersbounds, function (e) { if (t <= this.left + this.width / 2) { var r = this.left - 3; return e > 0 && (r = this.left - 1 - i.groupindentwidth / 6), i.dropline.css("left", r), i.dropline.css("top", this.top), i.dropline.height(this.height), i.dropline.fadeIn("slow"), s = { index: e, position: "before" }, i.rtl && (s = { index: i.groupheadersbounds.length - 1 - e, position: "before" }), !1 } t >= this.left + this.width / 2 && (i.dropline.css("left", 1 + this.left + this.width), i.dropline.css("top", this.top), i.dropline.height(this.height), i.dropline.fadeIn("slow"), s = { index: e, position: "after" }, i.rtl && (s = { index: i.groupheadersbounds.length - 1 - e, position: "after" })) }), s }, _handlegroupstocolumnsdragdrop: function (t, i) { this.dragmousedown = null, this.dragmousedownoffset = null, this.dragstarted = !1, this.dragcolumn = null; var s, r = this, o = "mousedown", a = "mousemove", n = !1; this.isTouchDevice() && !0 !== this.touchmode && (n = !0, o = e.jqx.mobile.getTouchEventName("touchstart"), a = e.jqx.mobile.getTouchEventName("touchmove")), this.addHandler(i, "dragstart", function (e) { return !1 }), this.addHandler(i, o, function (t) { if (!r.showgroupsheader) return !0; var i = t.pageX, s = t.pageY; if (r.__drag = !0, r.dragmousedown = { left: i, top: s }, n) { var o = r.getTouches(t)[0]; i = o.pageX, s = o.pageY, r.dragmousedown = { left: i, top: s }, t.preventDefault && t.preventDefault() } var a = e(t.target).coord(); r.dragmousedownoffset = { left: parseInt(i) - parseInt(a.left), top: parseInt(s - a.top) } }), this.addHandler(i, a, function (o) { if (!r.showgroupsheader) return !0; if (r.dragmousedown) { if (s = { left: o.pageX, top: o.pageY }, n) { var a = r.getTouches(o)[0]; s = { left: a.pageX, top: a.pageY } } if (!r.dragstarted && null == r.dragcolumn) { var l = Math.abs(s.left - r.dragmousedown.left), h = Math.abs(s.top - r.dragmousedown.top); (l > 3 || h > 3) && (r._createdragcolumn(i, s, !0), e(document.body).addClass("jqx-disableselect"), e.data(r.dragcolumn[0], "datarecord", t), o.preventDefault && o.preventDefault()) } } }) }, _createdragcolumn: function (t, i, s) { var r = this, o = i; r.dragcolumn = e("<div></div>"); var a = t.clone(); r.dragcolumn.css("z-index", 999999), a.css("border-width", "1px"), a.css("opacity", "0.4"); var n = e(a.find("." + r.toThemeProperty("jqx-grid-column-menubutton"))); n.length > 0 && n.css("display", "none"); var l = e(a.find(".jqx-icon-close")); l.length > 0 && l.css("display", "none"), r.dragcolumnicon = e('<div style="z-index: 9999; position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px;"></div>'), r.dragcolumnicon.addClass(r.toThemeProperty("jqx-grid-drag-icon")), r.dragcolumn.css("float", "left"), r.dragcolumn.css("position", "absolute"); r.host.coord(); a.width(t.width() + 16), r.dragcolumn.append(a), r.dragcolumn.height(t.height()), r.dragcolumn.width(a.width()), r.dragcolumn.append(r.dragcolumnicon), e(document.body).append(r.dragcolumn), a.css("margin-left", 0), a.css("left", 0), a.css("top", 0), r.dragcolumn.css("left", o.left + r.dragmousedown.left), r.dragcolumn.css("top", o.top + r.dragmousedown.top), void 0 != s && s && (r.dropline = e('<div style="display: none; position: absolute;"></div>'), r.dropline.width(2), r.dropline.addClass(r.toThemeProperty("jqx-grid-group-drag-line")), e(document.body).append(r.dropline)) }, iscolumngroupable: function (e) { return this._getcolumnproperty(e, "groupable") }, _handlecolumnstogroupsdragdrop: function (t, i) { this.dragmousedown = null, this.dragmousedownoffset = null, this.dragstarted = !1, this.dragcolumn = null; var s = this, r = !1; this.isTouchDevice() && !0 !== this.touchmode && (r = !0); var o = "mousedown.drag", a = "mousemove.drag"; r ? (o = e.jqx.mobile.getTouchEventName("touchstart") + ".drag", a = e.jqx.mobile.getTouchEventName("touchmove") + ".drag") : this.addHandler(i, "dragstart", function (e) { return !1 }), this.addHandler(i, o, function (o) { if (!s.showgroupsheader) return !0; if (s.__drag = !0, s._isColumnInGroups(t.displayfield)) return i.css("cursor"), !0; if (0 == t.groupable) return !0; var a = o.pageX, n = o.pageY; if (r) { var l = s.getTouches(o)[0]; a = l.pageX, n = l.pageY } s.dragmousedown = { left: a, top: n }, r && o.preventDefault && o.preventDefault(); var h = e(o.target).coord(); s.dragmousedownoffset = { left: parseInt(a) - parseInt(h.left), top: parseInt(n - h.top) } }), this.addHandler(i, a, function (o) { if (!s.showgroupsheader) return !0; if (s._isColumnInGroups(t.displayfield)) return i.css("cursor"), !0; if (s.dragmousedown) { var n = o.pageX, l = o.pageY; if (r) { var h = s.getTouches(o)[0]; n = h.pageX, l = h.pageY } if (a = { left: n, top: l }, !s.dragstarted && null == s.dragcolumn) { var d = Math.abs(a.left - s.dragmousedown.left), c = Math.abs(a.top - s.dragmousedown.top); (d > 3 || c > 3) && (s._createdragcolumn(i, a, !0), e.data(s.dragcolumn[0], "datarecord", t.displayfield), o.preventDefault && o.preventDefault()) } } }) }, _rendergroupcolumn: function (t, i) { var s = e('<div style="float: left; position: relative;"></div>'); if (this.rtl && s.css("float", "right"), null != this.groupcolumnrenderer && (s[0].innerHTML = this.groupcolumnrenderer(t), s.addClass(this.toThemeProperty("jqx-grid-group-column")), s.addClass(this.toThemeProperty("jqx-fill-state-normal"))), this.closeablegroups) { "" == s[0].innerHTML && (s[0].innerHTML = '<a style="float: left;" href="#">' + t + "</a>"), this.rtl && (s[0].innerHTML = '<a style="float: right;" href="#">' + t + "</a>"); var r = this.rtl ? "left" : "right", o = '<div style="float: ' + r + '; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="' + this.toThemeProperty("jqx-icon-close") + '"></div></div>'; if (e.jqx.browser.msie && e.jqx.browser.version < 8 && (o = '<div style="float: left; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="' + this.toThemeProperty("jqx-icon-close") + '"></div></div>'), this.rtl) { o = '<div style="float: ' + r + '; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-top: -8px; float: none; width: 16px; height: 16px;" class="' + this.toThemeProperty("jqx-icon-close") + '"></div></div>'; e.jqx.browser.msie && e.jqx.browser.version < 8 && (o = '<div style="float: left; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-top: -8px; float: none; width: 16px; height: 16px;" class="' + this.toThemeProperty("jqx-icon-close") + '"></div></div>') } s[0].innerHTML += o } else "" == s[0].innerHTML && (s[0].innerHTML = '<a href="#">' + t + "</a>"); if (this.sortable) { var a = e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -16px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="' + this.toThemeProperty("jqx-grid-column-sortascbutton") + '"></div></div>'), n = e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -16px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="' + this.toThemeProperty("jqx-grid-column-sortdescbutton") + '"></div></div>'); if (this.closeablegroups) var a = e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -32px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="' + this.toThemeProperty("jqx-grid-column-sortascbutton") + '"></div></div>'), n = e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -32px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="' + this.toThemeProperty("jqx-grid-column-sortdescbutton") + '"></div></div>'); if (this.rtl) { var a = e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-left: 0px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="' + this.toThemeProperty("jqx-grid-column-sortascbutton") + '"></div></div>'), n = e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-left: 0px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="' + this.toThemeProperty("jqx-grid-column-sortdescbutton") + '"></div></div>'); if (this.closeablegroups) var a = e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-left: 16px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="' + this.toThemeProperty("jqx-grid-column-sortascbutton") + '"></div></div>'), n = e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-left: 16px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="' + this.toThemeProperty("jqx-grid-column-sortdescbutton") + '"></div></div>') } a.css("display", "none"), n.css("display", "none"), e.jqx.browser.msie && e.jqx.browser.version < 8 && (a.css("float", "left"), n.css("float", "left")), s.append(a), s.append(n), e.data(document.body, "groupsortelements" + i, { sortasc: a, sortdesc: n }) } return s.addClass(this.toThemeProperty("jqx-fill-state-normal")), s.addClass(this.toThemeProperty("jqx-grid-group-column")), s }, _rendergroup: function (t, i, s, r, o, a, n) { var l = i, h = i.cells[s.level]; this.rtl && (h = i.cells[i.cells.length - 1 - s.level]); var d = this._findgroupstate(s.uniqueid); if (s.bounddata.subGroups.length > 0 || s.bounddata.subItems.length > 0) { var c = this.rtl ? "-rtl" : "", u = this.toThemeProperty("jqx-icon-arrow-right"); c && (u = this.toThemeProperty("jqx-icon-arrow-left")), h.className += d ? " " + this.toThemeProperty("jqx-grid-group-expand" + c) + " " + this.toThemeProperty("jqx-icon-arrow-down") : " " + this.toThemeProperty("jqx-grid-group-collapse" + c) + " " + u } var p = this._getColumnText(this.groups[s.level]).label, m = this.groupindentwidth, g = n - (S = this.rowdetails && this.showrowdetailscolumn ? (1 + t) * m : t * m), f = s.level + 1; this.rtl && (f = 0); for (var v = l.cells[f], x = 2; void 0 != v && "none" == v.style.display && x < l.cells.length - 1;) v = l.cells[f + x - 1], x++; var w = e(v); if (v) { if (v.style.width = parseInt(g) + "px", -1 != v.className.indexOf("jqx-grid-cell-filter") && w.removeClass(this.toThemeProperty("jqx-grid-cell-filter")), -1 != v.className.indexOf("jqx-grid-cell-sort") && w.removeClass(this.toThemeProperty("jqx-grid-cell-sort")), -1 != v.className.indexOf("jqx-grid-cell-pinned") && w.removeClass(this.toThemeProperty("jqx-grid-cell-pinned")), null != this.groupsrenderer) { var b = { group: s.group, level: s.level, parent: s.bounddata.parentItem, subGroups: s.bounddata.subGroups, subItems: s.bounddata.subItems, groupcolumn: this._getColumnText(this.groups[s.level]).column }, _ = this.groupsrenderer(p + ": " + s.group, s.group, d, b); if (_) v.innerHTML = _; else { q = s.bounddata.subItems.length > 0 ? s.bounddata.subItems.length : s.bounddata.subGroups.length; v.innerHTML = '<div class="' + this.toThemeProperty("jqx-grid-groups-row") + '" style="position: absolute;"><span>' + p + ': </span><span class="' + this.toThemeProperty("jqx-grid-groups-row-details") + '">' + s.group + " (" + q + ")</span></div>" } } else { var y = this._getcolumnbydatafield(this.groups[s.level]), j = s.group; if (null == y) throw new Error("jqxGrid: Unable to find '" + this.groups[s.level] + "' group in the Grid's columns collection."); y.cellsformat && e.jqx.dataFormat && (e.jqx.dataFormat.isDate(j) ? j = e.jqx.dataFormat.formatdate(j, y.cellsformat, this.gridlocalization) : e.jqx.dataFormat.isNumber(j) && (j = e.jqx.dataFormat.formatnumber(j, y.cellsformat, this.gridlocalization))); var q = s.bounddata.subItems.length > 0 ? s.bounddata.subItems.length : s.bounddata.subGroups.length; v.innerHTML = '<div class="' + this.toThemeProperty("jqx-grid-groups-row") + '" style="position: absolute;"><span>' + p + ': </span><span class="' + this.toThemeProperty("jqx-grid-groups-row-details") + '">' + j + " (" + q + ")</span></div>" } if (this.rtl) { y || (y = this._getcolumnbydatafield(this.groups[s.level])); var T = "hidden" == this.hScrollBar.css("visibility") ? 0 : this.hScrollInstance.max - this.hScrollInstance.value, C = "hidden" == this.vScrollBar.css("visibility") ? 0 : this.scrollbarsize + 6, S = this.rowdetails && this.showrowdetailscolumn ? (2 + s.level) * m : (1 + s.level) * m; v.style.width = n + parseInt(T) - S - C + "px", w.addClass(this.toThemeProperty("jqx-rtl")); var k = e(i.cells[i.cells.length - 1]).css("z-index"); w.css("z-index", k); var I = w.find("div"), g = I.width(); I.css("left", "100%"); var D = null != this.columns.records[i.cells.length - 2 - s.level] && this.columns.records[i.cells.length - 2 - s.level].pinned; if (this.table.width() < n && (n = this.table.width(), "hidden" != this.vScrollBar.css("visibility") && (n += this.vScrollBar.outerWidth())), y.pinned || D) this.rowdetails && this.showrowdetailscolumn && (n += 30), I.css("margin-left", -g), v.style.width = n + T - S - C + "px"; else { T = "hidden" == this.hScrollBar.css("visibility") ? 0 : this.hScrollInstance.max; v.style.width = n + T - S - C + "px"; g = I.width(); I.css("margin-left", -g) } } } } }) }(jQuery), function (e) { e.extend(e.jqx._jqxGrid.prototype, { _initpager: function () { var t = this.that, i = this.gridlocalization.pagergotopagestring, s = (this.gridlocalization.pagerrangestring, this.gridlocalization.pagershowrowsstring), r = (this.pagerheight - 17) / 2; if (this.pagerdiv = this.pagerdiv || e('<div style="width: 100%; height: 100%; position: relative;"></div>'), !this.pageable) return this.pagerdiv.remove(), void this.vScrollBar.jqxScrollBar({ thumbSize: 0 }); if (this.pagerrenderer) { this.pagerdiv.children().remove(); var o = this.pagerrenderer(); null != o && this.pagerdiv.append(e(o)), this.pager.append(this.pagerdiv) } else { if (this.pagerdiv.css("top", r), this.pager.append(this.pagerdiv), this.pagergotoinput = this.pagergotoinput || e('<div style="margin-right: 7px; width: 27px; height: 17px; float: right;"><input style="margin-top: 0px; text-align: right; width: 27px;" type="text"/></div>'), this.pagergoto = this.pagergoto || e('<div style="float: right; margin-right: 7px;"></div>'), this.pagerrightbutton = this.pagerrightbutton || e('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'), this.pagerleftbutton = this.pagerleftbutton || e('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'), this.pagerdetails = this.pagerdetails || e('<div style="margin-right: 7px; float: right;"></div>'), this.pagershowrows = this.pagershowrows || e('<div style="margin-right: 7px; float: right;"></div>'), this.pagerbuttons = e('<div style="margin-right: 3px; float: right;"></div>'), this.pagershowrowscombo && this.pagershowrowscombo.jqxDropDownList && (this.pagershowrowscombo.remove(), this.pagershowrowscombo = null), this.pagergotoinput.attr("disabled", this.disabled), this.pagerfirstbutton = e('<div type="button" style="padding: 0px; margin-top: 0px; margin-left: 3px; margin-right: 3px; width: 27px; float: right;"></div>'), this.pagerlastbutton = e('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'), this.pagershowrowscombo = this.pagershowrowscombo || e('<div id="gridpagerlist" style="margin-top: 0px; margin-right: 7px; float: right;"></div>'), this.pagerdiv.children().remove(), this.pagershowrowscombo[0].id = "gridpagerlist" + this.element.id, this.removeHandler(this.pagerrightbutton, "mousedown"), this.removeHandler(this.pagerrightbutton, "mouseup"), this.removeHandler(this.pagerrightbutton, "click"), this.removeHandler(this.pagerleftbutton, "mousedown"), this.removeHandler(this.pagerleftbutton, "mouseup"), this.removeHandler(this.pagerleftbutton, "click"), this.removeHandler(this.pagerfirstbutton, "mousedown"), this.removeHandler(this.pagerfirstbutton, "mouseup"), this.removeHandler(this.pagerfirstbutton, "click"), this.removeHandler(this.pagerlastbutton, "mousedown"), this.removeHandler(this.pagerlastbutton, "mouseup"), this.removeHandler(this.pagerlastbutton, "click"), this.pagerleftbutton.attr("title", this.gridlocalization.pagerpreviousbuttonstring), this.pagerrightbutton.attr("title", this.gridlocalization.pagernextbuttonstring), "simple" == this.pagermode) { e.jqx.browser.msie && e.jqx.browser.version < 8 && (this.pagerbuttons.css("overflow", "visible"), this.pagerbuttons.css("padding", "3px")), this.pagerfirstbutton.attr("title", this.gridlocalization.pagerfirstbuttonstring), this.pagerlastbutton.attr("title", this.gridlocalization.pagerlastbuttonstring); var a = e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>"); a.addClass(this.toThemeProperty("jqx-icon-arrow-first")), this.pagerfirstbutton.wrapInner(a); var n = e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>"); n.addClass(this.toThemeProperty("jqx-icon-arrow-last")), this.pagerlastbutton.wrapInner(n), this.rtl ? (this.pagerdiv.append(this.pagerlastbutton), this.pagerdiv.append(this.pagerrightbutton), this.pagerdiv.append(this.pagerbuttons), this.pagerdiv.append(this.pagerleftbutton), this.pagerdiv.append(this.pagerfirstbutton)) : (this.pagerdiv.append(this.pagerfirstbutton), this.pagerdiv.append(this.pagerleftbutton), this.pagerdiv.append(this.pagerbuttons), this.pagerdiv.append(this.pagerrightbutton), this.pagerdiv.append(this.pagerlastbutton)), this.pagerlastbutton.jqxButton({ cursor: "pointer", disabled: this.disabled, theme: this.theme }), this.pagerfirstbutton.jqxButton({ cursor: "pointer", disabled: this.disabled, theme: this.theme }); var l = this.rtl ? "right" : "left"; this.pagerbuttons.css("float", l), this.pagerlastbutton.css("float", l), this.pagerfirstbutton.css("float", l), this.pagerrightbutton.css("float", l), this.pagerleftbutton.css("float", l), this.pagerdetails.css("float", this.rtl ? "left" : "right"), this.rtl ? (this.pagerdetails.css("margin-left", "7px"), this.pagerdetails.css("margin-right", "0px")) : (this.pagerdetails.css("margin-left", "0px"), this.pagerdetails.css("margin-right", "7px")), this.pagergotoinput.hide(), this.pagershowrowscombo.hide(), this.pagergoto.hide(), this.pagershowrows.hide() } else this.pagergotoinput.show(), this.pagershowrowscombo.show(), this.pagergoto.show(), this.pagershowrows.show(), this.rtl || (this.pagerdiv.append(this.pagerrightbutton), this.pagerdiv.append(this.pagerleftbutton)); this.pagerrightbutton.jqxButton({ cursor: "pointer", disabled: this.disabled, theme: this.theme }), this.pagerleftbutton.jqxButton({ cursor: "pointer", disabled: this.disabled, theme: this.theme }), this.pagerleftbutton.find(".jqx-icon-arrow-left").remove(), this.pagerrightbutton.find(".jqx-icon-arrow-right").remove(); var h = e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>"); h.addClass(this.toThemeProperty("jqx-icon-arrow-left")), this.pagerleftbutton.wrapInner(h); var d = e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>"); d.addClass(this.toThemeProperty("jqx-icon-arrow-right")), this.pagerrightbutton.wrapInner(d), this.rtl || this.pagerdiv.append(this.pagerdetails), "simple" != this.pagermode && (this.rtl ? (this.pagerdiv.append(this.pagergoto), this.pagerdiv.append(this.pagergotoinput), this.pagerdiv.append(this.pagershowrows), this.pagerdiv.append(this.pagershowrowscombo), this.pagerdiv.append(this.pagerdetails), this.pagerdiv.append(this.pagerrightbutton), this.pagerdiv.append(this.pagerleftbutton)) : (this.pagerdiv.append(this.pagershowrowscombo), this.pagerdiv.append(this.pagershowrows), this.pagerdiv.append(this.pagergotoinput), this.pagerdiv.append(this.pagergoto))); var c = this.pagesizeoptions; if (!this.pagershowrowscombo.jqxDropDownList) throw new Error("jqxGrid: jqxdropdownlist.js is not loaded."); this.pagershowrowscombo.jqxDropDownList({ rtl: this.rtl, disabled: this.disabled, source: c, enableBrowserBoundsDetection: !0, keyboardSelection: !1, autoDropDownHeight: !0, width: "auto", height: 16, theme: this.theme }); for (var u = 0, p = 0; p < c.length; p++) this.pagesize >= c[p] && (u = p); this.pagershowrows[0].innerHTML = s, this.pagergoto[0].innerHTML = i, this.updatepagerdetails(), this.pagershowrowscombo.jqxDropDownList({ selectedIndex: u }), this.pagerpageinput = this.pagergotoinput.find("input"), this.pagerpageinput.addClass(this.toThemeProperty("jqx-input")), this.pagerpageinput.addClass(this.toThemeProperty("jqx-widget-content")), this.rtl && this.pagerpageinput.css("direction", "rtl"); t = this.that; this.removeHandler(this.pagershowrowscombo, "select"), this.addHandler(this.pagershowrowscombo, "select", function (e) { if (e.args) { t.vScrollInstance && t.vScrollInstance.setPosition(0), null != t.editcell && t.endcelledit && t.endcelledit(t.editcell.row, t.editcell.column, !0, !1); var i = e.args.index, s = t.dataview.pagenum * t.dataview.pagesize, r = c[i], o = t.pagesize; t.pagesize = parseInt(r), isNaN(t.pagesize) && (t.pagesize = 10), r >= 100 ? t.pagershowrowscombo.jqxDropDownList({ width: "auto" }) : t.pagershowrowscombo.jqxDropDownList({ width: 44 }), t.dataview.pagesize = t.pagesize; var a = Math.floor(s / t.dataview.pagesize); t.prerenderrequired = !0, t._requiresupdate = !0, t._raiseEvent(10, { pagenum: a, oldpagesize: o, pagesize: t.dataview.pagesize }), t.gotopage(a), t.autoheight && t._updatesizeonwindowresize && (t._updatesize(!0), setTimeout(function () { t._updatesize(!0) }, 500)) } }); var m = this.pagergotoinput.find("input"); m.addClass(this.toThemeProperty("jqx-grid-pager-input")), m.addClass(this.toThemeProperty("jqx-rc-all")), this.removeHandler(m, "keydown"), this.removeHandler(m, "change"), this.addHandler(m, "keydown", function (e) { if (e.keyCode >= 65 && e.keyCode <= 90) return !1; if ("13" == e.keyCode) { var i = m.val(); return i = parseInt(i), isNaN(i) || t.gotopage(i - 1), !1 } }), this.addHandler(m, "change", function () { var e = m.val(); e = parseInt(e), isNaN(e) || t.gotopage(e - 1) }), this.addHandler(this.pagerrightbutton, "mouseenter", function () { d.addClass(t.toThemeProperty("jqx-icon-arrow-right-hover")) }), this.addHandler(this.pagerleftbutton, "mouseenter", function () { h.addClass(t.toThemeProperty("jqx-icon-arrow-left-hover")) }), this.addHandler(this.pagerrightbutton, "mouseleave", function () { d.removeClass(t.toThemeProperty("jqx-icon-arrow-right-hover")) }), this.addHandler(this.pagerleftbutton, "mouseleave", function () { h.removeClass(t.toThemeProperty("jqx-icon-arrow-left-hover")) }), this.addHandler(this.pagerrightbutton, "mousedown", function () { d.addClass(t.toThemeProperty("jqx-icon-arrow-right-selected")) }), this.addHandler(this.pagerrightbutton, "mouseup", function () { d.removeClass(t.toThemeProperty("jqx-icon-arrow-right-selected")) }), this.addHandler(this.pagerleftbutton, "mousedown", function () { h.addClass(t.toThemeProperty("jqx-icon-arrow-left-selected")) }), this.addHandler(this.pagerleftbutton, "mouseup", function () { h.removeClass(t.toThemeProperty("jqx-icon-arrow-left-selected")) }), this.addHandler(e(document), "mouseup.pagerbuttons" + this.element.id, function () { d.removeClass(t.toThemeProperty("jqx-icon-arrow-right-selected")), h.removeClass(t.toThemeProperty("jqx-icon-arrow-left-selected")) }), this.addHandler(this.pagerrightbutton, "click", function () { t.pagerrightbutton.jqxButton("disabled") || (t.rtl ? t.gotoprevpage() : t.gotonextpage()) }), this.addHandler(this.pagerleftbutton, "click", function () { t.pagerleftbutton.jqxButton("disabled") || (t.rtl ? t.gotonextpage() : t.gotoprevpage()) }); var g = this; if ("simple" === this.pagermode) { var f = this.pagerfirstbutton, v = this.pagerlastbutton; this.addHandler(v, "mouseenter", function () { n.addClass(g.toThemeProperty("jqx-icon-arrow-last-hover")) }), this.addHandler(f, "mouseenter", function () { a.addClass(g.toThemeProperty("jqx-icon-arrow-first-hover")) }), this.addHandler(v, "mouseleave", function () { n.removeClass(g.toThemeProperty("jqx-icon-arrow-last-hover")) }), this.addHandler(f, "mouseleave", function () { a.removeClass(g.toThemeProperty("jqx-icon-arrow-first-hover")) }), this.addHandler(v, "mousedown", function () { n.addClass(g.toThemeProperty("jqx-icon-arrow-last-selected")) }), this.addHandler(f, "mousedown", function () { a.addClass(g.toThemeProperty("jqx-icon-arrow-first-selected")) }), this.addHandler(v, "mouseup", function () { n.removeClass(g.toThemeProperty("jqx-icon-arrow-last-selected")) }), this.addHandler(f, "mouseup", function () { a.removeClass(g.toThemeProperty("jqx-icon-arrow-first-selected")) }), this.addHandler(e(document), "mouseup.pagerbuttons" + name + this.element.id, function () { d.removeClass(g.toThemeProperty("jqx-icon-arrow-right-selected")), h.removeClass(g.toThemeProperty("jqx-icon-arrow-left-selected")), n && (n.removeClass(g.toThemeProperty("jqx-icon-arrow-last-selected")), a.removeClass(g.toThemeProperty("jqx-icon-arrow-first-selected"))) }), this.addHandler(f, "click", function () { if (!f.jqxButton("disabled")) if (g.rtl) { var e = g.dataview.totalrecords, t = Math.ceil(e / g.pagesize); g.gotopage(t - 1) } else g.gotopage(0) }), this.addHandler(v, "click", function () { if (!v.jqxButton("disabled")) if (g.rtl) g.gotopage(0); else { var e = g.dataview.totalrecords, t = Math.ceil(e / g.pagesize); g.gotopage(t - 1) } }) } } this.vScrollBar.jqxScrollBar("refresh"), this._arrange() }, _updatepagertheme: function () { if (null != this.pagershowrowscombo) { this.pagershowrowscombo.jqxDropDownList({ theme: this.theme }), this.pagerrightbutton.jqxButton({ theme: this.theme }), this.pagerleftbutton.jqxButton({ theme: this.theme }), this.pagerpageinput.removeClass(); var t = this.pagergotoinput.find("input"); t.removeClass(), t.addClass(this.toThemeProperty("jqx-grid-pager-input")), t.addClass(this.toThemeProperty("jqx-rc-all")), this.pagerpageinput.addClass(this.toThemeProperty("jqx-input")), this.pagerpageinput.addClass(this.toThemeProperty("jqx-widget-content")), this.pagerleftbutton.find(".jqx-icon-arrow-left").remove(), this.pagerrightbutton.find(".jqx-icon-arrow-right").remove(); var i = e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>"); i.addClass(this.toThemeProperty("jqx-icon-arrow-left")), this.pagerleftbutton.wrapInner(i); var s = e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>"); if (s.addClass(this.toThemeProperty("jqx-icon-arrow-right")), this.pagerrightbutton.wrapInner(s), "simple" == this.pagermode) { e.jqx.browser.msie && e.jqx.browser.version < 8 && (this.pagerbuttons.css("overflow", "visible"), this.pagerbuttons.css("padding", "3px")), this.pagerfirstbutton.attr("title", this.gridlocalization.pagerfirstbuttonstring), this.pagerlastbutton.attr("title", this.gridlocalization.pagerlastbuttonstring); var r = e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>"); r.addClass(this.toThemeProperty("jqx-icon-arrow-first")), this.pagerfirstbutton.wrapInner(r); var o = e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>"); o.addClass(this.toThemeProperty("jqx-icon-arrow-last")), this.pagerlastbutton.wrapInner(o), this.pagerdiv.append(this.pagerfirstbutton), this.pagerdiv.append(this.pagerleftbutton), this.pagerdiv.append(this.pagerbuttons), this.pagerdiv.append(this.pagerrightbutton), this.pagerdiv.append(this.pagerlastbutton), this.pagerlastbutton.jqxButton({ cursor: "pointer", disabled: this.disabled, theme: this.theme }), this.pagerfirstbutton.jqxButton({ cursor: "pointer", disabled: this.disabled, theme: this.theme }), this.pagerbuttons.css("float", "left"), this.pagerlastbutton.css("float", "left"), this.pagerfirstbutton.css("float", "left"), this.pagerrightbutton.css("float", "left"), this.pagerleftbutton.css("float", "left"), this.pagergotoinput.hide(), this.pagershowrowscombo.hide(), this.pagergoto.hide(), this.pagershowrows.hide() } else this.pagergotoinput.show(), this.pagershowrowscombo.show(), this.pagergoto.show(), this.pagershowrows.show(); var a = function (e, t) { e.removeHandler(t, "mouseenter"), e.removeHandler(t, "mouseleave"), e.removeHandler(t, "mousedown"), e.removeHandler(t, "mouseup") }; a(this, this.pagerrightbutton), a(this, this.pagerleftbutton); var n = this.that; this.addHandler(this.pagerrightbutton, "mouseenter", function () { s.addClass(n.toThemeProperty("jqx-icon-arrow-right-hover")) }), this.addHandler(this.pagerleftbutton, "mouseenter", function () { i.addClass(n.toThemeProperty("jqx-icon-arrow-left-hover")) }), this.addHandler(this.pagerrightbutton, "mouseleave", function () { s.removeClass(n.toThemeProperty("jqx-icon-arrow-right-hover")) }), this.addHandler(this.pagerleftbutton, "mouseleave", function () { i.removeClass(n.toThemeProperty("jqx-icon-arrow-left-hover")) }), this.addHandler(this.pagerrightbutton, "mousedown", function () { s.addClass(n.toThemeProperty("jqx-icon-arrow-right-selected")) }), this.addHandler(this.pagerrightbutton, "mouseup", function () { s.removeClass(n.toThemeProperty("jqx-icon-arrow-right-selected")) }), this.addHandler(this.pagerleftbutton, "mousedown", function () { i.addClass(n.toThemeProperty("jqx-icon-arrow-left-selected")) }), this.addHandler(this.pagerleftbutton, "mouseup", function () { i.removeClass(n.toThemeProperty("jqx-icon-arrow-left-selected")) }) } }, gotopage: function (e) { if (null != e && void 0 != e || (e = 0), -1 == e && (e = 0), !(e < 0)) { var t = this.dataview.totalrecords; this.summaryrows && (t += this.summaryrows.length); var i = this.pagenum; this._raiseEvent(25, { oldpagenum: this.dataview.pagenum, pagenum: e, pagesize: this.dataview.pagesize }); var s = Math.ceil(t / this.pagesize); if (e >= s && (0 == this.dataview.totalrecords && (this.dataview.pagenum = 0, this.updatepagerdetails()), e > 0 && (e = s - 1)), (this.dataview.pagenum != e || this._requiresupdate) && this.pageable) { if (this.source.pager && this.source.pager(e, this.dataview.pagesize, this.dataview.pagenum), this.dataview.pagenum = e, this.virtualmode) { if (this.hiddens = new Array, this.expandedgroups = new Array, this.rendergridrows) { var r = e * this.dataview.pagesize, o = r + this.dataview.pagesize; if (null != r && null != o) return this.pagerrightbutton && (this.pagerrightbutton.jqxButton({ disabled: !0 }), this.pagerleftbutton.jqxButton({ disabled: !0 }), this.pagershowrowscombo.jqxDropDownList({ disabled: !0 })), this.pagerfirstbutton && (this.pagerfirstbutton.jqxButton({ disabled: !0 }), this.pagerlastbutton.jqxButton({ disabled: !0 })), this.updatebounddata("pagechanged"), this._raiseEvent(9, { pagenum: e, oldpagenum: i, pagesize: this.dataview.pagesize }), this.updatepagerdetails(), void (this.autosavestate && this.savestate && this.savestate()) } } else this.dataview.updateview(); if (this._loadrows(), this._updatepageviews(), this.tableheight = null, this._updatecolumnwidths(), this._updatecellwidths(), this._renderrows(this.virtualsizeinfo), this.updatepagerdetails(), this.autoheight || this.autorowheight) { var a = this.host.height() - this._gettableheight(); height = a + this._pageviews[0].height, height != this.host.height() && (this._arrange(), this._updatepageviews(), this.autorowheight && this._renderrows(this.virtualsizeinfo)) } null != this.editcell && this.endcelledit && this.endcelledit(this.editcell.row, this.editcell.column, !0, !1), this._raiseEvent(9, { pagenum: e, oldpagenum: i, pagesize: this.dataview.pagesize }), this.autosavestate && this.savestate && this.savestate() } } }, gotoprevpage: function () { if (this.dataview.pagenum > 0) this.gotopage(this.dataview.pagenum - 1); else if ("simple" != this.pagermode) { var e = this.dataview.totalrecords; this.summaryrows && (e += this.summaryrows.length); var t = Math.ceil(e / this.pagesize); this.gotopage(t - 1) } }, gotonextpage: function () { var e = this.dataview.totalrecords; this.summaryrows && (e += this.summaryrows.length); var t = Math.ceil(e / this.pagesize); this.dataview.pagenum < t - 1 ? this.gotopage(this.dataview.pagenum + 1) : "simple" != this.pagermode && this.gotopage(0) }, updatepagerdetails: function () { if (null != this.pagerdetails && this.pagerdetails.length > 0) { var t = this.dataview.pagenum * this.pagesize, i = (this.dataview.pagenum + 1) * this.pagesize; i >= this.dataview.totalrecords && (i = this.dataview.totalrecords); var s = this.dataview.totalrecords; this.summaryrows && (s += this.summaryrows.length, (this.dataview.pagenum + 1) * this.pagesize > this.dataview.totalrecords && (i = s)), t++; var r = Math.ceil(s / this.dataview.pagesize); if (r >= 1 && r--, r++, "simple" !== this.pagermode) this.pagergotoinput.find("input").val(this.dataview.pagenum + 1); else { var o = "", a = this.pagerbuttonscount; 0 != a && a || (a = 5); var n = 0; for (this.rtl && (n = a - 1) ; this.rtl && n >= 0 || !this.rtl && n < a;) { var l = 1 + n, h = this.dataview.pagenum / a; l += Math.floor(h) * a; d = this.toTP("jqx-grid-pager-number"); if (d += " " + this.toTP("jqx-rc-all"), l > r) break; if (this.rtl || 0 == n && l > a && (o += "<a class='" + d + "' tabindex=-1 href='javascript:;' data-page='" + (-1 + l) + "'>...</a>"), this.dataview.pagenum === l - 1 && (d += " " + this.toTP("jqx-fill-state-pressed")), this.rtl) { if (n === a - 1) { d = this.toTP("jqx-grid-pager-number"); r >= 1 + l && (o += "<a class='" + d + "' tabindex=-1 href='javascript:;' data-page='" + (1 + l) + "'>...</a>") } this.dataview.pagenum === l - 1 && (d += " " + this.toTP("jqx-fill-state-pressed")), o += "<a class='" + d + "' tabindex=-1 href='javascript:;' data-page='" + l + "'>" + l + "</a>" } else if (o += "<a class='" + d + "' tabindex=-1 href='javascript:;' data-page='" + l + "'>" + l + "</a>", n === a - 1) { d = this.toTP("jqx-grid-pager-number"); r >= 1 + l && (o += "<a class='" + d + "' tabindex=-1 href='javascript:;' data-page='" + (1 + l) + "'>...</a>") } if (this.rtl) { var d = this.toTP("jqx-grid-pager-number"); 0 == n && l > a && (o += "<a class='" + d + "' tabindex=-1 href='javascript:;' data-page='" + (-1 + l) + "'>...</a>") } this.rtl ? n-- : n++ } u = this.pagerbuttons.find("a"); this.removeHandler(u, "click"), this.removeHandler(u, "mouseenter"), this.removeHandler(u, "mouseleave"), this.pagerbuttons[0].innerHTML = o; var c = this, u = this.pagerbuttons.find("a"); c.addHandler(u, "click", function (t) { var i = e(t.target).attr("data-page"); return c.gotopage(parseInt(i) - 1), !1 }), c.addHandler(u, "mouseenter", function (t) { e(t.target).addClass(c.toTP("jqx-fill-state-hover")) }), c.addHandler(u, "mouseleave", function (t) { e(t.target).removeClass(c.toTP("jqx-fill-state-hover")) }) } this.pagergotoinput.attr("title", "1 - " + r), 0 == i && i < t && (t = 0), this.rtl ? this.pagerdetails[0].innerHTML = s + this.gridlocalization.pagerrangestring + i + "-" + t : this.pagerdetails[0].innerHTML = t + "-" + i + this.gridlocalization.pagerrangestring + s, t > i && this.gotoprevpage() } }, _updatepagedview: function (e, t, i) { var s = this.that; this.dataview.rows.length != this.dataview.pagesize && this.dataview.updateview(); for (var r = this.dataview.rows.length, o = 0; o < r; o++) { var a = this.dataview.rows[o].visibleindex, n = { index: a, height: this.heights[a], hidden: this.hiddens[a], details: this.details[a] }; if (void 0 == this.heights[a] && (this.heights[a] = this.rowsheight, n.height = this.rowsheight), void 0 == this.hiddens[a] && (this.hiddens[a] = !1, n.hidden = !1), void 0 == this.details[a] && (this.details[a] = null), n.height != s.rowsheight && (t -= s.rowsheight, t += n.height), n.hidden) t -= n.height; else { i += n.height; var l = 0; this.rowdetails && n.details && n.details.rowdetails && !n.details.rowdetailshidden && (i += l = n.details.rowdetailsheight, t += l) } } return this._pageviews[0] = { top: 0, height: i }, t } }) }(jQuery), function (e) { e.extend(e.jqx._jqxGrid.prototype, { _handledblclick: function (t, i) { if (null != t.target && !i.disabled && !e(t.target).ischildof(this.columnsheader)) { var s; if (t.which ? s = 3 == t.which : t.button && (s = 2 == t.button), !s) { var r; if (t.which ? r = 2 == t.which : t.button && (r = 1 == t.button), !r) { var o = this.showheader ? this.columnsheader.height() + 2 : 0, a = this._groupsheader() ? this.groupsheader.height() : 0; a += this.showtoolbar ? this.toolbarheight : 0; var n = this.host.offset(), l = t.pageX - n.left, h = t.pageY - o - n.top - a, d = this._hittestrow(l, h); if (d) { var c = d.row, u = d.index, p = t.target.className, m = this.table[0].rows[u]; if (null != m) { i.mousecaptured = !0, i.mousecaptureposition = { left: t.pageX, top: t.pageY - a }; for (var g = this.hScrollInstance.value, f = 0, v = (this.groupable && this.groups.length, 0) ; v < m.cells.length; v++) { var x = parseInt(e(this.columnsrow[0].cells[v]).css("left")), w = x - g; if (i.columns.records[v].pinned && (w = x), (null == (b = this._getcolumnat(v)) || !b.hidden) && w + e(this.columnsrow[0].cells[v]).width() >= l && l >= w) { f = v; break } } if (null != c) { var b = this._getcolumnat(f); -1 == p.indexOf("jqx-grid-group-expand") && -1 == p.indexOf("jqx-grid-group-collapse") && -1 != c.boundindex && i.begincelledit(i.getboundindex(c), b.datafield, b.defaulteditorvalue) } } } } } } }, _getpreveditablecolumn: function (e) { for (var t = this; e > 0;) { e--; var i = t.getcolumnat(e); if (!i) return null; if (i.editable && !i.hidden) return i } return null }, _getnexteditablecolumn: function (e) { for (var t = this; e < this.columns.records.length;) { e++; var i = t.getcolumnat(e); if (!i) return null; if (i.editable && !i.hidden) return i } return null }, _handleeditkeydown: function (t, i) { if (i.handlekeyboardnavigation && 1 == i.handlekeyboardnavigation(t)) return !0; var s = t.charCode ? t.charCode : t.keyCode ? t.keyCode : 0; if (i.showfilterrow && i.filterable && this.filterrow && e(t.target).ischildof(this.filterrow)) return !0; if (i.pageable && e(t.target).ischildof(this.pager)) return !0; if (this.showtoolbar && e(t.target).ischildof(this.toolbar)) return !0; if (this.showstatusbar && e(t.target).ischildof(this.statusbar)) return !0; if (this.rowdetails && e(t.target).ischildof(this.content.find("[role='rowgroup']"))) return !0; if (this.editcell) { if ("selectedrow" === this.editmode) return 13 === s ? this.endrowedit(this.editcell.row, !1) : 27 === s && this.endrowedit(this.editcell.row, !0), 9 !== s; if (null == this.editcell.columntype || "textbox" == this.editcell.columntype || "numberinput" == this.editcell.columntype || "combobox" == this.editcell.columntype || "datetimeinput" == this.editcell.columntype) { if (s >= 33 && s <= 40 && "multiplecellsadvanced" == i.selectionmode) { var r = "textbox" == this.editcell.columntype || null == this.editcell.columntype ? this.editcell.editor : this.editcell.editor.find("input"), o = i._selection(r), a = r.val().length; o.length > 0 && "datetimeinput" != this.editcell.columntype && (i._cancelkeydown = !0), o.start > 0 && 37 == s && (i._cancelkeydown = !0), o.start < a && 39 == s && "datetimeinput" != this.editcell.columntype && (i._cancelkeydown = !0), "datetimeinput" == this.editcell.columntype && 39 == s && o.start + o.length < a && (i._cancelkeydown = !0) } } else "dropdownlist" == this.editcell.columntype ? (37 == s || 39 == s && "multiplecellsadvanced" == i.selectionmode) && (i._cancelkeydown = !1) : "multiplecellsadvanced" == this.selectionmode && "textbox" != this.editcell.columntype && "numberinput" != this.editcell.columntype && (i._cancelkeydown = !0); if (32 == s && "checkbox" == i.editcell.columntype && (T = i.getcolumn(i.editcell.datafield)).editable) { k = !i.getcellvalue(i.editcell.row, i.editcell.column); return (!T.cellbeginedit || 0 != (I = T.cellbeginedit(i.editcell.row, T.datafield, T.columntype, !k))) && (i.setcellvalue(i.editcell.row, i.editcell.column, k, !0), i._raiseEvent(18, { rowindex: i.editcell.row, datafield: i.editcell.column, oldvalue: !k, value: k, columntype: "checkbox" }), !1) } if (9 == s) { var n = this.editcell.row, l = w = this.editcell.column, h = i._getcolumnindex(w), d = !1, c = i.getrowvisibleindex(n); if (this.editchar = "", 0 != this.editcell.validated) { if (t.shiftKey ? (T = i._getpreveditablecolumn(h)) && (w = T.datafield, d = !0, -1 != i.selectionmode.indexOf("cell") && (i.selectprevcell(n, l), setTimeout(function () { i.ensurecellvisible(c, w) }, 10))) : (T = i._getnexteditablecolumn(h)) && (w = T.datafield, d = !0, -1 != i.selectionmode.indexOf("cell") && (i.selectnextcell(n, l), i._oldselectedcell = i.selectedcell, setTimeout(function () { i.ensurecellvisible(c, w) }, 10))), !d) return null != this.editcell && (i.endcelledit(n, w, !1), this._renderrows(this.virtualsizeinfo)), !0; i.begincelledit(n, w), null != this.editcell && "checkbox" == this.editcell.columntype && this._renderrows(this.virtualsizeinfo) } return !1 } if (13 == s) { var u = this.selectedcell; if (u) var p = this.getrowvisibleindex(u.rowindex); if (this.endcelledit(this.editcell.row, this.editcell.column, !1, !0), "multiplecellsadvanced" == this.selectionmode && null != (y = i.getselectedcell()) && i.selectcell && null == this.editcell && y.rowindex + 1 < this.dataview.totalrecords) if (this.sortcolumn != y.datafield) { c = this.getrowvisibleindex(y.rowindex); if ((_ = this.dataview.loadedrecords[c + 1]) && (!this.pageable || this.pageable && c + 1 < (this.dataview.pagenum + 1) * this.pagesize)) { this.clearselection(!1), this.selectcell(this.getboundindex(_), y.datafield); y = this.getselectedcell(); this.ensurecellvisible(_.visibleindex, y.datafield) } } else if (null != u && (m = this.dataview.loadedrecords[p + 1])) if (!this.pageable || this.pageable && p + 1 < this.pagesize) this.clearselection(!1), this.selectcell(this.getboundindex(m), y.datafield); else if (this.pageable && p + 1 >= this.pagesize) { this.clearselection(!1); var m = this.dataview.loadedrecords[p]; this.selectcell(this.getboundindex(m), y.datafield) } return !1 } if (27 == s) return this.endcelledit(this.editcell.row, this.editcell.column, !0, !0), !1 } else { var g = !1; if (113 == s && (g = !0), !t.ctrlKey && !t.altKey) { if (s >= 48 && s <= 57 && (this.editchar = String.fromCharCode(s), g = !0), s >= 65 && s <= 90) { this.editchar = String.fromCharCode(s); var f = !1; t.shiftKey ? f = t.shiftKey : t.modifiers && (f = !!(4 & t.modifiers)), f || (this.editchar = this.editchar.toLowerCase()), g = !0 } else s >= 96 && s <= 105 && (this.editchar = s - 96, this.editchar = this.editchar.toString(), g = !0); var v = e(".jqx-grid").length; g = g && (1 == v || v > 1 && i.focused); var x = e.data(document.body, "jqxgrid.edit"); if (void 0 !== x && "" !== x && (13 === s || g) && x != i.element.id) return !0 } if ((13 == s || g) && i.getselectedrowindex) { n = i.getselectedrowindex(); switch (i.selectionmode) { case "singlerow": case "multiplerows": case "multiplerowsextended": if (n >= 0) { for (var w = "", b = 0; b < i.columns.records.length; b++) if ((T = i.getcolumnat(b)).editable) { w = T.datafield; break } i.begincelledit(n, w) } break; case "singlecell": case "multiplecells": case "multiplecellsextended": null != (y = i.getselectedcell()) && "checkbox" != (T = i._getcolumnbydatafield(y.datafield)).columntype && i.begincelledit(y.rowindex, y.datafield); break; case "multiplecellsadvanced": if (null != (y = i.getselectedcell())) if (13 == s) { if (i.selectcell && y.rowindex + 1 < i.dataview.totalrecords) { var c = this.getrowvisibleindex(y.rowindex), _ = this.dataview.loadedrecords[c + 1]; if (_) { this.clearselection(!1), this.selectcell(this.getboundindex(_), y.datafield); var y = this.getselectedcell(); this.ensurecellvisible(_.visibleindex, y.datafield) } } } else "selectedrow" !== i.editmode && i.begincelledit(y.rowindex, y.datafield) } return !1 } if (46 == s) { var j = i.getselectedcells(); if (-1 == i.selectionmode.indexOf("cell") && i._getcellsforcopypaste && (j = i._getcellsforcopypaste()), null != j && j.length > 0) { for (var q = 0; q < j.length; q++) if ((y = j[q]).datafield) { var T = i.getcolumn(y.datafield), C = i.getcellvalue(y.rowindex, y.datafield); if ("" !== C && T.editable && i.enablekeyboarddelete) { var S = null; if ("checkbox" == T.columntype && (T.threestatecheckbox || (S = !1)), T.cellbeginedit && 0 == (I = T.cellbeginedit(y.rowindex, T.datafield, T.columntype, S))) return !1; if (i._raiseEvent(17, { rowindex: y.rowindex, datafield: y.datafield, value: C }), q == j.length - 1 ? (i.setcellvalue(y.rowindex, y.datafield, S, !0), T.displayfield != T.datafield && i.setcellvalue(y.rowindex, T.displayfield, S, !0)) : (i.setcellvalue(y.rowindex, y.datafield, S, !1), T.displayfield != T.datafield && i.setcellvalue(y.rowindex, T.displayfield, S, !0)), T.cellendedit) T.cellendedit(y.rowindex, T.datafield, T.columntype, S); i._raiseEvent(18, { rowindex: y.rowindex, datafield: y.datafield, oldvalue: C, value: S }) } } return this.dataview.updateview(), this._renderrows(this.virtualsizeinfo), !1 } } if (32 == s && null != (y = i.getselectedcell()) && "checkbox" == (T = i.getcolumn(y.datafield)).columntype && T.editable) { var k = !i.getcellvalue(y.rowindex, y.datafield); if (T.cellbeginedit) { var I = T.cellbeginedit(y.rowindex, T.datafield, T.columntype, !k); if (0 == I) return !1 } return i._raiseEvent(17, { rowindex: y.rowindex, datafield: y.datafield, value: !k, columntype: "checkbox" }), i.setcellvalue(y.rowindex, y.datafield, k, !0), i._raiseEvent(18, { rowindex: y.rowindex, datafield: y.datafield, oldvalue: !k, value: k, columntype: "checkbox" }), !1 } } return !0 }, begincelledit: function (t, i, s, r, o) { var a = this.getcolumn(i); if (this._cellscache = new Array, null != i && "number" != a.columntype && "button" != a.columntype) { if (this.groupable) { if (this.groups.indexOf(i) >= 0) return; if (this.groups.indexOf(a.displayfield) >= 0) return } if (void 0 == this.editrow) { if (this.editcell) { if (this.editcell.row == t && this.editcell.column == i) return !0; if ("selectedrow" === this.editmode && this.editcell.row == t) return; if (0 == this.endcelledit(this.editcell.row, this.editcell.column, !1, !0, !1)) return } var n = "checkbox" == a.columntype || "button" == a.columntype; if (this.host.removeClass("jqx-disableselect"), this.content.removeClass("jqx-disableselect"), a.editable) { if (a.cellbeginedit) { var l = this.getcell(t, i); if (0 == a.cellbeginedit(t, i, a.columntype, null != l ? l.value : null)) return } var h = this.getrowvisibleindex(t); if (this.editcell = this.getcell(t, i), this.editcell && (this.editcell.visiblerowindex = h, !this.editcell.editing)) { if (n || (this.editcell.editing = !0), this.editcell.columntype = a.columntype, this.editcell.defaultvalue = s, void 0 != a.defaultvalue && (this.editcell.defaultvalue = a.defaultvalue), this.editcell.init = !0, "checkbox" != a.columntype && "selectedrow" != this.editmode && this._raiseEvent(17, { rowindex: t, datafield: a.datafield, value: this.editcell.value, columntype: a.columntype }), e.data(document.body, "jqxgrid.edit", this.element.id), !n) { var d = this.getrowvisibleindex(t); !1 !== r && this.ensurecellvisible(d, a.datafield), !1 !== o && this._renderrows(this.virtualsizeinfo) } if (this.editcell) return this.editcell.init = !1, !0 } } else { if (!this.editcell) return; this.editcell.editor = null, this.editcell.editing = !1, !1 !== o && this._renderrows(this.virtualsizeinfo), this.editcell = null } } } }, getScrollTop: function () { if (this._py) return pageYOffset; if (this._py = "undefined" != typeof pageYOffset, this._py) return pageYOffset; var e = document.body, t = document.documentElement; return (t = t.clientHeight ? t : e).scrollTop }, getScrollLeft: function () { if ("undefined" != typeof pageXOffset) return pageXOffset; var e = document.body, t = document.documentElement; return (t = t.clientHeight ? t : e).scrollLeft }, endcelledit: function (t, i, s, r, o) { if (void 0 != t && void 0 != i || (this.editcell && (t = this.editcell.row, i = this.editcell.column), void 0 == s && (s = !0)), this.editcell) { var a = this.getcolumn(i), n = this; if ("selectedrow" !== n.editmode) { var l = function () { if (0 != o) { if (n.isTouchDevice()) return; if (!n.isNestedGrid) { var e = n.getScrollTop(), t = n.getScrollLeft(); try { n.element.focus(), n.content.focus(), e != n.getScrollTop() && window.scrollTo(t, e), setTimeout(function () { n.element.focus(), n.content.focus(), e != n.getScrollTop() && window.scrollTo(t, e) }, 10) } catch (e) { } } } }; if ("checkbox" == a.columntype || "button" == a.columntype) return this.editcell && (this.editcell.editor = null, this.editcell.editing = !1, this.editcell = null), !0; var h = this._geteditorvalue(a), d = function (e) { if (e._hidecelleditor(), a.cellendedit && a.cellendedit(t, i, a.columntype, e.editcell.value, h), e.editchar = null, a.displayfield != a.datafield) { var s = e.getcellvalue(e.editcell.row, a.displayfield), o = e.editcell.value; oldvalue = { value: o, label: s } } else oldvalue = e.editcell.value; e._raiseEvent(18, { rowindex: t, datafield: i, displayfield: a.displayfield, oldvalue: h, value: h, columntype: a.columntype }), e.editcell.editor = null, e.editcell.editing = !1, e.editcell = null, (r || void 0 == r) && e._renderrows(e.virtualsizeinfo), l(), e.enablebrowserselection || (e.host.addClass("jqx-disableselect"), e.content.addClass("jqx-disableselect")) }; if (s) return d(this), !1; if (this.validationpopup && (this.validationpopup.hide(), this.validationpopuparrow.hide()), a.cellvaluechanging) { var c = a.cellvaluechanging(t, i, a.columntype, this.editcell.value, h); void 0 != c && (h = c) } if (a.validation) { var u = this.getcell(t, i); try { var p = a.validation(u, h), m = this.gridlocalization.validationstring; if (void 0 != p.message && (m = p.message), !("boolean" == typeof p ? p : p.result)) return void 0 != p.showmessage && 1 != p.showmessage || this._showvalidationpopup(t, i, m), this.editcell.validated = !1, !1 } catch (e) { return this._showvalidationpopup(t, i, this.gridlocalization.validationstring), this.editcell.validated = !1, !1 } } if (a.displayfield != a.datafield) { var g = this.getcellvalue(this.editcell.row, a.displayfield), f = this.editcell.value; oldvalue = { value: f, label: g } } else oldvalue = this.editcell.value; return a.cellendedit && 0 == a.cellendedit(t, i, a.columntype, this.editcell.value, h) ? (this._raiseEvent(18, { rowindex: t, datafield: i, displayfield: a.displayfield, oldvalue: oldvalue, value: oldvalue, columntype: a.columntype }), d(this), !1) : (this._raiseEvent(18, { rowindex: t, datafield: i, displayfield: a.displayfield, oldvalue: oldvalue, value: h, columntype: a.columntype }), this._hidecelleditor(!1), void 0 != this.editcell && (this.editcell.editor = null, this.editcell.editing = !1), this.editcell = null, this.editchar = null, this.setcellvalue(t, i, h, r), this.enablebrowserselection || (this.host.addClass("jqx-disableselect"), this.content.addClass("jqx-disableselect")), e.jqx.browser.msie || l(), e.data(document.body, "jqxgrid.edit", ""), !0) } this.endrowedit(t, s) } }, beginrowedit: function (t) { var i = this; i._oldselectedrow = t, this._cellscache = new Array; var s = !1; if ("selectedrow" != this.editmode && (s = !0), s) { var r = this.editmode; this.editmode = "selectedrow" } e.each(this.columns.records, function (e, s) { if (i.editable && this.editable) { var r = i.getcell(t, this.datafield); i.begincelledit(t, this.datafield, null, !1, !1), i._raiseEvent(17, { rowindex: t, datafield: this.datafield, value: r.value, columntype: this.columntype }) } }), i.editcell && (i.editcell.init = !0), this._renderrows(this.virtualsizeinfo), s && (this.editmode = r) }, endrowedit: function (t, i) { j = this; if (!this.editcell) return !1; if (void 0 == this.editcell.editor) return !1; var s = !1; if ("selectedrow" != this.editmode && (s = !0), s) { var r = this.editmode; this.editmode = "selectedrow" } var o = !1, a = {}; this.validationpopup && (this.validationpopup.hide(), this.validationpopuparrow.hide()); for (x = 0; x < this.columns.records.length; x++) if ((w = this.columns.records[x]).editable && !w.hidden && "checkbox" != w.columntype) { var n = this._geteditorvalue(w), l = function (e) { e._hidecelleditor(); var i = e.getcellvalue(e.editcell.row, w.displayfield); if (w.cellendedit && w.cellendedit(t, b, w.columntype, i, n), e.editchar = null, w.displayfield != w.datafield) { var s = e.getcellvalue(e.editcell.row, w.displayfield); h = { value: i, label: s } } else h = i; e._raiseEvent(18, { rowindex: t, datafield: b, displayfield: w.displayfield, oldvalue: i, value: i, columntype: w.columntype }), e.editcell.editing = !1 }; if (i) l(this); else { if (w.cellvaluechanging) { var h = this.getcellvalue(this.editcell.row, w.displayfield), d = w.cellvaluechanging(t, b, w.columntype, h, n); void 0 != d && (n = d) } b = w.datafield; if (w.validation) { var c = this.getcell(t, w.datafield); try { var u = w.validation(c, n), p = this.gridlocalization.validationstring; if (void 0 != u.message && (p = u.message), !(q = "boolean" == typeof u ? u : u.result)) { void 0 != u.showmessage && 1 != u.showmessage || this._showvalidationpopup(t, b, p), o = !0, this.editcell[w.datafield].validated = !1; continue } } catch (e) { this._showvalidationpopup(t, b, this.gridlocalization.validationstring), this.editcell[w.datafield].validated = !1, o = !0; continue } } if (w.displayfield != w.datafield) { var m = this.getcellvalue(this.editcell.row, w.displayfield), g = this.editcell.value; h = { value: g, label: m } } else h = this.getcellvalue(this.editcell.row, w.displayfield); a[w.datafield] = { newvalue: n, oldvalue: h } } } var f = {}, v = {}; if (!o) { this._hidecelleditor(!1); for (var x = 0; x < this.columns.records.length; x++) { var w = this.columns.records[x], b = w.datafield; if (!w.hidden && w.editable) if ("checkbox" != w.columntype) { if (a[w.datafield]) { var n = a[w.datafield].newvalue, h = a[w.datafield].oldvalue; w.cellendedit && 0 == w.cellendedit(t, b, w.columntype, h, n) ? (this._raiseEvent(18, { rowindex: t, datafield: b, displayfield: w.displayfield, oldvalue: h, value: h, columntype: w.columntype }), l(this)) : (this.source.updaterow || this._raiseEvent(18, { rowindex: t, datafield: w.datafield, displayfield: w.displayfield, oldvalue: h, value: n, columntype: w.columntype }), f[w.datafield] = n, v[w.datafield] = h) } } else { n = this.getcellvalue(t, w.displayfield); this._raiseEvent(18, { rowindex: t, datafield: w.datafield, displayfield: w.displayfield, oldvalue: n, value: n, columntype: w.columntype }) } } var _ = this.getrowid(t), y = this.getrowdata(t); if (e.each(f, function (e, t) { if (t && void 0 != t.label) { var i = j.getcolumn(e); y[i.displayfield] = t.label, y[i.datafield] = t.value } else y[e] = t }), this.enablebrowserselection || (this.host.addClass("jqx-disableselect"), this.content.addClass("jqx-disableselect")), e.data(document.body, "jqxgrid.edit", ""), this.editcell = null, this.editchar = null, this.source.updaterow) { var j = this, q = function (i) { var s = j.source.updaterow; j.source.updaterow = null, 0 == i ? (e.each(v, function (e, t) { if (t && void 0 != t.label) { var i = j.getcolumn(e); y[i.displayfield] = t.label, y[i.datafield] = t.value } else y[e] = t }), j.updaterow(_, y)) : j.updaterow(_, y); for (var r = 0; r < j.columns.records.length; r++) { var o = j.columns.records[r]; o.datafield; j._raiseEvent(18, { rowindex: t, datafield: o.datafield, displayfield: o.displayfield, oldvalue: v[o.datafield], value: y[o.displayfield], columntype: o.columntype }) } j.source.updaterow = s }; try { void 0 == this.source.updaterow(_, y, q) && !0 } catch (e) { return void !1 } } else this.updaterow(_, y), this._renderrows(this.virtualsizeinfo) } return s && (this.editmode = r), o }, _selection: function (e) { if ("selectionStart" in e[0]) { var t = e[0], i = t.selectionEnd - t.selectionStart; return { start: t.selectionStart, end: t.selectionEnd, length: i, text: t.value } } var s = document.selection.createRange(); if (null == s) return { start: 0, end: t.value.length, length: 0 }; var r = e[0].createTextRange(), o = r.duplicate(); r.moveToBookmark(s.getBookmark()), o.setEndPoint("EndToStart", r); i = s.text.length; return { start: o.text.length, end: o.text.length + s.text.length, length: i, text: s.text } }, _setSelection: function (e, t, i) { if ("selectionStart" in i[0]) i[0].focus(), i[0].setSelectionRange(e, t); else { var s = i[0].createTextRange(); s.collapse(!0), s.moveEnd("character", t), s.moveStart("character", e), s.select() } }, findRecordIndex: function (e, t, i) { var i = i; if (t) for (var s = i.length, r = 0; r < s; r++) if (e == i[r].label) return r; return -1 }, _destroyeditors: function () { var t = this; this.columns.records && (e.each(this.columns.records, function (i, s) { var r = e.trim(this.datafield).split(" ").join(""); switch (this.columntype) { case "dropdownlist": var o = t.editors["dropdownlist_" + r]; o && (o.jqxDropDownList("destroy"), t.editors["dropdownlist_" + r] = null); break; case "combobox": var a = t.editors["combobox_" + r]; a && (a.jqxComboBox("destroy"), t.editors["combobox_" + r] = null); break; case "datetimeinput": var n = t.editors["datetimeinput_" + this.datafield]; n && (n.jqxDateTimeInput("destroy"), t.editors["datetimeinput_" + r] = null); break; case "numberinput": var l = t.editors["numberinput_" + r]; l && (l.jqxNumberInput("destroy"), t.editors["numberinput_" + r] = null); break; case "custom": case "template": if (this.destroycustomeditor && (this.destroycustomeditor(t.editors["customeditor_" + r]), t.editors["customeditor_" + r] = null), this.destrotemplateeditor) for (var h = t.getrows.length(), d = 0; d < h; d++) this.destrotemplateeditor(t.editors["templateeditor_" + r + "_" + d]), t.editors["templateeditor_" + r + "_" + d] = null; break; case "textbox": default: var c = t.editors["textboxeditor_" + r]; c && (t.removeHandler(c, "keydown"), t.editors["textbox_" + r] = null) } }), t.editors = new Array) }, _showcelleditor: function (t, i, s, r, o) { if (void 0 != s && null != this.editcell && ("checkbox" != i.columntype || !i.editable)) { void 0 == o && (o = !0), "selectedrow" == this.editmode && (this.editchar = "", o = !1); var a = i.datafield, n = e(s), l = this, h = this.editcell.editor, d = this.getcellvalue(t, a), c = this.getcelltext(t, a), u = this.hScrollInstance.value, p = parseInt(u); this.columns.records.indexOf(i); this.editcell.element = s, 0 == this.editcell.validated && this._showvalidationpopup(); var m = function (e) { l.hScrollInstance.isScrolling() || l.vScrollInstance.isScrolling() || o && (l.isTouchDevice() || (e.focus(), 0 != l.gridcontent[0].scrollTop && (l.scrolltop(Math.abs(l.gridcontent[0].scrollTop)), l.gridcontent[0].scrollTop = 0), 0 != l.gridcontent[0].scrollLeft && (l.gridcontent[0].scrollLeft = 0))) }; switch (i.columntype) { case "dropdownlist": if (this.host.jqxDropDownList) { s.innerHTML = ""; var g = e.trim(i.datafield).split(" ").join(""), f = e.trim(i.displayfield).split(" ").join(""); -1 != g.indexOf(".") && (g = g.replace(".", "")), -1 != f.indexOf(".") && (f = f.replace(".", "")); var v = this.editors["dropdownlist_" + g]; if ((h = void 0 == v ? e("<div style='border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='dropdownlisteditor'></div>") : v).css("top", e(s).parent().position().top), this.oldhscroll ? h.css("left", -p + parseInt(e(s).position().left)) : h.css("left", parseInt(e(s).position().left)), i.pinned && h.css("left", p + parseInt(e(s).position().left)), void 0 == v) { h.prependTo(this.table), h[0].id = "dropdownlisteditor" + this.element.id + g; _ = null; if (b = !!this.source._source) { y = { localdata: this.source.records, datatype: this.source.datatype, async: !1 }; _ = new e.jqx.dataAdapter(y, { autoBind: !1, async: !1, uniqueDataFields: [f], autoSort: !0, autoSortField: f }) } else _ = new e.jqx.dataAdapter(this.source, { autoBind: !1, uniqueDataFields: [f], async: !1, autoSort: !0, autoSortField: f }); j = !i.createeditor; h.jqxDropDownList({ enableBrowserBoundsDetection: !0, keyboardSelection: !1, source: _, rtl: this.rtl, autoDropDownHeight: j, theme: this.theme, width: n.width() - 2, height: n.height() - 2, displayMember: f, valueMember: a }), this.editors["dropdownlist_" + g] = h, i.createeditor && i.createeditor(t, d, h) } i._requirewidthupdate && h.jqxDropDownList({ width: n.width() - 2 }); q = h.jqxDropDownList("listBox").visibleItems; i.createeditor || (q.length < 8 ? h.jqxDropDownList("autoDropDownHeight", !0) : h.jqxDropDownList("autoDropDownHeight", !1)); var d = this.getcellvalue(t, f), x = this.findRecordIndex(d, f, q); if (r && ("" != d ? h.jqxDropDownList("selectIndex", x, !0) : h.jqxDropDownList("selectIndex", -1)), !this.editcell) return; void 0 != this.editcell.defaultvalue && h.jqxDropDownList("selectIndex", this.editcell.defaultvalue, !0), o && h.jqxDropDownList("focus") } break; case "combobox": if (this.host.jqxComboBox) { s.innerHTML = ""; var g = e.trim(i.datafield).split(" ").join(""), f = e.trim(i.displayfield).split(" ").join(""); -1 != g.indexOf(".") && (g = g.replace(".", "")), -1 != f.indexOf(".") && (f = f.replace(".", "")); var w = this.editors["combobox_" + g]; if ((h = void 0 == w ? e("<div style='border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='comboboxeditor'></div>") : w).css("top", e(s).parent().position().top), this.oldhscroll ? h.css("left", -p + parseInt(e(s).position().left)) : h.css("left", parseInt(e(s).position().left)), i.pinned && h.css("left", p + parseInt(e(s).position().left)), void 0 == w) { h.prependTo(this.table), h[0].id = "comboboxeditor" + this.element.id + g; var b = !!this.source._source, _ = null; if (b) { var y = { localdata: this.source.records, datatype: this.source.datatype, async: !1 }; _ = new e.jqx.dataAdapter(y, { autoBind: !1, async: !1, uniqueDataFields: [f], autoSort: !0, autoSortField: f }) } else _ = new e.jqx.dataAdapter(this.source, { autoBind: !1, uniqueDataFields: [f], async: !1, autoSort: !0, autoSortField: f }); var j = !i.createeditor; h.jqxComboBox({ enableBrowserBoundsDetection: !0, keyboardSelection: !1, source: _, rtl: this.rtl, autoDropDownHeight: j, theme: this.theme, width: n.width() - 2, height: n.height() - 2, displayMember: f, valueMember: a }), h.removeAttr("tabindex"), h.find("div").removeAttr("tabindex"), this.editors["combobox_" + g] = h, i.createeditor && i.createeditor(t, d, h) } i._requirewidthupdate && h.jqxComboBox({ width: n.width() - 2 }); var q = h.jqxComboBox("listBox").visibleItems; i.createeditor || (q.length < 8 ? h.jqxComboBox("autoDropDownHeight", !0) : h.jqxComboBox("autoDropDownHeight", !1)); var d = this.getcellvalue(t, f), x = this.findRecordIndex(d, f, q); if (r && ("" != d ? (h.jqxComboBox("selectIndex", x, !0), h.jqxComboBox("val", d)) : (h.jqxComboBox("selectIndex", -1), h.jqxComboBox("val", d))), !this.editcell) return; void 0 != this.editcell.defaultvalue && h.jqxComboBox("selectIndex", this.editcell.defaultvalue, !0), this.editchar && this.editchar.length > 0 && h.jqxComboBox("input").val(this.editchar), o && setTimeout(function () { if (m(h.jqxComboBox("input")), h.jqxComboBox("_setSelection", 0, 0), l.editchar) h.jqxComboBox("_setSelection", 1, 1), l.editchar = null; else { var e = h.jqxComboBox("input").val(); h.jqxComboBox("_setSelection", 0, e.length) } }, 10) } break; case "datetimeinput": if (this.host.jqxDateTimeInput) { s.innerHTML = "", -1 != (g = e.trim(i.datafield).split(" ").join("")).indexOf(".") && (g = g.replace(".", "")); var T = this.editors["datetimeinput_" + g]; if ((h = void 0 == T ? e("<div style='border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='datetimeeditor'></div>") : T).show(), h.css("top", e(s).parent().position().top), this.oldhscroll ? h.css("left", -p + parseInt(e(s).position().left)) : h.css("left", parseInt(e(s).position().left)), i.pinned && h.css("left", p + parseInt(e(s).position().left)), void 0 == T) { h.prependTo(this.table), h[0].id = "datetimeeditor" + this.element.id + g; var C = { calendar: this.gridlocalization }; h.jqxDateTimeInput({ enableBrowserBoundsDetection: !0, localization: C, _editor: !0, theme: this.theme, rtl: this.rtl, width: n.width(), height: n.height(), formatString: i.cellsformat }), this.editors["datetimeinput_" + g] = h, i.createeditor && i.createeditor(t, d, h) } if (i._requirewidthupdate && h.jqxDateTimeInput({ width: n.width() - 2 }), r) { if ("" != d && null != d) { var S = new Date(d); "Invalid Date" == S && this.source.getvaluebytype && (S = this.source.getvaluebytype(d, { name: i.datafield, type: "date" })), h.jqxDateTimeInput("setDate", S) } else h.jqxDateTimeInput("setDate", null); void 0 != this.editcell.defaultvalue && h.jqxDateTimeInput("setDate", this.editcell.defaultvalue) } o && setTimeout(function () { m(h.jqxDateTimeInput("dateTimeInput")) }, 10) } break; case "numberinput": if (this.host.jqxNumberInput) { s.innerHTML = "", -1 != (g = e.trim(i.datafield).split(" ").join("")).indexOf(".") && (g = g.replace(".", "")); var k = this.editors["numberinput_" + g]; if ((h = void 0 == k ? e("<div style='border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='numbereditor'></div>") : k).show(), h.css("top", e(s).parent().position().top), this.oldhscroll ? h.css("left", -p + parseInt(e(s).position().left)) : h.css("left", parseInt(e(s).position().left)), i.pinned && h.css("left", p + parseInt(e(s).position().left)), void 0 == k) { h.prependTo(this.table), h[0].id = "numbereditor" + this.element.id + g; var I = "", D = "left", P = 2; i.cellsformat ? -1 != i.cellsformat.indexOf("c") ? (I = this.gridlocalization.currencysymbol, D = "before" == (D = this.gridlocalization.currencysymbolposition) ? "left" : "right", i.cellsformat.length > 1 && (P = parseInt(i.cellsformat.substring(1), 10))) : -1 != i.cellsformat.indexOf("p") && (I = this.gridlocalization.percentsymbol, D = "right", i.cellsformat.length > 1 && (P = parseInt(i.cellsformat.substring(1), 10))) : P = 0, h.jqxNumberInput({ decimalSeparator: this.gridlocalization.decimalseparator, decimalDigits: P, inputMode: "simple", theme: this.theme, rtl: this.rtl, width: n.width() - 1, height: n.height() - 1, spinButtons: !0, symbol: I, symbolPosition: D }), this.editors["numberinput_" + g] = h, i.createeditor && i.createeditor(t, d, h) } if (i._requirewidthupdate && h.jqxNumberInput({ width: n.width() - 2 }), r) { if ("" != d && null != d) { var B = d; h.jqxNumberInput("setDecimal", B) } else h.jqxNumberInput("setDecimal", 0); if (void 0 != this.editcell.defaultvalue && h.jqxNumberInput("setDecimal", this.editcell.defaultvalue), this.editchar && this.editchar.length > 0) { var z = parseInt(this.editchar); isNaN(z) || h.jqxNumberInput("setDecimal", z) } o && setTimeout(function () { if (m(h.jqxNumberInput("numberInput")), h.jqxNumberInput("_setSelectionStart", 0), l.editchar) i.cellsformat.length > 0 ? h.jqxNumberInput("_setSelectionStart", 2) : h.jqxNumberInput("_setSelectionStart", 1), l.editchar = null; else if (h.jqxNumberInput("spinButtons")) { e = h.jqxNumberInput("numberInput").val(); l._setSelection(h.jqxNumberInput("numberInput")[0], e.length, e.length) } else { var e = h.jqxNumberInput("numberInput").val(); l._setSelection(h.jqxNumberInput("numberInput")[0], 0, e.length) } }, 10) } } break; case "custom": s.innerHTML = "", -1 != (g = e.trim(i.datafield).split(" ").join("")).indexOf(".") && (g = g.replace(".", "")); var H = this.editors["customeditor_" + g + "_" + t]; if ((h = void 0 == H ? e("<div style='overflow: hidden; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='customeditor'></div>") : H).show(), h.css("top", e(s).parent().position().top), this.oldhscroll ? h.css("left", -p + parseInt(e(s).position().left)) : h.css("left", parseInt(e(s).position().left)), i.pinned && h.css("left", p + parseInt(e(s).position().left)), void 0 == H) { h.prependTo(this.table), h[0].id = "customeditor" + this.element.id + g + "_" + t, this.editors["customeditor_" + g + "_" + t] = h; var M = n.width() - 1, E = n.height() - 1; h.width(M), h.height(E), i.createeditor && i.createeditor(t, d, h, c, M, E, this.editchar) } i._requirewidthupdate && h.width(n.width() - 2); break; case "template": s.innerHTML = "", -1 != (g = e.trim(i.datafield).split(" ").join("")).indexOf(".") && (g = g.replace(".", "")); var A = this.editors["templateeditor_" + g]; if ((h = void 0 == A ? e("<div style='overflow: hidden; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='templateeditor'></div>") : A).show(), h.css("top", e(s).parent().position().top), this.oldhscroll ? h.css("left", -p + parseInt(e(s).position().left)) : h.css("left", parseInt(e(s).position().left)), i.pinned && h.css("left", p + parseInt(e(s).position().left)), void 0 == A) { h.prependTo(this.table), h[0].id = "templateeditor" + this.element.id + g, this.editors["templateeditor_" + g] = h; var M = n.width() - 1, E = n.height() - 1; h.width(M), h.height(E), i.createeditor && i.createeditor(t, d, h, c, M, E, this.editchar) } i._requirewidthupdate && h.width(n.width() - 2); break; case "textbox": default: s.innerHTML = "", (h = this.editors["textboxeditor_" + i.datafield] || e("<input autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' type='textbox' id='textboxeditor'/>"))[0].id = "textboxeditor" + this.element.id + i.datafield, h.appendTo(n), this.rtl && h.css("direction", "rtl"), (r || "" == h[0].className) && (h.addClass(this.toThemeProperty("jqx-input")), h.addClass(this.toThemeProperty("jqx-widget-content")), this.editchar && this.editchar.length > 0 ? h.val(this.editchar) : ("" != i.cellsformat && (d = this.getcelltext(t, a)), void 0 == d && (d = ""), h.val(d)), void 0 != this.editcell.defaultvalue && h.val(this.editcell.defaultvalue), h.width(n.width() + 1), h.height(n.height() + 1), i.createeditor && i.createeditor(t, d, h), "" != i.cellsformat && (-1 == i.cellsformat.indexOf("p") && -1 == i.cellsformat.indexOf("c") && -1 == i.cellsformat.indexOf("n") && -1 == i.cellsformat.indexOf("f") || this.editors["textboxeditor_" + i.datafield] || h.keydown(function (e) { var t = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0, s = String.fromCharCode(t), r = parseInt(s); if (isNaN(r)) return !0; if (l._selection(h).length > 0) return !0; var o = "", a = h.val(); if (i.cellsformat.length > 1) { n = parseInt(i.cellsformat.substring(1)); isNaN(n) && (n = 0) } else var n = 0; if (n > 0 && -1 != a.indexOf(l.gridlocalization.decimalseparator) && l._selection(h).start > a.indexOf(l.gridlocalization.decimalseparator)) return !0; for (var d = 0; d < a.length - n; d++) { var c = a.substring(d, d + 1); null != c.match(/^[0-9]+$/) && (o += c) } return !(o.length >= 11) && void 0 }))), this.editors["textboxeditor_" + i.datafield] = h, r && o && setTimeout(function () { m(h), l.editchar ? (l._setSelection(h[0], 1, 1), l.editchar = null) : l._setSelection(h[0], 0, h.val().length) }, 25) } r && i.initeditor && i.initeditor(t, d, h, c, this.editchar), h && (h[0].style.zIndex = 1 + s.style.zIndex, e.jqx.browser.msie && e.jqx.browser.version < 8 && (h[0].style.zIndex = 1 + this.columns.records.length + s.style.zIndex), h.css("display", "block"), this.editcell.editor = h, this.editcell[a] ? this.editcell[a].editor = h : (this.editcell[a] = {}, this.editcell[a].editor = h)), l.isTouchDevice() || setTimeout(function () { l.content && (l.content[0].scrollTop = 0, l.content[0].scrollLeft = 0), l.gridcontent && (l.gridcontent[0].scrollLeft = 0, l.gridcontent[0].scrollTop = 0) }, 10) } }, _setSelection: function (e, t, i) { try { if ("selectionStart" in e) e.setSelectionRange(t, i); else { var s = e.createTextRange(); s.collapse(!0), s.moveEnd("character", i), s.moveStart("character", t), s.select() } } catch (e) { } }, _hideeditors: function () { if (null != this.editcells) { var e = this; for (var t in this.editcells) e.editcell = e.editcells[t], e._hidecelleditor() } }, _hidecelleditor: function (e) { if (this.editcell) if ("selectedrow" !== this.editmode) { if ("checkbox" != this.editcell.columntype) { if (this.editcell.editor) switch (this.editcell.editor.hide(), this.editcell.columntype) { case "dropdownlist": this.editcell.editor.jqxDropDownList({ closeDelay: 0 }), this.editcell.editor.jqxDropDownList("hideListBox"), this.editcell.editor.jqxDropDownList({ closeDelay: 300 }); break; case "combobox": this.editcell.editor.jqxComboBox({ closeDelay: 0 }), this.editcell.editor.jqxComboBox("hideListBox"), this.editcell.editor.jqxComboBox({ closeDelay: 300 }); break; case "datetimeinput": var t = this.editcell.editor; t.jqxDateTimeInput("isOpened") && (t.jqxDateTimeInput({ closeDelay: 0 }), t.jqxDateTimeInput("hideCalendar"), t.jqxDateTimeInput({ closeDelay: 300 })) } this.validationpopup && (this.validationpopup.hide(), this.validationpopuparrow.hide()), this.isNestedGrid || 0 != e && this.element.focus() } } else { for (var i = 0; i < this.columns.records.length; i++) { var s = this.columns.records[i]; if (this.editcell[s.datafield] && this.editcell[s.datafield].editor) { this.editcell[s.datafield].editor.hide(); var r = this.editcell[s.datafield].editor; switch (s.columntype) { case "dropdownlist": r.jqxDropDownList({ closeDelay: 0 }), r.jqxDropDownList("hideListBox"), r.jqxDropDownList({ closeDelay: 300 }); break; case "combobox": r.jqxComboBox({ closeDelay: 0 }), r.jqxComboBox("hideListBox"), r.jqxComboBox({ closeDelay: 300 }); break; case "datetimeinput": r.jqxDateTimeInput("isOpened") && (r.jqxDateTimeInput({ closeDelay: 0 }), r.jqxDateTimeInput("hideCalendar"), r.jqxDateTimeInput({ closeDelay: 300 })) } } } this.validationpopup && (this.validationpopup.hide(), this.validationpopuparrow.hide()) } }, _geteditorvalue: function (t) { var i = new String; if (!this.editcell) return null; s = this.editcell.editor; if ("selectedrow" == this.editmode && this.editcell[t.datafield]) var s = this.editcell[t.datafield].editor; if (s) { switch (t.columntype) { case "textbox": default: if (i = s.val(), "" != t.cellsformat) { var r = "string", o = this.source.datafields || (this.source._source ? this.source._source.datafields : null); if (o) { var a = ""; e.each(o, function () { if (this.name == t.displayfield) return this.type && (a = this.type), !1 }), a && (r = a) } var n = "number" === r || "float" === r || "int" === r || "integer" === r, l = "date" === r || "time" === r; if (n || "string" === r && (-1 != t.cellsformat.indexOf("p") || -1 != t.cellsformat.indexOf("c") || -1 != t.cellsformat.indexOf("n") || -1 != t.cellsformat.indexOf("f"))) { if ("" === i && t.nullable) return ""; i.indexOf(this.gridlocalization.currencysymbol) > -1 && (i = i.replace(this.gridlocalization.currencysymbol, "")); (i = (i = function (e, t, i) { var s = e; if (t == i) return e; for (var r = s.indexOf(t) ; -1 != r;) r = (s = s.replace(t, i)).indexOf(t); return s }(i, this.gridlocalization.thousandsseparator, "")).replace(this.gridlocalization.decimalseparator, ".")).indexOf(this.gridlocalization.percentsymbol) > -1 && (i = i.replace(this.gridlocalization.percentsymbol, "")); for (var h = "", d = 0; d < i.length; d++) { var c = i.substring(d, d + 1); "-" === c && (h += "-"), "." === c && (h += "."), null != c.match(/^[0-9]+$/) && (h += c) } i = (i = h).replace(/ /g, ""), i = new Number(i), isNaN(i) && (i = "") } if (l || "string" === r && (-1 != t.cellsformat.indexOf("H") || -1 != t.cellsformat.indexOf("m") || -1 != t.cellsformat.indexOf("M") || -1 != t.cellsformat.indexOf("y") || -1 != t.cellsformat.indexOf("h") || -1 != t.cellsformat.indexOf("d"))) { if ("" === i && t.nullable) return ""; var u = i; "Invalid Date" != (i = new Date(i)) && null != i || (e.jqx.dataFormat && (i = e.jqx.dataFormat.tryparsedate(u, this.gridlocalization)), "Invalid Date" != i && null != i || (i = "")) } } t.displayfield != t.datafield && (i = { label: i, value: i }); break; case "checkbox": s.jqxCheckBox && (i = s.jqxCheckBox("checked")); break; case "datetimeinput": if (s.jqxDateTimeInput) { if (s.jqxDateTimeInput({ isEditing: !1 }), s.jqxDateTimeInput("_validateValue"), null == (i = s.jqxDateTimeInput("getDate"))) return null; i = new Date(i.toString()), t.displayfield != t.datafield && (i = { label: i, value: i }) } break; case "dropdownlist": if (s.jqxDropDownList) { var p = s.jqxDropDownList("selectedIndex"), m = s.jqxDropDownList("listBox").getVisibleItem(p); null == (i = t.displayfield != t.datafield ? m ? { label: m.label, value: m.value } : "" : m ? m.label : "") && (i = "") } break; case "combobox": s.jqxComboBox && (i = s.jqxComboBox("val"), t.displayfield != t.datafield && null != (m = s.jqxComboBox("getSelectedItem")) && (i = { label: m.label, value: m.value }), null == i && (i = "")); break; case "numberinput": if (s.jqxNumberInput) { this.touchdevice && s.jqxNumberInput("_doTouchHandling"); var g = s.jqxNumberInput("getDecimal"); i = new Number(g), i = parseFloat(i), isNaN(i) && (i = 0), t.displayfield != t.datafield && (i = { label: i, value: i }) } } t.geteditorvalue && (i = "selectedrow" == this.editmode ? t.geteditorvalue(this.editcell.row, this.getcellvalue(this.editcell.row, t.datafield), s) : t.geteditorvalue(this.editcell.row, this.editcell.value, s)) } return i }, hidevalidationpopups: function () { this.popups && (e.each(this.popups, function () { this.validation.remove(), this.validationrow.remove() }), this.popups = new Array), this.validationpopup && (this.validationpopuparrow.hide(), this.validationpopup.hide()) }, showvalidationpopup: function (t, i, s) { if (void 0 == s) var s = this.gridlocalization.validationstring; var r = e("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;'></div>"), o = e("<div style='width: 20px; height: 20px; z-index: 999999; top: 0px; left: 0px; position: absolute;'></div>"); r.html(s), o.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up")), r.addClass(this.toThemeProperty("jqx-grid-validation")), r.addClass(this.toThemeProperty("jqx-rc-all")), r.prependTo(this.table), o.prependTo(this.table); var a = this.hScrollInstance.value, n = parseInt(a), l = this.getcolumn(i).uielement, h = e(this.hittestinfo[t].visualrow); r.css("top", parseInt(h.position().top) + 30 + "px"); var d = parseInt(r.css("top")); o.css("top", d - 12), o.removeClass(), o.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up")); var c = !1; d >= this._gettableheight() && (o.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-up")), o.addClass(this.toThemeProperty("jqx-grid-validation-arrow-down")), (d = parseInt(h.position().top) - this.rowsheight - 5) < 0 && (d = 0, this.validationpopuparrow.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-down")), c = !0), r.css("top", d + "px"), o.css("top", d + r.outerHeight() - 9)); var u = -n + parseInt(e(l).position().left); o.css("left", n + u + 30); var p = r.width(); p + u > this.host.width() - 20 && (u -= p + u - this.host.width() + 40), c ? r.css("left", n + parseInt(e(l).position().left) - r.outerWidth()) : r.css("left", n + u), r.show(), o.show(), this.popups || (this.popups = new Array), this.popups[this.popups.length] = { validation: r, validationrow: o } }, _showvalidationpopup: function (t, i, s) { var r = this.editcell, o = this.editcell.editor; if ("selectedrow" == this.editmode && (r = this.editcell[i]) && r.editor && (o = r.editor, r.element = o), o && !(this.validationpopup && e.jqx.isHidden(this.validationpopup) && (this.validationpopup.remove && (this.validationpopup.remove(), this.validationpopuparrow.remove()), this.validationpopup = null, this.validationpopuparrow = null, void 0 === i && void 0 === s && this.editors && 0 === this.editors.length))) { if (this.validationpopup) this.validationpopup.html(s); else { var a = e("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;'></div>"), n = e("<div style='width: 20px; height: 20px; z-index: 999999; top: 0px; left: 0px; position: absolute;'></div>"); a.html(s), n.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up")), a.addClass(this.toThemeProperty("jqx-grid-validation")), a.addClass(this.toThemeProperty("jqx-rc-all")), a.prependTo(this.table), n.prependTo(this.table), this.validationpopup = a, this.validationpopuparrow = n } var l = this.hScrollInstance.value, h = parseInt(l); this.validationpopup.css("top", parseInt(e(r.element).parent().position().top) + (this.rowsheight + 5) + "px"); var d = parseInt(this.validationpopup.css("top")); this.validationpopuparrow.css("top", d - 12), this.validationpopuparrow.removeClass(), this.validationpopuparrow.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up")); var c = !1; d >= this._gettableheight() && (this.validationpopuparrow.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-up")), this.validationpopuparrow.addClass(this.toThemeProperty("jqx-grid-validation-arrow-down")), (d = parseInt(e(r.element).parent().position().top) - this.rowsheight - 5) < 0 && (d = 0, this.validationpopuparrow.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-down")), c = !0), this.validationpopup.css("top", d + "px"), this.validationpopuparrow.css("top", d + this.validationpopup.outerHeight() - 9)); var u = -h + parseInt(e(r.element).position().left); this.validationpopuparrow.css("left", h + u + 30); var p = this.validationpopup.width(); p + u > this.host.width() - 20 && (u -= p + u - this.host.width() + 40), c ? this.validationpopup.css("left", h + parseInt(e(r.element).position().left) - this.validationpopup.outerWidth()) : this.validationpopup.css("left", h + u), this.validationpopup.show(), this.validationpopuparrow.show() } } }) }(jQuery), function (e) { e.extend(e.jqx._jqxGrid.prototype, { _calculateaggregate: function (t, i, s, r) { var o = t.aggregates; if (o || (o = i), o) { for (var a = new Array, n = 0; n < o.length; n++) "count" != o[n] && (a[a.length] = t.cellsformat); if (this.source && this.source.getAggregatedData) { if (void 0 == r && (r = this.getrows()), this.virtualmode) { var r = new Array; e.each(this.source._source.records, function () { r.push(this) }) } if (void 0 == s || 1 == s) return l = this.source.getAggregatedData([{ name: t.datafield, aggregates: o, formatStrings: a }], this.gridlocalization, r); var l = this.source.getAggregatedData([{ name: t.datafield, aggregates: o }], this.gridlocalization, r); return l } } return null }, getcolumnaggregateddata: function (e, t, i, s) { var r = this.getcolumn(e), o = void 0 != i && 0 != i && i; if (null == t) return ""; var a = r.aggregates; r.aggregates = null; var n = this._calculateaggregate(r, t, o, s), l = {}; return n && (l = n[e]), r.aggregates = a, l }, refreshaggregates: function () { this._updatecolumnsaggregates() }, renderaggregates: function () { this._updateaggregates() }, _updatecolumnaggregates: function (t, i, s) { var r = this; if (i) if (s.children().remove(), s.html(""), t.aggregatesrenderer) { if (i) { a = t.aggregatesrenderer(i[t.datafield], t, s, this.getcolumnaggregateddata(t.datafield, i[t.datafield])); s.html(a) } } else e.each(i, function () { var t = this; for (o in t) { var i = e('<div style="position: relative; margin: 4px; overflow: hidden;"></div>'), a = o; a = r._getaggregatename(a), i.html(a + ":" + t[o]), r.rtl && i.addClass(r.toThemeProperty("jqx-rtl")), s.append(i) } }); else if (s.children().remove(), s.html(""), t.aggregatesrenderer) { var o = {}; t.aggregates && (o = this.getcolumnaggregateddata(t.datafield, t.aggregates)); var a = t.aggregatesrenderer({}, t, s, null); s.html(a) } }, _getaggregatetype: function (e) { switch (e) { case "min": case "max": case "count": case "avg": case "product": case "var": case "varp": case "stdev": case "stdevp": case "sum": return e } var t = e; for (var i in e) { t = i; break } return t }, _getaggregatename: function (e) { var t = e; switch (e) { case "min": t = "Min"; break; case "max": t = "Max"; break; case "count": t = "Count"; break; case "avg": t = "Avg"; break; case "product": t = "Product"; break; case "var": t = "Var"; break; case "stdevp": t = "StDevP"; break; case "stdev": t = "StDev"; break; case "varp": t = "VarP"; case "sum": t = "Sum" } if (e === t && "string" != typeof t) for (var i in e) { t = i; break } return t }, _updatecolumnsaggregates: function () { var t = this.getrows(), i = this.columns.records.length; if (void 0 != this.statusbar[0].cells) for (var s = 0; s < i; s++) { var r = e(this.statusbar[0].cells[s]), o = this.columns.records[s], a = this._calculateaggregate(o, null, !0, t); this._updatecolumnaggregates(o, a, r) } }, _updateaggregates: function () { var t = e('<div style="position: relative;" id="statusrow' + this.element.id + '"></div>'), i = 0, s = this.columns.records.length, r = this.toThemeProperty("jqx-grid-cell"); this.rtl && (r += " " + this.toThemeProperty("jqx-grid-cell-rtl"), i = -1), r += " " + this.toThemeProperty("jqx-grid-cell-pinned"); var o = s + 10, a = new Array; this.statusbar[0].cells = a; for (var n = 0; n < s; n++) { var l = this.columns.records[n], h = this._calculateaggregate(l), d = l.width; d < l.minwidth && (d = l.minwidth), d > l.maxwidth && (d = l.maxwidth); var c = r; l.cellsalign && (c += " " + this.toThemeProperty("jqx-" + l.cellsalign + "-align")); var u = e('<div style="overflow: hidden; position: absolute; height: 100%;" class="' + c + '"></div>'); t.append(u), u.css("left", i), this.rtl ? u.css("z-index", o++) : u.css("z-index", o--), u.width(d), u[0].left = i, l.hidden && l.hideable ? u.css("display", "none") : i += d, a[a.length] = u[0], this._updatecolumnaggregates(l, h, u) } e.jqx.browser.msie && e.jqx.browser.version < 8 && t.css("z-index", o--), t.width(parseFloat(i) + 2), t.height(this.statusbarheight), this.statusbar.children().remove(), this.statusbar.append(t), this.statusbar.removeClass(this.toThemeProperty("jqx-widget-header")), this.statusbar.addClass(r), this.statusbar.css("border-bottom-color", "transparent"), this.statusbar.css("border-top-width", "1px"), this.rtl && "hidden" != this.hScrollBar.css("visibility") && this._renderhorizontalscroll() } }) }(jQuery), function (e) { var t = function () { function i(e, t, i, o, a, n, l) { return this.hierarchy = a, this.exportFormat = n, this.filename = l, e.beginFile(l), s(e), r(e), e.endFile(l), e.getFile() } function s(t) { var i = !0; e.each(p, function () { if (this.hidden) return i = !1, !1 }), t.beginHeader(i); var s = 0; for (var r in p) { var o = a(r, p[r]); t.appendHeaderCell(p[r], r, o, i, s), s++ } t.endHeader(i) } function r(e) { if (e.beginBody(), this.hierarchy) { var t = function (i) { for (var s = 0; s < i.length; s += 1) void 0 !== i[s] && (e.beginRow(i[s].level), o(e, i[s], s, !0), i[s].records && (e.beginRows(i[s].level), t(i[s].records), e.endRows(i[s].level)), e.endRow(i[s].level)) }; return t(u), void e.endBody() } for (var i = 0; i < u.length; i += 1) void 0 !== u[i] && o(e, u[i], i); e.endBody() } function o(t, i, s, r) { var o; 1 != r && t.beginRow(); var a = 0; for (var n in p) { if (o = l(s, n)) { if (void 0 != o.level && o.index - 1 > i.level && o.index - 1 < o.maxLevel) { a++; continue } void 0 != o.maxLevel && o.index - 1 == o.maxLevel && ((o = e.extend({}, o)).merge = o.maxLevel - i.level - 1) } if (void 0 != i.level && void 0 != i.label && ("xml" === this.exportFormat || "json" === this.exportFormat)) { var h = {}; h.text = "group", t.appendBodyCell(i.label, h, o, i, a, "group"); break } i.hasOwnProperty(n) ? t.appendBodyCell(i[n], p[n], o, i, a) : t.appendBodyCell("", p[n], o, i, a), a++ } 1 != r && t.endRow() } function a(e, t) { if (t.style) return m[t.style]; var i = n(); return i.length > 0 ? i[0].style : null } function n() { return f || (f = new Array, e.each(m, function (e, t) { f[f.length] = { name: e, style: t } })), f } function l(e, t) { var i = p[t]; if (i) { if (i.customCellStyles) { var s = i.customCellStyles[e]; if (s) return m[s] } if (i.cellStyle) return i.cellAltStyle ? 0 == (o = e % 2) ? m[i.cellStyle] : m[i.cellAltStyle] : m[i.cellStyle]; var r = n(); if (r.length > 0) { var o = e % (r.length - 1); return r[o + 1].style } } return null } function h(e, t, i) { var s = document.createElement("input"); return s.name = t, s.value = e, s.type = "hidden", i.appendChild(s), s } function d(e, t, i) { var s = document.createElement("textarea"); return s.name = t, s.value = e, i.appendChild(s), s } function c(e, t, i, s, r) { var o = document.createElement("form"); return h(e, "filename", o), h(t, "format", o), d(i, "content", o), void 0 != s && "" != s || (s = window && window.location.toString().indexOf("jqwidgets.com") >= 0 ? "http://jqwidgets.com/export_server/save-file.php" : "http://jquerygrid.net/export_server/save-file.php"), o.action = s, o.method = "post", r && (o.acceptCharset = r), document.body.appendChild(o), o } var u, p, m, g, f, v = {}; return g = function (e, s, r, o, a, n) { if (!(this instanceof t)) return new t(e, s, r, a, n); u = e, p = s, m = r, this.exportTo = function (e, t, s, r) { e = e.toString().toLowerCase(); var o = v[e]; if (void 0 === o) throw "You can't export to " + e + " format."; return i(o, u, p, m, t, s, r) }, this.exportToFile = function (e, t, i, s, r) { var o = c(t, e, this.exportTo(e, r, e, t), i, s); o.submit(), document.body.removeChild(o) }, this.exportToLocalFile = function (e, t, i, s) { var r = this.exportTo(e, i, s); document.location.href = "data:application/octet-stream;filename=" + t + "," + encodeURIComponent(r) } }, g.extend = function (t, i) { if (!(i instanceof e.jqx.dataAdapter.DataExportModuleBase)) throw "The module " + t + " is not instance of DataExportModuleBase."; v[t] = i }, g }(); e.jqx.dataAdapter.ArrayExporter = t }(jQuery), function (e) { e.jqx.dataAdapter.DataExportModuleBase = function () { this.formatData = function (t, i, s, r) { if ("date" === i) { var o = ""; if ("string" == typeof t && (t = o = e.jqx.dataFormat.tryparsedate(t)), "" === t || null === t) return ""; if ("NaN" == (o = e.jqx.dataFormat.formatdate(t, s, r)).toString() || null == o) return ""; t = o } else if ("number" === i || "float" === i || "int" === i || "integer" == i) { if ("" === t || null === t) return ""; if (!isNaN(new Number(t))) { var a = e.jqx.dataFormat.formatnumber(t, s, r); if ("NaN" == a.toString()) return ""; t = a } } else t = t; return null === t ? "" : t }, this.getFormat = function (e) { var t = e ? e.formatString : "", i = e ? e.localization : "", s = "string"; return "number" != (s = e ? e.type : "string") && "float" != s || t || (t = "f2"), "int" != s && "integer" != s || t || (t = "n0"), "date" == s && (t || (t = "d")), { type: s, formatString: t, localization: i } }, this.beginFile = function () { throw "Not implemented!" }, this.beginHeader = function () { throw "Not implemented!" }, this.appendHeaderCell = function () { throw "Not implemented!" }, this.endHeader = function () { throw "Not implemented!" }, this.beginBody = function () { throw "Not implemented!" }, this.beginRow = function () { throw "Not implemented!" }, this.beginRows = function () { throw "Not implemented!" }, this.endRows = function () { throw "Not implemented!" }, this.appendBodyCell = function () { throw "Not implemented!" }, this.endRow = function () { throw "Not implemented!" }, this.endBody = function () { throw "Not implemented!" }, this.endFile = function () { throw "Not implemented!" }, this.getFile = function () { throw "Not implemented!" } } }(jQuery), function (e) { var t = function (e) { function t(e, t) { if (t) { var i = a.getFormat(t); e = a.formatData(e, i.type, i.formatString, i.localization) } return e = '"' + e + '"' } function i(i, r) { i = t(i, r), s += i + e } var s, r, o = 0, a = this; this.beginFile = function () { s = "" }, this.beginHeader = function () { }, this.appendHeaderCell = function (e, t, s, o, a) { if (s && void 0 != s.level) { if (a < s.maxLevel) return; if (a === s.maxLevel) { o && i(e.text); for (var n = 0; n < s.maxLevel; n++) i(""); return } } r = o, o && i(e.text) }, this.endHeader = function () { this.endRow() }, this.beginBody = function () { o = 0 }, this.beginRow = function () { (o > 0 || 0 == o && r) && (s += "\n"), o++ }, this.appendBodyCell = function (e, t, s, r, o) { if (s && void 0 != s.maxLevel && o === s.maxLevel) { i(e, t); for (var a = 0; a < s.maxLevel - r.level - 1; a++) i("", t) } else i(e, t) }, this.endRow = function () { s = s.substring(0, s.length - 1) }, this.endBody = function () { }, this.endFile = function () { }, this.getFile = function () { return s } }; t.prototype = new e.jqx.dataAdapter.DataExportModuleBase; var i = function () { }; i.prototype = new t(","); var s = function () { }; s.prototype = new t("\t"), e.jqx.dataAdapter.ArrayExporter.extend("csv", new i), e.jqx.dataAdapter.ArrayExporter.extend("tsv", new s) }(jQuery), function (e) { var t = function () { function e(e) { var t = ""; for (var i in e) e.hasOwnProperty(i) && (s && "font-size" == i && (e[i] = "100%"), t += i + ":" + e[i] + ";"); return t } var t, i, s = !1, r = 0; this.setPDF = function () { s = !0 }, this.beginFile = function (e) { t = s || void 0 == e ? '<table style="empty-cells: show;" cellspacing="0" cellpadding="2">' : '<html>\n\t<head>\n\t\t<title></title>\n\t\t<meta http-equiv=Content-type content="text/html; charset=UTF-8">\n\t</head>\n\t<body>\n\t\t<table style="empty-cells: show;" cellspacing="0" cellpadding="2">' }, this.beginHeader = function () { t += s ? "\n\t<thead><tr>" : "\n\t\t\t<thead>" }, this.appendHeaderCell = function (r, o, a, n) { if (i = n, n) if (s) t += '\n\t\t\t\t<th style="' + e(a) + '">' + r.text + "</th>"; else { if (a.disabled) return; a.merge ? r.width ? t += "\n\t\t\t\t<th colspan=" + (1 + a.merge) + ' style="width: ' + r.width + "px; " + e(a) + '">' + r.text + "</th>" : t += "\n\t\t\t\t<th colspan=" + (1 + a.merge) + ' style="' + e(a) + '">' + r.text + "</th>" : r.width ? t += '\n\t\t\t\t<th style="width: ' + r.width + "px; " + e(a) + '">' + r.text + "</th>" : t += '\n\t\t\t\t<th style="' + e(a) + '">' + r.text + "</th>" } }, this.endHeader = function () { t += s ? "\n\t</tr></thead>" : "\n\t\t\t</thead>" }, this.beginBody = function () { t += s ? "\n\t<tbody>" : "\n\t\t\t<tbody>", r = 0 }, this.beginRow = function () { t += s ? "\n\t<tr>" : "\n\t\t\t\t<tr>", r++ }, this.appendBodyCell = function (o, a, n) { var l = this.getFormat(a); "" === o && (o = "&nbsp;"), s ? t += 1 != r || i ? '\n\t\t\t\t\t<td style="' + e(n) + '">' + this.formatData(o, l.type, l.formatString, l.localization) + "</td>" : '\n\t\t\t\t\t<td style="' + e(n) + ' border-top-width: 1px;">' + this.formatData(o, l.type, l.formatString, l.localization) + "</td>" : n.merge ? t += 1 != r || i ? "\n\t\t\t\t\t<td colspan=" + (1 + n.merge) + ' style="' + e(n) + '">' + this.formatData(o, l.type, l.formatString, l.localization) + "</td>" : "\n\t\t\t\t\t<td colspan=" + (1 + n.merge) + ' style="' + e(n) + ' border-top-width: 1px;">' + this.formatData(o, l.type, l.formatString, l.localization) + "</td>" : t += 1 != r || i ? '\n\t\t\t\t\t<td style="' + e(n) + '">' + this.formatData(o, l.type, l.formatString, l.localization) + "</td>" : '\n\t\t\t\t\t<td style="' + e(n) + ' border-top-width: 1px;">' + this.formatData(o, l.type, l.formatString, l.localization) + "</td>" }, this.endRow = function () { t += s ? "\n\t</tr>" : "\n\t\t\t\t</tr>" }, this.endBody = function () { t += s ? "\n\t</tbody>" : "\n\t\t\t</tbody>" }, this.endFile = function (e) { t += s || void 0 == e ? "\n</table>" : "\n\t\t</table>\n\t</body>\n</html>\n" }, this.getFile = function () { return t } }; t.prototype = new e.jqx.dataAdapter.DataExportModuleBase; var i = function () { }; i.prototype = new t; var s = function () { }; s.prototype = new t; var r = new s; r.setPDF(), e.jqx.dataAdapter.ArrayExporter.extend("html", new i), e.jqx.dataAdapter.ArrayExporter.extend("pdf", r) }(jQuery), function (e) { var t = function () { function e(e, t, i, s) { var r = "String", a = this.getFormat(t); null != e && "AG" == e.toString().substring(0, 2) ? (e = e.toString().substring(2), r = "String") : ("date" == a.type && (null !== (e = this.formatData(e, a.type, a.formatString, a.localization)) && "" !== e || (e = "", r = "String")), "string" == a.type && (null === e || void 0 === e ? e = "" : (e.toString().indexOf("&") >= 0 && (e = e.toString().replace(/&/g, "&amp;")), e.toString().indexOf(">") >= 0 && (e = e.toString().replace(/>/g, "&gt;")), e.toString().indexOf("<") >= 0 && (e = e.toString().replace(/</g, "&lt;")), e.toString().indexOf('"') >= 0 && (e = e.toString().replace(/"/g, "&quot;")), e.toString().indexOf("'") >= 0 && (e = e.toString().replace(/'/g, "&apos;")))), "number" != i.dataType && "float" != i.dataType && "int" != i.dataType && "integer" != i.dataType || (r = "Number", (null === (e = parseFloat(e)) || isNaN(e) || "" === e) && (e = "", r = "String"), e && "String" != r && "" != e && t && t.formatString && t.formatString.indexOf("p") >= 0 && (e /= 100), i.currencysymbol = t.localization.currencysymbol)); var l = o(i); i.merge ? n += '\n\t\t\t\t<Cell ss:MergeAcross="' + i.merge + '" ss:StyleID="' + l + '"><Data ss:Type="' + r + '">' + e + "</Data></Cell>" : n += '\n\t\t\t\t<Cell ss:StyleID="' + l + '"><Data ss:Type="' + r + '">' + e + "</Data></Cell>" } function t() { return "xls-style-" + (c += 1) } function i(e) { for (var t in d) if (s(e, d[t]) && s(d[t], e)) return t } function s(e, t) { var i = !0; for (var s in e) e[s] !== t[s] && (i = !1); return i } function r(e, t) { u.startStyle(e), u.buildAlignment(t), u.buildBorder(t), u.buildFont(t), u.buildInterior(t), u.buildFormat(t), u.closeStyle(), a += u.toString() } function o(e) { if (!e) return ""; var s = i(e); return void 0 === s && (s = t(), d[s] = e, r(s, e)), s } var a, n, l, h, d, c, u = { style: "", stylesMap: { font: { color: "Color", "font-family": "FontName", "font-style": "Italic", "font-weight": "Bold" }, interior: { "background-color": "Color", background: "Color" }, alignment: { left: "Left", center: "Center", right: "Right" } }, startStyle: function (e) { this.style += '\n\t\t<Style ss:ID="' + e + '" ss:Name="' + e + '">' }, buildAlignment: function (e) { if (e["text-align"]) { var t = this.stylesMap.alignment[e["text-align"]]; t || (t = "Left"); var i = '\n\t\t\t<Alignment ss:Vertical="Bottom" ss:Horizontal="' + t + '"/>'; this.style += i } }, buildBorder: function (e) { if (e["border-color"]) { var t = "\n\t\t\t<Borders>"; t += '\n\t\t\t\t<Border ss:Position="Bottom" ss:LineStyle="Continuous" ss:Weight="1" ss:Color="' + e["border-color"] + '"/>', t += '\n\t\t\t\t<Border ss:Position="Left" ss:LineStyle="Continuous" ss:Weight="1" ss:Color="' + e["border-color"] + '"/>', t += '\n\t\t\t\t<Border ss:Position="Right" ss:LineStyle="Continuous" ss:Weight="1" ss:Color="' + e["border-color"] + '"/>', t += '\n\t\t\t\t<Border ss:Position="Top" ss:LineStyle="Continuous" ss:Weight="1" ss:Color="' + e["border-color"] + '"/>', t += "\n\t\t\t</Borders>", this.style += t } }, buildFont: function (e) { var t = this.stylesMap.font, i = "\n\t\t\t<Font "; for (var s in t) void 0 !== e[s] && ("font-style" === s && "italic" === e[s].toString().toLowerCase() ? i += 'ss:Italic="1" ' : "font-weight" === s && "bold" === e[s].toString().toLowerCase() ? i += 'ss:Bold="1" ' : "color" === s && (i += "ss:" + t[s] + '="' + e[s] + '" ')); i += "/>", this.style += i }, buildInterior: function (e) { var t = this.stylesMap.interior, i = "\n\t\t\t<Interior ", s = !1; for (var r in t) void 0 !== e[r] && (i += "ss:" + t[r] + '="' + e[r] + '" ', s = !0); s && (i += 'ss:Pattern="Solid"'), i += "/>", this.style += i }, buildFormat: function (e) { if ("number" == e.dataType || "float" == e.dataType || "int" == e.dataType || "integer" == e.dataType) { var t = e.formatString; "" == t || -1 != t.indexOf("n") || -1 != t.indexOf("N") ? this.style += '\n\t\t\t<NumberFormat ss:Format="0"/>' : "f" == t || "F" == t || "D" == t || -1 != t.indexOf("d") ? this.style += '\n\t\t\t<NumberFormat ss:Format="#,##0.00_);[Red](#,##0.00)"/>' : -1 != t.indexOf("p") || -1 != t.indexOf("P") ? this.style += '\n\t\t\t<NumberFormat ss:Format="Percent"/>' : -1 == t.indexOf("c") && -1 == t.indexOf("C") || (8364 == parseInt(e.currencysymbol.charCodeAt(0)) ? this.style += '\n\t\t\t<NumberFormat ss:Format="Euro Currency"/>' : this.style += '\n\t\t\t<NumberFormat ss:Format="Currency"/>') } else "date" == e.dataType && (this.style += '\n\t\t\t<NumberFormat ss:Format="Short Date"/>') }, closeStyle: function () { this.style += "\n\t\t</Style>" }, toString: function () { var e = this.style; return this.style = "", e } }; this.beginFile = function () { d = {}, c = 0, a = '<?xml version="1.0"?>\n\t<?mso-application progid="Excel.Sheet"?> \n\t<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" \n\txmlns:o="urn:schemas-microsoft-com:office:office" \n\txmlns:x="urn:schemas-microsoft-com:office:excel" \n\txmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" \n\txmlns:html="http://www.w3.org/TR/REC-html40"> \n\t<DocumentProperties xmlns="urn:schemas-microsoft-com:office:office"> \n\t<Version>12.00</Version> \n\t</DocumentProperties> \n\t<ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel"> \n\t<WindowHeight>8130</WindowHeight> \n\t<WindowWidth>15135</WindowWidth> \n\t<WindowTopX>120</WindowTopX> \n\t<WindowTopY>45</WindowTopY> \n\t<ProtectStructure>False</ProtectStructure> \n\t<ProtectWindows>False</ProtectWindows> \n\t</ExcelWorkbook> \n\t<Styles>' }, this.beginHeader = function () { n = '\n\t<Worksheet ss:Name="Sheet1">\n\t\t<Table>', l = [], h = [] }, this.appendHeaderCell = function (e, t, i) { var s = void 0 != e.width ? e.width : 10 * e.text.length; n += '\n\t\t\t<Column ss:Width="' + s + '"/>', l.push(e), h.push(i) }, this.endHeader = function (t) { if (t) { this.beginRow(); for (var i = 0; i < l.length; i += 1) h[i].disabled || e.call(this, l[i].text, null, h[i]); this.endRow() } }, this.beginBody = function () { }, this.beginRow = function (e) { if (void 0 == e) n += "\n\t\t\t<Row>"; else { n += "\n\t\t\t"; for (var t = 0; t < e; t++) n += "\t"; n += "<Row>" } }, this.beginRows = function (e) { n += "\n\t\t\t\t<Rows>" }, this.appendBodyCell = function (t, i, s, r) { e.call(this, t, i, s, r) }, this.endRow = function (e) { if (void 0 == e) n += "\n\t\t\t</Row>"; else { n += "\n\t\t\t"; for (var t = 0; t < e; t++) n += "\t"; n += "</Row>" } }, this.endRows = function (e) { if (void 0 == e); else { n += "\n\t\t\t"; for (var t = 0; t < e; t++) n += "\t"; n += "</Rows>" } }, this.endBody = function () { n += "\n\t\t</Table>" }, this.endFile = function () { n += "\n\t</Worksheet>\n</Workbook>", a += "\n\t</Styles>" }, this.getFile = function () { return a + n } }; t.prototype = new e.jqx.dataAdapter.DataExportModuleBase, e.jqx.dataAdapter.ArrayExporter.extend("xls", new t) }(jQuery), function (e) { var t = function () { var e, t, i; this.beginFile = function () { e = '<?xml version="1.0" encoding="UTF-8" ?>', e += "\n<table>" }, this.beginHeader = function () { t = [] }, this.appendHeaderCell = function (e, i) { t.push(i) }, this.endHeader = function () { }, this.beginBody = function (e, t) { }, this.beginRow = function (t) { if (void 0 != t && this.hierarchy) { e += "\n\t"; for (var s = 0; s < t; s++) e += "\t\t"; return e += "<row>", void (i = 0) } e += "\n\t<row>", i = 0 }, this.beginRows = function (t) { if (void 0 != t) { e += "\n\t\t"; for (var s = 0; s < t; s++) e += "\t\t"; return e += "<rows>", void (i = 0) } e += "\n\t\t<rows>" }, this.appendBodyCell = function (s, r, o, a, n, l) { var h = this.getFormat(r); if (s = this.formatData(s, h.type, h.formatString, h.localization), "string" == h.type && (s.toString().indexOf("&") >= 0 && (s = s.toString().replace(/&/g, "&amp;")), s.toString().indexOf(">") >= 0 && (s = s.toString().replace(/>/g, "&gt;")), s.toString().indexOf("<") >= 0 && (s = s.toString().replace(/</g, "&lt;")), s.toString().indexOf('"') >= 0 && (s = s.toString().replace(/"/g, "&quot;")), s.toString().indexOf("'") >= 0 && (s = s.toString().replace(/'/g, "&apos;"))), void 0 != a.level) if (this.hierarchy) { e += "\n\t\t"; for (var d = 0; d < a.level; d++) e += "\t\t"; e += void 0 === l ? "<" + t[i] + ">" + s + "</" + t[i] + ">" : "<" + l + ">" + s + "</" + l + ">" } else e += void 0 != l ? "\n\t\t<" + l + ">" + s + "</" + l + ">" : "\n\t\t<" + t[i] + ">" + s + "</" + t[i] + ">"; else e += "\n\t\t<" + t[i] + ">" + s + "</" + t[i] + ">"; i++ }, this.endRow = function (t) { if (void 0 != t && this.hierarchy) { e += "\n\t"; for (var s = 0; s < t; s++) e += "\t\t"; return e += "</row>", void (i = 0) } e += "\n\t</row>", i = 0 }, this.endRows = function (t) { if (void 0 != t) { e += "\n\t\t"; for (var s = 0; s < t; s++) e += "\t\t"; return e += "</rows>", void (i = 0) } e += "\n\t\t</rows>" }, this.endBody = function () { }, this.endFile = function () { e += "\n</table>" }, this.getFile = function () { return e } }; t.prototype = new e.jqx.dataAdapter.DataExportModuleBase, e.jqx.dataAdapter.ArrayExporter.extend("xml", new t) }(jQuery), function (e) { function t(e) { return '"' + e.replace(d, function (e) { var t = c[e]; return "string" == typeof t ? t : "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4) }) + '"' } function i(e) { return e < 10 ? "0" + e : e } function s(e) { return isFinite(e.valueOf()) ? e.getUTCFullYear() + "-" + i(e.getUTCMonth() + 1) + "-" + i(e.getUTCDate()) + "T" + i(e.getUTCHours()) + ":" + i(e.getUTCMinutes()) + ":" + i(e.getUTCSeconds()) + 'Z"' : "null" } function r(e) { var t, i = e.length, s = []; for (t = 0; t < i; t++) s.push(l(t, e) || "null"); return "[" + s.join(",") + "]" } function o(e) { var i, s, r = []; for (i in e) Object.prototype.hasOwnProperty.call(e, i) && (s = l(i, e)) && r.push(t(i) + ":" + s); return "{" + r.join(",") + "}" } function a(e) { switch (Object.prototype.toString.call(e)) { case "[object Date]": return s(e); case "[object Array]": return r(e) } return o(e) } function n(e, i) { switch (i) { case "string": return t(e); case "number": case "float": case "integer": case "int": return isFinite(e) ? e : "null"; case "boolean": return e } return "null" } function l(e, t) { var i = t[e], s = typeof i; return i && "object" == typeof i && "function" == typeof i.toJSON && (s = typeof (i = i.toJSON(e))), /(number|float|int|integer|string|boolean)/.test(s) || !i && "object" === s ? n(i, s) : a(i) } function h(e) { return window.JSON && "function" == typeof window.JSON.stringify ? window.JSON.stringify(e) : l("", { "": e }) } var d = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, c = { "\b": "\\b", "\t": "\\t", "\n": "\\n", "\f": "\\f", "\r": "\\r", '"': '\\"', "\\": "\\\\" }, u = function () { var e = this; this.prepareData = function (t, i) { if (i) { var s = e.getFormat(i); t = e.formatData(t, s.type, s.formatString, s.localization) } return t }; var t, i, s, r = [], o = 0; this.beginFile = function () { i = [] }, this.beginHeader = function () { }, this.appendHeaderCell = function (e) { }, this.endHeader = function () { }, this.beginBody = function (e, t) { }, this.beginRow = function () { hierarchy ? r[o] = {} : s = {} }, this.beginRows = function () { r[o].rows = [], r[++o] = {} }, this.endRows = function () { o-- }, this.appendBodyCell = function (e, t) { var i = this.prepareData(e, t); hierarchy ? r[o][t.text] = i : s[t.text] = i }, this.endRow = function () { hierarchy ? 0 == o ? i.push(r[o]) : r[o - 1].rows.push(r[o]) : i.push(s) }, this.endBody = function () { }, this.endFile = function () { t = h(i) }, this.getFile = function () { return t } }; u.prototype = new e.jqx.dataAdapter.DataExportModuleBase, e.jqx.dataAdapter.ArrayExporter.extend("json", new u) }(jQuery), function (e) { e.extend(e.jqx._jqxGrid.prototype, { exportdata: function (t, i, s, r, o, a, n) { if (!e.jqx.dataAdapter.ArrayExporter) throw "jqxGrid: Missing reference to jqxdata.export.js!"; void 0 == s && (s = !0); var l = this; if (void 0 == r && 0 == (r = this.getrows()).length) throw "No data to export."; this.exporting = !0, this.pageable || (this.loadondemand = !0), this.altrows && this._renderrows(this.virtualsizeinfo); var h = void 0 != o && o, d = {}, c = {}, u = this.host.find(".jqx-grid-cell:first"), p = this.host.find(".jqx-grid-cell-alt:first"); u.removeClass(this.toThemeProperty("jqx-grid-cell-selected")), u.removeClass(this.toThemeProperty("jqx-fill-state-pressed")), p.removeClass(this.toThemeProperty("jqx-grid-cell-selected")), p.removeClass(this.toThemeProperty("jqx-fill-state-pressed")), u.removeClass(this.toThemeProperty("jqx-grid-cell-hover")), u.removeClass(this.toThemeProperty("jqx-fill-state-hover")), p.removeClass(this.toThemeProperty("jqx-grid-cell-hover")), p.removeClass(this.toThemeProperty("jqx-fill-state-hover")); for (var m = "cell", g = 1, f = "column", v = 1, x = [], w = 0; w < this.columns.records.length; w++) { var b = this.columns.records[w]; if ("" != b.cellclassname) if (b.customCellStyles = new Array, "string" == typeof b.cellclassname) for (_ = 0; _ < r.length; _++) b.customCellStyles[_] = b.cellclassname; else for (var _ = 0; _ < r.length; _++) { var y = this.getrowboundindex(_), j = b.cellclassname(y, b.displayfield, r[_][b.displayfield], r[_]); j && (b.customCellStyles[_] = j) } } if (e.each(this.columns.records, function (i) { var o = e(l.table[0].rows[0].cells[i]); if (l.table[0].rows.length > 1) var a = e(l.table[0].rows[1].cells[i]); var n = this, u = function (e) { if (e.removeClass(l.toThemeProperty("jqx-grid-cell-selected")), e.removeClass(l.toThemeProperty("jqx-fill-state-pressed")), e.removeClass(l.toThemeProperty("jqx-grid-cell-hover")), e.removeClass(l.toThemeProperty("jqx-fill-state-hover")), n.customCellStyles) for (var t in n.customCellStyles) e.removeClass(n.customCellStyles[t]) }; if (u(o), a && u(a), null == this.displayfield) return !0; l.showaggregates && l.getcolumnaggregateddata && x.push(l.getcolumnaggregateddata(this.displayfield, this.aggregates, !0, r)); var p = l._getexportcolumntype(this); !this.exportable || this.hidden && !h || (d[this.displayfield] = {}, d[this.displayfield].text = this.text, d[this.displayfield].width = parseInt(this.width), isNaN(d[this.displayfield].width) && (d[this.displayfield].width = 60), d[this.displayfield].formatString = this.cellsformat, d[this.displayfield].localization = l.gridlocalization, d[this.displayfield].type = p, d[this.displayfield].cellsAlign = this.cellsalign, d[this.displayfield].hidden = !s), m = "cell" + g; var w = e(this.element); if (void 0 == this.element && (w = e(this.uielement)), f = "column" + v, "html" == t || "xls" == t || "pdf" == t) { var b = function (e, i, s, r, o, a, n, l, u) { c[e] = {}, c[e]["font-size"] = i.css("font-size"), c[e]["font-weight"] = i.css("font-weight"), c[e]["font-style"] = i.css("font-style"), c[e]["background-color"] = a._getexportcolor(i.css("background-color")), c[e].color = a._getexportcolor(i.css("color")), c[e]["border-color"] = a._getexportcolor(i.css("border-top-color")), s ? c[e]["text-align"] = o.align : (c[e]["text-align"] = o.cellsalign, c[e].formatString = o.cellsformat, c[e].dataType = p), "html" != t && "pdf" != t || (c[e]["border-top-width"] = i.css("border-top-width"), c[e]["border-left-width"] = i.css("border-left-width"), c[e]["border-right-width"] = i.css("border-right-width"), c[e]["border-bottom-width"] = i.css("border-bottom-width"), c[e]["border-top-style"] = i.css("border-top-style"), c[e]["border-left-style"] = i.css("border-left-style"), c[e]["border-right-style"] = i.css("border-right-style"), c[e]["border-bottom-style"] = i.css("border-bottom-style"), s ? (0 == n && (c[e]["border-left-width"] = i.css("border-right-width")), c[e]["border-top-width"] = i.css("border-right-width"), c[e]["border-bottom-width"] = i.css("border-bottom-width")) : 0 == n && (c[e]["border-left-width"] = i.css("border-right-width")), c[e].height = i.css("height")), !o.exportable || o.hidden && !h || (1 == l ? (d[o.displayfield].customCellStyles || (d[o.displayfield].customCellStyles = new Array), d[o.displayfield].customCellStyles[u] = e) : s ? d[o.displayfield].style = e : r ? d[o.displayfield].cellAltStyle = e : d[o.displayfield].cellStyle = e) }; if (b(f, w, !0, !1, this, l, i), v++, b(m, o, !1, !1, this, l, i), l.altrows && b(m = "cellalt" + g, a, !1, !0, this, l, i), this.customCellStyles) { for (var _ in n.customCellStyles) o.removeClass(n.customCellStyles[_]); for (var _ in n.customCellStyles) o.addClass(n.customCellStyles[_]), b(m + n.customCellStyles[_], o, !1, !1, this, l, i, !0, _), o.removeClass(n.customCellStyles[_]) } g++ } }), this.showaggregates) { var q = [], T = "xls" == t ? "AG" : "", C = this.groupable ? this.groups.length : 0; this.rowdetails && C++, x.length > 0 && (e.each(this.columns.records, function (e) { if (this.aggregates) for (var t = 0; t < this.aggregates.length; t++) if (q[t] || (q[t] = {}), q[t]) { var i = l._getaggregatename(this.aggregates[t]), s = l._getaggregatetype(this.aggregates[t]), r = x[e - C]; r && (q[t][this.displayfield] = T + i + ": " + r[s]) } }), e.each(this.columns.records, function (e) { for (var t = 0; t < q.length; t++) void 0 == q[t][this.displayfield] && (q[t][this.displayfield] = T) })), e.each(q, function () { r.push(this) }) } var S = this, k = e.jqx.dataAdapter.ArrayExporter(r, d, c); if (void 0 == i) { this._renderrows(this.virtualsizeinfo); var I = k.exportTo(t); return this.showaggregates && e.each(q, function () { r.pop(this) }), setTimeout(function () { S.exporting = !1 }, 50), I } k.exportToFile(t, i, a, n), this.showaggregates && e.each(q, function () { r.pop(this) }), this._renderrows(this.virtualsizeinfo), setTimeout(function () { S.exporting = !1 }, 50) }, _getexportcolor: function (e) { var t = e; if ("transparent" == e && (t = "#FFFFFF"), t && t.toString() || (t = "#FFFFFF"), -1 != t.toString().indexOf("rgb")) { var i = t.split(","); if (-1 != t.toString().indexOf("rgba")) { var s = parseInt(i[0].substring(5)), r = parseInt(i[1]), o = parseInt(i[2]), a = parseInt(i[3].substring(1, 4)), n = { r: s, g: r, b: o }, l = this._rgbToHex(n); return 0 == s && 0 == r && 0 == o && 0 == a ? "#ffffff" : "#" + l } n = { r: s = parseInt(i[0].substring(4)), g: r = parseInt(i[1]), b: o = parseInt(i[2].substring(1, 4)) }; return "#" + (l = this._rgbToHex(n)) } return -1 != t.toString().indexOf("#") && 4 == t.toString().length && (t += t.toString().substring(1, 4)), t }, _rgbToHex: function (e) { return this._intToHex(e.r) + this._intToHex(e.g) + this._intToHex(e.b) }, _intToHex: function (e) { var t = parseInt(e).toString(16); return 1 == t.length && (t = "0" + t), t.toUpperCase() }, _getexportcolumntype: function (t) { var i = this, s = "string", r = i.source.datafields || (i.source._source ? i.source._source.datafields : null); if (r) { var o = ""; if (e.each(r, function () { if (this.name == t.displayfield) return this.type && (o = this.type), !1 }), o) return o } if (null != t) { if (void 0 == this.dataview.cachedrecords) return s; var a = null; if (this.virtualmode) e.each(this.dataview.cachedrecords, function () { return a = this[t.displayfield], !1 }); else { if (0 == this.dataview.cachedrecords.length) return s; if (null != (a = this.dataview.cachedrecords[0][t.displayfield]) && "" == a.toString()) return "string" } if (null != a) { if (-1 != t.cellsformat.indexOf("c")) return "number"; if (-1 != t.cellsformat.indexOf("n")) return "number"; if (-1 != t.cellsformat.indexOf("p")) return "number"; if (-1 != t.cellsformat.indexOf("d")) return "date"; if (-1 != t.cellsformat.indexOf("y")) return "date"; if (-1 != t.cellsformat.indexOf("M")) return "date"; if (-1 != t.cellsformat.indexOf("m")) return "date"; if (-1 != t.cellsformat.indexOf("t")) return "date"; if ("boolean" == typeof a) s = "boolean"; else if (e.jqx.dataFormat.isNumber(a)) s = "number"; else { var n = new Date(a); if ("NaN" == n.toString() || "Invalid Date" == n.toString()) if (e.jqx.dataFormat) { if (null != (n = e.jqx.dataFormat.tryparsedate(a))) { if (n && n.getFullYear() && 1970 == n.getFullYear() && 0 == n.getMonth() && 1 == n.getDate()) { var l = new Number(a); return isNaN(l) ? "string" : "number" } return "date" } s = "string" } else s = "string"; else s = "date" } } } return s } }) }(jQuery), function (e) { e.extend(e.jqx._jqxGrid.prototype, { savestate: function (t) { var i = this.getstate(); return void 0 === t || e.isEmptyObject(t) || (-1 == t.indexOf("sort") && (delete i.sortcolumn, delete i.sortdirection), -1 == t.indexOf("pager") && (delete i.pagenum, delete i.pagesizeoptions, delete i.pagesize), -1 == t.indexOf("selection") && (delete i.selectedcells, delete i.selectedrowindexes, delete i.selectedrowindex), -1 == t.indexOf("grouping") && delete i.groups, -1 == t.indexOf("filter") && delete i.filters, e.each(this.columns.records, function (e) { var s = i.columns[this.datafield]; -1 == t.indexOf("hidden_columns") && delete s.hidden, -1 == t.indexOf("reorder") && delete s.index, -1 == t.indexOf("columns_width") && delete s.width, -1 == t.indexOf("columns_text") && delete s.text, -1 == t.indexOf("alignment") && (delete s.align, delete s.cellsalign) })), window.localStorage && (window.localStorage["jqxGrid" + this.element.id] = this._stringify(i)), this._savedstate = i, i }, loadstate: function (t, i) { s = ""; if (void 0 != t && void 0 != t.width) s = t; else if (window.localStorage) { if (window.localStorage["jqxGrid" + this.element.id]) s = e.parseJSON(window.localStorage["jqxGrid" + this.element.id]) } else if (this._savedstate) var s = this._savedstate; if (null != s && "" !== s) { (this.virtualmode || this.source._source.url && "" != this.source._source.url) && this.source.beginUpdate(); var r = s; if (void 0 !== r.width && (this.width = r.width), void 0 !== r.height && (this.height = r.height), this.pageable && (void 0 != r.pagesize && (this.pagesize = r.pagesize, this.dataview.pagesize = r.pagesize), void 0 != r.pagenum && (this.dataview.pagenum = r.pagenum), void 0 != r.pagesizeoptions && (this.pagesizeoptions = r.pagesizeoptions), this.pagesizeoptions)) { for (var o = 0, a = 0; a < this.pagesizeoptions.length; a++) this.pagesize >= this.pagesizeoptions[a] && (o = a); this.pagershowrowscombo && this.pagershowrowscombo.jqxDropDownList({ selectedIndex: o }) } if (this.sortable) if (this._loading && (this._loading = !1), r.sortdirection) { if (r.sortdirection.ascending || r.sortdirection.descending) { this.dataview.sortfield = r.sortcolumn; var n = r.sortdirection.ascending ? "asc" : "desc"; this.dataview.sortfielddirection = n, this.source.sortcolumn = r.sortcolumn, this.source.sortdirection = n, this.sortby(r.sortcolumn, n) } } else null == this.dataview.sortfield || "asc" != this.dataview.sortfielddirection && "desc" != this.dataview.sortfielddirection || this.sortby(this.dataview.sortfield, null); this.groupable && r.groups && (this.dataview.groups = r.groups, this.groups = r.groups), this.loadingstate = !0, this.virtualsizeinfo && this._loadselectionandcolumnwidths(r), this.loadingstate = !1, (this.virtualmode || this.source._source.url && "" != this.source._source.url) && (1 == i ? this.source.endUpdate(!1) : (this.source.endUpdate(!1), (this.virtualmode || this.source._source.filter || this.source._source.sort) && this.updatebounddata("state"))) } }, _loadselectionandcolumnwidths: function (t) { this.loadingstate = !0; i = ""; if (void 0 != t && void 0 != t.width) i = t; else if (window.localStorage) { if (window.localStorage["jqxGrid" + this.element.id]) i = e.parseJSON(window.localStorage["jqxGrid" + this.element.id]) } else if (this._savedstate) var i = this._savedstate; if (null != i && "" != i) { var s = this._loading; this._loading = !1; var r = i, o = this, a = !1, n = []; n.length = 0; if (e.each(this.columns.records, function (e) { var t = r.columns[this.datafield]; if (void 0 != t) { if (this.text != t.text && (a = !0), this.hidden != t.hidden && (a = !0), void 0 !== t.width && (this.width = t.width, this._width && (this._width = null), this._percentagewidth && (this._percentagewidth = null)), void 0 !== t.hidden && (this.hidden = t.hidden), void 0 !== t.pinned && (this.pinned = t.pinned), void 0 !== t.groupable && (this.groupable = t.groupable), void 0 !== t.resizable && (this.resizable = t.resizable), this.draggable = t.draggable, void 0 !== t.text && (this.text = t.text), void 0 !== t.align && (this.align = t.align), void 0 !== t.cellsalign && (this.cellsalign = t.cellsalign), o._columns) for (var i = 0; i < o._columns.length; i++) o._columns[i].datafield == this.datafield && (void 0 !== t.hidden && (o._columns[i].hidden = t.hidden), void 0 !== t.width && void 0 != o._columns[i].width && (o._columns[i].width = t.width)); void 0 !== t.index && (n[this.datafield] = t.index, n.length++) } }), n.length > 0) { if (this.setcolumnindex) { var l = this.rowdetails ? 1 : 0; l += this.groupable ? this.groups.length : 0; for (var h = new Array, d = 0; d < this.columns.records.length; d++) h.push(this.columns.records[d]); for (var c = 0, d = 0; d < h.length; d++) { var u = h[d], p = n[u.datafield]; this.groupable && u.grouped ? c++ : 0 == d && this.rowdetails ? c++ : (d !== p || this.groupable || this.rowdetails) && o.setcolumnindex(u.datafield, c + p, !1) } } this.prerenderrequired = !0, this.groupable && this._refreshdataview(), this.rendergridcontent(!0), this._updatefilterrowui && this.filterable && this.showfilterrow && this._updatefilterrowui(), this._renderrows(this.virtualsizeinfo) } if (this.filterable && void 0 !== r.filters) { this.clearfilters && (this._loading = !1, this.clearfilters(!1)); for (var m = "", g = new e.jqx.filter, d = 0; d < r.filters.filterscount; d++) { var f = r.filters["filtercondition" + d], v = r.filters["filterdatafield" + d], u = this.getcolumn(v); if (v != m && (g = new e.jqx.filter), m = v, u && u.filterable) { var x = r.filters["filtervalue" + d], w = r.filters["filteroperator" + d]; if ("datefilter" == (q = r.filters["filtertype" + d])) T = g.createfilter(q, x, f, null, u.cellsformat, this.gridlocalization); else T = g.createfilter(q, x, f); if (g.addfilter(w, T), this.showfilterrow) { var b = u._filterwidget, _ = u._filterwidget.parent(); if (null != b) switch (u.filtertype) { case "number": if (_.find("input").val(x), this.host.jqxDropDownList) { var y = g.getoperatorsbyfiltertype("numericfilter"); b.find(".filter").jqxDropDownList("selectIndex", y.indexOf(f)) } break; case "date": if (this.host.jqxDateTimeInput) { var j = r.filters["filtervalue" + (d + 1)], q = r.filters["filtertype" + d], T = g.createfilter(q, j, "LESS_THAN_OR_EQUAL"); g.addfilter(w, T); var C = new Date(x), S = new Date(j); isNaN(C) && (C = e.jqx.dataFormat.tryparsedate(x)), isNaN(S) && (S = e.jqx.dataFormat.tryparsedate(x)), e(_.children()[0]).jqxDateTimeInput("setRange", C, S), d++ } else b.val(x); break; case "textbox": case "default": b.val(x), o["_oldWriteText" + b[0].id] = x; break; case "list": if (this.host.jqxDropDownList) { var k = e(_.children()[0]).jqxDropDownList("getItems"), p = -1; e.each(k, function (e) { if (this.value == x) return p = e, !1 }), e(_.children()[0]).jqxDropDownList("selectIndex", p) } else b.val(x); break; case "checkedlist": this.host.jqxDropDownList || b.val(x); break; case "bool": case "boolean": this.host.jqxCheckBox ? e(_.children()[0]).jqxCheckBox({ checked: x }) : b.val(x) } } this.addfilter(v, g) } } r.filters && r.filters.filterscount > 0 && (this.applyfilters(), this.showfilterrow && e.each(this.columns.records, function () { if ("checkedlist" == this.filtertype && this.filterable && o.host.jqxDropDownList) { var t = this, i = t._filterwidget, s = (i.jqxDropDownList("getItems"), i.jqxDropDownList("listBox")); if (s.checkAll(!1), t.filter) { s.uncheckAll(!1); for (var r = t.filter.getfilters(), a = 0; a < s.items.length; a++) { var n = s.items[a].label; e.each(r, function () { if ("NOT_EQUAL" == this.condition) return !0; n == this.value && s.checkIndex(a, !1, !1) }) } s._updateCheckedItems(); var l = s.getCheckedItems().length; s.items.length != l && l > 0 && s.host.jqxListBox("indeterminateIndex", 0, !0, !1) } } })), this.pageable && void 0 !== r.pagenum && (this.gotopage && !this.virtualmode ? (this.dataview.pagenum = -1, this.gotopage(r.pagenum)) : this.gotopage && this.virtualmode && this.gotopage(r.pagenum)) } if (r.selectedrowindexes && r.selectedrowindexes && r.selectedrowindexes.length > 0 && (this.selectedrowindexes = r.selectedrowindexes, this.selectedrowindex = r.selectedrowindex, "checkbox" === this.selectionmode && this._updatecheckboxselection()), r.selectedcells && this._applycellselection && e.each(r.selectedcells, function () { o._applycellselection(this.rowindex, this.datafield, !0, !1) }), this.groupable && void 0 !== r.groups) return this._refreshdataview(), this.render(), this._loading = s, void (this.loadingstate = !1); if (a) { if (this.prerenderrequired = !0, this.rendergridcontent(!0), this._loading = s, this.loadingstate = !1, this.updating()) return !1 } else this._loading = s, this._updatecolumnwidths(), this._updatecellwidths(), this.loadingstate = !1; this.loadingstate = !1, this._loading = s, this._renderrows(this.virtualsizeinfo) } this.loadingstate = !1 }, getstate: function () { var t = this.getdatainformation(), i = {}; if (i.width = this.width, i.height = this.height, i.pagenum = t.paginginformation.pagenum, i.pagesize = t.paginginformation.pagesize, i.pagesizeoptions = this.pagesizeoptions, i.sortcolumn = t.sortinformation.sortcolumn, i.sortdirection = t.sortinformation.sortdirection, null != this.selectionmode && this.getselectedcells) if (-1 != this.selectionmode.toString().indexOf("cell")) { var s = this.getselectedcells(), r = new Array; e.each(s, function () { r.push({ datafield: this.datafield, rowindex: this.rowindex }) }), i.selectedcells = r } else { var o = this.getselectedrowindexes(); i.selectedrowindexes = o, i.selectedrowindex = this.selectedrowindex } var a = {}, n = 0; if (this.dataview.filters) for (var l = 0; l < this.dataview.filters.length; l++) { var h = this.dataview.filters[l].datafield, d = this.dataview.filters[l].filter, c = d.getfilters(); a[h + "operator"] = d.operator; for (var u = 0; u < c.length; u++) { if (c[u].datafield = h, "datefilter" == c[u].type) if (c[u].value && c[u].value.toLocaleString) { var p = this.getcolumn(c[u].datafield); if (p.cellsformat) { var m = this.source.formatDate(c[u].value, p.cellsformat, this.gridlocalization); a["filtervalue" + n] = m || c[u].value.toLocaleString() } else a["filtervalue" + n] = c[u].value.toLocaleString() } else a["filtervalue" + n] = c[u].value; else a["filtervalue" + n] = c[u].value; a["filtercondition" + n] = c[u].condition, a["filteroperator" + n] = c[u].operator, a["filterdatafield" + n] = h, a["filtertype" + n] = c[u].type, n++ } } a.filterscount = n, i.filters = a, i.groups = this.groups, i.columns = {}; var g = 0; return this.columns.records && e.each(this.columns.records, function (e, t) { if (!this.datafield) return !0; var s = {}; s.width = this.width, s.hidden = this.hidden, s.pinned = this.pinned, s.groupable = this.groupable, s.resizable = this.resizable, s.draggable = this.draggable, s.text = this.text, s.align = this.align, s.cellsalign = this.cellsalign, s.index = g++, i.columns[this.datafield] = s }), i }, _stringify: function (e) { if (window.JSON && "function" == typeof window.JSON.stringify) { var t = this, i = ""; try { i = window.JSON.stringify(e) } catch (i) { return t._str("", { "": e }) } return i } return i = this._str("", { "": e }) }, _quote: function (e) { var t = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, i = { "\b": "\\b", "\t": "\\t", "\n": "\\n", "\f": "\\f", "\r": "\\r", '"': '\\"', "\\": "\\\\" }; return '"' + e.replace(t, function (e) { var t = i[e]; return "string" == typeof t ? t : "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4) }) + '"' }, _stringifyArray: function (e) { for (var t = e.length, i = [], s = 0; s < t; s++) i.push(this._str(s, e) || "null"); return "[" + i.join(",") + "]" }, _stringifyObject: function (e) { var t, i, s = [], r = this; for (t in e) Object.prototype.hasOwnProperty.call(e, t) && (i = r._str(t, e)) && s.push(r._quote(t) + ":" + i); return "{" + s.join(",") + "}" }, _stringifyReference: function (e) { switch (Object.prototype.toString.call(e)) { case "[object Array]": return this._stringifyArray(e) } return this._stringifyObject(e) }, _stringifyPrimitive: function (e, t) { switch (t) { case "string": return this._quote(e); case "number": return isFinite(e) ? e : "null"; case "boolean": return e } return "null" }, _str: function (e, t) { var i = t[e], s = typeof i; return i && "object" == typeof i && "function" == typeof i.toJSON && (s = typeof (i = i.toJSON(e))), /(number|string|boolean)/.test(s) || !i && "object" === s ? this._stringifyPrimitive(i, s) : this._stringifyReference(i) } }) }(jQuery), function (e) { e.extend(e.jqx._jqxGrid.prototype, { getcolumnindex: function (e) { var t = this.getcolumn(e); return this.columns.records.indexOf(t) }, setcolumnindex: function (t, i, s) { if (!((u = this.getcolumn(t)).pinned || u.hidden || u.checkboxcolumn || u.grouped)) { var r = this.columns.records.indexOf(u); this.columns.records.splice(r, 1), this.columns.records.splice(i, 0, u); var o = 0, a = this.headerZIndex; this.columnsrow.children().detach(); var n = this.toThemeProperty("jqx-grid-cell"); n += " " + this.toThemeProperty("jqx-grid-cell-pinned"), this.filterrow && (e(this.filterrow.children()[0]).children().detach(), this.filterrow[0].cells = []); var l = this, h = null; if (void 0 != l.filterrow) h = e(l.filterrow.children()[0]); this.columnsrow[0].cells = []; var d = !1; if (e.each(this.columns.records, function (t, i) { var s = this.uielement; l.columnsrow.append(s), l.rtl ? s.css("z-index", a++) : s.css("z-index", a--); var r = this.width; if (s.css("left", o), l.columnsrow[0].cells[l.columnsrow[0].cells.length] = s[0], l.filterrow) { var c = e('<div style="overflow: hidden; position: absolute; height: 100%;" class="' + n + '"></div>'); h.append(c), c.css("left", o), c.css("z-index", a + 1), c.width(this.width), c[0].left = o, c.append(this._filterwidget), l.filterrow[0].cells[l.filterrow[0].cells.length] = c[0] } this.hidden && (d = !0), this.hidden && this.hideable || (o += r) }), this.groupable) { var c = this.groups.length; c > 0 && r - c >= 0 && (r -= c, i -= c) } this.rowdetails && r - 1 >= 0 && (r--, i--), "checkbox" == this.selectionmode && r - 1 >= 0 && (r--, i--); var u = this._columns[r]; this._columns.splice(r, 1), this._columns.splice(i, 0, u), this._raiseEvent(24, { columntext: u.text, datafield: u.datafield, oldindex: r, newindex: i }), 0 != s && (d || "checkbox" == u.columntype ? (this.prerenderrequired = !0, this.rendergridcontent(!0, !1), this._updatecolumnwidths(), this._updatecellwidths()) : (this._updatecolumnwidths(), this._updatecellwidths()), this._updatefilterrowui && this.filterable && this.showfilterrow && this._updatefilterrowui(), this._rendercolumngroups(), this._renderrows(this.virtualsizeinfo)) } }, _pinnedColumnsLength: function () { var t = 0; return e.each(this.columns.records, function () { this.pinned && t++, this.grouped && t++ }), "checkbox" == this.selectionmode && t++, t }, _handlecolumnsreorder: function () { var t = this, i = -1, s = !1; if (t.columnsreorder) { var r = "mousemove.reorder" + this.element.id, o = "mousedown.reorder" + this.element.id, a = "mouseup.reorder" + this.element.id, n = !1; this.isTouchDevice() && !0 !== this.touchmode && (n = !0, r = e.jqx.mobile.getTouchEventName("touchmove") + ".reorder" + this.element.id, o = e.jqx.mobile.getTouchEventName("touchstart") + ".reorder" + this.element.id, a = e.jqx.mobile.getTouchEventName("touchend") + ".reorder" + this.element.id), this.removeHandler(e(document), r), this.addHandler(e(document), r, function (e) { if (t.resizing) return !0; if (null != t.reordercolumn) { var r = parseInt(e.pageX), o = parseInt(e.pageY); if (n) { var a = t.getTouches(e)[0]; void 0 != a && (r = parseInt(a.pageX), o = parseInt(a.pageY)) } var l = t.host.coord(), h = parseInt(l.left), d = parseInt(l.top); void 0 != t.dragmousedownoffset && null != t.dragmousedownoffset || (t.dragmousedownoffset = { left: 0, top: 0 }); var c = parseInt(r) - parseInt(t.dragmousedownoffset.left), u = parseInt(o) - parseInt(t.dragmousedownoffset.top); if (t.reordercolumn.css({ left: c + "px", top: u + "px" }), s = !1, r >= h && r <= h + t.host.width() && o >= d && o <= d + t.host.height() && (s = !0), i = -1, s) { t.reordercolumnicon.removeClass(t.toThemeProperty("jqx-grid-dragcancel-icon")), t.reordercolumnicon.addClass(t.toThemeProperty("jqx-grid-drag-icon")); var p = t.columnsheader.coord(), m = p.top + t.columnsheader.height(); null != t.columnsdropline && (o >= p.top && o <= m ? i = t._handlereordercolumnsdroplines(r) : t.columnsdropline.fadeOut("slow")) } else null != t.columnsdropline && t.columnsdropline.fadeOut("slow"), t.reordercolumnicon.removeClass(t.toThemeProperty("jqx-grid-drag-icon")), t.reordercolumnicon.addClass(t.toThemeProperty("jqx-grid-dragcancel-icon")); if (n) return e.preventDefault(), e.stopPropagation(), !1 } }), this.columnsbounds = new Array, this.removeHandler(e(document), o), this.addHandler(e(document), o, function (i) { if (t.resizing) return !0; t.columnsbounds = new Array; var s = t.host.coord().left, r = t.host.coord().top; t.showtoolbar && (r += t.toolbarheight), t.groupable && t.showgroupsheader && (r += t.groupsheaderheight); var o = 0; e.each(t.columns.records, function (i) { var a = this; if (a.hidden) return t.columnsbounds[t.columnsbounds.length] = { top: r, column: a, left: s, width: 0, height: 2 + t.rowsheight }, !0; 0 == o && (s = t.rtl ? "hidden" != t.hScrollBar.css("visibility") ? parseInt(t.host.coord().left) - t.hScrollInstance.max + t.hScrollInstance.value : parseInt(t.host.coord().left) + t.hScrollInstance.value : parseInt(t.host.coord().left) - t.hScrollInstance.value), o++; var n = 2 + t.columnsheight; t.columnshierarchy && (r = e(a.uielement).coord().top, n = e(a.uielement).height()), t.columnsbounds[t.columnsbounds.length] = { top: r, column: a, left: s, width: a.width, height: n }, s += a.width }) }), this.removeHandler(e(document), a), this.addHandler(e(document), a, function (r) { if (t.resizing) return !0; t.__drag = !1, e(document.body).removeClass("jqx-disableselect"); parseInt(r.pageX), parseInt(r.pageY); if (n) { var o = t.getTouches(r)[0]; parseInt(o.pageX), parseInt(o.pageY) } var a = t.host.coord(), l = (parseInt(a.left), parseInt(a.top)); t.groupsheader.height(); if (t.showtoolbar && (l += t.toolbarheight), t.columndragstarted = !1, t.dragmousedown = null, null != t.reordercolumn) { var h = e.data(t.reordercolumn[0], "reorderrecord"), d = t.columns.records.indexOf(t.getcolumn(h)); t.reordercolumn.remove(), t.reordercolumn = null; var c = 0; if (c += t._pinnedColumnsLength(), null != h) { if (s && -1 != i) { var u = i.index; if (u >= c) { var p = t.columns.records[u]; if (void 0 != p) { m = t.columns.records.indexOf(t.getcolumn(p.datafield)); if (null == p.datafield) var m = t.columns.records.indexOf(t.getcolumnbytext(p.text)); if (t.columngroups) { var g = p; if (d < m && "before" == i.position && (g = t.columns.records[m - 1]), g.columngroup != t.getcolumn(h).columngroup) return void (null != t.columnsdropline && (t.columnsdropline.remove(), t.columnsdropline = null)) } d < m ? "before" == i.position ? t.setcolumnindex(h, m - 1) : t.setcolumnindex(h, m) : d > m && t.setcolumnindex(h, m), t.autosavestate && t.savestate && t.savestate() } } } null != t.columnsdropline && (t.columnsdropline.remove(), t.columnsdropline = null) } } }) } }, getcolumnbytext: function (t) { var i = null; return this.columns.records && e.each(this.columns.records, function () { if (this.text == t) return i = this, !1 }), i }, _handlereordercolumnsdroplines: function (t) { var i = this, s = -1, r = i._pinnedColumnsLength(), o = parseInt(i.host.coord().left) + i.host.width(), a = "hidden" != i.vScrollBar.css("visibility") ? 19 : 0; return i.rtl || (a = 0), e.each(i.columnsbounds, function (e) { if (e >= r) { if (0 == this.width) return !0; if (t <= this.left + this.width / 2) return t > o ? (i.columnsdropline.fadeOut(), !1) : (i.columnsdropline.css("left", a + parseInt(this.left) + "px"), i.columnsdropline.css("top", parseInt(this.top) + "px"), i.columnsdropline.height(this.height), i.columnsdropline.fadeIn("slow"), s = { index: e, position: "before" }, !1); if (t >= this.left + this.width / 2) { if (this.left + this.width > o) return i.columnsdropline.fadeOut(), !1; i.columnsdropline.css("left", a + 1 + this.left + this.width), i.columnsdropline.css("top", this.top), i.columnsdropline.height(this.height), i.columnsdropline.fadeIn("slow"), s = { index: e, position: "after" } } } }), s }, _createreordercolumn: function (t, i, s) { var r = this, o = i; r.reordercolumn && r.reordercolumn.remove(), r.columnsdropline && r.columnsdropline.remove(), r.reordercolumn = e("<div></div>"); var a = t.clone(); r.reordercolumn.css("z-index", 999999), a.css("border-width", "1px"), a.css("opacity", "0.4"); var n = e(a.find("." + r.toThemeProperty("jqx-grid-column-menubutton"))); n.length > 0 && n.css("display", "none"); var l = e(a.find(".jqx-icon-close")); l.length > 0 && l.css("display", "none"), r.reordercolumnicon = e('<div style="z-index: 9999; position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px;"></div>'), r.reordercolumnicon.addClass(r.toThemeProperty("jqx-grid-drag-icon")), r.reordercolumn.css("float", "left"), r.reordercolumn.css("position", "absolute"); r.host.coord(); a.width(t.width() + 16), r.reordercolumn.append(a), r.reordercolumn.height(t.height()), r.reordercolumn.width(a.width()), r.reordercolumn.append(r.reordercolumnicon), e(document.body).append(r.reordercolumn), a.css("margin-left", 0), a.css("left", 0), a.css("top", 0), r.reordercolumn.css("left", o.left + r.dragmousedown.left), r.reordercolumn.css("top", o.top + r.dragmousedown.top), void 0 != s && s && (r.columnsdropline = e('<div style="z-index: 9999; display: none; position: absolute;"></div>'), r.columnsdropline.width(2), r.columnsdropline.addClass(r.toThemeProperty("jqx-grid-group-drag-line")), e(document.body).append(r.columnsdropline)) }, _handlecolumnsdragreorder: function (t, i) { this.reordercolumn && this.reordercolumn.remove(), this.columnsdropline && this.columnsdropline.remove(), this.dragmousedown = null, this.dragmousedownoffset = null, this.columndragstarted = !1, this.reordercolumn = null; var s = this, r = !1; this.isTouchDevice() && !0 !== this.touchmode && (r = !0); var o = "mousedown.drag", a = "mousemove.drag"; r ? (o = e.jqx.mobile.getTouchEventName("touchstart") + ".drag", a = e.jqx.mobile.getTouchEventName("touchmove") + ".drag") : this.addHandler(i, "dragstart", function (e) { return !1 }), this.addHandler(i, o, function (i) { if (0 == t.draggable) return !0; if (s.resizing) return !0; s.__drag = !0; var o = i.pageX, a = i.pageY; if (r) { var n = s.getTouches(i)[0]; o = n.pageX, a = n.pageY } s.dragmousedown = { left: o, top: a }; var l = e(i.target).coord(); return s.dragmousedownoffset = { left: parseInt(o) - parseInt(l.left), top: parseInt(a - l.top) }, !0 }), this.addHandler(i, a, function (o) { if (!t.draggable) return !0; if (void 0 == t.datafield) return !0; if (t.pinned) return !0; if (s.resizing) return !0; if (s.dragmousedown) { var n = o.pageX, l = o.pageY; if (r) { var h = s.getTouches(o)[0]; void 0 != h && (n = h.pageX, l = h.pageY) } if (a = { left: n, top: l }, !s.columndragstarted && null == s.reordercolumn) { var d = Math.abs(a.left - s.dragmousedown.left), c = Math.abs(a.top - s.dragmousedown.top); (d > 3 || c > 3) && (s._createreordercolumn(i, a, !0), e(document.body).addClass("jqx-disableselect"), e.data(s.reordercolumn[0], "reorderrecord", t.datafield)) } } }) } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxListMenu", "", {}); var t = 0, i = 0; e.extend(e.jqx._jqxListMenu.prototype, { defineInstance: function () { this.filterCallback = function (t, i) { return e.jqx.string.containsIgnoreCase(e.trim(t), i) }, this.placeHolder = "Filter list items...", this.showFilter = !1, this.showHeader = !0, this.showBackButton = !0, this.showNavigationArrows = !0, this.alwaysShowNavigationArrows = !1, this.backLabel = "Back", this.width = "100%", this.height = "auto", this.animationType = "slide", this.animationDuration = 0, this.headerAnimationDuration = 0, this.autoSeparators = !1, this.readOnly = !1, this.roundedCorners = !0, this.disabled = !1, this.enableScrolling = !0, this.touchMode = !1, this._childrenMap = {}, this._parentMap = {}, this._lock = !1, this._backButton = null, this._currentPage = null, this._header = null, this._oldHost, this.rtl = !1, this.aria = { "aria-disabled": { name: "disabled", type: "boolean" } } }, destroy: function () { this.host.remove() }, createInstance: function () { e.jqx.aria(this), this.host.attr("data-role", "listmenu"), this.host.attr("role", "tree") }, refresh: function (e) { this._render(), this._removeClasses(), this._addClasses(), this._currentPage = this._currentPage || this.host.children(".jqx-listmenu").first(), this._changeHeader(this._currentPage), this._removeEventHandlers(), this._addEventHandlers() }, _render: function () { this._renderHost(), this._renderAutoSeparators(), this._renderSublists(), this._renderFilterBar(), this._renderHeader(), this.host.css({ width: this.width, height: this.height }), this.disabled && this.disable(), this.enableScrolling && this.host.jqxPanel && this.panel && this.panel.jqxPanel("_arrange") }, resize: function (e, t) { this.width = e, this.height = t, this.host.css({ width: this.width, height: this.height }), this.panel && this.panel.jqxPanel("_arrange") }, _renderHost: function () { this.host.is("div") ? this.element.style.overflow = "hidden" : (this._oldHost = this.host, this.host.wrap("<div/>"), this.host = this.host.parent(), this.element = this.host[0], this.host.jqxPanel && this.enableScrolling && (this.host.wrap("<div/>"), this.panel = this.host.parent(), this.panel[0].id = "panel" + this.element.id, this.panel.jqxPanel({ theme: this.theme, autoUpdate: !0, width: this.width, height: this.height, touchMode: this.touchMode }), this.host.css({ width: "100%" }), this.host.css({ height: "auto" }), this.host.css("border", "none"))), this.enableScrolling || (this.element.style.overflow = "hidden"), e.jqx.browser.msie && e.jqx.browser.version < 8 && (this.element.style.position = "relative"), this.enableScrolling && this.panel && this.panel.jqxPanel("_arrange") }, _renderAutoSeparators: function (t) { var t, i, s = this.host.find(".jqx-listmenu-auto-separator"), r = this.host.find('[data-role="listmenu"]'); for (s.remove(), i = 0; i < r.length; i += 1) ((t = e(r[i])).data("auto-separators") || this.autoSeparators) && this._renderListAutoSeparators(t) }, _renderSublists: function () { var t, i, s, r, o, a = [this.host.find(".jqx-listmenu").first()[0] || this.host.find("ul,ol").first()[0]]; for (this._refreshList(a[0]) ; a.length;) { s = a.pop(), r = (t = this._getChildrenByTagName(s, "li", "LI")).length; for (var n = 0; n < r; n += 1) i = t[n], e(i).attr("role", "treeitem"), o = this._getChildList(i), this._refreshLi(i, n, r), o && (a.push(o), this._refreshList(o, i, !0)) } }, _refreshList: function (t, i, s) { "listmenu" === (t = e(t)).data("role") && (t.is(".jqx-listmenu") || (this._renderList(t), this._handleListId(t), this._addListClasses(t)), i && this._expandHierarchy(t[0], i), s && this._handleSublist(t[0])) }, _renderList: function (t) { (t = e(t)).is(".jqx-listmenu") || (t.detach(), t.appendTo(this.host)) }, _handleListId: function (e) { e[0].id || (e[0].id = "jqx-listmenu-" + i, i += 1) }, _renderListAutoSeparators: function (t) { for (var i, s, r = t.children("li"), o = {}, a = 0; a < r.length; a += 1) if (!(s = e(r[a])).data("role")) { if (e.trim(s.text())[0] !== i) { i = e.trim(s.text())[0]; var n = e('<li data-role="separator" class="' + this.toThemeProperty("jqx-listmenu-auto-separator") + '">' + i + "</li>"); n.insertBefore(s), n[0].items = new Array, o = n[0] } o.items && (o.items[o.items.length] = s[0]) } }, _addListClasses: function (e) { e.addClass("jqx-listmenu") }, _expandHierarchy: function (e, t) { if (t && e) { var i = t.id, s = e.id; this._childrenMap[i] = s, this._parentMap[s] = i } }, _handleSublist: function (e) { this._currentPage && e === this._currentPage[0] ? e.style.display = "block" : e.style.display = "none" }, _getChildrenByTagName: function (e, t, i) { var s = [], r = {}; for (r[t] = r[i] = !0, e = e.firstChild; e;) r[e.nodeName] && s.push(e), e = e.nextSibling; return s }, _renderFilterBar: function () { this._filterBar || (this._filterBar = e("<div/>"), this._filterInput = e('<input type="text" />'), this._filterBar.append(this._filterInput), this.host.prepend(this._filterBar)); var t = !1; e.jqx.browser.msie && e.jqx.browser.version < 8 && (t = !0), t || this._filterInput.attr("placeholder", this.placeHolder), this.showFilter ? this._filterBar.css("display", "block") : this._filterBar.css("display", "none") }, _renderHeader: function () { this._header || (this._header = e("<div/>"), this.host.prepend(this._header), this._renderHeaderLabel()), this._renderBackButton(), this.showHeader ? this._header.css("display", "block") : this._header.css("display", "none") }, _renderHeaderLabel: function () { this._headerLabel = e("<span/>"), this._headerLabel.addClass(this.toThemeProperty("jqx-listmenu-header-label")), this._header.append(this._headerLabel) }, _renderBackButton: function () { this._backButton || (this._backButton = e('<div><div style="float: left;"></div><span style="float: left;">' + this.backLabel + '</span><div style="clear:both;"></div></div>'), this._header.prepend(this._backButton), this._backButton.jqxButton({ theme: this.theme }), this._backButton.find("div:first").addClass(this.toThemeProperty("jqx-listmenu-backbutton-arrow")), this.showBackButton ? this._backButton.css("display", "inline-block") : this._backButton.css("display", "none"), this.rtl && (e.jqx.browser.msie && e.jqx.browser.version < 8 ? (this._backButton.css("position", "relative"), this._backButton.css("left", "100%"), this._backButton.css("margin-left", -this._backButton.outerWidth() - 45 + "px")) : (this._backButton.css("position", "relative"), this._backButton.css("margin-left", "100%"), this._backButton.css("left", -this._backButton.outerWidth() - 15)))), this.showBackButton ? this._backButton.css("display", "inline-block") : this._backButton.css("display", "none") }, _removeEventHandlers: function () { var t = this.isTouchDevice() && !this.touchMode, i = e.jqx.mobile.getTouchEventName("touchstart"); this.removeHandler(this._backButton, t ? i : "click"), this.removeHandler(this._filterInput, "keyup"), this.removeHandler(this._filterInput, "change") }, _addEventHandlers: function () { var t = this, i = this.isTouchDevice() && !this.touchMode, s = e.jqx.mobile.getTouchEventName("touchstart"); this.addHandler(this._backButton, i ? s : "click", function () { t.back() }), this.addHandler(this._filterInput, "keyup change", function () { t._filter(e(this).val()) }) }, _getChildList: function (e) { if (e) { var t = this._childrenMap[e.id]; if (e.className.indexOf("jqx-listmenu-item") >= 0 && t) return document.getElementById(t); var i = this._getChildrenByTagName(e, "ul", "UL")[0], s = this._getChildrenByTagName(e, "ol", "OL")[0]; return i || s } }, _refreshLi: function (e, t, i) { if (e.parentNode && "listmenu" === e.parentNode.getAttribute("data-role")) { if ("" == e.id); this._handleLiId(e), this._renderLi(e), this._removeLiEventHandlers(e), this._addLiEventHandlers(e), this._addLiClasses(e, t, i) } }, _handleLiId: function (e) { e.id || (e.id = "jqx-listmenu-item-" + t, t += 1) }, _renderLi: function (t) { if (!(/(separator|header)/.test(e(t).data("role")) || e(t).children(".jqx-listmenu-arrow-right").length > 0) && (e(t).wrapInner('<span class="' + this.toThemeProperty("jqx-listmenu-item-label") + '"></span>'), this.showNavigationArrows || this.alwaysShowNavigationArrows)) { var i = e("<span/>"), s = e(t).find("ul"), r = e(t).find("ol"); (this.alwaysShowNavigationArrows || s.length > 0 && /(listmenu)/.test(s.data("role")) || r.length > 0 && /(listmenu)/.test(r.data("role"))) && (i.addClass(this.toThemeProperty("jqx-listmenu-arrow-right")), this.rtl ? (i.addClass(this.toThemeProperty("jqx-icon-arrow-left")), i.addClass(this.toThemeProperty("jqx-listmenu-arrow-rtl")), i.prependTo(t)) : (i.addClass(this.toThemeProperty("jqx-icon-arrow-right")), i.appendTo(t))) } }, _removeLiEventHandlers: function (t) { var i = this.isTouchDevice(), s = e.jqx.mobile.getTouchEventName("touchstart"), r = e.jqx.mobile.getTouchEventName("touchend"), o = (e.jqx.mobile.getTouchEventName("touchmove"), (i ? s : "mousedown") + ".listmenu"), a = (i ? r : "mouseup") + ".listmenu"; this.removeHandler(e(t), o), this.removeHandler(e(document), a + "." + t.id) }, isTouchDevice: function () { var t = e.jqx.mobile.isTouchDevice(); return 1 == this.touchMode && (t = !0), t }, _addLiEventHandlers: function (t) { t = e(t); var i = this, s = this.toThemeProperty("jqx-listmenu-arrow-right-pressed"), r = t.children(".jqx-listmenu-arrow-right"), o = e.jqx.mobile.isTouchDevice(), a = e.jqx.mobile.getTouchEventName("touchstart"), n = e.jqx.mobile.getTouchEventName("touchend"), l = (e.jqx.mobile.getTouchEventName("touchmove"), (o ? a : "mousedown") + ".listmenu"), h = (o ? n : "mouseup") + ".listmenu", d = null, c = ""; /(separator|readonly)/.test(t.data("role")) || this.readOnly || (this.addHandler(t, "dragstart", function () { return !1 }), this.addHandler(t, l, function (a) { i.disabled || (d = a.target, c = e.jqx.position(a), 0 == t.find('div[data-role="content"]').length && (o || (t.addClass(i.toThemeProperty("jqx-fill-state-pressed")), r.addClass(s)))) }), this.addHandler(t, h, function (s) { i.disabled || d != s.target && o || e.jqx.position(s).top === c.top && i.next(t) }), this.addHandler(e(document), h + "." + t[0].id, function () { i.disabled || (t.removeClass(i.toThemeProperty("jqx-fill-state-pressed")), r.removeClass(s)) })) }, _addLiClasses: function (t, i, s) { "separator" === (t = e(t)).data("role") ? this._handleSeparatorStyle(t) : "header" === t.data("role") ? this._handleHeaderStyle(t) : (this.readOnly || "readonly" === t.data("role") ? t.addClass(this.toThemeProperty("jqx-listmenu-item-readonly")) : t.removeClass(this.toThemeProperty("jqx-listmenu-item-readonly")), this._handleItemStyle(t)), 0 !== i || this.showHeader || this.showFilter || t.addClass(this.toThemeProperty("jqx-rc-t")), i === s - 1 && t.addClass(this.toThemeProperty("jqx-rc-b")) }, _handleSeparatorStyle: function (e) { e.addClass(this.toThemeProperty("jqx-listmenu-separator")), e.addClass(this.toThemeProperty("jqx-fill-state-pressed")), e[0].style.listStyle = "none" }, _handleHeaderStyle: function (e) { e.css("display", "none") }, _handleItemStyle: function (e) { e.addClass(this.toThemeProperty("jqx-listmenu-item")), this.rtl && e.addClass(this.toThemeProperty("jqx-rtl")), e.addClass(this.toThemeProperty("jqx-fill-state-normal")), e.addClass(this.toThemeProperty("jqx-item")) }, back: function () { var t, i = this._currentPage; i && (t = this._parentMap[i[0].id]), this._back = !0, e("#" + t).length > 0 && e.jqx.aria(e("#" + t), "aria-expanded", !1), this._changePage(i, e("#" + t).parent(), this.animationDuration, !0), this._back = !1 }, next: function (t) { var i = t.attr("id"), s = this._childrenMap[i], r = e("#" + s), o = e("#" + i).parent(); e.jqx.aria(t, "aria-expanded", !0), this._changePage(o, r, this.animationDuration) }, changePage: function (t) { if ("string" == typeof t && (t = e(t)), !t[0] || "listmenu" !== t.attr("data-role") || t.parents().index(this.host) < 0) throw new Error("Invalid newPage. The chosen newPage is not listmenu or it's not part of the selected jqxListMenu hierarchy."); this._currentPage[0] != t[0] && this._changePage(this._currentPage, t, this.animationDuration) }, _changePage: function (t, i, s, r) { if (!this._lock) { var o = "_" + this.animationType + "Change" + (r ? "Back" : ""); i[0] && (this.showFilter && (i.find('div[data-role="content"]').length > 0 ? (e.each(i.find("li"), function () { "separator" === e(this).data("role") && e(this).hide() }), this._filterBar.css("display", "none")) : this._filterBar.css("display", "block")), this._lock = !0, this[o](t, i, this.animationDuration, function () { this._lock = !1, this._changeHeader(i), this._currentPage = i })) } }, _changeHeader: function (t) { var i = e(t).find('li[data-role="header"]').first(); if (i[0]) { var s = this; this._headerLabel.fadeOut(this.headerAnimationDuration / 2, function () { s._headerLabel.html(i.html()), s._headerLabel.fadeIn(s.headerAnimationDuration / 2) }) } }, _slideChange: function (t, i, s, r) { var o = this; this.enableScrolling && null != this.panel && this.panel.jqxPanel("scrollTo", 0, 0); var a = this.rtl; this._initSlide(t, i), a ? (t.animate({ "margin-left": t.width() + parseInt(t.css("margin-right"), 10) || 0 }, s, "easeInOutSine"), i.animate({ "margin-left": 0 }, s, "easeInOutSine", function () { o._slideEnd(t, i), r.call(o, e(this)) })) : (t.animate({ "margin-left": -t.width() - parseInt(t.css("margin-right"), 10) || 0 }, s, "easeInOutSine"), i.animate({ "margin-left": 0 }, s, "easeInOutSine", function () { o._slideEnd(t, i), r.call(o, e(this)) })) }, _initSlide: function (e, t) { var i = this.rtl; e.width(e.width()), t.css({ marginTop: -e.outerHeight(!0), marginLeft: i ? -e.width() - (parseInt(e.css("margin-right"), 10) || 0) : e.width() + (parseInt(e.css("margin-right"), 10) || 0), display: "block", height: "auto", width: e.width() }) }, _slideEnd: function (e, t) { this.host.css("height", "auto"), e.css({ display: "none", width: "auto", height: "auto", marginTop: 0, marginLeft: 0 }), t.css({ marginTop: 0, marginLeft: 0, height: "auto", width: "auto", display: "block" }) }, _slideChangeBack: function (t, i, s, r) { var o = this; this._initSlideBack(t, i), t.animate({ "margin-left": this.rtl ? -t.width() - parseInt(t.css("margin-right"), 10) || 0 : t.width() + parseInt(t.css("margin-right"), 10) || 0 }, s), i.animate({ "margin-left": 0 }, s, function () { o._slideEnd(t, i), r.call(o, e(this)) }) }, _initSlideBack: function (e, t) { e.css({ marginTop: -t.outerHeight(!0), width: e.width() }), t.css({ width: e.width(), marginLeft: this.rtl ? e.width() + parseInt(e.css("margin-right"), 10) || 0 : -e.width() - parseInt(e.css("margin-right"), 10) || 0, display: "block", height: "auto" }) }, _fadeChangeBack: function (e, t, i, s) { this._fadeChange(e, t, i, s) }, _fadeChange: function (t, i, s, r) { var o = this; t.fadeOut(s / 2, function () { i.fadeIn(s / 2, function () { r.call(o, e(this)) }) }) }, _removeClasses: function () { this._filterBar.removeClass(this.toThemeProperty("jqx-listmenu-filter")), this._filterBar.removeClass(this.toThemeProperty("jqx-widget-header")), this._filterInput.removeClass(this.toThemeProperty("jqx-listmenu-filter-input")), this._filterInput.removeClass(this.toThemeProperty("jqx-input")), this._header.removeClass(this.toThemeProperty("jqx-listmenu-header")), this._header.removeClass(this.toThemeProperty("jqx-widget-header")), this._header.removeClass(this.toThemeProperty("jqx-rc-t")), this.roundedCorners && this.host.removeClass(this.toThemeProperty("jqx-rc-all")), this.host.removeClass(this.toThemeProperty("jqx-widget")), this.host.removeClass(this.toThemeProperty("jqx-listmenu-widget")), this.host.removeClass(this.toThemeProperty("jqx-fill-state-normal")), this.host.removeClass(this.toThemeProperty("jqx-reset")), this.host.find('div[data-role="content"]').length > 0 && this.host.find('div[data-role="content"]').removeClass(this.toThemeProperty("jqx-widget-content")) }, _addClasses: function () { this.roundedCorners ? this.host.addClass(this.toThemeProperty("jqx-rc-all")) : this.host.removeClass(this.toThemeProperty("jqx-rc-all")), this.host.addClass("jqx-widget"), this.host.addClass("jqx-listmenu-widget"), this.host.addClass("jqx-fill-state-normal"), this.host.addClass("jqx-reset"), this._filterBar.addClass(this.toThemeProperty("jqx-listmenu-filter")), this._filterBar.addClass(this.toThemeProperty("jqx-widget-header")), this._filterInput.addClass(this.toThemeProperty("jqx-listmenu-filter-input")), this._filterInput.addClass(this.toThemeProperty("jqx-input")), this._header.addClass(this.toThemeProperty("jqx-listmenu-header")), this._header.addClass(this.toThemeProperty("jqx-widget-header")), this._header.addClass(this.toThemeProperty("jqx-rc-t")), this.host.find('div[data-role="content"]').length > 0 && this.host.find('div[data-role="content"]').addClass(this.toThemeProperty("jqx-widget-content")) }, _raiseEvent: function () { }, _filter: function (t) { for (var i = this.host.find(".jqx-listmenu-item"), s = 0; s < i.length; s += 1) { var r = e.trim(e(i[s]).text()); this.filterCallback(r, t) ? i[s].style.display = "block" : i[s].style.display = "none" } for (var i = this.host.find(".jqx-listmenu-separator"), s = 0; s < i.length; s += 1) { var o = !1; e.each(i[s].items, function () { if ("none" != e(this).css("display")) return o = !0, !1 }), i[s].style.display = o ? "block" : "none" } }, disable: function () { this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")), this.disabled = !0 }, enable: function () { this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")), this.disabled = !1 }, propertyChangedHandler: function (e, t, i, s) { if ("disabled" == t && (s ? e.disable() : e.enable()), "backLabel" !== t) { if ("placeHolder" === t) e._filterInput.attr("placeholder", s); else if (/(showFilter|showHeader|showBackButton|width|height|autoSeparators|readOnly)/.test(t)) return void e._render() } else e._backButton.html(s) } }) }(jQuery); try { !function (e, t) { t.jqwidgets = t.jqwidgets || {}, t.jqwidgets.knockout = function (i) { var s = {}, r = i.name; s.init = function (s, o, a, n) { var l = t.utils.unwrapObservable(o()), h = t.toJS(l); if (i.reset && i.reset(), void 0 == e.data(s)[r]) { var d = []; e(s)[r](), widget = e.data(s)[r].instance, e.each(i, function (e, s) { if (widget.hasOwnProperty(e) && h.hasOwnProperty(e) && !widget.koupdating) { widget.koupdatingFromObservable = !0; try { var r = !1; i.serialize && i.serialize(widget, e) && (t.toJSON(h[e]) != t.toJSON(i.serialize(widget, e)) && i.setProperty(widget, e, widget[e], h[e]), r = !0), r || t.toJSON(h[e]) != t.toJSON(widget[e]) && i.setProperty(widget, e, widget[e], h[e]) } catch (t) { i.setProperty(widget, e, widget[e], h[e]) } d[e] = e, widget.koupdatingFromObservable = !1 } }); var c = {}; e.each(h, function (e, t) { void 0 == d[e] && (c[e] = h[e]) }), widget.host[r](c) } widget = e.data(s)[r].instance, widget.koupdatingFromObservable = !1, widget.koupdating = !1, i.events && e.each(i.events, function () { var a = this; e(s).on(a + "." + s.id, function (n) { if (widget = e.data(s)[r].instance, !widget.koupdatingFromObservable) { var h = widget; h.koupdating = !0; var d = o(), c = i.getProperty(widget, n, a, l); void 0 != c && (d.hasOwnProperty(c.name) && e.isFunction(d[c.name]) ? t.isObservable(d[c.name]) && d[c.name].push ? o(c.value) : d[c.name](c.value) : d[c.name] && o(c.value)), h.koupdating = !1 } }) }) }, s.update = function (s, o, a, n, l) { var h = t.utils.unwrapObservable(o()), d = t.toJS(h); widget = e.data(s)[r].instance, widget.koupdating || e.each(i, function (e, s) { if (widget.hasOwnProperty(e) && d.hasOwnProperty(e) && !widget.koupdating) { widget.koupdatingFromObservable = !0; var r = !1; i.serialize && i.serialize(widget, e) && (t.toJSON(d[e]) != t.toJSON(i.serialize(widget, e)) && i.setProperty(widget, e, widget[e], d[e]), r = !0), r || t.toJSON(d[e]) != t.toJSON(widget[e]) && i.setProperty(widget, e, widget[e], d[e]), widget.koupdatingFromObservable = !1 } }) }, t.bindingHandlers[i.name] = s }; new t.jqwidgets.knockout({ name: "jqxGauge", disabled: !1, min: 0, max: 220, value: 0, reset: function () { this.value = 0, this.max = 220, this.min = 0, this.disabled = !1 }, getProperty: function (e, t, i) { }, setProperty: function (e, t, i, s) { "disabled" == t && e.host.jqxGauge({ disabled: s }), "min" == t && e.host.jqxGauge({ min: s }), "max" == t && e.host.jqxGauge({ max: s }), "value" == t && e.host.jqxGauge({ value: s }) } }), new t.jqwidgets.knockout({ name: "jqxLinearGauge", disabled: !1, min: 0, max: 220, value: 0, reset: function () { this.value = 0, this.max = 220, this.min = 0, this.disabled = !1 }, getProperty: function (e, t, i) { }, setProperty: function (e, t, i, s) { "disabled" == t && e.host.jqxLinearGauge({ disabled: s }), "min" == t && e.host.jqxLinearGauge({ min: s }), "max" == t && e.host.jqxLinearGauge({ max: s }), "value" == t && e.host.jqxLinearGauge({ value: s }) } }), new t.jqwidgets.knockout({ name: "jqxSlider", disabled: !1, min: 0, max: 10, value: 0, reset: function () { this.value = 0, this.max = 10, this.min = 0, this.disabled = !1 }, events: ["change"], getProperty: function (e, t, i) { if ("change" == i) return { name: "value", value: t.args.value } }, setProperty: function (e, t, i, s) { "disabled" == t && e.host.jqxSlider({ disabled: s }), "min" == t && e.host.jqxSlider({ min: parseFloat(s) }), "max" == t && e.host.jqxSlider({ max: parseFloat(s) }), "value" == t && e.host.jqxSlider({ value: parseFloat(s) }) } }), new t.jqwidgets.knockout({ name: "jqxScrollBar", disabled: !1, min: 0, max: 10, value: 0, reset: function () { this.value = 0, this.max = 10, this.min = 0, this.disabled = !1 }, events: ["valuechanged"], getProperty: function (e, t, i) { if ("valuechanged" == i) return { name: "value", value: parseInt(t.currentValue) } }, setProperty: function (e, t, i, s) { "disabled" == t && e.host.jqxScrollBar({ disabled: s }), "min" == t && e.host.jqxScrollBar({ min: parseFloat(s) }), "max" == t && e.host.jqxScrollBar({ max: parseFloat(s) }), "value" == t && e.host.jqxScrollBar({ value: parseFloat(s) }) } }), new t.jqwidgets.knockout({ name: "jqxProgressBar", disabled: !1, value: 0, reset: function () { this.value = 0, this.disabled = !1 }, events: ["valuechanged"], getProperty: function (e, t, i) { if ("valuechanged" == i) return { name: "value", value: parseInt(t.currentValue) } }, setProperty: function (e, t, i, s) { "disabled" == t && e.host.jqxProgressBar({ disabled: s }), "value" == t && e.host.jqxProgressBar({ value: parseFloat(s) }) } }), new t.jqwidgets.knockout({ name: "jqxButton", disabled: !1, reset: function () { this.disabled = !1 }, getProperty: function (e, t, i) { }, setProperty: function (e, t, i, s) { "disabled" == t && e.host.jqxButton({ disabled: s }) } }), new t.jqwidgets.knockout({ name: "jqxCheckBox", checked: !1, disabled: !1, reset: function () { this.checked = !1, this.disabled = !1 }, events: ["change"], getProperty: function (e, t, i) { if ("change" == i) return { name: "checked", value: t.args.checked } }, setProperty: function (e, t, i, s) { "disabled" == t && e.host.jqxCheckBox({ disabled: s }), "checked" == t && i != s && e.host.jqxCheckBox({ checked: s }) } }), new t.jqwidgets.knockout({ name: "jqxRadioButton", checked: !1, disabled: !1, reset: function () { this.checked = !1, this.disabled = !1 }, events: ["change"], getProperty: function (e, t, i) { if ("change" == i) return { name: "checked", value: t.args.checked } }, setProperty: function (e, t, i, s) { "disabled" == t && e.host.jqxRadioButton({ disabled: s }), "checked" == t && i != s && e.host.jqxRadioButton({ checked: s }) } }), new t.jqwidgets.knockout({ name: "jqxDateTimeInput", value: null, disabled: !1, reset: function () { this.value = null, this.disabled = !1 }, events: ["valuechanged"], getProperty: function (e, t, i) { if ("valuechanged" == i) return { name: "value", value: t.args.date } }, setProperty: function (e, t, i, s) { "value" == t && e.setDate(s), "disabled" == t && e.host.jqxDateTimeInput({ disabled: s }) } }), new t.jqwidgets.knockout({ name: "jqxCalendar", value: null, disabled: !1, reset: function () { this.value = null, this.disabled = !1 }, events: ["valuechanged"], getProperty: function (e, t, i) { if ("valuechanged" == i) return { name: "value", value: t.args.date } }, setProperty: function (e, t, i, s) { "value" == t && e.setDate(s), "disabled" == t && e.host.jqxCalendar({ disabled: s }) } }), new t.jqwidgets.knockout({ name: "jqxNumberInput", value: null, events: ["valuechanged"], disabled: !1, reset: function () { this.value = null, this.disabled = !1 }, getProperty: function (e, t, i) { if ("valuechanged" == i) return { name: "value", value: e.val() } }, setProperty: function (e, t, i, s) { "value" == t && e.host.jqxNumberInput("val", s), "disabled" == t && e.host.jqxNumberInput({ disabled: s }) } }), new t.jqwidgets.knockout({ name: "jqxMaskedInput", value: null, events: ["valuechanged"], disabled: !1, reset: function () { this.value = null, this.disabled = !1 }, getProperty: function (e, t, i) { if ("valuechanged" == i) return { name: "value", value: e.val() } }, setProperty: function (e, t, i, s) { "value" == t && e.host.jqxMaskedInput("val", s), "disabled" == t && e.host.jqxMaskedInput({ disabled: s }) } }), new t.jqwidgets.knockout({ name: "jqxListBox", source: null, disabled: !1, selectedIndex: -1, reset: function () { this.disabled = !1, this.selectedIndex = -1, this.source = null }, events: ["change"], getProperty: function (e, t, i) { if ("change" == i) return this.selectedIndex = e.selectedIndex, { name: "selectedIndex", value: e.selectedIndex } }, setProperty: function (e, t, i, s) { if ("source" == t && (e.source = s, e.refresh()), "disabled" == t && (e.disabled = s, e._renderItems()), "selectedIndex" == t) { var r = e.disabled; e.disabled = !1, e.selectIndex(s), e.disabled = r, r && e._renderItems() } } }), new t.jqwidgets.knockout({ name: "jqxDropDownList", source: null, disabled: !1, selectedIndex: -1, reset: function () { this.disabled = !1, this.selectedIndex = -1, this.source = null }, events: ["change"], getProperty: function (e, t, i) { if ("change" == i) return { name: "selectedIndex", value: e.selectedIndex } }, setProperty: function (e, t, i, s) { "source" == t && e.host.jqxDropDownList({ source: s }), "disabled" == t && e.host.jqxDropDownList({ disabled: s }), "selectedIndex" == t && e.host.jqxDropDownList({ selectedIndex: s }) } }), new t.jqwidgets.knockout({ name: "jqxComboBox", source: null, disabled: !1, selectedIndex: -1, reset: function () { this.disabled = !1, this.selectedIndex = -1, this.source = null }, events: ["change"], getProperty: function (e, t, i) { if ("change" == i) return { name: "selectedIndex", value: e.selectedIndex } }, setProperty: function (e, t, i, s) { "source" == t && e.host.jqxComboBox({ source: s }), "disabled" == t && e.host.jqxComboBox({ disabled: s }), "selectedIndex" == t && e.host.jqxComboBox({ selectedIndex: s }) } }), new t.jqwidgets.knockout({ name: "jqxInput", source: null, disabled: !1, value: "", reset: function () { this.disabled = !1, this.source = null }, events: ["change"], getProperty: function (e, t, i) { if ("change" == i) return { name: "value", value: e.host.val() } }, setProperty: function (e, t, i, s) { "source" == t && e.host.jqxInput({ source: s }), "disabled" == t && e.host.jqxInput({ disabled: s }), "value" == t && e.host.jqxInput({ value: s }) } }), new t.jqwidgets.knockout({ name: "jqxTree", source: null, disabled: !1, reset: function () { this.disabled = !1, this.source = null }, getProperty: function (e, t, i) { }, setProperty: function (e, t, i, s) { "source" == t && e.host.jqxTree({ source: s }), "disabled" == t && e.host.jqxTree({ disabled: s }) } }), new t.jqwidgets.knockout({ name: "jqxTabs", disabled: !1, reset: function () { this.disabled = !1 }, getProperty: function (e, t, i) { }, setProperty: function (e, t, i, s) { "disabled" == t && e.host.jqxTabs({ disabled: s }) } }), new t.jqwidgets.knockout({ name: "jqxWindow", disabled: !1, content: "", title: "", reset: function () { this.disabled = !1, this.title = "", this.content = "" }, getProperty: function (e, t, i) { }, setProperty: function (e, t, i, s) { "disabled" == t ? e.host.jqxWindow({ disabled: s }) : "content" == t ? e.host.jqxWindow("setContent", s) : "title" == t && e.host.jqxWindow({ title: s }) } }), new t.jqwidgets.knockout({ name: "jqxNavigationBar", disabled: !1, reset: function () { this.disabled = !1 }, getProperty: function (e, t, i) { }, setProperty: function (e, t, i, s) { "disabled" == t && s != this.disabled && (this.disabled = s, e.host.jqxNavigationBar({ disabled: s })) } }), new t.jqwidgets.knockout({ name: "jqxMenu", source: null, disabled: !1, reset: function () { this.disabled = !1, this.source = null }, getProperty: function (e, t, i) { }, setProperty: function (e, t, i, s) { "source" == t && e.host.jqxMenu({ source: s }), "disabled" == t && e.host.jqxMenu({ disabled: s }) } }), new t.jqwidgets.knockout({ name: "jqxChart", source: null, disabled: !1, reset: function () { this.disabled = !1, this.source = null }, getProperty: function (e, t, i) { }, setProperty: function (e, t, i, s) { "source" == t && (this.source = s, e.host.jqxChart({ source: s })), "disabled" == t && (this.disabled = s, e.host.jqxChart({ disabled: s })) } }), new t.jqwidgets.knockout({ name: "jqxDataTable", source: null, disabled: !1, reset: function () { this.disabled = !1, this.source = null }, getProperty: function (e, t, i) { }, setProperty: function (e, t, i, s) { "source" == t && (this.source = s, e.host.jqxDataTable({ source: s })), "disabled" == t && (this.disabled = s, e.host.jqxDataTable({ disabled: s })) } }), new t.jqwidgets.knockout({ name: "jqxTreeGrid", source: null, disabled: !1, reset: function () { this.disabled = !1, this.source = null }, getProperty: function (e, t, i) { }, setProperty: function (e, t, i, s) { "source" == t && (this.source = s, e.host.jqxTreeGrid({ source: s })), "disabled" == t && (this.disabled = s, e.host.jqxTreeGrid({ disabled: s })) } }), new t.jqwidgets.knockout({ name: "jqxGrid", source: null, disabled: !1, selectedRowIndex: -1, reset: function () { this.disabled = !1, this.source = null, this.selectedRowIndex = -1 }, serialize: function (e, t) { return !("source" != t || !e.source || !e.source._source) && e.source.records }, events: ["cellvaluechanged", "cellselect", "rowselect"], getProperty: function (i, s, r, o) { if ("cellvaluechanged" == r) { var a = i.host.jqxGrid("getrowid", s.args.rowindex), n = i.host.jqxGrid("getrowdata", a), l = o.source; if (void 0 != l) { var h = {}, d = {}, c = !1, u = !1; return e.each(l()[a], function (e, i) { h[e] = i, d[e] = "", t.isObservable(i) && !t.isComputed(i) && (c = !0, i(n[e])), t.isObservable(i) && t.isComputed(i) && (u = !0) }), c ? l.replace(l()[a], h) : (h = n, l.replace(l()[a], d), l.replace(l()[a], h)), u && i.host.jqxGrid("updaterow", a, t.toJS(l)[a]), { name: "source", value: l } } } }, setProperty: function (i, s, r, o) { if ("selectedRowIndex" == s && i.host.jqxGrid("selectrow", o), "source" == s) if (null == this.source || null == o) { if (this.source != o) { this.source = o; var a = { localdata: o, datatype: "local" }, n = new e.jqx.dataAdapter(a); i.host.jqxGrid({ source: n }) } } else { a = { localdata: o, datatype: "local" }; if ((n = new e.jqx.dataAdapter(a)).dataBind(), !r.records || !n.records) return; var l = Math.max(r.records.length, n.records.length), h = Math.abs(r.records.length - n.records.length); if (0 == h && l > 10) return void i.host.jqxGrid({ source: n }); h > 1 && i.host.jqxGrid("beginupdate"); for (var d = new Array, c = 0; c < l; c++) { var u = n.records[c]; if (void 0 == u) { p = i.host.jqxGrid("getrowid", c); d.push(p) } else if (void 0 != r.records[c]) { if (t.toJSON(u) != t.toJSON(r.records[c])) { if (void 0 != r.records[c].uid && (u.uid = r.records[c].uid, t.toJSON(u) == t.toJSON(r.records[c]))) continue; var p = i.host.jqxGrid("getrowid", c); i.host.jqxGrid("updaterow", p, u) } } else i.host.jqxGrid("addrow", null, u) } d.length > 0 && i.host.jqxGrid("deleterow", d), h > 1 && i.host.jqxGrid("endupdate") } "disabled" == s && i.host.jqxGrid({ disabled: o }) } }), new t.jqwidgets.knockout({ name: "jqxBulletChart", pointer: { value: 0 }, target: { value: 0 }, disabled: !1, reset: function () { this.pointer.value = 0, this.target.value = 0, this.disabled = !1 }, getProperty: function (e, t, i) { }, setProperty: function (e, t, i, s) { "pointer" == t && e.host.jqxBulletChart({ pointer: s }), "target" == t && e.host.jqxBulletChart({ target: s }), "disabled" == t && e.host.jqxBulletChart({ disabled: s }) } }) }(jQuery, ko) } catch (e) { var er = e } !function (e) { var t = 0; e.jqx.jqxWidget("jqxScrollView", "", {}), e.extend(e.jqx._jqxScrollView.prototype, { defineInstance: function () { this.width = 320, this.height = 320, this.buttonsOffset = [0, 0], this.moveThreshold = .5, this.currentPage = 0, this.animationDuration = 300, this.showButtons = !0, this.bounceEnabled = !0, this.slideShow = !1, this.slideDuration = 3e3, this.disabled = !1, this._mouseDown = !1, this._movePermited = !1, this._startX = -1, this._startOffset = -1, this._lastOffset = -1, this._events = ["pageChanged"], this._eventsMap = { mousedown: e.jqx.mobile.getTouchEventName("touchstart"), mouseup: e.jqx.mobile.getTouchEventName("touchend"), mousemove: e.jqx.mobile.getTouchEventName("touchmove") } }, createInstance: function () { t += 1, this._instanceId = t, this._isTouchDevice = e.jqx.mobile.isTouchDevice(); var i = this; e.jqx.utilities.resize(this.host, function () { i.refresh() }) }, resize: function (e, t) { this.width = e, this.height = t, this.refresh() }, refresh: function () { if (this.host.width(this.width), this.host.height(this.height), this._render(), this._performLayout(), this.moveThreshold.toString().indexOf("%") >= 0 && (this.moveThreshold = parseInt(this.moveThreshold, 10) / 100), this._refreshPages(), this._refreshButtons(), this._removeEventListeners(), this._addEventListeners(), this._changePage(this.currentPage, !1, 0), this.slideShow) { var e = this; this.slideShowTimer = setInterval(function () { e.currentPage >= e._pages.length - 1 ? e._changePage(0, !0, e.animationDuration) : e._changePage(e.currentPage + 1, !0, e.animationDuration) }, this.slideDuration) } else void 0 != this.slideShowTimer && clearInterval(this.slideShowTimer) }, destroy: function () { this.host.remove() }, _getEvent: function (e) { return this._isTouchDevice ? this._eventsMap[e] : e }, _eventNamespace: function () { return ".scrollview" + this._instanceId }, _removeEventListeners: function () { this.removeHandler(this._innerWrapper), this.removeHandler(this.host, this._getEvent("mousemove") + this._eventNamespace()), this.removeHandler(e(document), this._getEvent("mouseup") + this._eventNamespace()) }, _getCoordinate: function (t, i) { if (this._isTouchDevice) { var s = e.jqx.position(t); if ("pageX" == i) return s.left; if ("pageY" == i) return s.top; if (t.originalEvent.touches) return t.originalEvent.touches[0][i] } return t[i] }, _draggedRight: function () { if (this.currentPage > 0) { var t = this.currentPage - 1, i = e(this._pages[t]); if (i.offset().left + i.outerWidth() - this.host.offset().left >= this.host.width() * this.moveThreshold) return this.changePage(t), !0 } return !1 }, _draggedLeft: function () { if (this.currentPage + 1 < this._pages.length) { var t = this.currentPage + 1, i = e(this._pages[t]); if (this.host.width() - (i.offset().left - this.host.offset().left) >= this.host.width() * this.moveThreshold) return this.changePage(t), !0 } return !1 }, _dropTarget: function () { (this._movedLeft ? this._draggedLeft() : this._draggedRight()) || this.changePage(this.currentPage, !1) }, _scrollEnabled: function (e) { return !!this._mouseDown && (this._movePermited || Math.abs(this._getCoordinate(e, "pageX") - this._startX) >= 15 && (this._movePermited = !0), this._movePermited) }, _setMoveDirection: function (e) { this._lastOffset > e ? this._movedLeft = !0 : this._movedLeft = !1 }, _getBounceOffset: function (e) { var t = -(this._innerWrapper.width() - this.host.width()); return e > 0 ? e = 0 : e < t && (e = t), e }, _addEventListeners: function () { var t = this; this.addHandler(this._innerWrapper, this._getEvent("mousedown") + this._eventNamespace(), function (e) { t._mouseDown = !0, t._startX = t._getCoordinate(e, "pageX"), t._startOffset = t._lastOffset = parseInt(t._innerWrapper.css("margin-left"), 10) }), this.addHandler(this.host, "dragstart", function () { return !1 }), this.addHandler(this.host, this._getEvent("mousemove") + this._eventNamespace(), function (e) { if (t._scrollEnabled(e)) { var i = t._startOffset + t._getCoordinate(e, "pageX") - t._startX; return t.bounceEnabled || (i = t._getBounceOffset(i)), t._innerWrapper.css("margin-left", i), t._setMoveDirection(i), t._lastOffset = i, e.preventDefault(), !1 } return !0 }), this.addHandler(e(document), this._getEvent("mouseup") + this._eventNamespace(), function (e) { t._movePermited && t._dropTarget(), t._movePermited = !1, t._mouseDown = !1 }); try { if (("" != document.referrer || window.frameElement) && (null != window.top && window.parent && document.referrer && (parentLocation = document.referrer), -1 != parentLocation.indexOf(document.location.host))) { var i = function (e) { t._movePermited && t._dropTarget(), t._movePermited = !1, t._mouseDown = !1 }; window.top.document.addEventListener ? window.top.document.addEventListener("mouseup", i, !1) : window.top.document.attachEvent && window.top.document.attachEvent("onmouseup", i) } } catch (e) { } }, _render: function () { this.host.addClass(this.toThemeProperty("jqx-scrollview")), this.host.css({ overflow: "hidden", position: "relative" }) }, _performLayout: function () { this.host.css({ width: this.width, height: this.height }) }, _renderPages: function () { this._innerWrapper || (this._innerWrapper = e("<div/>"), this.host.wrapInner(this._innerWrapper), this._innerWrapper = this.host.children().first()), this._innerWrapper.addClass(this.toThemeProperty("jqx-scrollview-inner-wrapper")), this._innerWrapper.height(this.host.height()) }, _refreshPage: function (e) { e.addClass(this.toThemeProperty("jqx-scrollview-page")), this._performPageLayout(e) }, _refreshPages: function () { var t = this, i = 0; this._renderPages(), this._pages = this._innerWrapper.children(), this._pages.each(function () { t._refreshPage(e(this)), i += e(this).outerWidth(!0) }), this._innerWrapper.width(i) }, _performPageLayout: function (e) { e.css("float", "left"), e.width(this.host.width()), e.height(this.host.height()) }, _refreshButtons: function () { this._renderButtons(), this._removeButtonsEventListeners(), this._addButtonsEventListeners(), this._performButtonsLayout() }, _removeButtonsEventListeners: function () { var t = this; this._buttonsContainer.children().each(function () { t.removeHandler(e(this)) }) }, _addButtonsEventListeners: function () { var t = this; this._buttonsContainer.children().each(function (i) { t.addHandler(e(this), "click", function () { t.changePage(i) }) }) }, _performButtonsLayout: function () { var e = (this.host.width() - this._buttonsContainer.width()) / 2, t = 0 != this._buttonsContainer.outerHeight() ? this._buttonsContainer.outerHeight() : 14; this._buttonsContainer.css({ position: "absolute", left: e + parseInt(this.buttonsOffset[0], 10), top: this.host.height() - 2 * t + parseInt(this.buttonsOffset[1], 10) - 1 }) }, _renderButtons: function () { this._buttonsContainer && this._buttonsContainer.remove(); var t; this._buttons = [], this._buttonsContainer = e("<span/>"); for (var i = 0; i < this._pages.length; i += 1) t = e('<span class="' + this.toThemeProperty("jqx-scrollview-button") + " " + this.toThemeProperty("jqx-fill-state-normal") + '"></span>'), this._buttonsContainer.append(t), this._buttons[i] = t; this._buttonsContainer.appendTo(this.host), this.showButtons || this._buttonsContainer.hide() }, _raiseEvent: function (t, i) { var s = new e.Event(this._events[t]); return s.args = i, this.host.trigger(s) }, _swapButtons: function (e, t) { this._buttons[e].removeClass(this.toThemeProperty("jqx-scrollview-button-selected")), this._buttons[e].removeClass(this.toThemeProperty("jqx-fill-state-pressed")), this._buttons[t].addClass(this.toThemeProperty("jqx-scrollview-button-selected")), this._buttons[t].addClass(this.toThemeProperty("jqx-fill-state-pressed")) }, _changePage: function (t, i, s) { if (!this.disabled) { var r = e(this._pages[t]), o = (this.host.width() - r.width()) / 2, a = r.offset().left - this._innerWrapper.offset().left - o, n = this.currentPage, l = this; void 0 === s && (s = this.animationDuration), this._innerWrapper.stop(), this._swapButtons(this.currentPage, t), this.currentPage = t, this._innerWrapper.animate({ marginLeft: -a }, s, function () { i && l._raiseEvent(0, { currentPage: t, oldPage: n }) }) } }, propertyChangedHandler: function (e, t, i, s) { if ("currentPage" === t) e.currentPage = i, e.changePage(s); else if (/(buttonsOffset|width|height)/.test(t)) e.refresh(); else { if ("showButtons" === t) return void (s ? e._buttonsContainer.css("display", "block") : e._buttonsContainer.css("display", "none")); "slideShow" == t && e.refresh() } }, changePage: function (e) { if (e >= this._pages.length || e < 0) throw new Error("Invalid index!"); this._changePage(e, !0) }, forward: function () { this.currentPage + 1 < this._pages.length && this.changePage(this.currentPage + 1) }, back: function () { this.currentPage - 1 >= 0 && this.changePage(this.currentPage - 1) } }) }(jQuery), function (e) { var t = 0; e.jqx.jqxWidget("jqxTouch", "", {}), e.extend(e.jqx._jqxTouch.prototype, { defineInstance: function () { this.swipeMin = 50, this.swipeMax = 500, this.swipeDelay = 1e3, this.tapHoldDelay = 750, this.swipeMaxVerticalDisance = 100, this.swipeMaxHorizontalDisance = 100, this.orientationChangeEnabled = !0, this._eventsMap = { mousedown: e.jqx.mobile.getTouchEventName("touchstart"), mouseup: e.jqx.mobile.getTouchEventName("touchend"), mousemove: e.jqx.mobile.getTouchEventName("touchmove") }, this._swipeLocked = !1, this._rotationInterval = 200, this._events = ["tap", "taphold", "swipe", "swipeleft", "swiperight", "swipetop", "swipebottom", "orientationchange"], this._instanceId = -1 }, createInstance: function () { t += 1, this._instanceId = t, this._isTouchDevice = e.jqx.mobile.isTouchDevice(), this._defineRotateHandler() }, refresh: function () { this._removeEventListeners(), this._addEventListeners() }, _defineRotateHandler: function () { var e = this; this._rotateHandler || (this._rotateHandler = function () { e._checkOrientation() }) }, _getEvent: function (e) { return this._isTouchDevice && (e = this._eventsMap[e]), e + this._getEventNamespace() }, _getEventNamespace: function () { return ".swipe" + this._instanceId }, _removeEventListeners: function () { clearInterval(this._rotateInterval), this.removeHandler(e(document), this._getEvent("mouseup")), this.removeHandler(this.host, this._getEvent("mousedown")), this.removeHandler(this.host, this._getEvent("mousemove")), window.removeEventListener && (window.removeEventListener("resize", this._rotateHandler), window.removeEventListener("orientationchange", this._rotateHandler)) }, _addEventListeners: function () { var e = this; this.addHandler(this.host, this._getEvent("mouseup"), function (t) { e._resetSwipe(), e._resetTap() }), this.addHandler(this.host, this._getEvent("mousedown"), function (t) { e._initSwipe(t), e._initTap(t) }), this.addHandler(this.host, this._getEvent("mousemove"), function (t) { return e._maxSwipeVerticalDistance = Math.max(e._maxSwipeVerticalDistance, Math.abs(e._startY - e._getCoordinates(t).y)), e._maxSwipeHorizontalDistance = Math.max(e._maxSwipeHorizontalDistance, Math.abs(e._startX - e._getCoordinates(t).x)), e._mouseMoved = !0, e._handleSwipeEvents(t) }), this._rotationListeners() }, _handleSwipeEvents: function (e) { var t = !0; return this._mouseDown && !this._tapHoldFired && (t = this._handleVerticalSwipeEvents(e), t = this._handleHorizontalSwipeEvents(e)), this._lastPosition = this._getCoordinates(e), t }, _handleVerticalSwipeEvents: function (e) { var t, i; return t = this._getCoordinates(e).y, i = t - this._startY, !(this._maxSwipeHorizontalDistance < this.swipeMaxHorizontalDisance) || this._swiped(e, i, 2) }, _handleHorizontalSwipeEvents: function (e) { var t, i; return t = this._getCoordinates(e).x, i = t - this._startX, !(this._maxSwipeVerticalDistance < this.swipeMaxVerticalDisance) || this._swiped(e, i) }, _swiped: function (e, t, i) { return i = i || 0, Math.abs(t) >= this.swipeMin && !this._swipeEvent && !this._swipeLocked && (this._swipeEvent = this._getSwipeEvent(t, i)), !(Math.abs(t) <= this.swipeMax) || (e.stopImmediatePropagation(), !1) }, _getSwipeEvent: function (e, t) { return e < 0 ? { eventId: 3 + t, data: { target: this.host } } : { eventId: 4 + t, data: { target: this.host } } }, _resetSwipe: function () { this._swipeEvent && !this._swipeLocked && (this._raiseEvent(2, this._swipeEvent.data), this._raiseEvent(this._swipeEvent.eventId, this._swipeEvent.data)), clearTimeout(this._swipeTimeout), this._mouseDown = !1 }, _resetTap: function () { clearTimeout(this._tapHoldTimeout), this._tapHoldFired || this._mouseMoved || this._raiseEvent(0, { target: this.host }) }, _initTap: function (e) { var t = this; this._mouseMoved = !1, this._tapHoldFired = !1, this._tapHoldTimeout = setTimeout(function () { t._mouseMoved || (t._raiseEvent(1, { target: this.host }), t._tapHoldFired = !0) }, this.tapHoldDelay) }, _initSwipe: function (e) { var t = this; this._mouseDown = !0, this._maxSwipeVerticalDistance = 0, this._maxSwipeHorizontalDistance = 0, this._startX = this._getCoordinates(e).x, this._startY = this._getCoordinates(e).y, this._swipeLocked = !1, this._swipeEvent = null, this._swipeTimeout = setTimeout(function () { t._swipeLocked = !0 }, this.swipeDelay) }, _rotationListeners: function () { var e = this; this._previousOrientation = window.orientation, this._previousWidth = screen.width, this.orientationChangeEnabled && (window.addEventListener && (window.addEventListener("resize", this._rotateHandler, !1), window.addEventListener("orientationchange", this._rotateHandler, !1)), this._rotateInterval = setInterval(function () { e._checkOrientation() }, this._rotationInterval)) }, _checkOrientation: function () { var e = "vertical"; window.orientation === this._previousOrientation && this._previousWidth === screen.width || ((90 === window.orientation || screen.width > screen.height) && (e = "horizontal"), this._raiseEvent(7, { orientation: e })), this._previousOrientation = window.orientation, this._previousWidth = screen.width }, _raiseEvent: function (t, i) { var s = e.Event(this._events[t]); return s.args = i, this.host.trigger(s) }, _getCoordinates: function (t) { var i = e.jqx.position(t); return i.x = i.left, i.y = i.top, i }, propertyChangedHandler: function (e, t, i, s) { "orientationChangeEnabled" === t && this.refresh() }, isTouchDevice: function () { return this._isTouchDevice } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxInput", "", {}), e.extend(e.jqx._jqxInput.prototype, { defineInstance: function () { this.disabled = !1, this.filter = this.filter || this._filter, this.sort = this.sort || this._sort, this.highlight = this.highlight || this._highlight, this.renderer = this.renderer || this._renderer, this.opened = !1, this.$popup = e("<ul></ul>"), this.source = [], this.roundedCorners = !0, this.searchMode = "default", this.placeHolder = "", this.width = null, this.height = null, this.value = "", this.rtl = !1, this.displayMember = "", this.valueMember = "", this.events = ["select", "open", "close"], this.popupZIndex = 2e4, this.items = 8, this.item = '<li><a href="#"></a></li>', this.minLength = 1, this.maxLength = null }, createInstance: function (e) { this.render() }, render: function () { if ("textarea" == this.element.nodeName.toLowerCase()) this.element.style.overflow = "auto"; else if ("div" == this.element.nodeName.toLowerCase()) { this.baseHost = this.element; var t = this.host.find("input"), i = !1; if (e.each(t, function () { var s = this.type; if (null == s || "text" == s || "textarea" == s) return t = e(this), i = !0, !1 }), !i) throw new Error("jqxInput: Missing Text Input in the Input Group"); if (t.length > 0) { this.baseHost = e(this.element), this.host = t, this.element = t[0], this.baseHost.addClass(this.toThemeProperty("jqx-widget")), this.baseHost.addClass(this.toThemeProperty("jqx-rc-all")), this.baseHost.addClass(this.toThemeProperty("jqx-input-group")); var s = this.baseHost.children(), r = this; e.each(s, function (t) { e(this).addClass(r.toThemeProperty("jqx-input-group-addon")), e(this).removeClass(r.toThemeProperty("jqx-rc-all")), 0 == t && e(this).addClass(r.toThemeProperty("jqx-rc-l")), t == s.length - 1 && e(this).addClass(r.toThemeProperty("jqx-rc-r")), this != r.element && e(this).addClass(r.toThemeProperty("jqx-fill-state-normal")) }) } } this.addHandlers(), this.rtl && this.host.addClass(this.toThemeProperty("jqx-rtl")), this.host.attr("role", "textbox"), e.jqx.aria(this, "aria-autocomplete", "both"), e.jqx.aria(this, "aria-disabled", this.disabled), e.jqx.aria(this, "aria-readonly", !1), e.jqx.aria(this, "aria-multiline", !1), this.source && this.source.length && e.jqx.aria(this, "aria-haspopup", !0), "" != this.value && (this.element.value = this.value), this._oldsource = this.source, this._updateSource() }, _updateSource: function () { var t = this, i = function (i) { new Array; return e.map(i, function (e) { if (void 0 == e) return null; if ("string" == typeof e) return { label: e, value: e }; if ("string" != typeof e) { var i = "", s = ""; return "" != t.displayMember && void 0 != t.displayMember && e[t.displayMember] && (i = e[t.displayMember]), "" != t.valueMember && void 0 != t.valueMember && (s = e[t.valueMember]), "" == i && (i = e.label), "" == s && (s = e.value), { label: i, value: s } } return e }) }; if (this.source && this.source._source) { if (this.adapter = this.source, null != this.adapter._source.localdata) this.adapter.unbindBindingUpdate(this.element.id), this.adapter.bindBindingUpdate(this.element.id, function (e) { t.source = i(t.adapter.records) }); else { var s = {}; this.adapter._options.data ? e.extend(t.adapter._options.data, s) : (this.source._source.data && e.extend(s, this.source._source.data), this.adapter._options.data = s), this.adapter.unbindDownloadComplete(this.element.id), this.adapter.bindDownloadComplete(this.element.id, function (e) { t.source = i(t.adapter.records) }) } this.source.dataBind() } else e.isFunction(this.source) || (this.source = i(this.source)) }, _refreshClasses: function (t) { var i = t ? "addClass" : "removeClass"; this.host[i](this.toThemeProperty("jqx-widget-content")), this.host[i](this.toThemeProperty("jqx-input")), this.host[i](this.toThemeProperty("jqx-widget")), this.$popup[i](this.toThemeProperty("jqx-popup")), e.jqx.browser.msie && this.$popup[i](this.toThemeProperty("jqx-noshadow")), this.$popup[i](this.toThemeProperty("jqx-input-popup")), this.$popup[i](this.toThemeProperty("jqx-menu")), this.$popup[i](this.toThemeProperty("jqx-menu-vertical")), this.$popup[i](this.toThemeProperty("jqx-menu-dropdown")), this.$popup[i](this.toThemeProperty("jqx-widget")), this.$popup[i](this.toThemeProperty("jqx-widget-content")), this.roundedCorners && (this.host[i](this.toThemeProperty("jqx-rc-all")), this.$popup[i](this.toThemeProperty("jqx-rc-all"))), this.disabled ? this.host[i](this.toThemeProperty("jqx-fill-state-disabled")) : this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")) }, selectAll: function () { var e = this.host; setTimeout(function () { if ("selectionStart" in e[0]) e[0].focus(), e[0].setSelectionRange(0, e[0].value.length); else { var t = e[0].createTextRange(); t.collapse(!0), t.moveEnd("character", e[0].value.length), t.moveStart("character", 0), t.select() } }, 10) }, selectLast: function () { var e = this.host; this.selectStart(e[0].value.length) }, selectFirst: function () { this.host; this.selectStart(0) }, selectStart: function (e) { var t = this.host; setTimeout(function () { if ("selectionStart" in t[0]) t[0].focus(), t[0].setSelectionRange(e, e); else { var i = t[0].createTextRange(); i.collapse(!0), i.moveEnd("character", e), i.moveStart("character", e), i.select() } }, 10) }, focus: function () { try { this.host.focus(); var e = this; setTimeout(function () { e.host.focus() }, 25) } catch (e) { } }, resize: function (e, t) { this.width = e, this.height = t, this.refresh() }, refresh: function () { if (this._refreshClasses(!1), this._refreshClasses(!0), this.baseHost) { if (this.width && this.baseHost.width(this.width), this.height) { this.baseHost.height(this.height); var t = this, i = 0, s = this.baseHost.height() - 2; e.jqx.browser.msie && e.jqx.browser.version < 8 && this.baseHost.css("display", "inline-block"), e.each(this.baseHost.children(), function () { e(this).css("height", "100%"), e.jqx.browser.msie && e.jqx.browser.version < 8 && e(this).css("height", s + "px"), this !== t.element && (i += e(this).outerWidth() + 2) }), this.host.css("width", this.baseHost.width() - i - 4 + "px"), e.jqx.browser.msie && e.jqx.browser.version < 9 && (this.host.css("min-height", s + "px"), this.host.css("line-height", s + "px")) } } else this.width && this.host.width(this.width), this.height && this.host.height(this.height); this.host.attr("disabled", this.disabled), this.maxLength && this.host.attr("maxlength", this.maxLength), this.host.attr("placeholder") || this._refreshPlaceHolder() }, _refreshPlaceHolder: function () { if ("placeholder" in this.element) this.host.attr("placeHolder", this.placeHolder); else { var e = this; "" == this.element.value && (this.element.value = this.placeHolder, this.host.focus(function () { e.element.value == e.placeHolder && (e.element.value = "") }), this.host.blur(function () { "" != e.element.value && e.element.value != e.placeHolder || (e.element.value = e.placeHolder) })) } }, destroy: function () { this.removeHandlers(), this.host.remove(), this.$popup && this.$popup.remove() }, propertyChangedHandler: function (t, i, s, r) { "placeHolder" != i ? "opened" != i ? ("source" == i && (t._oldsource = r, t._updateSource()), "displayMember" != i && "valueMember" != i || (t.source = t._oldsource, t._updateSource()), "disabled" == i && e.jqx.aria(t, "aria-disabled", t.disabled), "value" == i && (t.element.value = r), t.refresh()) : r ? t.open() : t.close() : t._refreshPlaceHolder() }, select: function (e, t) { var i = this.$popup.find(".jqx-fill-state-pressed").attr("data-value"), s = this.$popup.find(".jqx-fill-state-pressed").attr("data-name"); return this.element.value = this.renderer(s, this.element.value), this.selectedItem = { label: s, value: i }, this.host.attr("data-value", i), this.host.attr("data-label", s), this._raiseEvent("0", { item: { label: s, value: i }, label: s, value: i }), this.close() }, val: function (e) { return 0 == arguments.length || null != e && "object" == typeof e && !e.label && !e.value ? "" != this.displayMember && "" != this.valueMember && this.selectedItem ? this.selectedItem : this.element.value : e && e.label ? (this.selectedItem = { label: e.label, value: e.value }, this.host.attr("data-value", e.value), this.host.attr("data-label", e.label), this.value = e, this.element.value = e.label, this.element.value) : (this.value = e, this.element.value = e, this.host.attr("data-value", e), this.host.attr("data-label", e), this.element.value) }, _raiseEvent: function (e, t) { void 0 == t && (t = { owner: null }); var i = this.events[e]; t.owner = this; var s = new jQuery.Event(i); return s.owner = this, s.args = t, s.preventDefault && s.preventDefault(), this.host.trigger(s) }, _renderer: function (e) { return e }, open: function () { if (!e.jqx.isHidden(this.host)) { var t = e.extend({}, this.host.coord(!0), { height: this.host[0].offsetHeight }); if (0 == this.$popup.parent().length) { var i = this.element.id + "_popup"; this.$popup[0].id = i, e.jqx.aria(this, "aria-owns", i) } this.$popup.appendTo(e(document.body)).css({ position: "absolute", zIndex: this.popupZIndex, top: t.top + t.height, left: t.left }).show(); var s = 0, r = this.$popup.children(); return e.each(r, function () { s += e(this).outerHeight(!0) - 1 }), this.$popup.height(s), this.opened = !0, this._raiseEvent("1", { popup: this.$popup }), e.jqx.aria(this, "aria-expanded", !0), this } }, close: function () { return this.$popup.hide(), this.opened = !1, this._raiseEvent("2", { popup: this.$popup }), e.jqx.aria(this, "aria-expanded", !1), this }, suggest: function (t) { var i; return this.query = this.element.value, !this.query || this.query.length < this.minLength ? this.opened ? this.close() : this : (i = e.isFunction(this.source) ? this.source(this.query, e.proxy(this.load, this)) : this.source, i ? this.load(i) : this) }, load: function (t) { var i = this; return t = e.grep(t, function (e) { return i.filter(e) }), t = this.sort(t), t.length ? this._render(t.slice(0, this.items)).open() : this.opened ? this.close() : this }, _filter: function (t) { var i = this.query, s = t; switch (null != t.label ? s = t.label : this.displayMember && (s = t[this.displayMember]), this.searchMode) { case "containsignorecase": default: return e.jqx.string.containsIgnoreCase(s, i); case "contains": return e.jqx.string.contains(s, i); case "equals": return e.jqx.string.equals(s, i); case "equalsignorecase": return e.jqx.string.equalsIgnoreCase(s, i); case "startswith": return e.jqx.string.startsWith(s, i); case "startswithignorecase": return e.jqx.string.startsWithIgnoreCase(s, i); case "endswith": return e.jqx.string.endsWith(s, i); case "endswithignorecase": return e.jqx.string.endsWithIgnoreCase(s, i) } }, _sort: function (e) { for (var t, i = [], s = [], r = [], o = 0; o < e.length; o++) { var a = t = e[o]; t.label ? a = t.label : this.displayMember && (a = t[this.displayMember]), 0 === a.toLowerCase().indexOf(this.query.toLowerCase()) ? i.push(t) : a.indexOf(this.query) >= 0 ? s.push(t) : a.toLowerCase().indexOf(this.query.toLowerCase()) >= 0 && r.push(t) } return i.concat(s, r) }, _highlight: function (e) { var t = this.query; t = t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&"); var i = new RegExp("(" + t + ")", "ig"); return e.replace(i, function (e, t) { return "<b>" + t + "</b>" }) }, _render: function (t) { var i = this; return (t = e(t).map(function (t, s) { var r = s; t = void 0 != s.value ? void 0 != s.label ? e(i.item).attr({ "data-name": s.label, "data-value": s.value }) : e(i.item).attr({ "data-name": s.value, "data-value": s.value }) : void 0 != s.label ? e(i.item).attr({ "data-value": s.label, "data-name": s.label }) : void 0 != i.displayMember && "" != i.displayMember ? e(i.item).attr({ "data-name": s[i.displayMember], "data-value": s[i.valueMember] }) : e(i.item).attr({ "data-value": s, "data-name": s }), s.label ? r = s.label : i.displayMember && (r = s[i.displayMember]), t.find("a").html(i.highlight(r)); var o = ""; return i.rtl && (o = " " + i.toThemeProperty("jqx-rtl")), t[0].className = i.toThemeProperty("jqx-item") + " " + i.toThemeProperty("jqx-menu-item") + " " + i.toThemeProperty("jqx-rc-all") + o, t[0] })).first().addClass(this.toThemeProperty("jqx-fill-state-pressed")), this.$popup.html(t), this.$popup.width(this.host.outerWidth() - 6), this }, next: function (t) { var i = this.$popup.find(".jqx-fill-state-pressed").removeClass(this.toThemeProperty("jqx-fill-state-pressed")).next(); i.length || (i = e(this.$popup.find("li")[0])), i.addClass(this.toThemeProperty("jqx-fill-state-pressed")) }, prev: function (e) { var t = this.$popup.find(".jqx-fill-state-pressed").removeClass(this.toThemeProperty("jqx-fill-state-pressed")).prev(); t.length || (t = this.$popup.find("li").last()), t.addClass(this.toThemeProperty("jqx-fill-state-pressed")) }, addHandlers: function () { this.addHandler(this.host, "focus", e.proxy(this.onFocus, this)), this.addHandler(this.host, "blur", e.proxy(this.onBlur, this)), this.addHandler(this.host, "keypress", e.proxy(this.keypress, this)), this.addHandler(this.host, "keyup", e.proxy(this.keyup, this)), this.addHandler(this.host, "keydown", e.proxy(this.keydown, this)), this.addHandler(this.$popup, "mousedown", e.proxy(this.click, this)), this.host.on ? this.$popup.on("mouseenter", "li", e.proxy(this.mouseenter, this)) : this.$popup.bind("mouseenter", "li", e.proxy(this.mouseenter, this)) }, removeHandlers: function () { this.removeHandler(this.host, "focus", e.proxy(this.onFocus, this)), this.removeHandler(this.host, "blur", e.proxy(this.onBlur, this)), this.removeHandler(this.host, "keypress", e.proxy(this.keypress, this)), this.removeHandler(this.host, "keyup", e.proxy(this.keyup, this)), this.removeHandler(this.host, "keydown", e.proxy(this.keydown, this)), this.removeHandler(this.$popup, "mousedown", e.proxy(this.click, this)), this.host.off ? this.$popup.off("mouseenter", "li", e.proxy(this.mouseenter, this)) : this.$popup.unbind("mouseenter", "li", e.proxy(this.mouseenter, this)) }, move: function (e) { if (this.opened) { switch (e.keyCode) { case 9: case 13: case 27: e.preventDefault(); break; case 38: e.preventDefault(), this.prev(); break; case 40: e.preventDefault(), this.next() } e.stopPropagation() } }, keydown: function (t) { this.suppressKeyPressRepeat = ~e.inArray(t.keyCode, [40, 38, 9, 13, 27]), this.move(t) }, keypress: function (e) { this.suppressKeyPressRepeat || this.move(e) }, keyup: function (e) { switch (e.keyCode) { case 40: case 38: case 16: case 17: case 18: break; case 9: case 13: if (!this.opened) return; this.select(e, this); break; case 27: if (!this.opened) return; this.close(); break; default: var t = this; this.timer && clearTimeout(this.timer), this.timer = setTimeout(function () { t.suggest() }, 300) } e.stopPropagation(), e.preventDefault() }, clear: function () { this.host.val("") }, onBlur: function (e) { var t = this; setTimeout(function () { t.close() }, 150), t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")), this.value = this.host.val() }, onFocus: function (e) { var t = this; t.host.addClass(t.toThemeProperty("jqx-fill-state-focus")) }, click: function (e) { e.stopPropagation(), e.preventDefault(), this.select(e, this) }, mouseenter: function (t) { this.$popup.find(".jqx-fill-state-pressed").removeClass(this.toThemeProperty("jqx-fill-state-pressed")), e(t.currentTarget).addClass(this.toThemeProperty("jqx-fill-state-pressed")) } }) }(jQuery), function (e) { e.jqx.response = function () { this.defineInstance() }, e.jqx.response.prototype = { defineInstance: function () { this._handlers = new Array, this.refresh(); var t = this; this.addHandler(e(document), "scroll.jqxresponse", function () { t.scroll = t.getScroll() }) }, refresh: function () { this.os = this.getOS(), this.browser = this.getBrowser(), this.device = this.getDevice(), this.viewPort = this.getViewPort(), this.document = this.getDocument(), this.scroll = this.getScroll(), this.media = window.matchMedia || window.msMatchMedia || function () { return {} } }, refreshSize: function () { this.viewPort = this.getViewPort(), this.document = this.getDocument() }, addHandler: function (e, t, i, s) { switch (t) { case "mousemove": if (window.addEventListener && !s) return e[0].addEventListener("mousemove", i, !1), !1 } e.on ? e.on(t, i) : e.bind(t, i) }, removeHandler: function (e, t, i) { void 0 != t ? void 0 == i ? e.off ? e.off(t) : e.unbind(t) : e.off ? e.off(t, i) : e.unbind(t, i) : e.off ? e.off() : e.unbind() }, destroy: function () { this.removeHandler(e(window), "resize.jqxresponse"), this.removeHandler(e(document), "scroll.jqxresponse"); for (var t = 0; t < this._handlers.length; t++) { var i = this._handlers[t]; this.removeHandler(e(i), "mousedown.response" + i[0].id), this.removeHandler(e(i), "touchstart.response" + i[0].id), this.removeHandler(e(i), "mousemove.response" + i[0].id), this.removeHandler(e(i), "touchmove.response" + i[0].id), this.removeHandler(e(i), "mouseup.response" + i[0].id), this.removeHandler(e(i), "touchend.response" + i[0].id) } }, resize: function (t) { var i = this; this.removeHandler(e(window), "resize.jqxresponse"), this.addHandler(e(window), "resize.jqxresponse", function (s) { if (t) if (e.isArray(t)) for (var r = 0; r < t.length; r++) t[r](); else t(); i.refreshSize() }), null == t && this.removeHandler(e(window), "resize.jqxresponse") }, pointerDown: function (t, i) { if (t && i) { var s = !0; if (e.jqx.mobile.isTouchDevice()) { var r = e.jqx.mobile.getTouchEventName("touchstart") + ".response" + t[0].id; null != i ? this.addHandler(e(t), r, function (t) { var r = e.jqx.position(t), o = i(t, r, "touch"); return s = !1, setTimeout(function () { s = !0 }, 500), o }) : this.removeHandler(e(t), r) } null != i ? this.addHandler(e(t), "mousedown.response" + t[0].id, function (t) { var r = e.jqx.position(t); if (s) return i(t, r, "mouse") }) : this.removeHandler(e(t), "mousedown.response" + t[0].id), this._handlers.push(t) } }, pointerUp: function (t, i) { if (t) { var s = !0; if (e.jqx.mobile.isTouchDevice()) { var r = e.jqx.mobile.getTouchEventName("touchend") + ".response" + t[0].id; null != i ? this.addHandler(e(t), r, function (t) { var r = e.jqx.position(t), o = i(t, r, "touch"); return s = !1, setTimeout(function () { s = !0 }, 500), o }) : this.removeHandler(e(t), r) } null != i ? this.addHandler(e(t), "mouseup.response" + t[0].id, function (t) { var r = e.jqx.position(t); if (s) return i(t, r, "mouse") }) : this.removeHandler(e(t), "mouseup.response" + t[0].id), this._handlers.push(t) } }, pointerMove: function (t, i) { if (t) { if (e.jqx.mobile.isTouchDevice()) { var s = e.jqx.mobile.getTouchEventName("touchmove") + ".response" + t[0].id; null != i ? this.addHandler(e(t), s, function (t) { if (1 == e.jqx.mobile.getTouches(t).length) { var s = e.jqx.position(t); return i(t, s, "touch") } }) : this.removeHandler(e(t), s) } else null != i ? this.addHandler(e(t), "mousemove.response" + t[0].id, function (t) { var s = e.jqx.position(t); return i(t, s, "mouse") }) : this.removeHandler(e(t), "mousemove.response" + t[0].id); this._handlers.push(t) } }, isHidden: function (t) { return e.jqx.isHidden(e(t)) }, inViewPort: function (e) { var t = this.viewPort; if (e.getBoundingClientRect) { var i = e.getBoundingClientRect ? e.getBoundingClientRect() : {}; return i && i.bottom >= 0 && i.top <= t.height && i.right >= 0 && i.left <= t.width } return !1 }, getScroll: function () { var e = { left: window.pageXOffset || document.scrollLeft, top: window.pageYOffset || document.scrollTop }; return void 0 == e.left && (e.left = 0), void 0 == e.top && (e.top = 0), e }, getDocument: function () { return { width: e(document).width(), height: e(document).height() } }, getViewPort: function () { return { width: e(window).width(), height: e(window).height() } }, getTouch: function () { var t = "ontouchstart", i = t in window; return !!i || ((i = (t = "MSPointerDown") in window) || !!e.jqx.mobile.isWindowsPhone()) }, getDevice: function () { var e = this.os.name, t = window.location.search.match(/deviceType=(Tablet|Phone)/), i = window.deviceType, s = ""; return t && t[1] ? s = t[1] : "iPhone" === i ? s = "Phone" : "iPad" === i ? s = "Tablet" : "Android" != e && "iOS" != e && /Windows|Linux|MacOS|Mac OS|Mac OS X/.test(e) ? s = "Desktop" : "iOS" == e && navigator.userAgent.toLowerCase().indexOf("ipad") >= 0 ? s = "Tablet" : "RIMTablet" == e ? s = "Tablet" : "Android" == e ? (s = this.os.version && this.os.version.substring(0, 1).indexOf("3") >= 0 ? "Tablet" : this.os.version && this.os.version.substring(0, 1).indexOf("4") >= 0 && -1 == navigator.userAgent.search(/mobile/i) ? "Tablet" : "Phone", navigator.userAgent.toLowerCase().indexOf("kindle fire") >= 0 && (s = "Tablet")) : s = "Phone", /Windows/.test(e) && (navigator.userAgent.indexOf("Windows Phone") >= 0 || navigator.userAgent.indexOf("WPDesktop") >= 0 || navigator.userAgent.indexOf("IEMobile") >= 0 || navigator.userAgent.indexOf("ZuneWP7") >= 0 ? s = "Phone" : navigator.userAgent.indexOf("Touch") >= 0 && (s = "Tablet", this.getTouch() || (s = "Desktop"))), { type: s, touch: this.getTouch(), width: window.screen.width, height: window.screen.height, availWidth: window.screen.availWidth, availHeight: window.screen.availHeight } }, canvas: function () { var e = !1, t = document.createElement("canvas"); return t && t.getContext && t.getContext("2d") && (e = !0), e }, vml: function () { if (void 0 == this._vmlSupport) { var e = document.body.appendChild(document.createElement("div")); e.innerHTML = '<v:shape id="vml_flag1" adj="1" />'; var t = e.firstChild; t.style.behavior = "url(#default#VML)", this._vmlSupport = !t || "object" == typeof t.adj, e.parentNode.removeChild(e) } return this._vmlSupport }, svg: function () { return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image", "1.1") }, getBrowser: function () { var t = navigator.userAgent.toLowerCase(), i = "", s = null; if (browserNames = { msie: { name: "Internet Explorer", eval: /(msie) ([\w.]+)/.exec(t) }, webkit: { name: "Webkit", eval: /(webkit)[ \/]([\w.]+)/.exec(t) }, chrome: { name: "Chrome", eval: /(chrome)[ \/]([\w.]+)/.exec(t) }, safari: { name: "Safari", eval: /(safari)[ \/]([\w.]+)/.exec(t) }, opera: { name: "Opera", eval: /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t) }, operamobile: { name: "Opera Mobile", eval: /(opera mobi)(?:.*version|)[ \/]([\w.]+)/.exec(t) || /(opera tablet)(?:.*version|)[ \/]([\w.]+)/.exec(t) }, dolphin: { name: "Dolphin", eval: /(dolphin)[ \/]([\w.]+)/.exec(t) }, webosbrowser: { name: "webOSBrowser", eval: /(wosbrowser)(?:.*version|)[ \/]([\w.]+)/.exec(t) }, chromemobile: { name: "Chrome Mobile", eval: /(crmo)[ \/]([\w.]+)/.exec(t) }, silk: { name: "Silk", eval: /(silk)[ \/]([\w.]+)/.exec(t) }, firefox: { name: "Firefox", eval: /(firefox)[ \/]([\w.]+)/.exec(t) }, msie11: { name: "Internet Explorer 11", eval: t.indexOf("rv:11.0") >= 0 && t.indexOf(".net4.0c") >= 0 }, winphone: { name: "Internet Explorer Mobile", eval: t.indexOf("windows phone 8.1") >= 0 }, other: { name: "Other", eval: t.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t) } }, e.each(browserNames, function (e, t) { if (this.eval) if ("Other" == this.name) s || (s = this.eval, i = this.name); else if ("Internet Explorer 11" == this.name) s || (s = ["", "msie", 11], i = "Internet Explorer"); else if ("Internet Explorer Mobile" == this.name) s || (s = ["", "msie", 11], i = "Internet Explorer"); else { if ("Chrome" == i && "Safari" == this.name) return !0; s = this.eval, i = this.name } }), s) { var r = { name: i, accessName: s[1] || "", version: s[2] || "0", canvas: this.canvas(), svg: this.svg(), vml: this.vml() }; r[s[1]] = s[1] } else r = { name: "Other", browser: "other", version: "" }; return r }, getOS: function () { var t = null, i = "", s = navigator.userAgent, r = "Other", o = { ios: { name: "iOS", regex: new RegExp("(?:i(?:Pad|Phone|Pod)(?:.*)CPU(?: iPhone)? OS )([^\\s;]+)") }, android: { name: "Android", regex: new RegExp("(?:(Android |HTC_|Silk/))([^\\s;]+)") }, webos: { name: "webOS", regex: new RegExp("(?:(?:webOS|hpwOS)/)([^\\s;]+)") }, blackberry: { name: "BlackBerry", regex: new RegExp("(?:BlackBerry(?:.*)Version/)([^\\s;]+)") }, rimTablet: { name: "RIMTablet", regex: new RegExp("(?:RIM Tablet OS )([^\\s;]+)") }, chrome: { name: "Chrome OS", regex: new RegExp("CrOS") }, mac: { name: "MacOS", regex: new RegExp("mac") }, win: { name: "Windows", regex: new RegExp("win") }, linux: { name: "Linux", regex: new RegExp("linux") }, bada: { name: "Bada", regex: new RegExp("(?:Bada/)([^\\s;]+)") }, other: { name: "Other" } }, a = "", n = [{ s: "Windows 3.11", r: /Win16/ }, { s: "Windows 95", r: /(Windows 95|Win95|Windows_95)/ }, { s: "Windows ME", r: /(Win 9x 4.90|Windows ME)/ }, { s: "Windows 98", r: /(Windows 98|Win98)/ }, { s: "Windows CE", r: /Windows CE/ }, { s: "Windows 2000", r: /(Windows NT 5.0|Windows 2000)/ }, { s: "Windows XP", r: /(Windows NT 5.1|Windows XP)/ }, { s: "Windows Server 2003", r: /Windows NT 5.2/ }, { s: "Windows Vista", r: /Windows NT 6.0/ }, { s: "Windows 7", r: /(Windows 7|Windows NT 6.1)/ }, { s: "Windows 8.1", r: /(Windows 8.1|Windows NT 6.3)/ }, { s: "Windows 8", r: /(Windows 8|Windows NT 6.2)/ }, { s: "Windows NT 4.0", r: /(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/ }, { s: "Windows ME", r: /Windows ME/ }, { s: "Android", r: /Android/ }, { s: "Open BSD", r: /OpenBSD/ }, { s: "Sun OS", r: /SunOS/ }, { s: "Linux", r: /(Linux|X11)/ }, { s: "BB10", r: /BB10/ }, { s: "MeeGo", r: /MeeGo/ }, { s: "iOS", r: /(iPhone|iPad|iPod)/ }, { s: "Mac OS X", r: /Mac OS X/ }, { s: "Mac OS", r: /(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/ }, { s: "QNX", r: /QNX/ }, { s: "UNIX", r: /UNIX/ }, { s: "BeOS", r: /BeOS/ }, { s: "OS/2", r: /OS\/2/ }, { s: "Search Bot", r: /(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/ }]; for (var l in n) { var h = n[l]; if (h.r.test(s)) { a = h.s; break } } var d = ""; switch (/Windows/.test(a) && (d = /Windows (.*)/.exec(a)[1], a = "Windows"), /BB10/.test(a) && (d = "10", a = "BlackBerry"), r) { case "Mac OS X": d = /Mac OS X (10[\.\_\d]+)/.exec(s)[1]; break; case "Android": d = /Android ([\.\_\d]+)/.exec(s)[1]; break; case "iOS": d = (d = /OS (\d+)_(\d+)_?(\d+)?/.exec(nVer))[1] + "." + d[2] + "." + (0 | d[3]) } return "" != d && (i = d), e.each(o, function (e, o) { if (t = s.match(this.regex) || s.toLowerCase().match(this.regex)) return this.name.match(/Windows|Linux|MacOS/) || (i = !t[1] || "HTC_" != t[1] && "Silk/" != t[1] ? t[t.length - 1] : "2.3"), r = { name: this.name, version: i, platform: navigator.platform }, !1 }), r && "Other" == r.name && (r.name = a), r && "" != r.name && "" != a && (r.name = a), r && "" == r.version && "" != d && (r.version = d), r } } }(jQuery), function (e) { function t(e, t, i, s, r, o, a, n) { this.label = e, this.value = t, this.parent = i, this.children = s, this.area = r || null, this.color = o, this.data = a, this.record = n } e.jqx.jqxWidget("jqxTreeMap", "", {}); var i = {}; i.default = function () { function e(t, i, s, r) { this.height = r, this.width = s, this.xoffset = t, this.yoffset = i, this.shortestEdge = function () { return Math.min(this.height, this.width) }, this.getCoordinates = function (e) { var t = [], i = this.xoffset, s = this.yoffset, r = h(e) / this.height, o = h(e) / this.width; if (this.width >= this.height) for (a = 0; a < e.length; a += 1) t.push([i, s, i + r, s + e[a] / r]), s += e[a] / r; else for (var a = 0; a < e.length; a += 1) t.push([i, s, i + e[a] / o, s + o]), i += e[a] / o; return t }, this.cutArea = function (t) { var i; if (this.width >= this.height) { var s = t / this.height, r = this.width - s; i = new e(this.xoffset + s, this.yoffset, r, this.height) } else { var o = t / this.width, a = this.height - o; i = new e(this.xoffset, this.yoffset + o, this.width, a) } return i } } function t(e, t) { for (var i = [], s = t / h(e), r = 0; r < e.length; r += 1) i[r] = e[r] * s; return i } function i(e, t, r, o, a) { o = void 0 === o ? 0 : o, a = void 0 === a ? 0 : a; var n, h = [], c = []; if (l(e[0])) { for (u = 0; u < e.length; u += 1) h[u] = d(e[u]); n = s(h, t, r, o, a); for (var u = 0; u < e.length; u += 1) c.push(i(e[u], n[u][2] - n[u][0], n[u][3] - n[u][1], n[u][0], n[u][1])) } else c = s(e, t, r, o, a); return c } function s(i, s, a, n, l) { return n = void 0 === n ? 0 : n, l = void 0 === l ? 0 : l, r(o(t(i, s * a), [], new e(n, l, s, a), [])) } function r(e) { for (var t = [], i = 0; i < e.length; i += 1) for (var s = 0; s < e[i].length; s += 1) t.push(e[i][s]); return t } function o(e, t, i, s) { var r, n, l; { if (0 !== e.length) return r = i.shortestEdge(), n = e[0], a(t, n, r) ? (t.push(n), o(e.slice(1), t, i, s)) : (l = i.cutArea(h(t), s), s.push(i.getCoordinates(t)), o(e, [], l, s)), s; s.push(i.getCoordinates(t)) } } function a(e, t, i) { var s; return 0 === e.length || ((s = e.slice()).push(t), n(e, i) >= n(s, i)) } function n(e, t) { var i = Math.min.apply(Math, e), s = Math.max.apply(Math, e), r = h(e); return Math.max(Math.pow(t, 2) * s / Math.pow(r, 2), Math.pow(r, 2) / (Math.pow(t, 2) * i)) } function l(e) { return e && e.constructor === Array } function h(e) { for (var t = 0, i = 0; i < e.length; i += 1) t += e[i]; return t } function d(e) { var t = 0; if (l(e[0])) for (var i = 0; i < e.length; i += 1) t += d(e[i]); else t = h(e); return t } return i }(); var s = { HORIZONTAL: 0, VERTICAL: 1, BOTH: 2 }; e.extend(e.jqx._jqxTreeMap.prototype, { defineInstance: function () { this.width = 600, this.height = 600, this.renderCallbacks = {}, this.legendScaleCallback = function (e) { return e }, this.hoverEnabled = !1, this.selectionEnabled = !0, this.singleSelection = !0, this.showLegend = !0, this.legendLabel = "Legend", this.headerHeight = 25, this.colorRange = 100, this.layout = "default", this.source = [], this.displayMember = null, this.valueMember = null, this.colorMode = "parent", this.baseColor = "#C2EEFF", this.legendPosition = { x: 0, y: 0 }, this.colorRanges = [{ color: "#aa9988", min: 0, max: 10 }, { color: "#ccbbcc", min: 11, max: 50 }, { color: "#000", min: 50, max: 100 }], this._root = [] }, createInstance: function () { this.render() }, render: function () { this.host.addClass(this.toThemeProperty("jqx-widget")), this._destroy(), this._root = new t(void 0, 0, null, [], this.host); var s = function (e, t) { for (var s, r = {}, o = null, a = 0; a < e.length; a += 1) if (e[a].items) { o = !0; break } var n = new Array; if (o) { var l = function (e, t) { for (var i = 0; i < e.length; i += 1) { if (e[i].parent = t, e[i].data || (e[i].data = e[i].value), null == e[i].value && (e[i].value = 0), isNaN(parseFloat(e[i].value))) { for (var s = e[i].value.toString(), r = "", o = 0; o < s.length; o++) { var a = s.substring(o, o + 1); null == a.match(/^[0-9]+$/) && "." != a || (r += a) } e[i].value = new Number(r) } else e[i].value = parseFloat(e[i].value); n.push(e[i]), e[i].items && l(e[i].items, e[i].label) } }; l(e, null), e = n } for (a = 0; a < e.length; a += 1) (s = e[a]).value && null != s.parent && (r[s.parent] || (r[s.parent] = 0), r[s.parent] += s.value); for (a = 0; a < e.length; a += 1) void 0 !== r[(s = e[a]).label] && (s.value = r[s.label]); t._buildTree(e, t._root), t._dataList = t._buildList(), t._setStyles(); var h = i.default; "simple" === t.layout && (h = i.simple), t._render(t._root, h), t._renderLegend() }; e.jqx.dataAdapter && null != this.source && this.source._source ? this.dataBind(this.source, s) : s(this.source, this) }, dataBind: function (t, i) { this.records = new Array; var s = !!t._source, r = new e.jqx.dataAdapter(t, { autoBind: !1 }); s && (r = t, t = t._source); var o = function (e, t) { e.records = r.records; for (var s = new Array, o = 0; o < e.records.length; o++) { var a = e.records[o]; e.displayMember && (a.label = a[e.displayMember]), e.valueMember && (a.value = a[e.valueMember]), a.record = a, s.push(a) } e._trigger("bindingComplete"), i(s, e) }; void 0 != t.type && (r._options.type = t.type), void 0 != t.formatdata && (r._options.formatData = t.formatdata), void 0 != t.contenttype && (r._options.contentType = t.contenttype), void 0 != t.async && (r._options.async = t.async); var a = this; switch (t.datatype) { case "local": case "array": default: null != t.localdata && (r.unbindBindingUpdate(this.element.id), r.dataBind(), o(this), r.bindBindingUpdate(this.element.id, function (e) { o(a) })); break; case "json": case "jsonp": case "xml": case "xhtml": case "script": case "text": case "csv": case "tab": if (null != t.localdata) return r.unbindBindingUpdate(this.element.id), r.dataBind(), o(this), void r.bindBindingUpdate(this.element.id, function () { o(a) }); var n = {}; r._options.data ? e.extend(r._options.data, n) : (t.data && e.extend(n, t.data), r._options.data = n); r.unbindDownloadComplete(a.element.id), r.bindDownloadComplete(a.element.id, function () { o(a) }), r.dataBind() } }, _destroy: function () { this.host.children().remove() }, destroy: function () { this.host.remove() }, refresh: function (e) { e || this._refresh() }, _refresh: function () { this.render() }, _setStyles: function () { this.host.css({ position: "relative", width: this.width, height: this.height }); null != this.width && this.width.toString().indexOf("%"), null != this.height && this.height.toString().indexOf("%"); var t = this; e.jqx.utilities.resize(this.host, function () { t.resizeTimer && clearTimeout(t.resizeTimer), t.resizeTimer = setTimeout(function () { t.performLayout() }, 50) }) }, resize: function (e, t) { this.width = e, this.height = t, this.performLayout() }, performLayout: function () { var e = i.default; this.clearSelection(), this._layout(this._root, e) }, _getValues: function (e) { for (var t = [], i = 0; i < e.length; i += 1) t.push(e[i].value); return t }, _isColor: function (e) { if (!e) return !1; var t = this._colorEvaluator; return !(!t._isRgb(e) && !t._isHex(e)) }, _colorEvaluator: { _toRgb: function (e) { var t = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e); return t ? { r: parseInt(t[1], 16), g: parseInt(t[2], 16), b: parseInt(t[3], 16) } : null }, _toHex: function (e) { var t = e.r.toString(16), i = e.g.toString(16), s = e.b.toString(16); return t = 1 === t.length ? "0" + t : t, i = 1 === i.length ? "0" + i : i, s = 1 === s.length ? "0" + s : s, "#" + t + i + s }, _isRgb: function (e) { return /(rgb|rgba)\s*\(\s*\d+\s*(,\s*\d+\s*){2}(,\d+\.\d+)?\)(;?)/i.test(e) }, _isHex: function (e) { return /^(#([0-9A-F]{3})([0-9A-F]{3})?)$/i.test(e) }, getColorByValue: function (e, t, i) { var s, r, o, a, t, n = this._colorEvaluator; n._isRgb(i) && (i = n._toHex(i)), i = n._toRgb(i), o = t.length, s = -1 / 0; for (var l = 0; l < o; l += 1) s < t[l].value && (s = t[l].value); return r = e / s, a = Math.round(r * this.colorRange), n._toHex({ r: Math.max(i.r - a, 0), g: Math.max(i.g - a, 0), b: Math.max(i.b - a, 0) }) }, parent: function (e) { var t = e.parent.color, i = this._colorEvaluator; return e.parent ? (t || (t = this.baseColor), t = i.getColorByValue.call(this, e.value, e.parent.children, t), e.color = t, t) : "#fff" }, autoColors: function (e) { var t = this.baseColor; return t = this._colorEvaluator.getColorByValue.call(this, e.value, this._dataList, t), e.color = t, t }, rangeColors: function (e) { for (var t, i = e.value, s = 0; s < this.colorRanges.length; s += 1) if ((t = this.colorRanges[s]).min < i && t.max >= i) return t.color; return "#fff" } }, _getColor: function (e) { var t = e.color, i = this.colorMode; if (this._isColor(t)) return t; if ("function" == typeof this._colorEvaluator[i]) return this._colorEvaluator[i].call(this, e); throw "Invalid colorMode" }, _renderRect: function (t, i) { var s = e("<div/>"), r = t[2] - t[0], o = t[3] - t[1], a = this._getColor(i); s.css({ position: "absolute", left: t[0] - 1, top: t[1] - 1, width: r, height: o, backgroundColor: a }), s.addClass(this.toThemeProperty("jqx-treemap-rectangle")); var n = this._colorEvaluator, l = { data: i.data, label: i.label, value: i.value, parent: i.parent, record: i.record, color: a, rgb: n._toRgb(a) }; if (i.parent == this._root && (l.parent = null), "function" == typeof this.renderCallbacks["*"] && void 0 !== this.renderCallbacks["*"](s, l)) return s; if ("function" == typeof this.renderCallbacks[i.label]) this.renderCallbacks[i.label](s, l); else { r = s.width() - 2; s.html('<span style="max-width:' + r + 'px;" class="jqx-treemap-label">' + i.label + "</span>") } return s }, _centerLabel: function (e, t) { var i = e[0].firstChild; i.style.position = "absolute", t !== s.HORIZONTAL && t !== s.BOTH || (i.style.left = (e[0].offsetWidth - i.offsetWidth) / 2 + "px"), t !== s.VERTICAL && t !== s.BOTH || (i.style.top = (e[0].offsetHeight - i.offsetHeight) / 2 + "px") }, _trigger: function (t, i) { var s = e.Event(t); return s.args = i, this.host.trigger(s) }, _addHandlers: function (t, i) { var s = this; t.bind("mouseenter", function (e) { s.hoverEnabled && (s.host.find(".jqx-treemap-rectangle").removeClass("jqx-treemap-rectangle-hover"), t.addClass(s.toThemeProperty("jqx-treemap-rectangle-hover"))), s._trigger("mouseenterSector", i) }), t.bind("mouseleave", function (e) { s.hoverEnabled && t.removeClass("jqx-treemap-rectangle-hover"), s._trigger("mouseleaveSector", i) }), t.bind("click", function (i) { if (s.selectionEnabled) { var r = e.data(this, "jqx-treemap-selected") || !1; s.singleSelection && s.host.find(".jqx-treemap-rectangle-hover").each(function (t, i) { e.data(i, "jqx-treemap-selected", !1), e(i).removeClass("jqx-treemap-rectangle-hover") }), r ? (t.removeClass("jqx-treemap-rectangle-hover"), r = !1) : (t.addClass(s.toThemeProperty("jqx-treemap-rectangle-hover")), r = !0), e.data(this, "jqx-treemap-selected", r), i.stopImmediatePropagation() } }) }, clearSelection: function () { this.host.find(".jqx-treemap-rectangle-hover").removeClass(this.toThemeProperty("jqx-treemap-rectangle-hover")), e.data(this, "jqx-treemap-selected", !1) }, _layoutArea: function (e, t) { e.children.length && e.children.length > 0 ? (this._centerLabel(t, s.HORIZONTAL), t.addClass(this.toThemeProperty("jqx-treemap-rectangle-parent"))) : this._centerLabel(t, s.BOTH) }, _render: function (e, t) { if (e.children.length) { var i = 0; e.value && (i = this.headerHeight); for (var s, r, o = this._getValues(e.children), a = (e.area.offset(), t(o, e.area.width(), e.area.height() - i, 0, i)), n = 0; n < e.children.length; n += 1) s = e.children[n], r = this._renderRect(a[n], s), s.area = r, e.area.append(r), this._addHandlers(r, { label: s.label, value: s.value, color: s.color, sector: s.area, data: s.data }), this._layoutArea(s, r), this._render(s, t) } }, _layout: function (t, i) { if (t.children.length) { var s = 0; t.value && (s = this.headerHeight); for (var r = this._getValues(t.children), o = (t.area.offset(), i(r, t.area.width(), t.area.height() - s, 0, s)), a = 0; a < t.children.length; a += 1) { var n = t.children[a]; this._layoutRect(o[a], n), this._layoutArea(n, n.area), this._layout(n, i) } this.showLegend && (e(".jqx-treemap-legend").remove(), this._renderLegend()) } }, _layoutRect: function (e, t) { var i = t.area, s = e[2] - e[0], r = e[3] - e[1]; i.css({ left: e[0] - 1, top: e[1] - 1, width: s, height: r }); var o = this._colorEvaluator, a = this._getColor(t), n = { data: t.data, label: t.label, value: t.value, parent: t.parent, record: t.record, color: a, rgb: o._toRgb(a) }; if (t.parent == this._root && (n.parent = null), "function" == typeof this.renderCallbacks["*"] && void 0 !== this.renderCallbacks["*"](i, n)) return i; if ("function" == typeof this.renderCallbacks[t.label]) this.renderCallbacks[t.label](i, n); else { s = i.width() - 2; i.find(".jqx-treemap-label:first").css("max-width", s) } }, _getBoundValues: function () { var e, t = this._root, i = [], s = {}, r = {}; for (s.value = t.value || 1 / 0, r.value = t.value || -1 / 0, i.push(t) ; i.length;) { e = i.pop(), s.value > e.value && (s = e), r.value < e.value && (r = e); for (var o = 0; o < e.children.length; o += 1) i.push(e.children[o]) } return [s, r] }, _getAutocolorRanges: function () { for (var e, t = this._getBoundValues(), i = t[1].value, s = t[0].value, r = (i - s) / 5, o = [], a = s; a < i; a += r) e = Math.round(a), o.push({ min: e, max: a + r, color: this._colorEvaluator.getColorByValue.call(this, e, this._dataList, this.baseColor) }); return o }, _renderLegend: function () { if (/autoColors|rangeColors/.test(this.colorMode) && this.showLegend) { var e = this.colorRanges; "autoColors" === this.colorMode && (e = this._getAutocolorRanges()); var t = this._renderColorLegend(e); this._renderLegendLabel(t) } }, _renderLegendLabel: function (t) { var i = e('<tr><td colspan="' + t.find("td").length / 2 + '"/></tr>'), s = e('<div class="' + this.toThemeProperty("jqx-treemap-legend-label") + '" />'); s.text(this.legendLabel), i.children().append(s), t.prepend(i) }, _renderColorLegend: function (t) { var i, s, r = e('<div class="' + this.toThemeProperty("jqx-treemap-legend") + '"/>'), o = function (e) { return e }; "function" == typeof this.legendScaleCallback && (o = this.legendScaleCallback); var a = e('<table class="' + this.toThemeProperty("jqx-treemap-legend-table") + '"/>'); r.append(a), a.append("<tr/>"), r.append("<div/>"), this.host.append(r), i = e(r.find("tr")[0]), (s = e(r.find("div")[0])).addClass(this.toThemeProperty("jqx-treemap-legend-values")); t.sort(function (e, t) { try { if (e.min < t.min) return -1; if (e.min > t.min) return 1 } catch (e) { } return 0 }); for (var n = Math.round(r.width() / t.length), l = -2, h = 0, d = 0; d < t.length; d += 1) { var c = e('<td class="' + this.toThemeProperty("jqx-treemap-legend-color") + '"/>'); c.css("backgroundColor", t[d].color), i.append(c), 0 === d && ((u = e('<span class="' + this.toThemeProperty("jqx-treemap-legend-max-value") + " " + this.toThemeProperty("jqx-treemap-legend-value") + '"/>')).text(o(t[d].min)), s.append(u), a.css("margin-left", u.width() / 2), h = l += u.width() / 2); var u = e('<span class="' + this.toThemeProperty("jqx-treemap-legend-max-value") + " " + this.toThemeProperty("jqx-treemap-legend-value") + '"/>'); l += n, u.text(o(t[d].max)), s.append(u), d == t.length - 1 && (h += u.width() / 2, r.css("padding-right", h + 5), l -= 2), l -= u.width() / 2, u.css("left", l), l += u.width() / 2 } return r.css({ position: "absolute", left: this.legendPosition.x, bottom: this.legendPosition.y, visibility: this.showLegend ? "visible" : "hidden" }), r }, _buildTree: function (e, i) { var s, r, o = null, a = []; for (a.push(i) ; a.length;) { o = a.pop(); for (var n = 0; n < e.length; n += 1) if ((r = e[n]).parent === o.label || !r.parent && !o.label) { var l = o; s = new t(r.label, parseFloat(r.value, 10), l, [], null, r.color, r.data, r.record), o.children.push(s), a.push(s) } } return i }, _buildList: function () { var e, t = [], i = []; for (i.push(this._root) ; i.length;) { (e = i.pop()) !== this._root && t.push(e); for (var s = 0; s < e.children.length; s += 1) i.push(e.children[s]) } return t }, propertyChangedHandler: function (e, t, i) { "renderCallbacks" !== t && (/hoverEnabled|selectionEnabled/.test(t) ? i || this.host.find("jqx-treemap-rectangle-hover") : "showLegend" === t ? this.host.find("jqx-treemap-legend").toggle() : this._refresh()) } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxPasswordInput", "", {}), e.extend(e.jqx._jqxPasswordInput.prototype, { defineInstance: function () { this.width = null, this.height = null, this.disabled = !1, this.rtl = !1, this.placeHolder = null, this.showStrength = !1, this.showStrengthPosition = "right", this.maxLength = null, this.minLength = null, this.showPasswordIcon = !0, this.strengthTypeRenderer = null, this.passwordStrength = null, this.localization = { passwordStrengthString: "Password strength", tooShort: "Too short", weak: "Weak", fair: "Fair", good: "Good", strong: "Strong", showPasswordString: "Show Password" }, this.strengthColors = { tooShort: "rgb(170, 0, 51)", weak: "rgb(170, 0, 51)", fair: "rgb(255, 204, 51)", good: "rgb(45, 152, 243)", strong: "rgb(118, 194, 97)" } }, createInstance: function (e) { this.render() }, render: function () { var t = e.jqx.browser.browser, i = e.jqx.browser.version; this._browserCheck = "msie" != t || "7.0" != i && "8.0" != i, this.widgetID = this.element.id; if ("password" != this.host.attr("type")) throw "Invalid input type. Please set the type attribute of the input element to password."; this._hidden = !0, this._setAttributes(), this._setTheme(), this._showPassword(), this._showStrength() }, refresh: function (t) { 1 != t && (this.removeHandler(this.host, "focus.passwordinput" + this.widgetID), this.removeHandler(this.host, "blur.passwordinput" + this.widgetID), this.removeHandler(this.host, "click.passwordinput" + this.widgetID), this.removeHandler(e(window), "resize.passwordinput" + this.widgetID), this.removeHandler(this.host, "keyup.passwordinput" + this.widgetID), this.removeHandler(icon, "mousedown.passwordinput" + this.iconID), this.removeHandler(icon, "mouseup.passwordinput" + this.iconID), this.removeHandler(e(document), "mousedown.passwordinput" + this.iconID), this._setAttributes(), this._setTheme(), this._showPassword(), this._showStrength()) }, val: function (t) { if (e.isEmptyObject(t) && "" != t) return this.element.value; this.element.value = t }, propertyChangedHandler: function (e, t, i, s) { var r = this.host; "disabled" != t ? "placeHolder" == t ? this._browserCheck && ("placeholder" in this.element ? r.attr("placeholder", this.placeHolder) : "" == r.val() ? (r.attr("type", "text"), r.val(this.placeHolder)) : r.val() == i && r.val(this.placeHolder)) : this.refresh() : 1 == e.disabled ? (e.host.attr("disabled", "disabled"), e.host.addClass(e.toThemeProperty("jqx-fill-state-disabled"))) : (e.host.removeAttr("disabled"), e.host.removeClass(e.toThemeProperty("jqx-fill-state-disabled"))) }, resize: function (e, t) { this.width = e, this.height = t, this.host.width(this.width), this.host.height(this.height) }, _setAttributes: function () { var e = this, t = this.host; t.width(this.width), t.height(this.height), this.maxLength && t.attr("maxlength", this.maxLength), this.minLength && t.attr("minLength", this.minLength), this.placeHolder && this._browserCheck && ("placeholder" in this.element ? t.attr("placeholder", this.placeHolder) : "" == t.val() && (t.attr("type", "text"), t.val(this.placeHolder))), 1 == this.disabled ? (t.attr("disabled", "disabled"), t.addClass(this.toThemeProperty("jqx-fill-state-disabled"))) : (t.removeAttr("disabled"), t.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))), this.addHandler(t, "click.passwordinput" + this.widgetID, function () { e.showPasswordIcon && e.icon && (e.icon.show(), e._positionIcon()) }), e.interval = null, this.addHandler(t, "keydown.passwordinput" + this.widgetID, function () { if (e.showPasswordIcon && e.icon) { e.interval && clearInterval(e.interval); var t = 0; e.interval = setInterval(function () { "none" != e.icon[0].style.display ? (e._positionIcon(), ++t > 5 && clearInterval(e.interval)) : clearInterval(e.interval) }, 100) } }), this.addHandler(t, "focus.passwordinput" + this.widgetID, function () { e._focused = !0, e.host.addClass(e.toThemeProperty("jqx-fill-state-focus")), !e.placeHolder || !e._browserCheck || "placeholder" in e.element || t.val() != e.placeHolder || (t.val(""), 1 == e._hidden && t.attr("type", "password")), e.val().length > 0 && 1 == e.showStrength && t.jqxTooltip("content") && t.jqxTooltip("open"), e.showPasswordIcon && e.icon && (e.icon.show(), e._positionIcon()) }), this.addHandler(t, "blur.passwordinput" + this.widgetID, function () { e._focused = !1, e.host.removeClass(e.toThemeProperty("jqx-fill-state-focus")), !e.placeHolder || !e._browserCheck || "placeholder" in e.element || "" != t.val() || (t.val(e.placeHolder), t.attr("type", "text")), 1 == e.showPasswordIcon && e._browserCheck && (0 == e.rtl ? e.host.removeClass(e.toThemeProperty("jqx-passwordinput-password-icon-ltr")) : e.host.removeClass(e.toThemeProperty("jqx-passwordinput-password-icon-rtl"))), 1 == e.showStrength && t.jqxTooltip("close"), e.showPasswordIcon && e.icon && e.icon.hide() }) }, destroy: function () { this.host.jqxTooltip && this.host.jqxTooltip("destroy"), this.host.remove() }, _setTheme: function () { var e = this.host; e.addClass(this.toThemeProperty("jqx-widget")), e.addClass(this.toThemeProperty("jqx-widget-content")), e.addClass(this.toThemeProperty("jqx-input")), e.addClass(this.toThemeProperty("jqx-rc-all")), 1 == this.rtl ? (e.addClass(this.toThemeProperty("jqx-rtl")), e.css("direction", "rtl")) : (e.removeClass(this.toThemeProperty("jqx-rtl")), e.css("direction", "ltr")) }, _showPassword: function () { if (1 == this.showPasswordIcon && this._browserCheck) { var t = this; this.iconID = this.widgetID + "-password-icon", e("<span tabindex='-1' hasfocus='false' style='position: absolute; display: none;' id='" + this.iconID + "'></span>").insertAfter(this.host); var i = e("#" + this.iconID); this.icon = i, i.addClass(this.toThemeProperty("jqx-passwordinput-password-icon")), i.attr("title", t.localization.showPasswordString), t._positionIcon(); var s = function () { t.host.attr("type", "password"), t._hidden = !0, i.attr("title", t.localization.showPasswordString) }, r = function () { 0 == t._hidden ? s() : 1 == t._hidden && (t.host.attr("type", "text"), t._hidden = !1) }; this.addHandler(i, "mousedown.passwordinput" + this.iconID, function (e) { return r(), !1 }), this.addHandler(i, "mouseup.passwordinput" + this.iconID, function (e) { return s(), !1 }), this.addHandler(e(document), "mousedown.passwordinput" + this.iconID, function (e) { t._focused && s() }) } }, _positionIcon: function () { var e = this.host.offset(), t = this.host.outerWidth(), i = this.host.outerHeight(); 1 == this.rtl ? this.icon.offset({ top: parseInt(e.top + i / 2 - 5), left: e.left + 2 }) : this.icon.offset({ top: parseInt(e.top + i / 2 - 5), left: e.left + t - 18 }) }, _showStrength: function () { if (1 == this.showStrength) { if (void 0 == this.host.jqxTooltip) throw new Error("jqxPasswordInput: Missing reference to jqxtooltip.js"); var t, i = this.widgetID + "Strength", s = i + "Value", r = i + "Indicator"; if (this.strengthTypeRenderer) { var o = this.host.val(); "placeholder" in this.element || !this._browserCheck || o != this.placeHolder || (o = ""), this._countCharacters(); var a = this.localization.tooShort; t = this.strengthTypeRenderer(o, { letters: this.letters, numbers: this.numbers, specialKeys: this.specials }, a) } else t = "<div style='width: 220px;' id='" + i + "'><div><span style='font-weight: bold;'>" + this.localization.passwordStrengthString + ": </span><span id='" + s + "'></span></div><div id='" + r + "'></div></div>"; this.host.jqxTooltip({ theme: this.theme, position: this.showStrengthPosition, content: t, trigger: "none", autoHide: !1, rtl: this.rtl }), this.strengthTypeRenderer || (e("#" + s).html(this.localization.tooShort), e("#" + r).addClass("jqx-passwordinput-password-strength-inicator").css("background-color", this.strengthColors.tooShort), 0 == this.rtl ? e("#" + r).css("float", "left") : e("#" + r).css("float", "right")), this._checkStrength() } }, _checkStrength: function () { var t = this, i = this.host; this.addHandler(e(window), "resize.passwordinput" + this.widgetID, function () { t.icon && t.icon.hide() }), this.addHandler(this.host, "keyup.passwordinput" + this.widgetID, function () { var s = t.host.val(), r = s.length; t._countCharacters(), r > 0 && 1 == t.showStrength && !i.jqxTooltip("opened") && i.jqxTooltip("open"); var o, a = t.letters + t.numbers + 2 * t.specials + t.letters * t.numbers / 2 + r; if (o = r < 8 ? t.localization.tooShort : a < 20 ? t.localization.weak : a < 30 ? t.localization.fair : a < 40 ? t.localization.good : t.localization.strong, t.strengthTypeRenderer) { n = t.strengthTypeRenderer(s, { letters: t.letters, numbers: t.numbers, specialKeys: t.specials }, o); t.host.jqxTooltip({ content: n }) } else { if (t.passwordStrength) { var n = t.passwordStrength(s, { letters: t.letters, numbers: t.numbers, specialKeys: t.specials }, o); e.each(t.localization, function () { if (n == this) return o = n, !1 }) } e("#" + t.widgetID + "StrengthValue").html(o); var l = e("#" + t.widgetID + "StrengthIndicator"); switch (o) { case t.localization.tooShort: l.css({ width: "20%", "background-color": t.strengthColors.tooShort }); break; case t.localization.weak: l.css({ width: "40%", "background-color": t.strengthColors.weak }); break; case t.localization.fair: l.css({ width: "60%", "background-color": t.strengthColors.fair }); break; case t.localization.good: l.css({ width: "80%", "background-color": t.strengthColors.good }); break; case t.localization.strong: l.css({ width: "100%", "background-color": t.strengthColors.strong }) } } }) }, _countCharacters: function () { this.letters = 0, this.numbers = 0, this.specials = 0; for (var e = this.host.val(), t = e.length, i = 0; i < t; i++) { var s = e.charAt(i), r = e.charCodeAt(i); r > 64 && r < 91 || r > 96 && r < 123 || r > 127 && r < 155 || r > 159 && r < 166 ? this.letters += 1 : 0 != isNaN(s) ? -1 == "<>@!#$%^&*()_+[]{}?:;|'\"\\,./~`-=".indexOf(s) || (this.specials += 1) : this.numbers += 1 } } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxRangeSelector", "", {}), e.extend(e.jqx._jqxRangeSelector.prototype, { defineInstance: function () { this.width = 400, this.height = 100, this.min = 0, this.max = 100, this.range = { from: 0, to: 1 / 0, min: 0, max: 1 / 0 }, this.majorTicksInterval = 10, this.minorTicksInterval = 1, this.showMajorTicks = !0, this.showMinorTicks = !1, this.snapToTicks = !0, this.labelsFormat = null, this.markersFormat = null, this.showLabels = !0, this.labelsOnTicks = !0, this.markersPosition = "top", this.labelsFormatFunction = null, this.groupLabelsFormatFunction = null, this.markersFormatFunction = null, this.showGroupLabels = !1, this.showMarkers = !0, this.resizable = !0, this.moveOnClick = !0, this.disabled = !1, this.rtl = !1, this.padding = "auto", this.events = ["change"] }, createInstance: function (t) { var i = this; if (this._isTouchDevice = e.jqx.mobile.isTouchDevice(), !e.jqx.dataAdapter) throw new Error("jqxRangeSelector: Missing reference to the following module: 'jqxdata.js'."); var s = e.jqx.isHidden(this.host); this.render(); var r = this.host.width(), o = this.host.height(); e.jqx.utilities.resize(this.host, function () { var e = i.host.width(), t = i.host.height(); i.range = i.getRange(), s ? (i.refresh(), s = !1) : r == e && o == t || i.refresh(), r = i.host.width(), o = i.host.height() }) }, render: function () { (this.host.children().length > 1 || this.rangeSelector) && (this._removeHandlers(), this.rangeSelector && this.rangeSelector.remove()), this.host.addClass(this.toThemeProperty("jqx-widget")), this.host.addClass(this.toThemeProperty("jqx-rangeselector")), this.host.children(":eq(0)").addClass(this.toThemeProperty("jqx-rangeselector-content")), this._id = this.element.id, "string" == typeof this.min || this.min instanceof Date ? this._dataType = "date" : this._dataType = "number", this._privateProperties(), this._checkProperties(), this._setSize(), this._scale(), this._initSlider() }, refresh: function (e) { 1 != e && (this.host.children(".jqx-rangeselector-ticks-container").remove(), this._removeHandlers(), this._privateProperties(), this._checkProperties(), this._setSize(), this._scale(), this._initSlider()) }, destroy: function () { this._removeHandlers(), this.host.remove() }, setRange: function (e, t) { if (e > t) throw new Error("jqxRangeSelector: range object initialization error. 'min' should be less than 'max'"); var i = this._getValue(); if (i.from != e || i.to != t) { var s = "The set values are in the wrong format. Please set " + ("number" == this._dataType ? "numeric" : "date") + " values."; if ("string" == typeof e || e instanceof Date) { if ("number" == this._dataType) throw new Error(s) } else if ("date" == this._dataType) throw new Error(s); e = this._validateInput(e), t = this._validateInput(t), e > this._max && (e = this._max), e < this._min && (e = this._min), t > this._max && (t = this._max), t < this._min && (t = this._min); var r = t - e; r > this._range._max ? t = e + this._range._max : r < this._range._min && (t = e + this._range._min); var o = this._valuesArray.indexOf(e), a = this._valuesArray.indexOf(t), n = this._ticksArray[o], l = this._ticksArray[a], h = Math.abs(l - n); this.slider[0].style.width = h + "px"; var d = this.rtl ? l : n; if (this.slider[0].style.left = d, this._moveSlider(d), "date" == this._dataType) var e = new Date(e), t = new Date(t); this._raiseEvent("0", { from: e, to: t }) } }, getRange: function () { return this._getValue() }, propertyChangedHandler: function (t, i, s, r) { switch (i) { case "showMinorTicks": 1 == r ? e("#" + this._id + " .jqx-rangeselector-ticks-minor").css("visibility", "visible") : e("#" + this._id + " .jqx-rangeselector-ticks-minor").css("visibility", "hidden"); break; case "showMarkers": var o = e("#" + this._id + "LeftMarker, #" + this._id + "RightMarker, #" + this._id + "LeftMarkerArrow, #" + this._id + "RightMarkerArrow"); 1 == r ? o.css("visibility", "visible") : o.css("visibility", "hidden"); break; default: this.refresh() } }, _raiseEvent: function (e, t) { var i = this.events[e], s = new jQuery.Event(i); s.owner = this, s.args = t; try { var r = this.host.trigger(s) } catch (e) { } return r }, _setSize: function () { this.host.width(this.width), this.host.height(this.height) }, resize: function (e, t) { this.width = e, this.height = t, this.refresh() }, _scale: function () { var e = this.host.width(), t = this._max - this._min; this._unitPerPixel = parseFloat((t / e).toFixed(4)), this._pixelPerUnit = e / t, this._minWidth = this._roundNumber(this._range._min / this._unitPerPixel), this._maxWidth = this._roundNumber(this._range._max / this._unitPerPixel), this._minWidth = parseInt(this._minWidth), this._maxWidth = parseInt(this._maxWidth), "number" == this._dataType && (this._majorTicksCount = t / this.majorTicksInterval, this._majorTicksCount = Math.floor(this._majorTicksCount) + 1, this._majorTicksDistance = parseInt(this._roundNumber(e / (t / this.majorTicksInterval))), this._unitsCount = t / this.minorTicksInterval, this._unitsCount = Math.floor(this._unitsCount) + 1, this._unitsDistance = parseInt(this._roundNumber(e / (t / this.minorTicksInterval)))), this._addTicks() }, _addTicks: function () { this.host.append("<div id='" + this._id + "TicksContainer' class='jqx-rangeselector-ticks-container'></div>"), this.rangeSelector = e("#" + this._id + "TicksContainer"), this._majorTicksArray = new Array, this._ticksArray = new Array, this._valuesArray = new Array; var t = new String; e("#" + this._id + "TicksContainer").append("<div id='labelPlaceholder' style='visibility: hidden; position: absolute;'></div>"); var i = this.rangeSelector.height(); t = "number" == this._dataType ? this._addNumericTicks(i) : this._addDateTicks(i); var s = 0; this.showLabels && (s += e("#labelPlaceholder").outerHeight() + 6), "number" != this._dataType && this.showGroupLabels && (s += e("#labelPlaceholder").outerHeight() + 6), "auto" == this.padding && this.host.css("padding-bottom", s), e("#labelPlaceholder").remove(), e("#" + this._id + "TicksContainer").append(t), this._ticksArray.sort(function (e, t) { return e - t }); for (r = 1; r < this._ticksArray.length; r++) this._ticksArray[r] = this._roundNumber(this._ticksArray[r]); if (this._valuesArray.sort(function (e, t) { return e - t }), "number" == this._dataType) for (r = 1; r < this._valuesArray.length; r++) this._valuesArray[r] = this._roundNumber(this._valuesArray[r], "marker", !0); for (var r = 1; r < this._ticksArray.length; r++) this._ticksArray[r - 1] == this._ticksArray[r] && (this._ticksArray.splice(r, 1), this._valuesArray.splice(r, 1)); this.rtl && (this._valuesArray = this._valuesArray.reverse()) }, _addNumericTicks: function (t) { for (var i = this, s = new String, r = 0, o = this._min, a = this._max, n = 0; n < this._majorTicksCount; n++) { f = this._id + "LabelTick" + (n + 1); n == this._majorTicksCount - 1 && (r = this.host.width()); var l = i.showMajorTicks ? "visible" : "hidden"; s += "<div id='" + f + "' class='" + this.toThemeProperty("jqx-rangeselector-ticks") + " " + this.toThemeProperty("jqx-slider-tick-horizontal") + "' style='visibility: " + l + "; left: " + r + "px;'></div>", this._ticksArray.push(r), this._majorTicksArray.push(r); var h = this._id + "Label" + (n + 1), d = o; this._valuesArray.push(parseFloat(d.toFixed(4))), i.rtl && (d = a), d = this._formatOutput(d, this.labelsFormat, this.minorTicksInterval >= 1 ? 0 : 2, "label"), e("#labelPlaceholder").html(d); var c = e("#labelPlaceholder").width(), u = i.showLabels ? "visible" : "hidden"; i.labelsOnTicks && (s += "<div id='" + h + "' class='" + this.toThemeProperty("jqx-rangeselector-labels") + "' style='visibility: " + u + "; left: " + (r - c / 2) + "px; top: " + t + "px;'>" + d + "</div>"); var p = r; o += this.majorTicksInterval, a -= this.majorTicksInterval; r = (o - i._min) / i._unitPerPixel; if (r = parseInt(r), !this.labelsOnTicks && n < this._majorTicksCount - 1) { var m = Math.abs(p - r); s += "<div id='" + h + "' class='" + this.toThemeProperty("jqx-rangeselector-labels") + "' style='visibility: " + u + "; left: " + (p + m / 2 - c / 2) + "px; top: " + t + "px;'>" + d + "</div>" } } for (var r = 0, g = this.showMinorTicks ? "visible" : "hidden", o = this._min, n = 0; n < this._unitsCount; n++) { var f = this._id + "MinorTick" + (n + 1); n == this._unitsCount - 1 && (r = this.host.width()), s += "<div id='" + f + "' class='" + this.toThemeProperty("jqx-rangeselector-ticks") + " " + this.toThemeProperty("jqx-rangeselector-ticks-minor") + " " + this.toThemeProperty("jqx-slider-tick-horizontal") + "' style='visibility: " + g + "; left: " + r + "px;'></div>"; var v = o; -1 === this._valuesArray.indexOf(parseFloat(v.toFixed(4))) && (this._valuesArray.push(parseFloat(v.toFixed(4))), this._ticksArray.push(r)); r = ((o += this.minorTicksInterval) - i._min) / i._unitPerPixel; r = parseInt(r) } return s }, _getMillisecondsByInterval: function (e) { var t = {}; return "year" == e || e.years ? (t.divisor = e.years ? e.years : 1, 31536e6 * t.divisor) : "month" == e || e.months ? (t.divisor = e.months ? e.months : 1, 2592e6 * t.divisor) : "week" == e || e.weeks ? (t.divisor = e.weeks ? e.weeks : 1, 6048e5 * t.divisor) : "day" == e || e.days ? (t.divisor = e.days ? e.days : 1, 864e5 * t.divisor) : "hour" == e || e.hours ? (t.divisor = e.hours ? e.hours : 1, 36e5 * t.divisor) : "minute" == e || e.minutes ? (t.divisor = e.minutes ? e.minutes : 1, 60 * t.divisor * 1e3) : "second" == e || e.seconds ? (t.divisor = e.seconds ? e.seconds : 1, 1e3 * t.divisor) : "millisecond" == e || e.milliseconds ? (t.divisor = e.milliseconds ? e.milliseconds : 1, 1 * t.divisor) : t }, _addDateTicks: function (t) { var i = this, s = new String, r = function (e) { var t = "majorTicksInterval" == e ? i.majorTicksInterval : i.minorTicksInterval, s = new Object; return "year" == t || t.years ? (s.period = "year", s.interval = 864e5, s.divisor = t.years ? t.years : 1, s.value = 31536e6 * s.divisor) : "month" == t || t.months ? (s.period = "month", s.interval = 864e5, s.divisor = t.months ? t.months : 1, s.value = 2592e6 * s.divisor) : "week" == t || t.weeks ? (s.period = "week", s.interval = 864e5, s.divisor = t.weeks ? t.weeks : 1, s.value = 6048e5 * s.divisor) : "day" == t || t.days ? (s.period = "day", s.interval = 36e5, s.divisor = t.days ? t.days : 1, s.value = 864e5 * s.divisor) : "hour" == t || t.hours ? (s.period = "hour", s.interval = 6e4, s.divisor = t.hours ? t.hours : 1, s.value = 36e5 * s.divisor) : "minute" == t || t.minutes ? (s.period = "minute", s.interval = 6e4, s.divisor = t.minutes ? t.minutes : 1, s.value = 60 * s.divisor * 1e3) : "second" == t || t.seconds ? (s.period = "second", s.interval = 1e3, s.divisor = t.seconds ? t.seconds : 1, s.value = 1e3 * s.divisor) : ("millisecond" == t || t.milliseconds) && (s.period = "millisecond", s.interval = 1, s.divisor = t.milliseconds ? t.milliseconds : 1, s.value = 1 * s.divisor), s }, o = function (e, t) { var i = new Date(e), s = i.getDate(), r = "year" == t && 0 == i.getMonth() && 1 == s, o = "month" == t && 1 == s, a = "week" == t && 0 == i.getDay(), n = "day" == t && 0 == i.getHours(), l = "hour" == t && 0 == i.getMinutes(), h = "minute" == t && 0 == i.getSeconds(), d = "minute" == t && 0 == i.getMilliseconds(), c = "millisecond" == t; return !!(r || o || a || n || l || h || d || c) }, a = function (r, o, a) { var n = (r - i._min) / i._unitPerPixel; i.rtl && (r = "majorTicksInterval" == o ? i._dateMajorTicks[i._dateMajorTicks.length - a] : i._dateMinorTicks[i._dateMinorTicks.length - a]), n = parseInt(n); var l = r; if (-1 === i._valuesArray.indexOf(l) && (i._ticksArray.push(n), i._valuesArray.push(l), "majorTicksInterval" == o && i._majorTicksArray.push(n)), "majorTicksInterval" == o) { var h = i._id + "LabelTick" + a, d = i.showMajorTicks ? "visible" : "hidden"; s += "<div id='" + h + "' class='" + i.toThemeProperty("jqx-rangeselector-ticks") + " " + i.toThemeProperty("jqx-slider-tick-horizontal") + "' style='visibility: " + d + "; left: " + n + "px;'></div>"; var c = l; c = i._formatOutput(c, i.labelsFormat, i.labelPrecision, "label"), e("#labelPlaceholder").html(c); var u = e("#labelPlaceholder").width(), p = i._id + "Label" + a, m = i.showLabels ? "visible" : "hidden"; if (i.labelsOnTicks) i.labelsOnTicks && (s += "<div id='" + p + "' class='" + i.toThemeProperty("jqx-rangeselector-labels") + "' style='visibility: " + m + "; left: " + (n - u / 2) + "px; top: " + t + "px;'>" + c + "</div>"); else { var g = i._getMillisecondsByInterval(i.majorTicksInterval) / i._unitPerPixel / 2; s += "<div id='" + p + "' class='" + i.toThemeProperty("jqx-rangeselector-labels") + "' style='visibility: " + m + "; left: " + (g + n - u / 2) + "px; top: " + t + "px;'>" + c + "</div>" } } else { var d = i.showMinorTicks ? "visible" : "hidden", f = i._id + "MinorTick" + a; s += "<div id='" + f + "' class='" + i.toThemeProperty("jqx-rangeselector-ticks") + " " + i.toThemeProperty("jqx-rangeselector-ticks-minor") + " " + i.toThemeProperty("jqx-slider-tick-horizontal") + "' style='visibility: " + d + "; left: " + n + "px;'></div>" } }, n = function (e, t, s) { for (var r = 0, n = 1, l = new Date(i._min).getHours(), h = 864e5 == t.interval, d = new Array, c = i._min; c <= i._max; c += t.interval) { if (1 == h) { var u = new Date(c).getHours(); if (l != u) { var p; 1 == u ? p = 1 : 23 == u && (p = -1), c -= 36e5 * p, l = new Date(c).getHours() } } 1 == o(c, t.period) && (r % t.divisor == 0 && (s ? d.push(c) : a(c, e, n, t.interval), n++), r++) } return d }; return i._dateMajorTicks = n("majorTicksInterval", r("majorTicksInterval"), !0), i._dateMinorTicks = n("minorTicksInterval", r("minorTicksInterval"), !0), n("majorTicksInterval", r("majorTicksInterval")), n("minorTicksInterval", r("minorTicksInterval")), 1 == this.showGroupLabels && this.showLabels && this._addGroupLabels(e("#labelPlaceholder").height() + t), s }, _addGroupLabels: function (t) { var i = this, s = new Date(this._min), r = new Date(this._max); if (r.getFullYear() - s.getFullYear() > 0) var o = "year", a = 864e5; else if (r.getMonth() - s.getMonth() > 0) var o = "month", a = 864e5; else { if (!(r.getDate() - s.getDate() > 0)) return; var o = "day", a = 36e5 } for (var n = new String, l = this.toThemeProperty("jqx-rangeselector-group-labels-ticks") + " " + this.toThemeProperty("jqx-slider-tick-horizontal"), h = 1, d = this._min; d < this._max; d += a) { var c = function (t) { var s, r = new Date(t), a = r.getFullYear(), n = r.getMonth(), l = r.getDate(), h = !0; "year" == o && 0 == n && 1 == l ? s = a : "month" == o && 1 == l ? (s = e.jqx.dataFormat.formatdate(r, "MMMM"), 0 == n && (s = a + " " + s)) : "day" == o && 0 == r.getHours() ? s = e.jqx.dataFormat.formatdate(r, "dddd") : h = !1; return { check: h, value: 1 == h && i.groupLabelsFormatFunction ? i.groupLabelsFormatFunction(s, r) : s } }(d); if (1 == c.check) { var u = (d - this._min) / this._unitPerPixel; n += "<div class='" + this.toThemeProperty("jqx-rangeselector-labels") + "' style='left: " + u + "px; top: " + t + "px;'><div class='" + l + "'></div><div id='" + this._id + "GroupLabel" + h + "' class='" + this.toThemeProperty("jqx-rangeselector-group-labels") + "' style='margin-left: 5px;'>" + c.value + "</div></div>", h++ } } e("#" + this._id + "TicksContainer").append(n) }, _updateCursor: function (e, t) { var i = this.element.style.cursor, s = this.slider.offset().left, r = s + parseInt(this.slider[0].style.width); e > s - 5 && e < s + 5 || e > r - 5 && e < r + 5 ? "" != i && "auto" != i || (this.element.style.cursor = "e-resize") : "e-resize" == i && (this.element.style.cursor = "auto") }, _handleMouseMove: function (t) { var i = this, s = i.slider, r = t.pageX, o = t.pageY; if (i._isTouchDevice) { var a = e.jqx.position(t); r = a.left, o = a.top } var n = i._hostOffset.left, l = i._hostWidth; if (i.resizable && !i.dragging && "none" == i.resizeDirection && r >= n && r <= n + l && o >= i._hostOffset.top && o <= i._hostOffset.top + i._hostHeight && this._updateCursor(r, o), !i.isMouseDown) return !0; var h = i._findNearestTick(i._sliderLeftOffset + r - i._mouseDownX), d = parseInt(h); if (d < 0) return !0; d < 0 && (d = 0); var c = parseInt(s[0].style.width); if (1 == i.resizable && !i.dragging) { j = d * i._unitPerPixel + i._min; if ("left" == i.resizeDirection || i.isLeftMarkerCaptured) { r < n - (f = i.isLeftMarkerCaptured ? i.leftMarker.outerWidth() : 0) && (r = n - f), r > n + l + f && (r = n + l + f + 1); var u = s[0].style.left, p = d - parseInt(u); if (!function (e) { var t = parseInt(i._maxWidth); if (e < parseInt(i._minWidth) || e > t) return !1; var s = parseInt(i.rightMarker[0].style.left); return !(parseInt(i.leftMarker[0].style.left) > s) }(_ = parseInt(c - p))) if (r > i._mouseDownX) { if (r = i.sliderRight - i._minWidth - n, _ = i._minWidth, c == _) return !0; if ((d = h = i._findNearestTick(r)) < 0) return !0; parseInt(u), i._unitPerPixel, i._min; j = d * i._unitPerPixel + i._min } else { if (!(0 != i._maxWidth && r < i._mouseDownX && _ > i._maxWidth)) return !0; if (r = i.sliderRight - i._maxWidth - n, _ = i._maxWidth, c == _) return !0; if ((d = h = i._findNearestTick(r)) < 0) return !0; parseInt(u), i._unitPerPixel, i._min; j = d * i._unitPerPixel + i._min } i.slider[0].style.left = d + "px", u != s[0].style.left && (i.slider[0].style.width = _ + "px"); var m = i._findNearestTick(d), g = i._valuesArray[i._ticksArray.indexOf(m)]; void 0 != g ? (i.leftMarkerValue[0].innerHTML = i._formatOutput(g, i.markersFormat, 0, "left"), d != m && (i.slider[0].style.left = m + "px")) : i.leftMarkerValue[0].innerHTML = i._formatOutput(j, i.markersFormat, 0, "left"), i.oldX = r, i.moved = !0 } else if ("right" == i.resizeDirection || i.isRightMarkerCaptured) { var f = i.isRightMarkerCaptured ? i.rightMarker.outerWidth() : 0, v = !1; r < n - f && (r = n - f, !0), r > n + l + f && (r = n + l + f, v = !0); var x = i._sliderInitialWidth, w = i._findNearestTick(x + i._sliderLeftOffset), b = i._findNearestTick(x + r - i._mouseDownX + i._sliderLeftOffset); if (b < 0) return !0; var _ = x - (p = w - b); _ <= 0 && (p = x, _ = 0); var y = parseInt(i.element.style.width); i.element.style.width.indexOf("%") >= 0 && (y = i.host.width()), (v || i._sliderLeftOffset + _ >= y) && (_ = y - i._sliderLeftOffset, boundDetected = !0), _ > parseInt(this._maxWidth) && (_ = parseInt(this._maxWidth)), _ < parseInt(this._minWidth) && (_ = parseInt(this._minWidth)), i.slider[0].style.width = _ + "px"; var j = (i._sliderLeftOffset + _) * i._unitPerPixel + i._min, q = i._findNearestTick(i._sliderLeftOffset + _), T = i._valuesArray[i._ticksArray.indexOf(q)]; void 0 != T ? (i._sliderLeftOffset + _ != q && (i.slider[0].style.width = q - i._sliderLeftOffset + "px"), i.rightMarkerValue[0].innerHTML = i._formatOutput(T, i.markersFormat, 0, "right")) : i.rightMarkerValue[0].innerHTML = i._formatOutput(j, i.markersFormat, 0, "right"), i.oldX = r } i._layoutShutter(), i._layoutMarkers(), i.moved = !0 } 1 == i.dragging && (i._moveSlider(d, !0), i.oldX = r) }, _moveSlider: function (e, t) { this.moved = !0; var i = parseInt(this.slider[0].style.width), s = parseInt(e + i), r = this._hostWidth, o = e; if (o < 0 && (e = o = 0), o + i > r && (e = o = r - i), o >= 0 && o + i <= r) { this.slider[0].style.left = o + "px"; var a = this._findNearestTick(o), n = -1 != this._majorTicksArray.indexOf(a), l = this._valuesArray[this._ticksArray.indexOf(a)]; if (void 0 != l) { if (this.leftMarkerValue[0].innerHTML = this._formatOutput(l, this.markersFormat, 0, "left"), e != a && n && t) { this.slider[0].style.left = a + "px"; s = parseInt(a + i) } } else this.leftMarkerValue[0].innerHTML = this._formatOutput(o * this._unitPerPixel + this._min, this.markersFormat, 0, "left"); var h = this._findNearestTick(s), d = this._valuesArray[this._ticksArray.indexOf(h)]; if (void 0 != d) { var c = -1 != this._majorTicksArray.indexOf(h); if (this.rightMarkerValue[0].innerHTML = this._formatOutput(d, this.markersFormat, 0, "right"), s != h && c && n && t) { var u = h - a; this.slider[0].style.width = u + "px" } } else this.rightMarkerValue[0].innerHTML = this._formatOutput((o + i) * this._unitPerPixel + this._min, this.markersFormat, 0, "right") } this._layoutShutter(), this._layoutMarkers() }, _initSlider: function () { var t = this, i = this.toThemeProperty("jqx-rangeselector-shutter") + " " + this.toThemeProperty("jqx-scrollbar-state-normal"); e("#" + this._id + "TicksContainer").append("<div id='" + this._id + "ShutterLeft' class='" + i + "'></div><div id='" + this._id + "Slider' class='" + this.toThemeProperty("jqx-rangeselector-slider") + " " + this.toThemeProperty("jqx-scrollbar-thumb-state-normal") + "'><div class='" + this.toThemeProperty("jqx-rangeselector-inner-slider") + "'></div></div><div id='" + this._id + "ShutterRight' class='" + i + "'></div>"), this.slider = e("#" + this._id + "Slider"), this.shutterLeft = e("#" + this._id + "ShutterLeft"), this.shutterRight = e("#" + this._id + "ShutterRight"), this._hostOffset = this.rangeSelector.offset(), this._hostWidth = this.rangeSelector.width(), this._hostHeight = this.rangeSelector.height(); var s = this._hostOffset, r = this._initRange(), o = r.left, a = (r.right - o) / this._unitPerPixel; this.slider[0].style.width = Math.round(a) + "px"; var n = s.left + parseInt((o - this._min) / this._unitPerPixel); if (this.slider.offset({ left: n }), this._layoutShutter(), this._initMarkers(), 0 == this.disabled) { this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")), this.addHandler(this.host, "dragstart.rangeselector" + this._id, function () { return !1 }), this.addHandler(e(window), "jqxReady.rangeselector", function () { return t._layoutMarkers(), !1 }), this.isSliderCaptured = !1, this.resizeDirection = "none", this.isLeftMarkerCaptured = !1, this.isRightMarkerCaptured = !1, this.dragging = !1, this._mouseDownX; var l, h, d = "mousedown.rangeselector" + this.element.id; this._isTouchDevice && (d = e.jqx.mobile.getTouchEventName("touchstart") + ".rangeselector" + this.element.id), this.addHandler(this.host, d, function (i) { t.isMouseDown = !0, t._hostOffset = t.rangeSelector.offset(), t._hostWidth = t.rangeSelector.width(), t._hostHeight = t.rangeSelector.height(), t._sliderLeftOffset = parseInt(t.slider[0].style.left); var s = i.pageX, r = i.pageY; if (t._isTouchDevice) { var o = e.jqx.position(i); s = o.left, r = o.top } t._initialSliderOffset = s - t.slider.offset().left; var a = t.slider.width(); t._sliderInitialWidth = a, l = t.slider.offset().left, h = t._sliderInitialWidth, t.initialOffset = l; var n = parseInt(l + h); if (t.oldX = s, t._mouseDownX = s, t.resizeDirection = "none", t.sliderRight = n, s > l - 5 && s < l + 5 && t._heightCheck(r)) t.isSliderCaptured = !1, t.dragging = !1, t.resizeDirection = "left"; else if (s > n - 5 && s < n + 5 && t._heightCheck(r)) t.isSliderCaptured = !1, t.dragging = !1, t.resizeDirection = "right"; else if (s >= l + 5 && s <= n + 5 && t._heightCheck(r)) t.isSliderCaptured = !0, t.dragging = !0; else if (t.isSliderCaptured = !1, t.dragging = !1, t.moveOnClick) { if (t.isLeftMarkerCaptured || t.isRightMarkerCaptured) return !1; var d = t._sliderLeftOffset + t._initialSliderOffset; (d = t._findNearestTick(d)) < 0 && (d = 0); var c = parseInt(t.slider[0].style.width); r >= t.slider.offset().top && (s > n ? t._moveSlider(d - c, !0) : t._moveSlider(d, !0)) } }), this.addHandler(t.leftMarker, d, function (i) { if (t.leftMarkerAndArrow.addClass(t.toThemeProperty("jqx-fill-state-pressed")), t.oldLeftX = i.pageX, t._isTouchDevice) { var s = e.jqx.position(i); oldLeftX = s.left } t._mouseDownX = t.oldLeftX, t.isLeftMarkerCaptured = !0 }), this.addHandler(t.rightMarker, d, function (i) { if (t.rightMarkerAndArrow.addClass(t.toThemeProperty("jqx-fill-state-pressed")), t.oldRightX = i.pageX, t._isTouchDevice) { var s = e.jqx.position(i); oldRightX = s.left } t._mouseDownX = t.oldRightX, t.isRightMarkerCaptured = !0 }), this.addHandler(e(document), "selectstart.rangeselector" + this._id, function (e) { if (1 == t.isSliderCaptured || 1 == t.isLeftMarkerCaptured || 1 == t.isRightMarkerCaptured || 1 == t.dragging) return e.preventDefault(), !1 }); var c = "mousemove.rangeselector" + this.element.id; this._isTouchDevice && (c = e.jqx.mobile.getTouchEventName("touchmove") + ".rangeselector" + this.element.id), this.addHandler(e(document), c, function (e) { t._handleMouseMove(e) }); var u = function (e) { try { var i = t.moved; if (t.moved = !1, t.isMouseDown = !1, t.dragging = !1, t.resizeDirection = "none", 1 == t.isLeftMarkerCaptured && (t.leftMarkerAndArrow.removeClass(t.toThemeProperty("jqx-fill-state-pressed")), t.isLeftMarkerCaptured = !1), 1 == t.isRightMarkerCaptured && (t.rightMarkerAndArrow.removeClass(t.toThemeProperty("jqx-fill-state-pressed")), t.isRightMarkerCaptured = !1), i) { var s = t._getValue(); t._raiseEvent("0", { from: s.from, to: s.to }) } } catch (e) { } }; this.addHandler(e(document), "mouseup.rangeselector" + this._id, function (e) { u() }); try { if (("" != document.referrer || window.frameElement) && null != window.top && window.top != window.self) { var p = function (e) { u() }, m = null; window.parent && document.referrer && (m = document.referrer), m && -1 != m.indexOf(document.location.host) && window.top.document && (window.top.document.addEventListener ? window.top.document.addEventListener("mouseup", p, !1) : window.top.document.attachEvent && window.top.document.attachEvent("onmouseup", p)) } } catch (e) { } } else this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")); this._moveSlider(parseInt(t.slider[0].style.left)), this.moved = !1 }, _initMarkers: function () { var t = e("#" + this._id + "TicksContainer"), i = this.toThemeProperty("jqx-rangeselector-markers") + " " + this.toThemeProperty("jqx-disableselect") + " " + this.toThemeProperty("jqx-fill-state-normal"); t.append("<div id='" + this._id + "LeftMarker' class='" + i + "'></div><div id='" + this._id + "RightMarker' class='" + i + "'></div>"); var s = this.toThemeProperty("jqx-rangeselector-marker-arrow") + " " + this.toThemeProperty("jqx-fill-state-normal"); "bottom" == this.markersPosition ? s += " " + this.toThemeProperty("jqx-rangeselector-marker-arrow-bottom") : s += " " + this.toThemeProperty("jqx-rangeselector-marker-arrow-top"), t.append("<div id='" + this._id + "LeftMarkerArrow' class='" + s + " " + this.toThemeProperty("jqx-rangeselector-marker-left-arrow") + "'></div>"), t.append("<div id='" + this._id + "RightMarkerArrow' class='" + s + " " + this.toThemeProperty("jqx-rangeselector-marker-right-arrow") + "'></div>"), e("#" + this._id + "LeftMarker").append("<div id='" + this._id + "LeftMarkerValue' class='" + this.toThemeProperty("jqx-disableselect") + " " + this.toThemeProperty("jqx-rangeselector-markers-value") + "'></div>"), e("#" + this._id + "RightMarker").append("<div id='" + this._id + "RightMarkerValue' class='" + this.toThemeProperty("jqx-disableselect") + " " + this.toThemeProperty("jqx-rangeselector-markers-value") + "'></div>"); var r = e("#" + this._id + "LeftMarker, #" + this._id + "RightMarker, #" + this._id + "LeftMarkerArrow, #" + this._id + "RightMarkerArrow"), o = e("#" + this._id + "LeftMarker, #" + this._id + "LeftMarkerArrow"), a = e("#" + this._id + "RightMarker, #" + this._id + "RightMarkerArrow"); if (1 == this.showMarkers ? r.css("visibility", "visible") : r.css("visibility", "hidden"), 0 == this.disabled && 1 == this.resizable) { var n = this; this.addHandler(o, "mouseenter.rangeselector" + this._id, function (e) { n.element.style.cursor = "pointer", o.addClass(n.toThemeProperty("jqx-fill-state-hover")) }), this.addHandler(o, "mouseleave.rangeselector" + this._id, function (e) { n.element.style.cursor = "auto", o.removeClass(n.toThemeProperty("jqx-fill-state-hover")) }), this.addHandler(a, "mouseenter.rangeselector" + this._id, function (e) { n.element.style.cursor = "pointer", a.addClass(n.toThemeProperty("jqx-fill-state-hover")) }), this.addHandler(a, "mouseleave.rangeselector" + this._id, function (e) { n.element.style.cursor = "auto", a.removeClass(n.toThemeProperty("jqx-fill-state-hover")) }) } this.leftMarkerAndArrow = o, this.rightMarkerAndArrow = a, this.leftMarkerArrow = e("#" + this._id + "LeftMarkerArrow"), this.rightMarkerArrow = e("#" + this._id + "RightMarkerArrow"), this.leftMarker = e("#" + this._id + "LeftMarker"), this.rightMarker = e("#" + this._id + "RightMarker"), this.leftMarkerValue = e("#" + this._id + "LeftMarkerValue"), this.rightMarkerValue = e("#" + this._id + "RightMarkerValue"); var l = this._initRange(); this._updateMarkersValues(l.left, l.right), this._layoutMarkers(), "auto" == this.padding ? (this.host.css("padding-left", this.leftMarker[0].offsetWidth), this.host.css("padding-right", this.rightMarker[0].offsetWidth), this.host.css("padding-top", this._leftMarkerHeight + 7)) : this.host.css("padding", this.padding) }, _layoutMarkers: function () { if (1 == this.showMarkers) { this._hostOffset || (this._hostOffset = this.rangeSelector.offset()), this._leftMarkerHeight || (this._leftMarkerHeight = this.leftMarker.outerHeight(), this._rightMarkerHeight = this.rightMarker.outerHeight()); this._hostOffset.top; var e = parseInt(this.slider[0].style.left) + this._hostOffset.left, t = -5; "bottom" == this.markersPosition && (t = parseInt(this.element.style.height) + 4 + this._rightMarkerHeight); var i = t - this._leftMarkerHeight, s = t - this._rightMarkerHeight; "bottom" == this.markersPosition && (t = parseInt(this.element.style.height) - 6); var r = this.leftMarker[0].offsetWidth, o = 1 + e - r - this._hostOffset.left; this.leftMarker[0].style.left = o + "px", this.leftMarker[0].style.top = i + "px", this.leftMarkerArrow[0].style.left = 2 + o + r + "px", this.leftMarkerArrow[0].style.top = 6 + t + "px"; var a = e + parseInt(this.slider[0].style.width) - this._hostOffset.left; this.rightMarker[0].style.left = a + "px", this.rightMarker[0].style.top = s + "px", this.rightMarkerArrow[0].style.left = 7 + a + "px", this.rightMarkerArrow[0].style.top = 6 + t + "px" } }, _updateMarkersValues: function (e, t) { var i = e, s = t; this.leftMarkerValue[0].innerHTML = this._formatOutput(i, this.markersFormat, 0, "left", !0), this.rightMarkerValue[0].innerHTML = this._formatOutput(s, this.markersFormat, 0, "right", !0) }, _removeHandlers: function () { var t = this.element.id, i = e("#" + t + "LeftMarker, #" + t + "LeftMarkerArrow"), s = e("#" + t + "RightMarker, #" + t + "RightMarkerArrow"), r = "mousemove.rangeselector" + t, o = "mousedown.rangeselector" + t; this._isTouchDevice && (r = e.jqx.mobile.getTouchEventName("touchmove") + ".rangeselector" + t, o = e.jqx.mobile.getTouchEventName("touchstart") + ".rangeselector" + t), this.removeHandler(e(document), r), this.removeHandler(e(document), "mouseup.rangeselector" + t), this.removeHandler(this.host, o), this.removeHandler(this.host, "click.rangeselector" + t), this.removeHandler(this.host, "dragstart.rangeselector" + t), this.removeHandler(i, "mouseenter.rangeselector" + t), this.removeHandler(i, "mouseleave.rangeselector" + t), this.removeHandler(s, "mouseenter.rangeselector" + t), this.removeHandler(s, "mouseleave.rangeselector" + t), this.removeHandler(e("#" + t + "LeftMarker"), o), this.removeHandler(e("#" + t + "RightMarker"), o), this.removeHandler(e("#" + t + "LeftMarkerValue, #" + t + "RightMarkerValue"), "selectstart.rangeselector" + t) }, _heightCheck: function (e) { var t = this.slider, i = t.offset().top; return e >= i && e <= i + t.height() }, _checkProperties: function () { this._range._from < this._min ? this._range._from = this._min : this._range._from > this._min && this._range._from > this._max && (this._range._from = this._min), this._range._to > this._max ? this._range._to = this._max : this._range._to < this._min && this._range._to < this._max && (this._range._to = this._max); var e = this._max - this._min; this._range._min > e && (this._range._min = e), this._range._max > e && (this._range._max = e); var t = this._range._to - this._range._from; t < this._range._min ? this._range._to = this._range._from + this._range._min : t > this._range._max && (this._range._to = this._range._from + this._range._max) }, _findNearestTick: function (e) { for (var t = 0, i = Math.abs(e - this._ticksArray[0]), s = 1; s < this._ticksArray.length; s++) { var r = Math.abs(e - this._ticksArray[s]); i > r && (i = r, t = s) } return this._ticksArray[t] }, _privateProperties: function () { this._min = this._validateInput(this.min), this._max = this._validateInput(this.max), this._range = new Object, this._range._from = this._validateInput(void 0 != this.range.from ? this.range.from : 0), this._range._to = this._validateInput(void 0 != this.range.to ? this.range.to : 1 / 0), this._range._min = this._minMaxDate(void 0 != this.range.min ? this.range.min : 0), this._range._max = this._minMaxDate(void 0 != this.range.max ? this.range.max : 1 / 0) }, _validateInput: function (e) { var t; return "number" == typeof e ? t = e : "string" == typeof e ? t = Date.parse(e) : e instanceof Date && (t = e.getTime()), t }, _minMaxDate: function (e) { if ("number" != typeof e) { var t; switch (e) { case "millisecond": t = 1; break; case "second": t = 1e3; break; case "minute": t = 6e4; break; case "hour": t = 36e5; break; case "day": t = 864e5; break; case "week": t = 6048e5; break; default: t = e.milliseconds ? e.milliseconds : 0 + e.seconds ? 1e3 * e.seconds : 0 + e.minutes ? 6e4 * e.minutes : 0 + e.hours ? 36e5 * e.hours : 0 + e.days ? 864e5 * e.days : 0 + e.weeks ? 6048e5 * e.weeks : 0 } return t } return e }, _formatOutput: function (t, i, s, r, o) { var a; if (this.values || (this.values = new Array), this.values[r] = t, "label" == r && this.labelsFormatFunction) a = "date" == this._dataType ? this._roundDate(t) : this._roundNumber(t, "label"), a = this.labelsFormatFunction(a); else if ("label" != r && this.markersFormatFunction) "date" == this._dataType && (a = this._roundDate(t)), a = this.markersFormatFunction(t, r); else if (i) "number" == this._dataType ? a = e.jqx.dataFormat.formatnumber(t, i) : (a = this._roundDate(t), a = e.jqx.dataFormat.formatdate(a, i)); else { if ("date" == this._dataType) { var n; null == this.labelsFormat && null == this.markersFormat ? n = "both labelsFormat and markersFormat" : null == this.labelsFormat ? n = "labelsFormat" : null == this.markersFormat && (n = "markersFormat"); var l = "When the data format is date, " + n + " should be set."; throw new Error(l) } a = t.toFixed(s) } return a }, _getValue: function (e) { var t = this.slider, i = t.width(), s = new Object, r = (t.offset().left - this.rangeSelector.offset().left) * this._unitPerPixel + this._min; if (s.from = this._roundNumber(r, "marker"), s.to = this._roundNumber(r + i * this._unitPerPixel, "marker"), !e && 1 == this.snapToTicks) { var o = this._findNearestTick((s.from - this._min) / this._unitPerPixel); s.from = this._valuesArray[this._ticksArray.indexOf(o)]; var a = this._findNearestTick((s.to - this._min) / this._unitPerPixel); s.to = this._valuesArray[this._ticksArray.indexOf(a)] } return "date" == this._dataType && (s.from = new Date(s.from), s.to = new Date(s.to)), s }, _roundNumber: function (e, t, i) { var s; return "marker" == t ? (1 == i && (e = parseFloat(e)), s = parseFloat(e)) : s = parseFloat(e), s }, _roundDate: function (e) { "number" == typeof e && (e = new Date(e)); var t = this._max - this._min; if (t > 12096e5) { var i = e.getDate(); e.getHours() > 12 && (e.setDate(i + 1), e.setHours(0), e.setMinutes(0), e.setSeconds(0)) } else t > 1728e5 && (e.setHours(e.getHours() + Math.round(e.getMinutes() / 60)), e.setMinutes(0), e.setSeconds(0)); return e }, _layoutShutter: function () { var t = parseInt(this.slider[0].style.left); this.shutterLeft[0].style.width = t + "px", this.shutterLeft[0].style.left = "0px", e.jqx.browser.msie && e.jqx.browser.version < 9 && (this.shutterLeft[0].style.filter = "progid:DXImageTransform.Microsoft.Alpha(Opacity=75)", this.shutterRight[0].style.filter = "progid:DXImageTransform.Microsoft.Alpha(Opacity=75)"); var i = 1 + t + parseInt(this.slider[0].style.width); this.shutterRight[0].style.left = i + "px"; s = parseInt(this.element.style.width); if (this.element.style.width.indexOf("%") >= 0) var s = parseInt(this.host.width()); var r = s - 1 - t - parseInt(this.slider[0].style.width); r < 0 && (r = 0), this.shutterRight[0].style.width = 1 + r + "px", i + 1 + r < 2 + s && (this.shutterRight[0].style.width = 2 + r + "px"), 0 == r && (this.shutterRight[0].style.width = "0px") }, _initRange: function () { if (this._range._from > this._range._to) throw new Error("jqxRangeSelector: range object initialization error. 'min' should be less than 'max'"); return { left: this._range._from, right: this._range._to } } }) }(jQuery), function (e) { function t(t, i) { return this.owner = t, this.datafield = null, this.displayfield = null, this.text = "", this.sortable = !0, this.editable = !0, this.hidden = !1, this.hideable = !0, this.groupable = !0, this.renderer = null, this.cellsrenderer = null, this.columntype = null, this.cellsformat = "", this.align = "left", this.cellsalign = "left", this.width = "auto", this.minwidth = 25, this.maxwidth = "auto", this.pinned = !1, this.visibleindex = -1, this.filterable = !0, this.filter = null, this.resizable = !0, this.draggable = !0, this.initeditor = null, this.createeditor = null, this.destroyeditor = null, this.geteditorvalue = null, this.validation = null, this.classname = "", this.cellclassname = "", this.aggregates = null, this.aggregatesrenderer = null, this.rendered = null, this.exportable = !0, this.nullable = !0, this.columngroup = null, this.columntype = "textbox", this.getcolumnproperties = function () { return { nullable: this.nullable, sortable: this.sortable, hidden: this.hidden, groupable: this.groupable, width: this.width, align: this.align, editable: this.editable, minwidth: this.minwidth, maxwidth: this.maxwidth, resizable: this.resizable, datafield: this.datafield, text: this.text, exportable: this.exportable, cellsalign: this.cellsalign, pinned: this.pinned, cellsformat: this.cellsformat, columntype: this.columntype, classname: this.classname, cellclassname: this.cellclassname, menu: this.menu } }, this.setproperty = function (e, t) { if (this[e]) { i = this[e]; this[e] = t, this.owner._columnPropertyChanged(this, e, t, i) } else if (this[e.toLowerCase()]) { var i = this[e.toLowerCase()]; this[e.toLowerCase()] = t, this.owner._columnPropertyChanged(this, e.toLowerCase(), t, i) } }, this._initfields = function (i) { if (null != i) { var s = this; if (e.jqx.hasProperty(i, "dataField") && (this.datafield = e.jqx.get(i, "dataField")), e.jqx.hasProperty(i, "displayField") ? this.displayfield = e.jqx.get(i, "displayField") : this.displayfield = this.datafield, e.jqx.hasProperty(i, "columnType") && (this.columntype = e.jqx.get(i, "columnType")), e.jqx.hasProperty(i, "validation") && (this.validation = e.jqx.get(i, "validation")), e.jqx.hasProperty(i, "text") && (this.text = e.jqx.get(i, "text")), e.jqx.hasProperty(i, "sortable") && (this.sortable = e.jqx.get(i, "sortable")), e.jqx.hasProperty(i, "hidden") && (this.hidden = e.jqx.get(i, "hidden")), e.jqx.hasProperty(i, "groupable") && (this.groupable = e.jqx.get(i, "groupable")), e.jqx.hasProperty(i, "renderer") && (this.renderer = e.jqx.get(i, "renderer")), e.jqx.hasProperty(i, "align") && (this.align = e.jqx.get(i, "align")), e.jqx.hasProperty(i, "cellsAlign") && (this.cellsalign = e.jqx.get(i, "cellsAlign")), e.jqx.hasProperty(i, "cellsFormat") && (this.cellsformat = e.jqx.get(i, "cellsFormat")), e.jqx.hasProperty(i, "width") && (this.width = e.jqx.get(i, "width")), e.jqx.hasProperty(i, "minWidth") && (this.minwidth = e.jqx.get(i, "minWidth")), e.jqx.hasProperty(i, "maxWidth") && (this.maxwidth = e.jqx.get(i, "maxWidth")), e.jqx.hasProperty(i, "cellsRenderer") && (this.cellsrenderer = e.jqx.get(i, "cellsRenderer")), e.jqx.hasProperty(i, "columnType") && (this.columntype = e.jqx.get(i, "columnType")), e.jqx.hasProperty(i, "pinned") && (this.pinned = e.jqx.get(i, "pinned")), e.jqx.hasProperty(i, "filterable") && (this.filterable = e.jqx.get(i, "filterable")), e.jqx.hasProperty(i, "filter") && (this.filter = e.jqx.get(i, "filter")), e.jqx.hasProperty(i, "resizable") && (this.resizable = e.jqx.get(i, "resizable")), e.jqx.hasProperty(i, "draggable") && (this.draggable = e.jqx.get(i, "draggable")), e.jqx.hasProperty(i, "editable") && (this.editable = e.jqx.get(i, "editable")), e.jqx.hasProperty(i, "initEditor") && (this.initeditor = e.jqx.get(i, "initEditor")), e.jqx.hasProperty(i, "createEditor") && (this.createeditor = e.jqx.get(i, "createEditor")), e.jqx.hasProperty(i, "destroyEditor") && (this.destroyeditor = e.jqx.get(i, "destroyEditor")), e.jqx.hasProperty(i, "getEditorValue") && (this.geteditorvalue = e.jqx.get(i, "getEditorValue")), e.jqx.hasProperty(i, "className") && (this.classname = e.jqx.get(i, "className")), e.jqx.hasProperty(i, "cellClassName") && (this.cellclassname = e.jqx.get(i, "cellClassName")), e.jqx.hasProperty(i, "aggregates") && (this.aggregates = e.jqx.get(i, "aggregates")), e.jqx.hasProperty(i, "aggregatesRenderer") && (this.aggregatesrenderer = e.jqx.get(i, "aggregatesRenderer")), e.jqx.hasProperty(i, "rendered") && (this.rendered = e.jqx.get(i, "rendered")), e.jqx.hasProperty(i, "exportable") && (this.exportable = e.jqx.get(i, "exportable")), e.jqx.hasProperty(i, "nullable") && (this.nullable = e.jqx.get(i, "nullable")), e.jqx.hasProperty(i, "columnGroup") && (this.columngroup = e.jqx.get(i, "columnGroup")), !i instanceof String && "string" != typeof i) for (var r in i) if (!s.hasOwnProperty(r) && !s.hasOwnProperty(r.toLowerCase())) throw t.host.remove(), new Error("jqxDataTable: Invalid property name - " + r + ".") } }, this._initfields(i), this } e.jqx.jqxWidget("jqxDataTable", "", {}), e.extend(e.jqx._jqxDataTable.prototype, { defineInstance: function () { this.altrows = !1, this.aggregatesheight = 34, this.autoshowloadelement = !0, this.autorowheight = !0, this.columnsheight = 30, this.columns = [], this.columngroups = null, this.columnsresize = !1, this.columnsreorder = !1, this.dataview = null, this.disabled = !1, this.editable = !1, this.editSettings = { saveOnPageChange: !0, saveOnBlur: !0, saveOnSelectionChange: !0, cancelOnEsc: !0, saveOnEnter: !0, editSingleCell: !1, editOnDoubleClick: !0, editOnF2: !0 }, this.enablehover = !0, this.enablebrowserselection = !1, this.filterheight = 30, this.filterable = !1, this.filtermode = "default", this.groupsrenderer = null, this.groups = new Array, this.headerZIndex = 59, this.height = null, this.handlekeyboardnavigation = null, this.indentwidth = 25, this.initrowdetails = !1, this.loadingerrormessage = "The data is still loading and you cannot set a property or call a method. You can do that once the data binding is completed. jqxDataTable raises the 'bindingComplete' event when the binding is completed.", this.localization = null, this.pagerheight = 28, this.pagesize = 10, this.pagesizeoptions = ["5", "10", "20"], this.pageable = !1, this.pagerposition = "bottom", this.pagermode = "default", this.pagerbuttonscount = 5, this.pagerrenderer = null, this.ready = null, this.rendertoolbar = null, this.rowdetails = !1, this.renderstatusbar = null, this.rendered = null, this.rendering = null, this.rtl = !1, this.sortable = !1, this.showtoolbar = !1, this.showstatusbar = !1, this.statusbarheight = 34, this.serverProcessing = !1, this.selectionmode = "multiplerows", this.scrollbarsize = e.jqx.utilities.scrollBarSize, this.touchscrollbarsize = e.jqx.utilities.touchScrollBarSize, this.showaggregates = !1, this.showheader = !0, this.maxHeight = 999999, this.maxWidth = 999999, this.autobind = !0, this.autokoupdates = !0, this.exportSettings = { columnsHeader: !0, hiddenColumns: !1, serverURL: null, characterSet: null, collapsedRecords: !1, recordsInView: !0, fileName: "jqxDataTable" }, this.source = { beforeprocessing: null, beforesend: null, loaderror: null, localdata: null, data: null, datatype: "array", datafields: [], url: "", root: "", record: "", id: "", totalrecords: 0, recordstartindex: 0, recordendindex: 0, loadallrecords: !0, sortcolumn: null, sortdirection: null, sort: null, filter: null, sortcomparer: null }, this.toolbarheight = 34, this.tableZIndex = 69, this._updating = !1, this.touchmode = "auto", this.width = null, this.that = this, this.incrementalSearch = !0, this.events = ["bindingComplete", "sort", "filter", "pageChanged", "pageSizeChanged", "rowClick", "rowDoubleClick", "cellValueChanged", "rowBeginEdit", "rowEndEdit", "rowSelect", "rowUnselect", "rowCheck", "rowUncheck", "columnResized", "columnReordered", "rowExpand", "rowCollapse", "cellBeginEdit", "cellEndEdit"] }, createInstance: function (t) { if (15 != e.jqx.utilities.scrollBarSize && (this.scrollbarsize = e.jqx.utilities.scrollBarSize), "table" == this.element.nodeName.toLowerCase()) { var i = this.host.find("tbody tr"), s = this.host.find("th"), r = new Array; 0 === s.length && (s = i[0], i.splice(0, 1)), this.localizestrings && (this.localizestrings(), null != this.localization && this.localizestrings(this.localization, !1)); for (var o = [], a = 0; a < i.length; a++) { for (var n = i[a], l = {}, h = 0; h < s.length; h++) { var d = e.trim(e(s[h]).text()); if (0 === a) { var c = { name: d }; if (this.columns[h] && this.columns[h].cellsFormat) { var u = this.columns[h].cellsFormat.toLowerCase(); -1 == u.indexOf("p") && -1 == u.indexOf("c") && -1 == u.indexOf("n") && -1 == u.indexOf("f") || (c.type = "number"), -1 == u.indexOf("d") && -1 == u.indexOf("m") && -1 == u.indexOf("y") && -1 == u.indexOf("h") && -1 == u.indexOf("m") && -1 == u.indexOf("s") && -1 == u.indexOf("t") || (c.type = "date") } r.push(c) } var p = e(n).find("td:eq(" + h + ")"); if (r[h].type) { var m = this.getvaluebytype(e.trim(p.text()), r[h]); l[d] = m } else l[d] = e.trim(p.text()) } o[o.length] = l } this.host.wrap("<div></div>"); var g = this.host.parent(), f = this.host.data(); f.jqxDataTable.host = g, f.jqxDataTable.element = g[0], this.host.parent()[0].id = this.element.id; try { this.host.parent()[0].style = this.element.style } catch (e) { } if (this.element = g[0], this.host = g, this.host.data(f), null == this.source || null == this.source._source) { var v = { dataFields: r, localdata: o, datatype: "array" }, x = new e.jqx.dataAdapter(v); this.source = x } } this.source && !this.source.dataBind && (this.source = new e.jqx.dataAdapter(this.source)); var w = this.source._source.datafields; if (w && w.length > 0 && (this._camelCase = void 0 !== this.source._source.dataFields, this.selectionmode = this.selectionmode.toLowerCase()), null == this.host.attr("tabindex") && this.host.attr("tabindex", "0"), this.host.attr("role", "grid"), this.host.attr("align", "left"), this.host.addClass(this.toTP("jqx-grid")), this.host.addClass(this.toTP("jqx-reset")), this.host.addClass(this.toTP("jqx-rc-all")), this.host.addClass(this.toTP("jqx-widget")), this.host.addClass(this.toTP("jqx-widget-content")), !this._testmodules()) { this.render(!0); var b = this; e.jqx.utilities.resize(this.host, function () { var t = e(window).width(), i = e(window).height(), s = b.host.width(), r = b.host.height(); b._lastHostWidth == s && b._lastHostHeight == r || b._updatesize(b._lastHostWidth != s, b._lastHostHeight != r), b._lastWidth = t, b._lastHeight = i, b._lastHostWidth = s, b._lastHostHeight = r }) } }, getvaluebytype: function (t, i) { var s = t; if (null == t) return t; if ("," == this.gridlocalization.decimalseparator && t.indexOf(this.gridlocalization.decimalseparator) >= 0 && (t = t.replace(this.gridlocalization.decimalseparator, ".")), t.indexOf(this.gridlocalization.currencysymbol) >= 0 && (t = t.replace(this.gridlocalization.currencysymbol, "")), t.indexOf(this.gridlocalization.percentagesymbol) >= 0 && (t = t.replace(this.gridlocalization.percentagesymbol, "")), e.isArray(t) && "array" != i.type) { for (var r = 0; r < t.length; r++) t[r] = this.getvaluebytype(t[r], i); return t } if ("date" == i.type) if ("NaN" == t) t = ""; else { var o = new Date(t); if ("string" == typeof t && i.format) { var a = e.jqx.dataFormat.parsedate(t, i.format); null != a && (o = a) } null == (t = ("NaN" == o.toString() || "Invalid Date" == o.toString()) && e.jqx.dataFormat ? e.jqx.dataFormat.tryparsedate(t) : o) && (t = s) } else if ("float" == i.type || "number" == i.type || "decimal" == i.type) if ("NaN" == t) t = ""; else { t = parseFloat(t); isNaN(t) && (t = s) } else if ("int" == i.type || "integer" == i.type) { var t = parseInt(t); isNaN(t) && (t = s) } else "bool" != i.type && "boolean" != i.type || (null != t && void 0 != t.toLowerCase && ("false" == t.toLowerCase() ? t = !1 : "true" == t.toLowerCase() && (t = !0)), t = 1 == t || (0 != t || "" === t) && ""); return t }, _builddataloadelement: function () { this.dataloadelement && this.dataloadelement.remove(), this.dataloadelement = e('<div style="z-index: 99998; background-color:rgba(50,50,50,0.1); overflow: hidden; position: absolute;"></div>'); var t = e('<div style="z-index: 99999; margin-left: -66px; left: 50%; top: 50%; margin-top: -24px; position: relative; width: 100px; height: 33px; padding: 5px; font-family: verdana; font-size: 12px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #f6f6f6; border-collapse: collapse;"><div style="float: left;"><div style="float: left; overflow: hidden; width: 32px; height: 32px;" class="jqx-grid-load"/><span style="margin-top: 10px; float: left; display: block; margin-left: 5px;" >' + this.gridlocalization.loadtext + "</span></div></div>"); if (t.addClass(this.toTP("jqx-rc-all")), this.dataloadelement.addClass(this.toTP("jqx-rc-all")), t.addClass(this.toTP("jqx-fill-state-normal")), this.dataloadelement.append(t), this.dataloadelement.width(this.width), this.dataloadelement.height(this.height), this.host.prepend(this.dataloadelement), "" != this.source._source.url) { var i = !1; ("auto" === this.height || null === this.height || this.autoheight) && 999999 == this.maxHeight && (i = !0), i ? (this.host.height(100), this.dataloadelement.height(100)) : (this.host.height(this.height), this.dataloadelement.height(this.height)); var s = !1; ("auto" === this.width || null === this.width || this.autoWidth) && (s = !0), s ? (this.host.width(300), this.dataloadelement.width(300)) : (this.host.width(this.width), this.dataloadelement.width(this.width)) } }, _measureElement: function (t) { var i = e("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>"); i.addClass(this.toTP("jqx-widget")), e(document.body).append(i), "cell" == t ? this._cellheight = i.height() : this._columnheight = i.height(), i.remove() }, _testmodules: function () { var t = "", i = this, s = function () { "" != t.length && (t += ",") }; if (this.host.jqxScrollBar || (s(), t += " jqxscrollbar.js"), this.host.jqxButton || (s(), t += " jqxbuttons.js"), e.jqx.dataAdapter || (s(), t += " jqxdata.js"), "" != t || this.editable || this.filterable || this.pageable) { var r = []; if ((this.filterable && "simple" != this.filtermode || "advanced" == this.pagermode && this.pageable) && function (e) { switch (e) { case "checkbox": i.host.jqxCheckBox || r.checkbox || (r.checkbox = !0, s(), t += " jqxcheckbox.js"); break; case "dropdownlist": i.host.jqxDropDownList || r.dropdownlist ? i.host.jqxListBox || r.listbox || (s(), r.listbox = !0, t += " jqxlistbox.js") : (s(), r.dropdownlist = !0, t += " jqxdropdownlist.js(requires: jqxlistbox.js)") } }("dropdownlist"), "" != t) throw new Error("jqxDataTable: Missing references to the following module(s): " + t) } return !1 }, focus: function () { try { this.wrapper.focus(); var e = this; setTimeout(function () { e.wrapper.focus() }, 10), this.focused = !0 } catch (e) { } }, hiddenParent: function () { return e.jqx.isHidden(this.host) }, _updatesize: function (t, i) { if (!this._loading) { var s = this, r = s.host.width(), o = s.host.height(); s._oldWidth || (s._oldWidth = r), s._oldHeight || (s._oldHeight = o), void 0 != s._resizeTimer && (clearTimeout(s._resizeTimer), s._resizeTimer = null); var a = (e.jqx.browser.msie, 30); s._resizeTimer = setTimeout(function () { clearTimeout(s._resizeTimer), s.resizingGrid = !0, e.jqx.isHidden(s.host) || (s._updatecolumnwidths(), s.refresh(), s._oldWidth = r, s._oldHeight = o, s.resizingGrid = !1) }, a) } }, resize: function (e, t) { void 0 != e && (this.width = e), void 0 != t && (this.height = t), this._updatecolumnwidths(), this.refresh() }, isTouchDevice: function () { if (void 0 != this.touchDevice) return this.touchDevice; var t = e.jqx.mobile.isTouchDevice(); return this.touchDevice = t, 1 == this.touchmode ? (t = !0, e.jqx.mobile.setMobileSimulator(this.element), this.touchDevice = t) : 0 == this.touchmode && (t = !1), t && (this.touchDevice = !0, this.host.addClass(this.toThemeProperty("jqx-touch")), this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch")), this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch")), this.scrollbarsize = this.touchscrollbarsize), t }, toTP: function (e) { return this.toThemeProperty(e) }, localizestrings: function (t, i) { if (this._cellscache = new Array, e.jqx.dataFormat && e.jqx.dataFormat.cleardatescache(), this._loading) throw new Error("jqxDataTable: " + this.loadingerrormessage); if (null != t) { for (var s in t) s.toLowerCase() !== s && (t[s.toLowerCase()] = t[s]); t.pagergotopagestring && (this.gridlocalization.pagergotopagestring = t.pagergotopagestring), t.pagershowrowsstring && (this.gridlocalization.pagershowrowsstring = t.pagershowrowsstring), t.pagerrangestring && (this.gridlocalization.pagerrangestring = t.pagerrangestring), t.pagernextbuttonstring && (this.gridlocalization.pagernextbuttonstring = t.pagernextbuttonstring), t.pagerpreviousbuttonstring && (this.gridlocalization.pagerpreviousbuttonstring = t.pagerpreviousbuttonstring), t.pagerfirstbuttonstring && (this.gridlocalization.pagerfirstbuttonstring = t.pagerfirstbuttonstring), t.pagerlastbuttonstring && (this.gridlocalization.pagerlastbuttonstring = t.pagerlastbuttonstring), t.toppagerstring && (this.gridlocalization.toppagerstring = t.toppagerstring), t.firstDay && (this.gridlocalization.firstDay = t.firstDay), t.days && (this.gridlocalization.days = t.days), t.months && (this.gridlocalization.months = t.months), t.AM && (this.gridlocalization.AM = t.AM), t.PM && (this.gridlocalization.PM = t.PM), t.patterns && (this.gridlocalization.patterns = t.patterns), t.percentsymbol && (this.gridlocalization.percentsymbol = t.percentsymbol), t.currencysymbol && (this.gridlocalization.currencysymbol = t.currencysymbol), t.currencysymbolposition && (this.gridlocalization.currencysymbolposition = t.currencysymbolposition), t.decimalseparator && (this.gridlocalization.decimalseparator = t.decimalseparator), t.thousandsseparator && (this.gridlocalization.thousandsseparator = t.thousandsseparator), t.filterapplystring && (this.gridlocalization.filterapplystring = t.filterapplystring), t.filteraddnew && (this.gridlocalization.filteraddnew = t.filteraddnew), t.filtercancelstring && (this.gridlocalization.filtercancelstring = t.filtercancelstring), t.filterclearstring && (this.gridlocalization.filterclearstring = t.filterclearstring), t.filterstring && (this.gridlocalization.filterstring = t.filterstring), t.filterstringcomparisonoperators && (this.gridlocalization.filterstringcomparisonoperators = t.filterstringcomparisonoperators), t.filternumericcomparisonoperators && (this.gridlocalization.filternumericcomparisonoperators = t.filternumericcomparisonoperators), t.filterdatecomparisonoperators && (this.gridlocalization.filterdatecomparisonoperators = t.filterdatecomparisonoperators), t.filterbooleancomparisonoperators && (this.gridlocalization.filterbooleancomparisonoperators = t.filterbooleancomparisonoperators), t.emptydatastring && (this.gridlocalization.emptydatastring = t.emptydatastring), t.filterselectstring && (this.gridlocalization.filterselectstring = t.filterselectstring), t.todaystring && (this.gridlocalization.todaystring = t.todaystring), t.clearstring && (this.gridlocalization.clearstring = t.clearstring), t.validationstring && (this.gridlocalization.validationstring = t.validationstring), t.loadtext && (this.gridlocalization.loadtext = t.loadtext), t.filtersearchstring && (this.gridlocalization.filtersearchstring = t.filtersearchstring), t.loadingerrormessage && (this.gridlocalization.loadingerrormessage = t.loadingerrormessage, this.loadingerrormessage = t.loadingerrormessage), !1 !== i && (this._builddataloadelement(), e(this.dataloadelement).css("visibility", "hidden"), e(this.dataloadelement).css("display", "none")) } else this.gridlocalization = { "/": "/", ":": ":", firstDay: 0, days: { names: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], namesAbbr: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], namesShort: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"] }, months: { names: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", ""], namesAbbr: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", ""] }, AM: ["AM", "am", "AM"], PM: ["PM", "pm", "PM"], eras: [{ name: "A.D.", start: null, offset: 0 }], twoDigitYearMax: 2029, patterns: { d: "M/d/yyyy", D: "dddd, MMMM dd, yyyy", t: "h:mm tt", T: "h:mm:ss tt", f: "dddd, MMMM dd, yyyy h:mm tt", F: "dddd, MMMM dd, yyyy h:mm:ss tt", M: "MMMM dd", Y: "yyyy MMMM", S: "yyyy'-'MM'-'dd'T'HH':'mm':'ss", ISO: "yyyy-MM-dd hh:mm:ss", ISO2: "yyyy-MM-dd HH:mm:ss", d1: "dd.MM.yyyy", d2: "dd-MM-yyyy", d3: "dd-MMMM-yyyy", d4: "dd-MM-yy", d5: "H:mm", d6: "HH:mm", d7: "HH:mm tt", d8: "dd/MMMM/yyyy", d9: "MMMM-dd", d10: "MM-dd", d11: "MM-dd-yyyy" }, percentsymbol: "%", currencysymbol: "$", currencysymbolposition: "before", decimalseparator: ".", thousandsseparator: ",", pagergotopagestring: "Go to page:", pagershowrowsstring: "Show rows:", pagerrangestring: " of ", pagerpreviousbuttonstring: "previous", pagernextbuttonstring: "next", pagerfirstbuttonstring: "first", pagerlastbuttonstring: "last", filterapplystring: "Apply", filtercancelstring: "Cancel", filterclearstring: "Clear Filter", filterstring: "advanced", filtersearchstring: "Search:", filterstringcomparisonoperators: ["empty", "not empty", "contains", "contains(match case)", "does not contain", "does not contain(match case)", "starts with", "starts with(match case)", "ends with", "ends with(match case)", "equal", "equal(match case)", "null", "not null"], filternumericcomparisonoperators: ["equal", "not equal", "less than", "less than or equal", "greater than", "greater than or equal", "null", "not null"], filterdatecomparisonoperators: ["equal", "not equal", "less than", "less than or equal", "greater than", "greater than or equal", "null", "not null"], filterbooleancomparisonoperators: ["equal", "not equal"], validationstring: "Entered value is not valid", emptydatastring: "No data to display", filterselectstring: "Select Filter", loadtext: "Loading...", clearstring: "Clear", todaystring: "Today", loadingerrormessage: "The data is still loading and you cannot set a property or call a method. You can do that once the data binding is completed. jqxDataTable raises the 'bindingComplete' event when the binding is completed." } }, _updateScrollbars: function (e) { var t = !1; ("auto" === this.width || null === this.width || this.autowidth) && 999999 == this.maxWidth && (t = !0); var i = parseInt(this.scrollbarsize), s = this.table ? this.table.height() : 0, r = 0, o = "inherit", a = this.vScrollBar[0].style.visibility; this.hScrollBar[0].style.visibility; if (e) n = e; else var n = this.host.height(); this.columngroups ? n -= this.showheader ? this.columnsheader.height() : 0 : n -= this.showheader ? this.columnsheight : 0, this.filterable && (n -= this.filter.height()), this.pageable && (n -= this.pagerheight, "both" === this.pagerposition && (n -= this.pagerheight)), this.showtoolbar && (n -= this.toolbarheight), this.showstatusbar && (n -= this.statusbarheight), this.showaggregates && (n -= this.aggregatesheight); var l = !1; ("auto" === this.height || null === this.height || this.autoheight) && 999999 == this.maxHeight && (l = !0), !l && s > n && (this.source.records.length > 0 || this.source.hierarchy.length > 0) ? (this.vScrollBar[0].style.visibility = o, r = 4 + parseInt(i), this.vScrollBar.jqxScrollBar({ max: s - n })) : this.vScrollBar[0].style.visibility = "hidden", a != this.vScrollBar[0].style.visibility && this._updatecolumnwidths(); var h = this.table ? this.table.width() : 0; h > 3 && (h -= 3); var d = parseInt(this.host.css("border-left-width")) + parseInt(this.host.css("border-right-width")), c = d + this.host.width() - r; if (h > c && !t) { if (this.hScrollBar[0].style.visibility = o, this.hScrollBar.jqxScrollBar({ max: h - c }), r = 4 + parseInt(i), !l) { if (s > n - r + 4 && (this.source.records.length > 0 || this.source.hierarchy.length > 0)) { this.hScrollBar.jqxScrollBar({ max: d + h - c }); var u = "hidden" === this.vScrollBar[0].style.visibility; this.vScrollBar[0].style.visibility = o, this._updatecolumnwidths(), u && this.hScrollBar.jqxScrollBar({ max: h - c + r + d }) } this.vScrollBar.jqxScrollBar({ max: s - n + r }) } } else this.hScrollBar[0].style.visibility = "hidden"; 0 === this.source.records.length && this.source.hierarchy && 0 === this.source.hierarchy.length && (this.vScrollBar[0].style.visibility = "hidden", this.bottomRight[0].style.visibility = "hidden"), "hidden" == this.vScrollBar[0].style.visibility && 0 != this.vScrollInstance.value && this.vScrollInstance.setPosition(0) }, _measureElementWidth: function (t) { var i = e("<span style='visibility: hidden; white-space: nowrap;'>" + t + "</span>"); i.addClass(this.toTP("jqx-widget")), i.addClass(this.toTP("jqx-grid")), i.addClass(this.toTP("jqx-grid-column-header")), i.addClass(this.toTP("jqx-widget-header")), e(document.body).append(i); var s = i.outerWidth() + 20; return i.remove(), s }, _arrangeAutoHeight: function (e) { if (e || (e = 0), "auto" === this.height || null === this.height || this.autoheight) { var t = this.table.height(), i = 0; if (this.columngroups ? i += this.showheader ? this.columnsheader.height() : -1 : i += this.showheader ? this.columnsheight : -1, i += this.showstatusbar ? this.statusbarheight : 0, i += this.showaggregates ? this.aggregatesheight : 0, i += this.showtoolbar ? this.toolbarheight : 0, i += this.pageable ? this.pagerheight : 0, "both" === this.pagerposition && (i += this.pageable ? this.pagerheight : 0), i += t, this.filterable) { var s = this.filter.find(".filterrow"), r = 1; this.filter.find(".filterrow-hidden").length > 0 && (r = 0), i += this.filterheight - 1 + this.filterheight * s.length * r } return i + e > this.maxHeight ? this.host.height(this.maxHeight) : this.host.height(i + e), !0 } return !1 }, _arrangeAutoWidth: function (e) { if (e || (e = 0), "auto" === this.width || null === this.width || this.autowidth) { for (var t = 0, i = 0; i < this.columns.records.length; i++) { var s = this.columns.records[i].width; this.columns.records[i].hidden || (t += "auto" == s ? s = this._measureElementWidth(this.columns.records[i].text) : s) } return width = t, width + e > this.maxWidth ? this.host.width(this.maxWidth) : this.host.width(width + e), !0 } return !1 }, _measureTopAndHeight: function () { var e = this.host.height(), t = 0; if (this.showtoolbar && (t += this.toolbarheight, e -= parseInt(this.toolbarheight)), this.filterable) { var i = this.filter.find(".filterrow"), s = 1; this.filter.find(".filterrow-hidden").length > 0 && (s = 0), t += this.filterheight, e -= parseInt(this.filterheight); var r = 1 == s ? i.length : 0; t += this.filterheight * r, e -= this.filterheight * r } return this.pageable && "bottom" != this.pagerposition && (t += parseInt(this.pagerheight) + 1, e > this.pagerheight && "both" === this.pagerposition && (e -= parseInt(this.pagerheight))), { top: t, height: e } }, _arrange: function () { if (this.table) { this._arrangeAutoHeight(), this._arrangeAutoWidth(); var e = this.host.width(), t = this.host.height(), i = t; this.pageable ? "bottom" === this.pagerposition ? (this.toppager[0].style.visibility = "hidden", this.pager[0].style.visibility = "inherit") : "both" === this.pagerposition ? (this.toppager[0].style.visibility = "inherit", this.pager[0].style.visibility = "inherit") : "top" === this.pagerposition && (this.toppager[0].style.visibility = "inherit", this.pager[0].style.visibility = "hidden") : (this.toppager[0].style.visibility = "hidden", this.pager[0].style.visibility = "hidden"); var s = 0; if (this.showtoolbar ? (this.toolbar.width(e), this.toolbar.height(this.toolbarheight - 1), this.toolbar.css("top", 0), s += this.toolbarheight, t -= parseInt(this.toolbarheight)) : this.toolbar[0].style.height = "0px", this.filterable) { this.filter.width(e), this.filter.css("top", s); var r = this.filter.find(".filterrow"), o = 1; this.filter.find(".filterrow-hidden").length > 0 && (o = 0), this.filter.height(this.filterheight - 1 + this.filterheight * r.length * o), s += this.filterheight, t -= parseInt(this.filterheight); var a = 1 == o ? r.length : 0; s += this.filterheight * a, t -= this.filterheight * a } if (this.showstatusbar ? (this.statusbar.width(this.table ? Math.max(e, this.table.width()) : e), this.statusbar.height(this.statusbarheight - 1)) : this.statusbar[0].style.height = "0px", this.showaggregates ? this.aggregates.height(this.aggregatesheight - 1) : this.aggregates[0].style.height = "0px", this.pageable && "bottom" != this.pagerposition) this.toppager[0].style.width = e + "px", this.toppager[0].style.height = parseInt(this.pagerheight) + "px", this.toppager[0].style.top = parseInt(s) + "px", s += parseInt(this.pagerheight) + 1, t > this.pagerheight && (t -= parseInt(this.pagerheight)); else { this.toppager[0].style.width != e + "px" && (this.toppager[0].style.width = parseInt(e) + "px"), this.toppager[0].style.height != this.pagerheight + "px" && (this.toppager[0].style.height = parseInt(this.pagerheight) + "px"), this.toppager[0].style.top != s + "px" && (this.toppager[0].style.top = s + "px"); var n = s + ("bottom" != this.pagerposition ? this.pagerheight : 0) + "px"; this.content[0].style.top != n && (this.content[0].style.top = s + this.pagerheight + "px") } this._updateScrollbars(i); var l = parseInt(this.scrollbarsize), h = 2, d = 0; if ("hidden" != this.vScrollBar[0].style.visibility && (d = l + 4), "hidden" != this.hScrollBar[0].style.visibility && (h = l + 4 + 2), this.showaggregates && ("hidden" === this.hScrollBar[0].style.visibility ? this.aggregates.width(this.table ? Math.max(e, this.table.width()) + 4 : e) : this.aggregates.width("auto")), "hidden" != this.vScrollBar[0].style.visibility || "hidden" != this.hScrollBar[0].style.visibility) { var c = this._arrangeAutoHeight(h - 2), u = this._arrangeAutoWidth(d + 1); if (c || u) { e = this.host.width(); this.toppager[0].style.width = parseInt(e) + "px", this.toolbar[0].style.width = parseInt(e) + "px", this.statusbar[0].style.width = parseInt(e) + "px", this.filter[0].style.width = parseInt(e) + "px" } if (c) { var p = this._measureTopAndHeight(); s = p.top, t = p.height } } var m = 0; this.pageable && (m = this.pagerheight, "top" != this.pagerposition && (h += this.pagerheight)), this.showaggregates && (h += this.aggregatesheight, m += this.aggregatesheight), this.showstatusbar && (h += this.statusbarheight, m += this.statusbarheight), this.hScrollBar[0].style.height != l + "px" && (this.hScrollBar[0].style.height = parseInt(l) + "px"), this.hScrollBar[0].style.top == s + t - 4 - l - m + "px" && "0px" == this.hScrollBar[0].style.left || (this.hScrollBar[0].style.top = s + t - 4 - l - m - 1 + "px", this.hScrollBar[0].style.left = "0px"); var g = this.hScrollBar[0].style.width, f = !1, v = !1; 0 == d ? g != e - 2 + "px" && (this.hScrollBar[0].style.width = e - 2 + "px", f = !0) : g != e - l - 4 + "px" && (this.hScrollBar[0].style.width = e - l - 4 + "px", f = !0), this.vScrollBar[0].style.width != l + "px" && (this.vScrollBar[0].style.width = l + "px", v = !0), this.vScrollBar[0].style.height != parseInt(t) - h + "px" && (this.vScrollBar[0].style.height = parseInt(t) - h + "px", v = !0), this.vScrollBar[0].style.left == parseInt(e) - parseInt(l) - 4 + "px" && this.vScrollBar[0].style.top == s + "px" || (this.vScrollBar[0].style.top = s + "px", this.vScrollBar[0].style.left = parseInt(e) - parseInt(l) - 4 + "px"), this.rtl && (this.vScrollBar.css({ left: "0px", top: s }), "hidden" != this.vScrollBar.css("visibility") && this.hScrollBar.css({ left: l + 2 })); var x = this.vScrollInstance; x.disabled = this.disabled; var w = this.hScrollInstance; w.disabled = this.disabled, f && w.refresh(), v && x.refresh(); var b = function (e) { "hidden" != e.vScrollBar[0].style.visibility && "hidden" != e.hScrollBar[0].style.visibility ? (e.bottomRight[0].style.visibility = "inherit", e.bottomRight[0].style.left = 1 + parseInt(e.vScrollBar.css("left")) + "px", e.bottomRight[0].style.top = parseInt(e.hScrollBar.css("top")) + "px", e.rtl && e.bottomRight.css("left", "0px"), e.bottomRight[0].style.width = parseInt(l) + 3 + "px", e.bottomRight[0].style.height = parseInt(l) + 4 + "px", e.showaggregates && (e.bottomRight.css("z-index", 99), e.bottomRight.height(parseInt(l) + 4 + e.aggregatesheight), e.bottomRight.css({ top: parseInt(e.hScrollBar.css("top")) - e.aggregatesheight }))) : e.bottomRight[0].style.visibility = "hidden" }; if (b(this), this.content[0].style.width != e - d + "px" && (this.content[0].style.width = e - d + "px"), this.content[0].style.height != t - h + 3 + "px" && (this.content[0].style.height = t - h + 3 + "px"), this.content[0].style.top != s + "px" && (this.content[0].style.top = parseInt(s) + "px"), this.rtl && (this.content.css("left", d), this.table)) { var _ = this.table.width(); _ < e - d && this.content.css("left", e - _ + 2) } this.showaggregates && (this.aggregates.css("top", s + t - this.aggregatesheight - (this.pageable ? this.pagerheight : 0) - (this.showstatusbar ? this.statusbarheight + 1 : 0)), this.rtl && this.aggregates.css("left", "0px"), "hidden" != this.hScrollBar.css("visibility") && (this.hScrollBar.css({ top: s + t - 4 - l - m + this.aggregatesheight + "px" }), this.aggregates.css("top", 1 + s + t - l - 5 - this.aggregatesheight - (this.pageable ? this.pagerheight : 0) - (this.showstatusbar ? this.statusbarheight + 1 : 0))), b(this)), this.showstatusbar && (this.statusbar.css("top", s + t - this.statusbarheight - (this.pageable ? this.pagerheight : 0)), this.rtl && ("hidden" == this.hScrollBar.css("visibility") ? this.statusbar.css("left", this.content.css("left")) : this.statusbar.css("left", "0px"))), this.pageable ? (this.pager[0].style.width = e + "px", this.pager[0].style.height = this.pagerheight + "px", this.pager[0].style.top = parseInt(s) + parseInt(t) - parseInt(this.pagerheight) - 1 + "px") : this.pager[0].style.height = "0px", this.vScrollBar[0].style.zIndex = this.tableZIndex + this.headerZIndex + 10 + this.columns.records.length, this.hScrollBar[0].style.zIndex = this.tableZIndex + this.headerZIndex + 10 + this.columns.records.length, e != parseInt(this.dataloadelement[0].style.width) && (this.dataloadelement[0].style.width = this.element.style.width), t != parseInt(this.dataloadelement[0].style.height) && (this.dataloadelement[0].style.height = this.element.style.height), this._hostwidth = e } }, scrolloffset: function (e, t) { if (0 == arguments.length || null != e && "object" == typeof e && !e.top) return { left: this.hScrollBar.jqxScrollBar("value"), top: this.vScrollBar.jqxScrollBar("value") }; if (null != e && "object" == typeof e) var t = e.left, e = e.top; null != e && null != t && void 0 != e && void 0 != t && (this.vScrollBar.jqxScrollBar("setPosition", e), this.hScrollBar.jqxScrollBar("setPosition", t)) }, scrollleft: function (e) { null != e && void 0 != e && "hidden" != this.hScrollBar.css("visibility") && this.hScrollBar.jqxScrollBar("setPosition", e) }, scrolltop: function (e) { null != e && void 0 != e && "hidden" != this.vScrollBar.css("visibility") && this.vScrollBar.jqxScrollBar("setPosition", e) }, beginupdate: function () { this._updating = !0, this._datachanged = !1 }, endupdate: function (e) { this._updating = !1, !1 !== e && (this._rendercolumnheaders(), this.refresh()) }, updating: function () { return this._updating }, databind: function (t, i, s) { if (!0 !== this.loadingstate) { "block" == this.host.css("display") && (this.autoshowloadelement ? (e(this.dataloadelement).css("visibility", "visible"), e(this.dataloadelement).css("display", "block"), this.dataloadelement.width(this.host.width()), this.dataloadelement.height(this.host.height())) : (e(this.dataloadelement).css("visibility", "hidden"), e(this.dataloadelement).css("display", "none"))); var r = this; null == t && (t = {}), void 0 != t.sortcomparer && null != t.sortcomparer || (t.sortcomparer = null), void 0 != t.filter && null != t.filter || (t.filter = null), void 0 != t.sort && null != t.sort || (t.sort = null), void 0 != t.data && null != t.data || (t.data = null); if (null != t && (void 0 != t._source ? t._source.url : t.url), this.dataview = this.dataview || new e.jqx.dataView, this.dataview.pageable = this.pageable, this.dataview.grid = this, !r.initializedcall) { if (t._source && this.sortable && (void 0 != t._source.sortcolumn && (this.sortcolumn = t._source.sortcolumn, this.source.sortcolumn = this.sortcolumn, this.dataview.sortfield = t._source.sortcolumn, t._source.sortcolumn = null), void 0 != t._source.sortdirection)) { this.dataview.sortfielddirection = t._source.sortdirection; var o = t._source.sortdirection; if ("a" == o || "asc" == o || "ascending" == o || 1 == o) a = !0; else var a = !1; this.sortdirection = null != o ? { ascending: a, descending: !a } : { ascending: !1, descending: !1 } } this.pageable && t._source && (void 0 != t._source.pagenum && (this.dataview.pagenum = t._source.pagenum), void 0 != t._source.pagesize ? (this.pagesize = t._source.pagesize, this.dataview.pagesize = t._source.pagesize) : (this.dataview.pagesize = t._source.pagesize, void 0 == this.dataview.pagesize && (this.dataview.pagesize = this.pagesize))), this.sortable && (t.sortcolumn && (this.dataview.sortfield = t.sortcolumn), t.sortdirection && (this.dataview.sortfielddirection = t.sortdirection)) } this._loading = !0, this.dataview.update = function (t) { r._loading = !1, r.rowsByKey = new Array; var o = r.source._source.datafields; if (r.groups && r.groups.length > 0) { var a = Object.prototype.toString, n = r.groups[0]; if (Object.prototype.toString = "function" == typeof n ? n : function () { return this[n] }, !r.source.records.sort) { var l = new Array, h = 0; e.each(data, function () { l[startindex + h++] = this }), data = l } r.source.records.sort(function (t, i) { if (void 0 === t && (t = null), void 0 === i && (i = null), null === t && null === i) return 0; if (null === t && null !== i) return -1; if (null !== t && null === i) return 1; if (t = t.toString(), i = i.toString(), e.jqx.dataFormat.isNumber(t) && e.jqx.dataFormat.isNumber(i)) return t < i ? -1 : t > i ? 1 : 0; if (e.jqx.dataFormat.isDate(t) && e.jqx.dataFormat.isDate(i)) return t < i ? -1 : t > i ? 1 : 0; e.jqx.dataFormat.isNumber(t) || e.jqx.dataFormat.isNumber(i) || (t = String(t).toLowerCase(), i = String(i).toLowerCase()); try { if (t < i) return -1; if (t > i) return 1 } catch (e) { } return 0 }), Object.prototype.toString = a } for (var d = 0; d < r.source.records.length; d++) { var c = r.source.records[d]; if (r.rowsByKey[c.uid] = c, c.records && c.records.length > 0) { var u = function (e) { for (var t = 0; t < e.length; t++) e[t] && (r.rowsByKey[e[t].uid] = e[t], e[t].records && e[t].records.length > 0 && u(e[t].records)) }; u(c.records) } if (0 === d) { var p = !1; if (o) for (g = 0; g < o.length; g++) if (!o[g].type) { p = !0, o[g].type = "string"; var m = c[o[g].name]; if (void 0 == m) continue; !0 !== m && !1 !== m || (o[g].type = "boolean"), (null != m && m.toString().indexOf(r.gridlocalization.currencysymbol) > -1 || m.toString().indexOf(r.gridlocalization.percentsymbol) > -1) && (m = new Number(r._toNumber(m.toString())), isNaN(m) || (o[g].type = "number")), (e.jqx.dataFormat.isNumber(m) || !isNaN(parseFloat(m)) && isFinite(m)) && (o[g].type = "number"), e.jqx.dataFormat.isDate(m) && (o[g].type = "date") } if (p) for (var g = 0; g < o.length; g++) { var f = r.source.getvaluebytype(c[o[g].name], o[g]); if (null != f && "number" == o[g].type) { var v = f; v = new Number(r._toNumber(v.toString())), isNaN(v) || (f = v) } c[o[g].name] = f } } } if ("pager" === i || "filter" === i || "sort" === i ? r.refresh() : r._render(), r.autoshowloadelement && !r._loading && (e(r.dataloadelement).css("visibility", "hidden"), e(r.dataloadelement).css("display", "none")), r.pageable && (r.disabled || r.pagernexttop && (r.pagerfirsttop.jqxButton({ disabled: !1 }), r.pagerfirstbottom.jqxButton({ disabled: !1 }), r.pagerlasttop.jqxButton({ disabled: !1 }), r.pagerlastbottom.jqxButton({ disabled: !1 }), r.pagernexttop.jqxButton({ disabled: !1 }), r.pagerprevioustop.jqxButton({ disabled: !1 }), r.pagershowrowscombotop.jqxDropDownList && "advanced" == r.pagermode && (r.pagershowrowscombotop.jqxDropDownList({ disabled: !1 }), r.pagershowrowscombobottom.jqxDropDownList({ disabled: !1 })), r.pagernextbottom.jqxButton({ disabled: !1 }), r.pagerpreviousbottom.jqxButton({ disabled: !1 }))), r._updateTouchScrolling(), r._raiseEvent("bindingComplete"), s && s(), !r.initializedcall && (r.initializedcall = !0, r.isInitialized = !0, r.ready && r.ready(), (null != r.width && -1 != r.width.toString().indexOf("%") || null != r.height && -1 != r.height.toString().indexOf("%")) && r._updatesize(!0), "hidden" == r.host.css("visibility"))) { e.jqx.browser.msie && e.jqx.browser.version; "visible" == r.vScrollBar.css("visibility") && r.vScrollBar.css("visibility", "inherit"), "visible" == r.hScrollBar.css("visibility") && r.hScrollBar.css("visibility", "inherit"), r._intervalTimer = setInterval(function () { "visible" == r.host.css("visibility") && (r._updatesize(!0), clearInterval(r._intervalTimer)) }, 100) } }, this.dataview.databind(t) } }, _raiseEvent: function (e, t) { void 0 == t && (t = { owner: null }); var i = e; args = t, args.owner = this; var s = new jQuery.Event(i); s.owner = this, s.args = args; var r = this.host.trigger(s); return t = s.args, r }, ensurecolumnvisible: function (e) { for (var t = 0, i = 0, s = 0; s < this.columns.records.length; s++) { if (this.columns.records[s].datafield == e) { t += this.columns.records[s].width, i = this.columns.records[s].width; break } t += this.columns.records[s].width } if ("hidden" != this.hScrollBar.css("visibility")) { var r = this.hScrollBar.jqxScrollBar("value"), o = r + this.host.width(); r > t - i ? this.hScrollBar.jqxScrollBar("setPosition", t - i) : t > o && this.hScrollBar.jqxScrollBar("setPosition", r + t - o) } }, ensurerowvisiblebykey: function (t) { if ("hidden" === this.vScrollBar[0].style.visibility) return !1; var i = this._getuirow(t); if (i) { var s = this.vScrollBar.jqxScrollBar("value"), r = this.host.height(), o = 0; this.columngroups ? o += this.showheader ? this.columnsheader.height() : 0 : o += this.showheader ? this.columnsheight : 0, this.filterable && (o += this.filter.height()), this.pageable && "top" === this.pagerposition && (o += this.pagerheight), this.showtoolbar && (o += this.toolbarheight), r -= o, this.pageable && "top" !== this.pagerposition && (r -= this.pagerheight), this.showstatusbar && (r -= this.statusbarheightt), this.showaggregates && (r -= this.aggregatesheight), "hidden" != this.hScrollBar.css("visibility") && (r -= 20); var a = this.host.coord().top + o, n = s, l = r + n, h = i.coord().top + s - a, d = (h = Math.round(h)) + i.outerHeight(); if (d = Math.round(d), 0 === Math.round(i.position().top)) return this.vScrollBar.jqxScrollBar("setPosition", 0); var c = e(this._table.children()[1]).children().length - 1, u = this._getuikey(c), p = this._getuirow(u); if (p && p[0] === i[0]) return this.vScrollBar.jqxScrollBar("setPosition", this.vScrollBar.jqxScrollBar("max")); if (h < n) { var m = h - i.height(); return m < 0 && (m = 0), this.vScrollBar.jqxScrollBar("setPosition", m) } return d > l ? this.vScrollBar.jqxScrollBar("setPosition", 4 + d - r) : void 0 } }, ensurerowvisible: function (e) { var t = this._getkey(e); this.ensurerowvisiblebykey(t) }, getcolumn: function (t) { var i = null; return this.columns.records && e.each(this.columns.records, function () { if (this.datafield == t || this.displayfield == t) return i = this, !1 }), i }, _setcolumnproperty: function (e, t, i) { if (null == e || null == t || null == i) return null; t = t.toLowerCase(); var s = this.getcolumn(e); if (null != s) { s[t]; s[t] = i; var r = this.getcolumn(e); switch (null != r && (r[t] = i), t) { case "filteritems": case "text": case "editable": case "resizable": case "draggable": case "hidden": case "hideable": case "renderer": case "cellsrenderer": case "align": case "aggregates": case "cellsalign": case "cellsformat": case "pinned": case "contenttype": case "filterable": case "groupable": case "cellclass": case "cellclassname": case "class": case "width": case "minwidth": case "maxwidth": "align" == t ? (this._rendercolumnheaders(), this.refresh()) : "hidden" == t || "pinned" == t || "resizable" == t || "renderer" == t ? (this._rendercolumnheaders(), this.refresh()) : "width" == t || "maxwidth" == t || "minwidth" == t ? (s._width = null, s._percentagewidth = null, this._updatecolumnwidths(), this.refresh()) : this.refresh() } } }, getcolumnproperty: function (e, t) { return null == e || null == t ? null : (t = t.toLowerCase(), this.getcolumn(e)[t]) }, setcolumnproperty: function (e, t, i) { this._setcolumnproperty(e, t, i) }, hidecolumn: function (e) { this._setcolumnproperty(e, "hidden", !0) }, showcolumn: function (e) { this._setcolumnproperty(e, "hidden", !1) }, updatebounddata: function (e, t) { this.databind(this.source, e, t) }, refresh: function (t) { if (1 != t) { if (e.jqx.isHidden(this.host)) return; this.vScrollInstance.setPosition(0), this._renderrows(), this.updatepagerdetails(), this._arrange(), this._renderhorizontalscroll(), this._showicons(), this.showaggregates && this._updateaggregates(), this._updateTouchScrolling() } }, _updateTouchScrolling: function () { var t = this.that; if (t.isTouchDevice()) { var i = e.jqx.mobile.getTouchEventName("touchstart"), s = e.jqx.mobile.getTouchEventName("touchend"), r = e.jqx.mobile.getTouchEventName("touchmove"); t.gridcontent && (t.removeHandler(t.gridcontent, i + ".touchScroll"), t.removeHandler(t.gridcontent, r + ".touchScroll"), t.removeHandler(t.gridcontent, s + ".touchScroll"), t.removeHandler(t.gridcontent, "touchcancel.touchScroll"), e.jqx.mobile.touchScroll(t.gridcontent[0], Math.max(t.vScrollInstance.max, t.hScrollInstance.max), function (e, i) { if ("hidden" != t.vScrollBar.css("visibility")) { s = t.vScrollInstance.value; t.vScrollInstance.setPosition(s + i) } if ("hidden" != t.hScrollBar.css("visibility")) { var s = t.hScrollInstance.value; t.hScrollInstance.setPosition(s + e) } t.scrolled = new Date, t.vScrollInstance.thumbCapture = !0 }, this.element.id, this.hScrollBar, this.vScrollBar)) } }, _showicons: function () { if (this.table) for (var t = 0; t < this.columns.records.length; t++) { var i = this.columns.records[t]; if (e(i.filtericon).hide(), e(i.sortasc).hide(), e(i.sortdesc).hide(), "simple" !== this.filtermode) for (var s = 0; s < this.dataview.filters.length; s++) if (this.dataview.filters[s].datafield === i.displayfield) { e(i.filtericon).show(); break } if (null !== this.sortcolumn && this.sortcolumn === i.displayfield && null != this.sortdirection && (this.sortdirection.ascending ? e(i.sortasc).show() : e(i.sortdesc).show()), "left" != i.align && "center" != i.align && !this.rtl || this.rtl && "right" != i.align && "center" != i.align) { var r = e.jqx.isHidden(e(i.filtericon)) ? 0 : 16; r += e.jqx.isHidden(e(i.sortasc)) ? 0 : 16, r += e.jqx.isHidden(e(i.sortdesc)) ? 0 : 16; var o = e(e(e(i.element).children()[0]).children()[0]); this.rtl ? r > 0 ? o.css("margin-left", 4 + r + "px") : o.css("margin-left", "4px") : r > 0 ? o.css("margin-right", 4 + r + "px") : o.css("margin-right", "4px") } } }, render: function (t) { var i = "<div style='overflow: hidden; -webkit-appearance: none; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div id='wrapper" + this.element.id + "' style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='toolbar' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='toppager' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='filter' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='content" + this.element.id + "' style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; margin-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='verticalScrollBar" + this.element.id + "' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='horizontalScrollBar" + this.element.id + "' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; border: none; position: absolute;'></div><div id='aggregates' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='statusbar' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='pager' style='z-index: 20; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div></div></div>"; this.element.innerText = "", this.element.innerHTML = i, this.wrapper = this.host.find("#wrapper" + this.element.id), this.content = this.host.find("#content" + this.element.id), this.content.addClass(this.toTP("jqx-reset")); var s = this.host.find("#verticalScrollBar" + this.element.id), r = this.host.find("#horizontalScrollBar" + this.element.id); this.bottomRight = this.host.find("#bottomRight").addClass(this.toTP("jqx-grid-bottomright")).addClass(this.toTP("jqx-scrollbar-state-normal")), this.vScrollBar && this.vScrollBar.jqxScrollBar("destroy"), this.hScrollBar && this.hScrollBar.jqxScrollBar("destroy"), this.vScrollBar = s.jqxScrollBar({ vertical: !0, rtl: this.rtl, touchMode: this.touchmode, theme: this.theme, _triggervaluechanged: !1 }), this.hScrollBar = r.jqxScrollBar({ vertical: !1, rtl: this.rtl, touchMode: this.touchmode, theme: this.theme, _triggervaluechanged: !1 }), this.vScrollBar.css("visibility", "hidden"), this.hScrollBar.css("visibility", "hidden"), this.vScrollInstance = e.data(this.vScrollBar[0], "jqxScrollBar").instance, this.hScrollInstance = e.data(this.hScrollBar[0], "jqxScrollBar").instance, this.filter = this.host.find("#filter"), this.filter[0].id = "filter" + this.element.id, this.filter.addClass(this.toTP("jqx-widget-header")), this.filter.addClass(this.toTP("jqx-grid-toolbar")), this.pager = this.host.find("#pager"), this.pager[0].id = "pager" + this.element.id, this.toolbar = this.host.find("#toolbar"), this.toolbar[0].id = "toolbar" + this.element.id, this.toolbar.addClass(this.toTP("jqx-grid-toolbar")), this.toolbar.addClass(this.toTP("jqx-widget-header")), this.aggregates = this.host.find("#aggregates"), this.aggregates[0].id = "aggregates" + this.element.id, this.aggregates.addClass(this.toTP("jqx-grid-statusbar")), this.aggregates.addClass(this.toTP("jqx-widget-header")), this.statusbar = this.host.find("#statusbar"), this.statusbar[0].id = "statusbar" + this.element.id, this.statusbar.addClass(this.toTP("jqx-grid-statusbar")), this.statusbar.addClass(this.toTP("jqx-widget-header")), this.pager.addClass(this.toTP("jqx-grid-pager")), this.pager.addClass(this.toTP("jqx-widget-header")), this.toppager = this.host.find("#toppager"), this.toppager.addClass(this.toTP("jqx-grid-pager-top")), this.toppager.addClass(this.toTP("jqx-widget-header")), this.gridtable = null, this.localizestrings && (this.localizestrings(), null != this.localization && this.localizestrings(this.localization, !1)), this._builddataloadelement(), this._cachedcolumns = this.columns; var o = this.source.datafields; if (null == o && this.source._source && (o = this.source._source.datafields), o) for (var a = 0; a < this.columns.length; a++) { var n = this.columns[a]; if (n && n.cellsformat && n.cellsformat.length > 2) for (var l = 0; l < o.length; l++) if (o[l].name == n.datafield && !o[l].format) { o[l].format = n.cellsformat; break } } this.databind(this.source), this.showtoolbar && this.toolbar.css("visibility", "inherit"), this.showstatusbar && this.statusbar.css("visibility", "inherit"), this.showaggregates && this.aggregates.css("visibility", "inherit"), this.tableheight = null; var h = this, d = function () { h.content && (h.content[0].scrollTop = 0, h.content[0].scrollLeft = 0), h.gridcontent && (h.gridcontent[0].scrollLeft = 0, h.gridcontent[0].scrollTop = 0) }; this.removeHandler(this.content, "scroll"), this.removeHandler(this.content, "mousedown"), this.addHandler(this.content, "scroll", function (e) { return d(), !1 }), !0 !== t && this._render() }, _render: function () { if (null != this.dataview && !this._loading) { (25 != this.columnsheight || this.columngroups) && this._measureElement("column"), this.filterable ? this.filter[0].style.visibility = "inherit" : this.filter[0].style.visibility = "hidden", this.rowinfo = new Array, this._removeHandlers(), null == this.columns ? this.columns = new e.jqx.collection(this.element) : this._initializeColumns(), this.host.height(this.height), this.host.width(this.width), e.jqx.utilities.html(this.content, ""), this.columnsheader = this.columnsheader || e('<div style="overflow: hidden;"></div>'), this.columnsheader.remove(), this.columnsheader.addClass(this.toTP("jqx-widget-header")), this.columnsheader.addClass(this.toTP("jqx-grid-header")), this.showheader ? this.columnsheader && this.columnsheader.css("display", "block") : this.columnsheader.css("display", "none"), this.gridcontent = this.gridcontent || e('<div style="width: 100%; overflow: hidden; position: absolute;"></div>'), this.gridcontent.remove(); var t = this.columnsheight; t = this._preparecolumngroups(), this.columnsheader.height(t), this.content.append(this.columnsheader), this.content.append(this.gridcontent), this._rendercolumnheaders(), this.tableheight = null, this.gridcontent.find("#contenttable" + this.element.id).remove(), null != this.table && (this.table.remove(), this.table = null), this.table = e('<div id="contenttable' + this.element.id + '" style="overflow: hidden; position: relative;"></div>'), this.gridcontent.addClass(this.toTP("jqx-grid-content")), this.gridcontent.addClass(this.toTP("jqx-widget-content")), this.gridcontent.append(this.table), this._renderrows(), this.filterable && this._renderfilter(), this.pageable && this._initpager(), this._arrange(), this.renderstatusbar && this.renderstatusbar(this.statusbar), this.rendertoolbar && this.rendertoolbar(this.toolbar), this.showaggregates && this._updateaggregates(), this.disabled && this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")), this._renderhorizontalscroll(), this._showicons(), this._addHandlers() } }, clear: function () { this.source && (this.source.records = new Array, this.source.hierarchy = new Array), this.dataview._filteredData = new Array, this.databind(null), this._render() }, _initpager: function () { var t = this.gridlocalization.pagergotopagestring, i = (this.gridlocalization.pagerrangestring, this.gridlocalization.pagershowrowsstring), s = (this.pagerheight - 17) / 2; if (this.pagerdiv = this.pagerdiv || e('<div style="width: 100%; height: 100%; position: relative;"></div>'), this.toppagerdiv = this.toppagerdiv || e('<div style="width: 100%; height: 100%; position: relative;"></div>'), !this.pageable) return this.pagerdiv.remove(), void this.toppagerdiv.remove(); if (this.pagerrenderer) { this.pagerdiv.children().remove(), this.toppager.children().remove(); var r = this.pagerrenderer(); null != r && this.pagerdiv.append(e(r)), this.pager.append(this.pagerdiv), null != (r = this.pagerrenderer()) && this.toppagerdiv.append(e(r)), this.toppager.append(this.toppagerdiv) } else { this.pagerdiv.css("top", s), this.toppagerdiv.css("top", s); var o = function (s, r) { var o = this, a = e('<div style="margin-right: 7px; width: 27px; height: 17px; float: right;"><input style="margin-top: 0px; text-align: right; width: 27px;" type="text"/></div>'), n = e('<div style="float: right; margin-right: 7px;"></div>'), l = e('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'), h = e('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'), d = e('<div type="button" style="margin-left: 3px; padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'), c = e('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'), u = e('<div style="margin-right: 7px; float: right;"></div>'), p = e('<div style="margin-right: 7px; float: right;"></div>'), m = e('<div style="padding-bottom: 3px; margin-right: 3px; float: right;"></div>'); a.attr("disabled", o.disabled); var g = e('<div id="gridpagerlist" style="margin-top: 0px; margin-right: 7px; float: right;"></div>'); if (g[0].id = "gridpagerlist" + r + o.element.id, o.removeHandler(l, "mousedown"), o.removeHandler(l, "mouseup"), o.removeHandler(l, "click"), o.removeHandler(h, "mousedown"), o.removeHandler(h, "mouseup"), o.removeHandler(h, "click"), o.removeHandler(d, "mousedown"), o.removeHandler(d, "mouseup"), o.removeHandler(d, "click"), o.removeHandler(c, "mousedown"), o.removeHandler(c, "mouseup"), o.removeHandler(c, "click"), o.rtl ? (l.attr("title", o.gridlocalization.pagerpreviousbuttonstring), h.attr("title", o.gridlocalization.pagernextbuttonstring)) : (h.attr("title", o.gridlocalization.pagerpreviousbuttonstring), l.attr("title", o.gridlocalization.pagernextbuttonstring)), e.jqx.browser.msie && e.jqx.browser.version < 8 && m.css("padding-top", "3px"), this["pagerfirst" + r] = d, this["pagerlast" + r] = c, this["pagernext" + r] = l, this["pagerprevious" + r] = h, this["pagergotoinput" + r] = a, this["pagerdetails" + r] = u, this["pagershowrows" + r] = p, this["pagergotolabel" + r] = n, this["pagershowrowscombo" + r] = g, this["pagerbuttons" + r] = m, "default" == o.pagermode) { o.rtl ? (c.attr("title", o.gridlocalization.pagerfirstbuttonstring), d.attr("title", o.gridlocalization.pagerlastbuttonstring)) : (d.attr("title", o.gridlocalization.pagerfirstbuttonstring), c.attr("title", o.gridlocalization.pagerlastbuttonstring)); var f = e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>"); f.addClass(o.toThemeProperty("jqx-icon-arrow-first")), d.wrapInner(f); var v = e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>"); v.addClass(o.toThemeProperty("jqx-icon-arrow-last")), c.wrapInner(v), o.rtl ? (s.append(c), s.append(l), s.append(m), s.append(h), s.append(d)) : (s.append(d), s.append(h), s.append(m), s.append(l), s.append(c)), c.jqxButton({ cursor: "pointer", disabled: o.disabled, theme: o.theme }), d.jqxButton({ cursor: "pointer", disabled: o.disabled, theme: o.theme }); var x = o.rtl ? "right" : "left"; m.css("float", x), c.css("float", x), d.css("float", x), l.css("float", x), h.css("float", x), u.css("float", o.rtl ? "left" : "right"), o.rtl ? (u.css("margin-left", "7px"), u.css("margin-right", "0px")) : (u.css("margin-left", "0px"), u.css("margin-right", "7px")) } else o.rtl || (s.append(l), s.append(h)); l.jqxButton({ cursor: "pointer", disabled: o.disabled, theme: o.theme }), h.jqxButton({ cursor: "pointer", disabled: o.disabled, theme: o.theme }); var w = e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>"); w.addClass(o.toThemeProperty("jqx-icon-arrow-left")), h.wrapInner(w); var b = e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>"); if (b.addClass(o.toThemeProperty("jqx-icon-arrow-right")), l.wrapInner(b), o.rtl || s.append(u), "default" != o.pagermode) { o.rtl ? (s.append(n), s.append(a), s.append(p), s.append(g), s.append(u), s.append(l), s.append(h)) : (s.append(g), s.append(p), s.append(a), s.append(n)); var _ = o.pagesizeoptions; g.jqxDropDownList({ _checkForHiddenParent: !1, rtl: o.rtl, disabled: o.disabled, source: _, enableBrowserBoundsDetection: !0, keyboardSelection: !1, autoDropDownHeight: !0, width: 44, height: 16, theme: o.theme }); for (var y = 0, j = 0; j < _.length; j++) this.pagesize >= _[j] && (y = j); n[0].innerHTML = t, g.jqxDropDownList({ selectedIndex: y }); var q = a.find("input"); q.addClass(o.toThemeProperty("jqx-input")), q.addClass(o.toThemeProperty("jqx-widget-content")), this.rtl && q.css("direction", "rtl"); o = this; this.removeHandler(g, "select"), this.addHandler(g, "select", function (e) { if (e.args) { o.vScrollInstance && o.vScrollInstance.setPosition(0); var t = e.args.index; o.pagershowrowscombotop.data().jqxDropDownList.instance.selectIndex(t), o.pagershowrowscombobottom.data().jqxDropDownList.instance.selectIndex(t), o.pagershowrowscombobottom.data().jqxDropDownList.instance.renderSelection("mouse"), o.pagershowrowscombotop.data().jqxDropDownList.instance.renderSelection("mouse"); var i = o.dataview.pagenum * o.dataview.pagesize, s = _[t], r = o.pagesize; o.pagesize = parseInt(s), isNaN(o.pagesize) && (o.pagesize = 10), s >= 100 ? (o.pagershowrowscombotop.jqxDropDownList({ width: 55 }), o.pagershowrowscombobottom.jqxDropDownList({ width: 55 })) : (o.pagershowrowscombotop.jqxDropDownList({ width: 44 }), o.pagershowrowscombobottom.jqxDropDownList({ width: 44 })), o.dataview.pagesize = o.pagesize; var a = Math.floor(i / o.dataview.pagesize); a === o.dataview.pagenum && parseInt(s) === parseInt(r) || (o._raiseEvent("pageSizeChanged", { pagenum: a, oldpagesize: r, pagesize: o.dataview.pagesize }), o.gotopage(a) || (o.serverProcessing ? o.updatebounddata("pager") : o.refresh())) } }), (a = a.find("input")).addClass(o.toThemeProperty("jqx-grid-pager-input")), a.addClass(o.toThemeProperty("jqx-rc-all")), this.removeHandler(a, "keydown"), this.removeHandler(a, "change"), o.addHandler(a, "keydown", function (e) { if (e.keyCode >= 65 && e.keyCode <= 90) return !1; if ("13" == e.keyCode) { var t = a.val(); return t = parseInt(t), isNaN(t) || o.gotopage(t - 1), !1 } }), o.addHandler(a, "change", function () { var e = a.val(); e = parseInt(e), isNaN(e) || o.gotopage(e - 1) }) } p[0].innerHTML = i, o.addHandler(l, "mouseenter", function () { b.addClass(o.toThemeProperty("jqx-icon-arrow-right-hover")) }), o.addHandler(h, "mouseenter", function () { w.addClass(o.toThemeProperty("jqx-icon-arrow-left-hover")) }), o.addHandler(l, "mouseleave", function () { b.removeClass(o.toThemeProperty("jqx-icon-arrow-right-hover")) }), o.addHandler(h, "mouseleave", function () { w.removeClass(o.toThemeProperty("jqx-icon-arrow-left-hover")) }), o.addHandler(l, "mousedown", function () { b.addClass(o.toThemeProperty("jqx-icon-arrow-right-selected")) }), o.addHandler(l, "mouseup", function () { b.removeClass(o.toThemeProperty("jqx-icon-arrow-right-selected")) }), o.addHandler(h, "mousedown", function () { w.addClass(o.toThemeProperty("jqx-icon-arrow-left-selected")) }), o.addHandler(h, "mouseup", function () { w.removeClass(o.toThemeProperty("jqx-icon-arrow-left-selected")) }), "default" === o.pagermode && (o.addHandler(c, "mouseenter", function () { v.addClass(o.toThemeProperty("jqx-icon-arrow-last-hover")) }), o.addHandler(d, "mouseenter", function () { f.addClass(o.toThemeProperty("jqx-icon-arrow-first-hover")) }), o.addHandler(c, "mouseleave", function () { v.removeClass(o.toThemeProperty("jqx-icon-arrow-last-hover")) }), o.addHandler(d, "mouseleave", function () { f.removeClass(o.toThemeProperty("jqx-icon-arrow-first-hover")) }), o.addHandler(c, "mousedown", function () { v.addClass(o.toThemeProperty("jqx-icon-arrow-last-selected")) }), o.addHandler(d, "mousedown", function () { f.addClass(o.toThemeProperty("jqx-icon-arrow-first-selected")) }), o.addHandler(c, "mouseup", function () { v.removeClass(o.toThemeProperty("jqx-icon-arrow-last-selected")) }), o.addHandler(d, "mouseup", function () { f.removeClass(o.toThemeProperty("jqx-icon-arrow-first-selected")) })), o.addHandler(e(document), "mouseup.pagerbuttons" + r + this.element.id, function () { b.removeClass(o.toThemeProperty("jqx-icon-arrow-right-selected")), w.removeClass(o.toThemeProperty("jqx-icon-arrow-left-selected")), v && (v.removeClass(o.toThemeProperty("jqx-icon-arrow-last-selected")), f.removeClass(o.toThemeProperty("jqx-icon-arrow-first-selected"))) }), o.addHandler(l, "click", function () { l.jqxButton("disabled") || (o.rtl ? o.gotoprevpage() : o.gotonextpage()) }), o.addHandler(h, "click", function () { h.jqxButton("disabled") || (o.rtl ? o.gotonextpage() : o.gotoprevpage()) }), "default" === this.pagermode && (o.addHandler(d, "click", function () { if (!d.jqxButton("disabled")) if (o.rtl) { var e = o.dataview.totalrecords, t = Math.ceil(e / o.pagesize); o.gotopage(t - 1) } else o.gotopage(0) }), o.addHandler(c, "click", function () { if (!c.jqxButton("disabled")) if (o.rtl) o.gotopage(0); else { var e = o.dataview.totalrecords, t = Math.ceil(e / o.pagesize); o.gotopage(t - 1) } })) }; this.pagerdiv.children().remove(), this.toppagerdiv.children().remove(), o.call(this, this.pagerdiv, "bottom"), o.call(this, this.toppagerdiv, "top"), this.pager.append(this.pagerdiv), this.toppager.append(this.toppagerdiv), this.updatepagerdetails() } }, _updatepagertheme: function () { }, gotopage: function (t, i) { if (this._loading) return !1; if (void 0 != this.editKey) { if (!this.editSettings.saveOnPageChange) return !1; if (!this.endroweditbykey(this.editKey)) return !1 } if (null != t && void 0 != t || (t = 0), -1 == t && (t = 0), t < 0) return !1; var s = this.dataview.totalrecords, r = this.dataview.pagenum, o = Math.ceil(s / this.pagesize); return t >= o && (0 == this.dataview.totalrecords && (this.dataview.pagenum = 0, this.updatepagerdetails()), t > 0 && (t = o - 1)), this.dataview.pagenum != t && (this.pageable && (this.dataview.pagenum = t, this._raiseEvent("pageChanged", { pagenum: t, oldpagenum: r, pagesize: this.dataview.pagesize })), this.serverProcessing ? this.updatebounddata("pager", i) : (this.refresh(), i && e.isFunction(i) && i()), !0) }, gotoprevpage: function (e) { if (this.dataview.pagenum > 0) return this.gotopage(this.dataview.pagenum - 1, e); if ("default" != this.pagermode && "advanced" != this.pagermode) { var t = this.dataview.totalrecords, i = Math.ceil(t / this.pagesize); return this.gotopage(i - 1, e) } return !1 }, gotonextpage: function (e) { var t = this.dataview.totalrecords; this.summaryrows && (t += this.summaryrows.length); var i = Math.ceil(t / this.pagesize); return this.dataview.pagenum < i - 1 ? this.gotopage(this.dataview.pagenum + 1, e) : "default" != this.pagermode && "advanced" != this.pagermode && this.gotopage(0, e) }, updatepagerdetails: function () { if (this.pageable) { var t = this; if (!this.serverProcessing) if (this.source.hierarchy) { var i = t._names(), s = 0, r = function (o, a) { for (var n = 0; n < a.length; n++) 0 == t.dataview.filters.length && (a[n]._visible = !0), !1 !== a[n]._visible && s++, a[n].records && (a[n][i.expanded] || a[n][i.leaf]) && !1 !== a[n]._visible && (r(o + 1, a[n].records), this.treeGrid && e(this.treeGrid).jqxTreeGrid("showSubAggregates") && 0 != o && s--) }; r(0, this.dataview.rows), this.dataview.totalrecords = s } else this.dataview.totalrecords = this.dataview.rows.length; var o = this.dataview.pagenum * this.pagesize, a = (this.dataview.pagenum + 1) * this.pagesize; a >= this.dataview.totalrecords && (a = this.dataview.totalrecords); var n = this.dataview.totalrecords; o++; var l = Math.ceil(n / this.dataview.pagesize); if (l >= 1 && l--, l++, "default" != this.pagermode) { if (this.pagergotoinputbottom) { var h = this.pagergotoinputbottom.find("input"); h.val(this.dataview.pagenum + 1), h.attr("title", "1 - " + l), (h = this.pagergotoinputtop.find("input")).val(this.dataview.pagenum + 1), h.attr("title", "1 - " + l) } } else { var d = "", c = this.pagerbuttonscount; 0 != c && c || (c = 5); var u = 0; for (this.rtl && (u = c - 1) ; this.rtl && u >= 0 || !this.rtl && u < c;) { var p = 1 + u, m = this.dataview.pagenum / c; p += Math.floor(m) * c; g = this.toTP("jqx-grid-pager-number"); if (g += " " + this.toTP("jqx-rc-all"), p > l && !this.rtl) break; if (this.rtl && p > l) u--; else { if (this.rtl || 0 == u && p > c && (d += "<a class='" + g + "' tabindex=-1 href='javascript:;' data-page='" + (-1 + p) + "'>...</a>"), this.dataview.pagenum === p - 1 && (g += " " + this.toTP("jqx-fill-state-pressed")), this.rtl) { if (u === c - 1) { g = this.toTP("jqx-grid-pager-number"); l >= 1 + p && (d += "<a class='" + g + "' tabindex=-1 href='javascript:;' data-page='" + (1 + p) + "'>...</a>") } this.dataview.pagenum === p - 1 && (g += " " + this.toTP("jqx-fill-state-pressed")), d += "<a class='" + g + "' tabindex=-1 href='javascript:;' data-page='" + p + "'>" + p + "</a>" } else if (d += "<a class='" + g + "' tabindex=-1 href='javascript:;' data-page='" + p + "'>" + p + "</a>", u === c - 1) { g = this.toTP("jqx-grid-pager-number"); l >= 1 + p && (d += "<a class='" + g + "' tabindex=-1 href='javascript:;' data-page='" + (1 + p) + "'>...</a>") } if (this.rtl) { var g = this.toTP("jqx-grid-pager-number"); 0 == u && p > c && (d += "<a class='" + g + "' tabindex=-1 href='javascript:;' data-page='" + (-1 + p) + "'>...</a>") } this.rtl ? u-- : u++ } } if (!this.pagerbuttonsbottom) return; v = this.pagerbuttonsbottom.find("a"); this.removeHandler(v, "click"), this.removeHandler(v, "mouseenter"), this.removeHandler(v, "mouseleave"); v = this.pagerbuttonstop.find("a"); this.removeHandler(v, "click"), this.removeHandler(v, "mouseenter"), this.removeHandler(v, "mouseleave"), this.pagerbuttonsbottom[0].innerHTML = d, this.pagerbuttonstop[0].innerHTML = d, this.disabled && this.host.find(".jqx-grid-pager-number").css("cursor", "default"); var f = function () { v.click(function (i) { if (!t.disabled) { var s = e(i.target).attr("data-page"); t.gotopage(parseInt(s) - 1) } }), v.mouseenter(function (i) { t.disabled || e(i.target).addClass(t.toTP("jqx-fill-state-hover")) }), v.mouseleave(function (i) { t.disabled || e(i.target).removeClass(t.toTP("jqx-fill-state-hover")) }) }; if ("both" === this.pagerposition || "bottom" === this.pagerposition) { v = this.pagerbuttonsbottom.find("a"); f() } if ("both" === this.pagerposition || "top" === this.pagerposition) { var v = this.pagerbuttonstop.find("a"); f() } } if (0 == a && a < o && (o = 0), this.pagerdetailsbottom && (this.rtl ? (this.pagerdetailsbottom[0].innerHTML = n + this.gridlocalization.pagerrangestring + a + "-" + o, this.pagerdetailstop[0].innerHTML = n + this.gridlocalization.pagerrangestring + a + "-" + o) : (this.pagerdetailsbottom[0].innerHTML = o + "-" + a + this.gridlocalization.pagerrangestring + n, this.pagerdetailstop[0].innerHTML = o + "-" + a + this.gridlocalization.pagerrangestring + n)), "default" == this.pagermode) { var x = this.pagerbuttonsbottom.width() + e(this.pagerdetailsbottom).width() + 160; this.pagerdiv.css("min-width", x), this.toppagerdiv.css("min-width", x) } o > a && this.gotoprevpage() } }, _preparecolumngroups: function () { var e = this.columnsheight; if (this.columngroups) { if (this.columnshierarchy = new Array, this.columngroups.length) { for (var t = this, i = 0; i < this.columngroups.length; i++) this.columngroups[i].parent = null, this.columngroups[i].groups = null; for (i = 0; i < this.columns.records.length; i++) this.columns.records[i].parent = null, this.columns.records[i].groups = null; for (var s = function (e) { for (var i = 0; i < t.columngroups.length; i++) { var s = t.columngroups[i]; if (s.name === e) return s } return null }, i = 0; i < this.columngroups.length; i++) (h = this.columngroups[i]).groups || (h.groups = null), h.parentGroup && (h.parentgroup = h.parentGroup), h.parentgroup && (r = s(h.parentgroup)) && (h.parent = r, r.groups || (r.groups = new Array), -1 === r.groups.indexOf(h) && r.groups.push(h)); for (i = 0; i < this.columns.records.length; i++) if ((h = this.columns.records[i]).columngroup) { var r = s(h.columngroup); r && (r.groups || (r.groups = new Array), h.parent = r, -1 === r.groups.indexOf(h) && r.groups.push(h)) } for (var o = 0, i = 0; i < this.columns.records.length; i++) { a = h = this.columns.records[i]; for (h.level = 0; a.parent;) a = a.parent, h.level++; var a = h, n = h.level; for (o = Math.max(o, h.level) ; a.parent;) (a = a.parent) && (a.level = --n) } for (var l = function (e) { var t = new Array; if (e.columngroup && t.push(e), !e.groups) return new Array; for (var i = 0; i < e.groups.length; i++) if (e.groups[i].columngroup) t.push(e.groups[i]); else if (e.groups[i].groups) for (var s = l(e.groups[i]), r = 0; r < s.length; r++) t.push(s[r]); return t }, i = 0; i < this.columngroups.length; i++) { var h = this.columngroups[i], d = l(h); h.columns = d; for (var c = new Array, u = 0, p = 0; p < d.length; p++) c.push(this.columns.records.indexOf(d[p])), d[p].pinned && u++; if (0 != u) throw new Error("jqxDataTable: Column Groups initialization Error. Please, check the initialization of the jqxDataTable's columns array. The columns in a column group cannot be pinned."); c.sort(function (e, t) { return e = parseInt(e), t = parseInt(t), e < t ? -1 : e > t ? 1 : 0 }); for (var m = 1; m < c.length; m++) if (c[m] != c[m - 1] + 1) throw new Error("jqxDataTable: Column Groups initialization Error. Please, check the initialization of the jqxDataTable's columns array. The columns in a column group are expected to be siblings in the columns array.") } } this.columngroupslevel = 1 + o, e = this.columngroupslevel * this.columnsheight } return e }, wheel: function (e, t) { if (t.autoheight && "hidden" == t.hScrollBar.css("visibility")) return e.returnValue = !0, !0; var i = 0; if (e || (e = window.event), e.originalEvent && e.originalEvent.wheelDelta && (e.wheelDelta = e.originalEvent.wheelDelta), e.wheelDelta ? i = e.wheelDelta / 120 : e.detail && (i = -e.detail / 3), i) { var s = t._handleDelta(i); return s && (e.preventDefault && e.preventDefault(), null != e.originalEvent && (e.originalEvent.mouseHandled = !0), void 0 != e.stopPropagation && e.stopPropagation()), !!s && (s = !1, e.returnValue = s, s) } e.preventDefault && e.preventDefault(), e.returnValue = !1 }, _handleDelta: function (e) { if ("hidden" != this.vScrollBar.css("visibility")) { t = this.vScrollInstance.value; if (e < 0 ? this.vScrollInstance.setPosition(this.vScrollInstance.value + 20) : this.vScrollInstance.setPosition(this.vScrollInstance.value - 20), t != (i = this.vScrollInstance.value)) return !0 } else if ("hidden" != this.hScrollBar.css("visibility")) { var t = this.hScrollInstance.value; e > 0 ? this.hScrollInstance.value > 20 ? this.hScrollInstance.setPosition(this.hScrollInstance.value - 20) : this.hScrollInstance.setPosition(0) : this.hScrollInstance.value < this.hScrollInstance.max ? this.hScrollInstance.setPosition(this.hScrollInstance.value + 20) : this.hScrollInstance.setPosition(this.hScrollInstance.max); var i = this.hScrollInstance.value; if (t != i) return !0 } return !1 }, _removeHandlers: function () { this.removeHandler(this.host, "focus"), this.removeHandler(e(window), "jqxReady"), this._mousewheelfunc && this.removeHandler(this.host, "mousewheel", this._mousewheelfunc); var t = "mousedown"; this.isTouchDevice() && (t = e.jqx.mobile.getTouchEventName("touchstart")), this.removeHandler(this.host, "dragstart." + this.element.id), this.removeHandler(this.host, "keydown"), this.table && (this.removeHandler(this.table, "mouseleave"), this.removeHandler(this.table, "mousemove"), this.removeHandler(this.table, t), this.removeHandler(this.table, "selectstart." + this.element.id), e.jqx.browser.msie && e.jqx.browser.version < 9 && this.removeHandler(this.table, "dblclick")) }, _addHandlers: function () { var t = this; this._mousewheelfunc = this._mousewheelfunc || function (e) { return t.wheel(e, t), !1 }, this.addHandler(this.host, "dragstart." + this.element.id, function (e) { return !1 }), this.addHandler(this.table, "selectstart." + this.element.id, function (i) { return !!t.enablebrowserselection || (!(!t.filterable || !e(i.target).ischildof(t.filterrow)) || (!!(t.rowdetails && e(i.target).parents("[data-role=details]").length > 0) || void 0 != t.editKey && void 0)) }), this.addHandler(e(window), "jqxReady", function () { t._updatecolumnwidths(), t.refresh() }), this.editable && this.addHandler(e(document), "mousedown.gridedit" + this.element.id, function (i) { if (t.editable && t.editSettings.saveOnBlur && null != t.editKey && !t.vScrollInstance.isScrolling() && !t.vScrollInstance.isScrolling()) { var s = t.host.coord(), r = t.host.width(), o = t.host.height(), a = !1, n = !1; if ((i.pageY < s.top || i.pageY > s.top + o) && (a = !0, n = !0), (i.pageX < s.left || i.pageX > s.left + r) && (a = !0, !0), a) { var l = t._editors; if (l) for (var h = 0; h < l.length; h++) { var d = l[h].editor, c = function (t) { var s = e(t.children()[0]).data(); if (s && !s.jqxWidget && (s = t.data()), s || (s = t.data()), s.jqxWidget && s.jqxWidget.container && "block" == s.jqxWidget.container[0].style.display) { var r = s.jqxWidget, o = r.container.coord().top, l = r.container.coord().top + r.container.height(); return !(!n || !(i.pageY < o || i.pageY > l)) && (a = !0, r.close(), !0) } }(d), u = d.attr("aria-owns"); if (u) { if (u == document.activeElement.id) return !0; if (e(document.activeElement).ischildof(e("#" + u))) return !0 } else if (u = d.children().attr("aria-owns")) { if (u == document.activeElement.id) return !0; if (e(document.activeElement).ischildof(e("#" + u))) return !0 } if (!1 === c) return } } a && t.endroweditbykey(t.editKey) } }), this.removeHandler(this.host, "mousewheel", this._mousewheelfunc), this.addHandler(this.host, "mousewheel", this._mousewheelfunc), this.addHandler(this.host, "focus", function (e) { e.preventDefault && e.preventDefault() }), this.vScrollInstance.valuechanged = function (e) { t._timer && clearTimeout(t._timer), t._timer = setTimeout(function () { t.table && (t.table[0].style.top = 0 - t.vScrollInstance.value + "px") }, 5) }, this.hScrollInstance.valuechanged = function (e) { t._timer && clearTimeout(t._timer), t._timer = setTimeout(function () { t.table && t._renderhorizontalscroll() }, 5) }; var i = "mousedown"; this.isTouchDevice() && (i = e.jqx.mobile.getTouchEventName("touchend"), e.jqx.browser.msie && e.jqx.browser.version < 10 && (i = "mousedown")); var s = function (e, i) { for (var s = null, r = t._table.coord(), o = r.top, a = r.left, n = t._table[0].rows, l = 0; l < n.length; l++) for (var h = n[l].cells, d = 0; d < h.length; d++) { var c = h[d], u = c.offsetLeft + a, p = c.offsetTop + o, m = c.offsetWidth, g = c.offsetHeight; if (0 !== m && 0 !== g) { if (!(p <= i && i < p + g)) break; if (u <= e && e < u + m) { s = c; break } } } return s }, r = function () { if (t.hoveredRow) { var e = t.hoveredRow[0].cells, i = function (e) { for (var i = 0; i < e.length; i++) { var s = e[i], r = s.className; r = (r = r.replace(" " + t.toTP("jqx-fill-state-hover"), "")).replace(" " + t.toTP("jqx-grid-cell-hover"), ""), s.className = r } }; i(e), t._pinnedTable && e.length > 0 && i(t._pinnedTable[0].rows[t.hoveredRow[0].rowIndex].cells) } t.hoveredRow = null }; this.addHandler(this.table, "mouseleave", function (e) { r(), t.wrapper && (t.wrapper.parent().removeAttr("tabindex", 0), t.wrapper.removeAttr("tabindex", 1), t.content.removeAttr("tabindex", 2)) }); var o = function (e) { if (!t.enablehover) return !0; t.hoveredRow = e; var i = e[0].cells, s = t.rowdetails && !t.treeGrid && !t.treeGrid ? 1 : 0, r = 0; s > 0 && t.rtl && (s = 0, r = 1); for (a = s; a < i.length - r; a++) (n = i[a]).className += " " + t.toTP("jqx-fill-state-hover") + " " + t.toTP("jqx-grid-cell-hover"); if (t._pinnedTable && t._pinnedTable[0].rows.length) for (var o = t._pinnedTable[0].rows[t.hoveredRow[0].rowIndex].cells, a = s; a < o.length - r; a++) { var n = o[a]; n.className += " " + t.toTP("jqx-fill-state-hover") + " " + t.toTP("jqx-grid-cell-hover") } }; t.isTouchDevice() && (t.enablehover = !1), this.addHandler(this.table, "mousemove", function (i) { var a = i.pageX, n = i.pageY; if (t.disabled) return !0; if (!t.enablehover) return !0; if (t.hScrollInstance.isScrolling() || t.vScrollInstance.isScrolling()) return !0; if (td = s(a, n), !td) return !0; var l = e(td).parent(); return r(), !(!t.rowdetails || !t.treeGrid || "row-details" != l.attr("data-role")) || (!(!t.renderedRecords || 0 !== t.renderedRecords.length) || (null != t.editKey && t.editKey === l.attr("data-key") || (o(l), !0))) }), this.addHandler(this.host, "keydown", function (e) { return t._handleKey(e) }), e.jqx.browser.msie && e.jqx.browser.version < 9 && this.addHandler(this.table, "dblclick", function (e) { t.table.trigger("mousedown", e) }), this.addHandler(this.table, i, function (i) { i.target; var r = null; if (t.disabled) return !0; t.table.coord(); var a = i.pageX, n = i.pageY; if (e.jqx.browser.msie && e.jqx.browser.version < 9 && arguments && 2 == arguments.length && (a = arguments[1].pageX, n = arguments[1].pageY), t.isTouchDevice()) { var l = e.jqx.position(i); a = l.left, n = l.top, (isNaN(a) || isNaN(n)) && (a = (l = e.jqx.position(i.originalEvent)).left, n = l.top) } r = s(a, n); var h = e(r).parent(), d = h.attr("data-key"); if (t.rowdetails && t.treeGrid && "row-details" == h.attr("data-role")) return !0; var c = function () { t.enablebrowserselection || i.preventDefault && i.preventDefault(); var s = e(document).scrollTop(); t.host.focus(), e(document).scrollTop(s) }; if (void 0 !== d) { if (d == t.editKey) { if (!t.editSettings.editSingleCell) return !0; if (t.clickedTD == r) return !0; if (null != t.editKey && t.editSettings.saveOnSelectionChange && !t.endroweditbykey(t.editKey)) return !0 } else if (null != t.editKey && t.editSettings.saveOnSelectionChange && !t.endroweditbykey(t.editKey)) return !0; if (t.clickedTD = r, (x = t.rowinfo[d]) && x.group) return !0; var u = !1; if (x) { var p = t.getrowdisplayindex(x.row), m = t.getrowindex(x.row); t._raiseEvent("rowClick", { index: p, boundIndex: m, key: d, row: x.row, originalEvent: i }); var g = (new Date).getTime(); t.clickTime || (t.clickTime = new Date), t._lastSelectedKey == d && g - t.clickTime.getTime() < 300 && (t._raiseEvent("rowDoubleClick", { index: p, boundIndex: m, key: d, row: x.row, originalEvent: i }), u = !0, i.preventDefault && i.preventDefault()) } if (t.clickTime = new Date, r.className.indexOf("jqx-grid-group") >= 0) x.expanded ? t.hidedetailsbykey(d) : t.showdetailsbykey(d); else if (i.target && i.target.className.indexOf("jqx-grid-group") >= 0 && t.treeGrid) x.expanded ? t.treeGrid.collapserow(d) : t.treeGrid.expandrow(d), o(t._getuirow(d)), i.stopPropagation && i.stopPropagation(); else { if (!(i.target && i.target.className.indexOf("checkbox") >= 0 && t.treeGrid)) { var f = e(r).index(), v = t.columns.records[f]; if (i.stopPropagation && i.stopPropagation(), t.editable && null == t.editKey && t._lastSelectedKey == d && t.editSettings.editOnDoubleClick && u) { t.beginroweditbykey(d, v); return !0 } if (t.isTouchDevice() && t.scrolled && new Date - t.scrolled < 500) return t.enablebrowserselection || i.preventDefault && i.preventDefault(), !1; if ("singlerow" === t.selectionmode && "custom" !== t.selectionmode) return t.selectrowbykey(d, "mouse", !1), t._lastSelectedKey = d, t._updateSelection(), i.preventDefault && i.preventDefault(), c(), !0; if ("custom" !== t.selectionmode && (i.ctrlKey || t.clearselection(!1), i.shiftKey && t._lastSelectedKey)) { var x = t.rowinfo[t._lastSelectedKey]; t._doSelection(t._lastSelectedKey, !0, !1); var w = e(t._table.children()[1]).children("[data-key=" + t._lastSelectedKey + "]").index(), b = h.index(); return t._selectRange(b, w), t.selectrowbykey(d, "mouse", !1), t._updateSelection(), i.preventDefault && i.preventDefault(), c(), !0 } return t._lastSelectedKey = d, t.clickTime = new Date, "custom" === t.selectionmode || (x && (x.selected ? t.unselectrowbykey(d, "mouse", !1) : t.selectrowbykey(d, "mouse", !1), c()), t._updateSelection(), t.enablebrowserselection || i.preventDefault && i.preventDefault(), !0) } x.checked ? t.treeGrid.uncheckrow(d) : t.treeGrid.checkrow(d), o(t._getuirow(d)), i.stopPropagation && i.stopPropagation() } } }) }, _updateSelection: function () { var t = this, i = e(t._table.children()[1]).children(), s = t._pinnedTable ? e(t._pinnedTable.children()[1]).children() : null, r = t.rowdetails && !t.treeGrid ? 1 : 0, o = 0; r > 0 && t.rtl && (r = 0, o = 1); for (var a = 0; a < i.length; a++) { var n = i[a].cells; if (s) var l = s[a].cells; var h = null; if (i[a].getAttribute && (h = i[a].getAttribute("data-key")), t.rowinfo[h] && "none" !== t.selectionmode) if (t.rowinfo[h].selected) for (d = r; d < n.length - o; d++) { c = n[d]; e(c).addClass(t.toTP("jqx-grid-cell-selected") + " " + t.toTP("jqx-fill-state-pressed")), l && e(l[d]).addClass(t.toTP("jqx-grid-cell-selected") + " " + t.toTP("jqx-fill-state-pressed")) } else for (var d = r; d < n.length - o; d++) { var c = n[d]; if (l) var u = l[d]; var p = c.className; p = (p = (p = (p = p.replace(" jqx-fill-state-pressed", "")).replace(" jqx-fill-state-pressed-" + t.theme, "")).replace(" jqx-grid-cell-selected", "")).replace(" jqx-grid-cell-selected-" + t.theme, ""), c.className = p, u && (u.className = p) } } }, _selectRange: function (t, i) { var s = e(e(this._table.children()[1]).children()[i]), r = this; if (t > i) for (var o = i, a = s; o < t;) { n = (a = a.next()).attr("data-key"); r._doSelection(n, !0, !1), o++ } else if (t < i) for (var o = i, a = s; o > t;) { var n = (a = a.prev()).attr("data-key"); this._doSelection(n, !0, !1), o-- } }, _getuikey: function (t, i) { var s = null, r = e(this._table.children()[1]).children(); if (s = e(r[t]).attr("data-key"), e(r[t]).attr("data-role")) { var o = e(r[t]); if ("next" == i) { for (; o;) if ((o = o.next()) && !(a = o.attr("data-role"))) return s = o.attr("data-key") } else if ("prev" == i) for (; o;) if (o = o.prev()) { var a = o.attr("data-role"); if (!a) return s = o.attr("data-key") } return null } return s }, getRows: function () { return this.source.records }, getView: function () { var t = this._names(), i = new Array, s = function (i, r) { for (var o = 0; o < r.length; o++) if (!1 !== r[o]._visible) { var a = e.extend({}, r[o]); i.push(a), r[o][t.expanded] && (a.records = new Array, s(a.records, r[o].records)) } }; return s(i, this.dataViewRecords), i }, getKeys: function () { for (var e = new Array, t = this.source.records, i = 0; i < t.length; i++) e.push(t[i].uid); return e }, getKey: function (e) { var t = this.getRows(); return t ? t[e].uid : -1 }, _getkey: function (t) { if (this._loading) throw new Error("jqxDataTable: " + this.loadingerrormessage); var i = null, s = function () { var i = e(this._table.children()[1]).children(), s = null, r = 0; if (this.pageable && (r -= this.dataview.pagenum * this.dataview.pagesize), this.groups.length > 0) { for (var o = 0, a = 0; a < i.length; a++) { var n = e(i[a]); if (!(n.children()[0].getAttribute("colspan") > 0)) { if (o === r + t) return s = n.attr("data-key"); o++ } } return s } if (this.rowdetails) for (var o = 0, a = 0; a < i.length; a++) { if (o === t + r) return s = e(i[a]).attr("data-key"); a % 2 == 1 && o++ } else s = e(i[r + t]).attr("data-key"); return s }; if (null == (i = s.call(this)) && this.pageable) { var r = Math.floor(t / this.dataview.pagesize); if (this.dataview.pagenum != r) { var o = this.getRows()[t]; if (o && null != o.uid) return o.uid; if (isNaN(r)) return null; this.gotopage(r), i = s.call(this) } } return i }, _getuirow: function (t) { try { var i = e(this._table.children()[1]).children("[data-key=" + t + "]"); if (i.length > 0) return i } catch (i) { for (var s = e(this._table.children()[1]).children(), r = 0; r < s.length; r++) { var o = s[r], a = o.getAttribute("data-key"); if (t == a) return e(o) } return null } return null }, _getpinneduirow: function (t) { if (!this._pinnedTable) return null; try { var i = e(this._pinnedTable.children()[1]).children("[data-key=" + t + "]"); if (i.length > 0) return i } catch (i) { for (var s = e(this._pinnedTable.children()[1]).children(), r = 0; r < s.length; r++) { var o = s[r], a = o.getAttribute("data-key"); if (t == a) return e(o) } return null } return null }, _names: function () { var e = { leaf: "leaf", parent: "parent", expanded: "expanded", checked: "checked", selected: "selected", level: "level", icon: "icon", data: "data" }; if (!this.source || this.source && !this.source._source.hierarchy) return e; var t = this.source._source.hierarchy.reservedNames; return t || e }, _getMatches: function (t, i) { if (void 0 == t || 0 == t.length) return -1; var s = this.renderedRecords; void 0 != i && (s = s.slice(i)); var r = 0; if (this.rowdetails && !this.treeGrid && r++, r < this.columns.records.length) var o = this.columns.records[r].datafield; else new Array; var a = new Array; return e.each(s, function (i) { var s = this[o]; s || (s = ""), e.jqx.string.startsWithIgnoreCase(s.toString(), t) && a.push(this.uid) }), a }, _handleKey: function (t) { if (this._loading) return !0; if (e(t.target).ischildof(this.filter)) return !0; if (e(t.target).ischildof(this.toolbar)) return !0; if (e(t.target).ischildof(this.statusbar)) return !0; var i = this._names(), s = this, r = t.charCode ? t.charCode : t.keyCode ? t.keyCode : 0, o = this._lastSelectedKey, a = (this.rowinfo[o], this._getuirow(o)), n = t.shiftKey && "singlerow" != this.selectionmode, l = t.ctrlKey; if (a) { if (this.handlekeyboardnavigation && this.handlekeyboardnavigation(r)) return !0; if (this.editable && void 0 == this.editKey && 113 === r && this.editSettings.editOnF2 && this.beginroweditbykey(a.attr("data-key")), void 0 == this.editKey && !l && !n && this.incrementalSearch && !(r >= 33 && r <= 40)) { this._searchString || (this._searchString = ""), (8 == r || 46 == r) && this._searchString.length >= 1 && (this._searchString = this._searchString.substr(0, this._searchString.length - 1)); var h = String.fromCharCode(r), d = !isNaN(parseInt(h)); if (r >= 65 && r <= 97 || d || 8 == r || 32 == r || 46 == r) { if (t.shiftKey || (h = h.toLocaleLowerCase()), 8 != r && 32 != r && 46 != r && (this._searchString.length > 0 && this._searchString.substr(0, 1) == h || (this._searchString += h)), 32 == r && (this._searchString += " "), this._searchTime = new Date, (o = this.getselection()).length >= 1) { for (var c = o[0].uid, u = -1, p = 0; p < this.renderedRecords.length; p++) if (this.renderedRecords[p].uid == c) { u = p; break } if (0 == (m = this._getMatches(this._searchString, u)).length || m.length > 0 && m[0] == c) m = this._getMatches(this._searchString) } else var m = this._getMatches(this._searchString); if (m.length > 0) { if ((o = this.getselection()).length >= 1) { var g = m.indexOf(o[0].uid); if (-1 == g) this.clearselection(!1), this.selectrowbykey(m[0]); else { var f = g + 1; f >= m.length && (f = 0), this.clearselection(!1), this.selectrowbykey(m[f]) } } else this.clearselection(!1), this.selectrowbykey(m[0]); this._lastSearchString = this._searchString } } void 0 != this._searchTimer && clearTimeout(this._searchTimer), 27 != r && 13 != r || (this._searchString = "", this._lastSearchString = ""), this._searchTimer = setTimeout(function () { s._searchString = "", s._lastSearchString = "" }, 500) } if (void 0 != this.editKey) { if (27 === r && this.editSettings.cancelOnEsc) this.endroweditbykey(this.editKey, !0); else if (13 === r && this.editSettings.saveOnEnter) { if (t.target && "div" != t.target.nodeName.toLowerCase() && "input" != t.target.nodeName.toLowerCase()) return !0; this.endroweditbykey(this.editKey, !1) } else if (this.editSettings.editSingleCell && this.editColumn) { var v = this.columns.records.indexOf(this.editColumn); if (9 == r && v < this.columns.records.length - 1 && !t.shiftKey) { for (var x = this.editKey, w = null, p = v + 1; p < this.columns.records.length; p++) if (this.columns.records[p].editable && !this.columns.records[p].hidden) { w = this.columns.records[p]; break } w && (this.endroweditbykey(this.editKey, !1), this.beginroweditbykey(x, w)) } else if (9 == r && t.shiftKey && v > 0) { for (var x = this.editKey, b = null, p = v - 1; p >= 0; p--) if (this.columns.records[p].editable && !this.columns.records[p].hidden) { b = this.columns.records[p]; break } b && (this.endroweditbykey(this.editKey, !1), this.beginroweditbykey(x, b)) } if (9 == r) { var _ = this.rowinfo[this.editKey], u = this.getrowindex(_), a = this._getuirow(this.editKey); if (t.shiftKey || w) { if (!b && t.shiftKey) { for (var y = null, p = this.columns.records.length - 1; p >= 0; p--) if (this.columns.records[p].editable && !this.columns.records[p].hidden) { y = this.columns.records[p]; break } if (y) { for (; a;) if ((a = a.prev()) && !(L = a.attr("data-role"))) { q = a.attr("data-key"); break } if (q) { this.clearselection(!1), this._lastSelectedKey = q; var _ = this.rowsByKey[q], u = this.getrowindex(_), j = this.getrowdisplayindex(_); this._raiseEvent("rowSelect", { key: q, index: j, boundIndex: u, row: this.rowsByKey[q] }), this.endroweditbykey(this.editKey, !1), this._doSelection(q, !0, !0), this.beginroweditbykey(q, y) } } } } else { for (var y = null, p = 0; p < this.columns.records.length; p++) if (this.columns.records[p].editable && !this.columns.records[p].hidden) { y = this.columns.records[p]; break } if (y) { for (; a;) if ((a = a.next()) && !(L = a.attr("data-role"))) { var q = a.attr("data-key"); break } if (q) { this.clearselection(!1), this._lastSelectedKey = q; var _ = this.rowsByKey[q], u = this.getrowindex(_), j = this.getrowdisplayindex(_); this._raiseEvent("rowSelect", { key: q, index: j, boundIndex: u, row: this.rowsByKey[q] }), this.endroweditbykey(this.editKey, !1), this._doSelection(q, !0, !0), this.beginroweditbykey(q, y) } } } return !1 } } return !0 } if (t.ctrlKey) { var T = String.fromCharCode(r).toLowerCase(); if (("c" == T || "x" == T) && (o = this.getselection()).length >= 1) { for (var C = "", S = 0; S < this.renderedRecords.length; S++) for (var k = this.renderedRecords[S], p = 0; p < o.length; p++) if ((_ = o[p]).uid === k.uid) { for (var I = 0; I < this.columns.records.length; I++) C += this.getcelltextbykey(_.uid, this.columns.records[I].displayfield), I < this.columns.records.length - 1 && (C += "\t"); C += "\n"; break } if ("" != C && (C = C.substring(0, C.length - 1)), window.clipboardData) window.clipboardData.setData("Text", C); else { var D = e('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>'); D.val(C), e("body").append(D), D.select(), setTimeout(function () { document.designMode = "off", D.select(), D.remove() }, 100) } } } if (32 === r && this.treeGrid && this.treeGrid.checkboxes) { if ((o = this.getselection()).length > 1) { for (p = 0; p < o.length; p++) { var P = o[p].uid; this.rowinfo[P].checked ? this.treeGrid.uncheckrow(P, !1) : this.treeGrid.checkrow(P, !1) } return this._renderrows(), !1 } if (c = a.attr("data-key")) return this.rowinfo[c].checked ? this.treeGrid.uncheckrow(c) : this.treeGrid.checkrow(c), !1 } var B = a.index(), z = function (t) { var i = null, r = e(s._table.children()[1]).children().length - 1, o = e(e(s._table.children()[1]).children()[r]), a = o.attr("data-role"); if (a) { for (; o;) if ((o = o.prev()) && !(a = o.attr("data-role"))) { i = o.attr("data-key"); break } } else i = o.attr("data-key"); return "all" == t ? { row: o, key: i } : i }, H = function (t) { var i = null, r = e(e(s._table.children()[1]).children()[0]), o = r.attr("data-role"); if (o) { for (; r;) if ((r = r.next()) && !(o = r.attr("data-role"))) { i = r.attr("data-key"); break } } else i = r.attr("data-key"); return "all" == t ? { row: r, key: i } : i }, c = null, M = function () { if (l || n || s.clearselection(!1), 33 == r || 37 == r) { t = B; (c = s._getuikey(t, "prev")) || (c = H()) } else if (34 == r || 39 == r) { t = B; (c = s._getuikey(t, "next")) || (c = z()) } else 38 == r ? c = z() : 40 == r && (c = H()); s._lastSelectedKey = c; var e = s.rowsByKey[c], t = s.getrowindex(e), i = s.getrowdisplayindex(e); s._raiseEvent("rowSelect", { key: c, index: i, boundIndex: t, row: s.rowsByKey[c] }), s._doSelection(c, !0, !0), s.host.focus() }; if (this.treeGrid && this.rtl && (37 == r ? r = 39 : 39 == r && (r = 37)), 36 == r || l && 38 == r) return function () { s.clearselection(!1); var e = H(); n || l ? s._selectRange(a.index(), 0) : s._lastSelectedKey = e, s.selectrowbykey(e, "keyboard") }(), !1; if (35 == r || l && 40 == r) return function () { s.clearselection(!1); var e = z("all"), t = e.key; n || l ? s._selectRange(a.index(), e.row.index()) : s._lastSelectedKey = t, s.selectrowbykey(t, "keyboard") }(), !1; if (33 == r || 37 == r) { c = a.attr("data-key"); if (this.rowdetails && 37 == r && !this.treeGrid) return this.hidedetailsbykey(c), !1; if (this.treeGrid && 37 == r) { if (this.rowinfo[c].row && !this.rowinfo[c].row[i.parent] && !this.rowinfo[c][i.leaf] && !this.rowinfo[c].expanded) return !1; if (this.rowinfo[c].expanded && !this.rowinfo[c][i.leaf]) return this.treeGrid.collapserow(c), !1; if (this.rowinfo[c].row && this.rowinfo[c].row[i.parent] && (c = this.rowinfo[c].row[i.parent].uid), this.rowinfo[c][i.leaf]) return !1 } if (this.pageable && !this.treeGrid) return this.rtl ? this.gotonextpage(M) : this.gotoprevpage(M), !1; if (this.treeGrid && this.pageable && 33 == r) return this.gotoprevpage(M), !1 } else if (34 == r || 39 == r) { c = a.attr("data-key"); if (this.rowdetails && 39 == r && !this.treeGrid) return this.showdetailsbykey(c), !1; if (this.treeGrid && 39 == r) { if (this.rowinfo[c][i.leaf]) return !1; if (!this.rowinfo[c].expanded) return this.treeGrid.expandrow(c), !1; if (this.rowinfo[c].row && this.rowinfo[c].row.records && this.rowinfo[c].row.records.length > 0) if (this.dataview.filters.length > 0) { for (var E = this.rowinfo[c].row.records, p = 0; p < E.length; p++) if (E[p]._visible) { c = E[p].uid; break } } else c = this.rowinfo[c].row.records[0].uid } if (this.pageable && !this.treeGrid) return this.rtl ? this.gotoprevpage(M) : this.gotonextpage(M), !1; if (this.treeGrid && this.pageable && 34 == r) return this.gotonextpage(M), !1 } else if (38 == r) { for (; a;) if ((a = a.prev()) && !(L = a.attr("data-role"))) { c = a.attr("data-key"); break } if (this.pageable && null == c) return this.gotoprevpage(M), !1 } else if (40 == r) { for (; a;) if ((a = a.next()) && !(L = a.attr("data-role"))) { c = a.attr("data-key"); break } if (this.pageable && null == c) return this.gotonextpage(M), !1 } if (null != c) { if (l || n || this.clearselection(!1), this.rowinfo[c] && this.rowinfo[c].selected && (l || n)) { this._doSelection(this._lastSelectedKey, !1, !1), this._lastSelectedKey = c; var _ = this.rowsByKey[c], u = this.getrowindex(_); s._updateSelection(); j = this.getrowdisplayindex(_); return this._raiseEvent("rowUnselect", { key: c, index: j, boundIndex: u, row: _ }), !1 } this._lastSelectedKey = c; var _ = this.rowsByKey[c], u = this.getrowindex(_); this._doSelection(c, !0, !1), s._updateSelection(); j = this.getrowdisplayindex(_); if (this._raiseEvent("rowSelect", { key: c, index: j, boundIndex: u, row: _ }), this.treeGrid) if (37 == r) { A = null; if ((a = this._getuirow(c)) && ((L = a.attr("data-role")) || (A = a.attr("data-key"))), this.pageable && null == A && this.dataview.pagenum > 0) for (; null == this._getuirow(c) && this.dataview.pagenum > 0;) this.gotoprevpage() } else if (39 == r) { var A = null; if (a = this._getuirow(c)) { var L = a.attr("data-role"); L || (A = a.attr("data-key")) } this.pageable && null == A && this.gotonextpage() } return !1 } } }, _selection: function (e) { if ("selectionStart" in e[0]) { var t = e[0], i = t.selectionEnd - t.selectionStart; return { start: t.selectionStart, end: t.selectionEnd, length: i, text: t.value } } var s = document.selection.createRange(); if (null == s) return { start: 0, end: t.value.length, length: 0 }; var r = e[0].createTextRange(), o = r.duplicate(); r.moveToBookmark(s.getBookmark()), o.setEndPoint("EndToStart", r); i = s.text.length; return { start: o.text.length, end: o.text.length + s.text.length, length: i, text: s.text } }, _doSelection: function (e, t, i) { if (null != e) { "singlerow" === this.selectionmode && this.clearselection(!1); var s = this.rowinfo[e]; s ? (s.selected = t, this.ensurerowvisiblebykey(e)) : (this.ensurerowvisiblebykey(e), (s = this.rowinfo[e]) ? s.selected = t : this.rowinfo[e] = { selected: t }), "none" != this.selectionmode && !1 !== i && this._renderrows() } else this.clearselection() }, clearselection: function (e) { if (this.rowinfo) { var t = this.getRows(); for (var i in this.rowinfo) { var s = this.rowinfo[i]; if (s.selected) { s.selected = !1; var r = t.indexOf(s.row), o = this.getrowdisplayindex(s.row); this._raiseEvent("rowUnselect", { key: i, index: o, boundIndex: r, row: s.row }) } } } !1 !== e && this._renderrows() }, exportdata: function (i) { if (!e.jqx.dataAdapter.ArrayExporter) { if (!this.treeGrid) throw "jqxDataTable: Missing reference to jqxdata.export.js!"; throw "jqxTreeGrid: Missing reference to jqxdata.export.js!" } var s = this.exportSettings.columnsHeader; void 0 == s && (s = !0); var r = this.exportSettings.hiddenColumns; void 0 == r && (r = !1); var o = this.exportSettings.serverURL, a = this.exportSettings.characterSet, n = this.exportSettings.collapsedRecords; void 0 == n && (n = !1); var l = this.exportSettings.fileName; void 0 === l && (l = this.treeGrid ? "jqxTreeGrid_Data" : "jqxDataTable_Data"); var h = this, d = this.getRows(); if (1 == this.exportSettings.recordsInView && (d = this.getView()), this.groups && this.groups.length > 0) { var c = this.source.getGroupedRecords(this.groups, "records", "label", null, "data", null, "parent", d), u = function (t, i) { for (var s = 0; s < t.length; s++) { var r = e.extend({}, t[s]); if (i.push(r), r.records && r.records.length > 0) for (var o = u(r.records, new Array), a = 0; a < o.length; a++) o[a].leaf, i.push(o[a]) } return i }, p = u.call(this, c, new Array); d = p } if (0 == d.length) throw "No data to export."; this.exporting = !0, this.altrows && this._renderrows(); for (var m = new Array, g = 0; g < this.columns.records.length; g++) !r && this.columns.records[g].hidden || m.push(e.extend({}, this.columns.records[g])); if (this.groups && this.groups.length > 0 && m.length > 0) for (var f = this._names(), g = 0; g < d.length; g++) d[g][f.leaf] || (h.rtl ? d[g][m[m.length - 1].displayfield] = d[g].label : d[g][m[0].displayfield] = d[g].label); var v = 0; if (this.treeGrid) { var x = this.treeGrid.getRows(); 1 == this.exportSettings.recordsInView && (x = this.getView()); var f = this._names(), w = function (e) { for (var t = 0; t < e.length; t++) { var i = e[t], s = i[f.expanded] || !i[f.expanded] && n; i[f.leaf] && (v = Math.max(v, i[f.level])), i.records && i.records.length > 0 && s && (v = Math.max(v, i[f.level]), w(e[t].records)) } }; if (w(x), 0 != v && v++, "xml" != i && "json" != i) { for (var b = m.length, g = 0; g < v; g++) (E = new t(this, this)).width = this.indentwidth, E.datafield = "Level" + g, E.displayfield = "Level" + g, E.align = "center", E.cellsalign = "center", E.text = "", this.rtl ? m.splice(b, 0, E) : m.splice(g, 0, E); var _ = new Array, y = !(!this.source._source.hierarchy || !this.source._source.hierarchy.groupingDataFields), j = function (t) { for (var s = 0; s < t.length; s++) { for (var r = e.extend({}, t[s]), o = 0; o < r[f.level]; o++) r["Level" + o] = ""; var a = r[f.expanded] || !r[f.expanded] && n; ("xls" == i || "html" == i) && r.records && r.records.length > 0 ? r["Level" + r[f.level]] = a ? "-" : "+" : r["Level" + r[f.level]] = "", r[f.leaf] && (r["Level" + r[f.level]] = ""); for (o = r[f.level] + 1; o < v; o++) r["Level" + o] = ""; if (y && !r[f.leaf] && (h.rtl ? r[m[m.length - v - 1].displayfield] = r.label : r[m[v].displayfield] = r.label), r.aggregate) for (var l = "xls" == i ? "AG" : "", o = v; o < m.length; o++) { var d = o; h.rtl && (d = m.length - o - 1), void 0 != r[m[d].displayfield] && (r[m[d].displayfield] = l + r[m[d].displayfield]) } _.push(r), a && !r[f.leaf] && j(r.records) } }; j(x), d = _ } else d = x } var q = void 0 != r && r, T = {}, C = {}, S = this.host.find(".jqx-grid-cell:first"), k = this.host.find(".jqx-grid-cell-alt:first"), I = this.toThemeProperty; S.removeClass(I("jqx-grid-cell-selected")), S.removeClass(I("jqx-fill-state-pressed")), k.removeClass(I("jqx-grid-cell-selected")), k.removeClass(I("jqx-fill-state-pressed")), S.removeClass(I("jqx-grid-cell-hover")), S.removeClass(I("jqx-fill-state-hover")), k.removeClass(I("jqx-grid-cell-hover")), k.removeClass(I("jqx-fill-state-hover")); for (var D = "cell", P = 1, B = "column", z = 1, H = [], M = 0; M < m.length; M++) { var E = m[M]; if ("" != E.cellclassname) if (E.customCellStyles = new Array, "string" == typeof E.cellclassname) E.customCellStyles.push(E.cellclassname); else for (g = 0; g < d.length; g++) { var A = g, L = E.cellclassname(A, E.displayfield, d[g][E.displayfield], d[g]); L && (E.customCellStyles[g] = L) } } if (e.each(m, function (t) { var r = t; t >= v ? r = m.length - v - 1 : v > 0 && t < v && (r = 0); a = e(h._table[0].rows[0].cells[r]); if (h._table[0].rows.length > 1 && 0 == (o = e(h._table[0].rows[1].cells[r])).length) var o = e(h._table[0].rows[1].cells[0]); if (0 == a.length) var a = e(h._table[0].rows[0].cells[0]); var n = this, l = function (e) { var t = h.toThemeProperty; if (e.removeClass(t("jqx-cell")), e.removeClass(t("jqx-grid-cell-selected")), e.removeClass(t("jqx-fill-state-pressed")), e.removeClass(t("jqx-grid-cell-hover")), e.removeClass(t("jqx-fill-state-hover")), n.customCellStyles) for (var i in n.customCellStyles) e.removeClass(n.customCellStyles[i]) }; if (l(a), o && l(o), null == this.displayfield) return !0; h.showaggregates && h.getcolumnaggregateddata && H.push(h.getcolumnaggregateddata(this.displayfield, this.aggregates, !0, d)); var c = h._getexportcolumntype(this); !this.exportable || this.hidden && !q || (T[this.displayfield] = {}, T[this.displayfield].text = this.text, T[this.displayfield].width = parseInt(this.width), isNaN(T[this.displayfield].width) && (T[this.displayfield].width = 60), T[this.displayfield].formatString = this.cellsformat, T[this.displayfield].localization = h.gridlocalization, T[this.displayfield].type = c, T[this.displayfield].cellsAlign = this.cellsalign, T[this.displayfield].hidden = !s, T[this.displayfield].index = r, T[this.displayfield].maxIndex = m.length), D = "cell" + P; var u = this.element; if ("json" != i && "xml" != i) { var p = function (e, t, s, r, o, a, n, l, h) { C[e] = { index: 1 + n, maxIndex: m.length }, a.rtl && (C[e].index = m.length - n), "html" != i && "xls" != i && "pdf" != i || (t && (C[e]["font-size"] = t.css("font-size"), C[e]["font-weight"] = t.css("font-weight"), C[e]["font-style"] = t.css("font-style"), C[e]["background-color"] = a._getexportcolor(t.css("background-color")), C[e].color = a._getexportcolor(t.css("color")), C[e]["border-color"] = a._getexportcolor(t.css("border-top-color"))), s ? C[e]["text-align"] = o.align : (C[e]["text-align"] = o.cellsalign, C[e].formatString = o.cellsformat, C[e].dataType = c), "html" != i && "pdf" != i || (C[e]["border-top-width"] = "0px", a.rtl ? (C[e]["border-left-width"] = "1px", C[e]["border-right-width"] = "0px", n == m.length - v - 1 && s && (C[e]["border-right-width"] = "1px")) : (C[e]["border-left-width"] = "0px", C[e]["border-right-width"] = "1px"), C[e]["border-bottom-width"] = "1px", t && (C[e]["border-top-style"] = t.css("border-top-style"), C[e]["border-left-style"] = t.css("border-left-style"), C[e]["border-right-style"] = t.css("border-right-style"), C[e]["border-bottom-style"] = t.css("border-bottom-style")), s ? (0 != n || a.rtl ? n == m.length - 1 && a.rtl && (C[e]["border-right-width"] = "1px") : C[e]["border-left-width"] = "1px", t && (C[e]["border-top-width"] = "1px", C[e]["border-bottom-width"] = t.css("border-bottom-width"))) : 0 != n || a.rtl ? n == m.length - 1 && a.rtl && (C[e]["border-right-width"] = "1px") : C[e]["border-left-width"] = "1px", t && (C[e].height = t.css("height")), a.treeGrid && !s && (C[e].index - 1 < v ? a.rtl ? C[e]["border-left-width"] = "0px" : C[e]["border-right-width"] = "0px" : C[e].index - 1 == v && (a.rtl ? C[e]["border-right-width"] = "0px" : C[e]["border-left-width"] = "0px")))), !o.exportable || o.hidden && !q || (1 == l ? (T[o.displayfield].customCellStyles || (T[o.displayfield].customCellStyles = new Array), T[o.displayfield].customCellStyles[h] = e) : s ? T[o.displayfield].style = e : r ? T[o.displayfield].cellAltStyle = e : T[o.displayfield].cellStyle = e) }; if (p(B = "column" + z, u, !0, !1, this, h, t), z++, p(D, a, !1, !1, this, h, t), h.altrows && p(D = "cellalt" + P, o, !1, !0, this, h, t), this.customCellStyles) { for (var g in n.customCellStyles) a.removeClass(n.customCellStyles[g]); for (var g in n.customCellStyles) a.addClass(n.customCellStyles[g]), p(D + n.customCellStyles[g], a, !1, !1, this, h, t, !0, g), a.removeClass(n.customCellStyles[g]) } P++ } }), "json" != i && "xml" != i && v > 0 && this.treeGrid) { N = v + 1; if (this.rtl && (N = m.length - v), C["column" + N]) { var O = C["column" + N]; O.merge = v, O["border-left-width"] = "1px"; C["cell" + N]; for (g = 0; g < m.length; g++) { N = g + 1; this.rtl && (N = m.length - g), C["column" + N].level = g, C["column" + N].maxLevel = v, C["cell" + N].maxLevel = v, C["cellalt" + N] && (C["cellalt" + N].maxLevel = v) } for (g = 0; g < v; g++) { var N = g + 1, F = g; if (this.rtl && (N = m.length - g), (R = C["column" + N]).disabled = !0, C["cell" + N].level = F, C["cell" + N].maxLevel = v, C["column" + N].level = F, C["cellalt" + N] && (C["cellalt" + N].level = F, C["cellalt" + N].maxLevel = v), ("html" == i || "pdf" == i || "xls" == i) && (R["font-size"] = O["font-size"], R["font-weight"] = O["font-weight"], R["font-style"] = O["font-style"], R["background-color"] = O["background-color"], R.color = O.color, R["border-color"] = O["border-color"], "html" == i || "pdf" == i)) { R["border-top-width"] = O["border-top-width"], R["border-left-width"] = O["border-left-width"], this.rtl && (R["border-right-width"] = O["border-right-width"], 0 == g && (R["border-right-width"] = "1px")), 0 != g || this.rtl ? 0 == g && this.rtl && (R["border-left-width"] = "0px") : R["border-left-width"] = "0px", this.rtl ? this.rtl && (R["border-left-width"] = "0px") : R["border-right-width"] = "0px", R["border-bottom-width"] = "0px"; var R = C["cell" + N]; this.rtl ? this.rtl && (R["border-left-width"] = "0px") : R["border-right-width"] = "0px" } } } } if (this.showaggregates) { var W = [], V = "xls" == i ? "AG" : "", G = 0; this.rowdetails && !this.treeGrid && G++, H.length > 0 && (e.each(m, function (e) { if (this.aggregates) for (var t = 0; t < this.aggregates.length; t++) if (W[t] || (W[t] = {}), W[t]) { var i = h._getaggregatename(this.aggregates[t]), s = h._getaggregatetype(this.aggregates[t]), r = H[e - G]; r && (W[t][this.displayfield] = V + i + ": " + r[s]) } }), e.each(m, function (e) { for (var t = 0; t < W.length; t++) void 0 == W[t][this.displayfield] && (W[t][this.displayfield] = V) })), e.each(W, function () { d.push(this) }) } var U = this, Y = e.jqx.dataAdapter.ArrayExporter(d, T, C, o, this.treeGrid && ("xml" == i || "json" == i)); if (void 0 == l) { this._renderrows(); var K = Y.exportTo(i); return this.showaggregates && e.each(W, function () { d.pop(this) }), setTimeout(function () { U.exporting = !1 }, 50), K } var $ = this.treeGrid && ("xml" == i || "json" == i); Y.exportToFile(i, l, o, a, $), this.showaggregates && e.each(W, function () { d.pop(this) }), this._renderrows(), setTimeout(function () { U.exporting = !1 }, 50) }, _getexportcolor: function (e) { var t = e; if ("transparent" == e && (t = "#FFFFFF"), t && t.toString() || (t = "#FFFFFF"), -1 != t.toString().indexOf("rgb")) { var i = t.split(","); if (-1 != t.toString().indexOf("rgba")) { var s = parseInt(i[0].substring(5)), r = parseInt(i[1]), o = parseInt(i[2]), a = parseInt(i[3].substring(1, 4)), n = { r: s, g: r, b: o }, l = this._rgbToHex(n); return 0 == s && 0 == r && 0 == o && 0 == a ? "#ffffff" : "#" + l } n = { r: s = parseInt(i[0].substring(4)), g: r = parseInt(i[1]), b: o = parseInt(i[2].substring(1, 4)) }; return "#" + (l = this._rgbToHex(n)) } return -1 != t.toString().indexOf("#") && 4 == t.toString().length && (t += t.toString().substring(1, 4)), t }, _rgbToHex: function (e) { return this._intToHex(e.r) + this._intToHex(e.g) + this._intToHex(e.b) }, _intToHex: function (e) { var t = parseInt(e).toString(16); return 1 == t.length && (t = "0" + t), t.toUpperCase() }, _getexportcolumntype: function (t) { var i = this, s = "string", r = i.source.datafields || (i.source._source ? i.source._source.datafields : null); if (r) { var o = ""; if (e.each(r, function () { if (this.name == t.displayfield) return this.type && (o = this.type), !1 }), o) return o } if (null != t) { if (void 0 == this.dataview.cachedrecords) return s; var a = null; if (this.virtualmode) e.each(this.dataview.cachedrecords, function () { return a = this[t.displayfield], !1 }); else { if (0 == this.dataview.cachedrecords.length) return s; if (null != (a = this.dataview.cachedrecords[0][t.displayfield]) && "" == a.toString()) return "string" } if (null != a) { if (-1 != t.cellsformat.indexOf("c")) return "number"; if (-1 != t.cellsformat.indexOf("n")) return "number"; if (-1 != t.cellsformat.indexOf("p")) return "number"; if (-1 != t.cellsformat.indexOf("d")) return "date"; if (-1 != t.cellsformat.indexOf("y")) return "date"; if (-1 != t.cellsformat.indexOf("M")) return "date"; if (-1 != t.cellsformat.indexOf("m")) return "date"; if (-1 != t.cellsformat.indexOf("t")) return "date"; if ("boolean" == typeof a) s = "boolean"; else if (e.jqx.dataFormat.isNumber(a)) s = "number"; else { var n = new Date(a); if ("NaN" == n.toString() || "Invalid Date" == n.toString()) if (e.jqx.dataFormat) { if (null != (n = e.jqx.dataFormat.tryparsedate(a))) { if (n && n.getFullYear() && 1970 == n.getFullYear() && 0 == n.getMonth() && 1 == n.getDate()) { var l = new Number(a); return isNaN(l) ? "string" : "number" } return "date" } s = "string" } else s = "string"; else s = "date" } } } return s }, showdetails: function (e) { var t = this._getkey(e); this.showdetailsbykey(t) }, hidedetails: function (e) { var t = this._getkey(e); this.hidedetailsbykey(t) }, setcellvaluebykey: function (t, i, s) { var r = this.rowsByKey[t], o = this.getrowindex(r), a = r; if (null != a && a[i] == s) return !1; if (null == a || null !== a[i] || "" !== s) { var n = ""; if (null != a && a[i] !== s) { var l = this.getcolumn(i), h = "string"; if (f = this.source.datafields || (this.source._source ? this.source._source.datafields : null)) { var d = ""; e.each(f, function () { if (this.name == l.displayfield) return this.type && (d = this.type), !1 }), d && (h = d) } if (n = a[i], !l.nullable || null != s && "" !== s && l.nullable && void 0 === s.label) { if (e.jqx.dataFormat.isNumber(n) || "number" == h || "float" == h || "int" == h || "decimal" == h && "date" != h) s = new Number(s), s = parseFloat(s), isNaN(s) && (s = 0); else if ((e.jqx.dataFormat.isDate(n) || "date" == h) && "" != s) { var c = s; "Invalid Date" != (c = new Date(c)) && null != c ? s = c : "Invalid Date" == c && (s = c = new Date) } if (a[i] === s) return } if (a[i] = s, this.treeGrid && (u = this.treeGrid.getrow(t)) && (u[i] = s), null != s && null != s.label && (a[(l = this.getcolumn(i)).displayfield] = s.label, a[i] = s.value, this.treeGrid)) { var u = this.treeGrid.getrow(t); u && (u[l.displayfield] = s.label, u[i] = s.value) } } if (this.source && this.source._knockoutdatasource && !this._updateFromAdapter && this.autokoupdates && this.source._source._localdata) { var p = o, m = this.source._source._localdata()[p]; this.source.suspendKO = !0; var g = m; if (g[i] && g[i].subscribe) null != s && null != s.label ? (g[l.displayfield](s.label), g[i](s.value)) : g[i](s); else { var f = this.source._source.datafields, v = null; if (f && e.each(f, function () { if (this.name == i) return v = this.map, !1 }), null == v) null != s && null != s.label ? (g[i] = s.value, g[l.displayfield] = s.label) : g[i] = s; else { var x = v.split(this.source.mapChar); if (x.length > 0) { for (var w = g, b = 0; b < x.length - 1; b++) w = w[x[b]]; w[x[x.length - 1]] = s } } this.source._source._localdata.replace(m, e.extend({}, g)) } this.source.suspendKO = !1 } if (this.source.updaterow && (void 0 == sync || 1 == sync)) { try { var _ = t; void 0 == this.source.updaterow(_, a, function (e) { 0 == e && this.setcellvalue(r, i, n, !0, !1) }) && !0 } catch (e) { return !1, void this.setcellvalue(r, i, n) } } var y = this.getrowdisplayindex(r); this._raiseEvent("cellValueChanged", { value: s, oldValue: n, key: t, boundIndex: o, index: y, row: this.rowsByKey[t] }), this._renderrows() } }, setcellvalue: function (e, t, i) { if (null == e || null == t) return !1; var s = parseInt(e), r = this._getkey(s); this.setcellvaluebykey(r, t, i) }, getcelltext: function (e, t) { if (null == e || null == t) return !1; var i = parseInt(e), s = this._getkey(i); return this.getcelltextbykey(s, t) }, getcelltextbykey: function (t, i) { if (null == t || null == i) return null; var s = this.getcellvaluebykey(t, i), r = this.getcolumn(i); return r && "" != r.cellsformat && e.jqx.dataFormat && (e.jqx.dataFormat.isDate(s) ? s = e.jqx.dataFormat.formatdate(s, r.cellsformat, this.gridlocalization) : (e.jqx.dataFormat.isNumber(s) || !isNaN(parseFloat(s)) && isFinite(s)) && (s = e.jqx.dataFormat.formatnumber(s, r.cellsformat, this.gridlocalization))), s }, getcellvalue: function (e, t) { if (null == e || null == t) return !1; var i = parseInt(e), s = this._getkey(i); return this.getcellvaluebykey(s, t) }, getcellvaluebykey: function (e, t) { var i = this.rowsByKey[e]; !i && this.treeGrid && (i = this.treeGrid.getrow(e)); this.getrowindex(i); var s = i; return null != s ? s[t] : null }, beginrowedit: function (e) { var t = this._getkey(e); this.beginroweditbykey(t) }, begincelledit: function (e, t) { var i = this._getkey(e), s = this.getcolumn(t); this.beginroweditbykey(i, s) }, endcelledit: function (e, t, i) { this.endrowedit(e, i) }, endrowedit: function (e, t) { var i = this._getkey(e); this.endroweditbykey(i, t) }, getrowindex: function (e) { var t = this.getRows().indexOf(e); if (-1 != t) return t; if (this.groups && this.groups.length > 0) for (var i = this.getRows(), s = 0; s < i.length; s++) if (e.originalRecord) { if (i[s].uid == e.originalRecord.uid) { t = s; break } } else if (i[s].uid == e.uid) { t = s; break } return t }, getrowdisplayindex: function (e) { var t = this.getView().indexOf(e); if (-1 != t) return t; if (void 0 == e) return t; for (var i = this.getView(), s = 0; s < i.length; s++) if (i[s].uid == e.uid || e.originalRecord && i[s].uid == e.originalRecord.uid) { t = s; break } return t }, beginroweditbykey: function (t, i) { if (null == this._lastSelectedKey && this.selectrowbykey(t), this.editKey === t && void 0 != this.editKey) return !1; if (this.rowinfo[t] && this.rowinfo[t].locked) return !1; if (null != this.editKey) return this.endroweditbykey(t, !0), !1; var s = this.editSettings.editSingleCell; if (!i && s && this.columns.records && this.columns.records.length > 0) { for (u = 0; u < this.columns.records.length && (!(i = this.columns.records[u]).editable || i.hidden) ; u++); if (!i) return !1 } if (s && i && !i.editable) return this.editKey = null, !1; s && (this.editColumn = i); var r = this, o = this.rowsByKey[t]; if (this.treeGrid) o = this.treeGrid.getrow(t); var a = this.getrowindex(o), n = this._getuirow(t), l = this._getpinneduirow(t); this._editors = new Array; var h = !1; if (n) for (var d = n[0].cells, c = 0, u = 0; u < d.length; u++) { var p = this.columns.records[u], m = d[u]; if (!p.rowdetailscolumn && !(p.checkboxcolumn || (p.pinned && (m = l[0].cells[u]), s && i && p.datafield != i.datafield || (e(m).removeClass(this.toTP("jqx-grid-cell-selected")), e(m).removeClass(this.toTP("jqx-fill-state-pressed")), e(m).removeClass(this.toTP("jqx-grid-cell-hover")), e(m).removeClass(this.toTP("jqx-fill-state-hover")), "none" == p.columntype)))) { var g = e(m).outerWidth(), f = e(m).width(); 0 === c && (c = e(m).outerHeight() - 1), e(m).css("padding", "0px"), cellContent = "<div style='height:" + c + "px; width: 100%; overflow: hidden; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 9999;'></div>"; y = this.getcelltextbykey(t, p.displayfield); m.innerHTML = cellContent; var v = e(m.firstChild); switch (p.columntype) { case "textbox": case "default": var x = e("<input style='border: none;' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' type='textbox'/>").appendTo(v); if (this.rtl && x.css("direction", "rtl"), x.addClass(this.toThemeProperty("jqx-input")), x.addClass(this.toThemeProperty("jqx-widget-content")), x.addClass(this.toThemeProperty("jqx-cell-editor")), x[0].onfocus = function (t) { setTimeout(function () { if (t) (i = e(t.target).parent().parent().index()) >= 0 && r.ensurecolumnvisible(r.columns.records[i].datafield); else { var i = e(document.activeElement).parent().parent().index(); i >= 0 && r.ensurecolumnvisible(r.columns.records[i].datafield) } r.content && (r.content[0].scrollTop = 0, r.content[0].scrollLeft = 0), r.gridcontent && (r.gridcontent[0].scrollLeft = 0, r.gridcontent[0].scrollTop = 0) }, 10) }, p.editable) { if (!h) { h = !0; var w = e.jqx.browser.msie && e.jqx.browser.version > 10; w || x.focus(); var b = x; setTimeout(function () { w || b.focus(); try { if ("selectionStart" in b[0]) b[0].setSelectionRange(0, 0); else { var e = b[0].createTextRange(); e.collapse(!0), e.moveEnd("character", 0), e.moveStart("character", 0), e.select() } } catch (e) { } }, 10) } } else x.attr("disabled", !0), x.attr("readOnly", !0), x.addClass(this.toThemeProperty("jqx-fill-state-disabled")); if (x.width(f), x.height(c), e.jqx.browser.msie && e.jqx.browser.version < 9 && x.css("line-height", parseInt(c) + "px"), x.css("text-align", p.cellsalign), null === y && (y = ""), void 0 == y && (y = ""), x.val(y), p.createeditor) { var _ = y, y = this.getcellvaluebykey(t, p.displayfield); p.createeditor(this.treeGrid ? t : a, y, x, _, f, c) } if (this._editors.push({ column: p, editor: x }), "" != p.cellsformat && (-1 == p.cellsformat.indexOf("p") && -1 == p.cellsformat.indexOf("c") && -1 == p.cellsformat.indexOf("n") && -1 == p.cellsformat.indexOf("f") || x.keydown(function (e) { var t = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0, i = String.fromCharCode(t), s = parseInt(i); if (isNaN(s)) return !0; if (r._selection(x).length > 0) return !0; var o = "", a = x.val(); if (p.cellsformat.length > 1) { n = parseInt(p.cellsformat.substring(1)); isNaN(n) && (n = 0) } else var n = 0; if (n > 0 && -1 != a.indexOf(r.gridlocalization.decimalseparator) && r._selection(x).start > a.indexOf(r.gridlocalization.decimalseparator)) return !0; for (var l = 0; l < a.length - n; l++) { var h = a.substring(l, l + 1); null != h.match(/^[0-9]+$/) && (o += h) } return !(o.length >= 11) && void 0 })), p.initeditor) { var _ = y, y = this.getcellvaluebykey(t, p.displayfield); p.initeditor(this.treeGrid ? t : a, y, x, _, f, c) } break; case "custom": case "template": this.editorsCache || (this.editorsCache = new Array); var j = e("<div style='width: 100%; height: 100%; border: none;'></div>").appendTo(v), q = e.trim(p.datafield).split(" ").join(""); -1 != q.indexOf(".") && (q = q.replace(".", "")); T = this.editorsCache["templateeditor_" + q]; if ("custom" == p.columntype) var T = this.editorsCache["customeditor_" + q + "_" + t]; var _ = y, y = this.getcellvaluebykey(t, p.displayfield); T ? ((x = T).width(g), x.height(c), x.appendTo(j)) : ((x = e("<div style='border: none;'></div>")).width(g), x.height(c), T = x, null === y && (y = ""), "custom" != p.columntype ? this.editorsCache["templateeditor_" + q] = x : this.editorsCache["customeditor_" + q + "_" + t] = x, x.appendTo(j), p.createeditor && p.createeditor(this.treeGrid ? t : a, y, x, _, g, c)), p.initeditor && p.initeditor(this.treeGrid ? t : a, y, x, _, g, c), this._editors.push({ column: p, editor: x }) } } } this.editKey = t, this.beginupdate(); var C = this.getrowdisplayindex(o); if (this._raiseEvent("rowBeginEdit", { key: t, index: C, boundIndex: a, row: this.rowsByKey[t] }), s) { var S = null, k = null; (o = this.rowsByKey[t]) && (S = o[i.datafield], k = o[i.displayfield]), this._raiseEvent("cellBeginEdit", { value: S, displayValue: k, key: t, index: C, dataField: i.datafield, displayField: i.displayfield, boundIndex: a, row: this.rowsByKey[t] }) } this.endupdate(!1) }, _toNumber: function (e) { e.indexOf || void 0 == e || (e = e.toString()), e.indexOf(this.gridlocalization.currencysymbol) > -1 && (e = e.replace(this.gridlocalization.currencysymbol, "")); (e = (e = function (e, t, i) { var s = e; if (t == i) return e; for (var r = s.indexOf(t) ; -1 != r;) r = (s = s.replace(t, i)).indexOf(t); return s }(e, this.gridlocalization.thousandsseparator, "")).replace(this.gridlocalization.decimalseparator, ".")).indexOf(this.gridlocalization.percentsymbol) > -1 && (e = e.replace(this.gridlocalization.percentsymbol, "")); for (var t = "", i = 0; i < e.length; i++) { var s = e.substring(i, i + 1); "-" === s && (t += "-"), "." === s && (t += "."), null != s.match(/^[0-9]+$/) && (t += s) } return e = t, e = e.replace(/ /g, "") }, _geteditorvalue: function (t, i, s, r) { var o = new String; if (i) { if (!t.geteditorvalue) switch (t.columntype) { case "textbox": default: if (o = i.val(), "" != t.cellsformat) { var a = "string", n = this.source.datafields || (this.source._source ? this.source._source.datafields : null); if (n) { var l = ""; e.each(n, function () { if (this.name == t.displayfield) return this.type && (l = this.type), !1 }), l && (a = l) } var h = "number" === a || "float" === a || "int" === a || "integer" === a, d = "date" === a || "time" === a; if (h || "string" === a && (-1 != t.cellsformat.indexOf("p") || -1 != t.cellsformat.indexOf("c") || -1 != t.cellsformat.indexOf("n") || -1 != t.cellsformat.indexOf("f"))) { if ("" === o && t.nullable) return ""; o = this._toNumber(o), o = new Number(o), isNaN(o) && (o = "") } if (d || "string" === a && (-1 != t.cellsformat.indexOf("H") || -1 != t.cellsformat.indexOf("m") || -1 != t.cellsformat.indexOf("M") || -1 != t.cellsformat.indexOf("y") || -1 != t.cellsformat.indexOf("h") || -1 != t.cellsformat.indexOf("d"))) { if ("" === o && t.nullable) return ""; var c = o; ("Invalid Date" == (o = new Date(o)) || null == o || t.cellsformat.length > 1) && (e.jqx.dataFormat && (o = e.jqx.dataFormat.parsedate(c, t.cellsformat, this.gridlocalization)), "Invalid Date" != o && null != o || (o = "")) } } t.displayfield != t.datafield && (o = { label: o, value: o }) } if (t.geteditorvalue) { var u = this.getcellvaluebykey(r, t.displayfield); o = t.geteditorvalue(this.treeGrid ? r : s, u, i) } } return o }, endroweditbykey: function (t, i) { var s = this.rowsByKey[t], r = this.getrowindex(s), o = this; if (!0 !== i) { var a = this._editors, n = !0; if (a) { for (var l = this.editKey, h = this._getuirow(l), d = 0; d < a.length; d++) { var c = a[d].editor, u = a[d].column, p = this._geteditorvalue(u, c, r, l); if (u.validation) { c.removeClass(this.toThemeProperty("jqx-grid-validation-label")); var m = u.datafield; try { var g = u.validation({ value: p, row: l, datafield: u.datafield, displayfield: u.displayfield, column: u }, p), f = this.gridlocalization.validationstring; void 0 != g.message && (f = g.message), ("boolean" == typeof g ? g : g.result) || (void 0 != g.showmessage && 1 != g.showmessage || this._showvalidationpopup(h, m, f, c), n = !1) } catch (e) { this._showvalidationpopup(h, m, this.gridlocalization.validationstring, c), n = !1 } } } if (n) { this.dataview._sortHierarchyData = null, this.dataview._sortData = null; for (d = 0; d < a.length; d++) { var c = a[d].editor, u = a[d].column, p = this._geteditorvalue(u, c, r, l), v = s[u.displayfield]; if (p && void 0 != p.label ? (s[u.displayfield] = p.label, s[u.datafield] = p.value) : s[u.displayfield] = p, this.treeGrid) { var x = this.treeGrid.getrow(l); x && (x[u.displayfield] = p) } if (p != v) { if (this.editorsCache) { var w = "customeditor_" + u.displayfield + "_" + t, b = "templateeditor_" + u.displayfield; this.editorsCache[w] && this.editorsCache[w].detach(), this.editorsCache[b] && this.editorsCache[b].detach() } this.beginupdate(), this._raiseEvent("cellValueChanged", { value: p, oldValue: v, key: t, index: r, row: s }), this.endupdate(!1) } } } } if (!n) return !1; this.updaterowbykey(this.editKey, s, !1) } if (this.editorsCache) for (var c in this.editorsCache) e(this.editorsCache[c]).detach(); this.beginupdate(); var _ = this.getrowdisplayindex(s); if (this._raiseEvent("rowEndEdit", { key: t, index: _, boundIndex: r, row: this.rowsByKey[t] }), this.editSettings.editSingleCell) { var p = null, y = null; (s = this.rowsByKey[t]) && (p = s[this.editColumn.datafield], y = s[this.editColumn.displayfield]), this._raiseEvent("cellEndEdit", { value: p, displayValue: y, key: t, index: _, dataField: this.editColumn.datafield, displayField: this.editColumn.displayfield, boundIndex: r, row: this.rowsByKey[t] }) } return this.endupdate(!1), this.editColumn = null, this.editKey = null, this._renderrows(), this._renderhorizontalscroll(), this.host.focus(), setTimeout(function () { o.host.focus() }, 10), !0 }, _showvalidationpopup: function (t, i, s, r) { if (void 0 == s) var s = this.gridlocalization.validationstring; r.addClass(this.toThemeProperty("jqx-grid-validation-label")); var o = e("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;'></div>"), a = e("<div style='width: 20px; height: 20px; z-index: 999999; top: 0px; left: 0px; position: absolute;'></div>"); o.html(s), a.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up")), o.addClass(this.toThemeProperty("jqx-grid-validation")), o.addClass(this.toThemeProperty("jqx-rc-all")), o.hide(), a.hide(), o.prependTo(this.table), a.prependTo(this.table); var n = this.hScrollInstance.value, l = parseInt(n), h = this.getcolumn(i).uielement, d = t; o.css("top", parseInt(d.position().top) + 30 + "px"); var c = parseInt(o.css("top")); a.css("top", c - 11), a.removeClass(), a.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up")); var u = !1; c >= this._table.height() && (a.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-up")), a.addClass(this.toThemeProperty("jqx-grid-validation-arrow-down")), (c = parseInt(d.position().top) - d.outerHeight() - 5) < 0 && (c = 0, a.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-down")), u = !0), o.css("top", c + "px"), a.css("top", c + o.outerHeight() - 9)); var p = -l + parseInt(e(h).position().left); a.css("left", l + p + 30); var m = o.width(); m + p > this.host.width() - 20 && (p -= m + p - this.host.width() + 40), u ? o.css("left", l + parseInt(e(h).position().left) - o.outerWidth()) : o.css("left", l + p), r.mouseenter(function () { r.hasClass("jqx-grid-validation-label") && (o.show(), a.show()) }), r.mouseleave(function () { o.hide(), a.hide() }), this.popups || (this.popups = new Array), this.popups[this.popups.length] = { validation: o, validationrow: a } }, addrow: function (t, i, s, r) { if (void 0 != i) { this._datachanged = !0, void 0 == s && (s = "last"); var o = !1, a = this.that; if (null == t) { var n = this.dataview.filters && this.dataview.filters.length > 0, l = n ? this.source.records.length : this.dataview.totalrecords; if (!this.pageable) { this.source._source.totalrecords ? this.dataview.totalrecords = this.source._source.totalrecords : this.source._source.totalRecords ? this.dataview.totalrecords = this.source._source.totalRecords : 0 !== this.source.hierarchy.length ? this.dataview.totalrecords = this.source.hierarchy.length : this.dataview.totalrecords = this.source.records.length; l = n ? this.source.records.length : this.dataview.totalrecords } if (e.isArray(i)) { var h = new Array; e.each(i, function (e, t) { var s = a.dataview.getid(a.dataview.source.id, i[e], l + e); h.push(s), a.getcolumn(a.dataview.source.id) && (i[e][a.dataview.source.id] = s) }), t = h } else t = this.dataview.getid(this.dataview.source.id, i, l), this.getcolumn(this.dataview.source.id) && (i[this.dataview.source.id] = t) } else e.isArray(i) ? e.each(i, function (e, s) { var r = t[e]; a.getcolumn(a.dataview.source.id) && (i[e][a.dataview.source.id] = r) }) : this.getcolumn(this.dataview.source.id) && (i[this.dataview.source.id] = t); var d = !!this.treeGrid && !!this.treeGrid.virtualModeCreateRecords, c = function (t, i, s, o) { if (t._loading) throw new Error("jqxDataTable: " + t.loadingerrorthatssage); var a = t.vScrollInstance.value, n = !1; return e.isArray(s) ? e.each(s, function (e, s) { var a = null; null != i && null != i[e] && (a = i[e]), this.uid = a, t.rowsByKey[a] = this, i == r && (r = null), n = t.source.addRecord(this, o, r, d) }) : (s.uid = i, t.rowsByKey[i] = s, i == r && (r = null), n = t.source.addRecord(s, o, r, d)), void 0 != t._updating && 0 != t._updating || t.refresh(), t.source && t.source._knockoutdatasource && !t._updateFromAdapter && t.autokoupdates && t.source._source._localdata && (t.source.suspendKO = !0, t.source._source._localdata.push(s), t.source.suspendKO = !1), t.vScrollInstance.setPosition(a), n }; if (this.source.addrow) { var u = function (e, r) { 1 != e && void 0 != e || (void 0 != r && (t = r), c(a, t, i, s)) }; try { void 0 == (o = a.treeGrid ? this.source.addrow(t, i, s, r, u) : this.source.addrow(t, i, s, u)) && (o = !0) } catch (e) { o = !1 } if (0 == o) return !1 } else c(this, t, i, s); return o } return !1 }, deleterow: function (e) { var t = this._getkey(e); this.deleterowbykey(t) }, deleterowbykey: function (t) { if (void 0 != t) { this._datachanged = !0; var i = !1, s = this.that, r = function (t, i) { if (t._loading) throw new Error("jqxDataTable: " + t.loadingerrorthatssage); var s = !1, r = t.vScrollInstance.value; if (e.isArray(i)) e.each(i, function () { var e = this; if (t.rowsByKey[e]) { if (s = !0, t.rowinfo[e].selected && t.unselectrowbykey(e, !1), delete t.rowsByKey[e], t.treeGrid && t.rowinfo[e]) { var i = t.rowinfo[e].row.records, r = function (e) { for (var i = 0; i < e.length; i++) { var s = e[i].uid; delete t.rowsByKey[s], delete t.rowinfo[s], e[i].records && r(e[i].records) } }; i && (r(i), delete t.rowinfo[e]) } t.source.deleteRecord(e) } }); else { s = !1; if (t.rowsByKey[i]) { if (s = !0, t.rowinfo[i].selected && t.unselectrowbykey(i, !1), delete t.rowsByKey[i], t.treeGrid && t.rowinfo[i]) { var o = t.rowinfo[i].row.records, a = function (e) { for (var i = 0; i < e.length; i++) { var s = e[i].uid; delete t.rowsByKey[s], delete t.rowinfo[s], e[i].records && a(e[i].records) } }; o && a(o) } delete t.rowinfo[i], t.source.deleteRecord(i) } } return t.refresh(), t.source && t.source._knockoutdatasource && !t._updateFromAdapter && t.autokoupdates && t.source._source._localdata && (t.source.suspendKO = !0, t.source._source._localdata.pop(rowdata), t.source.suspendKO = !1), t.vScrollInstance.setPosition(r), s }; if (this.source.deleterow) { try { this.source.deleterow(t, function (e) { 1 != e && void 0 != e || r(s, t) }), void 0 == i && (i = !0) } catch (e) { i = !1 } } else i = r(s, t); return i } return !1 }, updaterow: function (e, t) { var i = this._getkey(e); this.updaterowbykey(i, t) }, updaterowbykey: function (t, i, s) { if (void 0 != t && void 0 != i) { var r = this.that, o = !1, a = function (t, i, r) { if (t._loading) throw new Error("jqxDataTable: " + t.loadingerrorthatssage); var o = !1; if (e.isArray(i)) e.each(i, function (e, i) { var s = t.rowsByKey[this], a = function (t, i) { s ? s[this] = r[e] : o = !1 }; a(), t.treeGrid && (s = t.treeGrid.getrow(this), a()) }); else { var a = function (e) { if (e) for (var i = 0; i < t.columns.records.length; i++) e[t.columns.records[i].datafield] = r[t.columns.records[i].datafield], t.groups.length > 0 && e.originalRecord && (e.originalRecord[t.columns.records[i].datafield] = r[t.columns.records[i].datafield]); else o = !1 }; a(l = t.rowsByKey[i]), t.treeGrid && a(l = t.treeGrid.getrow(i)) } var n = t.vScrollInstance.value; if (void 0 != s && 1 != s || void 0 != t._updating && 0 != t._updating || t._renderrows(), t.showaggregates && t._updatecolumnsaggregates && t._updatecolumnsaggregates(), t.source && t.source._knockoutdatasource && !t._updateFromAdapter && t.autokoupdates && t.source._source._localdata) { var l = t.rowsByKey[i], h = t.getrowindex(l), d = t.source._source._localdata()[h]; t.source.suspendKO = !0, t.source._source._localdata.replace(d, e.extend({}, l)), t.source.suspendKO = !1 } return t.vScrollInstance.setPosition(n), o }; if (this.source.updaterow) { try { void 0 == (o = this.source.updaterow(t, i, function (e) { 1 != e && void 0 != e || a(r, t, i) })) && (o = !0) } catch (e) { o = !1 } } else o = a(r, t, i); return o } return !1 }, lockrow: function (e) { var t = this._getkey(e); this.lockrowbykey(t) }, unlockrow: function (e) { var t = this._getkey(e); this.unlockrowbykey(t) }, lockrowbykey: function (e) { this.rowinfo[e] ? this.rowinfo[e].locked = !0 : this.rowinfo[e] = { locked: !0 }, this._renderrows() }, unlockrowbykey: function (e) { this.rowinfo[e] ? this.rowinfo[e].locked = !1 : this.rowinfo[e] = { locked: !1 }, this._renderrows() }, selectrow: function (e) { var t = this._getkey(e); this.selectrowbykey(t) }, unselectrow: function (e) { var t = this._getkey(e); this.unselectrowbykey(t) }, selectrowbykey: function (e, t, i) { "keyboard" != t && "mouse" != t && (this._lastSelectedKey = e); var s = !1 !== i; this._doSelection(e, !0, s); var r = this.rowsByKey[e], o = this.getrowindex(r), a = this.getrowdisplayindex(r); this._raiseEvent("rowSelect", { key: e, index: a, boundIndex: o, row: this.rowsByKey[e] }) }, unselectrowbykey: function (e, t) { var i = !1 !== t; this._doSelection(e, !1, i); var s = this.rowsByKey[e], r = this.getrowindex(s), o = this.getrowdisplayindex(s); this._raiseEvent("rowUnselect", { key: e, index: o, boundIndex: r, row: this.rowsByKey[e] }) }, getselection: function () { var e = new Array; if (this.rowinfo) for (var t in this.rowinfo) { var i = this.rowinfo[t]; i.selected && e.push(i.row) } return e }, showdetailsbykey: function (t) { if (this.rowdetails) { var i = this.rowinfo[t]; if (i) { i.expanded = !0; var s = e(this._table.children()[1]).children("[data-key=" + t + "]"), r = e(this._pinnedTable.children()[1]).children("[data-key=" + t + "]"); if (s) { var o = r.children(), a = e(o[0]); if (this.rtl) a = e(o[o.length - 1]); this.rtl ? (a.removeClass(this.toThemeProperty("jqx-grid-group-collapse-rtl")), a.addClass(this.toThemeProperty("jqx-grid-group-expand-rtl")), a.removeClass(this.toThemeProperty("jqx-icon-arrow-left")), a.addClass(this.toThemeProperty("jqx-icon-arrow-down"))) : (a.removeClass(this.toThemeProperty("jqx-grid-group-collapse")), a.addClass(this.toThemeProperty("jqx-grid-group-expand")), a.removeClass(this.toThemeProperty("jqx-icon-arrow-right")), a.addClass(this.toThemeProperty("jqx-icon-arrow-down"))), s.next().show(); var n = r.next(); if (n.show(), e.jqx.browser.msie && e.jqx.browser.version < 8 && (s.next().children().show(), r.next().children().show()), !i.initialized) { var l = i.detailsHeight, h = this.initrowdetails(t, i.row, e(e(n).children().children().children()[0]), i); i.details = e(n).children().children().children()[0], i.initialized = !0, !1 !== h && i.detailsHeight == l || (!1 === h && (i.expanded = !1, i.nodetails = !0, n.hide()), this._renderrows()) } this._updateScrollbars(), ("auto" === this.height || null === this.height || this.autoheight) && this._arrange(); var d = this.getrowindex(i.row), c = this.getrowdisplayindex(i.row); this._raiseEvent("rowExpand", { row: i.row, index: c, boundIndex: d, rowKey: t }) } } } }, hidedetailsbykey: function (t) { if (this.rowdetails) { var i = this.rowinfo[t]; if (i) { i.expanded = !1; var s = e(this._table.children()[1]).children("[data-key=" + t + "]"), r = e(this._pinnedTable.children()[1]).children("[data-key=" + t + "]"); if (s) { var o = r.children(), a = e(o[0]); if (this.rtl) a = e(o[o.length - 1]); this.rtl ? (a.addClass(this.toThemeProperty("jqx-grid-group-collapse-rtl")), a.removeClass(this.toThemeProperty("jqx-grid-group-expand-rtl")), a.addClass(this.toThemeProperty("jqx-icon-arrow-left")), a.removeClass(this.toThemeProperty("jqx-icon-arrow-down"))) : (a.addClass(this.toThemeProperty("jqx-grid-group-collapse")), a.removeClass(this.toThemeProperty("jqx-grid-group-expand")), a.addClass(this.toThemeProperty("jqx-icon-arrow-right")), a.removeClass(this.toThemeProperty("jqx-icon-arrow-down"))), s.next().hide(), r.next().hide(), e.jqx.browser.msie && e.jqx.browser.version < 8 && (s.next().children().hide(), r.next().children().hide()), this._updateScrollbars(), ("auto" === this.height || null === this.height || this.autoheight) && this._arrange(); var n = this.getrowindex(i.row), l = this.getrowdisplayindex(i.row); this._raiseEvent("rowCollapse", { row: i.row, index: l, boundIndex: n, rowKey: t }) } } } }, _renderhorizontalscroll: function () { var e = this.hScrollInstance, t = e.value; "hidden" === this.hScrollBar.css("visibility") && (e.value = 0, t = 0); var i = parseInt(t); if (null != this.table) { var s = this.columnsrow, r = this.columns.records.length - 0, o = this.columns.records, a = 0 == this.source.records.length; if (this.rtl && "hidden" != this.hScrollBar.css("visibility") && (i = e.max - i), a && !this._haspinned) this.table[0].style.left = -i + "px", s[0].style.marginLeft = -i + "px"; else { if (this._haspinned || void 0 == this._haspinned) { for (var n = 0; n < 0 + r; n++) if (o[n].pinned) { var l = null; if (this.showaggregates && this.statusbar[0].cells && (l = this.statusbar[0].cells[n]), this.filterrow && this.filterrow[0].cells && (filtercell = this.filterrow[0].cells[n]), this.rtl) { var h = s[0].cells[n]; h.style.marginLeft = -parseInt(t) + "px", l && (l.style.marginLeft = -parseInt(t) + "px"), this.filterrow && filtercell && (filtercell.style.marginLeft = -parseInt(t) + "px") } else (h = s[0].cells[n]).style.marginLeft = i + "px", l && (l.style.marginLeft = i + "px"), this.filterrow && filtercell && (filtercell.style.marginLeft = i + "px") } this._table[0].style.left = -i + "px", s[0].style.marginLeft = -i + "px" } else 0 == this._haspinned && (this.table[0].style.left = -i + "px", s[0].style.marginLeft = -i + "px"); this.filterrow && (this.filterrow[0].style.left = -i + "px") } if (this.showaggregates && this.aggregates[0].cells) { var d = 0; this.rtl && "hidden" != this.vScrollBar.css("visibility") && (d = "hidden" != this.hScrollBar.css("visibility") ? 2 + parseInt(this.hScrollBar.css("left")) : 3 + parseInt(this.vScrollBar.width())), this.aggregates[0].style.marginLeft = -i + d + "px" } } }, _initializeColumns: function () { var i = this.source.datafields; null == i && this.source._source && (i = this.source._source.datafields); var s = !!i && i.length > 0; if (this.columns && this.columns.records) for (var r = 0; r < this.columns.records.length; r++) this._removecolumnhandlers(this.columns.records[r]); var o = this, a = new e.jqx.collection(this.element), n = 0; if (this._haspinned = !1, this._columns ? this.columns = this._columns : this._columns = this.columns, "checkbox" == this.selectionmode && ((l = new t(o, this)).visibleindex = n++, l.width = o.indentwidth, l.checkboxcolumn = !0, l.editable = !1, l.columntype = "checkbox", l.groupable = !1, l.draggable = !1, l.filterable = !1, l.resizable = !1, l.datafield = "_checkboxcolumn", a.add(l)), this.rowdetails && !this.treeGrid) { var l = new t(o, this); l.visibleindex = n++, l.width = o.indentwidth, l.editable = !1, l.rowdetailscolumn = !0, l.groupable = !1, l.draggable = !1, l.pinned = !0, l.filterable = !1, l.resizable = !1, a.add(l) } var h = new Array; e.each(this.columns, function (e) { if (void 0 != o.columns[e]) { var i = new t(o, this); if (i.visibleindex = n++, void 0 != this.dataField && (this.datafield = this.dataField), this.pinned && (o._haspinned = !0), null == this.datafield) o.source && o.source._source && "array" == o.source._source.datatype && (s || (o.source._source.datafields ? o.source._source.datafields.push({ name: e.toString() }) : (o.source._source.datafields = new Array, o.source._source.datafields.push({ name: e.toString() }))), this.datafield = e.toString(), this.displayfield = e.toString(), i.datafield = this.datafield, i.displayfield = this.displayfield); else { if (h[this.datafield]) throw new Error("jqxDataTable: Invalid column 'dataField' setting. jqxDataTable's columns should be initialized with unique data fields."); h[this.datafield] = !0 } a.add(i) } }), this.rtl && a.records.reverse(), this.columns = a }, addfilter: function (e, t) { this.getcolumn(e) && this.dataview.addfilter(e, t) }, removefilter: function (e) { this.getcolumn(e) && this.dataview.removefilter(e) }, clearfilters: function (e, t) { this.dataview.filters = new Array, this.dataview._filteredData = null, this.dataview._sortData = null, this.dataview._sortHierarchyData = null, !1 !== t && this.resetfilter(), !1 !== e && this.applyfilters() }, resetfilter: function () { if (this.filterinput && this.filterinput.val(""), this.filterrow) for (var t = 0; t < this.filterrow[0].cells.length; t++) { var i = this.filterrow[0].cells[t], s = e(i).find("input:first"), r = e(i).find(".filterconditions"), o = this.columns.records[t]; if (o.filterable) { s.val(""); var a = this.getcolumntypebydatafield(o), n = new e.jqx.filter; switch (a) { case "number": case "int": case "float": case "decimal": filtertype = "numericfilter", conditions = n.getoperatorsbyfiltertype("numericfilter"); break; case "boolean": case "bool": filtertype = "booleanfilter", conditions = n.getoperatorsbyfiltertype("booleanfilter"); break; case "date": case "time": filtertype = "datefilter", conditions = n.getoperatorsbyfiltertype("datefilter"); break; case "string": filtertype = "stringfilter", conditions = n.getoperatorsbyfiltertype("stringfilter") } r.length > 0 && ("stringfilter" === filtertype ? r.jqxDropDownList({ selectedIndex: 2 }) : r.jqxDropDownList({ selectedIndex: 0 })) } } }, applyfilters: function () { if (this.editable && null != this.editKey) this.endroweditbykey(this.editKey); if (this.dataview._filteredData = null, this.dataview._sortData = null, this.dataview._sortHierarchyData = null, this.serverProcessing ? (this.dataview.pagenum = 0, this.updatebounddata("filter")) : (this.gotopage(0), this.refresh()), arguments && arguments.length > 0) { if (this._updateSimpleFilter && this.filtercolumnsList) { var e = this.filtercolumnsList.jqxDropDownList("getSelectedItem").value; this._updateSimpleFilter(e) } this._updateFilterRow && this._updateFilterRow() } this._raiseEvent("filter", { filters: this.dataview.filters }) }, sortby: function (e, t) { if (this.dataview._filteredData = null, this.dataview._sortData = null, this.dataview._sortHierarchyData = null, this._loading) throw new Error("jqxDataTable: " + this.loadingerrormessage); if (this.editable && null != this.editKey) this.endroweditbykey(this.editKey); if (null == e && (t = null, e = this.sortcolumn), e) { var i = this; ascending = "a" == t || "asc" == t || "ascending" == t || 1 == t, i.sortdirection = null != t ? { ascending: ascending, descending: !ascending } : { ascending: !1, descending: !1 }, i.sortcolumn = null != t ? e : null, i.source.sort && (i.dataview.sortfield = e, i.dataview.sortfielddirection = null == t ? "" : ascending ? "asc" : "desc", i.source.sort && !this._loading && i.source.sort(e, t)), i.dataview.sortby(e, t), i._raiseEvent("sort", { sortcolumn: this.sortcolumn, sortdirection: this.sortdirection }) } this.serverProcessing ? this.updatebounddata("sort") : this.refresh() }, _togglesort: function (e) { var t = this; if (!this.disabled && e.sortable && t.sortable) { var i = { sortcolumn: this.sortcolumn, sortdirection: this.sortdirection }, s = null; s = null == i.sortcolumn || i.sortcolumn != e.displayfield || 1 != (s = i.sortdirection.ascending) && null, t.sortby(e.displayfield, s) } }, _renderfilter: function () { var t = this, i = e("<div style='position: relative; margin: 4px;'><input role='textbox' type='text'/><div style='cursor: pointer; height: 100%;'><div></div></div></div>"); i.height(22); var s = i.find("input"), r = i.find("div:first"); i.addClass(this.toThemeProperty("jqx-rc-all")), i.addClass(this.toThemeProperty("jqx-widget")), i.addClass(this.toThemeProperty("jqx-input-group")), s.addClass(this.toThemeProperty("jqx-input")), s.addClass(this.toThemeProperty("jqx-rc-l")), s.addClass(this.toThemeProperty("jqx-input-group-addon")), s.addClass(this.toThemeProperty("jqx-widget")), s.addClass(this.toThemeProperty("jqx-widget-content")), r.addClass(this.toThemeProperty("jqx-fill-state-normal")), r.addClass(this.toThemeProperty("jqx-rc-r")), r.addClass(this.toThemeProperty("jqx-input-group-addon")), r.find("div").addClass(this.toThemeProperty("jqx-icon-search")), this.filter.children().remove(), this.filterbutton = r; for (var o = new Array, a = 0; a < t.columns.records.length; a++) t.columns.records[a].datafield && t.columns.records[a].filterable && o.push({ label: t.columns.records[a].text, value: t.columns.records[a].displayfield }); var n = o.length < 10, l = e("<div style='position: relative; top: 50%; display: none; margin-right: 4px; margin-left: 4px; float: left;'>" + this.gridlocalization.filtersearchstring + "</div>"); this.filter.append(l); var h = e("<div class='filtercolumns' style='margin: 4px; float: left;'></div>"); this.filter.append(h), h.jqxDropDownList && h.jqxDropDownList({ theme: this.theme, autoDropDownHeight: n, rtl: t.rtl, dropDownWidth: 220, selectedIndex: 0, width: "auto", height: 20, source: o, displayMember: "label", valueMember: "value" }), this.filtercolumnsList = h; var d = function (e) { t.filterinput.val(""); for (var i = 0; i < t.dataview.filters.length; i++) { var s = t.dataview.filters[i]; s.datafield === e && t.filterinput.val(s.filter.getfilterat(0).filtervalue) } }; t._updateSimpleFilter = d, this.addHandler(h, "select", function (e) { var t = e.args.item.value; d(t) }), "simple" === this.filtermode ? (this.filtercolumnsList.hide(), l.show(), l.css("margin-top", -this.filter.height() / 2)) : (this.filtercolumnsList.show(), l.hide()); var c = function () { if (!r.hasClass("jqx-fill-state-disabled")) { var i = s.val(); if (h.jqxDropDownList) var o = h.jqxDropDownList("getSelectedItem"); var a = function (i, s, r) { var o = new e.jqx.filter, a = t.getcolumntypebydatafield(i), n = t._getfiltertype(a); if ("datefilter" == n) l = o.createfilter(n, s, "EQUAL", null, i.cellsformat, t.gridlocalization); else if ("numericfilter" == n || "booleanfilter" == n) { "numericfilter" == n && ("," == t.gridlocalization.decimalseparator && s.indexOf(t.gridlocalization.decimalseparator) >= 0 && (s = s.replace(t.gridlocalization.decimalseparator, ".")), s.indexOf(t.gridlocalization.currencysymbol) >= 0 && (s = s.replace(t.gridlocalization.currencysymbol, "")), s.indexOf(t.gridlocalization.percentagesymbol) >= 0 && (s = s.replace(t.gridlocalization.percentagesymbol, ""))); l = o.createfilter(n, s, "EQUAL", null, i.cellsformat, t.gridlocalization) } else var l = o.createfilter(n, s, "CONTAINS"); return o.operator = r, o.addfilter(0, l), o }; if ("simple" !== t.filtermode) { if (o) { var n = o.value, l = a(c = t.getcolumn(n), i, "and"); i.length > 0 ? (t.removefilter(n), t.addfilter(n, l), t.applyfilters()) : (t.removefilter(n), t.applyfilters()), "advanced" === t.filtermode && t._updateFilterRow && t._updateFilterRow(!0) } } else { if (t.clearfilters(!1, !1), i.length > 0) for (var d = 0; d < t.columns.records.length; d++) { var c = t.columns.records[d], l = a(c, i, "or"); t.addfilter(c.datafield, l) } t.applyfilters() } 0 == t.dataview.filters.length ? t.filtericon.fadeOut(200) : t.filtericon.fadeIn(200) } }; if (s.keydown(function (e) { if (13 === e.keyCode) return c(), e.preventDefault && e.preventDefault(), !1 }), r.click(function () { c() }), this.filterinput = s, this.filter.append(i), "advanced" == this.filtermode) { var u = e("<a style='float: left; position: relative; margin: 2px; margin-left: 10px;' href='#'>" + this.gridlocalization.filterstring + "</a>"); i.append(u), this.addHandler(u, "click", function (i) { var s = function (i) { if (t.filterrow) for (var s = 0; s < t.filterrow[0].cells.length; s++) { var r = t.filterrow[0].cells[s], o = e(r).find("input:first"), a = t.columns.records[s]; if (a.filterable) { !0 === i && o.val(""); for (var n = 0; n < t.dataview.filters.length; n++) { var l = t.dataview.filters[n]; if (l.datafield === a.displayfield) { o.val(l.filter.getfilterat(0).filtervalue); break } } } } }; t._updateFilterRow = s; var r = function () { t.filtercolumnsList.jqxDropDownList({ disabled: !0 }), t.filterinput.addClass(t.toThemeProperty("jqx-fill-state-disabled")), t.filterinput.attr("disabled", !0), t.filterbutton.addClass(t.toThemeProperty("jqx-fill-state-disabled")) }; return 0 === t.filter.find(".filterrow").length ? (t._renderadvancedfilter(), r(), s(), t._arrange()) : ("none" === t.filter.find(".filterrow").css("display") ? (r(), t.filter.find(".filterrow").removeClass("filterrow-hidden"), s(), t.filter.find(".filterrow").show()) : (t.filtercolumnsList.jqxDropDownList({ disabled: !1 }), t.filterinput.removeClass(t.toThemeProperty("jqx-fill-state-disabled")), t.filterinput.attr("disabled", !1), t.filterbutton.removeClass(t.toThemeProperty("jqx-fill-state-disabled")), d(t.filtercolumnsList.jqxDropDownList("getSelectedItem").value), t.filter.find(".filterrow").addClass("filterrow-hidden"), t.filter.find(".filterrow").hide()), t._arrange()), !1 }) } var p = e("<div style='float: left; width: 16px; height: 16px; position: relative; margin: 3px;'></div>"); p.attr("title", t.gridlocalization.filterclearstring), p.addClass(t.toThemeProperty("jqx-icon-close")), i.append(p), p.hide(), t.filtericon = p, p.click(function () { t.clearfilters(), t.filtericon.fadeOut(200) }) }, _renderadvancedfilter: function () { var t = this, i = function () { t.clearfilters(!1, !1); for (var i = t.filtercolumnsList.jqxDropDownList("getSelectedItem").value, s = (t.filterinput.val(), 0) ; s < t.filterrow[0].cells.length; s++) { var r = t.filterrow[0].cells[s], o = e(r).find("input:first"), a = e(r).find(".filterconditions"), n = t.columns.records[s], l = ""; if (n.filterable) { n.displayfield === i && t.filterinput.val(o.val()); var h = t.getcolumntypebydatafield(n), d = new e.jqx.filter; switch (h) { case "number": case "int": case "float": case "decimal": filtertype = "numericfilter", conditions = d.getoperatorsbyfiltertype("numericfilter"); break; case "boolean": case "bool": filtertype = "booleanfilter", conditions = d.getoperatorsbyfiltertype("booleanfilter"); break; case "date": case "time": filtertype = "datefilter", conditions = d.getoperatorsbyfiltertype("datefilter"); break; case "string": filtertype = "stringfilter", conditions = d.getoperatorsbyfiltertype("stringfilter") } if (0 == a.length) l = "stringfilter" === filtertype ? conditions[2] : conditions[0]; else { var c = a.jqxDropDownList("getSelectedItem"); l = c ? conditions[c.index] : "stringfilter" === filtertype ? conditions[2] : conditions[0] } var u = o.val(); if (u.length > 0) { var p = n.displayfield, m = new e.jqx.filter; "numericfilter" == filtertype && ("," == t.gridlocalization.decimalseparator && u.indexOf(t.gridlocalization.decimalseparator) >= 0 && (u = u.replace(t.gridlocalization.decimalseparator, ".")), u.indexOf(t.gridlocalization.currencysymbol) >= 0 && (u = u.replace(t.gridlocalization.currencysymbol, "")), u.indexOf(t.gridlocalization.percentagesymbol) >= 0 && (u = u.replace(t.gridlocalization.percentagesymbol, ""))); d = m.createfilter(filtertype, u, l, null, n.cellsformat, t.gridlocalization); m.addfilter(0, d), u.length > 0 && t.addfilter(p, m) } } } t.dataview.filters.length > 0 ? t.applyfilters() : t.clearfilters(), 0 == t.dataview.filters.length ? t.filtericon.fadeOut(200) : t.filtericon.fadeIn(200) }; !function () { var s = e("<div style='position: relative;' class='filterrow'></div>").appendTo(t.filter); t.filterrow = s, s[0].cells = new Array, s.height(24), s.width(t.table.width()); var r = t.filtercolumnsList.jqxDropDownList("getSelectedItem").value, o = t.filterinput.val(); e.each(t.columns.records, function () { var a = this, n = e("<div></div>").appendTo(s); if (n.css("position", "absolute"), n.css("left", a.uielement[0].style.left), a.pinned && (n.css("z-index", t.tableZIndex + t.columns.records.length), n.addClass(t.toThemeProperty("jqx-widget-header"))), s[0].cells.push(n[0]), !this.filterable) return !0; var l = e("<input style='margin-left: 4px; height: 20px; float: left;' role='textbox' type='text'/>").appendTo(n); l.keydown(function (e) { 13 === e.keyCode && i() }), a.displayfield === r && l.val(o), l.addClass(t.toThemeProperty("jqx-input")), l.addClass(t.toThemeProperty("jqx-rc-all")), l.addClass(t.toThemeProperty("jqx-widget")), l.addClass(t.toThemeProperty("jqx-widget-content")); var h = e("<div style='cursor: pointer; margin-left: 4px; margin-bottom: 4px; margin-top: 6px; width: 18px; position: relative; margin-top: 4px; float: left;'></div>").appendTo(n); h.append(e("<div style='width: 16px; height: 16px;' class='" + t.toThemeProperty("jqx-grid-column-filterbutton") + "'></div>")), l.focus(function () { t.ensurecolumnvisible(a.displayfield), t.filter[0].scrollLeft = 0, t.ensurecolumnvisible(a.displayfield), setTimeout(function () { t.filter[0].scrollLeft = 0, t.ensurecolumnvisible(a.displayfield) }, 10) }), h.click(function () { var i = e("<div class='filterconditions' style='position: relative; margin-top: 1px; float: left;'></div>"); i.insertAfter(h), h.remove(); var s = t.getcolumntypebydatafield(a), r = t._getfiltersbytype(s); index = "string" === s ? 2 : 0, i.jqxDropDownList({ theme: t.theme, enableBrowserBoundsDetection: !0, renderMode: "simple", arrowSize: 0, selectedIndex: index, rtl: t.rtl, dropDownWidth: 230, dropDownHeight: 180, width: 20, height: 20, source: r, selectionRenderer: function () { return "<div style='width: 16px; height: 16px;' class='" + t.toThemeProperty("jqx-grid-column-filterbutton") + "'></div>" } }), t.addHandler(i, "close", function (e) { l.focus(), setTimeout(function () { l.focus() }, 10) }), i.removeAttr("tabindex"), i.find("div").removeAttr("tabindex"), i.jqxDropDownList("open") }), l[0].style.width = a.width - 6 - 22 + "px" }), e("<div style='clear: both;'></div>").appendTo(s) }(); var s = e("<div class='filterrow'></div>").appendTo(t.filter), r = e("<input type='button' style='float: left; margin-top: 4px; margin-left: 4px;' value='" + t.gridlocalization.filterapplystring + "'/>").appendTo(s), o = e("<input type='button' style='float: left; margin-top: 4px;  margin-left: 4px;' value='" + t.gridlocalization.filtercancelstring + "'/>").appendTo(s); r.jqxButton({ theme: t.theme }), o.jqxButton({ theme: t.theme }), o.click(function () { t.filtercolumnsList.jqxDropDownList({ disabled: !1 }), t.filterinput.removeClass(t.toThemeProperty("jqx-fill-state-disabled")), t.filterinput.attr("disabled", !1), t.filterbutton.removeClass(t.toThemeProperty("jqx-fill-state-disabled")), t.filter.find(".filterrow").addClass("filterrow-hidden"), t.filter.find(".filterrow").hide(), t._arrange() }), r.click(function () { i() }), t._renderhorizontalscroll() }, _getfiltertype: function (e) { var t = "stringfilter"; switch (e) { case "number": case "int": case "float": case "decimal": t = "numericfilter"; break; case "boolean": case "bool": t = "booleanfilter"; break; case "date": case "time": t = "datefilter"; break; case "string": t = "stringfilter" } return t }, getcolumntypebydatafield: function (t) { var i = this, s = i.source.datafields || (i.source._source ? i.source._source.datafields : null); if (s) { var r = ""; if (e.each(s, function () { if (this.name == t.displayfield) return this.type && (r = this.type), !1 }), r) return r } return "string" }, _getfiltersbytype: function (e) { var t = this, i = ""; switch (e) { case "number": case "float": case "int": i = t.gridlocalization.filternumericcomparisonoperators; break; case "date": i = t.gridlocalization.filterdatecomparisonoperators; break; case "boolean": case "bool": i = t.gridlocalization.filterbooleancomparisonoperators; break; case "string": default: i = t.gridlocalization.filterstringcomparisonoperators } return i }, _getcellvalue: function (e, t) { var i = null; return i = t[e.datafield], null != e.displayfield && (i = t[e.displayfield]), null == i && (i = ""), i }, _renderrows: function () { if (this.editable && null != this.editKey) this.endroweditbykey(this.editKey); if (this.treeGrid) this.treeGrid._renderrows(); else if (!this._loading && !this._updating) { this.rendering && this.rendering(); var t = this, i = 0; this.table[0].rows = new Array; P = this.toTP("jqx-cell") + " " + this.toTP("jqx-widget-content"); this.rtl && (P += " " + this.toTP("jqx-cell-rtl")); var s = this.columns.records.length, r = e.jqx.browser.msie && e.jqx.browser.version < 8; r && this.host.attr("hideFocus", "true"); var o = t.groups.length, a = new Array, n = this.source.records; if (n = this.dataview.evaluate(n), this.dataViewRecords = n, "all" == this.dataview.pagesize || !this.pageable || this.serverProcessing) { l = n; if (this.pageable && this.serverProcessing && n.length > this.dataview.pagesize) l = n.slice(this.dataview.pagesize * this.dataview.pagenum, this.dataview.pagesize * this.dataview.pagenum + this.dataview.pagesize) } else var l = n.slice(this.dataview.pagesize * this.dataview.pagenum, this.dataview.pagesize * this.dataview.pagenum + this.dataview.pagesize); if (t.groups && t.groups.length > 0) { var h = this.pageable ? this.dataview.pagesize * this.dataview.pagenum : 0, d = t.source.getGroupedRecords(t.groups, "records", "label", null, "data", null, "parent", l, h), c = function (e, t) { for (var i = 0; i < e.length; i++) { var s = e[i]; if (t.push(s), s.records && s.records.length > 0) for (var r = c(s.records, new Array), o = 0; o < r.length; o++) r[o].leaf, t.push(r[o]) } return t }; l = a = c.call(t, d, new Array), this.rowsByKey = new Array; for (z = 0; z < l.length; z++) { var u = l[z]; this.rowsByKey[u.uid] = u } } a = l; this.renderedRecords = a; var p = a.length, m = this.tableZIndex, g = 0, f = 0; if (r) for (j = 0; j < s; j++) { (L = (q = this.columns.records[j]).width) < q.minwidth && (L = q.minwidth), L > q.maxwidth && (L = q.maxwidth); D = e('<table><tr><td role="gridcell" style="max-width: ' + L + "px; width:" + L + 'px;" class="' + P + '"></td></tr></table>'); e(document.body).append(D); var v = D.find("td"); g = 1 + parseInt(v.css("padding-left")) + parseInt(v.css("padding-right")), D.remove(); break } for (var x = this.rtl ? " " + this.toTP("jqx-grid-table-rtl") : "", w = "<table cellspacing='0' cellpadding='0' class='" + this.toTP("jqx-grid-table") + x + "' id='table" + this.element.id + "'><colgroup>", b = "<table cellspacing='0' cellpadding='0' class='" + this.toTP("jqx-grid-table") + x + "' id='pinnedtable" + this.element.id + "'><colgroup>", _ = 0, y = s, j = 0; j < s; j++) { var q = this.columns.records[j]; if (q.hidden) _++, y--; else { if ((L = q.width) < q.minwidth && (L = q.minwidth), L > q.maxwidth && (L = q.maxwidth), (L -= g) < 0 && (L = 0), r) { N = L; j == _ && N++, q.rowdetailscolumn ? (b += "<col style='max-width: " + (N = N + 4) + "px; width: " + N + "px;'>", w += "<col style='max-width: " + N + "px; width: " + N + "px;'>") : (b += "<col style='max-width: " + N + "px; width: " + N + "px;'>", w += "<col style='max-width: " + N + "px; width: " + N + "px;'>") } else b += "<col style='max-width: " + L + "px; width: " + L + "px;'>", w += "<col style='max-width: " + L + "px; width: " + L + "px;'>"; f += L } } w += "</colgroup>", b += "</colgroup>", this._hiddencolumns = !1; var T = !1; if (this.rowdetails && this._pinnedTable && (this._pinnedTable.find("[data-role=details]").detach(), this._table.find("[data-role=details]").detach()), 0 === p) { var C = '<tr role="row">', S = this.host.height(); if (this.pageable && (S -= this.pagerheight, "both" === this.pagerposition && (S -= this.pagerheight)), S -= this.columnsheight, this.filterable) { var k = this.filter.find(".filterrow"), I = 1; this.filter.find(".filterrow-hidden").length > 0 && (I = 0), S -= this.filterheight + this.filterheight * k.length * I } this.showstatusbar && (S -= this.statusbarheight), this.showaggregates && (S -= this.aggregatesheight), S < 25 && (S = 25), "hidden" != this.hScrollBar[0].style.visibility && (S -= this.hScrollBar.outerHeight()), ("auto" === this.height || null === this.height || this.autoheight) && (S = 300); var D = '<td colspan="' + this.columns.records.length + '" role="gridcell" style="border: none; min-height: ' + S + "px; height: " + S + "px; max-width:" + f + "px; width:" + f + "px;", P = this.toTP("jqx-cell") + " " + this.toTP("jqx-grid-cell") + " " + this.toTP("jqx-item"); D += '" class="' + (P += " " + this.toTP("jqx-center-align")) + '">', D += this.gridlocalization.emptydatastring, w += C += D += "</td>", b += C, this.table[0].style.width = f + 2 + "px", i = f } for (var B = this.getRows(), z = 0; z < a.length; z++) { Z = (u = a[z]).uid; void 0 === u.uid && (u.uid = this.dataview.generatekey()); var C = '<tr data-key="' + Z + '" role="row" id="row' + z + this.element.id + '">', H = '<tr data-key="' + Z + '" role="row" id="row' + z + this.element.id + '">'; if (o > 0 && u.level < o) var C = '<tr data-role="row-group" data-key="' + Z + '" role="row" id="row' + z + this.element.id + '">', H = '<tr data-role="row-group" data-key="' + Z + '" role="row" id="row' + z + this.element.id + '">'; for (var M = 0, E = 0, j = 0; j < s; j++) { var A = this.columns.records[j]; (A.pinned || this.rtl && this.columns.records[s - 1].pinned) && (T = !0); var L = A.width; L < A.minwidth && (L = A.minwidth), L > A.maxwidth && (L = A.maxwidth), (L -= g) < 0 && (L = 0); P = this.toTP("jqx-cell") + " " + this.toTP("jqx-grid-cell") + " " + this.toTP("jqx-item"); A.pinned && (P += " " + this.toTP("jqx-grid-cell-pinned")), this.sortcolumn === A.displayfield && (P += " " + this.toTP("jqx-grid-cell-sort")), this.altrows && z % 2 != 0 && (P += " " + this.toTP("jqx-grid-cell-alt")), this.rtl && (P += " " + this.toTP("jqx-cell-rtl")); var O = ""; if (o > 0 && u.level < o) if (r) P += " " + this.toTP("jqx-grid-cell-pinned"); else { P += " " + this.toTP("jqx-grid-cell-pinned"), O += ' colspan="' + s + '"'; for (var N = 0, F = 0; F < s; F++) { var R = t.columns.records[F], W = R.width; W < R.minwidth && (L = R.minwidth), W > R.maxwidth && (L = R.maxwidth), (W -= g) < 0 && (W = 0), R.hidden || (N += W) } L = N } var D = '<td role="gridcell" ' + O + ' style="max-width:' + L + "px; width:" + L + "px;", V = '<td role="gridcell" ' + O + ' style="pointer-events: none; visibility: hidden; border-color: transparent; max-width:' + L + "px; width:" + L + "px;"; j == s - 1 && 1 == s && (D += "border-right-color: transparent;", V += "border-right-color: transparent;"); var G = !1; o > 0 && u.level < o && (G = !0), G ? this.rtl && (P += " " + this.toTP("jqx-right-align")) : "left" != A.cellsalign && ("right" === A.cellsalign ? P += " " + this.toTP("jqx-right-align") : P += " " + this.toTP("jqx-center-align")), this.rowinfo[u.uid] && (this.rowinfo[u.uid].selected && !A.rowdetailscolumn && this.editKey !== u.uid && "none" !== this.selectionmode && (P += " " + this.toTP("jqx-grid-cell-selected"), P += " " + this.toTP("jqx-fill-state-pressed")), this.rowinfo[u.uid].locked && (P += " " + this.toTP("jqx-grid-cell-locked"))), A.hidden ? G || (D += "display: none;", V += "display: none;", this._hiddencolumns = !0) : (M += g + L, 0 == E && (D += "border-left-width: 0px;", V += "border-left-width: 0px;"), E++), o > 0 && r && G && j >= o && (D += "font-size: 1px; border-color: transparent;  color: transparent;", V += "font-size: 1px; border-color: transparent; color: transparent;"), A.pinned && (D += "pointer-events: auto;", V += "pointer-events: auto;"), !G && A.rowdetailscolumn && (this.rowinfo[u.uid] ? this.rowinfo[u.uid].nodetails || (this.rowinfo[u.uid].expanded ? (this.rtl ? P += " " + this.toTP("jqx-grid-group-expand-rtl") : P += " " + this.toTP("jqx-grid-group-expand"), P += " " + this.toTP("jqx-icon-arrow-down")) : this.rtl ? (P += " " + this.toTP("jqx-grid-group-collapse-rtl"), P += " " + this.toTP("jqx-icon-arrow-left")) : (P += " " + this.toTP("jqx-grid-group-collapse"), P += " " + this.toTP("jqx-icon-arrow-right"))) : this.rtl ? (P += " " + this.toTP("jqx-grid-group-collapse-rtl"), P += " " + this.toTP("jqx-icon-arrow-left")) : (P += " " + this.toTP("jqx-grid-group-collapse"), P += " " + this.toTP("jqx-icon-arrow-right"))), this.autorowheight || (P += " " + this.toTP("jqx-grid-cell-nowrap ")); var U = t._getcellvalue(A, u); if (o > 0 && u.level < o && (U = u.label), "" != A.cellsformat && e.jqx.dataFormat && (e.jqx.dataFormat.isDate(U) ? U = e.jqx.dataFormat.formatdate(U, A.cellsformat, t.gridlocalization) : (e.jqx.dataFormat.isNumber(U) || !isNaN(parseFloat(U)) && isFinite(U)) && (U = e.jqx.dataFormat.formatnumber(U, A.cellsformat, t.gridlocalization))), G) this.groupsrenderer && (U = this.groupsrenderer(U, u, u.level)); else { if ("" != A.cellclassname && A.cellclassname) if ("string" == typeof A.cellclassname) P += " " + A.cellclassname; else { var Y = A.cellclassname(z, A.datafield, U, u); Y && (P += " " + Y) } if ("" != A.cellsrenderer && A.cellsrenderer) { var K = B.indexOf(u); U = A.cellsrenderer(K, A.datafield, U, u) } } if (D += '" class="' + P + '">', D += U, D += "</td>", V += '" class="' + P + '">', V += U, V += "</td>", A.pinned ? (H += D, C += D) : (C += D, T && (H += V)), o > 0 && !r && u.level < o) break } if (0 == i && (this.table[0].style.width = M + 2 + "px", i = M), C += "</tr>", H += "</tr>", w += C, b += H, this.rowinfo[u.uid] || (this.rowinfo[u.uid] = { group: G, row: u, details: null, detailsHeight: 200, initialized: !1, expanded: !1 }), this.serverProcessing && (this.rowinfo[u.uid].row = u), this.rowdetails) { var $ = this.rowinfo[u.uid].detailsHeight; if (this.rowinfo[u.uid]) if (this.rowinfo[u.uid].expanded) X = '<tr data-role="row-details"><td valign="top" style="pointer-events: auto; overflow: hidden; min-height: ' + $ + "px; max-height: " + $ + "px; height: " + $ + 'px; overflow: hidden; border-left: none; border-right: none;" colspan="' + this.columns.records.length + '" role="gridcell"'; else X = '<tr data-role="row-details" style="display: none;"><td valign="top" style="pointer-events: auto; overflow: hidden; min-height: ' + $ + "px; max-height: " + $ + "px; height: " + $ + 'px; overflow: hidden; border-left: none; border-right: none;" colspan="' + this.columns.records.length + '" role="gridcell"'; else var X = '<tr data-role="row-details" style="display: none;"><td valign="top" style="pointer-events: auto; overflow: hidden; min-height: ' + $ + "px; max-height: " + $ + "px; height: " + $ + 'px; overflow: hidden; border-left: none; border-right: none;" colspan="' + this.columns.records.length + '" role="gridcell"'; P = this.toTP("jqx-cell") + " " + this.toTP("jqx-grid-cell") + " " + this.toTP("jqx-item"); P += " " + this.toTP("jqx-details"), P += " " + this.toTP("jqx-reset"), w += X += '" class="' + P + '"><div style="pointer-events: auto; overflow: hidden; min-height: ' + $ + "px; max-height: " + $ + "px; height: " + $ + 'px;"><div data-role="details"></div></div></td></tr>', b += X } } if (w += "</table>", b += "</table>", T) { t.WinJS ? MSApp.execUnsafeLocalFunction(function () { t.table.html(b + w) }) : t.table[0].innerHTML = b + w; var Q = this.table.find("#table" + this.element.id), J = this.table.find("#pinnedtable" + this.element.id); if (J.css("float", "left"), J.css("pointer-events", "none"), Q.css("float", "left"), J[0].style.position = "absolute", Q[0].style.position = "relative", Q[0].style.zIndex = m - 10, J[0].style.zIndex = m + 10, this._table = Q, this._table[0].style.left = "0px", this._pinnedTable = J, this._pinnedTable[0].style.left = "0px", this._pinnedTable[0].style.width = i + "px", this._table[0].style.width = i + "px", this.rtl && i > parseInt(this.element.style.width) && this._haspinned && (this._pinnedTable[0].style.left = 3 - i + parseInt(this.element.style.width) + "px"), this.rowdetails) for (z = 0; z < p; z++) { var Z = (u = a[z]).uid; if (this.rowinfo[Z].details) { var ee = e(this._table.children()[1]).children("[data-key=" + Z + "]"), te = e(this._pinnedTable.children()[1]).children("[data-key=" + Z + "]"); if (ee) { var ie = te.next(), se = e(e(ie).children().children()); se.children().detach(), se.append(this.rowinfo[u.uid].details) } } } } else { t.WinJS ? MSApp.execUnsafeLocalFunction(function () { t.table.html(w) }) : t.table[0].innerHTML = w; F = this.table.find("#table" + this.element.id); this._table = F, e.jqx.browser.msie && e.jqx.browser.version < 10 && (this._table[0].style.width = i + "px"), 0 === p && (this._table[0].style.width = 2 + i + "px") } 0 === p && (this._table[0].style.tableLayout = "auto", this._pinnedTable && (this._pinnedTable[0].style.tableLayout = "auto")), this.rendered && this.rendered() } }, getcolumnindex: function (e) { var t = this.getcolumn(e); return this.columns.records.indexOf(t) }, setcolumnindex: function (t, i, s) { if (!((u = this.getcolumn(t)).pinned || u.hidden || u.checkboxcolumn || u.grouped)) { var r = this.columns.records.indexOf(u); this.columns.records.splice(r, 1), this.columns.records.splice(i, 0, u); var o = 0, a = this.headerZIndex; this.columnsrow.children().detach(); var n = this.toThemeProperty("jqx-grid-cell"); n += " " + this.toThemeProperty("jqx-grid-cell-pinned"), n += " " + this.toThemeProperty("jqx-item"), this.filterrow && (e(this.filterrow.children()[0]).children().detach(), this.filterrow[0].cells = []); var l = this, h = null; if (void 0 != l.filterrow) h = e(l.filterrow.children()[0]); this.columnsrow[0].cells = []; var d = !1; if (e.each(this.columns.records, function (t, i) { var s = this.uielement; l.columnsrow.append(s), l.rtl ? s.css("z-index", a++) : s.css("z-index", a--); var r = this.width; if (s.css("left", o), l.columnsrow[0].cells[l.columnsrow[0].cells.length] = s[0], l.filterrow) { var c = e('<div style="overflow: hidden; position: absolute; height: 100%;" class="' + n + '"></div>'); h.append(c), c.css("left", o), c.css("z-index", a + 1), c.width(this.width), c[0].left = o, c.append(this._filterwidget), l.filterrow[0].cells[l.filterrow[0].cells.length] = c[0] } this.hidden && (d = !0), this.hidden && this.hideable || (o += r) }), this.groupable) { var c = this.groups.length; c > 0 && r - c >= 0 && (r -= c, i -= c) } this.rowdetails && r - 1 >= 0 && (r--, i--), "checkbox" == this.selectionmode && r - 1 >= 0 && (r--, i--); var u = this._columns[r]; this._columns.splice(r, 1), this._columns.splice(i, 0, u), this.resize(), this._rendercolumngroups(), this._raiseEvent("columnReordered", { dataField: u.datafield, oldIndex: r, newIndex: i }) } }, _pinnedColumnsLength: function () { var t = 0; return e.each(this.columns.records, function () { this.pinned && t++, this.grouped && t++ }), this.rowdetails && t++, "checkbox" == this.selectionmode && t++, t }, _handlecolumnsreorder: function () { var t = this, i = -1, s = !1; if (t.columnsreorder) { var r = "mousemove.reorder" + this.element.id, o = "mousedown.reorder" + this.element.id, a = "mouseup.reorder" + this.element.id, n = !1; this.isTouchDevice() && !0 !== this.touchmode && (n = !0, r = e.jqx.mobile.getTouchEventName("touchmove") + ".reorder" + this.element.id, o = e.jqx.mobile.getTouchEventName("touchstart") + ".reorder" + this.element.id, a = e.jqx.mobile.getTouchEventName("touchend") + ".reorder" + this.element.id), this.removeHandler(e(document), r), this.addHandler(e(document), r, function (e) { if (t.resizing) return !0; if (null != t.reordercolumn) { var r = parseInt(e.pageX), o = parseInt(e.pageY); if (n) { var a = t.getTouches(e)[0]; void 0 != a && (r = parseInt(a.pageX), o = parseInt(a.pageY)) } var l = t.host.coord(), h = parseInt(l.left), d = parseInt(l.top); void 0 != t.dragmousedownoffset && null != t.dragmousedownoffset || (t.dragmousedownoffset = { left: 0, top: 0 }); var c = parseInt(r) - parseInt(t.dragmousedownoffset.left), u = parseInt(o) - parseInt(t.dragmousedownoffset.top); if (t.reordercolumn.css({ left: c + "px", top: u + "px" }), s = !1, r >= h && r <= h + t.host.width() && o >= d && o <= d + t.host.height() && (s = !0), i = -1, s) { t.reordercolumnicon.removeClass(t.toThemeProperty("jqx-grid-dragcancel-icon")), t.reordercolumnicon.addClass(t.toThemeProperty("jqx-grid-drag-icon")); var p = t.columnsheader.coord(), m = p.top + t.columnsheader.height(); null != t.columnsdropline && (o >= p.top && o <= m ? i = t._handlereordercolumnsdroplines(r) : t.columnsdropline.fadeOut("slow")) } else null != t.columnsdropline && t.columnsdropline.fadeOut("slow"), t.reordercolumnicon.removeClass(t.toThemeProperty("jqx-grid-drag-icon")), t.reordercolumnicon.addClass(t.toThemeProperty("jqx-grid-dragcancel-icon")); if (e.preventDefault && (e.preventDefault(), e.stopPropagation()), n) return e.preventDefault(), e.stopPropagation(), !1 } }), this.columnsbounds = new Array, this.removeHandler(e(document), o), this.addHandler(e(document), o, function (i) { if (t.resizing) return !0; t.columnsbounds = new Array; var s = t.host.coord().left, r = t.host.coord().top; t.showtoolbar && (r += t.toolbarheight); var o = 0; e.each(t.columns.records, function (i) { var a = this; if (a.hidden) return t.columnsbounds[t.columnsbounds.length] = { top: r, column: a, left: s, width: 0, height: 2 + t.rowsheight }, !0; 0 == o && (s = t.rtl ? parseInt(t.host.coord().left) - t.hScrollInstance.max + t.hScrollInstance.value : parseInt(t.host.coord().left) - t.hScrollInstance.value), o++; var n = 2 + t.columnsheight; t.columnshierarchy && (r = e(a.uielement).coord().top, n = e(a.uielement).height()), t.columnsbounds[t.columnsbounds.length] = { top: r, column: a, left: s, width: a.width, height: n }, s += a.width }) }), this.removeHandler(e(document), a), this.addHandler(e(document), a, function (r) { if (t.resizing) return !0; t.__drag = !1, e(document.body).removeClass("jqx-disableselect"); parseInt(r.pageX), parseInt(r.pageY); if (n) { var o = t.getTouches(r)[0]; parseInt(o.pageX), parseInt(o.pageY) } var a = t.host.coord(), l = (parseInt(a.left), parseInt(a.top)); if (t.showtoolbar && (l += t.toolbarheight), t.columndragstarted = !1, t.dragmousedown = null, null != t.reordercolumn) { var h = e.data(t.reordercolumn[0], "reorderrecord"), d = t.columns.records.indexOf(t.getcolumn(h)); t.reordercolumn.remove(), t.reordercolumn = null; var c = 0; if (c += t._pinnedColumnsLength(), null != h) { if (s && -1 != i) { var u = i.index; if (u >= c) { var p = t.columns.records[u]; if (void 0 != p) { m = t.columns.records.indexOf(t.getcolumn(p.datafield)); if (null == p.datafield) var m = t.columns.records.indexOf(t.getcolumnbytext(p.text)); if (t.columngroups) { var g = p; if (d < m && "before" == i.position && (g = t.columns.records[m - 1]), g.columngroup != t.getcolumn(h).columngroup) return void (null != t.columnsdropline && (t.columnsdropline.remove(), t.columnsdropline = null)) } d < m ? "before" == i.position ? t.setcolumnindex(h, m - 1) : t.setcolumnindex(h, m) : d > m && t.setcolumnindex(h, m) } } } null != t.columnsdropline && (t.columnsdropline.remove(), t.columnsdropline = null) } } }) } }, getcolumnbytext: function (t) { var i = null; return this.columns.records && e.each(this.columns.records, function () { if (this.text == t) return i = this, !1 }), i }, _handlereordercolumnsdroplines: function (t) { var i = this, s = -1, r = i._pinnedColumnsLength(), o = parseInt(i.host.coord().left) + i.host.width(), a = "hidden" != i.vScrollBar.css("visibility") ? 19 : 0; return i.rtl || (a = 0), e.each(i.columnsbounds, function (e) { if (e >= r) { if (0 == this.width) return !0; if (t <= this.left + this.width / 2) return t > o ? (i.columnsdropline.fadeOut(), !1) : (i.columnsdropline.css("left", a + parseInt(this.left) + "px"), i.columnsdropline.css("top", parseInt(this.top) + "px"), i.columnsdropline.height(this.height), i.columnsdropline.fadeIn("slow"), s = { index: e, position: "before" }, !1); if (t >= this.left + this.width / 2) { if (this.left + this.width > o) return i.columnsdropline.fadeOut(), !1; i.columnsdropline.css("left", a + 1 + this.left + this.width), i.columnsdropline.css("top", this.top), i.columnsdropline.height(this.height), i.columnsdropline.fadeIn("slow"), s = { index: e, position: "after" } } } }), s }, _createreordercolumn: function (t, i, s) { var r = this, o = i; r.reordercolumn && r.reordercolumn.remove(), r.columnsdropline && r.columnsdropline.remove(), r.reordercolumn = e("<div></div>"); var a = t.clone(); r.reordercolumn.css("z-index", 999999), a.css("border-width", "1px"), a.css("opacity", "0.4"); var n = e(a.find("." + r.toThemeProperty("jqx-grid-column-menubutton"))); n.length > 0 && n.css("display", "none"); var l = e(a.find(".jqx-icon-close")); l.length > 0 && l.css("display", "none"), r.reordercolumnicon = e('<div style="z-index: 9999; position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px;"></div>'), r.reordercolumnicon.addClass(r.toThemeProperty("jqx-grid-drag-icon")), r.reordercolumn.css("float", "left"), r.reordercolumn.css("position", "absolute"); r.host.coord(); a.width(t.width() + 16), r.reordercolumn.append(a), r.reordercolumn.height(t.height()), r.reordercolumn.width(a.width()), r.reordercolumn.append(r.reordercolumnicon), e(document.body).append(r.reordercolumn), a.css("margin-left", 0), a.css("left", 0), a.css("top", 0), r.reordercolumn.css("left", o.left + r.dragmousedown.left), r.reordercolumn.css("top", o.top + r.dragmousedown.top), void 0 != s && s && (r.columnsdropline = e('<div style="z-index: 9999; display: none; position: absolute;"></div>'), r.columnsdropline.width(2), r.columnsdropline.addClass(r.toThemeProperty("jqx-grid-group-drag-line")), e(document.body).append(r.columnsdropline)) }, _handlecolumnsdragreorder: function (t, i) { this.reordercolumn && this.reordercolumn.remove(), this.columnsdropline && this.columnsdropline.remove(), this.dragmousedown = null, this.dragmousedownoffset = null, this.columndragstarted = !1, this.reordercolumn = null; var s = this, r = !1; this.isTouchDevice() && !0 !== this.touchmode && (r = !0); var o = "mousedown.drag", a = "mousemove.drag"; r ? (o = e.jqx.mobile.getTouchEventName("touchstart") + ".drag", a = e.jqx.mobile.getTouchEventName("touchmove") + ".drag") : this.addHandler(i, "dragstart", function (e) { return !1 }), this.addHandler(i, o, function (i) { if (0 == t.draggable) return !0; if (s.resizing) return !0; s.__drag = !0; var o = i.pageX, a = i.pageY; if (r) { var n = s.getTouches(i)[0]; o = n.pageX, a = n.pageY } s.dragmousedown = { left: o, top: a }; var l = e(i.target).coord(); return s.dragmousedownoffset = { left: parseInt(o) - parseInt(l.left), top: parseInt(a - l.top) }, i.preventDefault && i.preventDefault(), !0 }), this.addHandler(i, a, function (o) { if (!t.draggable) return !0; if (void 0 == t.datafield) return !0; if (t.pinned) return !0; if (s.resizing) return !0; if (s.dragmousedown) { var n = o.pageX, l = o.pageY; if (r) { var h = s.getTouches(o)[0]; void 0 != h && (n = h.pageX, l = h.pageY) } if (a = { left: n, top: l }, !s.columndragstarted && null == s.reordercolumn) { var d = Math.abs(a.left - s.dragmousedown.left), c = Math.abs(a.top - s.dragmousedown.top); (d > 3 || c > 3) && (s._createreordercolumn(i, a, !0), e(document.body).addClass("jqx-disableselect"), e.data(s.reordercolumn[0], "reorderrecord", t.datafield)) } } }) }, _handlecolumnsresize: function () { var t = this; if (this.columnsresize) { var i = !1; t.isTouchDevice() && (i = !0); var s = "mousemove.resize" + this.element.id, r = "mousedown.resize" + this.element.id, o = "mouseup.resize" + this.element.id; if (i) var s = e.jqx.mobile.getTouchEventName("touchmove") + ".resize" + this.element.id, r = e.jqx.mobile.getTouchEventName("touchstart") + ".resize" + this.element.id, o = e.jqx.mobile.getTouchEventName("touchend") + ".resize" + this.element.id; this.removeHandler(e(document), s), this.addHandler(e(document), s, function (s) { if (null != t.resizablecolumn && !t.disabled && t.resizing && null != t.resizeline) { t.resizablecolumn.columnelement; var r = t.host.coord(), o = parseInt(t.resizestartline.coord().left), a = o - t._startcolumnwidth, n = t.resizablecolumn.column.minwidth; n = "auto" == n ? 0 : parseInt(n); var l = t.resizablecolumn.column.maxwidth; l = "auto" == l ? 0 : parseInt(l); var h = s.pageX; i && (h = e.jqx.mobile.getTouches(s)[0].pageX), a += n; var d = l > 0 ? o + l : 0, c = 0 == l || t._startcolumnwidth + h - o < l; if (t.rtl) c = !0; if (c) if (t.rtl) { if (h >= r.left && h <= r.left + t.host.width() && (t.resizeline.css("left", h), i)) return !1 } else if (h >= r.left && h >= a && (0 != d && s.pageX < d ? t.resizeline.css("left", h) : 0 == d && t.resizeline.css("left", h), i)) return !1 } if (!i && null != t.resizablecolumn) return !1 }), this.removeHandler(e(document), r), this.addHandler(e(document), r, function (i) { if (null != t.resizablecolumn && !t.disabled) { var s = t.resizablecolumn.columnelement; if (s.coord().top + s.height() + 5 < i.pageY) return void (t.resizablecolumn = null); if (s.coord().top - 5 > i.pageY) return void (t.resizablecolumn = null); t._startcolumnwidth = t.resizablecolumn.column.width, t.resizablecolumn.column._width = null, e(document.body).addClass("jqx-disableselect"), e(document.body).addClass("jqx-position-reset"), t._mouseDownResize = new Date, t.resizing = !0, t._resizecolumn = t.resizablecolumn.column, t.resizeline = t.resizeline || e('<div style="position: absolute;"></div>'), t.resizestartline = t.resizestartline || e('<div style="position: absolute;"></div>'), t.resizebackground = t.resizebackground || e('<div style="position: absolute; left: 0; top: 0; background: #000;"></div>'), t.resizebackground.css("opacity", .01), t.resizebackground.css("cursor", "col-resize"), t.resizeline.css("cursor", "col-resize"), t.resizestartline.css("cursor", "col-resize"), t.resizeline.addClass(t.toThemeProperty("jqx-grid-column-resizeline")), t.resizestartline.addClass(t.toThemeProperty("jqx-grid-column-resizestartline")), e(document.body).append(t.resizeline), e(document.body).append(t.resizestartline), e(document.body).append(t.resizebackground); var r = t.resizablecolumn.columnelement.coord(); t.resizebackground.css("left", t.host.coord().left), t.resizebackground.css("top", t.host.coord().top), t.resizebackground.width(t.host.width()), t.resizebackground.height(t.host.height()), t.resizebackground.css("z-index", 999999999); var o = function (e) { t.rtl ? e.css("left", parseInt(r.left)) : e.css("left", parseInt(r.left) + t._startcolumnwidth); var i = 0; i += t.showtoolbar ? t.toolbarheight : 0, i += t.showstatusbar ? t.statusbarheight : 0, i += t.showaggregates ? t.aggregatesheight : 0, t.pageable && "bottom" != t.pagerposition && (i += t.pagerheight); var s = 0; t.pageable && "top" != t.pagerposition && (s = t.pagerheight); var o = "hidden" != t.hScrollBar.css("visibility") ? t.scrollbarsize : 0; e.css("top", parseInt(r.top)), e.css("z-index", 9999999999), t.columngroups ? e.height(t.host.height() + t.resizablecolumn.columnelement.height() - s - i - o - t.columngroupslevel * t.columnsheight) : e.height(t.host.height() - s - i - o), e.show("fast") }; o(t.resizeline), o(t.resizestartline), t.dragmousedown = null } }); var a = function () { if (e(document.body).removeClass("jqx-disableselect"), e(document.body).removeClass("jqx-position-reset"), t.resizing) { if (t._mouseUpResize = new Date, t._mouseUpResize - t._mouseDownResize < 200) return t.resizing = !1, void (null != t._resizecolumn && null != t.resizeline && "block" == t.resizeline.css("display") && (t._resizecolumn = null, t.resizeline.hide(), t.resizestartline.hide(), t.resizebackground.remove())); if (t.resizing = !1, !t.disabled) { var i = t.host.width(); if ("hidden" != t.vScrollBar[0].style.visibility && (i -= 20), i < 0 && (i = 0), null != t._resizecolumn && null != t.resizeline && "block" == t.resizeline.css("display")) { var s = parseInt(t.resizeline.css("left")), r = parseInt(t.resizestartline.css("left")), o = t._startcolumnwidth + s - r; if (t.rtl) o = t._startcolumnwidth - s + r; var a = t._resizecolumn.width; t._resizecolumn.width = o, void 0 != t._resizecolumn._percentagewidth && (t._resizecolumn._percentagewidth = o / i * 100); for (var n = 0; n < t._columns.length; n++) if (t._columns[n].datafield === t._resizecolumn.datafield) { t._columns[n].width = t._resizecolumn.width; break } t.hScrollBar[0].style.visibility; var l = t._resizecolumn.displayfield; t._updatecolumnwidths(), t.refresh(), t._resizecolumn = null, t.resizeline.hide(), t.resizestartline.hide(), t.resizebackground.remove(), t.resizablecolumn = null, t._raiseEvent("columnResized", { dataField: l, oldWidth: a, newWidth: o }) } else t.resizablecolumn = null } } }; try { if ("" != document.referrer || window.frameElement) { var n = null; if (null != window.top && window.top != window.that && window.parent && document.referrer && (n = document.referrer), n && -1 != n.indexOf(document.location.host)) { var l = function (e) { a() }; window.top.document.addEventListener ? window.top.document.addEventListener("mouseup", l, !1) : window.top.document.attachEvent && window.top.document.attachEvent("onmouseup", l) } } } catch (e) { } this.removeHandler(e(document), o), this.addHandler(e(document), o, function (i) { if (null != e.data(document.body, "contextmenu" + t.element.id) && t.autoshowcolumnsmenubutton) return !0; a() }) } }, _updatecolumnwidths: function () { var t = this.host.width(), i = t; "hidden" !== this.vScrollBar.css("visibility") && (t -= parseInt(this.scrollbarsize) + 6, i = t); var s = ""; if (void 0 != this.columns && void 0 != this.columns.records) { var r = this, o = !1; e.each(this.columns.records, function (e, o) { if (!this.hidden) if (-1 != this.width.toString().indexOf("%") || void 0 != this._percentagewidth) { var o = 0; "hidden" == r.vScrollBar[0].style.visibility || r.scrollbarsize; o = parseFloat(this.width) * i / 100, void 0 != this._percentagewidth && (o = parseFloat(this._percentagewidth) * i / 100), o < this.minwidth && "auto" != this.minwidth && (o = this.minwidth), o > this.maxwidth && "auto" != this.maxwidth && (o = this.maxwidth), t -= Math.round(o) } else "auto" == this.width || this._width ? s += this.text : t -= this.width }); var a = this.columnsheader.find("#columntable" + this.element.id); if (0 != a.length) { var n = 0, l = a.find(".jqx-grid-column-header"), h = 0; e.each(this.columns.records, function (a, d) { var c = e(l[a]), u = !1, p = this.width, m = this.width; if (-1 == this.width.toString().indexOf("%") && void 0 == this._percentagewidth || (p = void 0 != this._percentagewidth ? parseFloat(this._percentagewidth) * i / 100 : parseFloat(this.width) * i / 100, p = Math.round(p), u = !0), "auto" == this.width || this._width || u) if (u) p < this.minwidth && "auto" != this.minwidth && (p = this.minwidth, this.width = p), p > this.maxwidth && "auto" != this.maxwidth && (p = this.maxwidth, this.width = p), parseInt(c[0].style.width) != p && (c.width(p), this.width = p); else { var g = Math.floor(t * (this.text.length / s.length)); isNaN(g) && (g = this.minwidth); var f = t * (this.text.length / s.length) - g; (n += f) >= 1 && (n -= 1, g++), n >= .5 && a == r.columns.records.length - 1 && g++, g < 0 && ($element = e("<span>" + this.text + "</span>"), e(document.body).append($element), g = 10 + $element.width(), $element.remove()), g < this.minwidth && (g = this.minwidth), g > this.maxwidth && (g = this.maxwidth), this._width = "auto", this.width = g, c.width(this.width) } else parseInt(c[0].style.width) != this.width && c.width(this.width); parseInt(c[0].style.left) != h && c.css("left", h), this.hidden || (h += this.width), this._requirewidthupdate = !0, m !== this.width && (o = !0) }), this.columnsheader.width(2 + h), a.width(this.columnsheader.width()), this._resizecolumngroups(), o && this._renderrows(), this.showaggregates && this._refreshcolumnsaggregates() } } }, _rendercolumnheaders: function () { var t = this; if (!this._updating) { this._columnsbydatafield = new Array, this.columnsheader.find("#columntable" + this.element.id).remove(); var i = e('<div id="columntable' + this.element.id + '" style="height: 100%; position: relative;"></div>'); i[0].cells = new Array; var s = 0, r = "", o = this.host.width(), a = o, n = new Array, l = new Array; if (e.each(this.columns.records, function (e, i) { if (!this.hidden) if ("auto" == this.width || this._width) r += this.text; else if (this.width < this.minwidth && "auto" != this.minwidth) o -= this.minwidth; else if (this.width > this.maxwidth && "auto" != this.maxwidth) o -= this.maxwidth; else if (-1 != this.width.toString().indexOf("%")) { var i = 0; (i = parseFloat(this.width) * a / 100) < this.minwidth && "auto" != this.minwidth && (i = this.minwidth), i > this.maxwidth && "auto" != this.maxwidth && (i = this.maxwidth), o -= i } else "string" == typeof this.width && (this.width = parseInt(this.width)), o -= this.width; this.pinned || this.grouped || this.checkboxcolumn ? (t._haspinned && (this.pinned = !0), n[n.length] = this) : l[l.length] = this }), this.rtl) { var h = 0; n.reverse(); for (d = this.columns.records.length - 1; d >= this.columns.records.length - n.length; d--) this.columns.replace(d, n[h++]); for (c = 0; c < l.length; c++) this.columns.replace(c, l[c]) } else { for (var d = 0; d < n.length; d++) this.columns.replace(d, n[d]); for (var c = 0; c < l.length; c++) this.columns.replace(n.length + c, l[c]) } var u = this.headerZIndex, p = t.columnsheight, m = function (e, i) { var s = t.columngroupslevel * t.columnsheight; return s -= i.level * t.columnsheight }, g = 0; e.each(this.columns.records, function (n, l) { this.height = t.columnsheight, t.columngroups && t.columngroups.length && (this.height = m(this.datafield, this), p = this.height); var h = t.toTP("jqx-grid-column-header") + " " + t.toTP("jqx-widget-header"); t.rtl && (h += " " + t.toTP("jqx-grid-column-header-rtl")), t.enablebrowserselection || (h += " " + t.toTP("jqx-disableselect")); var d = self.rtl ? 150 + u + 1 : 150 + u - 1, c = t.rtl ? u++ : u--, f = e('<div role="columnheader" style="z-index: ' + c + ';position: absolute; height: 100%;" class="' + h + '"><div style="height: 100%; width: 100%;"></div></div>'); t.rtl && 0 === n && (f[0].style.borderLeftColor = "transparent"), t.columngroups && (f[0].style.height = p + "px", f[0].style.bottom = "0px", this.pinned && (f[0].style.zIndex = d)), this.uielement = f, this.element = f, "" != this.classname && this.classname && f.addClass(this.classname); var v = this.width, x = !1; if (null === this.width && (this.width = "auto"), -1 == this.width.toString().indexOf("%") && void 0 == this._percentagewidth || (v = void 0 != this._percentagewidth ? parseFloat(this._percentagewidth) * a / 100 : parseFloat(this.width) * a / 100, v = Math.round(v), x = !0), "auto" == this.width || this._width || x) if (x) v < this.minwidth && "auto" != this.minwidth && (v = this.minwidth), v > this.maxwidth && "auto" != this.maxwidth && (v = this.maxwidth), void 0 != this._percentagewidth && -1 == this.width.toString().indexOf("%") || (this._percentagewidth = this.width), f.width(v), this.width = v; else { var w = Math.floor(o * (this.text.length / r.length)), b = o * (this.text.length / r.length) - w; (g += b) >= 1 && (g -= 1, w++), g >= .5 && n == t.columns.records.length - 1 && w++, isNaN(w) && (w = this.minwidth), w < 0 && ($element = e("<span>" + this.text + "</span>"), e(document.body).append($element), w = 10 + $element.width(), $element.remove()), w < this.minwidth && (w = this.minwidth), w > this.maxwidth && (w = this.maxwidth), this._width = "auto", this.width = parseInt(w), v = this.width, f.width(this.width) } else v < this.minwidth && "auto" != this.minwidth && (v = this.minwidth), v > this.maxwidth && "auto" != this.maxwidth && (v = this.maxwidth), f[0].style.width = parseInt(v) + "px"; this.hidden && f.css("display", "none"); var _ = e(f.children()[0]); i[0].cells[n] = f[0]; var y = null != this.renderer ? this.renderer(this.text, this.align, p) : t._rendercolumnheader(this.text, this.align, p, t); if (null == y && (y = t._rendercolumnheader(this.text, this.align, p, t)), null != this.renderer && (y = e(y)), !0, t.WinJS ? MSApp.execUnsafeLocalFunction(function () { _.append(e(y)) }) : this.renderer ? _.append(e(y)) : y && (_[0].innerHTML = y), null != y) { var j = e('<div class="iconscontainer" style="height: ' + p + 'px; margin-left: -32px; display: block; position: absolute; left: 100%; top: 0%; width: 32px;"><div class="filtericon ' + t.toTP("jqx-widget-header") + '" style="height: ' + p + 'px; float: right; display: none; width: 16px;"><div class="' + t.toTP("jqx-grid-column-filterbutton") + '" style="width: 100%; height:100%;"></div></div><div class="sortasc ' + t.toTP("jqx-widget-header") + '" style="height: ' + p + 'px; float: right; display: none; width: 16px;"><div class="' + t.toTP("jqx-grid-column-sortascbutton") + '" style="width: 100%; height:100%;"></div></div><div class="sortdesc ' + t.toTP("jqx-widget-header") + '" style="height: ' + p + 'px; float: right; display: none; width: 16px;"><div class="' + t.toTP("jqx-grid-column-sortdescbutton") + '" style="width: 100%; height:100%;"></div></div></div>'); _.append(j); var q = j.children(); this.sortasc = q[1], this.sortdesc = q[2], this.filtericon = q[0], this.iconscontainer = j, t.rtl && (j.css("margin-left", "0px"), j.css("left", "0px"), e(this.sortasc).css("float", "left"), e(this.filtericon).css("float", "left"), e(this.sortdesc).css("float", "left")) } i.append(f), t.columnsreorder && this.draggable && t._handlecolumnsdragreorder && t._handlecolumnsdragreorder(this, f); var T = this; if (t.addHandler(f, "click", function (e) { if (T.checkboxcolumn) return !0; t._togglesort && (t._loading || t._togglesort(T)), e.preventDefault() }), T.resizable && t.columnsresize) { var C = !1, S = "mousemove"; t.isTouchDevice() && (C = !0, S = e.jqx.mobile.getTouchEventName("touchstart")), t.addHandler(f, S, function (i) { var s = parseInt(i.pageX), r = 5, o = parseInt(f.coord().left); if (t.hasTransform && (o = e.jqx.utilities.getOffset(f).left), t._handlecolumnsresize) { if (C) return s = e.jqx.mobile.getTouches(i)[0].pageX, r = 40, s >= o + T.width - r ? (t.resizablecolumn = { columnelement: f, column: T }, f.css("cursor", "col-resize")) : (f.css("cursor", ""), t.resizablecolumn = null), !0; var a = T.width; if (t.rtl && (a = 0), s >= o + a - r) { if (s <= o + a + r) return t.resizablecolumn = { columnelement: f, column: T }, f.css("cursor", "col-resize"), !1; f.css("cursor", ""), t.resizablecolumn = null } else f.css("cursor", ""), s < o + a - r && (T._animating || T._menuvisible || f.mouseenter()), t.resizablecolumn = null } }) } f.css("left", s), this.hidden || (s += v), T.rendered && T.rendered(e(_[0].firstChild), T.align, p) && null != j && j.hide() }), s > 0 ? this.columnsheader.width(2 + s) : this.columnsheader.width(s), this.columnsrow = i, t.columnsheader.append(i), i.width(s), this._handlecolumnsdragdrop && this._handlecolumnsdragdrop(), this._handlecolumnsreorder && this._handlecolumnsreorder(), this._handlecolumnsresize && this._handlecolumnsresize(), this.columngroups && this._rendercolumngroups() } }, _rendercolumngroups: function () { if (this.columngroups) { for (var t = 0, i = 0; i < this.columns.records.length; i++) this.columns.records[i].pinned && t++; var s = this.headerZIndex - t + this.columns.records.length, r = this, o = r.toTP("jqx-grid-column-header") + " " + r.toTP("jqx-grid-columngroup-header") + " " + r.toTP("jqx-widget-header"); r.rtl && (o += " " + r.toTP("jqx-grid-columngroup-header-rtl")); var a = this.columnsheader.find("#columntable" + this.element.id); a.find("jqx-grid-columngroup-header").remove(); for (var n = 0; n < this.columngroupslevel - 1; n++) for (i = 0; i < this.columngroups.length; i++) { var l = this.columngroups[i], h = l.level; if (h === n) { var d = h * this.columnsheight, c = 99999; if (l.groups) { var u = function (e) { for (var t = 0, i = 0; i < e.groups.length; i++) { var s = e.groups[i]; s.groups ? t += u(s) : s.hidden || (t += s.width, c = Math.min(parseInt(s.element[0].style.left), c)) } return t }; l.width = u(l), l.left = c; var p = this.columnsheight, m = s--, g = e('<div role="columnheader" style="z-index: ' + m + ';position: absolute;" class="' + o + '"></div>'), f = e(this._rendercolumnheader(l.text, l.align, this.columnsheight, this)); g.append(f), g[0].style.left = c + "px", 0 === c && (g[0].style.borderLeftColor = "transparent"), g[0].style.top = d + "px", g[0].style.height = p + "px", g[0].style.width = -1 + l.width + "px", a.append(g), l.element = g } } } } }, _resizecolumngroups: function () { if (this.columngroups) for (var e = 0; e < this.columngroups.length; e++) { var t = this.columngroups[e], i = t.level * this.columnsheight, s = 99999; if (t.groups) { var r = function (e) { for (var t = 0, i = 0; i < e.groups.length; i++) { var o = e.groups[i]; o.groups ? t += r(o) : (t += o.width, s = Math.min(parseInt(o.element[0].style.left), s)) } return t }; t.width = r(t), t.left = s; var o = this.columnsheight, a = t.element; a[0].style.left = s + "px", a[0].style.top = i + "px", a[0].style.height = o + "px", a[0].style.width = -1 + t.width + "px" } } }, _removecolumnhandlers: function (t) { var i = this, s = e(t.element); if (s.length > 0) { i.removeHandler(s, "mouseenter"), i.removeHandler(s, "mouseleave"); var r = e(t.filtericon); i.removeHandler(r, "mousedown"), i.removeHandler(r, "click"), i.removeHandler(s, "click") } }, _calculateaggregate: function (e, t, i, s) { var r = e.aggregates; if (r || (r = t), r) { for (var o = new Array, a = 0; a < r.length; a++) "count" != r[a] && (o[o.length] = e.cellsformat); if (this.source && this.source.getAggregatedData) { void 0 == s && (s = this.getRows(), this.dataViewRecords && (s = this.dataViewRecords)); var n = s, l = -1; if (this.treeGrid) { var h = new Array, d = function (e) { for (var t = 0; t < e.length; t++) void 0 != e[t] && (-1 == l && (l = e[t].level), e[t].aggregate || h.push(e[t]), !e[t].leaf && e[t].records && e[t].records.length > 0 && d(e[t].records)) }; d(s), s = h } if (this.treeGrid && this.filterable && this.dataview.filters.length > 0) { for (var c = new Array, a = 0; a < s.length; a++) s[a] && !1 !== s[a]._visible && c.push(s[a]); s = c; for (var u = new Array, a = 0; a < n.length; a++) n[a] && !1 !== n[a]._visible && u.push(n[a]); n = u } if (void 0 == i || 1 == i) { p = this.source.getAggregatedData([{ name: e.datafield, aggregates: r, formatStrings: o }], this.gridlocalization, s, l); if (this.treeGrid && (0 == (m = this.source._source.hierarchy && this.source._source.hierarchy.groupingDataFields ? this.source._source.hierarchy.groupingDataFields.length : 0) || l >= m) && (void 0 != p[e.datafield].sum || void 0 != p[e.datafield].avg)) { g = this.source.getAggregatedData([{ name: e.datafield, aggregates: r, formatStrings: o }], this.gridlocalization, n, l); void 0 != p[e.datafield].sum && (p[e.datafield].sum = g[e.datafield].sum), void 0 != p[e.datafield].avg && (p[e.datafield].avg = g[e.datafield].avg) } return p } var p = this.source.getAggregatedData([{ name: e.datafield, aggregates: r }], this.gridlocalization, s, l); if (this.treeGrid && (void 0 != p[e.datafield].sum || void 0 != p[e.datafield].avg)) { var m = this.source._source.hierarchy && this.source._source.hierarchy.groupingDataFields ? this.source._source.hierarchy.groupingDataFields.length : 0; if (0 == m || l >= m) { var g = this.source.getAggregatedData([{ name: e.datafield, aggregates: r }], this.gridlocalization, n, l); void 0 != p[e.datafield].sum && (p[e.datafield].sum = g[e.datafield].sum), void 0 != p[e.datafield].avg && (p[e.datafield].avg = g[e.datafield].avg) } } return p } } return null }, getcolumnaggregateddata: function (e, t, i, s) { var r = this.getcolumn(e); if (!r) return ""; var o = void 0 != i && 0 != i && i; if (null == t) return ""; var a = r.aggregates; r.aggregates = null; var n = this._calculateaggregate(r, t, o, s), l = {}; return n && (l = n[e], r.aggregates = a), l }, _updatecolumnaggregates: function (t, i, s) { var r = this; if (i) if (s.children().remove(), s.html(""), t.aggregatesrenderer) { if (i) { a = t.aggregatesrenderer(i[t.datafield], t, s, this.getcolumnaggregateddata(t.datafield, t.aggregates), "aggregates"); s.html(a) } } else e.each(i, function () { var t = this; for (o in t) { var i = e('<div style="position: relative; margin: 4px; overflow: hidden;"></div>'), a = o; a = r._getaggregatename(a), i.html(a + ":" + t[o]), r.rtl && i.addClass(r.toThemeProperty("jqx-rtl")), s.append(i) } }); else if (s.children().remove(), s.html(""), t.aggregatesrenderer) { var o = {}; t.aggregates && (o = this.getcolumnaggregateddata(t.datafield, t.aggregates)); var a = t.aggregatesrenderer({}, t, s, null); s.html(a) } }, _getaggregatetype: function (e) { switch (e) { case "min": case "max": case "count": case "avg": case "product": case "var": case "varp": case "stdev": case "stdevp": case "sum": return e } var t = e; for (var i in e) { t = i; break } return t }, _getaggregatename: function (e) { var t = e; switch (e) { case "min": t = "Min"; break; case "max": t = "Max"; break; case "count": t = "Count"; break; case "avg": t = "Avg"; break; case "product": t = "Product"; break; case "var": t = "Var"; break; case "stdevp": t = "StDevP"; break; case "stdev": t = "StDev"; break; case "varp": t = "VarP"; case "sum": t = "Sum" } if (e === t && "string" != typeof t) for (var i in e) { t = i; break } return t }, _updatecolumnsaggregates: function () { var t = this.getRows(); this.dataViewRecords && (t = this.dataViewRecords); var i = this.columns.records.length; if (void 0 != this.aggregates[0].cells) for (var s = 0; s < i; s++) { var r = e(this.aggregates[0].cells[s]), o = this.columns.records[s], a = this._calculateaggregate(o, null, !0, t); this._updatecolumnaggregates(o, a, r) } }, _refreshcolumnsaggregates: function () { var t = this.columns.records.length; if (void 0 != this.aggregates[0].cells) for (var i = 0, s = 0; s < t; s++) { var r = e(this.aggregates[0].cells[s]), o = this.columns.records[s]; r && (r.width(o.width), r[0].style.left = i + "px", o.hidden && o.hideable ? r.css("display", "none") : i += o.width) } }, _updateaggregates: function () { var t = e('<div style="position: relative;" id="statusrow' + this.element.id + '"></div>'), i = 0, s = this.columns.records.length, r = this.toThemeProperty("jqx-grid-cell"); this.rtl && (r += " " + this.toThemeProperty("jqx-grid-cell-rtl"), i = 0, t.css("border-left-width", "0px"), this.aggregates.css("border-left-color", "transparent")), r += " " + this.toThemeProperty("jqx-grid-cell-pinned"); var o = s + 10, a = new Array; this.aggregates[0].cells = a; for (var n = 0; n < s; n++) { var l = this.columns.records[n], h = this._calculateaggregate(l), d = l.width; d < l.minwidth && (d = l.minwidth), d > l.maxwidth && (d = l.maxwidth); var c = r; l.cellsalign && (c += " " + this.toThemeProperty("jqx-" + l.cellsalign + "-align")); var u = e('<div style="overflow: hidden; position: absolute; height: 100%;" class="' + c + '"></div>'); t.append(u), u.css("left", i), this.rtl ? (u.css("z-index", o++), 0 == n && u.css("border-left-width", "0px")) : u.css("z-index", o--), u.width(d), u[0].style.left = i + "px", l.hidden && l.hideable ? u.css("display", "none") : i += d, a[a.length] = u[0], this._updatecolumnaggregates(l, h, u) } e.jqx.browser.msie && e.jqx.browser.version < 8 && t.css("z-index", o--), t.width(parseInt(i) + 2), t.height(this.aggregatesheight), this.aggregates.children().remove(), this.aggregates.append(t), this.aggregates.removeClass(this.toThemeProperty("jqx-widget-header")), this.aggregates.addClass(r), this.aggregates.css("border-bottom-color", "transparent"), this.aggregates.css("border-top-width", "1px"), this.rtl && "hidden" != this.hScrollBar.css("visibility") && this._renderhorizontalscroll() }, destroy: function () { if (this.columns && this.columns.records) for (t = 0; t < this.columns.records.length; t++) this._removecolumnhandlers(this.columns.records[t]); if (this.removeHandler(e(document), "mouseup.pagerbuttonstop"), this.removeHandler(e(document), "mouseup.pagerbuttonsbottom"), this.filterable) { if (this.filterrow) for (var t = 0; t < this.filterrow[0].cells.length; t++) { var i = this.filterrow[0].cells[t], s = e(i).find(".filterconditions"); this.columns.records[t]; s.length > 0 && s.jqxDropDownList("destroy") } this.filtercolumnsList && this.filtercolumnsList.jqxDropDownList("destroy") } this.pageable && (this.pagershowrowscombotop && this.pagershowrowscombotop.jqxDropDownList("destroy"), this.pagershowrowscombobottom && this.pagershowrowscombobottom.jqxDropDownList("destroy")), this._removeHandlers(), e.jqx.utilities.resize(this.host, null, !0), this.host.remove() }, propertyChangedHandler: function (t, i, s, r) { if (void 0 != this.isInitialized && 0 != this.isInitialized && (i = i.toLowerCase(), r !== s)) if ("height" === i) t.host.height(t.height), t.host.width(t.width), t._updatesize(!1, !0); else if ("width" === i) t.host.height(t.height), t.host.width(t.width), t._updatesize(!0, !1); else if ("source" === i) t.updatebounddata(); else if ("columns" === i || "columngroups" === i) t._columns = null, t._render(); else if ("pagermode" === i) t.pagermode = r.toLowerCase(), t._initpager(); else if ("pagesizeoptions" == i) { t._initpager(); for (var o = !1, a = 0; a < r.length; a++) if (parseInt(r[a]) == t.pagesize) { o = !0; break } o || e.jqx.set(t, [{ pagesize: r[0] }]) } else if ("pagesize" == i) { var n = t.dataview.pagenum * t.dataview.pagesize; t.dataview.pagesize = t.pagesize; var l = Math.floor(n / t.dataview.pagesize); l === t.dataview.pagenum && parseInt(r) === parseInt(s) || (t._raiseEvent("pageSizeChanged", { pagenum: r, oldpagesize: s, pagesize: t.dataview.pagesize }), t.gotopage(l) || (t.serverProcessing ? t.updatebounddata("pager") : t.refresh())) } else if ("pagerposition" === i) t.refresh(); else if ("selectionmode" === i) t.selectionmode = r.toLowerCase(); else if ("touchmode" == i) t._removeHandlers(), t.touchDevice = null, t.vScrollBar.jqxScrollBar({ touchMode: r }), t.hScrollBar.jqxScrollBar({ touchMode: r }), t.refresh(), t._addHandlers(); else { if ("enablehover" == i) return; if ("disabled" == i) r ? t.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")) : t.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")), t.pageable && (t.pagernexttop && (t.pagernexttop.jqxButton({ disabled: r }), t.pagerprevioustop.jqxButton({ disabled: r }), t.pagernextbottom.jqxButton({ disabled: r }), t.pagerpreviousbottom.jqxButton({ disabled: r }), t.pagerfirsttop.jqxButton({ disabled: r }), t.pagerfirstbottom.jqxButton({ disabled: r }), t.pagerlasttop.jqxButton({ disabled: r }), t.pagerlastbottom.jqxButton({ disabled: r }), t.pagershowrowscombotop.jqxDropDownList && "advanced" == t.pagermode && (t.pagershowrowscombotop.jqxDropDownList({ disabled: !1 }), t.pagershowrowscombobottom.jqxDropDownList({ disabled: !1 }))), t.host.find(".jqx-grid-pager-number").css("cursor", r ? "default" : "pointer")), t.host.find(".jqx-grid-group-collapse").css("cursor", r ? "default" : "pointer"), t.host.find(".jqx-grid-group-expand").css("cursor", r ? "default" : "pointer"); else if ("columnsheight" == i) t._render(); else if ("theme" == i) { if (e.jqx.utilities.setTheme(s, r, t.host), t.vScrollBar.jqxScrollBar({ theme: t.theme }), t.hScrollBar.jqxScrollBar({ theme: t.theme }), t.pageable && t.pagernexttop && (t.pagernexttop.jqxButton({ theme: t.theme }), t.pagerprevioustop.jqxButton({ theme: t.theme }), t.pagernextbottom.jqxButton({ theme: t.theme }), t.pagerpreviousbottom.jqxButton({ theme: t.theme }), t.pagerfirsttop.jqxButton({ theme: t.theme }), t.pagerfirstbottom.jqxButton({ theme: t.theme }), t.pagerlasttop.jqxButton({ theme: t.theme }), t.pagerlastbottom.jqxButton({ theme: t.theme }), t.pagershowrowscombotop.jqxDropDownList && "advanced" == t.pagermode && (t.pagershowrowscombotop.jqxDropDownList({ theme: t.theme }), t.pagershowrowscombobottom.jqxDropDownList({ theme: t.theme }))), t.filterable) { var h = e(".filterconditions"); h.length > 0 && h.jqxDropDownList({ theme: t.theme }), t.filtercolumnsList && t.filtercolumnsList.jqxDropDownList({ theme: t.theme }) } t.refresh() } else t.refresh() } }, _rendercolumnheader: function (e, t, i, s) { var r = "4px"; return s.columngroups ? ((r = i / 2 - this._columnheight / 2) < 0 && (r = 4), r += "px") : 25 != this.columnsheight && ((r = this.columnsheight / 2 - this._columnheight / 2) < 0 && (r = 4), r += "px"), '<div style="overflow: hidden; text-overflow: ellipsis; text-align: ' + t + "; margin-left: 4px; margin-right: 4px; margin-bottom: " + r + "; margin-top: " + r + ';"><span style="text-overflow: ellipsis; cursor: default;">' + e + "</span></div>" } }), e.jqx.collection = function (e) { return this.records = new Array, this.owner = e, this.updating = !1, this.beginupdate = function () { this.updating = !0 }, this.resumeupdate = function () { this.updating = !1 }, this.clear = function () { this.records = new Array }, this.replace = function (e, t) { this.records[e] = t }, this.isempty = function (e) { return void 0 == this.records[e] }, this.initialize = function (e) { e < 1 && (e = 1), this.records[e - 1] = -1 }, this.length = function () { return this.records.length }, this.indexOf = function (e) { return this.records.indexOf(e) }, this.add = function (e) { return null != e && (this.records[this.records.length] = e, !0) }, this.insertAt = function (e, t) { return null != e && void 0 != e && (null != t && (e >= 0 && (e < this.records.length ? (this.records.splice(e, 0, t), !0) : this.add(t)))) }, this.remove = function (e) { if (null == e || void 0 == e) return !1; var t = this.records.indexOf(e); return -1 != t && (this.records.splice(t, 1), !0) }, this.removeAt = function (e) { if (null == e || void 0 == e) return !1; if (e < 0) return !1; if (e < this.records.length) { this.records[e]; return this.records.splice(e, 1), !0 } return !1 }, this }, e.jqx.dataView = function () { return this.that = this, this.grid = null, this.records = [], this.rows = [], this.columns = [], this.filters = new Array, this.pagesize = 0, this.pagenum = 0, this.source = null, this.databind = function (t, i) { var s = !!t._source, r = null; this._sortData = null, this._sortHierarchyData = null, s ? (r = t, t = t._source) : r = new e.jqx.dataAdapter(t, { autoBind: !1 }); var o = function (e) { e.originaldata = r.originaldata, e.records = r.records, e.hierarchy = r.hierarchy, e.hierarchy || (e.hierarchy = new Array, r.hierarchy = new Array), r._source.totalrecords ? e.totalrecords = r._source.totalrecords : r._source.totalRecords ? e.totalrecords = r._source.totalRecords : 0 !== e.hierarchy.length ? e.totalrecords = e.hierarchy.length : e.totalrecords = e.records.length, e.cachedrecords = r.cachedrecords }; !function (e) { r.recordids = [], r.records = new Array, r.cachedrecords = new Array, r.originaldata = new Array, r._options.totalrecords = e.totalrecords, r._options.originaldata = e.originaldata, r._options.recordids = e.recordids, r._options.cachedrecords = new Array, r._options.pagenum = e.pagenum, r._options.pageable = e.pageable, void 0 != t.type && (r._options.type = t.type), void 0 != t.formatdata && (r._options.formatData = t.formatdata), void 0 != t.contenttype && (r._options.contentType = t.contenttype), void 0 != t.async && (r._options.async = t.async), void 0 != t.updaterow && (r._options.updaterow = t.updaterow), void 0 != t.addrow && (r._options.addrow = t.addrow), void 0 != t.deleterow && (r._options.deleterow = t.deleterow), 0 == e.pagesize && (e.pagesize = 10), r._options.pagesize = e.pagesize }(this), this.source = t, void 0 !== i && (uniqueId = i); var a = this; switch (t.datatype) { case "local": case "array": default: null == t.localdata && (t.localdata = []), null != t.localdata && (r.unbindBindingUpdate(a.grid.element.id), (!a.grid.autobind && a.grid.isInitialized || a.grid.autobind) && r.dataBind(), (f = function () { o(a), a.update() })(), r.bindBindingUpdate(a.grid.element.id, f)); break; case "json": case "jsonp": case "xml": case "xhtml": case "script": case "text": case "csv": case "tab": if (null != t.localdata) return r.unbindBindingUpdate(a.grid.element.id), (!a.grid.autobind && a.grid.isInitialized || a.grid.autobind) && r.dataBind(), (f = function (e) { o(a), a.update() })(), void r.bindBindingUpdate(a.grid.element.id, f); for (var n = 0, l = {}, h = 0; h < this.filters.length; h++) { var d = this.filters[h].datafield, c = this.filters[h].filter, u = c.getfilters(); l[d + "operator"] = c.operator; for (var p = 0; p < u.length; p++) { u[p].datafield = d; var m = u[p].value; l["filtervalue" + n] = m.toString(), l["filtercondition" + n] = u[p].condition, l["filteroperator" + n] = u[p].operator, l["filterdatafield" + n] = d, n++ } } l.filterslength = n, e.extend(l, { sortdatafield: a.sortfield, sortorder: a.sortfielddirection, pagenum: a.pagenum, pagesize: a.grid.pagesize }); var g = r._options.data; r._options.data ? e.extend(r._options.data, l) : (t.data && e.extend(l, t.data), r._options.data = l); var f = function () { var t = function () { o(a), a.update() }; if (e.jqx.browser.msie && e.jqx.browser.version < 9) try { t() } catch (e) { } else t() }; r.unbindDownloadComplete(a.grid.element.id), r.bindDownloadComplete(a.grid.element.id, f), r._source.loaderror = function (e, t, i) { f() }, (!a.grid.autobind && a.grid.isInitialized || a.grid.autobind) && r.dataBind(), r._options.data = g } }, this.addfilter = function (e, t) { this._sortData = null, this._sortHierarchyData = null; for (var i = -1, s = 0; s < this.filters.length; s++) if (this.filters[s].datafield == e) { i = s; break } -1 == i ? this.filters[this.filters.length] = { filter: t, datafield: e } : this.filters[i] = { filter: t, datafield: e } }, this.removefilter = function (e) { this._sortData = null, this._sortHierarchyData = null; for (var t = 0; t < this.filters.length; t++) if (this.filters[t].datafield == e) { this.filters.splice(t, 1); break } }, this.sortby = function (e, t) { if (null == t) return this.sortfield = "", void (this.sortfielddirection = ""); void 0 == t && (t = !0), t = "a" == t || "asc" == t || "ascending" == t || 1 == t, "constructor" == e && (e = ""), this.sortfield = e, this.sortfielddirection = t ? "asc" : "desc" }, this._sort = function (t) { if (!this.sortfield || !this.sortfielddirection) return t; if (this._sortfield == this.sortfield && this._sortfielddirection == this.sortfielddirection && this._sortData) return this._sortData; var i = this, s = Object.prototype.toString; Object.prototype.toString = "function" == typeof i.sortfield ? i.sortfield : function () { return this[i.sortfield] }; var r = ""; this.source.datafields && e.each(this.source.datafields, function () { if (this.name == i.sortfield) return this.type && (r = this.type), !1 }); for (var o = new Array, a = 0; a < t.length; a++) o.push(e.extend({ originalRecord: t[a] }, t[a])); if (this._sortfield = this.sortfield, this._sortfielddirection = this.sortfielddirection, "desc" === this.sortfielddirection) n = o.sort(function (e, t) { return i._compare(e, t, r) }).reverse(); else var n = o.sort(function (e, t) { return i._compare(e, t, r) }); return this._sortData = n, Object.prototype.toString = s, n }, this._compare = function (t, i, s) { var i = i; if (void 0 === (t = t) && (t = null), void 0 === i && (i = null), null === t && null === i) return 0; if (null === t && null !== i) return 1; if (null !== t && null === i) return 1; if (t = t.toString(), i = i.toString(), e.jqx.dataFormat) if (s && "" != s) switch (s) { case "number": case "int": case "float": return t < i ? -1 : t > i ? 1 : 0; case "date": case "time": return t < i ? -1 : t > i ? 1 : 0; case "string": case "text": t = String(t).toLowerCase(), i = String(i).toLowerCase() } else { if (e.jqx.dataFormat.isNumber(t) && e.jqx.dataFormat.isNumber(i)) return t < i ? -1 : t > i ? 1 : 0; if (e.jqx.dataFormat.isDate(t) && e.jqx.dataFormat.isDate(i)) return t < i ? -1 : t > i ? 1 : 0; e.jqx.dataFormat.isNumber(t) || e.jqx.dataFormat.isNumber(i) || (t = String(t).toLowerCase(), i = String(i).toLowerCase()) } try { if (t < i) return -1; if (t > i) return 1 } catch (e) { } return 0 }, this._equals = function (e, t) { return 0 === this._compare(e, t) }, this.evaluate = function (t) { if (this.grid.serverProcessing) { if (t && ("" == this.grid.source._source.id || null == this.grid.source._source.id) && this.grid.pageable) { var i = this.grid.pagesize * this.pagenum; this.grid.rowsByKey = new Array; c = this; e.each(t, function (e) { this.uid = i, c.grid.rowsByKey[this.uid] = this, i++ }) } return t } var s = new Array; if (this.filters.length) { var r = new Array, o = function (e, t) { for (var i = 0; i < e.length; i++) { var s = e[i]; s._visible = !0; for (var o = void 0, a = 0; a < this.filters.length; a++) { var n = this.filters[a].filter, l = s[this.filters[a].datafield], h = n.evaluate(l); o = void 0 == o ? h : "or" == n.operator ? o || h : o && h } s._visible = !1, (o || s.aggregate) && (s._visible = !0, t.push(s), r[s.uid] = s) } }; if (this._filteredData) this.rows = this._filteredData; else { if (this.source.hierarchy || this.grid.source.hierarchy && this.grid.source.hierarchy.length > 0) { var a = new Array, n = function (e, t) { for (var i = 0; i < t.length; i++) { var s = t[i]; a.push(s), s.records && s.records.length > 0 && n(s, s.records) } }; n(null, t), o.call(this, a, s); for (var l = 0; l < s.length; l++) for (var h = s[l]; h.parent;) { var d = h.parent; r[d.uid] || (d._visible = !0, r[d.uid] = d), h = d } s = t } else o.call(this, t, s); this._filteredData = s, this.rows = s } } else this.rows = t; if (this.source.hierarchy || this.grid.source.hierarchy && this.grid.source.hierarchy.length > 0) { var c = this, u = new Array; this._sortData = null; var p = function (t, i) { c._sortData = null; var s = null; if (c.source.hierarchy.groupingDataFields) if (i && i.length > 0 && i[0].level < c.source.hierarchy.groupingDataFields.length) { s = new Array; for (r = 0; r < i.length; r++) s.push(e.extend({ originalRecord: i[r] }, i[r])) } else s = c._sort(i); else s = c._sort(i); t.records ? t.records = s : t = t.concat(s); for (var r = 0; r < s.length; r++) s[r].records && s[r].records.length && p(s[r], s[r].records); return t }; (this.sortfield || this.sortfielddirection) && (u = this._sortHierarchyData ? this._sortHierarchyData : p(u, t), this.rows = u, this._sortHierarchyData = u) } else this.rows = this._sort(this.rows); return this.rows }, this.getid = function (t, i, s) { if (e(t, i).length > 0) return e(t, i).text(); if (this.rows && "" != t && void 0 != t && this.rows.length > 0) { var r = this.rows[this.rows.length - 1][t]; null == r && (r = null); for (var o = 1; o <= 100; o++) if (!this.grid.rowsByKey[o + r]) return r + o } if (t && t.toString().length > 0) { var a = e(i).attr(t); if (null != a && a.toString().length > 0) return a } return s }, this.generatekey = function () { var e = function () { return 16 * (1 + Math.random()) | 0 }; return "" + e() + e() + "-" + e() + "-" + e() }, this } }(jQuery), function (e) { e.jqx.jqxWidget("jqxTreeGrid", "jqxDataTable", {}), e.extend(e.jqx._jqxTreeGrid.prototype, { defineInstance: function () { this.base.treeGrid = this, this.base.exportSettings = { recordsInView: !1, columnsHeader: !0, hiddenColumns: !1, serverURL: null, characterSet: null, collapsedRecords: !1, fileName: "jqxTreeGrid" }, this.checkboxes = !1, this.icons = !1, this.showSubAggregates = !1, this.rowDetailsRenderer = null, this.virtualModeCreateRecords = null, this.virtualModeRecordCreating = null, this.loadingFailed = !1 }, createInstance: function (e) { this.theme = this.base.theme }, deleterow: function (e) { this.base.deleterowbykey(e) }, updaterow: function (e, t) { this.base.updaterowbykey(e, t) }, setcellvalue: function (e, t, i) { this.base.setcellvaluebykey(e, t, i) }, getcellvalue: function (e, t) { return this.base.getcellvaluebykey(e, t) }, lockrow: function (e) { this.base.lockrowbykey(e) }, unlockrow: function (e) { this.base.unlockrowbykey(e) }, selectrow: function (e) { this.base.selectrowbykey(e) }, unselectrow: function (e) { this.base.unselectrowbykey(e) }, ensurerowvisible: function (e) { this.base.ensurerowvisiblebykey(e) }, begincelledit: function (e, t) { var i = this.base, s = i.getcolumn(t); i.beginroweditbykey(e, s) }, beginrowedit: function (e) { this.base.beginroweditbykey(e) }, endcelledit: function (e, t, i) { this.base.endroweditbykey(e, i) }, endrowedit: function (e, t) { this.base.endroweditbykey(e, t) }, _showLoadElement: function () { var t = this.base; "block" == t.host.css("display") && t.autoshowloadelement && (e(t.dataloadelement).css("visibility", "visible"), e(t.dataloadelement).css("display", "block"), t.dataloadelement.width(t.host.width()), t.dataloadelement.height(t.host.height())) }, _hideLoadElement: function () { var t = this.base; "block" == t.host.css("display") && t.autoshowloadelement && (e(t.dataloadelement).css("visibility", "hidden"), e(t.dataloadelement).css("display", "none"), t.dataloadelement.width(t.host.width()), t.dataloadelement.height(t.host.height())) }, getKey: function (e) { if (e) return e.uid }, getRows: function () { var e = this.base; return e.source.hierarchy ? e.source.hierarchy : e.source.records }, getrow: function (e) { var t = this.base, i = t.source.records; if (t.source.hierarchy) { var s = function (t) { for (var i = 0; i < t.length; i++) if (t[i]) { if (t[i].uid == e) return t[i]; if (t[i].records) { var r = s(t[i].records); if (r) return r } } }; return s(t.source.hierarchy) } for (var r = 0; r < i.length; r++) if (i[r] && i[r].uid == e) return i[r] }, _renderrows: function () { var t = this.base, i = this; if (!t._loading && !t._updating) { var s = t._names(); if (0 === t.source.hierarchy.length && !t.loadingFailed && this.virtualModeCreateRecords) { t._loading = !0, this.virtualModeCreateRecords(null, function (e) { if (!1 === e || e && 0 == e.length) return t._loading = !1, t.loadingFailed = !0, t.source.hierarchy = new Array, i._hideLoadElement(), t._renderrows(), t._updateScrollbars(), void t._arrange(); for (var s = 0; s < e.length; s++) e[s].level = 0, i.virtualModeRecordCreating(e[s]), t.rowsByKey[e[s].uid] = e[s]; t.source.hierarchy = e, t.source._source.hierarchy || (t.source._source.hierarchy = {}), t._loading = !1, i._hideLoadElement(), t._renderrows(), t._updateScrollbars(), t._arrange() }), this._showLoadElement() } t.rendering && t.rendering(); var r = 0; t.table[0].rows = new Array; P = t.toTP("jqx-cell") + " " + t.toTP("jqx-widget-content") + " " + t.toTP("jqx-item"); t.rtl && (P += " " + t.toTP("jqx-cell-rtl")); var o = t.columns.records.length, a = e.jqx.browser.msie && e.jqx.browser.version < 8; a && t.host.attr("hideFocus", "true"); var n = new Array, l = function (e, i) { for (var r = 0; r < e.length; r++) { var o = e[r]; if (o) { var a = t.rowinfo[o.uid] ? t.rowinfo[o.uid].expanded : o.expanded; if (0 == t.dataview.filters.length && (o._visible = !0), !1 !== o._visible) if (a || o[s.leaf]) { if (i.push(o), o.records && o.records.length > 0) for (var n = l(o.records, new Array), h = 0; h < n.length; h++) i.push(n[h]) } else i.push(o) } } return i }, h = 0 === t.source.hierarchy.length ? t.source.records : t.source.hierarchy; if (h = t.dataview.evaluate(h), t.dataViewRecords = h, this.showSubAggregates) { var d = function (t, i) { 0 != t && i.length > 0 && (i[i.length - 1] ? i[i.length - 1].aggregate || i.push({ _visible: !0, level: t, siblings: i, aggregate: !0, leaf: !0 }) : e.jqx.browser.msie && e.jqx.browser.version < 9 && i[i.length - 2] && (i[i.length - 2].aggregate || i.push({ _visible: !0, level: t, siblings: i, aggregate: !0, leaf: !0 }))); for (var s = 0; s < i.length; s++) i[s] && i[s].records && d(t + 1, i[s].records) }; d(0, h) } if (0 === t.source.hierarchy.length) { if ("all" == t.dataview.pagesize || !t.pageable || t.serverProcessing) { u = h; if (t.pageable && t.serverProcessing && h.length > t.dataview.pagesize) u = h.slice(t.dataview.pagesize * t.dataview.pagenum, t.dataview.pagesize * t.dataview.pagenum + t.dataview.pagesize) } else u = h.slice(t.dataview.pagesize * t.dataview.pagenum, t.dataview.pagesize * t.dataview.pagenum + t.dataview.pagesize); n = u } else { h = l.call(t, h, new Array); if ("all" != t.dataview.pagesize && t.pageable) u = h.slice(t.dataview.pagesize * t.dataview.pagenum, t.dataview.pagesize * t.dataview.pagenum + t.dataview.pagesize); else u = h; var n = u, c = t.dataview.pagenum; if (t.updatepagerdetails(), t.dataview.pagenum != c) { if ("all" != t.dataview.pagesize && t.pageable) u = h.slice(t.dataview.pagesize * t.dataview.pagenum, t.dataview.pagesize * t.dataview.pagenum + t.dataview.pagesize); else var u = h; n = u } } t.renderedRecords = n; var p = n.length, m = t.tableZIndex, g = 0, f = 0; if (a) for (y = 0; y < o; y++) { (I = (j = t.columns.records[y]).width) < j.minwidth && (I = j.minwidth), I > j.maxwidth && (I = j.maxwidth); D = e('<table><tr><td role="gridcell" style="max-width: ' + I + "px; width:" + I + 'px;" class="' + P + '"></td></tr></table>'); e(document.body).append(D); var v = D.find("td"); g = 1 + parseInt(v.css("padding-left")) + parseInt(v.css("padding-right")), D.remove(); break } for (var x = t.rtl ? " " + t.toTP("jqx-grid-table-rtl") : "", w = "<table cellspacing='0' class='" + t.toTP("jqx-grid-table") + x + "' id='table" + t.element.id + "'><colgroup>", b = "<table cellspacing='0' class='" + t.toTP("jqx-grid-table") + x + "' id='pinnedtable" + t.element.id + "'><colgroup>", _ = null, y = 0; y < o; y++) { var j = t.columns.records[y]; if (!j.hidden) { if (_ = j, (I = j.width) < j.minwidth && (I = j.minwidth), I > j.maxwidth && (I = j.maxwidth), (I -= g) < 0 && (I = 0), a) { R = I; 0 == y && R++, b += "<col style='max-width: " + I + "px; width: " + R + "px;'>", w += "<col style='max-width: " + I + "px; width: " + R + "px;'>" } else b += "<col style='max-width: " + I + "px; width: " + I + "px;'>", w += "<col style='max-width: " + I + "px; width: " + I + "px;'>"; f += I } } w += "</colgroup>", b += "</colgroup>", t._hiddencolumns = !1; var q = !1; if (0 === p) { var T = '<tr role="row">', C = t.host.height(); if (t.pageable && (C -= t.pagerheight, "both" === t.pagerposition && (C -= t.pagerheight)), C -= t.columnsheight, t.filterable) { var S = t.filter.find(".filterrow"), k = 1; t.filter.find(".filterrow-hidden").length > 0 && (k = 0), C -= t.filterheight + t.filterheight * S.length * k } t.showstatusbar && (C -= t.statusbarheight), t.showaggregates && (C -= t.aggregatesheight), C < 25 && (C = 25), "hidden" != t.hScrollBar[0].style.visibility && (C -= t.hScrollBar.outerHeight()), ("auto" === t.height || null === t.height || t.autoheight) && (C = 100); var I = t.host.width() + 2, D = '<td colspan="' + t.columns.records.length + '" role="gridcell" style="border-right-color: transparent; min-height: ' + C + "px; height: " + C + "px;  min-width:" + f + "px; max-width:" + f + "px; width:" + f + "px;", P = t.toTP("jqx-cell") + " " + t.toTP("jqx-grid-cell") + " " + t.toTP("jqx-item"); D += '" class="' + (P += " " + t.toTP("jqx-center-align")) + '">', t._loading || (D += t.gridlocalization.emptydatastring), w += T += D += "</td>", b += T, t.table[0].style.width = f + 2 + "px", r = f } for (var B = t.source._source.hierarchy && t.source._source.hierarchy.groupingDataFields ? t.source._source.hierarchy.groupingDataFields.length : 0, z = 0; z < n.length; z++) { var H = n[z], M = H.uid; B > 0 && H[s.level] < B && (M = H.uid), void 0 === H.uid && (H.uid = t.dataview.generatekey()); var T = '<tr data-key="' + M + '" role="row" id="row' + z + t.element.id + '">', E = '<tr data-key="' + M + '" role="row" id="row' + z + t.element.id + '">'; if (H.aggregate) var T = '<tr data-role="summaryrow" role="row" id="row' + z + t.element.id + '">', E = '<tr data-role="summaryrow" role="row" id="row' + z + t.element.id + '">'; var A = 0; t.rowinfo[M] ? (void 0 === t.rowinfo[M].checked && (t.rowinfo[M].checked = H[s.checked]), void 0 === t.rowinfo[M].icon && (t.rowinfo[M].icon = H[s.icon]), void 0 === t.rowinfo[M].aggregate && (t.rowinfo[M].aggregate = H[s.aggregate]), void 0 === t.rowinfo[M].row && (t.rowinfo[M].row = H), void 0 === t.rowinfo[M].leaf && (t.rowinfo[M].leaf = H[s.leaf]), void 0 === t.rowinfo[M].expanded && (t.rowinfo[M].expanded = H[s.expanded])) : t.rowinfo[M] = { selected: H[s.selected], checked: H[s.checked], icon: H[s.icon], aggregate: H.aggregate, row: H, leaf: H[s.leaf], expanded: H[s.expanded] }; var L = t.rowinfo[M]; L.row = H, H.originalRecord && (L.originalRecord = H.originalRecord); for (var O = 0, y = 0; y < o; y++) { var N = t.columns.records[y]; (N.pinned || t.rtl && t.columns.records[o - 1].pinned) && (q = !0), (I = N.width) < N.minwidth && (I = N.minwidth), I > N.maxwidth && (I = N.maxwidth), (I -= g) < 0 && (I = 0); P = t.toTP("jqx-cell") + " " + t.toTP("jqx-grid-cell") + " " + t.toTP("jqx-item"); N.pinned && (P += " " + t.toTP("jqx-grid-cell-pinned")), t.sortcolumn === N.displayfield && (P += " " + t.toTP("jqx-grid-cell-sort")), t.altrows && z % 2 != 0 && (P += " " + t.toTP("jqx-grid-cell-alt")), t.rtl && (P += " " + t.toTP("jqx-cell-rtl")); var F = ""; if (B > 0 && !a && H[s.level] < B) { F += ' colspan="' + o + '"'; for (var R = 0, W = 0; W < o; W++) { var V = t.columns.records[W]; if (!V.hidden) { var G = V.width; G < V.minwidth && (I = V.minwidth), G > V.maxwidth && (I = V.maxwidth), (G -= g) < 0 && (G = 0), R += G } } I = R } var D = '<td role="gridcell"' + F + ' style="max-width:' + I + "px; width:" + I + "px;", U = '<td role="gridcell"' + F + ' style="pointer-events: none; visibility: hidden; border-color: transparent; max-width:' + I + "px; width:" + I + "px;"; y == o - 1 && 1 == o && (D += "border-right-color: transparent;", U += "border-right-color: transparent;"), B > 0 && H[s.level] < B ? t.rtl && (P += " " + t.toTP("jqx-right-align")) : "left" != N.cellsalign && ("right" === N.cellsalign ? P += " " + t.toTP("jqx-right-align") : P += " " + t.toTP("jqx-center-align")), L && (L.selected && t.editKey !== M && "none" !== t.selectionmode && (P += " " + t.toTP("jqx-grid-cell-selected"), P += " " + t.toTP("jqx-fill-state-pressed")), L.locked && (P += " " + t.toTP("jqx-grid-cell-locked")), L.aggregate && (P += " " + t.toTP("jqx-grid-cell-pinned"))), N.hidden ? (D += "display: none;", U += "display: none;", t._hiddencolumns = !0) : (0 != O || t.rtl ? (D += "border-right-width: 0px;", U += "border-right-width: 0px;") : (D += "border-left-width: 0px;", U += "border-left-width: 0px;"), O++, A += g + I), N.pinned && (D += "pointer-events: auto;", U += "pointer-events: auto;"); var Y = ""; if (0 != t.source.hierarchy.length && H.records && (!H.records || 0 !== H.records.length) || this.virtualModeCreateRecords || (L.leaf = !0), H.records && H.records.length > 0 && (L.leaf = !1), t.dataview.filters.length > 0 && H.records && H.records.length > 0) { for (var K = !1, $ = 0; $ < H.records.length; $++) if (!1 !== H.records[$]._visible && void 0 == H.records[$].aggregate) { K = !0; break } L.leaf = !K } L && !L.leaf && (L.expanded ? (Y += t.toTP("jqx-tree-grid-expand-button") + " ", t.rtl ? Y += t.toTP("jqx-grid-group-expand-rtl") : Y += t.toTP("jqx-grid-group-expand"), Y += " " + t.toTP("jqx-icon-arrow-down")) : (Y += t.toTP("jqx-tree-grid-collapse-button") + " ", t.rtl ? (Y += t.toTP("jqx-grid-group-collapse-rtl"), Y += " " + t.toTP("jqx-icon-arrow-left")) : (Y += t.toTP("jqx-grid-group-collapse"), Y += " " + t.toTP("jqx-icon-arrow-right")))), t.autorowheight && 1 != O || (P += " " + t.toTP("jqx-grid-cell-nowrap ")); var X = t._getcellvalue(N, L.row); if (B > 0 && H[s.level] < B && (X = H.label), "" != N.cellsformat && e.jqx.dataFormat && (e.jqx.dataFormat.isDate(X) ? X = e.jqx.dataFormat.formatdate(X, N.cellsformat, t.gridlocalization) : (e.jqx.dataFormat.isNumber(X) || !isNaN(parseFloat(X)) && isFinite(X)) && (X = e.jqx.dataFormat.formatnumber(X, N.cellsformat, t.gridlocalization))), "" != N.cellclassname && N.cellclassname) if ("string" == typeof N.cellclassname) P += " " + N.cellclassname; else { var Q = N.cellclassname(z, N.datafield, t._getcellvalue(N, L.row), L.row, X); Q && (P += " " + Q) } if ("" != N.cellsrenderer && N.cellsrenderer) { var J = N.cellsrenderer(M, N.datafield, t._getcellvalue(N, L.row), L.row, X); void 0 !== J && (X = J) } if (L.aggregate && N.aggregates) { var Z = H.siblings.slice(0, H.siblings.length - 1), ee = t._calculateaggregate(N, null, !0, Z); if (H[N.displayfield] = "", ee) if (N.aggregatesrenderer) { if (ee) { var te = N.aggregatesrenderer(ee[N.datafield], N, null, t.getcolumnaggregateddata(N.datafield, N.aggregates, !1, Z), "subAggregates"); X = te, H[N.displayfield] += name + ":" + ee[N.datafield] + "\n" } } else X = "", H[N.displayfield] = "", e.each(ee, function () { var e = this; for (obj in e) { var i = obj, s = '<div style="position: relative; margin: 0px; overflow: hidden;">' + (i = t._getaggregatename(i)) + ":" + e[obj] + "</div>"; X += s, H[N.displayfield] += i + ":" + e[obj] + "\n" } }) } if (1 === O && !t.rtl || N == _ && t.rtl || B > 0 && H[s.level] < B) { for (var ie = "", se = t.toThemeProperty("jqx-tree-grid-indent"), re = L.leaf ? 1 : 0, oe = 0; oe < H[s.level] + re; oe++) ie += "<span class='" + se + "'></span>"; var ae = "<span class='" + Y + "'></span>", ne = "", le = ""; if (this.checkboxes && !H.aggregate) { var he = t.toThemeProperty("jqx-tree-grid-checkbox") + " " + se + " " + t.toThemeProperty("jqx-checkbox-default") + " " + t.toThemeProperty("jqx-fill-state-normal") + " " + t.toThemeProperty("jqx-rc-all"), de = !0; e.isFunction(this.checkboxes) && void 0 == (de = this.checkboxes(M, H)) && (de = !1), de && (ne += L && L.checked ? "<span class='" + he + "'><div class='" + t.toThemeProperty("jqx-tree-grid-checkbox-tick") + " " + t.toThemeProperty("jqx-checkbox-check-checked") + "'></div></span>" : "<span class='" + he + "'></span>") } if (this.icons && !H.aggregate) { ce = t.toThemeProperty("jqx-tree-grid-icon") + " " + se; if (t.rtl) var ce = t.toThemeProperty("jqx-tree-grid-icon") + " " + t.toThemeProperty("jqx-tree-grid-icon-rtl") + " " + se; var ue = t.toThemeProperty("jqx-tree-grid-icon-size") + " " + se, pe = L.icon; e.isFunction(this.icons) && (L.icon = this.icons(M, H), L.icon && (pe = !0)), pe && (L.icon ? le += "<span class='" + ce + "'><img class='" + ue + "' src='" + L.icon + "'/></span>" : le += "<span class='" + ce + "'></span>") } var me = ie + ae + ne + le + "<span class='" + t.toThemeProperty("jqx-tree-grid-title") + "'>" + X + "</span>"; X = t.rtl ? "<span class='" + t.toThemeProperty("jqx-tree-grid-title") + "'>" + X + "</span>" + le + ne + ae + ie : me } if (B > 0 && a && y >= B && H[s.level] < B && (D += "padding-left: 5px; border-left-width: 0px;", U += "padding-left: 5px; border-left-width: 0px;", X = "<span style='visibility: hidden;'>-</span>"), D += '" class="' + P + '">', D += X, D += "</td>", U += '" class="' + P + '">', U += X, U += "</td>", N.pinned ? (E += D, T += D) : (T += D, q && (E += U)), B > 0 && !a && H[s.level] < B) break } if (0 == r && (t.table[0].style.width = A + 2 + "px", r = A), T += "</tr>", E += "</tr>", w += T, b += E, t.rowdetails && !H.aggregate && this.rowDetailsRenderer) { var ge = '<tr data-role="row-details"><td valign="top" align="left" style="pointer-events: auto; max-width:' + I + "px; width:" + I + 'px; overflow: hidden; border-left: none; border-right: none;" colspan="' + t.columns.records.length + '" role="gridcell"', P = t.toTP("jqx-cell") + " " + t.toTP("jqx-grid-cell") + " " + t.toTP("jqx-item"); P += " " + t.toTP("jqx-details"), P += " " + t.toTP("jqx-reset"); var fe = this.rowDetailsRenderer(M, H); fe && (w += ge += '" class="' + P + '"><div style="pointer-events: auto; overflow: hidden;"><div data-role="details">' + fe + "</div></div></td></tr>", b += ge) } } if (w += "</table>", b += "</table>", q) { t.WinJS ? MSApp.execUnsafeLocalFunction(function () { t.table.html(b + w) }) : t.table[0].innerHTML = b + w; var ve = t.table.find("#table" + t.element.id), xe = t.table.find("#pinnedtable" + t.element.id); xe.css("float", "left"), xe.css("pointer-events", "none"), ve.css("float", "left"), xe[0].style.position = "absolute", ve[0].style.position = "relative", ve[0].style.zIndex = m - 10, xe[0].style.zIndex = m + 10, t._table = ve, t._table[0].style.left = "0px", t._pinnedTable = xe, t._table[0].style.width = r + "px", t._pinnedTable[0].style.width = r + "px", t.rtl && t._haspinned && (t._pinnedTable[0].style.left = 3 - r + parseInt(t.element.style.width) + "px") } else { t.WinJS ? MSApp.execUnsafeLocalFunction(function () { t.table.html(w) }) : t.table[0].innerHTML = w; W = t.table.find("#table" + t.element.id); t._table = W, e.jqx.browser.msie && e.jqx.browser.version < 10 && (t._table[0].style.width = r + "px"), 0 === p && (t._table[0].style.width = 2 + r + "px") } 0 === p && (t._table[0].style.tableLayout = "auto", t._pinnedTable && (t._pinnedTable[0].style.tableLayout = "auto")), t.showaggregates && t._updatecolumnsaggregates(), t._loading && 0 == p && (t._arrange(), this._showLoadElement()), t.rendered && t.rendered() } }, propertyChangedHandler: function (e, t, i, s) { void 0 != e.isInitialized && e.isInitialized }, checkrow: function (e, t) { var i = this.base, s = i._names(); if (!i._loading) { var r = i.rowinfo[e]; if (r) r.checked = !0, r.row[s.checked] = !0, !1 !== t && i._renderrows(), i._raiseEvent("rowCheck", { key: e, row: r.row }); else { var o = this.getrow(e); o && (i.rowinfo[e] = { row: o, checked: !0 }, i._raiseEvent("rowCheck", { key: e, row: o })) } } }, uncheckrow: function (e, t) { var i = this.base, s = i._names(); if (!i._loading) { var r = i.rowinfo[e]; if (r) r.checked = !1, r.row[s.checked] = !1, !1 !== t && i._renderrows(), i._raiseEvent("rowUncheck", { key: e, row: r.row }); else { var o = this.getrow(e); o && (i.rowinfo[e] = { row: o, checked: !1 }, i._raiseEvent("rowUncheck", { key: e, row: o })) } } }, expandrow: function (e) { var t = this.base; if (!t._loading) { var i = t._names(), s = this, r = t.rowinfo[e]; if (r) { if (r.expanded) return void (r.row[i.expanded] = !0); if (r.expanded = !0, r.row[i.expanded] = !0, r.originalRecord && (r.originalRecord[i.expanded] = !0), this.virtualModeCreateRecords && !r.row.records) { if (!r.row[i.leaf]) return t._loading = !0, this._showLoadElement(), void this.virtualModeCreateRecords(r.row, function (e) { if (!1 === e) return t._loading = !1, s._hideLoadElement(), r.leaf = !0, r.row[i.leaf] = !0, void t._renderrows(); for (var o = 0; o < e.length; o++) { if (e[o][i.level] = r.row[i.level] + 1, e[o][i.parent] = r.row, t.rowsByKey[e[o].uid]) throw t._loading = !1, s._hideLoadElement(), r.leaf = !0, r.row[i.leaf] = !0, t._renderrows(), new Error("Please, check whether you Add Records with unique ID/Key. "); t.rowsByKey[e[o].uid] = e[o], s.virtualModeRecordCreating(e[o]) } r.row.records = e, (!e || e && 0 == e.length) && (r.leaf = !0, r.row[i.leaf] = !0), r.originalRecord && (r.originalRecord.records = e, r.originalRecord[i.expanded] = !0, 0 == e.length && (r.originalRecord[i.leaf] = !0)), t._loading = !1, s._hideLoadElement(); var a = t.vScrollBar.css("visibility"); t._renderrows(), t._updateScrollbars(); var n = a != t.vScrollBar.css("visibility"); ("auto" === t.height || null === t.height || t.autoheight || n) && t._arrange(), t._renderhorizontalscroll() }) } if (!t.updating()) { var o = t.vScrollBar.css("visibility"); t._renderrows(), t._updateScrollbars(); var a = o != t.vScrollBar.css("visibility"); ("auto" === t.height || null === t.height || t.autoheight || a) && t._arrange(), t._renderhorizontalscroll(), t._raiseEvent("rowExpand", { row: r.row, rowKey: e }) } } } }, collapserow: function (e) { var t = this.base, i = t._names(); if (!t._loading) { var s = t.rowinfo[e]; if (s) { if (!s.expanded) return void (s.row[i.expanded] = !1); if (s.expanded = !1, s.row[i.expanded] = !1, s.originalRecord && (s.originalRecord[i.expanded] = !1), !t.updating()) { var r = t.vScrollBar.css("visibility"); t._renderrows(), t._updateScrollbars(); var o = r != t.vScrollBar.css("visibility"); ("auto" === t.height || null === t.height || t.autoheight || o) && t._arrange(), t._renderhorizontalscroll(), t._raiseEvent("rowCollapse", { row: s.row, rowKey: e }) } } } } }) }(jQuery), function (e) { e.jqx.jqxWidget("jqxBulletChart", "", {}), e.extend(e.jqx._jqxBulletChart.prototype, { defineInstance: function () { this.width = 500, this.height = 100, this.barSize = "50%", this.ranges = [{ startValue: 0, endValue: 50, color: "#000000", opacity: .7 }, { startValue: 50, endValue: 80, color: "#000000", opacity: .5 }, { startValue: 80, endValue: 100, color: "#000000", opacity: .3 }], this.pointer = { value: 65, label: "Value", size: "25%", color: "" }, this.target = { value: 85, label: "Target", size: 4, color: "" }, this.ticks = { position: "far", interval: 20, size: 10 }, this.title = "Title", this.description = "Description", this.orientation = "horizontal", this.labelsFormat = null, this.labelsFormatFunction = null, this.animationDuration = 400, this.showTooltip = !0, this.tooltipFormatFunction = null, this.disabled = !1, this.rtl = !1, this.events = ["change"] }, createInstance: function (t) { if (!e.jqx.dataAdapter) throw new Error("jqxBulletChart: Missing reference to the following module: 'jqxdata.js'."); this._setDefaultValues(), this.render(); var i = this; e.jqx.utilities.resize(this.host, function () { i._timer && clearTimeout(i._timer), i._timer = setTimeout(function () { var e = i.animationDuration; i.animationDuration = 0, i.render(), setTimeout(function () { i.animationDuration = e }, 0) }, 10) }, !1, !0) }, render: function () { this.host.children().length > 0 && (this._removeHandlers(), 1 == this.showTooltip && this.host.jqxTooltip("destroy"), this.host.empty()), this.host.addClass(this.toThemeProperty("jqx-widget")), this.host.addClass(this.toThemeProperty("jqx-bulletchart")), this.host.width(this.width), this.host.height(this.height); var t, i = this.host.width(), s = this.host.height(), r = this.rtl ? "rtl" : "ltr"; "horizontal" == this.orientation ? t = e("<div style='position: absolute; visibility: hidden; padding: 5px;'><div class='" + this.toThemeProperty("jqx-bulletchart-title") + "' style='direction: " + r + ";'>" + this.title + "</div><div class='" + this.toThemeProperty("jqx-bulletchart-description") + "' style='direction: " + r + ";'>" + this.description + "</div></div>") : "vertical" == this.orientation && (t = e("<div style='position: absolute; visibility: hidden; padding-bottom: 15px;'><div class='" + this.toThemeProperty("jqx-bulletchart-title") + "' style='width: " + i + "px; direction: " + r + ";'>" + this.title + "</div><div class='" + this.toThemeProperty("jqx-bulletchart-description") + "' style='direction: " + r + ";'>" + this.description + "</div></div>")), this.host.append(t); var o = t.outerWidth(), a = t.outerHeight(); t.remove(); var n, l, h, d, c, u; if ("horizontal" == this.orientation) { if (n = "jqx-bulletchart-title-container-horizontal", l = "jqx-bulletchart-chart-container-horizontal", h = this._checkPercentage(this.barSize, this.host), m = o, d = this.barSize, c = 0, p = i - m, u = d, this.width && this.width.toString().indexOf("%") >= 0) { var p = parseFloat(parseFloat(100 * p) / i).toString() + "%", m = parseFloat(parseFloat(100 * m) / i).toString() + "%"; this._percentageWidth = !0 } } else "vertical" == this.orientation && (n = "jqx-bulletchart-title-container-vertical", l = "jqx-bulletchart-chart-container-vertical", h = 0, m = "100%", d = a, c = this._checkPercentage(this.barSize, this.host), p = this.barSize, u = s - d); if ((0 == this.rtl || 1 == this.rtl && "vertical" == this.orientation) && this.host.append("<div id='" + this.element.id + "titleContainer' class='" + n + "' style='top: " + h + ";'></div>"), this.host.append("<div id='" + this.element.id + "ChartContainer' class='" + l + "' style='top: " + h + "; left: " + c + ";'></div>"), 1 == this.rtl && "horizontal" == this.orientation && this.host.append("<div id='" + this.element.id + "titleContainer' class='" + n + "' style='top: " + h + ";'></div>"), this._titleContainer = e("#" + this.element.id + "titleContainer"), this._chartContainer = e("#" + this.element.id + "ChartContainer"), this._titleContainer.css({ width: m, height: d }), this._chartContainer.css({ width: p, height: u }), this._min = this.ranges[0].startValue, this._max = this.ranges[this.ranges.length - 1].endValue, this._interval = this._max - this._min, this._valueToPixelsHorizontal = this._chartContainer.width() / this._interval, this._valueToPixelsVertical = this._chartContainer.height() / this._interval, this._checkValues(), this._appendRanges(), this._appendPointerAndTarget(), this._appendTitleAndDescription(), "none" != this.ticks.position && this._appendTicksAndLabels(), 1 == this.disabled && this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")), 1 == this.showTooltip) { if (void 0 == this.host.jqxTooltip) throw new Error("jqxBulletChart: Missing reference to the following module: 'jqxtooltip.js'."); this._initializeTooltip(), this.host.data().jqxWidget = this } this._updateValue(this.pointer.value, 0, !0) }, refresh: function (e) { e || this.render() }, val: function (e) { if (0 == arguments.length || null != e && "object" == typeof e) return this.pointer.value; e > this._max ? e = this._max : e < this._min && (e = this._min), e != this.pointer.value && (this._updateValue(e, this.pointer.value), this.pointer.value = e, 1 == this.showTooltip && this._updateTooltip()) }, destroy: function () { e.jqx.utilities.resize(this.host, null, !0), this._removeHandlers(), 1 == this.showTooltip && this.host.jqxTooltip("destroy"), this.host.remove() }, propertyChangedHandler: function (t, i, s, r) { if (s != r) { var o = !0, a = function () { e.each(s, function (e, s) { void 0 == r[e] && (t[i][e] = s) }) }; switch (i) { case "barSize": break; case "ranges": e.each(s, function (s, o) { e.each(o, function (e, o) { void 0 == r[s][e] && (t[i][s][e] = o) }) }), this._setDefaultValues(); break; case "pointer": return a(), void this._updatePointer(r, s); case "target": return a(), void this._updateTarget(r, s); case "ticks": o = !1, a(), e.each(s, function (e, r) { s[e] != t[i][e] && (o = !0) }); break; case "showTooltip": if (1 == r) { if (void 0 == this.host.jqxTooltip) throw new Error("jqxBulletChart: Missing reference to the following module: 'jqxtooltip.js'."); this._initializeTooltip() } else this._removeHandlers(), this.host.jqxTooltip("destroy"); break; case "animationDuration": return; case "tooltipFormatFunction": return void this._updateTooltip(); case "disabled": return void (1 == r ? this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")) : this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))) } 1 == o && this.render() } }, _raiseEvent: function (e, t) { var i = this.events[e], s = new jQuery.Event(i); s.owner = this, s.args = t; try { var r = this.host.trigger(s) } catch (e) { } return r }, _removeHandlers: function () { var t = e("#" + this.element.id + "Pointer, #" + this.element.id + "Target"); this.removeHandler(t, "mouseenter.bulletchart" + this.element.id), this.removeHandler(t, "mouseleave.bulletchart" + this.element.id) }, _setDefaultValues: function () { for (var e = this.ranges, t = this.ranges.length, i = 0; i < t; i++) { if (void 0 == e[i].startValue || void 0 == e[i].endValue) throw new Error("jqxBulletChart: Each range must have its startValue and endValue set."); void 0 == e[i].color && (this.ranges[i].color = "#000000"), void 0 == e[i].opacity && (this.ranges[i].opacity = 1 - 1 / t * i) } var s = this.pointer; void 0 == s.value && (this.pointer.value = 65), void 0 == s.label && (this.pointer.label = "Value"), void 0 == s.size && (this.pointer.size = "25%"), void 0 == s.color && (this.pointer.color = ""); var r = this.target; void 0 == r.value && (this.target.value = 85), void 0 == r.label && (this.target.label = "Target"), void 0 == r.size && (this.target.size = 5), void 0 == r.color && (this.target.color = ""); var o = this.ticks; void 0 == o.position && (this.ticks.position = "near"), void 0 == o.interval && (this.ticks.interval = 20), void 0 == o.size && (this.ticks.size = 10) }, _checkValues: function () { this.pointer.value > this._max ? this.pointer.value = this._max : this.pointer.value < this._min && (this.pointer.value = this._min), this.target.value > this._max ? this.target.value = this._max : this.target.value < this._min && (this.target.value = this._min) }, _appendRanges: function () { for (var e = "", t = this.ranges.length, i = 0; i < t; i++) { var s, r = this.ranges[i]; if ("horizontal" == this.orientation) { var o = this.rtl ? "right" : "left", a = (r.startValue - this._min) * this._valueToPixelsHorizontal, n = (r.endValue - r.startValue) * this._valueToPixelsHorizontal; s = "<div class='" + this.toThemeProperty("jqx-bulletchart-range") + " " + this.toThemeProperty("jqx-bulletchart-range-horizontal") + "' style='" + o + ": " + a + "px; width: " + n + "px; background-color: " + r.color + "; opacity: " + r.opacity + "'></div>" } else if ("vertical" == this.orientation) { var l = (r.startValue - this._min) * this._valueToPixelsVertical, h = (r.endValue - r.startValue) * this._valueToPixelsVertical; s = "<div class='" + this.toThemeProperty("jqx-bulletchart-range") + " " + this.toThemeProperty("jqx-bulletchart-range-vertical") + "' style='bottom: " + l + "px; height: " + h + "px; background-color: " + r.color + "; opacity: " + r.opacity + "'></div>" } e += s } this._chartContainer.append(e) }, _appendPointerAndTarget: function () { var e = "", t = this.element.id + "Pointer", i = this.element.id + "Target", s = this.pointer.size, r = this.target.value, o = this.target.size, a = r > 0 ? 0 : parseInt(o), n = this.pointer.color.length > 0 ? "" : this.toThemeProperty("jqx-fill-state-pressed"), l = this.target.color.length > 0 ? "" : this.toThemeProperty("jqx-fill-state-pressed"); if ("horizontal" == this.orientation) { var h = this._normaliseValue(s), d = this._checkPercentage(s, this._chartContainer), c = this.rtl ? "right" : "left", u = (r - this._min) * this._valueToPixelsHorizontal - a, p = u + parseInt(o) - this._chartContainer.width(); u < 0 ? u = 0 : p > 0 && (u -= p); var m = this._normaliseValue(o); e += "<div class='" + l + " " + this.toThemeProperty("jqx-bulletchart-target") + " " + this.toThemeProperty("jqx-bulletchart-target-horizontal") + "' id='" + i + "' style='" + c + ": " + u + "px; width: " + m + "; background-color: " + this.target.color + "'></div>", e += "<div class='" + n + " " + this.toThemeProperty("jqx-bulletchart-pointer") + "' id='" + t + "' style='top: " + d + "; height: " + h + "; background-color: " + this.pointer.color + "'></div>" } else if ("vertical" == this.orientation) { this._chartContainer.width(); var g = this._normaliseValue(s), f = this._checkPercentage(s, this._chartContainer), v = (r - this._min) * this._valueToPixelsVertical - a, p = v + parseInt(o) - this._chartContainer.height(); v < 0 ? v = 0 : p > 0 && (v -= p); var x = this._normaliseValue(o); e += "<div class='" + l + " " + this.toThemeProperty("jqx-bulletchart-target") + " " + this.toThemeProperty("jqx-bulletchart-target-vertical") + "' id='" + i + "' style='bottom: " + v + "px; height: " + x + "; background-color: " + this.target.color + "'></div>", e += "<div class='" + n + " " + this.toThemeProperty("jqx-bulletchart-pointer") + "' id='" + t + "' style='left: " + f + "; width: " + g + "; background-color: " + this.pointer.color + "'></div>" } this._chartContainer.append(e) }, _updatePointer: function (t, i) { var s = e("#" + this.element.id + "Pointer"); if (t.value > this._max ? this.pointer.value = this._max : t.value < this._min && (this.pointer.value = this._min), t.value != i.value && (this._updateValue(t.value, i.value), 1 == this.showTooltip && this._updateTooltip()), t.label != i.label && 1 == this.showTooltip && this._updateTooltip(), t.size != i.size) { var r = t.size; if ("horizontal" == this.orientation) { var o = this._checkPercentage(r, this._chartContainer), a = this._normaliseValue(r); s.css({ top: o, height: a }) } else if ("vertical" == this.orientation) { var n = this._checkPercentage(r, this._chartContainer), l = this._normaliseValue(r); s.css({ left: n, width: l }) } } t.color != i.color && ("" == t.color ? (s.css("background-color", ""), s.addClass(this.toThemeProperty("jqx-fill-state-pressed"))) : (s.removeClass(this.toThemeProperty("jqx-fill-state-pressed")), s.css("background-color", t.color))) }, _updateTarget: function (t, i) { var s = e("#" + this.element.id + "Target"); if (t.value > this._max ? this.target.value = this._max : t.value < this._min && (this.target.value = this._min), t.value != i.value || t.size != i.size) { var r = t.value, o = parseInt(t.size), a = r > 0 ? 0 : o; if ("horizontal" == this.orientation) { this.rtl; var n = (r - this._min) * this._valueToPixelsHorizontal - a, l = n + o - this._chartContainer.width(); n < 0 ? n = 0 : l > 0 && (n -= l), 0 == this.rtl ? s.css("left", n) : s.css("right", n), s.width(o) } else if ("vertical" == this.orientation) { var h = (r - this._min) * this._valueToPixelsVertical - a, l = h + o - this._chartContainer.height(); h < 0 ? h = 0 : l > 0 && (h -= l), s.css({ bottom: h, height: o }) } 1 == this.showTooltip && this._updateTooltip() } t.label != i.label && 1 == this.showTooltip && this._updateTooltip(), t.color != i.color && ("" == t.color ? (s.css("background-color", ""), s.addClass(this.toThemeProperty("jqx-fill-state-pressed"))) : (s.removeClass(this.toThemeProperty("jqx-fill-state-pressed")), s.css("background-color", t.color))) }, _appendTitleAndDescription: function () { var t; t = "horizontal" == this.orientation ? 1 == this.rtl ? this.toThemeProperty("jqx-bulletchart-title-description-rtl") : this.toThemeProperty("jqx-bulletchart-title-description-ltr") : this.toThemeProperty("jqx-bulletchart-title-description-vertical"); var i = this.rtl ? "rtl" : "ltr", s = "<div id='" + this.element.id + "Title' class='" + this.toThemeProperty("jqx-bulletchart-title") + " " + t + "' style='direction: " + i + ";'>" + this.title + "</div><div id='" + this.element.id + "Description' class='" + this.toThemeProperty("jqx-bulletchart-description") + " " + t + "' style='direction: " + i + ";'>" + this.description + "</div>", r = e("<div style='position: absolute; visibility: hidden;'>" + s + "</div>"); this._titleContainer.append(r); var o = r.children(), a = e(o[0]).height() + e(o[1]).height(); r.remove(); var n; n = "horizontal" == this.orientation ? 0 == this.rtl ? this.toThemeProperty("jqx-bulletchart-title-inner-container") + " " + this.toThemeProperty("jqx-bulletchart-title-inner-container-ltr") : this.toThemeProperty("jqx-bulletchart-title-inner-container") + " " + this.toThemeProperty("jqx-bulletchart-title-inner-container-rtl") : "", this._titleContainer.append("<div class='" + n + "' style='height: " + a + "px;'>" + s + "</div>") }, _appendTicksAndLabels: function () { var t = e("<div style='position: absolute; visibility: hidden;'></div>"); this._chartContainer.append(t); var i = "", s = this._min < 0, r = this.ticks.size; if ("horizontal" == this.orientation) { var o = this._titleContainer.width(), a = this._chartContainer.offset().top - this.host.offset().top; if ("both" == this.ticks.position || "far" == this.ticks.position) var n = this._chartContainer.height() + a; for (p = 0; p <= this._interval; p += this.ticks.interval) { var l = p * this._valueToPixelsHorizontal + o; p + this.ticks.interval > this._interval && (l -= 1), s && (g = p + this._min == 0) && (i += "<div class='" + this.toThemeProperty("jqx-bulletchart-ticks") + " " + this.toThemeProperty("jqx-bulletchart-ticks-horizontal") + " " + this.toThemeProperty("jqx-bulletchart-zero-tick") + "' style='top: " + a + "px; " + d + ": " + l + "px; height: " + this._chartContainer.height() + "px;'></div>", s = !1); f = this._labelValue(p); t.html(f); var h = l - t.width() / 2, d = this.rtl ? "right" : "left"; "both" != this.ticks.position && "far" != this.ticks.position || (i += "<div class='" + this.toThemeProperty("jqx-bulletchart-ticks") + " " + this.toThemeProperty("jqx-bulletchart-ticks-horizontal") + "' style='top: " + n + "px; " + d + ": " + l + "px; height: " + r + "px;'></div>", i += "<div class='" + this.toThemeProperty("jqx-bulletchart-labels") + "' style='top: " + (n + r + 2) + "px; " + d + ": " + h + "px;'>" + f + "</div>"), "both" != this.ticks.position && "near" != this.ticks.position || (i += "<div class='" + this.toThemeProperty("jqx-bulletchart-ticks") + " " + this.toThemeProperty("jqx-bulletchart-ticks-horizontal") + "' style='top: " + (a - r) + "px; " + d + ": " + l + "px; height: " + r + "px;'></div>", i += "<div class='" + this.toThemeProperty("jqx-bulletchart-labels") + "' style='top: " + (a - (r + t.height() + 2)) + "px; " + d + ": " + h + "px;'>" + f + "</div>") } } else if ("vertical" == this.orientation) { var c = this._chartContainer.offset().left - this.host.offset().left; if ("both" == this.ticks.position || "far" == this.ticks.position) var u = this._chartContainer.width(); for (var p = 0; p <= this._interval; p += this.ticks.interval) { var m = p * this._valueToPixelsVertical; if (p + this.ticks.interval > this._interval && (m -= 1), s) { var g = p + this._min == 0; g && (i += "<div class='" + this.toThemeProperty("jqx-bulletchart-ticks") + " " + this.toThemeProperty("jqx-bulletchart-ticks-vertical") + " " + this.toThemeProperty("jqx-bulletchart-zero-tick") + "' style='left: " + c + "px; bottom: " + m + "px; width: " + u + "px;'></div>", s = !1) } if ("both" == this.ticks.position || "near" == this.ticks.position) { i += "<div class='" + this.toThemeProperty("jqx-bulletchart-ticks") + " " + this.toThemeProperty("jqx-bulletchart-ticks-vertical") + "' style='left: " + (c - r) + "px; bottom: " + m + "px; width: " + r + "px;'></div>"; f = this._labelValue(p, "near"); t.html(f); h = t.height() / 2 - 1; i += "<div class='" + this.toThemeProperty("jqx-bulletchart-labels") + "' style='left: " + (c - (r + t.width() + 2)) + "px; bottom: " + (m - h) + "px;'>" + f + "</div>" } if ("both" == this.ticks.position || "far" == this.ticks.position) { i += "<div class='" + this.toThemeProperty("jqx-bulletchart-ticks") + " " + this.toThemeProperty("jqx-bulletchart-ticks-vertical") + "' style='left: " + (u + c) + "px; bottom: " + m + "px; width: " + r + "px;'></div>"; var f = this._labelValue(p, "far"); t.html(f); h = t.height() / 2 - 1; i += "<div class='" + this.toThemeProperty("jqx-bulletchart-labels") + "' style='left: " + (u + c + r + 2) + "px; bottom: " + (m - h) + "px;'>" + f + "</div>" } } } this.host.append(i), t.remove() }, _labelValue: function (t, i) { var s = t + this._min; return this.labelsFormatFunction ? this.labelsFormatFunction(s, i) : e.jqx.dataFormat.formatnumber(s, this.labelsFormat) }, _initializeTooltip: function () { var t = this, i = this._tooltipContent(); this.host.jqxTooltip({ theme: this.theme, position: "mouse", content: i, trigger: "none", autoHide: !1, rtl: this.rtl }), this.host.jqxTooltip("getInstance").val = e.proxy(this.val, this); var s = e("#" + this.element.id + "Pointer, #" + this.element.id + "Target"); this.addHandler(s, "mouseenter.bulletchart" + this.element.id, function (i) { 0 == t.disabled && (t.host.jqxTooltip("open", i.pageX, i.pageY), (i.target.id == t.element.id + "Pointer" && "" == t.pointer.color || i.target.id == t.element.id + "Target" && "" == t.target.color) && (e(i.target).removeClass(t.toThemeProperty("jqx-fill-state-pressed")), e(i.target).addClass(t.toThemeProperty("jqx-fill-state-hover")))) }), this.addHandler(s, "mouseleave.bulletchart" + this.element.id, function (i) { 0 == t.disabled && (t.host.jqxTooltip("close"), (i.target.id == t.element.id + "Pointer" && "" == t.pointer.color || i.target.id == t.element.id + "Target" && "" == t.target.color) && (e(i.target).removeClass(t.toThemeProperty("jqx-fill-state-hover")), e(i.target).addClass(t.toThemeProperty("jqx-fill-state-pressed")))) }) }, _updateTooltip: function () { this.host.jqxTooltip({ content: this._tooltipContent() }) }, _tooltipContent: function () { var t; if (this.tooltipFormatFunction) t = this.tooltipFormatFunction(this.pointer.value, this.target.value); else { var i = e.jqx.dataFormat.formatnumber(this.pointer.value, this.labelsFormat), s = e.jqx.dataFormat.formatnumber(this.target.value, this.labelsFormat); t = "<div>" + this.pointer.label + ": " + i + "</div><div>" + this.target.label + ": " + s + "</div>" } return t }, _updateValue: function (t, i, s) { var r, o, a, n = this, l = e("#" + this.element.id + "Pointer"), h = function (e, s, h) { if (n._min >= 0) "vertical" == e ? l.css("bottom", 0) : 1 == n.rtl && "horizontal" == e && l.css("right", 0), r = (t - n._min) * s; else { if (t >= 0) { "horizontal" == e ? 1 == n.rtl ? (o = "right", a = "left") : o = "left" : "vertical" == e && (o = "bottom", a = "top"); d = -n._min * s } else { "horizontal" == e ? 1 == n.rtl ? o = "left" : (o = "right", a = "left") : "vertical" == e && (o = "top"); var d = h + n._min * s } l.css(o, d), a && l.css(a, ""), t * i < 0 && ("horizontal" == e ? l.width(0) : "vertical" == e && l.height(0)), r = Math.abs(t * s) } return r }, d = function () { s || n._raiseEvent("0") }; if ("horizontal" == this.orientation) { var c = h("horizontal", this._valueToPixelsHorizontal, this._chartContainer.width()); setTimeout(function () { l.animate({ width: c }, n.animationDuration, d) }, 0) } else if ("vertical" == this.orientation) { var u = h("vertical", this._valueToPixelsVertical, this._chartContainer.height()); setTimeout(function () { l.animate({ height: u }, n.animationDuration, d) }, 0) } }, _checkPercentage: function (e, t) { var i = -1; e.indexOf && (i = e.indexOf("%")); if (-1 == i) { var s; return "horizontal" == this.orientation ? s = t.height() : "vertical" == this.orientation && (s = t.width()), (s - function (t) { return e.indexOf && -1 != e.indexOf("px") ? parseFloat(t.slice(0, e.indexOf("px"))) : t }(e)) / 2 + "px" } return (100 - function (e) { return parseFloat(e.slice(0, i)) }(e)) / 2 + "%" }, _normaliseValue: function (e) { return !e.indexOf || -1 == e.indexOf("px") && -1 == e.indexOf("%") ? e + "px" : e } }) }(jQuery), function (e) { $.jqx.jqxWidget("jqxEditor", "", {}), $.extend($.jqx._jqxEditor.prototype, { defineInstance: function () { this.width = null, this.height = null, this.disabled = !1, this.pasteMode = "html", this.editable = !0, this.lineBreak = "default", this.toolbarPosition = "top", this.commands = { bold: { tooltip: "Bold", command: "bold", type: "toggleButton" }, italic: { tooltip: "Italic", command: "italic", type: "toggleButton" }, underline: { tooltip: "Underline", command: "underline", type: "toggleButton" }, format: { placeHolder: "Format Block", tooltip: "Format Block", command: "formatblock", value: [{ value: "p", label: "Paragraph" }, { value: "h1", label: "Header 1" }, { value: "h2", label: "Header 2" }, { value: "h3", label: "Header 3" }, { value: "h4", label: "Header 4" }], type: "list", width: 120, dropDownWidth: 190, height: 25 }, font: { placeHolder: "Font", tooltip: "Font Name", command: "fontname", value: [{ label: "Arial", value: "Arial, Helvetica, sans-serif" }, { label: "Comic Sans MS", value: '"Comic Sans MS", cursive, sans-serif' }, { label: "Courier New", value: '"Courier New", Courier, monospace' }, { label: "Georgia", value: "Georgia,serif" }, { label: "Impact", value: "Impact,Charcoal,sans-serif" }, { label: "Lucida Console", value: "'Lucida Console',Monaco,monospace" }, { label: "Tahoma", value: "Tahoma,Geneva,sans-serif" }, { label: "Times New Roman", value: "'Times New Roman',Times,serif" }, { label: "Trebuchet MS", value: '"Trebuchet MS",Helvetica,sans-serif' }, { label: "Verdana", value: "Verdana,Geneva,sans-serif" }], type: "list", width: 160, height: 25, dropDownWidth: 160 }, size: { placeHolder: "Size", tooltip: "Font Size", command: "fontsize", value: [{ label: "1 (8pt)", value: "xx-small" }, { label: "2 (10pt)", value: "x-small" }, { label: "3 (12pt)", value: "small" }, { label: "4 (14pt)", value: "medium" }, { label: "5 (18pt)", value: "large" }, { label: "6 (24pt)", value: "x-large" }, { label: "7 (36pt)", value: "xx-large" }], type: "list", width: 45, height: 25, dropDownWidth: 160 }, color: { tooltip: "Text Color", command: "forecolor", value: "#000", type: "colorPicker" }, background: { tooltip: "Fill Color", command: "backcolor", value: "#fff", type: "colorPicker" }, left: { tooltip: "Align Left", command: "justifyleft", type: "toggleButton" }, center: { tooltip: "Align Center", command: "justifycenter", type: "toggleButton" }, right: { tooltip: "Align Right", command: "justifyright", type: "toggleButton" }, outdent: { tooltip: "Indent Less", command: "outdent", type: "button" }, indent: { tooltip: "Indent More", command: "indent", type: "button" }, ul: { tooltip: "Insert unordered list", command: "insertunorderedlist", type: "toggleButton" }, ol: { tooltip: "Insert ordered list", command: "insertorderedlist", type: "toggleButton" }, image: { tooltip: "Insert image", command: "insertimage", type: "button" }, link: { tooltip: "Insert link", command: "createlink", type: "toggleButton" }, html: { tooltip: "View source", command: "viewsource", type: "toggleButton" }, clean: { tooltip: "Remove Formatting", command: "removeformat", type: "button" } }, this.createCommand = null, this.defaultLocalization = { bold: "Bold", italic: "Italic", underline: "Underline", format: "Format Block", font: "Font Name", size: "Font Size", color: "Text Color", background: "Fill Color", left: "Align Left", center: "Align Center", right: "Align Right", outdent: "Indent Less", indent: "Indent More", ul: "Insert unordered list", ol: "Insert ordered list", image: "Insert image", link: "Insert link", html: "View source", clean: "Remove Formatting", Remove: "Remove", Ok: "Ok", Cancel: "Cancel", Change: "Change", "Go to link": "Go to link", "Open in a new window/tab": "Open in a new window/tab", Align: "Align", VSpace: "VSpace", HSpace: "HSpace", Width: "Width", Height: "Height", Title: "Title", URL: "URL", "Insert Image": "Insert Image", "Insert Link": "Insert Link", "Alt Text": "Alt Text", "not set": "&lt;not set&gt;", Left: "Left", Right: "Right", Paragraph: "Paragraph", Header: "Header", Arial: "Arial", "Comic Sans MS": "Comic Sans MS", "Courier New": "Courier New", Georgia: "Georgia", Impact: "Impact", "Lucida Console": "Lucida Console", Tahoma: "Tahoma", "Times New Roman": "Times New Roman", "Trebuchet MS": "Trebuchet MS", Verdana: "Verdana" }, this.localization = this.defaultLocalization, this.tools = "bold italic underline | format font size | color background | left center right | outdent indent | ul ol | image | link | clean | html", this.readOnly = !1, this.stylesheets = new Array, this.rtl = !1, this.colorPickerTemplate = '<div class="jqx-editor-color-picker"><div role="grid"><table class="jqx-editor-color-picker-table" cellspacing="0" cellpadding="0"><tbody><tr><td aria-label="RGB (0, 0, 0)"><div title="RGB (0, 0, 0)" style="background-color: rgb(0, 0, 0);"></div></td><td aria-label="RGB (68, 68, 68)"><div title="RGB (68, 68, 68)" style="background-color: rgb(68, 68, 68);"></div></td><td aria-label="RGB (102, 102, 102)"><div title="RGB (102, 102, 102)" style="background-color: rgb(102, 102, 102);"></div></td><td aria-label="RGB (153, 153, 153)"><div title="RGB (153, 153, 153)" style="background-color: rgb(153, 153, 153);"></div></td><td aria-label="RGB (204, 204, 204)"><div title="RGB (204, 204, 204)" style="background-color: rgb(204, 204, 204);"></div></td><td aria-label="RGB (238, 238, 238)"><div title="RGB (238, 238, 238)" style="background-color: rgb(238, 238, 238);"></div></td><td aria-label="RGB (243, 243, 243)"><div title="RGB (243, 243, 243)" style="background-color: rgb(243, 243, 243);"></div></td><td aria-label="RGB (255, 255, 255)"><div title="RGB (255, 255, 255)" style="background-color: rgb(255, 255, 255);"></div></td></tr></tbody></table></div><div role="grid"><table class="jqx-editor-color-picker-table" cellspacing="0" cellpadding="0"><tbody><tr><td aria-label="RGB (255, 0, 0)"><div title="RGB (255, 0, 0)" style="background-color: rgb(255, 0, 0);"></div></td><td aria-label="RGB (255, 153, 0)"><div title="RGB (255, 153, 0)" style="background-color: rgb(255, 153, 0);"></div></td><td aria-label="RGB (255, 255, 0)"><div title="RGB (255, 255, 0)" style="background-color: rgb(255, 255, 0);"></div></td><td aria-label="RGB (0, 255, 0)"><div title="RGB (0, 255, 0)" style="background-color: rgb(0, 255, 0);"></div></td><td aria-label="RGB (0, 255, 255)"><div title="RGB (0, 255, 255)" style="background-color: rgb(0, 255, 255);"></div></td><td aria-label="RGB (0, 0, 255)"><div title="RGB (0, 0, 255)" style="background-color: rgb(0, 0, 255);"></div></td><td aria-label="RGB (153, 0, 255)"><div title="RGB (153, 0, 255)" style="background-color: rgb(153, 0, 255);"></div></td><td aria-label="RGB (255, 0, 255)"><div title="RGB (255, 0, 255)" style="background-color: rgb(255, 0, 255);"></div></td></tr></tbody></table></div><div role="grid"><table class="jqx-editor-color-picker-table" cellspacing="0" cellpadding="0"><tbody><tr><td aria-label="RGB (244, 204, 204)"><div title="RGB (244, 204, 204)" style="background-color: rgb(244, 204, 204);"></div></td><td aria-label="RGB (252, 229, 205)"><div title="RGB (252, 229, 205)" style="background-color: rgb(252, 229, 205);"></div></td><td aria-label="RGB (255, 242, 204)"><div title="RGB (255, 242, 204)" style="background-color: rgb(255, 242, 204);"></div></td><td aria-label="RGB (217, 234, 211)"><div title="RGB (217, 234, 211)" style="background-color: rgb(217, 234, 211);"></div></td><td aria-label="RGB (208, 224, 227)"><div title="RGB (208, 224, 227)" style="background-color: rgb(208, 224, 227);"></div></td><td aria-label="RGB (207, 226, 243)"><div title="RGB (207, 226, 243)" style="background-color: rgb(207, 226, 243);"></div></td><td aria-label="RGB (217, 210, 233)"><div title="RGB (217, 210, 233)" style="background-color: rgb(217, 210, 233);"></div></td><td aria-label="RGB (234, 209, 220)"><div title="RGB (234, 209, 220)" style="background-color: rgb(234, 209, 220);"></div></td></tr><tr><td id="T-Kw-Jn88" aria-label="RGB (234, 153, 153)"><div title="RGB (234, 153, 153)" style="background-color: rgb(234, 153, 153);"></div></td><td aria-label="RGB (249, 203, 156)"><div title="RGB (249, 203, 156)" style="background-color: rgb(249, 203, 156);"></div></td><td aria-label="RGB (255, 229, 153)"><div title="RGB (255, 229, 153)" style="background-color: rgb(255, 229, 153);"></div></td><td aria-label="RGB (182, 215, 168)"><div title="RGB (182, 215, 168)" style="background-color: rgb(182, 215, 168);"></div></td><td aria-label="RGB (162, 196, 201)"><div title="RGB (162, 196, 201)" style="background-color: rgb(162, 196, 201);"></div></td><td aria-label="RGB (159, 197, 232)"><div title="RGB (159, 197, 232)" style="background-color: rgb(159, 197, 232);"></div></td><td aria-label="RGB (180, 167, 214)"><div title="RGB (180, 167, 214)" style="background-color: rgb(180, 167, 214);"></div></td><td aria-label="RGB (213, 166, 189)"><div title="RGB (213, 166, 189)" style="background-color: rgb(213, 166, 189);"></div></td></tr><tr><td aria-label="RGB (224, 102, 102)"><div title="RGB (224, 102, 102)" style="background-color: rgb(224, 102, 102);"></div></td><td aria-label="RGB (246, 178, 107)"><div title="RGB (246, 178, 107)" style="background-color: rgb(246, 178, 107);"></div></td><td aria-label="RGB (255, 217, 102)"><div title="RGB (255, 217, 102)" style="background-color: rgb(255, 217, 102);"></div></td><td aria-label="RGB (147, 196, 125)"><div title="RGB (147, 196, 125)" style="background-color: rgb(147, 196, 125);"></div></td><td aria-label="RGB (118, 165, 175)"><div title="RGB (118, 165, 175)" style="background-color: rgb(118, 165, 175);"></div></td><td aria-label="RGB (111, 168, 220)"><div title="RGB (111, 168, 220)" style="background-color: rgb(111, 168, 220);"></div></td><td aria-label="RGB (142, 124, 195)"><div title="RGB (142, 124, 195)" style="background-color: rgb(142, 124, 195);"></div></td><td aria-label="RGB (194, 123, 160)"><div title="RGB (194, 123, 160)" style="background-color: rgb(194, 123, 160);"></div></td></tr><tr><td id="T-Kw-Jn104" aria-label="RGB (204, 0, 0)"><div title="RGB (204, 0, 0)" style="background-color: rgb(204, 0, 0);"></div></td><td aria-label="RGB (230, 145, 56)"><div title="RGB (230, 145, 56)" style="background-color: rgb(230, 145, 56);"></div></td><td aria-label="RGB (241, 194, 50)"><div title="RGB (241, 194, 50)" style="background-color: rgb(241, 194, 50);"></div></td><td aria-label="RGB (106, 168, 79)"><div title="RGB (106, 168, 79)" style="background-color: rgb(106, 168, 79);"></div></td><td aria-label="RGB (69, 129, 142)"><div title="RGB (69, 129, 142)" style="background-color: rgb(69, 129, 142);"></div></td><td aria-label="RGB (61, 133, 198)"><div title="RGB (61, 133, 198)" style="background-color: rgb(61, 133, 198);"></div></td><td aria-label="RGB (103, 78, 167)"><div title="RGB (103, 78, 167)" style="background-color: rgb(103, 78, 167);"></div></td><td aria-label="RGB (166, 77, 121)"><div title="RGB (166, 77, 121)" style="background-color: rgb(166, 77, 121);"></div></td></tr><tr><td aria-label="RGB (153, 0, 0)"><div title="RGB (153, 0, 0)" style="background-color: rgb(153, 0, 0);"></div></td><td aria-label="RGB (180, 95, 6)"><div title="RGB (180, 95, 6)" style="background-color: rgb(180, 95, 6);"></div></td><td aria-label="RGB (191, 144, 0)"><div title="RGB (191, 144, 0)" style="background-color: rgb(191, 144, 0);"></div></td><td aria-label="RGB (56, 118, 29)"><div title="RGB (56, 118, 29)" style="background-color: rgb(56, 118, 29);"></div></td><td aria-label="RGB (19, 79, 92)"><div title="RGB (19, 79, 92)" style="background-color: rgb(19, 79, 92);"></div></td><td aria-label="RGB (11, 83, 148)"><div title="RGB (11, 83, 148)" style="background-color: rgb(11, 83, 148);"></div></td><td aria-label="RGB (53, 28, 117)"><div title="RGB (53, 28, 117)" style="background-color: rgb(53, 28, 117);"></div></td><td aria-label="RGB (116, 27, 71)"><div title="RGB (116, 27, 71)" style="background-color: rgb(116, 27, 71);"></div></td></tr><tr><td aria-label="RGB (102, 0, 0)"><div title="RGB (102, 0, 0)" style="background-color: rgb(102, 0, 0);"></div></td><td aria-label="RGB (120, 63, 4)"><div title="RGB (120, 63, 4)" style="background-color: rgb(120, 63, 4);"></div></td><td aria-label="RGB (127, 96, 0)"><div title="RGB (127, 96, 0)" style="background-color: rgb(127, 96, 0);"></div></td><td aria-label="RGB (39, 78, 19)"><div title="RGB (39, 78, 19)" style="background-color: rgb(39, 78, 19);"></div></td><td aria-label="RGB (12, 52, 61)"><div title="RGB (12, 52, 61)" style="background-color: rgb(12, 52, 61);"></div></td><td aria-label="RGB (7, 55, 99)"><div title="RGB (7, 55, 99)" style="background-color: rgb(7, 55, 99);"></div></td><td aria-label="RGB (32, 18, 77)"><div title="RGB (32, 18, 77)" style="background-color: rgb(32, 18, 77);"></div></td><td aria-label="RGB (76, 17, 48)"><div title="RGB (76, 17, 48)" style="background-color: rgb(76, 17, 48);"></div></td></tr></tbody></table></div></div>', this.touchMode = !1, this.events = ["change"] }, createInstance: function (e) { var i = this; this.textArea = this.host; var s = this.host.attr("contenteditable"); if (this.host.addClass(this.toThemeProperty("jqx-widget")), 1 == s || "true" == s) { this.inline = !0, this.widget = this.host, this.editorDocument = document, this.selection = new t(this.editorDocument); var r = $("<div class='jqx-editor-toolbar-container' unselectable='on' aria-label='Formatting options' role='toolbar'><div class='jqx-editor-toolbar'></div>"); r.insertBefore(this.host), this.toolbarContainer = r, this.toolbar = r.find(".jqx-editor-toolbar"), this.editor = this.host, this.contentEditableElement = this.element } else { var o = $("<div class='jqx-editor'><div class='jqx-editor-container'><div class='jqx-editor-toolbar-container' aria-label='Formatting options' role='toolbar'><div class='jqx-editor-toolbar'></div></div><div class='jqx-editor-content'><iframe  src='javascript:void(0)' allowtransparency='true' frameborder='0'></iframe></div></div></div>"); this.widget = o, this.widget[0].className = this.widget[0].className + " " + this.element.className; try { this.widget[0].style = this.element.style } catch (e) { } var a = $.trim(this.host.html()) + "&#8203;"; "default" == this.lineBreak || "div" == this.lineBreak ? a = "<div>" + a + "</div>" : "p" == this.lineBreak && (a = "<p>" + a + "</p>"), a = (a = a.replace(/&lt;/gi, "<")).replace(/&gt;/gi, ">"), this.host.css("display", "none"), this.host.after(o), o.find("iframe").after(this.host), this.container = o.find(".jqx-editor-container"), this.toolbarContainer = o.find(".jqx-editor-toolbar-container"), this.toolbar = o.find(".jqx-editor-toolbar"), this.iframe = o.find("iframe"), this.content = o.find(".jqx-editor-content"), this.editorDocument = this.iframe[0].contentWindow.document, this.selection = new t(this.editorDocument), $.jqx.browser.mozilla || (this.editorDocument.designMode = "On"), this.editorDocument.open(); var n = this.rtl ? "direction:rtl;" : "", l = $.jqx.browser.msie ? "::selection{color: #fff; background: #328EFD;};::-moz-selection{color: #fff; background: #328eD;};::selection:window-inactive {background: #c7c7c7; color: #000;}::-moz-selection:window-inactive {background: #c7c7c7; color: #000;}html{font-size:13px; height:100%;}body{padding-top:1px;margin-top:-1px; padding-right: 1px; overflow-x: hidden;word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;" : ""; if (this.editorDocument.write("<!DOCTYPE html><html><head><meta charset='utf-8' /><style>html,body{padding:0; margin:0; font-size: 13px; font-family:Verdana,Geneva,sans-serif; background:#fff; min-height:100%;}" + l + n + "}h1{font-size:2em;margin:.67em 0}h2{font-size: 1.5em; margin: .75em 0}h3{font-size: 1.17em; margin: .83em 0}h4{font-size:1em; margin: 1.12em 0 }h5{font-size: .83em; margin: 1.5em 0}h6{font-size: .75em; margin: 1.67em 0}p{margin: 0px;padding:0 .2em}ul,ol{padding-left:2.5em}a{color:#00a}code{font-size:1.23em}.jqx-editor-paste-element {position: absolute; left: -1000px; height: 1px; overflow: hidden; top: -1000px;}.jqx-editor-focus {border: 1px solid #aaa !important;}</style>" + $.map(this.stylesheets, function (e) { return "<link rel='stylesheet' href='" + e + "'>" }).join("") + "</head><body autocorrect='off' contenteditable='true'></body></html>"), this.contentEditableElement = this.editorDocument.body, this.host.is("textarea")) { this._textArea = this.element; var h = this.host.data(); h.jqxEditor.host = o, h.jqxEditor.element = o[0], this.element = o[0], o[0].id = this._textArea.id, this._textArea.id = this._textArea.id + "TextArea", $(this.element).addClass(this.toThemeProperty("jqx-widget")), this.host = $(this.element), this.host.data(h) } try { this.editorDocument.execCommand("useCSS", !1, !1), this.editorDocument.execCommand("enableInlineTableEditing", null, !1) } catch (e) { } try { this.editorDocument.execCommand("styleWithCSS", 0, !0) } catch (e) { } this.editorDocument.close(), this.editor = $(this.editorDocument.body), this.editor.html(a).attr("spellcheck", !1).attr("autocorrect", "off"), $.jqx.utilities.resize(o, function () { i.widget.css("width", i.width), i.widget.css("height", i.height), i._arrange() }) } }, focus: function () { $.jqx.browser.mozilla && (this.focused || (this.iframe && this.iframe.focus(), this.selection.selectNode(this.editor[0].firstChild, !0), this.selection.getRange().collapse(!0))), this.editor.focus(); var e = null != this.range ? this.range : this.getRange(); this.selectRange(e) }, print: function () { var e = window.open("", "_blank", "width=450,height=470,left=400,top=100,menubar=yes,toolbar=no,location=no,scrollbars=yes"); e.document.open(), e.document.write('<!doctype html><html><head><title>Print</title></head><body onload="print();">' + this.val() + "</body></html>"), e.document.close() }, refresh: function (e) { var t = this; $.each(this.defaultLocalization, function (e, i) { t.localization[e] || (t.localization[e] = i) }), this._removeHandlers(), this.toolbar.addClass(this.toThemeProperty("jqx-widget-header")), this.content ? (this.widget.css("width", this.width), this.widget.css("height", this.height), this.widget.addClass(this.toThemeProperty("jqx-editor")), this.widget.addClass(this.toThemeProperty("jqx-widget")), this.widget.addClass(this.toThemeProperty("jqx-rc-all")), this.widget.addClass(this.toThemeProperty("jqx-widget-header")), this.content.addClass(this.toThemeProperty("jqx-widget-content")), this.container.addClass(this.toThemeProperty("jqx-editor-container"))) : (this.toolbarContainer.addClass(this.toThemeProperty("jqx-widget-header")), this.toolbarContainer.addClass(this.toThemeProperty("jqx-editor-toolbar-inline")), this.toolbarContainer.addClass(this.toThemeProperty("jqx-widget")), this.toolbarContainer.addClass(this.toThemeProperty("jqx-rc-all")), this.toolbarContainer.hide(), this.toolbarContainer.css("position", "absolute"), this.editor.addClass(this.toThemeProperty("jqx-editor-inline")), this.toolbarContainer.css("width", this.host.outerWidth() + "px")); var i = this.toolbarContainer.index(); if ("top" == this.toolbarPosition && 0 != i || "bottom" == this.toolbarPosition && 1 != i) switch (this.toolbarPosition) { case "bottom": this.toolbarContainer.insertAfter(this.content); break; case "top": default: this.toolbarContainer.insertBefore(this.content) } var s = this.tools; if (!1 !== s) { var r = s.split(" "), o = s.split(" | "), a = function (e, i) { $.each(i, function (s, r) { var o = t.commands[this]; if (o) { if (t.createCommand) { var a = t.createCommand(this.toString()); o = $.extend(o, a) } } else { if (!t.createCommand) return !0; if (!(o = t.createCommand(this.toString()))) return !0; t.commands[this] || (t.commands[this] = o) } switch (t.localization[this] && (o.tooltip = t.localization[this]), o.type) { case "list": o.widget && o.widget.jqxDropDownList("destroy"); var n = "formatblock" == o.command || "fontname" == o.command || "fontsize" == o.command, l = o.value || [], h = new Array, d = o.placeHolder || "Airline Filteration"; "fontname" == o.command ? $.each(l, function () { var e = t.localization[this.label]; h.push({ label: e, value: this.value }) }) : "formatblock" == o.command ? (d = t.localization.format, $.each(l, function () { if (this.label.indexOf("Header") >= 0) e = this.label.replace("Header", t.localization.Header); else var e = t.localization[this.label]; h.push({ label: e, value: this.value }) })) : h = l; var c = { enableBrowserBoundsDetection: !0, touchMode: t.touchMode, width: o.width || 100, height: o.height || 25, dropDownWidth: o.dropDownWidth || "auto", autoDropDownHeight: (o.value && o.value.length) < 12, placeHolder: d, source: h, theme: t.theme, keyboardSelection: !1, focusable: !1, disabled: t.disabled, rtl: t.rtl, selectionRenderer: "fontsize" == o.command ? function () { return "<div unselectable='on' style='margin-top: 0px; padding:0px;' class='" + (t.toThemeProperty("jqx-editor-toolbar-icon") + " " + t.toThemeProperty("jqx-editor-toolbar-icon-" + o.command)) + "'></div>" } : null, renderer: n ? function (e, t, i) { return "formatblock" == o.command ? "<" + i + ' unselectable="on" style="padding: 0px; margin: 0px;">' + t + "</" + i + ">" : "fontname" == o.command ? '<span unselectable="on" style="font-family: ' + i + ';">' + t + "<span>" : "fontsize" == o.command ? '<span unselectable="on" style="font-size: ' + i + ';">' + t + "<span>" : void 0 } : null }, u = "jqx-disableselect " + t.toThemeProperty("jqx-editor-dropdownlist") + " " + t.toThemeProperty("jqx-editor-toolbar-item"); (j = $("<div unselectable='on' class='" + u + "'></div>")).appendTo(e), j.jqxDropDownList(c), o.init && o.init(j); var r = null, p = null, m = ""; t.addHandler(j, "mousedown", function (e) { if ($(".jqx-editor-dropdownpicker").length > 0 && $(".jqx-editor-dropdownpicker").jqxDropDownButton("close"), $(".jqx-editor-dropdownlist").length > 0) { var t = $(".jqx-editor-dropdownlist"); $.each(t, function (e, t) { t != j[0] && $(t).jqxDropDownList("close") }) } }), t.addHandler(j, "open", function (e) { t.focused || t.focus(), t.updating = !0, t.activeElement = j, r = j.val(), m = "" }), t.addHandler(j, "change", function (e) { t.updating = !1, t.activeElement = null, p = j.val(), m = e.args.type, $.jqx.browser.msie && $.jqx.browser.version < 9 && t.focus() }), t.addHandler(j, "close", function (e) { t.updating = !1, t.activeElement = null, r != p && ("mouse" != m && "keyboard" != m || t._refreshTools()) }), t._addCommandHandler(j, "change", o.command, null, o); break; case "colorPicker": o.widget && ($(o.colorPicker).remove(), o.widget.jqxDropDownButton("destroy")); var g = $('<div unselectable="on" style="padding-top: 4px;"></div>').attr("id", "picker-" + o.command), u = "jqx-disableselect " + t.toThemeProperty("jqx-editor-dropdownpicker") + " " + t.toThemeProperty("jqx-editor-toolbar-item"); (j = $("<div unselectable='on' class='" + u + "'></div>")).appendTo(e), j.append(g), j.jqxDropDownButton({ touchMode: t.touchMode, disabled: t.disabled, enableBrowserBoundsDetection: !0, width: o.width || 45, height: o.height || 25, rtl: t.rtl, focusable: !1, theme: t.theme }); var f = $('<div unselectable="on" style="z-index: 55;">'), v = t.toThemeProperty("jqx-editor-toolbar-icon") + " " + t.toThemeProperty("jqx-editor-toolbar-icon-" + o.command), x = $("<div unselectable='on' class='" + v + "'></div>"); f.append(x); var w = $('<div unselectable="on" class="jqx-editor-color-bar">').attr("id", "bar-" + o.command).css("background-color", o.value); f.append(w), j.jqxDropDownButton("setContent", f), g.append($(t.colorPickerTemplate)), o.colorPicker = g, o.init && o.init(j), g.find("tr").attr("role", "row").attr("unselectable", "on"), g.find("td").attr("role", "gridcell").attr("unselectable", "on").css("-webkit-user-select", "none"), g.find("div").attr("unselectable", "on"), t.addHandler(j, "mousedown", function (e) { if ($(".jqx-editor-dropdownlist").length > 0 && $(".jqx-editor-dropdownlist").jqxDropDownList("close"), $(".jqx-editor-dropdownpicker").length > 0) { var t = $(".jqx-editor-dropdownpicker"); $.each(t, function (e, t) { t != j[0] && $(t).jqxDropDownButton("close") }) } }), t.addHandler(j, "open", function () { t.focused || t.focus(), t.updating = !0, t.activeElement = g }), t.addHandler(j, "close", function (e) { t.updating = !1, t.activeElement = null, r != p && ("mouse" != m && "keyboard" != m || t._refreshTools()) }), t.addHandler(g, "keydown", function (e) { var t = e.keyCode, i = $(g).find(".jqx-editor-color-picker-selected-cell"), s = g.find("tr"), r = s.length, a = i.parent().children().length, n = i.index(), l = -999, h = i.parent(); switch ($.each(s, function (e, t) { if (this == h[0]) return l = e, !1 }), t) { case 27: j.jqxDropDownButton("close"); break; case 13: $(i).trigger("mousedown"); break; case 38: l--; break; case 40: l++; break; case 39: n++; break; case 37: n-- } if (l >= 0 && l <= r && n >= 0 && n <= a) { var h = g.find("tr")[l], d = $(h).children()[n], c = $(d).children().css("background-color"); o.val(c) } }); var b = $(g).find("td"); o.val = function (e) { var i = t._rgbToHex(e); $.each(b, function () { var e = $(this).children().css("background-color"); if (t._rgbToHex(e) == i) return b.removeClass("jqx-editor-color-picker-selected-cell"), $(this).addClass("jqx-editor-color-picker-selected-cell"), $("#bar-" + o.command).css("background", e), !1 }) }, o.val(o.value), t._addCommandHandler(b, "mousedown", o.command, null, o); break; case "button": case "toggleButton": default: o.widget && ("button" == o.type ? o.widget.jqxButton("destroy") : o.widget.jqxToggleButton("destroy")); var _ = o.command, y = o.action, v = t.toThemeProperty("jqx-editor-toolbar-icon") + " " + t.toThemeProperty("jqx-editor-toolbar-icon-" + _), x = $("<div unselectable='on' class='" + v + "'></div>"), j = $("<div unselectable='on'></div>").addClass("jqx-disableselect").addClass(t.toThemeProperty("jqx-editor-toolbar-button")); o.init ? _ && j.append(x) : j.append(x), j.appendTo(e), "button" == o.type ? j.jqxButton({ disabled: t.disabled, rtl: t.rtl, theme: t.theme }) : "toggleButton" == o.type && j.jqxToggleButton({ disabled: t.disabled, rtl: t.rtl, uiToggle: !1, theme: t.theme }), o.init && o.init(j), o.toggled = !1, o.toggle = function () { o.toggled = !o.toggled }, t.addHandler(j, "mousedown", function (e) { return e.preventDefault && e.preventDefault(), e.stopPropagation && e.stopPropagation(), !1 }), $.jqx.mobile.isTouchDevice() ? t._addCommandHandler(j, "mousedown", _, y, o) : t._addCommandHandler(j, "click", _, y, o) } if (o.widget = j, j) { try { "" != o.tooltip && (o.widget.attr("title", o.tooltip), o.widget.attr("data-tooltip", o.tooltip)), o.command && o.widget.attr("data-command", o.command), o.widget.attr("aria-label", o.tooltip) } catch (e) { } "button" != o.type && "toggleButton" != o.type || (i.length > 2 && (0 == s ? (j.css("border-right-radius", "0px"), j.addClass(t.toThemeProperty("jqx-rc-l"))) : s == i.length - 1 && (j.css("border-left-radius", "0px"), j.addClass(t.toThemeProperty("jqx-rc-r"))), j.removeClass(t.toThemeProperty("jqx-rc-all"))), 0 != s && s != i.length - 1 && i.length > 2 ? (j.css("border-left-radius", "0px"), j.css("border-right-radius", "0px"), j.removeClass(t.toThemeProperty("jqx-rc-all"))) : 2 == i.length ? (0 == s ? (j.css("border-right-radius", "0px"), j.addClass(t.toThemeProperty("jqx-rc-l"))) : (j.css("border-left-radius", "0px"), j.addClass(t.toThemeProperty("jqx-rc-r"))), j.removeClass(t.toThemeProperty("jqx-rc-all"))) : 1 == i.length && j.css("margin-right", "0px")) } }) }; if (t.toolbar.css("direction", this.rtl ? "rtl" : "ltr"), 0 == o.length) a(t.toolbar, r); else { for (c = 0; c < o.length; c++) { var r = o[c].split(" "), n = t.toThemeProperty("jqx-editor-toolbar-group") + " " + t.toThemeProperty("jqx-fill-state-normal"), l = $("<div class='" + n + "'></div>"); l.addClass(t.toThemeProperty("jqx-rc-all")), t.toolbar.append(l), a(l, r) } for (var h = t.toolbar.find(".jqx-editor-toolbar-group"), d = h.length, c = 0; c < d; c++) 0 == $(h[c]).children().length && $(h[c]).remove() } $.jqx.browser.msie && $.jqx.browser.version < 8 && ($(".jqx-editor-toolbar-group").css("float", "left"), $(".jqx-editor-toolbar-group").children().css("float", "left"), $(".jqx-editor-toolbar-group").css("zoom", "1"), $(".jqx-editor-toolbar-group").children().css("zoom", "1")) } this._arrange(), this._addHandlers() }, _arrange: function () { this.content && ("" == this.tools || 0 == this.tools ? (this.content.height(this.container.outerHeight() - parseInt(this.container.css("padding-top")) - parseInt(this.container.css("padding-bottom")) - 6), this.content.css("margin-top", "4px"), this.toolbar.hide()) : (this.toolbar.show(), this.content.css("margin-top", "0px"), this.content.height(this.container.outerHeight() - this.toolbar.outerHeight() - parseInt(this.container.css("padding-top")) - parseInt(this.container.css("padding-bottom")) - 2), "top" != this.toolbarPosition && (this.content.css("margin-top", "4px"), this.content.css("margin-bottom", "0px"))), $.jqx.browser.msie && $.jqx.browser.version < 8 && (this.content.css("margin-top", "4px"), this.content.height(this.container.height() - this.toolbar.outerHeight() - 2 * parseInt(this.container.css("padding-bottom")) - 10), this.content.width(this.container.width() - 2 * parseInt(this.container.css("padding-left")) - 2)), this.editor.height() < this.content.height() && this.editor.height(this.content.height())) }, propertyChangedHandler: function (e, t, i, s) { void 0 != this.isInitialized && 0 != this.isInitialized && "pasteMode" != t && "lineBreak" != t && "editable" != t && ("disabled" == t && e._refreshTools(), "width" != t && "height" != t && "toolbarPosition" != t ? e.refresh() : e._arrange()) }, selectRange: function (e) { e || (e = this.getRange()), this.selection.selectRange(e) }, getRange: function () { return this.selection.getRange() }, getSelectedElement: function () { var e, t, i, s; try { if (this.editorDocument.getSelection) { var r = this.editorDocument.getSelection(); return e = r.getRangeAt(r.rangeCount - 1), i = e.startContainer, s = e.endContainer, t = e.commonAncestorContainer, "#text" == i.nodeName && (t = t.parentNode), "#text" == i.nodeName && (i = i.parentNode), "body" == i.nodeName.toLowerCase() && (i = i.firstChild), "#text" == s.nodeName && (s = s.parentNode), "body" == s.nodeName.toLowerCase() && (s = s.lastChild), i == s && (t = i), s } if (this.editorDocument.selection) { if (!(e = this.editorDocument.selection.createRange()).duplicate) return null; t = e.parentElement(); var o = e.duplicate(), a = e.duplicate(); return o.collapse(!0), a.moveToElementText(o.parentElement()), a.setEndPoint("EndToStart", o), i = o.parentElement(), o = e.duplicate(), (a = e.duplicate()).collapse(!1), o.moveToElementText(a.parentElement()), o.setEndPoint("StartToEnd", a), s = a.parentElement(), "body" == i.nodeName.toLowerCase() && (i = i.firstChild), "body" == s.nodeName.toLowerCase() && (s = s.lastChild), i == s && (t = i), s } } catch (e) { return null } return null }, _addHandlers: function () { var e = this; this.addHandler(this.toolbar, "mousedown.editor" + this.element.id, function (e) { return e.preventDefault && e.preventDefault(), e.stopPropagation && e.stopPropagation(), !1 }); var t = function () { e.host.is("textarea") && e.host.html($(this).html()), e.changed && (e._raiseEvent("change"), e.changed = !1), e.focused = !1, e.inline && (e.host.removeClass(e.toThemeProperty("jqx-fill-state-focus")), e.host.removeClass(e.toThemeProperty("jqx-editor-inline-focus")), e.toolbarContainer.fadeOut("fast")) }, i = function () { if (e.focused = !0, e.inline) { e.host.addClass(e.toThemeProperty("jqx-fill-state-focus")), e.host.addClass(e.toThemeProperty("jqx-editor-inline-focus")), e.host.addClass(e.toThemeProperty("jqx-rc-all")), e.toolbarContainer.fadeIn("fast"); var t = e.host.coord(); e.toolbarContainer.offset({ left: t.left, top: t.top - e.toolbarContainer.outerHeight() - 5 }) } }; $.jqx.browser.mozilla && this.addHandler($(document), "mousedown.editor" + this.element.id, function (e) { t() }), this.addHandler(this.editor, "blur.editor" + this.element.id, function (e) { t() }), this.addHandler(this.editor, "focus.editor" + this.element.id, function (e) { i() }), this.addHandler(this.editor, "beforedeactivate.editor" + this.element.id, function (t) { e.range = e.getRange() }), this.addHandler(this.editor, "mousedown.editor" + this.element.id, function (t) { e.range = e.getRange(), $.jqx.browser.mozilla && (i(), t.stopPropagation()), $(".jqx-editor-dropdownpicker").length > 0 && $(".jqx-editor-dropdownpicker").jqxDropDownButton("close"), $(".jqx-editor-dropdownlist").length > 0 && $(".jqx-editor-dropdownlist").jqxDropDownList("close"), e.inline && e.editor.focus() }), $.jqx.mobile.isTouchDevice() && (this.addHandler($(this.editorDocument), "selectionchange.editor" + this.element.id, function () { e.editorDocument.activeElement != e.editor[0] && (window.focus(), e.focus()) }), this.addHandler($(this.editorDocument), "keydown.editor" + this.element.id, function () { e.editorDocument.activeElement != e.editor[0] && (window.focus(), e.focus()) })), this.addHandler(this.editor, "mouseup.editor" + this.element.id, function (t) { if ("source" == e._documentMode) return !0; e.range = e.getRange(), e._refreshTools(null, !0) }), this.addHandler(this.editor, "keydown.editor" + this.element.id, function (t) { if ("source" == e._documentMode) return !0; if ($.jqx.browser.mozilla && (e.focused || i()), e.disabled) return t.preventDefault && t.preventDefault(), !1; if (e.updating) { if (e.activeElement) { var s = jQuery.Event("keydown"); $.extend(s, t), e.activeElement.trigger(s) } return t.preventDefault && t.preventDefault(), !1 } var r = t || window.event, o = r.keyCode, a = String.fromCharCode(o).toLowerCase(); if (!e.editable) { n = [8, 9, 33, 34, 35, 36, 37, 38, 39, 40, 40, 45, 46]; -1 != $.inArray(r.keyCode, n) || r.ctrlKey && "c" == a || r.ctrlKey && "a" == a || t.preventDefault() } if (e.selection.getText().length > 0 || e.linkPopup) { var n = [8, 9, 13, 33, 34, 35, 36, 37, 38, 39, 40, 40, 45, 46]; (-1 != !$.inArray(r.keyCode, n) || 65 == r.keyCode && r.ctrlKey && !r.altKey && !r.shiftKey) && (e._refreshToolsTimer && clearTimeout(e._refreshToolsTimer), e._refreshToolsTimer = setTimeout(function () { e._refreshTools(null, !0, r.keyCode) }, 10)) } if (13 == o && "default" != e.lineBreak) { var l = e.getSelectedElement(); if (l) { switch (l.nodeName.toLowerCase()) { case "pre": case "li": case "ul": case "ol": case "h1": case "h2": case "h3": case "h4": case "h5": case "h6": return !0 } for (var h = l; null != h;) { if ("#document" == h.nodeName) { h = e.editorDocument.body; break } if (h.parentNode == e.editorDocument.body || h == e.editorDocument.body) break; h = h.parentNode } } if (h) { var d = e.getRange(); "<div></div>" == e.editorDocument.body.innerHTML && "br" != e.lineBreak && e.selection.insertContent("&#8203;"), "div" == e.lineBreak ? h == e.editorDocument.body ? $(h).append("<div>&#8203;</div><span id='INSERTION_MARKER'>&nbsp;</span>") : $("<div>&#8203;</div><span id='INSERTION_MARKER'>&nbsp;</span>").insertAfter(h) : "p" == e.lineBreak ? h == e.editorDocument.body ? $(h).append("<p>&#8203;</p><span id='INSERTION_MARKER'>&nbsp;</span>") : $("<p>&#8203;</p><span id='INSERTION_MARKER'>&nbsp;</span>").insertAfter(h) : e.execute("insertHTML", "<br/>&#8203;<span id='INSERTION_MARKER'>&nbsp;</span>"), e.selectRange(d); var c = $(e.editorDocument).find("#INSERTION_MARKER"); return "br" != e.lineBreak ? e.selection.selectNode($(c).prev()[0], !0) : (e.selection.selectNode(c[0], !0), e.getRange().setStartAfter && e.getRange().setStartAfter(c[0])), c.remove(), e.selection.collapse(!1), h && h.nodeName && "br" == e.lineBreak && "#text" != h.nodeName.toLowerCase() && (e.selection.selectNode(h, !0), e.getRange().setStartAfter && e.getRange().setStartAfter(h), e.selection.collapse(!1)), "br" != e.lineBreak && (d = e.getRange()).select && d.select(), t.preventDefault && t.preventDefault(), !1 } } if (r.ctrlKey && ("k" == a || "u" == a || "b" == a || "i" == a)) { t.preventDefault && t.preventDefault(); var u = null; switch (a) { case "k": u = "link"; break; case "u": u = "underline"; break; case "b": u = "bold"; break; case "i": u = "italic" } return e.commands[u].widget && e.commands[u].widget.trigger("click"), !1 } }), this.addHandler(this.editor, "paste.editor" + this.element.id, function (t) { if ("source" == e._documentMode) return !0; if (e.readOnly) return !0; e.updating = !0, e.readOnly = !0; var i = function (t, i) { return i ? t = e.paragraphise ? (t = (t = "<p>" + t + "</p>").replace(/\n/g, "</p><p>")).replace(/<p>\s<\/p>/gi, "") : t.replace(/\n/g, "<br />") : ((t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = t.replace(/<html[^>]*?>(.*)/gim, "$1")).replace(/<\/html>/gi, "")).replace(/<body[^>]*?>(.*)/gi, "$1")).replace(/<\/body>/gi, "")).replace(/<style[^>]*?>[\s\S]*?<\/style[^>]*>/gi, "")).replace(/<(?:meta|link)[^>]*>\s*/gi, "")).replace(/<\\?\?xml[^>]*>/gi, "")).replace(/<w:[^>]*>[\s\S]*?<\/w:[^>]*>/gi, "")).replace(/<o:p>\s*<\/o:p>/g, "")).replace(/<o:p>[\s\S]*?<\/o:p>/g, "&nbsp;")).replace(/<\/?\w+:[^>]*>/gi, "")).replace(/<\!--[\s\S]*?-->/g, "")).replace(/<\!\[[\s\S]*?\]>/g, "")).replace(/\s*mso-[^:]+:[^;"']+;?/gi, "")).replace(/<(\w[^>]*) style='([^\']*)'([^>]*)/gim, "<$1$3")).replace(/<(\w[^>]*) style="([^\"]*)"([^>]*)/gim, "<$1$3")).replace(/\s*margin: 0cm 0cm 0pt\s*;/gi, "")).replace(/\s*margin: 0cm 0cm 0pt\s*"/gi, '"')).replace(/\s*text-indent: 0cm\s*;/gi, "")).replace(/\s*text-indent: 0cm\s*"/gi, '"')).replace(/\s*text-align: [^\s;]+;?"/gi, '"')).replace(/\s*page-break-before: [^\s;]+;?"/gi, '"')).replace(/\s*font-variant: [^\s;]+;?"/gi, '"')).replace(/\s*tab-stops:[^;"']*;?/gi, "")).replace(/\s*tab-stops:[^"']*/gi, "")).replace(/\s*face="[^"']*"/gi, "")).replace(/\s*face=[^ >]*/gi, "")).replace(/\s*font-family:[^;"']*;?/gi, "")).replace(/\s*font-size:[^;"']*;?/gi, "")).replace(/<(\w[^>]*) class=([^ |>]*)([^>]*)/gi, "<$1$3")).replace(/<(\w+)[^>]*\sstyle="[^"']*display\s?:\s?none[\s \S]*?<\/\1>/gi, "")).replace(/\s*style='\s*'/gi, "")).replace(/\s*style="\s*"/gi, "")).replace(/<span\s*[^>]*>\s*&nbsp;\s*<\/span>/gi, "&nbsp;")).replace(/<span\s*[^>]*><\/span>/gi, "")).replace(/<(\w[^>]*) align=([^ |>]*)([^>]*)/gi, "<$1$3")).replace(/<(\w[^>]*) lang=([^ |>]*)([^>]*)/gi, "<$1$3")).replace(/<span([^>]*)>([\s\S]*?)<\/span>/gi, "$2")).replace(/<font\s*>([\s\S]*?)<\/font>/gi, "$1")).replace(/<(u|i|strike)>&nbsp;<\/\1>/gi, "&nbsp;")).replace(/<h\d>\s*<\/h\d>/gi, "")).replace(/<(\w[^>]*) language=([^ |>]*)([^>]*)/gi, "<$1$3")).replace(/<(\w[^>]*) onmouseover="([^\"']*)"([^>]*)/gi, "<$1$3")).replace(/<(\w[^>]*) onmouseout="([^\"']*)"([^>]*)/gi, "<$1$3")).replace(/<h(\d)([^>]*)>/gi, "<h$1>")).replace(/<(h\d)><font[^>]*>([\s\S]*?)<\/font><\/\1>/gi, "<$1>$2</$1>")).replace(/<(h\d)><em>([\s\S]*?)<\/em><\/\1>/gi, "<$1>$2</$1>")).replace(/<b\b[^>]*>(.*?)<\/b[^>]*>/gi, "<strong>$1</strong>")).replace(/<i\b[^>]*>(.*?)<\/i[^>]*>/gi, "<em>$1</em>")).replace(/<\s+[^>]*>/gi, "")).replace(/<span>([\s\S]*?)<\/span>/gi, "$1")).replace(/<span>([\s\S]*?)<\/span>/gi, "$1")).replace(/<div>([\s\S]*?)<\/div>/gi, "$1")).replace(/<div>([\s\S]*?)<\/div>/gi, "$1")).replace(/<([^\s>]+)(\s[^>]*)?>\s*<\/\1>/g, "")).replace(/<([^\s>]+)(\s[^>]*)?>\s*<\/\1>/g, "")).replace(/<([^\s>]+)(\s[^>]*)?>\s*<\/\1>/g, "")).trim && (t = t.trim()), e.paragraphise ? "<p" !== t.substr(0, 2) && (t = (t = (t = "<p>" + t + "</p>").replace(/\n/g, "</p><p>")).replace(/<br[^>]*>/gi, "</p><p>")) : (t.replace(/<p>/gi, "<br />"), t.replace(/<\/p>/gi, "")), t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = t.replace(/<br>/gi, "<br />")).replace(/<br[^>]*><\/p>/gim, "</p>")).replace(/<p>&nbsp;<\/p>/gi, "")).replace(/<p>\s<\/p>/gi, "")).replace(/<([^\s>]+)(\s[^>]*)?>\s*<\/\1>/g, "")).replace(/MsoNormal/gi, "")).replace(/<\/?meta[^>]*>/gi, "")).replace(/<\/?xml[^>]*>/gi, "")).replace(/<\?xml[^>]*\/>/gi, "")).replace(/<!--(.*)-->/gi, "")).replace(/<!--(.*)>/gi, "")).replace(/<!(.*)-->/gi, "")).replace(/<w:[^>]*>(.*)<\/w:[^>]*>/gi, "")).replace(/<w:[^>]*\/>/gi, "")).replace(/<\/?w:[^>]*>/gi, "")).replace(/<m:[^>]*\/>/gi, "")).replace(/<m:[^>]>(.*)<\/m:[^>]*>/gi, "")).replace(/<o:[^>]*>(.*)<\/o:[^>]*>/gi, "")).replace(/<o:[^>]*\/>/gi, "")).replace(/<\/?m:[^>]*>/gi, "")).replace(/style=\"([^>]*)\"/gi, "")).replace(/style=\'([^>]*)\'/gi, "")).replace(/class=\"(.*)\"/gi, "")).replace(/class=\'(.*)\'/gi, "")).replace(/<b>/gi, "<strong>")).replace(/<\/b>/gi, "</strong>")).replace(/<p[^>]*>/gi, "<p>")).replace(/<\/p[^>]*>/gi, "</p>")).replace(/<span[^>]*>/gi, "")).replace(/<\/span[^>]*>/gi, "")).replace(/<st1:[^>]*>/gi, "")).replace(/<\/st1:[^>]*>/gi, "")).replace(/<font[^>]*>/gi, "")).replace(/<\/font[^>]*>/gi, "")).replace("  ", "")).replace(/<strong><\/strong>/gi, "")).replace(/<p><\/p>/gi, "")).replace(/\/\*(.*)\*\//gi, "")).replace(/<!--/gi, "")).replace(/-->/gi, "")).replace(/<style[^>]*>[^<]*<\/style[^>]*>/gi, "")).trim()), t }, s = e.getRange(); "text" == e.pasteMode ? e.selection.insertContent('<textarea cols="50" contenteditable="false" class="jqx-editor-paste-element"></textarea>') : e.selection.insertContent('<div class="jqx-editor-paste-element">&nbsp;</div>'); var r = $(e.editorDocument).find(".jqx-editor-paste-element"); if (e.editor[0].createTextRange) { t.preventDefault(); var o = e.editor[0].createTextRange(); o.moveToElementText(r[0]), o.execCommand("Paste") } else { var a = e.editorDocument.createRange(); a.selectNodeContents(r[0]), e.selectRange(a) } "text" == e.pasteMode && r.select(), e.marker = r, setTimeout(function () { e.selectRange(s); var t = function (t) { var i = e.editorDocument.createElement("div"), s = e.editorDocument.createDocumentFragment(); for (i.innerHTML = t; i.firstChild;) s.appendChild(i.firstChild); return s }; if ("text" != e.pasteMode) { var r = t(e.marker.html()); if (r.firstChild && "jqx-editor-paste-element" === r.firstChild.className) { for (var o = [], a = 0, n = r.childNodes.length; a < n; a++) o.push(r.childNodes[a].innerHTML); r = t(o.join("<br />")) } var l = document.createElement("div"); l.appendChild(r.cloneNode(!0)); h = l.innerHTML } else { h = e.marker.val(); if ("" != e.marker.html() && -1 == e.marker.val().indexOf("\n")) { h = (h = (h = (h = e.marker.html()).replace(/&nbsp;/gm, "")).replace(/\n\n/gm, "\n")).replace(/<br[^>]*>/gi, "\n"), e.marker.html(h); var h = e.marker.text() } } var d = i(h, "text" == e.pasteMode); e.getRange(); e.selection.insertContent(d + "<span id='INSERTION_MARKER'>&nbsp;</span>"), e.marker.remove(); var c = $(e.editorDocument).find("#INSERTION_MARKER"); e.selection.selectNode(c[0], !0), e.getRange().setStartAfter && e.getRange().setStartAfter(c[0]), c.remove(), e.selection.collapse(!1), c.removeAttr("id"), e._refreshTools() }, 100), e.updating = !1, e.readOnly = !1 }), this.addHandler(this.editor, "keyup.editor" + this.element.id, function (t) { if ("source" == e._documentMode) return !0; if (e.updating || e.disabled || !e.editable) return t.preventDefault && t.preventDefault(), t.stopPropagation && t.stopPropagation(), !1; e.range = e.getRange(), e.changed = !0; var i = t || window.event, s = (i.keyCode, [8, 9, 13, 33, 34, 35, 36, 37, 38, 39, 40, 40, 45, 46]); (-1 != $.inArray(i.keyCode, s) || 65 == i.keyCode && i.ctrlKey && !i.altKey && !i.shiftKey) && e._refreshTools(null, !0, i.keyCode) }), this.addHandler(this.editor, "click.editor" + this.element.id, function (t) { if ("source" == e._documentMode) return !0; if (e.editImage && ($(e.editImage).removeClass("jqx-editor-focus"), e.editImage = null), "img" == t.target.tagName.toLowerCase()) { var i = t.target; e.editImage = i, $(e.editImage).addClass("jqx-editor-focus") } }), this.addHandler(this.editor, "dblclick.editor" + this.element.id, function (t) { if ("source" == e._documentMode) return !0; if ("img" == t.target.tagName.toLowerCase()) { var i = t.target; $(".jqx-editor-image-window").length > 0 && (e.editImage = i, e._updateImageWindow()) } }) }, _updateLinkWindow: function () { var e = this, t = $(".jqx-editor-link-window"); t.jqxWindow({ position: { center: e.widget } }), t.jqxWindow("open"); var i = t.find("input"), s = t.find(".jqx-editor-link-checkbox"), r = t.find("button:first"), o = $(t.find("button")[1]); if (e.editLink && e.editLink.href) i[0].value = e.editLink.href || "", i[1].value = $(e.editLink).text() || e.editLink.href, s.val("_blank" == $(e.editLink).attr("target")), o.show(); else { if (i[0].value = "", i[1].value = "", !e.selection.isCollapsed()) { var a = e.selection.getText(); a.match(/^(?!:\/\/)([a-zA-Z0-9]+\.)?[a-zA-Z0-9][a-zA-Z0-9-]+\.[a-zA-Z]{2,6}?$/i) ? i[0].value = a : i[1].value = a } s.val(!1), o.hide() } i[0].value.length > 0 ? r.jqxButton({ disabled: !1 }) : r.jqxButton({ disabled: !0 }) }, _updateImageWindow: function () { var e = this, t = this.editImage; t || (t = $("<img>")[0]); var i = $(".jqx-editor-image-window"); i.jqxWindow({ position: { center: e.widget } }), i.jqxWindow("open"); var s = i.find("input"), r = $(i.find("button")[1]); e.editImage ? r.show() : r.hide(), s[0].value = t.src, "" == s[0].value && (s[0].value = ""), s[1].value = t.alt, "auto" != t.style.width ? s[2].value = t.style.width : s[2].value = "", "auto" != t.style.height ? s[3].value = t.style.height : s[3].value = "", t.style.marginLeft && "0px" != t.style.marginLeft ? s[4].value = t.style.marginLeft : s[4].value = "", t.style.marginTop && "0px" != t.style.marginTop ? s[5].value = t.style.marginTop : s[5].value = ""; var o = i.find(".jqx-editor-align"), a = $(t).css("float"); "left" == a ? o.jqxDropDownList({ selectedIndex: 1 }) : "right" == a ? o.jqxDropDownList({ selectedIndex: 2 }) : o.jqxDropDownList({ selectedIndex: 0 }) }, _removeHandlers: function () { this.editor && (this.removeHandler(this.editor, "blur.editor" + this.element.id), this.removeHandler(this.editor, "focus.editor" + this.element.id), this.removeHandler(this.editor, "click.editor" + this.element.id), this.removeHandler(this.editor, "mousedown.editor" + this.element.id), this.removeHandler(this.editor, "mouseup.editor" + this.element.id), this.removeHandler(this.editor, "keyup.editor" + this.element.id), this.removeHandler(this.editor, "keydown.editor" + this.element.id), this.removeHandler(this.editor, "beforedeactivate.editor" + this.element.id), this.removeHandler(this.editor, "dblclick.editor" + this.element.id)), this.toolbar && this.removeHandler(this.toolbar, "mousedown.editor" + this.element.id) }, getParentByTag: function (e, t) { var t = t.toLowerCase(), i = e; do { if ("" == t || i.nodeName.toLowerCase() == t) return i } while (i = i.parentNode); return e }, isStyleProperty: function (e, t, i, s) { var t = t.toLowerCase(), r = e; do { if (r.nodeName.toLowerCase() == t && r.style[i] == s) return !0 } while (r = r.parentNode); return !1 }, setStyleProperty: function (e, t) { this.style[t] = !1; var i = this.getParentByTag(e, t); i && i.tagName.toLowerCase() == t && (this.style[t] = !0), "del" == t && this.getParentByTag(e, "strike") && "strike" == this.getParentByTag(e, "strike").tagName.toLowerCase() && (this.style.del = !0) }, updateStyle: function (e) { if ((e = this.getSelectedElement() ? this.getSelectedElement() : e) && this.setStyleProperty) try { if (window.getComputedStyle) { "#text" == e.nodeName.toLowerCase() && (e = this.editor[0]); var t = 401 == (i = window.getComputedStyle(e, null)).getPropertyValue("font-weight") ? 700 : i.getPropertyValue("font-weight"); this.style = { fontStyle: i.getPropertyValue("font-style"), fontSize: i.getPropertyValue("font-size"), textDecoration: i.getPropertyValue("text-decoration"), fontWeight: t, fontFamily: i.getPropertyValue("font-family"), textAlign: i.getPropertyValue("text-align"), color: this._rgbToHex(i.color), backColor: this._rgbToHex(i.backgroundColor) }, this.style.fontStyle = i.getPropertyValue("font-style"), this.style.vAlign = i.getPropertyValue("vertical-align"), this.style.del = this.isStyleProperty(e, "span", "textDecoration", "line-through"), this.style.u = this.isStyleProperty(e, "span", "textDecoration", "underline"); this.style.backColor || (this.style.backColor = this._rgbToHex(function (e) { for (var t = "transparent"; e && (window.getComputedStyle(e).backgroundColor == t || "rgba(0, 0, 0, 0)" == window.getComputedStyle(e).backgroundColor) ;) e = e.parentNode; return e ? window.getComputedStyle(e).backgroundColor : t }(e))) } else { var i = e.currentStyle; this.style = { fontStyle: i.fontStyle, fontSize: i.fontSize, textDecoration: i.textDecoration, fontWeight: i.fontWeight, fontFamily: i.fontFamily, textAlign: i.textAlign, color: this._rgbToHex(i.color), backColor: this._rgbToHex(i.backgroundColor) } } this.setStyleProperty(e, "h1"), this.setStyleProperty(e, "h2"), this.setStyleProperty(e, "h3"), this.setStyleProperty(e, "h4"), this.setStyleProperty(e, "h5"), this.setStyleProperty(e, "h6"), this.setStyleProperty(e, "del"), this.setStyleProperty(e, "sub"), this.setStyleProperty(e, "sup"), this.setStyleProperty(e, "u"), "a" == e.nodeName.toLowerCase() && "underline" == this.style.textDecoration && (this.style.u = !0), (this.style.h1 || this.style.h2 || this.style.h3 || this.style.h4 || this.style.h5 || this.style.h6) && (this.style.heading = !0) } catch (e) { return null } }, _refreshTools: function (e, t, i) { if (!this.updating) { var s = this; if ((e = this.getSelectedElement() ? this.getSelectedElement() : e) && this.setStyleProperty) { this.updateStyle(e); var r = this.readOnly; if (this.readOnly = !0, !1 !== this.tools) { var o = this.tools.split(" "), a = this.tools.split(" | "), n = function (e) { $.each(e, function (e, t) { var i = s.commands[this]; if (!i) return !0; switch (i.type) { case "list": i.widget.jqxDropDownList("clearSelection"), i.widget.jqxDropDownList({ disabled: s.disabled }); break; case "colorPicker": i.val(i.value), i.widget.jqxDropDownButton({ disabled: s.disabled }); break; case "toggleButton": i.widget.jqxToggleButton("unCheck"), i.widget.jqxToggleButton({ disabled: s.disabled }); break; case "button": default: i.widget.jqxButton({ disabled: s.disabled }) } }) }; if (0 == a.length) n(o); else for (h = 0; h < a.length; h++) n(o = (d = a[h]).split(" ")); if (this.style) { var l = function (i) { $.each(i, function (i, r) { var o = s.commands[this]; if (!o) return !0; if (o.refresh) return o.refresh(o.widget, s.style), !0; switch (o.type) { case "list": if ("fontname" == o.command) { for (var a = -1, n = 999, l = 0; l < o.value.length; l++) { var r = o.value[l].label.toLowerCase(), h = s.style.fontFamily.toLowerCase().indexOf(r); h >= 0 && (h < n && (a = l), n = Math.min(n, h)) } o.widget.jqxDropDownList("selectIndex", a) } else if ("formatblock" == o.command) { r = null; s.style.h1 ? r = "h1" : s.style.h2 ? r = "h2" : s.style.h3 ? r = "h3" : s.style.h4 ? r = "h4" : s.style.h5 ? r = "h5" : s.style.h6 && (r = "h6"), o.widget.jqxDropDownList("selectItem", r) } else if ("fontsize" == o.command) { var d = "xx-small,x-small,small,medium,large,x-large,xx-large".split(","), c = -1; try { -1 == (c = e.getAttribute("size") - 1) && (c = s.editorDocument.queryCommandValue(o.command) - 1) } catch (e) { } var u = d[c]; o.widget.val(u) } break; case "colorPicker": var p = function (e) { return "number" != typeof e ? e : "rgb(" + (255 & e) + ", " + ((65280 & e) >> 8) + ", " + ((16711680 & e) >> 16) + ")" }(s.editorDocument.queryCommandValue(o.command)); "backcolor" == o.command && null == s.style.backColor && (p = "#FFFFFF"); var m = s._rgbToHex(p); m ? o.val(m) : "forecolor" == o.command ? o.val(s.style.color) : "backcolor" == o.command && o.val(s.style.backColor); break; case "toggleButton": if ("viewsource" == o.command) return; if (!o.command) return; var g = !1, f = s.editorDocument.queryCommandState(o.command) && s.editorDocument.queryCommandEnabled(o.command); if (s.linkPopup && s.linkPopup.remove(), "createlink" == o.command && "a" == e.nodeName.toLowerCase()) { var v = !0; if (-1 == $(e).text().indexOf(s.selection.getText()) && "" != s.selection.getText() && (v = !1), v) { f = !0, s.linkPopup = $("<div class='jqx-editor-link-popup' contentEditable='false' style='overflow: hidden; white-space: nowrap; padding: 5px; height: 17px; font-size: 12px; color: #222222; background: #F5F5F5; position: absolute; z-index: 9999;'>" + s.localization["Go to link"] + ": <a target='_blank' style='color:#222222;' href='" + e.href + "'>" + e.href + "</a> - <a style='color:#222222;' href='#change'>" + s.localization.Change + "</a> - <a style='color:#222222;' href='#remove'>" + s.localization.Remove + "</a></div>").appendTo(s.editor); var x = $(e).coord(), w = x.left; x.left + s.linkPopup.width() > s.editor.width() && (w = s.editor.width() - s.linkPopup.width() - 15), s.linkPopup.offset({ top: $(e).height() + x.top + 5, left: w }), s.addHandler(s.linkPopup, "mousedown", function (t) { if (t.target && t.target.href) switch ($(t.target).index()) { case 1: s.editor.focus(), s.selection.selectNode(e, !0), s.commands.link.widget.trigger("click"); break; case 2: try { s.editor.focus(), s.selection.selectNode(e), s.execute("unlink"), s.commands.underline.toggled = !1, s.selection.collapse(!1), s._refreshTools() } catch (e) { } break; default: window.open(t.target.href, "_blank") } return t.preventDefault && t.preventDefault(), t.stopPropagation && t.stopPropagation(), !1 }) } } "bold" == o.command ? (s.style.fontWeight && (s.style.fontWeight >= 600 || "bold" == s.style.fontWeight) && (g = !0), s.selection.isCollapsed() ? o.toggled = f : o.toggled = f || g, f = o.toggled) : "italic" == o.command ? (s.style.fontStyle && "italic" == s.style.fontStyle && (g = !0), t ? o.toggled = f : f = o.toggled) : "underline" == o.command ? (s.style.u && (g = !0), t ? o.toggled = f : f = o.toggled) : "justifyleft" == o.command ? "left" == s.style.textAlign && (g = !0) : "justifyright" == o.command ? "right" == s.style.textAlign && (g = !0) : "justifycenter" == o.command ? "center" == s.style.textAlign && (g = !0) : "justifyfull" == o.command ? "justify" == s.style.textAlign && (g = !0) : $.each(s.style, function (e, t) { o.command == e.toLowerCase() && (g = !0) }); var b = f; g && -1 != o.command.indexOf("justify") ? o.widget.jqxToggleButton("check") : b ? o.widget.jqxToggleButton("check") : g && !1 === s.range.collapsed ? o.widget.jqxToggleButton("check") : $.jqx.browser.msie && $.jqx.browser.version < 9 && g && !s.selection.isCollapsed() && o.widget.jqxToggleButton("check"); break; case "button": default: o.refresh && o.refresh(o.widget, s.style) } }) }; if (0 == a.length) l(o); else for (var h = 0; h < a.length; h++) { var d = a[h]; l(o = d.split(" ")) } } } this.readOnly = r } } }, _rgbToHex: function (e) { if (e) { if ("#" === e.substr(0, 1)) return 4 == e.length ? "#" + (i = e.substr(1, 1)) + i + (s = e.substr(2, 1)) + s + (r = e.substr(3, 1)) + r : e; var t = /(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/i.exec(e); if (!t) return null; var i = parseInt(t[2], 10).toString(16), s = parseInt(t[3], 10).toString(16), r = parseInt(t[4], 10).toString(16); return "#" + ((1 == i.length ? "0" + i : i) + (1 == s.length ? "0" + s : s) + (1 == r.length ? "0" + r : r)) } return null }, _preventDefault: function (e, t) { !1 !== t && ($(".jqx-editor-dropdownpicker").length > 0 && $(".jqx-editor-dropdownpicker").jqxDropDownButton("close"), $(".jqx-editor-dropdownlist").length > 0 && $(".jqx-editor-dropdownlist").jqxDropDownList("close")), e.preventDefault && e.preventDefault(), e.stopPropagation && e.stopPropagation(), e.cancelBubble = !0, e.returnValue = !1 }, _addCommandHandler: function (e, t, i, s, r) { var o = this; switch (!i && r.init && (i = "custom"), i) { case "custom": switch (r.type) { case "list": action = function (e) { "source" != o._documentMode && "none" != e.args.type && (r.value = $(this).val(), o.execute("custom", r), o.readOnly || o._refreshTools()), o._preventDefault(e, !1) }; break; case "colorPicker": action = function (e) { if ("source" != o._documentMode) { $(r.colorPicker).find("td").removeClass("jqx-editor-color-picker-selected-cell"); if ("div" == e.target.nodeName.toLowerCase()) { t = $(e.target).css("background-color"); $(e.target).parent().addClass("jqx-editor-color-picker-selected-cell") } else { var t = $(e.target).find("div").css("background-color"); $(e.target).addClass("jqx-editor-color-picker-selected-cell") } $("#bar-" + i).css("background", t), r.widget.val = function () { var e = function (e) { return "number" != typeof e ? e : "rgb(" + (255 & e) + ", " + ((65280 & e) >> 8) + ", " + ((16711680 & e) >> 16) + ")" }(t); return o._rgbToHex(e) }, r.widget.jqxDropDownButton("close"), o.execute("custom", r) } return o._preventDefault(e), !1 }; break; case "button": case "toggleButton": default: action = function (e) { $(".jqx-editor-dropdownpicker").length > 0 && $(".jqx-editor-dropdownpicker").jqxDropDownButton("close"), $(".jqx-editor-dropdownlist").length > 0 && $(".jqx-editor-dropdownlist").jqxDropDownList("close"), o._preventDefault(e); $(this).attr("data-command"); return "source" != o._documentMode && (r.toggle && r.toggle(), o.execute("custom", r), o._refreshTools()), !1 } } break; case "formatblock": action = function (e) { "source" != o._documentMode && "none" != e.args.type && (o.execute($(this).attr("data-command"), "<" + $(this).val() + ">", r), o.readOnly || (o.commands.bold.toggled = !1, o._refreshTools())), o._preventDefault(e, !1) }; break; case "fontsize": action = function (e) { if ("source" != o._documentMode && "none" != e.args.type) { var t = $(this).val(), i = "xx-small,x-small,small,medium,large,x-large,xx-large".split(","), s = $(this).jqxDropDownList("getSelectedIndex") + 1, s = 1 + i.indexOf(t); o.execute($(this).attr("data-command"), s, r) } o._preventDefault(e, !1) }; break; case "fontname": action = function (e) { if ("source" != o._documentMode && "none" != e.args.type) { var t = $(this).val(); o.execute($(this).attr("data-command"), t, r) } o._preventDefault(e, !1) }; break; case "forecolor": case "backcolor": action = function (e) { if ("source" != o._documentMode) { $(r.colorPicker).find("td").removeClass("jqx-editor-color-picker-selected-cell"); if ("div" == e.target.nodeName.toLowerCase()) { t = $(e.target).css("background-color"); $(e.target).parent().addClass("jqx-editor-color-picker-selected-cell") } else { var t = $(e.target).find("div").css("background-color"); $(e.target).addClass("jqx-editor-color-picker-selected-cell") } $("#bar-" + i).css("background", t), r.widget.jqxDropDownButton("close"), o.execute(i, t, r) } return o._preventDefault(e), !1 }; break; case "viewsource": action = function (e) { return o.linkPopup && o.linkPopup.remove(), r.toggle(), o.setMode(r.toggled), $(".jqx-editor-dropdownpicker").length > 0 && $(".jqx-editor-dropdownpicker").jqxDropDownButton("close"), $(".jqx-editor-dropdownlist").length > 0 && $(".jqx-editor-dropdownlist").jqxDropDownList("close"), o._preventDefault(e), !1 }; break; case "insertimage": action = function (e) { o._insertImageAction(e, o, r) }; break; case "createlink": action = function (e) { o._createLinkAction(e, o, r) }; break; default: action = function (e) { $(".jqx-editor-dropdownpicker").length > 0 && $(".jqx-editor-dropdownpicker").jqxDropDownButton("close"), $(".jqx-editor-dropdownlist").length > 0 && $(".jqx-editor-dropdownlist").jqxDropDownList("close"), o._preventDefault(e); var t = $(this).attr("data-command"); if ("source" != o._documentMode) { if ("underline" == t && o.getSelectedElement()) { var i = o.getSelectedElement(); if (i && "a" == i.nodeName.toLowerCase()) return r.toggled ? $(i).css("text-decoration", "none") : $(i).css("text-decoration", "underline"), r.toggle(), o._refreshTools(), !1 } r.toggle && r.toggle(), o.execute(t, $(this).val(), r), o._refreshTools() } return !1 } } return o.addHandler(e, t, action), !1 }, _createLinkAction: function (e, t, i) { if ("source" != (t = this)._documentMode) { t.focused || t.editor.focus(), t.range = t.getRange(); var s = t.getSelectedElement(); if ("a" == s.nodeName.toLowerCase() ? t.editLink = s : t.editLink = null, $(".jqx-editor-link-window").length > 0) return t.editLink && t.selection.selectNode(s, !0), t._updateLinkWindow(), t._preventDefault(e), !1; var r = $("<div class='jqx-editor-window jqx-editor-link-window'><div>" + t.localization["Insert Link"] + "</div><div><table style='border-collapse: separate; border-spacing: 2px;'><tr><td align='right'>" + t.localization.URL + ":</td><td><input style='width: 200px; height: 23px;' value=''/></td><tr/><tr><td align='right'>" + t.localization.Title + ":</td><td><input style='width: 200px; height: 23px;' value=''/></td><tr/><tr><td align='right'></td><td><div class='jqx-editor-link-checkbox'>" + t.localization["Open in a new window/tab"] + "</div></td><tr/><tr><td align='right'></td><td align='right'><button>Ok</button><button style='margin-left: 5px;'>Remove</button><button style='margin-left: 5px;'>Cancel</button></td><tr/></table></div></div>"), o = r.find("input"); o.addClass(t.toThemeProperty("jqx-widget")), o.addClass(t.toThemeProperty("jqx-widget-content")), o.addClass(t.toThemeProperty("jqx-input")); var a = r.find(".jqx-editor-link-checkbox").jqxCheckBox({ theme: t.theme, height: 23, width: 180 }), n = r.find("button:first").jqxButton({ theme: t.theme, disabled: !0 }), l = $(r.find("button")[1]).jqxButton({ theme: t.theme }), h = r.find("button:last").jqxButton({ theme: t.theme }); n.val(this.localization.Ok), h.val(this.localization.Cancel), l.val(this.localization.Remove), this.addHandler(h, $.jqx.mobile.isTouchDevice() ? $.jqx.mobile.getTouchEventName("touchstart") : "click", function (e) { t.editor.focus(), t.selectRange(t.range), t._refreshTools(), t._preventDefault(e) }), (!t.editLink || t.editLink && !t.editLink.href) && l.hide(); var d = !1; if (this.addHandler($(o[0]), "focus", function () { d = "" == o[1].value || o[1].value == o[0].value }), this.addHandler($(o[1]), "keyup", function (e) { e.keyCode && (13 == e.keyCode && n.trigger("click"), 27 == e.keyCode && h.trigger("click")) }), this.addHandler($(o[0]), "keyup change", function (e) { o[0].value.length > 0 ? n.jqxButton({ disabled: !1 }) : n.jqxButton({ disabled: !0 }), d && (o[1].value = o[0].value), e.keyCode && (13 == e.keyCode && n.trigger("click"), 27 == e.keyCode && h.trigger("click")) }), this.addHandler(l, $.jqx.mobile.isTouchDevice() ? $.jqx.mobile.getTouchEventName("touchstart") : "click", function (e) { r.jqxWindow("close"); try { t.editor.focus(), t.selection.selectNode(t.editLink), t.execute("unlink"), t.selection.collapse(!1), t.commands.underline.toggled = !1, t._refreshTools() } catch (e) { } t._preventDefault(e) }), this.addHandler(n, $.jqx.mobile.isTouchDevice() ? $.jqx.mobile.getTouchEventName("touchstart") : "click", function (e) { var s = r.find("input"), o = $("<a>" + (s[1].value || s[0].value) + "</a>"); a.val() && o.attr("target", "_blank"), o[0].href = $.trim(s[0].value), -1 == s[0].value.indexOf("http") && -1 == s[0].value.indexOf("mailto") && (o[0].href = "http://" + $.trim(s[0].value)), t.focused || t.editor.focus(), t.range && t.selectRange(t.range), t.execute("insertHTML", o[0].outerHTML + "<span id='INSERTION_MARKER'>&nbsp;</span>", i), t.editor.focus(); var n = $(t.editorDocument).find("#INSERTION_MARKER"); t.selection.selectNode(n[0], !0), t.getRange().setStartAfter && t.getRange().setStartAfter(n[0]), n.remove(), t.selection.collapse(!1), t._refreshTools(), t._preventDefault(e) }), t.updating = !0, r.appendTo(document.body), t.addHandler(r, "open", function () { t.updating = !0, setTimeout(function () { t.range = t.getRange(), $(o[0]).focus() }, 25) }), r.jqxWindow({ resizable: !1, width: 280, okButton: n, cancelButton: h, theme: t.theme, isModal: !0, position: { center: t.widget } }), t.addHandler(r, "close", function () { t.updating = !1 }), t.focused || (t.editor.focus(), t.selectRange(t.range)), t.editLink) o[0].value = t.editLink.href || "", o[1].value = $(t.editLink).text(), a.val("_blank" == $(t.editLink).attr("target")); else if (!t.selection.isCollapsed()) { var c = t.selection.getText(); c.match(/^(?!:\/\/)([a-zA-Z0-9]+\.)?[a-zA-Z0-9][a-zA-Z0-9-]+\.[a-zA-Z]{2,6}?$/i) ? o[0].value = c : o[1].value = c } return o[0].value.length > 0 ? n.jqxButton({ disabled: !1 }) : n.jqxButton({ disabled: !0 }), t._preventDefault(e), !1 } t._preventDefault(e) }, _insertImageAction: function (e, t, i) { if ("source" != t._documentMode) { if ($(".jqx-editor-image-window").length > 0) return t._updateImageWindow(), t._preventDefault(e), !1; var s = $("<div class='jqx-editor-window jqx-editor-image-window'><div>" + t.localization["Insert Image"] + "</div><div><table style='border-collapse: separate; border-spacing: 2px;'><tr><td align='right'>" + t.localization.URL + ":</td><td><input style='width: 180px; height: 23px;' value=''/></td><tr/><tr><td align='right'>" + t.localization["Alt Text"] + ":</td><td><input style='width: 180px; height: 23px;' value=''/></td><tr/><tr><td align='right'>" + t.localization.Width + ":</td><td><input style='width: 180px; height: 23px;' value=''/></td><tr/><tr><td align='right'>" + t.localization.Height + ":</td><td><input style='width: 180px; height: 23px;' value=''/></td><tr/><tr><td align='right'>" + t.localization.HSpace + ":</td><td><input style='width: 180px; height: 23px;' class='jqx-editor-hspace'/></td><tr/><tr><td align='right'>" + t.localization.VSpace + ":</td><td><input style='width: 180px; height: 23px;' class='jqx-editor-vspace'/></td><tr/><tr><td align='right'>" + t.localization.Align + ":</td><td><div class='jqx-editor-align'></div></td><tr/><tr><td align='right'></td><td align='right'><button>Ok</button><button style='margin-left: 5px;'>Remove</button><button style='margin-left: 5px;'>Cancel</button></td><tr/></table></div></div>"), r = s.find("input"); r.addClass(t.toThemeProperty("jqx-widget")), r.addClass(t.toThemeProperty("jqx-widget-content")), r.addClass(t.toThemeProperty("jqx-input")), s.find(".jqx-editor-align").jqxDropDownList({ autoDropDownHeight: !0, selectedIndex: 0, theme: t.theme, height: 23, width: 180, source: [t.localization["not set"], t.localization.Left, t.localization.Right] }); var o = s.find("button:first").jqxButton({ theme: t.theme }), a = s.find("button:last").jqxButton({ theme: t.theme }), n = $(s.find("button")[1]).jqxButton({ theme: t.theme }); return o.val(this.localization.Ok), a.val(this.localization.Cancel), n.val(this.localization.Remove), n.hide(), this.addHandler(n, $.jqx.mobile.isTouchDevice() ? $.jqx.mobile.getTouchEventName("touchstart") : "click", function (e) { $(t.editImage).removeClass("jqx-editor-focus"), $(t.editImage).remove(), t.editImage = null, t._preventDefault(e), s.jqxWindow("close"), t._raiseEvent("change") }), this.addHandler(a, $.jqx.mobile.isTouchDevice() ? $.jqx.mobile.getTouchEventName("touchstart") : "click", function (e) { $(t.editImage).removeClass("jqx-editor-focus"), t.editImage = null, t._preventDefault(e) }), this.addHandler(o, $.jqx.mobile.isTouchDevice() ? $.jqx.mobile.getTouchEventName("touchstart") : "click", function (e) { $(t.editImage).removeClass("jqx-editor-focus"); var r = s.find("input"), o = (t.editImage ? $(t.editImage) : $('<img style="border: 1px solid transparent;">')).attr("src", r[0].value).attr("unselectable", "on"); r[1].value && o.attr("alt", r[1].value).attr("title", r[1].value), r[2].value && !isNaN(parseInt(r[2].value)) ? o.width(r[2].value) : o.css("width", "auto"), r[3].value && !isNaN(parseInt(r[3].value)) ? o.height(r[3].value) : o.css("height", "auto"), r[4].value ? "auto" == r[4].value.toString() ? (o.css("margin-left", "auto"), o.css("margin-right", "auto")) : -1 != r[4].value.toString().indexOf("%") ? (o.css("margin-left", parseInt(r[4].value) + "%"), o.css("margin-right", parseInt(r[4].value) + "%")) : (o.css("margin-left", parseInt(r[4].value) + "px"), o.css("margin-right", parseInt(r[4].value) + "px")) : (o.css("margin-left", "0px"), o.css("margin-right", "0px")), r[5].value ? "auto" == r[5].value.toString() ? (o.css("margin-top", "auto"), o.css("margin-bottom", "auto")) : -1 != r[5].value.toString().indexOf("%") ? (o.css("margin-top", parseInt(r[5].value) + "%"), o.css("margin-bottom", parseInt(r[5].value) + "%")) : (o.css("margin-top", parseInt(r[5].value) + "px"), o.css("margin-bottom", parseInt(r[5].value) + "px")) : (o.css("margin-top", "0px"), o.css("margin-bottom", "0px")); var a = s.find(".jqx-editor-align").jqxDropDownList("selectedIndex"); if (1 == a ? o.css("float", "left") : 2 == a ? o.css("float", "right") : 0 == a && o.css("float", "none"), o.css("resize", !1), o[0].oncontrolselect = function () { return !1 }, o[0].selectstart = function () { return !1 }, !t.editImage) { t.focused || t.editor.focus(), t.range && t.selectRange(t.range), t.execute("insertHTML", o[0].outerHTML + "<span id='INSERTION_MARKER'>&nbsp;</span>", i), t.editor.focus(); var n = $(t.editorDocument).find("#INSERTION_MARKER"); t.selection.selectNode(n[0], !0), t.getRange().setStartAfter && t.getRange().setStartAfter(n[0]), n.remove(), t.selection.collapse(!1), t._refreshTools(), t._preventDefault(e) } t.editImage = null, t._preventDefault(e) }), s.appendTo(document.body), t.updating = !0, t.addHandler(s, "open", function () { t.updating = !0, setTimeout(function () { $(r[0]).focus() }, 25) }), s.jqxWindow({ resizable: !1, width: 280, okButton: o, cancelButton: a, theme: t.theme, isModal: !0, position: { center: t.widget } }), t.addHandler(s, "close", function () { t.updating = !1 }), t.focused || (t.editor.focus(), t.selectRange(t.range)), t._preventDefault(e), !1 } t._preventDefault(e) }, editmode: function (e) { if (e || this.readOnly) { if (e && this.readOnly) { t = this.editor.find("#sourceText").text(); this.editor.html(t), this.buttons.hasOwnProperty("html") && this.buttons.html.removeClass("active"), this.editor.attr("contentEditable", !0), this._addHandlers() } } else { this._removeHandlers(), this.editor.attr("contentEditable", !1); var t = document.createTextNode(this.editor.html()), i = $("<pre>"); i.html(t).attr({ id: "sourceText", contentEditable: !0 }).css("height", "100%"), this.editor.html(i), this.buttons.hasOwnProperty("html") && this.buttons.html.addClass("active"), i.focus() } this.readOnly = !e }, setMode: function (e) { this.range || (this.editor.focus(), this.range = this.getRange()); var t, s = this.editor[0]; if (e) { this._documentMode = "source"; var r = new i, o = r.HTMLtoXML(s.innerHTML); o = r.FormatHTML(o), t = document.createTextNode(o), s.innerHTML = ""; var a = document.createElement("pre"); s.contentEditable = !1, a.style.height = "100%", a.style.margin = "0px", a.style.outline = "none", a.style.display = "block", a.id = "sourceText", a.contentEditable = !0, a.appendChild(t), s.appendChild(a), this.readOnly = !0 } else this._documentMode = "html", document.all ? s.innerHTML = s.innerText : s.textContent ? s.innerHTML = s.textContent : ((t = document.createRange()).selectNodeContents(s.firstChild), s.innerHTML = t.toString()), s.contentEditable = !0, this.readOnly = !1, this._refreshTools(), this.editor.focus(), this.selection.selectNode(this.editor[0]), this.editor.scrollTop(0), this.selection.collapse(!0); $.each(this.commands, function () { if (this.widget && "viewsource" != this.command) switch (this.type) { case "list": this.widget.jqxDropDownList({ disabled: e }); break; case "colorPicker": this.widget.jqxDropDownButton({ disabled: e }); break; case "button": this.widget.jqxButton({ disabled: e }); break; case "toggleButton": this.widget.jqxToggleButton({ toggled: !1, disabled: e }) } }), this.editor.focus(), this.commands.html.widget.jqxToggleButton({ toggled: "source" == e || 1 == e }), this.commands.html.toggled = "source" == e || 1 == e }, execute: function (e, t, i) { if (!this.readOnly) { var s = this, r = this.editorDocument; if ("source" == s._documentMode) return; s.linkPopup && s.linkPopup.remove(), this.editor.focus(), $.jqx.browser.mozilla && this.focus(); var o = function (e) { try { if (e.command && "inserthtml" == e.command.toLowerCase()) { var t = s.getRange(), i = e.value; -1 == i.toString().indexOf("<") && (i = "<span>" + e.value + "</span>"), s.selection.insertContent(i + "<span id='INSERTION_MARKER'>&nbsp;</span>"), s.selectRange(t), setTimeout(function () { var e = $(s.editorDocument).find("#INSERTION_MARKER"); s.selection.selectNode($(e).prev()[0], !0), e.remove(), s.selection.collapse(!1) }, 10) } else if (e.command) { if (!r.queryCommandEnabled(e.command)) return !1; r.execCommand(e.command, !1, e.value) } else { if (!r.queryCommandEnabled(e)) return !1; r.execCommand(e, !1, e) } } catch (e) { } }; if ("custom" == e) (a = t.action(t.widget, this.editor)) && o(a); else try { if (i && i.action) { var a = i.action(i.widget, this.editor); o(a) } else if (r.queryCommandEnabled(e)) r.execCommand(e, !1, t); else { if ("insertHTML" != e) return !1; this.selection.insertContent(t) } } catch (i) { if ("insertHTML" != e) return !1; this.selection.insertContent(t) } s._raiseEvent("change", { command: e, args: t }), this.changed = !0, this.range = this.getRange() } }, destroy: function () { this._removeHandlers(); var e = this.tools.split(" "), t = this.tools.split(" | "), i = this, s = function (e) { $.each(e, function (e, t) { var s = i.commands[this]; if (!s) return !0; switch (s.type) { case "list": s.widget.jqxDropDownList("destroy"); break; case "colorPicker": s.colorPicker.remove(), s.widget.jqxDropDownButton("destroy"); break; case "toggleButton": s.widget.jqxToggleButton("destroy"); break; case "custom": this.destroyTool && this.destroyTool(this); break; case "button": default: s.widget.jqxToggleButton("destroy") } }) }; if (0 == t.length) s(e); else for (var r = 0; r < t.length; r++) s(e = t[r].split(" ")); this.inline ? this.toolbar.remove() : this.widget.remove() }, val: function (e) { return void 0 != e && "object" != typeof e && this.editor.html(e), this.editor.html() }, _raiseEvent: function (e, t) { if (void 0 == t && (t = { owner: null }), "source" == this._documentMode) return !0; var i = e; args = t, args.owner = this; var s = new jQuery.Event(i); s.owner = this, s.args = args; var r = this.widget.trigger(s); return t = s.args, r } }); var t = function (e) { var t = { initialize: function (e) { this.document = e }, getSelection: function () { return this.document.getSelection ? this.document.getSelection() : this.document.selection }, getRange: function () { var e = this.getSelection(); if (!e) return null; try { return e.rangeCount > 0 ? e.getRangeAt(0) : this.document.createRange ? this.document.createRange() : this.document.selection.createRange() } catch (e) { return this.document.body.createTextRange() } }, selectRange: function (e) { if (e.select) e.select(); else { var t = this.getSelection(); t.addRange && (t.removeAllRanges(), t.addRange(e)) } }, selectNode: function (e, t) { var i = this.getRange(), s = this.getSelection(); return i.moveToElementText ? (i.moveToElementText(e), i.select()) : s.addRange ? (t ? i.selectNodeContents(e) : i.selectNode(e), s.removeAllRanges(), s.addRange(i)) : s.setBaseAndExtent(e, 0, e, 1), e }, isCollapsed: function () { var e = this.getRange(); return !e.item && (0 == e.boundingWidth || this.getSelection().isCollapsed) }, collapse: function (e) { var t = this.getRange(), i = this.getSelection(); t.select ? (t.collapse(e), t.select()) : e ? i.collapseToStart() : i.collapseToEnd() }, getContent: function () { var e = this.getRange(), t = $("<div>")[0]; return this.isCollapsed() ? "" : (e.cloneContents ? t.appendChild(e.cloneContents()) : void 0 != e.item || void 0 != e.htmlText ? $(t).html(e.item ? e.item(0).outerHTML : e.htmlText) : $(t).html(e.toString()), $(t).html()) }, getText: function () { var e = this.getRange(), t = this.getSelection(); return this.isCollapsed() ? "" : e.text || (t.toString ? t.toString() : "") }, getNode: function () { var t = this.getRange(); if (!$.jqx.browser.msie || $.jqx.browser.version >= 9) { var i = null; if (t) for (i = t.commonAncestorContainer, t.collapsed || t.startContainer == t.endContainer && t.startOffset - t.endOffset < 2 && t.startContainer.hasChildNodes() && (i = t.startContainer.childNodes[t.startOffset]) ; "element" != typeof i;) i = i.parentNode; return e.id(i) } return e.id(t.item ? t.item(0) : t.parentElement()) }, insertContent: function (e) { var t = this.getRange(); if (t.pasteHTML) t.pasteHTML(e), t.collapse(!1), t.select(); else if (t.insertNode) if (t.deleteContents(), t.createContextualFragment) t.insertNode(t.createContextualFragment(e)); else { var i = this.document, s = i.createDocumentFragment(), r = i.createElement("div"); s.appendChild(r), r.outerHTML = e, t.insertNode(s) } } }; return t.initialize(e), t }, i = function () { function e(e) { for (var t = {}, i = e.split(","), s = 0; s < i.length; s++) t[i[s]] = !0; return t } var t = /^<([-A-Za-z0-9_]+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/, i = /^<\/([-A-Za-z0-9_]+)[^>]*>/, s = /([-A-Za-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g, r = e("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"), o = e("address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul"), a = e("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"), n = e("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"), l = e("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"), h = e("script,style"), d = this.HTMLParser = function (e, d) { function c(e, t) { if (t) for (i = g.length - 1; i >= 0 && g[i].toLowerCase() != t.toLowerCase() ; i--); else var i = 0; if (i >= 0) { for (var s = g.length - 1; s >= i; s--) d.end && d.end(g[s]); g.length = i } } var u, p, m, g = []; for (g.last = function () { return this[this.length - 1] }; e;) { if (p = !0, g.last() && h[g.last()]) e = e.replace(new RegExp("(.*)</" + g.last() + "[^>]*>"), function (e, t) { return t = t.replace(/<!--(.*?)-->/g, "$1").replace(/<!\[CDATA\[(.*?)]]>/g, "$1"), d.chars && d.chars(t), "" }), c("", g.last()); else if (0 == e.indexOf("\x3c!--") ? (u = e.indexOf("--\x3e")) >= 0 && (d.comment && d.comment(e.substring(4, u)), e = e.substring(u + 3), p = !1) : 0 == e.indexOf("</") ? (m = e.match(i)) && (e = e.substring(m[0].length), m[0].replace(i, c), p = !1) : 0 == e.indexOf("<") && (m = e.match(t)) && (e = e.substring(m[0].length), m[0].replace(t, function (e, t, i, h) { if (t = t.toLowerCase(), o[t]) for (; g.last() && a[g.last()];) c("", g.last()); if (n[t] && g.last() == t && c("", t), (h = r[t] || !!h) || g.push(t), d.start) { var u = []; i.replace(s, function (e, t) { var i = arguments[2] ? arguments[2] : arguments[3] ? arguments[3] : arguments[4] ? arguments[4] : l[t] ? t : ""; u.push({ name: t, value: i, escaped: i.replace(/(^|[^\\])"/g, '$1\\"') }) }), d.start && d.start(t, u, h) } }), p = !1), p) { var f = (u = e.indexOf("<")) < 0 ? e : e.substring(0, u); e = u < 0 ? "" : e.substring(u), d.chars && d.chars(f) } e } c() }; this.HTMLtoXML = function (e) { var t = ""; return e = e.replace(/\r/gi, ""), e = e.replace(/\n/gi, ""), d(e, { start: function (e, i, s) { t += "<" + e; for (var r = 0; r < i.length; r++) t += " " + i[r].name + '="' + i[r].escaped + '"'; t += (s ? "/" : "") + ">" }, end: function (e) { t += "</" + e + ">\r\n" }, chars: function (e) { t += e }, comment: function (e) { t += "\x3c!--" + e + "--\x3e" } }), t }, this.FormatHTML = function (e, t) { var i, s, r, o, a; for (s = (t = t || {}).indent_size || 4, r = t.indent_char || " ", o = t.brace_style || "collapse", 1 / 0, a = t.unformatted || ["a", "span", "bdo", "em", "strong", "dfn", "code", "samp", "kbd", "var", "cite", "abbr", "acronym", "q", "sub", "sup", "tt", "i", "b", "big", "small", "u", "s", "strike", "font", "ins", "del", "pre", "address", "dt", "h1", "h2", "h3", "h4", "h5", "h6"], (i = new function () { return this.pos = 0, this.token = "", this.current_mode = "CONTENT", this.tags = { parent: "parent1", parentcount: 1, parent1: "" }, this.tag_type = "", this.token_text = this.last_token = this.last_text = this.token_type = "", this.Utils = { whitespace: "\n\r\t ".split(""), single_token: "br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed,?php,?,?=".split(","), extra_liners: "head,body,/html".split(","), in_array: function (e, t) { for (var i = 0; i < t.length; i++) if (e === t[i]) return !0; return !1 } }, this.get_content = function () { for (var e = "", t = [], i = !1; "<" !== this.input.charAt(this.pos) ;) { if (this.pos >= this.input.length) return t.length ? t.join("") : ["", "TK_EOF"]; if (e = this.input.charAt(this.pos), this.pos++, this.line_char_count++, this.Utils.in_array(e, this.Utils.whitespace)) t.length && (i = !0), this.line_char_count--; else { if (i) { if (this.line_char_count >= this.max_char) { t.push("\n"); for (var s = 0; s < this.indent_level; s++) t.push(this.indent_string); this.line_char_count = 0 } else t.push(" "), this.line_char_count++; i = !1 } t.push(e) } } return t.length ? t.join("") : "" }, this.get_contents_to = function (e) { if (this.pos == this.input.length) return ["", "TK_EOF"]; var t = "", i = new RegExp("</" + e + "\\s*>", "igm"); i.lastIndex = this.pos; var s = i.exec(this.input), r = s ? s.index : this.input.length; return this.pos < r && (t = this.input.substring(this.pos, r), this.pos = r), t }, this.record_tag = function (e) { this.tags[e + "count"] ? (this.tags[e + "count"]++, this.tags[e + this.tags[e + "count"]] = this.indent_level) : (this.tags[e + "count"] = 1, this.tags[e + this.tags[e + "count"]] = this.indent_level), this.tags[e + this.tags[e + "count"] + "parent"] = this.tags.parent, this.tags.parent = e + this.tags[e + "count"] }, this.retrieve_tag = function (e) { if (this.tags[e + "count"]) { for (var t = this.tags.parent; t && e + this.tags[e + "count"] !== t;) t = this.tags[t + "parent"]; t && (this.indent_level = this.tags[e + this.tags[e + "count"]], this.tags.parent = this.tags[t + "parent"]), delete this.tags[e + this.tags[e + "count"] + "parent"], delete this.tags[e + this.tags[e + "count"]], 1 == this.tags[e + "count"] ? delete this.tags[e + "count"] : this.tags[e + "count"]-- } }, this.get_tag = function () { var e, t, i = "", s = [], r = !1; do { if (this.pos >= this.input.length) return s.length ? s.join("") : ["", "TK_EOF"]; i = this.input.charAt(this.pos), this.pos++, this.line_char_count++, this.Utils.in_array(i, this.Utils.whitespace) ? (r = !0, this.line_char_count--) : ("'" !== i && '"' !== i || s[1] && "!" === s[1] || (i += this.get_unformatted(i), r = !0), "=" === i && (r = !1), s.length && "=" !== s[s.length - 1] && ">" !== i && r && (this.line_char_count >= this.max_char ? (this.print_newline(!1, s), this.line_char_count = 0) : (s.push(" "), this.line_char_count++), r = !1), "<" === i && (e = this.pos - 1), s.push(i)) } while (">" !== i); var o, n = s.join(""); o = -1 != n.indexOf(" ") ? n.indexOf(" ") : n.indexOf(">"); var l = n.substring(1, o).toLowerCase(); if ("/" === n.charAt(n.length - 2) || this.Utils.in_array(l, this.Utils.single_token)) this.tag_type = "SINGLE"; else if ("script" === l) this.record_tag(l), this.tag_type = "SCRIPT"; else if ("style" === l) this.record_tag(l), this.tag_type = "STYLE"; else if (this.Utils.in_array(l, a)) h = this.get_unformatted("</" + l + ">", n), s.push(h), e > 0 && this.Utils.in_array(this.input.charAt(e - 1), this.Utils.whitespace) && s.splice(0, 0, this.input.charAt(e - 1)), t = this.pos - 1, this.Utils.in_array(this.input.charAt(t + 1), this.Utils.whitespace) && s.push(this.input.charAt(t + 1)), this.tag_type = "SINGLE"; else if ("!" === l.charAt(0)) if (-1 != l.indexOf("[if")) -1 != n.indexOf("!IE") && (h = this.get_unformatted("--\x3e", n), s.push(h)), this.tag_type = "START"; else if (-1 != l.indexOf("[endif")) this.tag_type = "END", this.unindent(); else if (-1 != l.indexOf("[cdata[")) h = this.get_unformatted("]]>", n), s.push(h), this.tag_type = "SINGLE"; else { var h = this.get_unformatted("--\x3e", n); s.push(h), this.tag_type = "SINGLE" } else "/" === l.charAt(0) ? (this.retrieve_tag(l.substring(1)), this.tag_type = "END") : (this.record_tag(l), this.tag_type = "START"), this.Utils.in_array(l, this.Utils.extra_liners) && this.print_newline(!0, this.output); return s.join("") }, this.get_unformatted = function (e, t) { if (t && -1 != t.indexOf(e)) return ""; var i = "", s = "", r = !0; do { if (this.pos >= this.input.length) return s; if (i = this.input.charAt(this.pos), this.pos++, this.Utils.in_array(i, this.Utils.whitespace)) { if (!r) { this.line_char_count--; continue } if ("\n" === i || "\r" === i) { s += "\n", this.line_char_count = 0; continue } } s += i, this.line_char_count++, r = !0 } while (-1 == s.indexOf(e)); return s }, this.get_token = function () { var e; if ("TK_TAG_SCRIPT" === this.last_token || "TK_TAG_STYLE" === this.last_token) { var t = this.last_token.substr(7); return e = this.get_contents_to(t), "string" != typeof e ? e : [e, "TK_" + t] } return "CONTENT" === this.current_mode ? (e = this.get_content(), "string" != typeof e ? e : [e, "TK_CONTENT"]) : "TAG" === this.current_mode ? (e = this.get_tag(), "string" != typeof e ? e : [e, "TK_TAG_" + this.tag_type]) : void 0 }, this.get_full_indent = function (e) { return e = this.indent_level + e || 0, e < 1 ? "" : Array(e + 1).join(this.indent_string) }, this.printer = function (e, t, i, s, r) { this.input = e || "", this.output = [], this.indent_character = t, this.indent_string = "", this.indent_size = i, this.brace_style = r, this.indent_level = 0, this.max_char = s, this.line_char_count = 0; for (var o = 0; o < this.indent_size; o++) this.indent_string += this.indent_character; this.print_newline = function (e, t) { if (this.line_char_count = 0, t && t.length) { if (!e) for (; this.Utils.in_array(t[t.length - 1], this.Utils.whitespace) ;) t.pop(); t.push("\n"); for (var i = 0; i < this.indent_level; i++) t.push(this.indent_string) } }, this.print_token = function (e) { this.output.push(e) }, this.indent = function () { this.indent_level++ }, this.unindent = function () { this.indent_level > 0 && this.indent_level-- } }, this }).printer(e, r, s, 1 / 0, o) ; ;) { var n = i.get_token(); if (i.token_text = n[0], i.token_type = n[1], "TK_EOF" === i.token_type) break; switch (i.token_type) { case "TK_TAG_START": i.print_newline(!1, i.output), i.print_token(i.token_text), i.indent(), i.current_mode = "CONTENT"; break; case "TK_TAG_STYLE": case "TK_TAG_SCRIPT": i.print_newline(!1, i.output), i.print_token(i.token_text), i.current_mode = "CONTENT"; break; case "TK_TAG_END": if ("TK_CONTENT" === i.last_token && "" === i.last_text) { var l = i.token_text.match(/\w+/)[0], h = i.output[i.output.length - 1].match(/<\s*(\w+)/); null !== h && h[1] === l || i.print_newline(!0, i.output) } i.print_token(i.token_text), i.current_mode = "CONTENT"; break; case "TK_TAG_SINGLE": var d = i.token_text.match(/^\s*<([a-z]+)/i); d && i.Utils.in_array(d[1], a) || i.print_newline(!1, i.output), i.print_token(i.token_text), i.current_mode = "CONTENT"; break; case "TK_CONTENT": "" !== i.token_text && i.print_token(i.token_text), i.current_mode = "TAG"; break; case "TK_STYLE": case "TK_SCRIPT": if ("" !== i.token_text) { i.output.push("\n"); var c = i.token_text; if ("keep" == t.indent_scripts) u = 0; else if ("separate" == t.indent_scripts) u = -i.indent_level; else var u = 1; var p = i.get_full_indent(u), m = c.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(i.indent_string).length - 1, g = i.get_full_indent(u - m); (c = c.replace(/^\s*/, p).replace(/\r\n|\r|\n/g, "\n" + g).replace(/\s*$/, "")) && (i.print_token(c), i.print_newline(!0, i.output)) } i.current_mode = "TAG" } i.last_token = i.token_type, i.last_text = i.token_text } return i.output.join("") } } }(jQuery);