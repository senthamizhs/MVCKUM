@using System.Configuration;
@{
    ViewBag.Title = "_Rechedule";
    string Pnrnameflg = ConfigurationManager.AppSettings["PNRlbl"] != null ? ConfigurationManager.AppSettings["PNRlbl"].ToString() : "S PNR";
    string Producttype = "";
}

<!--pnr-->

<link href="~/Content/CSS/Boostrap-table.css" rel="stylesheet" type="text/css">
<style>
     #ModalSSRpopupResh .modal-header{
        background-color: initial !important;
    }
    #ModalSSRpopupResh .modal-dialog {
        margin: 100px auto;
    }

    .table > thead > tr > th {
        color: #fff !important;
    }

    .table > thead > tr > th {
        vertical-align: bottom;
        border-bottom: 1px solid #ddd;
        padding: 10px !important;
        color: #333;
        font-weight: 500 !important;
    }

    .TobeReshcolumndiv, .dvclsreshsuccdetails {
        text-align: left;
    }

    #Exist_flight_details, #Reschedule_paxdet,
    #Reschedule_faredetails {
        width: 100%;
        margin-bottom: 15px;
    }

        #Exist_flight_details table, #Reschedule_paxdet table,
        #Reschedule_faredetails table {
            float: left;
            background: #fff;
            border: 1px solid #dfdddd;
            width: 100%;
        }

            #Exist_flight_details table thead tr, #Reschedule_paxdet table thead tr,
            #Reschedule_faredetails table thead tr {
                background: #309cf1;
            }

                #Exist_flight_details table thead tr th, #Reschedule_paxdet table thead tr th,
                #Reschedule_faredetails table thead tr th {
                    color: #fff;
                    padding: 5px 10px;
                    text-align: center;
                    font-weight: 500;
                    border-right: 1px solid #c3c3c3;
                    white-space: nowrap;
                    background: #646464;
                }

            #Exist_flight_details table tbody tr td, #Reschedule_paxdet table tbody tr td,
            #Reschedule_faredetails table tbody tr td {
                padding: 10px 10px;
                text-align: center;
                border: 1px solid #e6e6e6;
                font-weight: 500;
                color: #030303;
                white-space: nowrap;
            }

    #Reschedule_body {
        float: left;
        width: 100%;
        background: #f6f6f6;
    }

    .totamtcal {
        display: none;
    }

    .labecheck {
        position: relative;
        left: 7px;
        top: -2px;
    }

    #Reschedule_body .hdr-tit {
        background-color: #fff !important;
        margin-bottom: 1px !important;
        padding: 6px 10px;
        box-shadow: 0px 1px 1px 1px #efefef;
        border: none !important;
        text-decoration: none !important;
        color: #272727;
        font-weight: 600 !important;
        font-family: "Poppins", sans-serif !important;
        font-size: 14px;
    }

    .scroll-reqconfirm {
        height: 100px;
    }

    #myModal_reschdule_confirm .modal-dialog {
        width: 80%;
    }

    #myModal_reschdule_confirm .modal-body {
        padding: 15px 0px;
    }

    @@media screen and (max-width: 750px) and (min-width: 250px) {
        #marginbtm {
            margin-bottom: 20px;
        }

        #reschedule_body_availability .no-more-tables.table > tbody > tr > td {
            padding-left: 50% !important;
        }
    }

    .backcolor {
        border-style: double;
        /*background: repeating-linear-gradient( 45deg, #337ab7, #27a5f5 10px, rgba(0,0,0,.8) 10px, #262626 20px );
        color: white;
        font-weight: 700;*/
    }

    .showdivreschedule {
        display: none;
    }

        .showdivreschedule.vpnrtbl {
            padding: 10px !important;
            background: #fff !important;
            border-style: none !important;
        }

    #reschehide .col-lg-offset-2 {
        margin-left: 0%;
    }

    ._M_RTME4 #section-topline-4 .vpnrtbl tbody > tr > th {
        padding: 6px 10px !important;
        font-size: 13px;
        font-weight: 500;
    }   

    body input[type=text], body select {
        border: 1px solid #e2e2e2 !important;
    }

    .reschedulebtn ul li {
        color: #fff;
        text-align: center;
        display: inline-block;
        float: none;
        cursor: pointer;
        margin: 0 8px;
        width: 13%;
    }

    .reschedulebtn ul {
        margin: 0 auto;
        float: none;
        width: 100%;
        text-align: center;
        padding-left: 0px;
    }

    ._M_RTME4 .mycss-content-wrap #section-topline-2 .cls-header, ._M_RTME4 .mycss-content-wrap #section-topline-4 .cls-header {
        background-color: #fff !important;
        margin-bottom: 2px !important;
        padding: 10px 20px;
        box-shadow: 0px 1px 1px 1px #efefef;
        border: none !important;
        text-decoration: none !important;
        color: #272727;
        font-weight: 600 !important;
        font-family: "Poppins", sans-serif !important;
        font-size: 14px;
    }

    .tickethead {
        position: relative;
        font-weight: bold !important;
        left: 26px;
    }
    /*.modal-open .modal {
        z-index:999
    }*/
    .tckstauts {
        font-size: 14px;
        font-weight: bold;
        color: #df2d3d;
    }
</style>

@* Custom style*@
<style>
    .headline {
        text-decoration: underline;
        color: red;
        cursor: pointer;
    }

    .addssr {
        text-align: right;
        float: right;
        position: relative;
        left: 47%;
        text-decoration: underline;
        top: 20px;
        color: red;
        cursor: pointer;
    }

    .bordercls {
        border: 1px solid red;
    }

    .chragecls {
        text-align: right;
    }

    .popclose {
        float: right;
        cursor: pointer;
        position: relative;
        top: 5px;
        border: 1px solid;
        padding: 1px 3px 3px 3px;
        font-size: 16px;
        border-radius: 50%;
        display: none;
    }

    .SSRclose {
        float: right;
        cursor: pointer;
        position: relative;
        top: 5px;
        border: 1px solid;
        padding: 1px 3px 3px 3px;
        font-size: 16px;
        border-radius: 50%;
    }

    .ReshedulePaxdetails .form-control {
        height: 26px;
    }

    .Reshcolumndiv .ui-table-footer, .ssrtable .ui-table-footer {
        display: none;
    }

    .Margcls {
        margin-bottom: 10px;
    }

    .clsmyButton {
        border: none;
        font-weight: bold;
        color: #007bff;
    }

    .capsonly {
        text-transform: uppercase;
    }

    .closesearch {
        top: 38px;
        right: 25px;
        cursor: pointer;
    }

    .dvclsbeforepreview .dropdown-menu > .active {
        background-color: #007bff !important;
    }

    .indesktypeahead a {
        color: #0e0e0e;
    }

    .typeahead.active {
        background-color: #d50631 !important;
    }

    .clr-rd {
        color: red;
    }



    .form-control {
        font-size: 13px !important;
    }


    .card-header {
        font-weight: 500;
        font-size: 15px;
    }

    .dvclsprntcontainer {
        padding: 3rem;
    }

    .mb15 {
        margin-bottom: 15px;
    }

    .wd200 {
        width: 200px;
    }

    .wd50 {
        width: 50px;
    }

    .wd90per {
        width: 90%;
        max-width: 90%;
    }

    .mt1_5rem {
        margin-top: 1.5rem;
    }

    .jsctcenter {
        justify-contet: center;
    }

    .disnone {
        display: none;
    }

    .disblock {
        display: block;
    }

    .pad0 {
        padding: 0;
    }
    /*.row {margin-bottom: 1rem;}*/
    .card-body {
        padding-bottom: 0;
    }

    hr {
        margin: 0 !important;
    }

    .mt2 {
        margin-top: 2rem;
    }

    ul li {
        font-size: 13px !important;
    }

    .btn {
        font-size: 13px !important;
    }

    .table td, .table th {
        font-size: 13px !important;
    }

    .table > thead > tr > th {
        vertical-align: bottom;
        border-bottom: 1px solid #ddd;
        padding: 10px !important;
        background-color: #fbfbfb;
        color: #333;
        font-weight: 600;
    }

    .fs14 {
        font-size: 14px;
    }

    .mb-0 {
        margin-bottom: 0;
    }

    .wsnowrap {
        white-space: nowrap;
    }

    .closesearch {
        top: 38px;
        right: 25px;
        cursor: pointer;
    }

    .typeahead a {
        color: #333 !important;
    }

    .m5 {
        margin: 5px;
    }

    .tab-content {
        padding: 10px;
    }

    .checkcls {
        position: relative;
        left: 30%;
        top: -22px;
        z-index: 1000;
    }

    #Tobereshid label {
        font-size: 13px;
        font-weight: 600 !important;
    }

    #Tobereshid .ui-table-footer {
        display: none;
    }

    #Tobereshid th, .dvclsreshsuccdetails th {
        background: #273342 !important;
        color: #fff !important;
        font-weight: normal !important;
    }

    .tablehead {
        background: #fbfbfb !important;
        color: #333 !important;
    }

    #ModalSSRpopupResh .modal-header .close {
        margin-top: -28px;
    }

    #Tobereshid .bordercls {
        border: 1px solid red !important;
    }

    #ModalSSRpopupResh .bordercls {
        border: 1px solid red !important;
    }

    .addsec {
        border: 1px solid;
        border-radius: 50%;
        padding: 6px;
        color: red;
        cursor: pointer;
    }

    .removesec {
        border: 1px solid;
        border-radius: 50%;
        padding: 6px;
        color: red;
        position: relative;
        left: 8px;
        cursor: pointer;
    }
</style>
@* Custom style*@
<div class="reshedule">
    <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12 fadeInDownSmall" style="padding-top: 10px;">
        <div class="col-sm-12 col0 mobshow hidden-lg hidden-md hidden-sm">
            @*2212*@
            <span>Reschedule</span>
        </div>

        <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12 pad-0" id="marginbtm" style="margin-bottom:15px;">
            <div class="col-xs-12 col-md-3 col-sm-3 col-lg-3">

                <div class="dv-anim input-effect m-0 m-sm-t15">
                    <input id="reche_txt_viewSPNR" maxlength="10" value="" class="txt-anim clsAlphaNumeric" type="text" autocomplete="off" style="text-transform: uppercase" />

                    <label for="reche_txt_viewSPNR">@Pnrnameflg</label>
                    <span class="focus-border">
                        <i></i>
                    </span>
                </div>
            </div>
            <div class="col-xs-12 col-md-3 col-sm-3 col-lg-3">

                <div class="dv-anim input-effect m-0 m-sm-t15">
                    <input id="reche_txt_viewAirPNR" maxlength="10" value="" class="txt-anim clsAlphaNumeric" type="text" autocomplete="off" style="text-transform: uppercase" />

                    <label for="reche_txt_viewAirPNR">Airline PNR</label>
                    <span class="focus-border">
                        <i></i>
                    </span>
                </div>
            </div>
            <div class="col-xs-12 col-md-3 col-sm-3 col-lg-3">

                <div class="dv-anim input-effect m-0 m-sm-t15">
                    <input id="reche_txt_viewCSRPNR" maxlength="10" value="" class="txt-anim clsAlphaNumeric" type="text" autocomplete="off" style="text-transform: uppercase" />

                    <label for="reche_txt_viewCSRPNR">CRS PNR</label>
                    <span class="focus-border">
                        <i></i>
                    </span>
                </div>
            </div>
            <div class="col-xs-12 col-md-3 col-sm-3 col-lg-3" style="display:none;">

                <div class="dv-anim input-effect m-0 m-sm-t15">
                    <select id="reche_ddl_paymentmode" maxlength="10" value="" class="txt-anim clsAlphaNumeric  has-content form-control" type="text" autocomplete="off" style="text-transform: uppercase">
                        <option selected value="">All</option>
                        <option value="C">Credit</option>
                        <option value="T">Topup</option>
                    </select>
                    <label>Payment mode</label>
                    <span class="focus-border">
                        <i></i>
                    </span>
                </div>
            </div>
        </div>

        <div class="col-xs-12 col-md-offset-4 col-md-4 col-sm-4 col-lg-4 mt-15">
            <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                <input type="button" id="get_pnr" class="action-button action-buttonO shadow animate color c-button b-50 bg-aqua hv-transparent cmn-bg-clr btn-round action-button" style="width: 100%" value="Search" onclick="Reschedule_pnr();" />
            </div>
            <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                <input type="button" id="Clear" class="action-button action-buttonO shadow animate colorB1 c-button b-50 bg-aqua hv-transparent cmn-bg-clr btn-round action-button" value="Clear" style="width: 100%" onclick="clear_rescheule_pnr();" />
            </div>
        </div>

        <div class="col-xs-12 col-md-4 col-sm-4 col-lg-4 col-lg-offset-4 col-md-offset-4 col-sm-offset-4" style="display:none">
            <div id="rech_dvGrpBkngerr">
                <div class="message_wrap showhide">
                    <p class="message">
                        <span id="rech_dvGrpBkngerr_msg" class="error">All field(s) should not be empty.</span>
                    </p>
                </div>
            </div>

        </div>

    </div>

    <div id="reschehide" class="col-xs-12 col-md-12 col-sm-12 col-lg-12 fadeInDownSmall" style="text-align: left;">
        <h5 class="cls-header m-b-10" style="display: none">Agent Details</h5>

        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            @*<h5 class="cls-header m-b-10 showdivreschedule">
                    <i class="fa fa-file-text"></i>Contact Details<a href="#">
                        <div class="fa fa-chevron-up rotate_a"></div>
                    </a>
                </h5>*@
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" id="reschedule_contact_tbl" style="padding: 0px;">
                <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 showdivreschedule vpnrtbl" style="border-style: double;padding:0px;">
                    <table class="table table-responsive bx-shdow-re">
                        <tr style="background-color: #ccc;">
                            <th colspan='3'>CONTACT DETAILS </th>
                        </tr>
                        <tr>
                            <td>User Name </td>
                            <td>:</td>
                            <td id="usern"></td>
                        </tr>
                        <tr>
                            <td>Contact No </td>
                            <td>:</td>
                            <td id="contno"></td>
                        </tr>
                        <tr>
                            <td>Email ID </td>
                            <td>:</td>
                            <td id="emailid"></td>
                        </tr>
                    </table>
                </div>
                <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 showdivreschedule vpnrtbl" style="border-style: double;padding:0px;">
                    <table class="table table-responsive bx-shdow-re">
                        <tr style="background-color: #ccc;">
                            <th colspan='3'>BOOKING DETAILS</th>
                        </tr>

                        <tr>
                            <td>Booked Terminal</td>
                            <td>:</td>
                            <td id="bookingtermina"></td>
                        </tr>

                        <tr>
                            <td>P-Mode</td>
                            <td>:</td>
                            <td id="p_mode"></td>
                        </tr>
                        <tr>
                            <td>Issued Date</td>
                            <td>:</td>
                            <td id="issuedate"></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>


        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-0ri">
            <div class="col-sm-12">
                <h5 id="" class="cls-header m-b-10 showdivreschedule" style="font-weight:bold!important">
                    Ticket Details<a href="#">
                        <div class="fa fa-chevron-up rotate_c"></div>
                    </a>
                </h5>
            </div>
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 " id="air_reschedule_table"></div>
            @*<h5 id="" class="cls-header m-b-10 showdivreschedule">Ticket Details<a href="#"><div class="fa fa-chevron-up rotate_c"></div>
                </a></h5>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 " id="air_tckt_reschedule_table"></div>*@
        </div>

    </div>
</div>
<div class="TobeReshcolumndiv" id="Tobereshid" style="display:none">
    <div class="col-lg-12 ">
        <i class="fa fa-close popclose"></i>
        <div class="col-lg-12 Margcls" style="margin-top:15px;">
            <label>Existing Flight Details</label>
            <div id="divTicket_Exist_flt" class="columns"></div>
        </div>
        <div class="col-lg-12 Margcls">
            <label>New Flight Details</label>
            <div id="divTicket_New_flt" class="columns"></div>
        </div>
        <div class="col-lg-12 Margcls">
            <label>Reshedule Passenger Details</label>
            <div class="ReshedulePaxdetails columns "></div>
        </div>
        <div class="col-lg-12 Margcls">
            <label>Reshedule Flight Details</label>
            <div class="Edit_resh_flt_details" style="margin-bottom:10px;border-bottom:1px dashed #ccc"></div>
        </div>
        <div class="col-lg-12" style="margin-top:10px;">

            <div class="row" style="margin-bottom:25px;">
                <div class="col-lg-4" style="visibility:hidden"></div>
                <div class="col-lg-3">
                    <label>Remarks</label>
                    <textarea class="form-control" id="Txtremarksboa" rows="3"></textarea>
                </div>
                <div class="col-lg-2 balcls" style="position:relative;top:26px;">
                    @*<label class="totamtcal">Tax and Others : <b class="totsmt">0</b></label>*@
                    <label style="display:none">SSR : <b class="SSRamt">0</b></label>
                    <label class="totdebit  totamtcal">Total Debit : <b class="totsmt">0</b></label><br />
                    @*<label>Total Credit : 0</label><br />*@
                    <label class="Netamot totamtcal">Net Amount : <b class="totsmt">0</b></label>
                    <label class="addssr" style="cursor:pointer; z-index:1" onclick="Addssr()">Add SSR</label>
                </div>
                <div class="col-lg-3 text-right">
                    <div class="col-sm ">
                        <br />
                        <br />
                        <br />

                        <button type="button" class="btn btn-primary wd200" onclick="Tobereshduel()">Submit</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="dvclsreshsuccdetails" style="display:none;">

</div>
<input type="hidden" id="currency" />

<input type="hidden" id="hdn_Totpax_new" value="" />
<input type="hidden" id="hdn_Tottckt_new" value="" />
<input type="hidden" id="hdn_reschedule_airpenalty" />
<input type="hidden" id="hdn_reschedule_farediff" />
<input type="hidden" id="hdn_countryphonecode" value="@ConfigurationManager.AppSettings["Countryphonecode"]" />
<input type="hidden" id="hdn_reschedulereqtype" />
<input type="hidden" id="hdn_onwardrescheduleavail" />
<input type="hidden" id="hdn_returnrescheduleavail" />
<input type="hidden" id="hdn_confirmreschdule" value="" />

<input type="hidden" id="hdfRowIndexBook" />
<input type="hidden" id="hdfflightrowcount" />
<input type="hidden" id="hdfsession" />

<div class="modal fade bd-example-modal-lg" id="ModalSSRpopupResh" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg wd90per" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">SSR Updation</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body dvclsssrdetails">
                <div class="Fullssr">
                    <label>Old SSR Details</label>
                    <div id="divTicket_SSR" class="columns ssrtable"></div>
                    <div class="paxssr" style="margin-top:10px;"></div>

                    <div class="Newssr" style="display:none">
                        <label>New SSR Details</label>
                        <div id="divTicket_New_SSR" class="columns ssrtable"></div>
                    </div>

                    <div class="modal-footer text-center">
                        @*<button type="button" data-dismiss="modal" onclick="clearssr()" class="btn btn-secondary">Clear</button>*@
                        <button type="button" data-dismiss="modal" class="btn btn-primary" onclick="Confirmssr()">Confirm</button>
                    </div>
                </div>
                <div class="Addbreakup" style="display:none">
                    <i class="fa fa-close SSRclose"></i>
                    <div class="row">
                        <div class="col-lg-3" style="visibility:hidden"><div class="row"></div></div>
                        <div class="col-lg-7" id="addbreakuptext">
                            <div class="row taxbreddiv" id="Div_1">
                                <div class="col-sm-3"><label for="sltcurrcode">Code</label> <input type="text" name="Corporate Name" maxlength="2" data-mandatory="Y" id="Codetext_1" class="form-control " style="text-transform: uppercase;" value=""></div>
                                <div class="col-sm-3"><label for="sltcurrcode">Amount</label> <input type="text" name="Corporate Name" onkeypress="isNumericVal(event)" data-mandatory="Y" id="Codeamount_1" class="form-control codeamt" value=""></div>
                                <div class="col-sm-2" style="position:relative;top:29px;"><label for="sltcurrcode" id="Addbrekbtn_1" onclick="Adddivbreakup(this)" class="headline">Add</label> <label for="sltcurrcode" style="position:relative;left:15px;" id="Removebtn_1" onclick="Removediv(this)" class="headline">Remove</label> </div>
                                <div class="col-sm-3"> </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-4" style="visibility:hidden"><div class="row"></div></div>
                        <div class="col-lg-4"><div class="row"></div><div class="col-sm"><button type="button" class="btn btn-primary wd200" onclick="Taxokbtn()">Submit</button></div></div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<script>
    var get_reschedule_process = "@Url.Action("get_reschedule_process", "Reschedule")"

    var Rescheduleavailablity = "@Url.Action("Rescheduleavailablity", "Reschedule")";
    var Reschedulefarerule = "@Url.Action("Reschedulefarerule", "Reschedule")";
    var Onlinereschedule = "@Url.Action("Onlinereschedule", "Reschedule")";
    var CityAirport_Lst = "@Url.Content("~/XML/CityAirport_Lst.xml")"
    var ServerDate = "@ViewBag.ServerDateTime";
    var Username = "@Session["USERNAME"]";

    var Getreshdel_details = "@Url.Action("GetReschdulepopup_BOA", "Reschedule")";

    var Toresheule_boa= "@Url.Action("Reschedule_TicketPassengerDetails_new_BOA", "Reschedule")";
   // var Getcreditshell= "@Url.Action("Get_CreditShellPNR", "Booking")";
</script>
<!--end of pnr verfication details-->
