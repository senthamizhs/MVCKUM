@{
    string fileversion = System.Configuration.ConfigurationManager.AppSettings["UpdateVersion"] != null ? System.Configuration.ConfigurationManager.AppSettings["UpdateVersion"].ToString() : "";
    string allowcredit = (Session["ALLOW_CREDIT"] != null && Session["ALLOW_CREDIT"].ToString() != "") ? Session["ALLOW_CREDIT"].ToString() : "N";
    string allowtopup = (Session["ALLOW_TOPUP"] != null && Session["ALLOW_TOPUP"].ToString() != "") ? Session["ALLOW_TOPUP"].ToString() : "N";
    string Allowcurrency = (Session["Allowappcurrency"] != null && Session["Allowappcurrency"].ToString() != "") ? Session["Allowappcurrency"].ToString() : System.Configuration.ConfigurationManager.AppSettings["currency"].ToString();
    string Terminal_app = Session["TERMINALTYPE"] != null && Session["TERMINALTYPE"].ToString() != "" ? Session["TERMINALTYPE"].ToString() : System.Configuration.ConfigurationManager.AppSettings["TerminalType"].ToString();
    string PNRFlag = System.Configuration.ConfigurationManager.AppSettings["PNRlbl"].ToString();
    string strProduct = System.Configuration.ConfigurationManager.AppSettings["Producttype"].ToString();
    string strImageURL = System.Configuration.ConfigurationManager.AppSettings["LogoUrl"].ToString();
    string strLoaderURL = strImageURL + "/" + strProduct + "/" + "loader.gif?" + fileversion;
}
<style>
    @@media screen and (max-width: 990px) and (min-width: 350px) {
        #getcstprofile {
            padding-right: 10px;
            padding-left: 1px;
        }

        #clrcstprofile {
            padding-right: 1px;
            padding-left: 10px;
        }

        .breakingNews > ul {
            margin: auto !important;
            position: initial !important;
            padding: 0 !important;
        }
    }

    .widthmodi {
        width: 78% !important;
    }

    .table-striped > tbody > tr:nth-of-type(odd) {
        background-color: #ccc !important;
    }

    .table > tbody > tr > td {
        border-bottom: 1px solid #fff !important;
    }

    table.floatThead-table {
        border-top: none;
        border-bottom: none;
        background-color: #fff;
    }
</style>
<link href="~/Content/CSS/Controlpanel.css?@fileversion" rel="stylesheet" />
<link href="~/js/jqxtable/jqx.base.css?@fileversion" rel="stylesheet" />
<link href="~/js/jqxtable/jqx.energyblue.css?@fileversion" rel="stylesheet" />
<link href="~/Content/CSS/chosen.min.css" rel="stylesheet" />
<script src="~/js/CommonJS/jquery-ui-new.js"></script>
<script src="~/js/jqxtable/jqx-all.js?@fileversion"></script>
<script src="~/js/jqxtable/jqxchart.core.js?@fileversion"></script>
<script src="~/js/jqxtable/jqxcore.js?@fileversion"></script>
<script src="~/js/jqxtable/modernizr.js?@fileversion"></script>
<script src="~/js/chosen.jquery.js"></script>
<script src="~/js/commontable_boostrap.js?@fileversion"></script>
<script src="~/js/cbpFWTabs.js?@fileversion"></script>
<script src="~/js/Slider/jquery.easing.1.3.js?@fileversion"></script>
<script src="~/js/jquery.nice-select.js?@fileversion"></script>

<div id="dvsamplemain" class="rightside  ">
    <!--marquee-->
    <div class="col-md-10 col-md-offset-1 col-xs-12" style="display: none">
        <div class="breakingNews bn-yellow animated my_flipInX" id="bn2">
            <div class="bn-title" style="width: auto;">
                <h2 style="display: inline-block;"></h2>
                <span></span>
            </div>

            @Html.Partial("_flashNews");

            <div class="bn-navi">
                <span></span>
                <span></span>
            </div>
        </div>
    </div>
    <!--End of marquee-->


    <div class="col-xs-12 col-md-12 col-sm-12 col-lg-10 col-lg-offset-1 indexz mar-tp-0" style="padding: 0; background: #fff; box-shadow: 0 1px 3px 0 rgba(0,0,0,0.07); margin-top: 4%; border-radius: 2px; padding-top: 0; padding-bottom: 10px;">


        <div class="cls-header m-b-10 changepas_header"><em class="spritepage" style="display: none;"><span class="sprit_agntsal"></span></em><i class="fa fa-money" aria-hidden="true" style="padding-right: 6px;"></i>Agent Sales</div>
        @*1123*@

        <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12" style="margin-top: 20px">
            @*1123*@

            <div class="row">
                <div class="col-xs-12 col-md-2 col-sm-12 col-lg-2 change_new_old_confirm_pass">
                    <span id="FromDate_span" class="clsspntitle">From Date</span>
                    <input id="txt_AirBook_fromdate" readonly="readonly" maxlength="10" runat="server" class="txt-anim" type="text" />
                </div>
                <div class="col-xs-12 col-md-2 col-sm-12 col-lg-2 change_new_old_confirm_pass">
                    <span id="todate_span" class="clsspntitle">To Date</span>
                    <input id="txt_AirToodate" readonly="readonly" maxlength="10" runat="server" class="txt-anim" type="text" />
                </div>
                <div class="col-xs-12 col-md-3 col-sm-12 col-lg-3 change_new_old_confirm_pass">
                    <span id="AirlineName_span" class="clsspntitle">Airline Name</span>
                    <input type="text" class="" style="width: 20%; text-transform: uppercase" id="airlinecodspan" onchange="appendairlinename()">
                    <select class="clscmbanim chosen" id="AirlineName" runat="server" style="width: 78% !important;" onchange="appendairlinecode()"></select>
                </div>
                <div class="col-xs-12 col-md-2 col-sm-12 col-lg-2 change_new_old_confirm_pass">
                    <span class="clsspntitle">Status</span>
                    <select class="clscmbanim chosen" id="op_product" runat="server">
                        <option value="ALL">ALL</option>
                        <option value="Cancelled">Cancelled</option>
                        <option value="Confirmed">Confirmed</option>
                        <option value="Rescheduled">Rescheduled</option>
                        <option value="Void">Void</option>
                    </select>
                </div>
                <div class="col-xs-12 col-md-2 col-sm-12 col-lg-2 change_new_old_confirm_pass" id="displaypayment" style="display: none;">
                    <span class="clsspntitle">Payment Mode</span>
                    <select class="clscmbanim chosen" id="op_Paymentmode" runat="server">
                        <option value="">Select</option>
                        @if (allowcredit == "Y")
                        {
                            <option value="C">Credit</option>
                        }
                        @if (allowtopup == "Y")
                        {
                            <option value="T">Topup</option>
                        }
                    </select>
                </div>
            </div>
            <div class="row">

                <div class="col-xs-12 col-md-4 col-sm-12 col-lg-4 change_new_old_confirm_pass clsMultiCityRoutesnew">
                    @if (Terminal_app == "T")
                    {
                        @*<span id="Transaction_Type" class="clsspntitle">Agency Name</span>
                            <select id="AgentName" class="form-control" style="height: 40px;">
                                <option value="">Select Agency</option>
                            </select>*@
                        <div class="dv-anim input-effect m-0 m-sm-t15">
                            <input class="txt-anim clshideErr losefocus ui-autocomplete-input" type="text" id="AgentName" />
                            <label class="colrcls" for="AgentName">Agency Name</label>
                            <span class="focus-border">
                                <i></i>
                            </span>
                        </div>
                    }
                </div>
                @if (Allowcurrency.IndexOf('|') > 0)
                {
                    <div class="col-xs-12 col-md-2 col-sm-12 col-lg-2 change_new_old_confirm_pass">
                        <span id="spn_currency" class="clsspntitle">Currency Code</span>
                        <select class="clscmbanim change_new_old_confirm_pass" id="op_currencycode">
                            <option value="">Select</option>
                            @for (int i = 0; i < Allowcurrency.Split('|').Length; i++)
                            {
                                <option value='@Allowcurrency.Split('|')[i]'>@Allowcurrency.Split('|')[i]</option>
                            }
                        </select>
                    </div>
                }
                else
                {
                    <div class="col-xs-12 col-md-2 col-sm-12 col-lg-2 change_new_old_confirm_pass" style="display: none;">
                        <select class="clscmbanim change_new_old_confirm_pass" id="op_currencycode" style="display: none;">
                            <option value='@Allowcurrency' selected="selected">@Allowcurrency</option>
                        </select>
                    </div>
                }
                <div class="col-xs-6 col-md-2 col-sm-6 col-lg-2">
                    <input type="button" id="getdet" class="action-button shadow animate color" style="width: 100%; max-width: none;" value="Get Details" onclick="alldetails();" />
                </div>
                <div class="col-xs-6 col-md-2 col-sm-6 col-lg-2">
                    <input type="button" id="clr" class="action-button action-buttonB shadow animate  colorB1" style="width: 100%; max-width: none;" value="Clear" onclick="cleardet();" />
                </div>
                <div class="hidden-xs col-md-2 hidden-sm col-lg-2">
                    @using (Html.BeginForm("ExportData_agenttopup", "CntrlPanel", FormMethod.Post, new { enctype = "multipart/form-data" }))
                    {
                        <input type="submit" id="Btn_excel" class="action-button shadow animate color colorG" style="width: 100%; display: none" value="Export to Excel" />
                    }
                </div>
            </div>
            <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12" style="text-align: right; display: none">
                <label class="label" id="gofilter" title="Filter" onclick="getfilter()" style="color: red; text-align: right">Profile Count(s):<span id="countrow" style="display: inline;"></span></label>
            </div>
            <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12" id="filtr" style="display: none;">
                <table class="fltrtabstyl table">
                    <tr>
                        <td class="ctd" id="paxfltr" onclick="paxfilterdata();">Pax</td>
                        <td class="ctd" id="cityfltr" onclick="cityfilterdata();">City</td>
                        <td class="ctd" id="statfltr" onclick="cityfilterdata();">State</td>
                        <td class="ctd" id="cntryfltr" onclick="cityfilterdata();">Country</td>
                        <td class="ctd">
                            <img src="images/Previous.png" id="closefltr" />
                        </td>
                    </tr>
                </table>
            </div>

            <div id="fltrpax" style="display: none;" class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
                <table class="fltrtabstyl table">
                    <tr>
                        <td class="ctd" id="adultfltr" onclick="paxfilterdata('ADT');">
                            <img src="Images/Adult.png" class="imgcls" /><br />
                            Adult<br />
                            <a class="ctd" id="countadlt"></a>
                        </td>
                        <td class="ctd" id="childfltr" onclick="paxfilterdata('CHD');">
                            <img src="Images/Child.png" class="imgcls" /><br />
                            Child<br />
                            <a class="ctd" id="countchd"></a>
                        </td>
                        <td class="ctd" id="Infant" onclick="paxfilterdata('INF');">
                            <img src="Images/Infant.png" class="imgcls" /><br />
                            Infant<br />
                            <a class="ctd" id="countinfant"></a>
                        </td>
                        <td class="ctd">
                            <img src="images/Previous.png" onclick="goback()" />
                        </td>
                    </tr>
                </table>
            </div>
            <div id="fltrcity" style="display: none;" class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
            </div>
            <div id="fltrstat" style="display: none;" class="col-xs-12 col-md-12 col-sm-12 col-lg-12"></div>
            <div id="fltrcntry" style="display: none;" class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
            </div>


            <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12" style="margin-bottom: 15px">
                <div class="col-xs-6  col-sm-6 col-md-3 col-md-offset-3 col-lg-2 col-lg-offset-4" id="getcstprofile">
                </div>
                <div class="col-xs-6 col-md-3 col-md-offset-right-3 col-sm-6 col-lg-2" id="clrcstprofile">
                </div>

            </div>
            <div id="Div_Char" class="col-xs-12 col-md-12 col-sm-12 col-lg-12"></div>
            <div id="charterror" class="col-xs-12 col-md-12 col-sm-12 col-lg-12"></div>
            <div id="fulltitle" class="col-xs-12 col-md-12 col-sm-12 col-lg-12" style="display: none; color: red; font-weight: bolder; text-align: center;">
                Customer Details<br />
            </div>
            <div id="Div_Char1" class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
            </div>
        </div>
    </div>
</div>
<input type="hidden" id="hdn_agentid" />
<script>
    var terminaltype = "@Terminal_app";

    $(document).ready(function () {
        if (terminaltype == "W") {
            $("#displaypayment").css("display", "block");
        }
        else {
            $("#displaypayment").css("display", "none");
        }
    });

    function cleardivvalue() {
        $("#Div_Char").css("display", "none");
    }


    $(document).ready(function () {

        var currentDate = "@ViewBag.ServerDateTime";
        $("#txt_AirBook_fromdate").val(currentDate);
        $("#txt_AirBook_fromdate").addClass("has-content");
        $("#txt_AirBook_fromdate").datepicker({
            maxDate: currentDate, dateFormat: "dd/mm/yy",
        });
        $("#txt_AirToodate").val(currentDate);
        $("#txt_AirToodate").addClass("has-content");
        $("#txt_AirToodate").datepicker({
            minDate: $("#txt_AirBook_fromdate").val(), maxDate: currentDate, dateFormat: "dd/mm/yy",


        });
        $("#txt_AirBook_fromdate").on('change keyup paste', function () {

            $("#txt_AirToodate").datepicker("destroy");
            $("#txt_AirToodate").datepicker({
                minDate: $("#txt_AirBook_fromdate").val(), maxDate: currentDate, dateFormat: "dd/mm/yy"


            });

        });
        $("#txt_AirToodate").on('change keyup paste', function () {
        });
        $('select').chosen();
        $('#AirlineName_chosen').addClass("widthmodi");

        LoadClient();

        var agentname = "";
        var airlinecode = "";
        $.blockUI({
            message: '<img alt="Please Wait..." src="@strLoaderURL" style="background-color:#fff; border-radius:8px; margin-top:12%;" id="FareRuleLodingImage" />',
            css: { padding: '5px' }
        });
        $.ajax({
            type: "POST",
            url: "@Url.Action("agentnameandid", "CntrlPanel")",
            data: '{}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                if (data.Error != "") {
                    alert(data.Error);
                }
                else {
                    var arrlinename = JSON.parse(data.BARRES);

                    if (arrlinename != null) {

                        airlinecode += '<option value="ALL" >ALL</option>';

                        $.each(arrlinename, function (val, t) {
                            airlinecode += '<option value="' + t._CODE + '" >' + t._NAME + '</option>'
                        });
                        $("#AirlineName").html(airlinecode);
                        $("#AirlineName").chosen('destroy');
                        $("#AirlineName").chosen();
                        $('#AirlineName_chosen').addClass("widthmodi");
                    }
                }

                $.unblockUI();
            },

            error: function (e) {
                $.unblockUI();
                if (e.status == "500") {
                    alert("Session has been Expired.");
                    window.location.href = "@Url.Action("SessionExp", "Redirect")"
                    return false;
                }

            }
        });
    });

    var ClientID = "";
    function LoadClient() {

        $.ajax({
            type: "POST",
            url: "@Url.Action("GetClientData", "HOME")",
            contentType: "application/json; charset=utf-8",
            timeout: 180000,
            dataType: "json",
            success: function (data) {
                var data = data["Data"];
                try {
                    if (data.Status == "01") {


                        var arr = JSON.parse(data.Result);

                        if (data.Status == "01") {
                            $('#AgentName').typeahead('destroy');
                            $('#AgentName').typeahead({
                                source: arr,
                                items: 5,
                                displayField: "CLTNAME",
                                valueField: "CLTCODE",
                                scrollBar: true,
                                onSelect: displayResults,
                            });
                            function displayResults(item) {
                                ClientID = item.value;
                            }
                        }
                        else {
                            $('#AgentName').hide();
                            $('#agentdeti').hide();
                        }

                    }
                    else {
                        $('#AgentName').after("<div class='validation-summary-errors' style='margin-top:30px;'><ul><li> No Agents assigned. </li></ul>");

                        $('#AgentName').hide();
                    }
                }
                catch (err) {
                    console.log(err.message);
                }
            },
            error: function (e) {
                //alert("error");
            }
        });
    }

    function alldetails() {

        $('#alldetails').show();
        $('#fltrpax').hide();
        $('#fltrcity').hide();
        $('#fltrstat').hide();
        $('#fltrcntry').hide();
        $('#fulltitle').hide();
        $('#Div_Char1').hide();
        $('#filtr').hide();

        if ($('#AgentName').val() == "") {
            ClientID = "";
        }
        var AgentId = (terminaltype == "T" ? ClientID : "");//document.getElementById("AgentName").value;
        var AirlineName = document.getElementById("airlinecodspan").value;
        var txt_AirBook_fromdate = document.getElementById("txt_AirBook_fromdate").value;
        var txt_AirToodate = document.getElementById("txt_AirToodate").value;

        txt_AirBook_fromdate = txt_AirBook_fromdate.toString("yyyyMMdd");
        txt_AirToodate = txt_AirToodate.toString("yyyyMMdd");

        var Status = document.getElementById("op_product").value;
        var Paymentmode = document.getElementById("op_Paymentmode").value;
        var Currency = document.getElementById("op_currencycode").value;

        if (Paymentmode == null || Paymentmode == "" && terminaltype == "W") {
            alert("Please select payment mode");
            return false;
        }

        if (Currency == null || Currency == "") {
            alert("Please select currency code");
            return false;
        }

        $.blockUI({
            message: '<img alt="Please Wait..." src="@strLoaderURL" style="background-color:#fff; border-radius:8px; margin-top:12%;" id="FareRuleLodingImage" />',
            css: { padding: '5px' }
        });
        $.ajax({
            type: "POST",
            url: "@Url.Action("getsalepnrdetails", "CntrlPanel")",

            data: '{txt_AirBook_fromdate:"' + txt_AirBook_fromdate + '",txt_AirToodate:"' + txt_AirToodate + '",AirlineName: "' + AirlineName + '",Status:"' + Status + '",AgentId:"' + AgentId + '",AccountType:"' + Paymentmode + '",Currency:"' + Currency + '"}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (json) {
                var result = json.results;
                jsnArr = [];
                var res_column = "";
                if (result[1] != "") {

                    var res = JSON.parse(result[1]);
                    var rescolumn = result[2];
                    var count = res.length;
                    $("#countrow").html(count);
                    $("#gofilter").css("display", "block");
                    getallvalue(result, rescolumn);
                }
                if (result[0] != "") {
                    getallvalue(result, rescolumn);
                }
                var appendiv = document.getElementById('Div_Char').id;
                //   Createtable(result, appendiv, "tablename", "");
                //!function (a) { function b(a, b, c) { if (8 == g) { var d = j.width(), e = f.debounce(function () { var a = j.width(); d != a && (d = a, c()) }, a); j.on(b, e) } else j.on(b, f.debounce(c, a)) } function c(a) { window.console && window.console && window.console.log && window.console.log(a) } function d() { var b = a('<div style="width:50px;height:50px;overflow-y:scroll;position:absolute;top:-200px;left:-200px;"><div style="height:100px;width:100%"></div>'); a("body").append(b); var c = b.innerWidth(), d = a("div", b).innerWidth(); return b.remove(), c - d } function e(a) { if (a.dataTableSettings) for (var b = 0; b < a.dataTableSettings.length; b++) { var c = a.dataTableSettings[b].nTable; if (a[0] == c) return !0 } return !1 } a.floatThead = a.floatThead || {}, a.floatThead.defaults = { cellTag: null, headerCellSelector: "tr:first>th:visible", zIndex: 1001, debounceResizeMs: 10, useAbsolutePositioning: !0, scrollingTop: 0, scrollingBottom: 0, scrollContainer: function () { return a([]) }, getSizingRow: function (a) { return a.find("tbody tr:visible:first>*") }, floatTableClass: "floatThead-table", floatWrapperClass: "floatThead-wrapper", floatContainerClass: "floatThead-container", copyTableClass: !0, debug: !1 }; var f = window._, g = function () { for (var a = 3, b = document.createElement("b"), c = b.all || []; a = 1 + a, b.innerHTML = "<!--[if gt IE " + a + "]><i><![endif]-->", c[0];); return a > 4 ? a : document.documentMode }(), h = null, i = function () { if (g) return !1; var b = a("<table><colgroup><col></colgroup><tbody><tr><td style='width:10px'></td></tbody></table>"); a("body").append(b); var c = b.find("col").width(); return b.remove(), 0 == c }, j = a(window), k = 0; a.fn.floatThead = function (l) { if (l = l || {}, !f && (f = window._ || a.floatThead._, !f)) throw new Error("jquery.floatThead-slim.js requires underscore. You should use the non-lite version since you do not have underscore."); if (8 > g) return this; if (null == h && (h = i(), h && (document.createElement("fthtr"), document.createElement("fthtd"), document.createElement("fthfoot"))), f.isString(l)) { var m = l, n = this; return this.filter("table").each(function () { var b = a(this).data("floatThead-attached"); if (b && f.isFunction(b[m])) { var c = b[m](); "undefined" != typeof c && (n = c) } }), n } var o = a.extend({}, a.floatThead.defaults || {}, l); return a.each(l, function (b) { b in a.floatThead.defaults || !o.debug || c("jQuery.floatThead: used [" + b + "] key to init plugin, but that param is not an option for the plugin. Valid options are: " + f.keys(a.floatThead.defaults).join(", ")) }), this.filter(":not(." + o.floatTableClass + ")").each(function () { function c(a) { return a + ".fth-" + y + ".floatTHead" } function i() { var b = 0; A.find("tr:visible").each(function () { b += a(this).outerHeight(!0) }), Z.outerHeight(b), $.outerHeight(b) } function l() { var a = z.outerWidth(), b = I.width() || a; if (X.width(b - F.vertical), O) { var c = 100 * a / (b - F.vertical); S.css("width", c + "%") } else S.outerWidth(a) } function m() { C = (f.isFunction(o.scrollingTop) ? o.scrollingTop(z) : o.scrollingTop) || 0, D = (f.isFunction(o.scrollingBottom) ? o.scrollingBottom(z) : o.scrollingBottom) || 0 } function n() { var b, c; if (V) b = U.find("col").length; else { var d; d = null == o.cellTag && o.headerCellSelector ? o.headerCellSelector : "tr:first>" + o.cellTag, c = A.find(d), b = 0, c.each(function () { b += parseInt(a(this).attr("colspan") || 1, 10) }) } if (b != H) { H = b; for (var e = [], f = [], g = [], i = 0; b > i; i++) e.push('<th class="floatThead-col"/>'), f.push("<col/>"), g.push("<fthtd style='display:table-cell;height:0;width:auto;'/>"); f = f.join(""), e = e.join(""), h && (g = g.join(""), W.html(g), bb = W.find("fthtd")), Z.html(e), $ = Z.find("th"), V || U.html(f), _ = U.find("col"), T.html(f), ab = T.find("col") } return b } function p() { if (!E) { if (E = !0, J) { var a = z.width(), b = Q.width(); a > b && z.css("minWidth", a) } z.css(db), S.css(db), S.append(A), B.before(Y), i() } } function q() { E && (E = !1, J && z.width(fb), Y.detach(), z.prepend(A), z.css(eb), S.css(eb)) } function r(a) { J != a && (J = a, X.css({ position: J ? "absolute" : "fixed" })) } function s(a, b, c, d) { return h ? c : d ? o.getSizingRow(a, b, c) : b } function t() { var a, b = n(); return function () { var c = s(z, _, bb, g); if (c.length == b && b > 0) { if (!V) for (a = 0; b > a; a++) _.eq(a).css("width", ""); q(); var d = []; for (a = 0; b > a; a++) d[a] = c.get(a).offsetWidth; for (a = 0; b > a; a++) ab.eq(a).width(d[a]), _.eq(a).width(d[a]); p() } else S.append(A), z.css(eb), S.css(eb), i() } } function u(a) { var b = I.css("border-" + a + "-width"), c = 0; return b && ~b.indexOf("px") && (c = parseInt(b, 10)), c } function v() { var a, b = I.scrollTop(), c = 0, d = L ? K.outerHeight(!0) : 0, e = M ? d : -d, f = X.height(), g = z.offset(), i = 0; if (O) { var k = I.offset(); c = g.top - k.top + b, L && M && (c += d), c -= u("top"), i = u("left") } else a = g.top - C - f + D + F.horizontal; var l = j.scrollTop(), m = j.scrollLeft(), n = I.scrollLeft(); return b = I.scrollTop(), function (k) { if ("windowScroll" == k ? (l = j.scrollTop(), m = j.scrollLeft()) : "containerScroll" == k ? (b = I.scrollTop(), n = I.scrollLeft()) : "init" != k && (l = j.scrollTop(), m = j.scrollLeft(), b = I.scrollTop(), n = I.scrollLeft()), !h || !(0 > l || 0 > m)) { if (R) r("windowScrollDone" == k ? !0 : !1); else if ("windowScrollDone" == k) return null; g = z.offset(), L && M && (g.top += d); var o, s, t = z.outerHeight(); if (O && J) { if (c >= b) { var u = c - b; o = u > 0 ? u : 0 } else o = P ? 0 : b; s = i } else !O && J ? (l > a + t + e ? o = t - f + e : g.top > l + C ? (o = 0, q()) : (o = C + l - g.top + c + (M ? d : 0), p()), s = 0) : O && !J ? (c > b || b - c > t ? (o = g.top - l, q()) : (o = g.top + b - l - c, p()), s = g.left + n - m) : O || J || (l > a + t + e ? o = t + C - l + a + e : g.top > l + C ? (o = g.top - l, p()) : o = C, s = g.left - m); return { top: o, left: s } } } } function w() { var a = null, b = null, c = null; return function (d, e, f) { null == d || a == d.top && b == d.left || (X.css({ top: d.top, left: d.left }), a = d.top, b = d.left), e && l(), f && i(); var g = I.scrollLeft(); J && c == g || (X.scrollLeft(g), c = g) } } function x() { if (I.length) { var a = I.width(), b = I.height(), c = z.height(), d = z.width(), e = d > a ? G : 0, f = c > b ? G : 0; F.horizontal = d > a - f ? G : 0, F.vertical = c > b - e ? G : 0 } } var y = k, z = a(this); if (z.data("floatThead-attached")) return !0; if (!z.is("table")) throw new Error('jQuery.floatThead must be run on a table element. ex: $("table").floatThead();'); var A = z.find("thead:first"), B = z.find("tbody:first"); if (0 == A.length) throw new Error("jQuery.floatThead must be run on a table that contains a <thead> element"); var C, D, E = !1, F = { vertical: 0, horizontal: 0 }, G = d(), H = 0, I = o.scrollContainer(z) || a([]), J = o.useAbsolutePositioning; null == J && (J = o.scrollContainer(z).length); var K = z.find("caption"), L = 1 == K.length; if (L) var M = "top" === (K.css("caption-side") || K.attr("align") || "top"); var N = a('<fthfoot style="display:table-footer-group;"/>'), O = I.length > 0, P = !1, Q = a([]), R = 9 >= g && !O && J, S = a("<table/>"), T = a("<colgroup/>"), U = z.find("colgroup:first"), V = !0; 0 == U.length && (U = a("<colgroup/>"), V = !1); var W = a('<fthrow style="display:table-row;height:0;"/>'), X = a('<div style="overflow: hidden;"></div>'), Y = a("<thead/>"), Z = a('<tr class="size-row"/>'), $ = a([]), _ = a([]), ab = a([]), bb = a([]); if (Y.append(Z), z.prepend(U), h && (N.append(W), z.append(N)), S.append(T), X.append(S), o.copyTableClass && S.attr("class", z.attr("class")), S.attr({ cellpadding: z.attr("cellpadding"), cellspacing: z.attr("cellspacing"), border: z.attr("border") }), S.css({ borderCollapse: z.css("borderCollapse"), border: z.css("border") }), S.addClass(o.floatTableClass).css("margin", 0), J) { var cb = function (a, b) { var c = a.css("position"), d = "relative" == c || "absolute" == c; if (!d || b) { var e = { paddingLeft: a.css("paddingLeft"), paddingRight: a.css("paddingRight") }; X.css(e), a = a.wrap("<div class='" + o.floatWrapperClass + "' style='position: relative; clear:both;'></div>").parent(), P = !0 } return a }; O ? (Q = cb(I, !0), Q.append(X)) : (Q = cb(z), z.after(X)) } else z.after(X); X.css({ position: J ? "absolute" : "fixed", marginTop: 0, top: J ? 0 : "auto", zIndex: o.zIndex }), X.addClass(o.floatContainerClass), m(); var db = { "table-layout": "fixed" }, eb = { "table-layout": z.css("tableLayout") || "auto" }, fb = z[0].style.width || ""; x(); var gb, hb = function () { (gb = t())() }; hb(); var ib = v(), jb = w(); jb(ib("init"), !0); var kb = f.debounce(function () { jb(ib("windowScrollDone"), !1) }, 300), lb = function () { jb(ib("windowScroll"), !1), kb() }, mb = function () { jb(ib("containerScroll"), !1) }, nb = function () { m(), x(), hb(), ib = v(), (jb = w())(ib("resize"), !0, !0) }, ob = f.debounce(function () { x(), m(), hb(), ib = v(), jb(ib("reflow"), !0) }, 1); O ? J ? I.on(c("scroll"), mb) : (I.on(c("scroll"), mb), j.on(c("scroll"), lb)) : j.on(c("scroll"), lb), j.on(c("load"), ob), b(o.debounceResizeMs, c("resize"), nb), z.on("reflow", ob), e(z) && z.on("filter", ob).on("sort", ob).on("page", ob), z.data("floatThead-attached", { destroy: function () { var a = ".fth-" + y; q(), z.css(eb), U.remove(), h && N.remove(), Y.parent().length && Y.replaceWith(A), z.off("reflow"), I.off(a), P && (I.length ? I.unwrap() : z.unwrap()), J && z.css("minWidth", ""), X.remove(), z.data("floatThead-attached", !1), j.off(a) }, reflow: function () { ob() }, setHeaderHeight: function () { i() }, getFloatContainer: function () { return X }, getRowGroups: function () { return E ? X.find("thead").add(z.find("tbody,tfoot")) : z.find("thead,tbody,tfoot") } }), k++ }), this } }(jQuery), function (a) { a.floatThead = a.floatThead || {}, a.floatThead._ = window._ || function () { var b = {}, c = Object.prototype.hasOwnProperty, d = ["Arguments", "Function", "String", "Number", "Date", "RegExp"]; return b.has = function (a, b) { return c.call(a, b) }, b.keys = function (a) { if (a !== Object(a)) throw new TypeError("Invalid object"); var c = []; for (var d in a) b.has(a, d) && c.push(d); return c }, a.each(d, function () { var a = this; b["is" + a] = function (b) { return Object.prototype.toString.call(b) == "[object " + a + "]" } }), b.debounce = function (a, b, c) { var d, e, f, g, h; return function () { f = this, e = arguments, g = new Date; var i = function () { var j = new Date - g; b > j ? d = setTimeout(i, b - j) : (d = null, c || (h = a.apply(f, e))) }, j = c && !d; return d || (d = setTimeout(i, b)), j && (h = a.apply(f, e)), h } }, b }() }(jQuery);
                //$(".sticky-header").floatThead({ scrollingTop: 50 });

                $.unblockUI();
            },
            error: function (e) {
                $.unblockUI();
                if (e.status == "500") {
                    alert("Session has been Expired.");
                    window.location.href = "@Url.Action("SessionExp", "Redirect")"
                    return false;
                }
            }
        });
    }

    function cleardet() {
        document.getElementById("AgentName").value = "";
        document.getElementById("airlinecodspan").value = "";
        document.getElementById("AirlineName").value = "ALL";
        document.getElementById("txt_AirBook_fromdate").value;
        document.getElementById("txt_AirToodate").value;
        document.getElementById("Btn_excel").style.display = "none";
        $('#Div_Char').hide(1000);
        $('#fltrpax').hide();
        $('#charterror').hide();
        $('#fltrcity').hide();
        $('#fltrstat').hide();
        $('#fltrcntry').hide();
        $('#fulltitle').hide();
        $('#Div_Char1').hide();
        $('#filtr').hide();
        $('#gofilter').hide();
        $("#AirlineName").chosen('destroy');
        $("#AirlineName").chosen();
        $('#AirlineName_chosen').addClass("widthmodi");

        $("#txt_AirBook_fromdate").val(currentDate);
        $("#txt_AirBook_fromdate").addClass("has-content");
        $("#txt_AirBook_fromdate").datepicker({
            maxDate: currentDate, dateFormat: "dd/mm/yy",
        });
        $("#txt_AirToodate").val(currentDate);
        $("#txt_AirToodate").addClass("has-content");
        $("#txt_AirToodate").datepicker({
            minDate: $("#txt_AirBook_fromdate").val(), maxDate: currentDate, dateFormat: "dd/mm/yy",
        });
        $("#txt_AirBook_fromdate").on('change keyup paste', function () {
            $("#txt_AirToodate").datepicker("destroy");
            $("#txt_AirToodate").datepicker({
                minDate: $("#txt_AirBook_fromdate").val(), maxDate: currentDate, dateFormat: "dd/mm/yy"
            });
        });
        $("#txt_AirToodate").on('change keyup paste', function () {
        });
    }

    function getallvalue(result, res_column) {
        if (result[0] != "") {
            document.getElementById("charterror").style.display = "Block";
            document.getElementById("Div_Char").style.display = "none";
            document.getElementById("charterror").innerHTML = result[0];
            document.getElementById("charterror").style.color = "RED";
            document.getElementById("charterror").style.fontWeight = "bold";
            document.getElementById("charterror").style.textAlign = "center";
            document.getElementById("Btn_excel").style.display = "none";
        }
        else if (result[1] != "") {
            document.getElementById("Btn_excel").style.display = "block";
            document.getElementById("charterror").style.display = "none";
            $('#Div_Char').show(1000);
            var obj = $.parseJSON(result[1]);
            var array_num = res_column.split(",");
            var json = "";
            var dataAdapter = "";
            var datafields = new Array();
            var columns = new Array();
            var k = 0;
            for (var i in obj[0]) {
                k++;
                //if (typeof (obj[0][i]) == "number") {
                if (jQuery.inArray(i, array_num) >= 0) {
                    datafields.push({ name: i, datafield: 'string' });
                    columns.push({ text: i, datafield: i, cellsalign: 'right', align: 'center', width: 100 });
                }
                else if (i == "ord_by") {
                    datafields.push({ name: i, datafield: 'hidden' });
                }
                else if (i == "S PNR") {
                    datafields.push({ name: i, datafield: 'string' });
                    columns.push({ text: "@PNRFlag", datafield: i, cellsalign: 'left', align: 'center', width: 100 });
                }
                else {
                    datafields.push({ name: i, datafield: 'string' });
                    columns.push({ text: i, datafield: i, cellsalign: 'left', align: 'center', width: 100 });
                }
            }
            var Source2 = {
                datatype: "json",
                datafields: datafields,
                localdata: obj
            }
            var dataAdapter = new $.jqx.dataAdapter(Source2);
            $("#Div_Char").jqxGrid(
           {
               width: "100%",
               height: 300,
               source: dataAdapter,
               theme: 'energyblue',
               columns: columns,
           });
        }
    }

    function appendairlinename() {
        var airlinecode = $("#airlinecodspan")[0].value;
        document.getElementById('AirlineName').value = airlinecode.toUpperCase();
        $("#AirlineName").trigger("chosen:updated");
    }

    function appendairlinecode() {
        var airlinecode = $("#AirlineName").val();
        document.getElementById('airlinecodspan').value = airlinecode;
    }

</script>